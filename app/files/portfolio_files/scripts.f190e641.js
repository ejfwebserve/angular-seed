function sliceArgs(a,b){return[].slice.call(a,b||0)}function stripHash(a){var b=a.indexOf("#");return b==-1?a:a.substr(0,b)}function PatchedBrowserService(a,b,c,d){function e(a){try{a.apply(null,sliceArgs(arguments,1))}finally{if(t--,0===t)for(;u.length;)try{u.pop()()}catch(a){c.error(a)}}}function f(a){var b=a.indexOf("#");return b===-1?"":a.substr(b)}function g(a,b){!function c(){angular.forEach(w,function(a){a()}),v=b(c,a)}()}function h(){j(),k()}function i(){try{return p.state}catch(a){}}function j(){x=i(),x=angular.isUndefined(x)?null:x,angular.equals(x,G)&&(x=G),G=x}function k(){z===m.url()&&y===x||(z=m.url(),y=x,angular.forEach(E,function(a){a(m.url(),x)}))}function l(a){try{return decodeURIComponent(a)}catch(b){return a}}var m=this,n=b[0],o=a.location,p=a.history,q=a.setTimeout,r=a.clearTimeout,s={};m.isMock=!1;var t=0,u=[];m.$$completeOutstandingRequest=e,m.$$incOutstandingRequestCount=function(){t++},m.notifyWhenNoOutstandingRequests=function(a){angular.forEach(w,function(a){a()}),0===t?a():u.push(a)};var v,w=[];m.addPollFn=function(a){return angular.isUndefined(v)&&g(100,q),w.push(a),a};var x,y,z=o.href,A=b.find("base"),B=null,C=null,D=null;j(),y=x,m.url=function(b,c,e){if(angular.isUndefined(e)&&(e=null),o!==a.location&&(o=a.location),p!==a.history&&(p=a.history),!D&&C&&b&&(D=q(function(){o.href==C&&(C=null),D=null},0)),b){var g=y===e;if(z===b&&(!d.history||g))return m;var h=z&&stripHash(z)===stripHash(b);return z=b,y=e,!d.history||h&&g?(C=b,h&&!B||(B=b),c?o.replace(b):h?o.hash=f(b):o.href=b):(p[c?"replaceState":"pushState"](e,"",b),j(),y=x),m}var i=o.href.replace(/%27/g,"'");return C&&(i=C),o.href==C&&(C=null),B||i},m.state=function(){return x};var E=[],F=!1,G=null;m.onUrlChange=function(b){return F||(d.history&&angular.element(a).on("popstate",h),angular.element(a).on("hashchange",h),F=!0),E.push(b),b},m.$$checkUrlChange=k,m.baseHref=function(){var a=A.attr("href");return a?a.replace(/^(https?\:)?\/\/[^\/]*/,""):""};var H={},I="",J=m.baseHref();m.cookies=function(a,b){var d,e,f,g,h;if(!a){if(n.cookie!==I)for(I=n.cookie,e=I.split("; "),H={},g=0;g<e.length;g++)f=e[g],h=f.indexOf("="),h>0&&(a=l(f.substring(0,h)),void 0===H[a]&&(H[a]=l(f.substring(h+1))));return H}void 0===b?n.cookie=encodeURIComponent(a)+"=;path="+J+";expires=Thu, 01 Jan 1970 00:00:00 GMT":angular.isString(b)&&(d=(n.cookie=encodeURIComponent(a)+"="+encodeURIComponent(b)+";path="+J).length+1,d>4096&&c.warn("Cookie '"+a+"' possibly not set or overflowed because it was too large ("+d+" > 4096 bytes)!"))},m.defer=function(a,b){var c;return t++,c=q(function(){delete s[c],e(a)},b||0),s[c]=!0,c},m.defer.cancel=function(a){return!!s[a]&&(delete s[a],r(a),e(angular.noop),!0)}}var hg;!function(a){var b=function(){function a(){}return a.prototype.execute=function(){throw new Error("Method not implemented")},a}();a.ContinueStrategy=b;var c=function(){function a(){}return a.prototype.execute=function(){throw new Error("Method not implemented")},a}();a.PromiseStrategy=c}(hg||(hg={}));var hg;!function(a){var b=function(){function a(){}return a.prototype.handle=function(a){return this._successor?this._successor.handle(a):a},a.prototype.setSuccessor=function(a){this._successor=a},a}();a.Handler=b}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(){}return a.prototype.isUndefinedKey=function(a,b){var c=Array.isArray(b)?b:b.split("."),d=c[0]in a,e="undefined"!=typeof a[c[0]];return!d||!e||c.length>1&&this.isUndefinedKey(a[c[0]],c.slice(1))},a.prototype.get=function(a,b){var c=Array.isArray(b)?b:b.split("."),d=c[0]in a,e="undefined"!=typeof a[c[0]];return d&&e&&c.length>1?this.get(a[c[0]],c.slice(1)):a[b]},a.prototype.getValue=function(a,b,c){return this.isUndefinedKey(a,b)?c:this.get(a,b)},a}();a.utilitySvc=b}(b=a.core||(a.core={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(a,b){this.$window=a,this.matchmedia=b,this.isIOSResult=void 0}return a.prototype.isChromeOS=function(){var a=new RegExp("s*CrOSs*"),b=navigator.userAgent;return a.test(b)},a.prototype.isIOS=function(){return angular.isUndefined(this.isIOSResult)&&(this.isIOSResult=/iPad|iPhone|iPod/.test(navigator.platform)),this.isIOSResult},a.prototype.isNative=function(){var a=this.getNativeAppName();return null!==a&&a.length>0},a.prototype.isNativeIOS=function(){var a=this.getNativeAppName();return/SchwabMercuryiOS/i.test(a)},a.prototype.isNativeAndroid=function(){var a=this.getNativeAppName();return/SchwabMercuryAndroid/i.test(a)},a.prototype.isSmallScreen=function(){return this.matchmedia.isTablet()||this.matchmedia.isTablet()&&this.matchmedia.isPortrait()||this.matchmedia.isPhone()},a.prototype.isLargeScreen=function(){return!this.isSmallScreen()},a.prototype.getNativeAppName=function(){var a=this.$window.localStorage.getItem("hg_native_app_name");return a&&(a=JSON.parse(a)),a},a.prototype.getNativeAppVersion=function(){var a=this.$window.localStorage.getItem("hg_native_app_version");return a&&(a=JSON.parse(a)),a},a.prototype.getNativeAppDeviceName=function(){var a=this.$window.localStorage.getItem("hg_native_app_device_name");return a&&(a=JSON.parse(a)),a},a.prototype.getNativeAppDeviceOs=function(){var a=this.$window.localStorage.getItem("hg_native_app_device_os");return a&&(a=JSON.parse(a)),a},a.prototype.getNativeAppLocale=function(){var a=this.$window.localStorage.getItem("hg_native_app_locale");return a&&(a=JSON.parse(a)),a},a.prototype.getNativeAppDeviceRes=function(){var a=this.$window.localStorage.getItem("hg_native_app_device_res");return a&&(a=JSON.parse(a)),a},a.prototype.setNativeAppSettings=function(a,b,c,d,e,f){null!==a&&"undefined"!=typeof a&&"null"!==a&&this.$window.localStorage.setItem("hg_native_app_name",JSON.stringify(a)),null!==b&&"undefined"!=typeof b&&"null"!==b&&this.$window.localStorage.setItem("hg_native_app_version",JSON.stringify(b)),null!==c&&"undefined"!=typeof c&&"null"!==c&&this.$window.localStorage.setItem("hg_native_app_device_name",JSON.stringify(c)),null!==d&&"undefined"!=typeof d&&"null"!==d&&this.$window.localStorage.setItem("hg_native_app_device_os",JSON.stringify(d)),null!==e&&"undefined"!=typeof e&&"null"!==e&&this.$window.localStorage.setItem("hg_native_app_locale",JSON.stringify(e)),null!==f&&"undefined"!=typeof f&&"null"!==f&&this.$window.localStorage.setItem("hg_native_app_device_res",JSON.stringify(f))},a.$inject=["$window","matchmedia"],a}();a.deviceSvc=b}(b=a.core||(a.core={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b;!function(a){var b=function(){function a(){}return a}();a.Document=b}(b=a.hal||(a.hal={}))}(b=a.core||(a.core={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b;!function(a){var b=function(){function a(a,b,c){this.href=a,this.rel=b,this.presentationStyle=c}return a}();a.Link=b;var c=function(){function a(a,b,c,d){this.href=a,this.rel=b,this.text=c,this.selectedText=d}return a}();a.TextualLink=c}(b=a.hal||(a.hal={}))}(b=a.core||(a.core={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b;!function(a){var b=function(){function b(){}return b.prototype.addLink=function(a,b,c){angular.isUndefined(a._links)&&(a._links={}),angular.isUndefined(a._links[b])&&(a._links[b]=[]),a._links[b].push(c)},b.prototype.addTextualLink=function(a,b,c){angular.isUndefined(a._links)&&(a._links={}),angular.isUndefined(a._links[b])&&(a._links[b]=[]),a._links[b].push(c)},b.prototype.addLinkDocument=function(a,b,c){angular.isUndefined(a._links)&&(a._links={}),angular.isUndefined(a._links[b])&&(a._links[b]=[]),a._links[b].push(c)},b.prototype.addItemDocument=function(a,b,c){angular.isUndefined(a.items)&&(a.items={}),angular.isUndefined(a.items[b])&&(a.items[b]=[]),a.items[b].push(c)},b.prototype.addCurie=function(b,c,d,e){var f=new a.Link(d);f.name=c,f.templated=e,this.addLink(b,"curies",f)},b.prototype.addEmbedded=function(a,b,c){angular.isUndefined(a._embedded)&&(a._embedded={}),angular.isUndefined(a._embedded[b])&&(a._embedded[b]=[]),a._embedded[b].push(c)},b.prototype.setStatus=function(a,b){a._status=b},b.prototype.setLocation=function(a,b){a._location=[],a._location.push(b)},b.prototype.createRedirectDocument=function(b,c,d,e){var f=new a.Document;return this.addLink(f,"self",new a.Link(b,c)),this.setStatus(f,"302"),this.setLocation(f,new a.Link(d,e)),f},b}();a.halDocumentSvc=b}(b=a.hal||(a.hal={}))}(b=a.core||(a.core={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b;!function(a){var b=function(){function a(a,b,c){this.hgJs2nManagerSvc=a,this.key="COMMON",this.contextId="GLOBAL",this.key=b?b:"COMMON",this.contextId=c?c:"GLOBAL"}return a.prototype.init=function(a){},a.prototype.dispose=function(){},a}();a.js2nServiceBase=b}(b=a.js2n||(a.js2n={}))}(b=a.core||(a.core={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b;!function(a){var b=function(){function a(a,b,c,d,e){this.service=a,this.$timeout=b,this.name=c,this.context=d,this.correlation=e}return a.prototype.register=function(a,b){var c=this,d=this.$timeout(function(){a.reject("Time out")},12e4);b.registerHandlerCallback(this.name,this.context,function(b,e){c.$timeout.cancel(d),c.service.sendAck(b),e.unregisterHandler(c.name,c.context),a.resolve(b),c.service.unRegisterHandler(c.name)})},a}();a.js2nCallbackEventHandler=b}(b=a.js2n||(a.js2n={}))}(b=a.core||(a.core={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b;!function(a){var b=function(){function b(a,b){this.$q=a,this.$timeout=b,this.bridgeImpl=Mobile.Core.Bridge.getInstance(),this.bridgeImpl.start()}return b.prototype.registerService=function(a){this.bridgeImpl.loadService(a)},b.prototype.registerEvent=function(a,b,c,d){var e=_.find(this.bridgeImpl._commandHandlers,function(c){return c.Type==a&&c.Context==b});e||this.bridgeImpl.registerHandlerCallback(a,b,c,d)},b.prototype.send=function(a,b,c,d){this.bridgeImpl.raiseEvent(this.createMessage(a,b||this.uuid(),c,d||"GLOBAL"))},b.prototype.sendAsync=function(b,c,d,e){var f=this.$q.defer();try{this.handlers||(this.handlers=[]);var g=this.createMessage(b,c,d,e),h=this.uuid();g.Data.callback=h;var i=new a.js2nCallbackEventHandler(this,this.$timeout,h,e,c);return i.register(f,this.bridgeImpl),this.handlers.push(i),this.bridgeImpl.raiseEvent(g),f.promise}catch(a){f.reject()}},b.prototype.sendAck=function(a){this.send("AckEvent",a.CorrelationId,null,a.Context)},b.prototype.unRegisterHandler=function(a){var b=_.find(this.handlers,function(b){return b.name===a}),c=this.handlers.indexOf(b,0);void 0!=c&&this.handlers.splice(c,1)},b.prototype.guard=function(a){return a.Context=a.Context?a.Context:"GLOBAL",a.CorrelationId=a.CorrelationId?a.CorrelationId:this.uuid(),a.Data=a.Data?a.Data:{},a.Complete="1",a},b.prototype.createMessage=function(a,b,c,d){var e=new Mobile.Core.Event(a,d,b,c,"OK","");return this.guard(e)},b.prototype.uuid=function(){function a(a){var b=(Math.random().toString(16)+"000000000").substr(2,8);return a?"-"+b.substr(0,4)+"-"+b.substr(4,4):b}return a(!1)+a(!0)+a(!0)+a(!1)},b.$inject=["$q","$timeout"],b}();a.js2nManagerSvc=b}(b=a.js2n||(a.js2n={}))}(b=a.core||(a.core={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(b){var c=function(a){function b(b){a.call(this,b,"ROUTER","GLOBAL"),this.hgJs2nManagerSvc=b}return __extends(b,a),b.prototype.sendWebReady=function(){this.hgJs2nManagerSvc.send("WebReadyEvent")},b.prototype.sendShowWeb=function(){this.hgJs2nManagerSvc.send("ShowWeb")},b.prototype.sendHideWeb=function(){this.hgJs2nManagerSvc.send("HideWeb")},b.prototype.sendAppLaunchScreenNavigationEvent=function(){var a={action:{href:"hg-app://showLaunchScreen",rel:"app",context:"GLOBAL"}};return this.hgJs2nManagerSvc.send("NavigationEvent",null,a,"GLOBAL")},b.prototype.sendNavigationEvent=function(a){var b={action:{href:a,rel:"app",context:"GLOBAL"}};return this.hgJs2nManagerSvc.send("NavigationEvent",null,b,"GLOBAL")},b.$inject=["hgJs2nManagerSvc"],b}(a.core.js2n.js2nServiceBase);b.routerJs2nService=c}(b=a.router||(a.router={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(){}return a.prototype.execute=function(a){throw new Error("Not Implemented")},a.prototype.setSuccessor=function(a){return this.successor?this.successor.setSuccessor(a):this.successor=a,a},a.prototype.invokeSuccessor=function(a,b){return b.continue&&this.successor?this.successor.execute(a):b},a.prototype.redirect=function(a){return{continue:!1,redirect:a}},a}();a.routeChangeStrategyBase=b}(b=a.router||(a.router={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(){}return a.prototype.start=function(a){},a.prototype.success=function(a){},a}();a.routeChangeHandlerBase=b}(b=a.router||(a.router={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(a){var b=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.execute=function(a){return this.invokeSuccessor(a,{continue:!0})},b}(a.routeChangeStrategyBase);a.routeChangeBeginStrategy=b}(b=a.router||(a.router={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(a){var b=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.execute=function(a){return this.invokeSuccessor(a,{continue:!0})},b}(a.routeChangeStrategyBase);a.routeChangeEndStrategy=b}(b=a.router||(a.router={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(a){var b=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.execute=function(a){return this.invokeSuccessor(a,{continue:!0})},b}(a.routeChangeStrategyBase);a.routeChangeLogger=b}(b=a.router||(a.router={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(a){var b=function(a){function b(b,c){a.call(this),this.hgDeviceSvc=b,this.hgRouterJs2nSvc=c}return __extends(b,a),b.prototype.isIos=function(a){return!!this.hgDeviceSvc.isNativeIOS()&&a.toState.nativeIos},b.prototype.isAndroid=function(a){return!!this.hgDeviceSvc.isNativeAndroid()&&a.toState.nativeAndroid},b.prototype.show=function(a){return!1},b.prototype.execute=function(a){return this.hgDeviceSvc.isNative()&&(this.isIos(a)||this.isAndroid(a)||"root"!==a.toState.name&&this.hgRouterJs2nSvc.sendShowWeb()),this.invokeSuccessor(a,{continue:!0})},b.$inject=["hgDeviceSvc","hgRouterJs2nSvc"],b}(a.routeChangeStrategyBase);a.routeChangeShowWebStrategy=b}(b=a.router||(a.router={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(a){var b=function(a){function b(b,c,d){a.call(this),this.$timeout=b,this.hgDeviceSvc=c,this.hgRouterJs2nSvc=d}return __extends(b,a),b.prototype.isIos=function(a){return!!this.hgDeviceSvc.isNativeIOS()&&(!angular.isUndefined(a.toState.nativeIos)&&a.toState.nativeIos)},b.prototype.isAndroid=function(a){return!!this.hgDeviceSvc.isNativeAndroid()&&(!angular.isUndefined(a.toState.nativeAndroid)&&a.toState.nativeAndroid)},b.prototype.show=function(a){return!1},b.prototype.execute=function(a){return this.hgDeviceSvc.isNative()&&(this.isIos(a)||this.isAndroid(a))&&"login"!==a.toState.name&&"launch"!==a.toState.name&&"root"!==a.toState.name&&this.hgRouterJs2nSvc.sendHideWeb(),this.invokeSuccessor(a,{continue:!0})},b.$inject=["$timeout","hgDeviceSvc","hgRouterJs2nSvc"],b}(a.routeChangeStrategyBase);a.routeChangeHideWebStrategy=b}(b=a.router||(a.router={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(a){var b=function(a){function b(b,c){a.call(this),this.hgDeviceSvc=b,this.hgRouterJs2nSvc=c}return __extends(b,a),b.prototype.isIos=function(a){return!!this.hgDeviceSvc.isNativeIOS()&&a.toState.nativeIos},b.prototype.isAndroid=function(a){return!!this.hgDeviceSvc.isNativeAndroid()&&a.toState.nativeAndroid},b.prototype.execute=function(a){return this.hgDeviceSvc.isNative()&&(this.isIos(a)||this.isAndroid(a)||this.hgRouterJs2nSvc.sendWebReady()),this.invokeSuccessor(a,{continue:!0})},b.$inject=["hgDeviceSvc","hgRouterJs2nSvc"],b}(a.routeChangeStrategyBase);a.routeChangeWebReadyStrategy=b}(b=a.router||(a.router={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(a){var b=function(a){function b(b,c){a.call(this),this.$rootScope=b,this.hgDeviceSvc=c}return __extends(b,a),b.prototype.isIos=function(a){return!!this.hgDeviceSvc.isNativeIOS()&&!angular.isUndefined(a.toState.nativeIos)},b.prototype.isAndroid=function(a){return!!this.hgDeviceSvc.isNativeAndroid()&&a.toState.nativeAndroid},b.prototype.execute=function(a){return this.hgDeviceSvc.isNative()&&(this.$rootScope.animateStyle=""),this.invokeSuccessor(a,{continue:!0})},b.$inject=["$rootScope","hgDeviceSvc"],b}(a.routeChangeStrategyBase);a.routeChangeAnimationStrategy=b}(b=a.router||(a.router={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(a){var b=function(a){function b(b,c,d,e){a.call(this),this.hgDeviceSvc=b,this.$location=c,this.$rootScope=d,this.hgUtilitySvc=e}return __extends(b,a),b.prototype.execute=function(a){return this.hgDeviceSvc.isNativeAndroid()&&this.hgUtilitySvc.getValue(this.$rootScope,"session.isLoggedIn",!1)&&("launch"==a.toState.name||"root"==a.toState.name)?this.redirect("charts"):this.invokeSuccessor(a,{continue:!0})},b.$inject=["hgDeviceSvc","$location","$rootScope","hgUtilitySvc"],b}(a.routeChangeStrategyBase);a.routeChangeClearHistoryStrategy=b}(b=a.router||(a.router={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(a){var b=function(a){function b(b,c){a.call(this),this.hgDeviceSvc=b,this.hgRouterJs2nSvc=c}return __extends(b,a),b.prototype.isIos=function(a){return!!this.hgDeviceSvc.isNativeIOS()&&(!angular.isUndefined(a.toState.nativeIos)&&a.toState.nativeIos)},b.prototype.isAndroid=function(a){return!!this.hgDeviceSvc.isNativeAndroid()&&(!angular.isUndefined(a.toState.nativeAndroid)&&a.toState.nativeAndroid)},b.prototype.execute=function(a){return this.hgDeviceSvc.isNative()&&this.isAndroid(a)&&angular.isDefined(a.toState.nativeAndroidState)&&this.hgRouterJs2nSvc.sendNavigationEvent(a.toState.nativeAndroidState),this.invokeSuccessor(a,{continue:!0})},b.$inject=["hgDeviceSvc","hgRouterJs2nSvc"],b}(a.routeChangeStrategyBase);a.routeChangeRaiseNativeNavigationEventStrategy=b}(b=a.router||(a.router={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(a){var b=function(a){function b(b,c,d,e){a.call(this),this.hgDeviceSvc=b,this.hgTaggingSvc=c,this.hgContextSvc=d,this.$rootScope=e}return __extends(b,a),b.prototype.isIos=function(a){return!!this.hgDeviceSvc.isNativeIOS()&&a.toState.nativeIos},b.prototype.isAndroid=function(a){return!!this.hgDeviceSvc.isNativeAndroid()&&a.toState.nativeAndroid},b.prototype.show=function(a){return!1},b.prototype.execute=function(a){this.hgDeviceSvc.isNative()&&!this.isIos(a)&&!this.isAndroid(a);var b=(a.toState.url,a.toState.name),c=this.$rootScope.session.isLoggedIn,d=this.$rootScope.isIIP;if(this.hgTaggingSvc.setApiUrl("//www.schwab.com"),b){if(d){var e=this.hgContextSvc.customization.getAdvisorInformation().FirmName;e=""==e?"NO_FIRMNAME":e;var f=this.hgContextSvc.customization.getSchwabFirmId();this.hgTaggingSvc.setIIPData(e+"|"+f)}this.hgTaggingSvc.setLoggedInFlag(c),this.hgTaggingSvc.trkPage(b,a.toParams)}return this.invokeSuccessor(a,{continue:!0})},b.$inject=["hgDeviceSvc","hgTaggingSvc","hgContextSvc","$rootScope"],b}(a.routeChangeStrategyBase);a.routeChangeTaggingStrategy=b}(b=a.router||(a.router={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(a){this.$stateProvider=a,this.$get.$inject=["$rootScope","$state","hgRouteChangeBeginStrategy","hgRouteChangeEndStrategy"]}return a.prototype.$get=function(a,b,d,e){return new c(a,b,d,e)},a.prototype.registerRoute=function(a,b){return this.$stateProvider.state(a,b),this},a.prototype.register=function(a){var b=this;a&&a.routes&&a.routes.length>0&&a.routes.forEach(function(a){b.registerRoute(a.key,a.route)})},a.$inject=["$stateProvider"],a}();a.routerServiceProvider=b;var c=function(){function a(a,b,c,d){this.$rootScope=a,this.$state=b,this.beforeRouteChangeStrategy=c,this.afterRouteChangeStrategy=d,this.init()}return a.prototype.init=function(){var a=this;this.$rootScope.$on("$stateChangeStart",function(b,c,d,e,f){a.handleStateChangeStart(b,c,d,e,f)}),this.$rootScope.$on("$stateChangeSuccess",function(b,c,d,e,f){a.handleStateChangeSuccess(b,c,d,e,f)})},a.prototype.createRouteChangeRequest=function(a,b,c,d,e){return{event:a,toState:b,toParams:c,fromState:d,fromParams:e}},a.prototype.findHandlers=function(a){return angular.isUndefined(this.handlers)||0==this.handlers.length?[]:_.filter(this.handlers,function(b){return b.routeKey===a.toState.name})},a.prototype.handleStateChangeStart=function(a,b,c,d,e){if(this.beforeRouteChangeStrategy){var f=this.createRouteChangeRequest(a,b,c,d,e),g=this.beforeRouteChangeStrategy.execute(f);g.continue?this.findHandlers(f).forEach(function(a){a.start&&a.start(f)}):(a.preventDefault(),g.redirect&&this.$state.go(g.redirect,null,{location:"replace",notify:!0,reload:!0}))}},a.prototype.handleStateChangeSuccess=function(a,b,c,d,e){if(this.afterRouteChangeStrategy){var f=this.createRouteChangeRequest(a,b,c,d,e);this.afterRouteChangeStrategy.execute(f),this.findHandlers(f).forEach(function(a){a.success&&a.success(f)})}},a.prototype.registerHandler=function(a){angular.isUndefined(this.handlers)&&(this.handlers=[]),this.handlers.push(a)},a}();a.routerService=c}(b=a.router||(a.router={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function b(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){this.$rootScope=a,this.$q=b,this.$window=c,this.$timeout=d,this.$state=e,this.$filter=f,this.contextSvc=g,this.hgCommonJs2nSvc=h,this.authSvc=i,this.crossOriginMessageSvc=j,this.externalAccountSvc=k,this.hgEnrollmentCommonSvc=l,this.hgRemoteAssetSvc=m,this.managedVersionSvc=n,this.authJs2nSvc=o,this.hgRouterJs2nSvc=p,this.hgProgramSelectorSvc=q,this.$cookies=r,this.webReadyList=["launch","charts.accountSettings","charts.activity","cancelLogin","getStarted","message","getStartedModal"],this.cookies=r}return b.prototype.handleStateChangeStart=function(a,b,c,d,e){var f=!0;switch(this.$rootScope.pageTitle=b.pageTitle,b.publicAccess&&(f=!1),this.contextSvc.setPreviousState(d),b.name){case this.contextSvc.appConfig.defaultSecureRouteState:this.contextSvc.device.isNativeIOS()&&this.raiseUrgentNotificationEvent();break;case"root":if(this.authSvc.identityProviderIsOTPCompleteEvent(a))this.authSvc.goToPostLoginFromInterventionStrategy();else{var g=this.authSvc.identityProviderLoginMode(a),h=this.cookies.get("SSO");if(void 0!==h&&null!==h&&1===g&&(g=2,document.cookie="SSO=;expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/;domain=.schwab.com"),this.$rootScope.session.isLoggedIn&&1===g)a.preventDefault(),this.go(this.contextSvc.appConfig.defaultSecureRouteState);else if(a.preventDefault(),2===g||3===g||void 0!==h&&null!==h)if(this.hgCommonJs2nSvc.raiseRedirectEndEvent(),this.contextSvc.isInIframe()){var i={type:"loginCompleteEvent",context:this.contextSvc.appConfig.hgUIMessageContext,data:{mode:g}};this.crossOriginMessageSvc.postMessage(i,"*",2)}else this.authSvc.redirectPostLogin(g);else this.$state.go("launch")}break;case"launch":break;case"account":a.preventDefault();var j=c.accountId;j&&this.goToAccount(j);case"logout":this.authSvc.logout();case"cancelLogin":a.preventDefault(),this.contextSvc.device.isNative()?this.go("launch",null,null,"none"):this.goUrl({web:"public://",mobile:null});break;case"modalBackdrop":var k=this.contextSvc.shouldShowModalBackdrop();k?this.contextSvc.setShowModalBackdrop("false"):(a.preventDefault(),this.go("launch","none"));break;default:f&&!this.$rootScope.session.isLoggedIn&&(this.contextSvc.setPendingNavigationStateData(b,c),a.preventDefault())}},b.prototype.invokePostLoginStateChange=function(){this.$rootScope.dismissMessage(this.authSvc.LOGOUT_MESSAGE),this.continuePostLoginStateChange()},b.prototype.continuePostLoginStateChange=function(){var a,b=this,c=this.contextSvc.getPendingNavigationState(),d=!1;c&&c.length>0&&(a=this.contextSvc.getPendingNavigationStateParams(),d=!0),this.$rootScope.accounts.length<=0?this.$rootScope.$broadcast("LOGIN_WITH_NO_MERCURY_ACCOUNTS"):this.contextSvc.device.isNative()?(this.authSvc.goToPostLoginFromInterventionStrategy(),this.contextSvc.device.isNativeIOS()&&this.$state.go("charts")):this.$rootScope.isIIP?this.contextSvc.customization.getAllFirms().length>1&&1==this.hgProgramSelectorSvc.hasMultiplePrograms()?this.$state.go("programSelector"):this.contextSvc.customization.getAllFirms().length>0&&this.contextSvc.device.isSmallScreen()?this.$state.go("programSelector"):this.contextSvc.customization.getAllFirms().length>0&&this.hgProgramSelectorSvc.setDefaultProgram().then(function(){d?(b.contextSvc.clearPendingNavigationStateData(),b.$state.go(c,a)):b.externalAccountSvc.hasTrialDeposits().then(function(a){a?b.$state.go("trialDeposits.trialDepositInitiation"):b.$state.go("charts")})}):d?(this.contextSvc.clearPendingNavigationStateData(),this.$state.go(c,a)):this.externalAccountSvc.hasTrialDeposits().then(function(a){a?b.$state.go("trialDeposits.trialDepositInitiation"):b.$state.go("charts")})},b.prototype.navigateTOThisState=function(a,b){this.$state.go(a,b)},b.prototype.goNativeToWeb=function(a){this.$rootScope.animateStyle="",this.$state.go(a)},b.prototype.go=function(a,b,c,d){a==this.contextSvc.appConfig.defaultSecureRouteState&&this.contextSvc.device.isNative()?this.goImpl(a,b,c,d):this.contextSvc.device.isNativeIOS()?this.goImpl(a,b,c,d):this.goImpl(a,b,c,d)},b.prototype.goImpl=function(a,b,c,d){var e=this;this.contextSvc.device.isSmallScreen()&&"none"!=d?(this.$rootScope.animateStyle=d||"slide-left",this.$timeout(function(){e.$state.go(a,b,c),e.$timeout(function(){e.$rootScope.animateStyle=""},1e3)},100)):(this.$rootScope.animateStyle="",this.$state.go(a,b,c))},b.prototype.goUrl=function(b){var c=null;c=this.$rootScope.deviceInfo.isNative()?b?b.mobile:null:b?b.web:null;var d=a.utils.stringToUrl(c);if(null!==d)switch(d.protocol){case"public:":var e=this.contextSvc.getPublicReturnUrl(),f=this.contextSvc.getWhiteListReturnUrls();e&&e.length>0&&this.publicReturnUrlInWhitelist(e,f)?this.$window.location.href=e:this.$window.location.href=this.$window.location.protocol+"//"+this.$window.location.host;break;case"hg-app:":d.host&&"showMenu"==d.host?this.hgCommonJs2nSvc.showMenu():(this.hgCommonJs2nSvc.navigateToApp(),this.$state.go("launch"));break;default:this.$window.location.href=c}},b.prototype.publicReturnUrlInWhitelist=function(b,c){var d=!1,e=a.utils.stringToUrl(b);if(e&&0==e.protocol.indexOf("http")){var f=e.hostname;if(c)for(var g=0;g<c.length;g++)if(f.indexOf(c[g])>=0){d=!0;break}}return d},b.prototype.getContentAppState=function(a){var b="",c=this.$state.current.name,d=c.split(".");return d&&d.length>=0&&(b=a?d[0]:d[0]+".detail"),b},b.prototype.processInvalidState=function(){this.$rootScope.session&&this.$rootScope.session.isLoggedIn?this.go("messageSecure",{messageId:4},"","none"):this.go("message",{messageId:4},"","none")},b.prototype.goToUnsecureMessagePage=function(a){this.go("message",{messageId:a},"","none")},b.prototype.raiseUrgentNotificationEvent=function(){var a=this,b=a.$rootScope.isIIP?"GLOBAL-URGENT-NOTIFICATION-IOS-AS":"SIP-GLOBAL-URGENT-NOTIFICATION-IOS",c="FILE";this.hgCommonJs2nSvc.isIOS()&&this.contextSvc.shouldSendNativeUNEvent()&&this.hgRemoteAssetSvc.getRemoteAsset(b,c).then(function(b){b&&b.label&&(a.hgCommonJs2nSvc.raiseUrgentNotificationEvent(b),a.contextSvc.setNativeUNMessageSent())}).catch(function(a){console.error("error -"+a)})},b.prototype.goToAccount=function(a){var b=_.find(this.$rootScope.accounts,function(b){return b.portfolioRefId==a});this.contextSvc.setActiveAccount(b,!0),this.$state.go("charts")},b}();a.stateSvc=b}(b=a.app||(a.app={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){this.hgCommonJs2nSvc=m,this.cache=n,this.$timeout=o,this.$rootScope=a,this.identity=null,this.q=b,this.window=c,this.http=d,this.$filter=f,this.device=g,this.customization=h,this.halDocumentSvc=i,this.logger=e,this.appConfig=j,this.localResources=k,this.navigationConfigurations=l,this.spinnerState=!1,this.$rootScope.Desktop=this.isDesktop()}return a.prototype.hasStorage=function(){return"undefined"!=typeof Storage},a.prototype.showSpinner=function(){if(!this.spinnerState)if(this.spinnerState=!0,this.device.isNative())this.hgCommonJs2nSvc.showSpinner();else{this.$rootScope.showSpin=!0;var a=angular.element(".spinner-image");a&&a.show()}},a.prototype.hideSpinner=function(a){if(this.spinnerState||a)if(this.spinnerState=!1,this.device.isNative())this.hgCommonJs2nSvc.hideSpinner();else{this.$rootScope.showSpin=!1;var b=angular.element(".spinner-image");b&&b.hide()}},a.prototype.getSpinnerState=function(){return this.spinnerState},a.prototype.getActiveMenuStateName=function(){return this.activeMenuStateName=this.window.sessionStorage.getItem("ACTIVE_MENU_STATE_NAME"),this.activeMenuStateName},a.prototype.setActiveMenuStateName=function(a){this.activeMenuStateName=a,this.window.sessionStorage.setItem("ACTIVE_MENU_STATE_NAME",this.activeMenuStateName)},a.prototype.shouldShowModalBackdrop=function(){var a=this.window.sessionStorage.getItem("SHOW_MODAL_BACKDROP");return!!a},a.prototype.setShowModalBackdrop=function(a){this.window.sessionStorage.setItem("SHOW_MODAL_BACKDROP",a)},a.prototype.shouldSendNativeUNEvent=function(){var a=this.window.sessionStorage.getItem("UN_IOS_EVENT_SENT");return!a},a.prototype.setPortfolioChartToolTipShown=function(a){this.window.localStorage.setItem("PORTFOLIO_CHART_TOOL_TIP_SHOWN",a)},a.prototype.shouldShowPortfolioChartToolTip=function(){var a=this.window.localStorage.getItem("PORTFOLIO_CHART_TOOL_TIP_SHOWN");return!a},a.prototype.setNativeUNMessageSent=function(){this.window.sessionStorage.setItem("UN_IOS_EVENT_SENT","true")},a.prototype.processMe=function(a,b){var c=this,d=this,e=d.getSessionData(),f=this.q.defer(),g=this.appConfig.clientApiUrl+"/profile/me";1==a&&d.cache.cache.removeAll(),1==b&&angular.isUndefined(d.cache.cache.get(g))&&(g+="?preferences=false");var h=this.http.get(g);
return h.success(function(g){var h=d.displayName(g);if(e.totalBalanceValue=0,e.userId=g.UserId,e.brkrCustId=g.BrkrCustId,1!=b&&(e.preferences=g.PreferencesInfo,e.iipPreferences=g.IipPreferencesInfo),e.mercuryAccounts=[],e.firmInfo){d.customization.setAllFirms(g.FirmInfo);var i=_.find(g.FirmInfo,function(a){return a.FirmId===e.firmInfo.FirmId});e.firmInfo=i,c.setSessionData(e)}g.MercuryAccounts=c.filterSIPAccounts(g.MercuryAccounts,g.FirmInfo),_.forEach(g.MercuryAccounts,function(a){if(a.AccountInfo&&(c.isSIP()&&c.isSIPAccount(a)||c.isIIP()&&!c.isSIPAccount(a))){var b;a.AccountInfo.CommonFields&&(b=a.AccountInfo.CommonFields.AccountType),a.Drift||(a.Drift=new Object),a.Drift&&null==a.Drift&&(a.Drift=new Object),e.mercuryAccounts.push({name:d.getAccountName(a),acctType:b,accountStatus:a.AccountStatus||"NotFunded",branchCode:a.AccountInfo.AccountProfile?a.AccountInfo.AccountProfile.SchwabBranchCode:"",accountNumber:a.AccountInfo.AccountNumber,brkrAcctId:c.trimLeading(a.AccountInfo.AccountNumber),maskedAcctNumber:c.maskAcct(a.AccountInfo.AccountNumber),portfolioRefId:a.AccountInfo.Id,id:a.AccountInfo.Id,balance:a.Drift&&a.Drift.TotalValue?c.$filter("currency")(a.Drift.TotalValue,"$",2):"$0.00",isActive:!0,drift:a.Drift,model:a.Model,AcctIdDisplay:a.AcctIdDisplay,AccountInfo:a.AccountInfo}),c.$rootScope.$broadcast("ACCOUNT_ADDED",{id:a.AccountInfo.Id})}});var j={};j.EmailAddress=g.Email,j.userId=g.FullName,j.displayName=h,e.identity=j,e.isLoggedIn=!0,c.$rootScope.session.identity&&(c.$rootScope.session.identity.displayName=h,c.setIdentity(c.$rootScope.session.identity)),e.firmInfo?e.mercuryAccounts=c.filterFirmAccounts(e.mercuryAccounts,e.firmInfo.Accounts):d.customization.setAllFirms(g.FirmInfo),d.processAccounts(e,a),c.setSessionData(e),f.resolve(e)}),h.error(function(a,b,c,d){f.reject(b)}),f.promise},a.prototype.filterSIPAccounts=function(a,b){for(var b=b,c=0;c<b.length;c++){var d=b[c];"SIA Program"==d.AdvisorProgramInfo.ProgramName&&a&&a.length>0&&angular.forEach(d.Accounts,function(b){angular.forEach(a,function(c,d){c.AccountInfo.AccountNumber==b&&a.splice(d,1)})})}return a},a.prototype.displayName=function(a){if(void 0===a)return"";var b=a.FullName?a.FullName:"";return a.MercuryAccounts&&a.MercuryAccounts.every(function(a){return!(a.AccountInfo&&a.AccountInfo.AccountProfile&&a.AccountInfo.AccountProfile.TaxpayerFirstName)||(b=a.AccountInfo.AccountProfile.TaxpayerFirstName,!1)}),b},a.prototype.trimLeading=function(a){return!a||a.length<=8?a:a.substr(a.length-8)},a.prototype.maskAcct=function(a){return!a||a.length<=4?a:"xxxx-"+a.substr(a.length-4)},a.prototype.getAccountName=function(a){return a.FriendlyName?a.FriendlyName:a.AccountInfo?a.AccountInfo.AccountNumber:"New Account"},a.prototype.me=function(a,b){var c=this.q.defer();return this.processMe(a,b).then(function(a){c.resolve(a)}).catch(function(a){c.reject(a)}),c.promise},a.prototype.getSessionData=function(){var a=null,b=this.window.sessionStorage.getItem("HG_SESSION_DATA");return b?a=JSON.parse(b):(a={},a.identity=null,a.isLoggedIn=!1,this.setSessionData(a)),a},a.prototype.setSessionData=function(a){a&&this.window.sessionStorage.setItem("HG_SESSION_DATA",JSON.stringify(a))},a.prototype.getPublicReturnUrl=function(){var a=this.window.sessionStorage.getItem("hg_public_return_url");return a},a.prototype.getWhiteListReturnUrls=function(){var a;return this.appConfig&&this.appConfig.whiteListReturnUrls&&(a=this.appConfig.whiteListReturnUrls),a},a.prototype.getZone=function(){return this.appConfig.zone},a.prototype.setPublicReturnUrl=function(a){a&&this.window.sessionStorage.setItem("hg_public_return_url",a)},a.prototype.getPendingNavigationState=function(){return this.window.sessionStorage.getItem("hg_pending_navigation_state")},a.prototype.getPendingNavigationStateParams=function(){var a=this.window.sessionStorage.getItem("hg_pending_navigation_state_params");return a&&(a=JSON.parse(a)),a},a.prototype.clearPendingNavigationStateData=function(){this.window.sessionStorage.removeItem("hg_pending_navigation_state"),this.window.sessionStorage.removeItem("hg_pending_navigation_state_params")},a.prototype.setPendingNavigationStateData=function(a,b){a&&(this.window.sessionStorage.setItem("hg_pending_navigation_state",a.name),b&&this.window.sessionStorage.setItem("hg_pending_navigation_state_params",JSON.stringify(b)))},a.prototype.getIdentity=function(){var a=this.q.defer();return this.identity||(this.identity=this.getUserProfile()),a.resolve(this.identity),a.promise},a.prototype.getStoredIdentity=function(){return this.identity=this.getUserProfile(),this.identity},a.prototype.setIdentity=function(a){this.identity=a,this.window.sessionStorage.setItem("user_identity",JSON.stringify(this.identity))},a.prototype.debug=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];this.logger.debug(a)},a.prototype.error=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];this.logger.error(a)},a.prototype.info=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];this.logger.info(a)},a.prototype.log=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];this.logger.log(a)},a.prototype.warn=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];this.logger.warn(a)},a.prototype.objectToString=function(a){var b=null,c=typeof a;if("object"===c){var d=[];b=JSON.stringify(a,function(a,b){if("object"==typeof b&&null!==b){if(d.indexOf(b)!==-1)return null;d.push(b)}return b})}else b=a;return b},a.prototype.getMongoActiveAccount=function(){return this.window.sessionStorage.getItem("ACTIVE_ACCOUNT_ID")},a.prototype.getActiveAccount=function(){var a=this,b=this.window.sessionStorage.getItem("ACTIVE_ACCOUNT_ID");return b?_.forEach(this.$rootScope.accounts,function(c){c.id==b&&(a.activeAccount=c)}):this.activeAccount=null,this.activeAccount},a.prototype.getPortfolioSettings=function(){var a={};return a.encryptedAccountId=this.window.sessionStorage.getItem("encryptedAccountId"),a.canLaunchBeneficiaryFeature=this.window.sessionStorage.getItem("canLaunchBeneficiaryFeature"),a.maritalStatusUnknown=this.window.sessionStorage.getItem("maritalStatusUnknown"),a.marriedInCommunityPropertyState=this.window.sessionStorage.getItem("marriedInCommunityPropertyState"),a.beneficiaryFeatureUnavailableMessage=this.window.sessionStorage.getItem("beneficiaryFeatureUnavailableMessage"),a.hasAccountRestrictions=this.window.sessionStorage.getItem("hasAccountRestrictions"),a},a.prototype.getActiveAccountNumber=function(){var a=this.getActiveAccount();return a?a.accountNumber:null},a.prototype.getActivePortfolioId=function(){return this.activeAccount?this.activeAccount.id:null},a.prototype.getUserAccounts=function(){return["82967098","0211-1"]},a.prototype.setActiveAccount=function(a,b){a&&(this.activeAccount=a,this.window.sessionStorage.setItem("ACTIVE_ACCOUNT_ID",a.id),_.forEach(this.$rootScope.accounts,function(b){b.isActive=b.id===a.id}),b&&this.$rootScope.$broadcast("DASHBOARD_ACCOUNT_SELECTED",null))},a.prototype.setPortfolioSettings=function(a){a&&(this.window.sessionStorage.setItem("encryptedAccountId",a.EncryptedAccountId),this.window.sessionStorage.setItem("canLaunchBeneficiaryFeature",a.CanLaunchBeneficiaryFeature),this.window.sessionStorage.setItem("maritalStatusUnknown",a.MaritalStatusUnknown),this.window.sessionStorage.setItem("marriedInCommunityPropertyState",a.MarriedInCommunityPropertyState),this.window.sessionStorage.setItem("beneficiaryFeatureUnavailableMessage",a.BeneficiaryFeatureUnavailableMessage),this.window.sessionStorage.setItem("hasAccountRestrictions",a.HasAccountRestrictions))},a.prototype.setActiveAccountByPortfolioId=function(a){var b=this;this.$rootScope.accounts.forEach(function(c){c.portfolioRefId===a&&b.setActiveAccount(c,!0)})},a.prototype.setActiveAccountByNumber=function(a,b){var c=this;_.forEach(this.$rootScope.accounts,function(b){b.isActive=b.accountNumber===a,b.isActive&&(c.activeAccount=b,c.window.sessionStorage.setItem("ACTIVE_ACCOUNT_ID",b.id))}),b&&this.$rootScope.$broadcast("DASHBOARD_ACCOUNT_SELECTED",null)},a.prototype.setPreviousState=function(a){this.previousState=a},a.prototype.getPreviousState=function(){return this.previousState},a.prototype.getUserProfile=function(){var a=null;if(this.hasStorage()){var b=this.window.sessionStorage.getItem("user_identity");b&&b.length>0&&(a=JSON.parse(b))}return a},a.prototype.isDebug=function(){return/Debug/i.test(this.appConfig.debugLogLevel)},a.prototype.isAndroid=function(){return/Android/i.test(navigator.userAgent)},a.prototype.isBlackBerry=function(){return/BlackBerry/i.test(navigator.userAgent)},a.prototype.isIOS=function(){return/(iPhone|iPod|iPad).*AppleWebKit(?!.*Version)/i.test(navigator.userAgent)},a.prototype.isOpera=function(){return/Opera Mini/i.test(navigator.userAgent)},a.prototype.isWindows=function(){return/IEMobile|MSIE/i.test(navigator.userAgent)},a.prototype.isSmallIOS=function(){return/(iPhone|iPod).*AppleWebKit(?!.*Version)/i.test(navigator.userAgent)},a.prototype.isSmallDevice=function(){return!!(this.isSmallIOS()||this.isAndroid()||this.isBlackBerry())},a.prototype.isLargeDevice=function(){return/(iPad).*AppleWebKit(?!.*Version)/i.test(navigator.userAgent)},a.prototype.isBigweb=function(){return!this.isSmallDevice()&&!this.isLargeDevice()},a.prototype.isMobileDevice=function(){return(this.isIOS()||this.isAndroid())&&Modernizr.touch},a.prototype.isChrome=function(){return/Chrome/i.test(navigator.userAgent)},a.prototype.isDesktop=function(){return!/(iPhone|iPod|iPad|BlackBerry|Android)/i.test(navigator.userAgent)},a.prototype.isInIframe=function(){return this.window.location!==this.window.parent.location},a.prototype.isSIP=function(){return this.window.location.hostname!=this.appConfig.iipHostName},a.prototype.isIIP=function(){return this.window.location.hostname==this.appConfig.iipHostName},a.prototype.isSIPAccount=function(a){return!a||void 0===a.FirmId||865045761===a.FirmId},a.prototype.getLocalResourceById=function(a){for(var b in this.localResources)if(this.localResources[b].id==a)return this.localResources[b];return null},a.prototype.getLocalResourceContentById=function(a){for(var b in this.localResources)if(this.localResources[b].id==a){var c=this.localResources[b];if(c)return c.content}return null},a.prototype.getLocalResourcesAsProperties=function(){var a={},b=null;for(var c in this.localResources)b=this.localResources[c],a[b.id]=b.content;return a},a.prototype.getAccessTokenFromSession=function(){return this.window.sessionStorage.getItem("HG_TKN")},a.prototype.setAccessTokenIntoSession=function(a){this.window.sessionStorage.setItem("HG_TKN",a)},a.prototype.getOTPTokensFromSession=function(){return this.window.sessionStorage.getItem("HG_OTP_TKNS")},a.prototype.setOTPTokensIntoSession=function(a){this.window.sessionStorage.setItem("HG_OTP_TKNS",a)},a.prototype.getLogonStateFromSession=function(){return this.window.sessionStorage.getItem("HG_LOGON_STATE")},a.prototype.setLogonStateIntoSession=function(a){this.window.sessionStorage.setItem("HG_LOGON_STATE",a)},a.prototype.processAccounts=function(a,b){a.totalBalanceValue=0,a.mercuryAccounts&&_.forEach(a.mercuryAccounts,function(b){a.totalBalanceValue=a.totalBalanceValue+(b.drift&&b.drift.TotalValue?b.drift.TotalValue:0)}),a.totalBalance=this.$filter("currency")(a.totalBalanceValue,"$",2),this.$rootScope.accounts=a.mercuryAccounts,this.$rootScope.totalBalanceValue=a.totalBalanceValue,this.$rootScope.totalBalance=a.totalBalance;var c=this.getActiveAccountNumber();c?this.setActiveAccountByNumber(c):(this.isSIP()||a.firmInfo)&&this.setActiveAccount(this.$rootScope.accounts[0]);var d=this.$rootScope.session.logout,e=this.$rootScope.session.login,f=this.$rootScope.session.clientSignup;this.$rootScope.session=a,this.$rootScope.session.logout=d,this.$rootScope.session.login=e,this.$rootScope.session.clientSignup=f,this.checkAllAccountsClosed(),this.$rootScope.$broadcast("ACCOUNTS_UPDATED_EVENT"),b===!1&&"undefined"!=typeof b||this.$rootScope.$broadcast("DASHBOARD_SETMODEL")},a.prototype.processFirmSelection=function(a,b){var c=this.getSessionData(),d=this.customization.getAllFirms(),e=_.find(d,function(c){return c.FirmId===a&&c.AdvisorProgramInfo.ProgramPin===b});this.customization.setFirmInfo(e),c.firmInfo=e,c.mercuryAccounts=this.filterFirmAccounts(c.mercuryAccounts,e.Accounts),this.processAccounts(c,!0),this.setSessionData(c)},a.prototype.filterFirmAccounts=function(a,b){for(var c=[],d=0;d<a.length;d++){var e=_.find(b,function(b){return b==a[d].accountNumber});void 0!=e&&c.push(a[d])}return c},a.prototype.isFirmMatch=function(a,b){var c=_.find(a,function(a){if(b.AccountInfo)return a==b.AccountInfo.AccountNumber});return void 0!=c},a.prototype.checkAllAccountsClosed=function(){var a=!1;if(this.$rootScope.accounts){var b;1==this.$rootScope.accounts.length?(b=this.$rootScope.accounts[0],b&&(a=b.AccountInfo&&b.AccountInfo.hasOwnProperty("MercuryAccountStatus")&&("Closed"==b.AccountInfo.MercuryAccountStatus||"DeLinked"==b.AccountInfo.MercuryAccountStatus),1==a?this.window.sessionStorage.setItem("ALL_ACCOUNTS_CLOSED",b.AcctIdDisplay.toString()):this.window.sessionStorage.removeItem("ALL_ACCOUNTS_CLOSED"))):this.window.sessionStorage.removeItem("ALL_ACCOUNTS_CLOSED"),this.$rootScope.allAccountsClosedFlag=a}},a.prototype.getAllAccountClosedFlag=function(){return this.window.sessionStorage.getItem("ALL_ACCOUNTS_CLOSED")},a.$inject=["$rootScope","$q","$window","$http","$log","$filter","hgDeviceSvc","hgCustomizationSvc","hgHalDocumentSvc","APP_CONFIG","LOCAL_RESOURCES","NAVIGATION_CONFIG","hgCommonJs2nSvc","hgCacheSvc","$timeout"],a}();a.contextSvc=b}(b=a.common||(a.common={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b;!function(a){var b=function(){function a(a,b){this.$resource=a,this.hgContext=b;var c={method:"GET"},d={method:"POST",headers:{"Content-Type":"application/json"}},e={method:"PUT",headers:{"Content-Type":"application/json"}};this.resource=this.$resource(b.appConfig.identityProviderBaseUrl+"/login/token",null,{get:c,save:d,update:e})}return a.prototype.createLogin=function(a){return!a||a.Scope&&0!==a.Scope.length||(a.Scope="api"),this.resource.save(a).$promise},a}();a.authnProvider=b}(b=a.providers||(a.providers={}))}(b=a.auth||(a.auth={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(b){var c=function(a){function b(b){a.call(this),this.hgContextSvc=b,this.hgContextSvc=b}return __extends(b,a),b.prototype.isLoggedIn=function(){return this.hgContextSvc&&this.hgContextSvc.$rootScope&&this.hgContextSvc.$rootScope.session&&this.hgContextSvc.$rootScope.session.isLoggedIn},b.prototype.requiresLoggedIn=function(a){return!a.toState.publicAccess},b.prototype.pass=function(a){return!this.requiresLoggedIn(a)||this.isLoggedIn()},b.prototype.createPassReply=function(){return{continue:!0}},b.prototype.createFailReply=function(){return{continue:!1,redirect:"login"}},b.prototype.execute=function(a){var b=this.pass(a)?this.createPassReply():this.createFailReply();return this.invokeSuccessor(a,b)},b.$inject=["hgContextSvc"],b}(a.router.routeChangeStrategyBase);b.authenticateRouteChangeStrategy=c}(b=a.auth||(a.auth={}))}(hg||(hg={}));var hg;!function(a){var b;!function(b){var c=function(){function b(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){this.$timeout=g,this.hgManagedVersionSvc=m,this.hgAuthnProviderSvc=n,this.hgSessionTimeoutStrategy=o,this.hgProgramSelectorSvc=p,this.hgTermsAndConditionsService=q,this.hgTouchTermsAndConditionsService=r,this.suitabilityQuestionsSvc=s,this.accountApplicationSvc=t,this.LOGOUT_MESSAGE="You have successfully logged off.",this.rootScope=a,this.q=b,this.window=c,this.http=d,this.contextSvc=h,this.dataContextSvc=i,this.state=e,this.modal=f,this.uuidSvc=j,this.commonJs2nSSvc=k,this.aeaSvc=l,this.isLoggingOut=!1,this.termsAndConditionsService=q,this.touchTermsAndConditionsService=r}return b.prototype.commandGetAuthenticateUserModel=function(a){var b=this.q.defer(),c={idp:this.contextSvc.isSIP()?this.contextSvc.appConfig.SIPProductIdp:this.contextSvc.appConfig.IIPProductIdp,Username:a.Data.userid,Password:a.Data.password,LogonState:1600,RefreshToken:a.Data.refreshToken,DeviceId:a.Data.deviceId,RiskData:a.Data.riskData};return this.getAuthenticateUserModel(c).then(function(a){b.resolve(a)}),b.promise},b.prototype.commandLogout=function(a){this.logout()},b.prototype.goToPostLoginFromInterventionStrategy=function(){var a=this;this.commonJs2nSSvc.raiseRedirectEndEvent(),this.getLoginSuccessAuthenticateUserModel().then(function(b){a.commonJs2nSSvc.sendInterventionCompletedEvent(b)})},b.prototype.buildMicrositeUrl=function(a,b){var c="",d=2===a?"signup":"login",e="";e=this.appendIDPParameter(this.contextSvc.appConfig.identityProviderLoginUrl,"&idp="),"launch"!==this.state.current.name&&"login"!==this.state.current.name&&(c=b?"#/"+b:this.window.location.hash),e+="&state="+this.uuidSvc.new(),e+="&origin_uri="+encodeURIComponent(this.contextSvc.appConfig.url+c),e+="&mode="+d,e+="&force=true",e+="&redirect_uri=";var f=this.contextSvc.appConfig.url;return f&&f.indexOf("?loginState=complete&loginMode=")>0&&(f=f.replace("?loginState=complete&loginMode=signup",""),f=f.replace("?loginState=complete&loginMode=login","")),f+="?v=1.15&loginState=complete&loginMode="+d,e+=encodeURIComponent(f)},b.prototype.buildMicrositeLoginInterventionUrl=function(a,b){var c="",d=2===a?"signup":"login",e="";e=this.appendIDPParameter(this.contextSvc.appConfig.identityProviderOTPLoginUrl,"?idp="),"launch"!==this.state.current.name&&"login"!==this.state.current.name&&(c=b?"#/"+b:this.window.location.hash),e+="&origin_uri="+encodeURIComponent(this.contextSvc.appConfig.url+c),e+="&mode="+d,e+="&force=true",e+="&nativeredirect_uri=";var f=this.contextSvc.appConfig.url;return f&&f.indexOf("?loginState=complete&loginMode=")>0&&(f=f.replace("?loginState=complete&loginMode=signup",""),f=f.replace("?loginState=complete&loginMode=login","")),f+="?loginState=complete&loginMode="+d+"&completionEvent=OTPCompleteEvent",e+=encodeURIComponent(f)},b.prototype.getAccessToken=function(){var a=null;if(this.contextSvc.hasStorage()){var b=this.window.sessionStorage.getItem("access_token");b&&b.length>0&&(a=b)}return a},b.prototype.identityProviderRedirect=function(a){return!1},b.prototype.identityProviderLoginMode=function(a){return this.window.location.search.indexOf("loginState=complete")>=0?(a.preventDefault(),this.window.location.search.indexOf("loginMode=login")>=0?2:3):1},b.prototype.identityProviderIsOTPCompleteEvent=function(a){return this.window.location.search.indexOf("completionEvent=OTPCompleteEvent")>=0&&(a.preventDefault(),!0)},b.prototype.identityProviderLogout=function(){var a=this.q.defer(),b=this.contextSvc.appConfig.identityProviderLogoutUrl;return this.http({method:"DELETE",url:b}).success(function(){a.resolve(!0)}).error(function(){a.reject(!1)}),a.promise},b.prototype.login=function(a,b,c){b&&this.contextSvc.setPendingNavigationStateData(b,null),this.contextSvc.device.isLargeScreen()?(this.commonJs2nSSvc.raiseRedirectBeginEvent(this.contextSvc.appConfig.url+"/#/message/7",this.contextSvc.appConfig.redirectTimeout),this.loginModal(a)):(this.commonJs2nSSvc.raiseRedirectBeginEvent(this.contextSvc.appConfig.url+"/#/message/7",this.contextSvc.appConfig.redirectTimeout),c?this.window.location.replace(this.buildMicrositeUrl(a,c)):this.window.location.replace(this.buildMicrositeUrl(a)))},b.prototype.goToMicrositeLogin=function(a,b){this.window.location.href=this.buildMicrositeUrl(a,b)},b.prototype.loginModal=function(a){var b=this;this.$timeout(function(){b.modal({contentTemplate:"templates/auth/login.html",templateUrl:"templates/uiComponents/defaultModalTemplate.html",controller:"hgLoginModalCtrl",backdrop:"static",size:"lg",resolve:{loginType:function(){return a}},show:!0})})},b.prototype.prospectCreateModal=function(a){var b=this;this.$timeout(function(){b.modal({contentTemplate:"templates/auth/prospectCreate.html",templateUrl:"templates/uiComponents/defaultModalTemplate.html",controller:"hgLoginCtrl",size:"lg",backdrop:"static",resolve:{loginType:function(){return a}},show:!0})})},b.prototype.prospectLoginModal=function(a){var b=this;this.$timeout(function(){b.modal({contentTemplate:"templates/auth/prospect.html",templateUrl:"templates/uiComponents/defaultModalTemplate.html",controller:"hgLoginCtrl",size:"lg",backdrop:"static",resolve:{loginType:function(){return a}},show:!0})})},b.prototype.logout=function(a){var b=this,c=this.q.defer();if(this.isLoggingOut)c.resolve();else{this.isLoggingOut=!0;var d=this;d.contextSvc.showSpinner(),this.identityProviderLogout().then(function(a){}).catch(function(a){d.contextSvc.error(a)}).finally(function(){d.contextSvc.hideSpinner(),d.rootScope.$broadcast("USER_LOGGED_OUT_EVENT",{messageId:a}),b.isLoggingOut=!1,c.resolve()})}return c.promise},b.prototype.silentLogout=function(){return this.clearSession(),this.contextSvc.cache.dispose(),this.identityProviderLogout()},b.prototype.clearSession=function(){this.contextSvc.setSessionData(null),this.rootScope.accounts=[],this.rootScope.totalBalanceValue=0,this.rootScope.totalBalance="",this.rootScope.pendingVerificationAccount=null,this.rootScope.pendingAccounts=!1,this.rootScope.externalAccountNumber="",this.rootScope.hgAccountNumber=null,this.rootScope.session.identity=null,this.rootScope.session.isLoggedIn=!1,this.contextSvc.setIdentity(null),this.window.sessionStorage.clear()},b.prototype.parseStateParams=function(a){var b={};if(!a)return b;for(var c,d=/([^&=]+)=([^&]*)/g;c=d.exec(a);){var e=decodeURIComponent(c[1]),f=decodeURIComponent(c[2]);b[e]=f}return b},b.prototype.redirectPostLogin=function(a){var b=this;this.rootScope.session.isLoggedIn=!0;var c=this.window.sessionStorage.getItem("accountOpenWebLogin");if(this.contextSvc.isDesktop())if(2===a)this.rootScope.$broadcast("USER_LOGGED_IN_EVENT",{hardRefresh:!1});else if("true"==c)this.contextSvc.me(!0).then(function(){if(b.contextSvc.isIIP()){var a={};a.FirmId=b.contextSvc.customization.getSchwabFirmId(),a.ProgramPin=b.contextSvc.customization.getProgramPin(),b.contextSvc.customization.setFirmProgramInfo(a)}b.state.go("moveMoney.moveMoneyLaunch")});else if(null!=this.window.sessionStorage.getItem("accountFlow")){var d=this;this.accountApplicationSvc.getCustomerData().then(function(a){if(11==a.ReturnCd){var c=b.window.sessionStorage.getItem("ApplicationId");d.silentLogout().finally(function(){d.state.go("accountopen.jointConfirmIdentity",{appID:c,duplicateCustID:"yes"})})}else d.state.go("accountopen.profile")}).catch(function(a){b.contextSvc.error(a)})}else this.state.go("accountopen.profile");else{var e=this.window.location.href,f=e.indexOf("?");e=e.substring(0,f),2===a?this.rootScope.$broadcast("USER_LOGGED_IN_EVENT",null):"true"==c?this.contextSvc.me(!0).then(function(){if(b.contextSvc.$rootScope.$broadcast("ACCOUNTS_UPDATED_EVENT"),b.contextSvc.isIIP()){var a={};a.FirmId=b.contextSvc.customization.getSchwabFirmId(),a.ProgramPin=b.contextSvc.customization.getProgramPin(),b.contextSvc.customization.setFirmProgramInfo(a)}b.state.go("moveMoney.moveMoneyLaunch")}):this.state.go("accountopen.profile")}},b.prototype.getApplicationLaunchModel=function(){var b=new a.auth.Models.applicationLaunchModel,c=this.hgTermsAndConditionsService.getTermsAndConditionsData(),d=this.hgManagedVersionSvc.getUpgradeStatus();return b.disclosureUrl=this.contextSvc.appConfig.privacyPolicyDocUrl,c&&(b.shouldPresentApplicationTerms=c.shouldPresentApplicationTerms,b.applicationTermsUrl=c.applicationTermsUrl),b.saveOrContinueLocation=this.processLocation("prospectLogin","webApp"),d&&(b.managedVersionStatus=d),b},b.prototype.getAuthenticateUserModel=function(b){var c=this,d=this.q.defer(),e=this.hgAuthnProviderSvc.createLogin(b);return e.then(function(a){c.processLoginResponse(a).then(function(a){d.resolve(a)})}),e.catch(function(){var b=new a.auth.Models.authenticateUserModel;b.authenticationStatus=0,b.failureMessage=c.contextSvc.appConfig.featureUnavailableMessage,d.resolve(b)}),d.promise},b.prototype.processRefreshToken=function(a,b){return b&&b.RefreshToken&&(a.refreshToken=b.RefreshToken),a},b.prototype.processTouchTerms=function(a,b){return b.shouldPresentTouchTerms=a.shouldPresentTouchTerms,b.shouldPresentTouchTerms&&(b.touchTermsUrl=a.touchTermsUrl),b},b.prototype.processPendingDeposits=function(a,b){return b.hasPendingDeposits=a,b.hasPendingDeposits&&(b.pendingDepositsLocation=this.processLocation("trialDeposits.trialDepositInitiation","webApp")),b},b.prototype.processNoAccountScenarios=function(a,b){if(a){var c=a;c&&400!=c.ReturnCode?c.lastQuestionId>7?(b.authenticationStatus=1,b.hasPendingProfile=!0,b.pendingProfileLocation=this.processLocation("accountopen.profile","webApp")):(b.authenticationStatus=1,b.hasPendingBehavioralQuestions=!0,b.pendingBehavioralQuestionsLocation=this.processLocation("behavioralQuestions","webApp")):(b.authenticationStatus=0,b.failureMessage=this.rootScope.isIIP?this.rootScope.localResources["Error_Login-NoMercuryAccounts-AS"]:this.rootScope.localResources["Error_Login-NoMercuryAccounts"],this.silentLogout())}return b},b.prototype.processLocation=function(a,b){var c={};return c.href=a,c.rel=b,c},b.prototype.processFailure=function(a,b,c){return a.authenticationStatus=c,a.failureMessage=b,a},b.prototype.processProgramSelector=function(a){return this.contextSvc.isIIP()?a.shouldPresentProgramSelector=!0:a.shouldPresentProgramSelector=!1,a},b.prototype.processApplicationTerms=function(a,b){return b.shouldPresentApplicationTerms=a.shouldPresentApplicationTerms,b.shouldPresentApplicationTerms&&(b.applicationTermsUrl=a.applicationTermsUrl),b},b.prototype.processIntervention=function(a){return a.authenticationStatus=2,a.interventionLocation=this.processLocation("loginIntervention","webApp"),a},b.prototype.processLoginResponse=function(b){var c=this.q.defer(),d=new a.auth.Models.authenticateUserModel;if(!b){var d=new a.auth.Models.authenticateUserModel;return d.authenticationStatus=0,d.failureMessage=this.contextSvc.appConfig.featureUnavailableMessage,c.resolve(d),c.promise}switch(b.LogonState){case 1e3:this.getLoginSuccessAuthenticateUserModel(b).then(function(a){c.resolve(a)});break;case 3090:case 3e3:this.contextSvc.setLogonStateIntoSession(""+b.LogonState),d=this.processIntervention(d),c.resolve(d);break;case 2010:case 2020:this.contextSvc.setLogonStateIntoSession(""+b.LogonState),this.contextSvc.setAccessTokenIntoSession(b.AccessToken),this.contextSvc.setOTPTokensIntoSession(b.OTP),d=this.processIntervention(d),c.resolve(d);break;case 1400:this.processFailure(d,this.rootScope.localResources["Error_Login-InvalidLoginRetry"],0),c.resolve(d);break;case 1490:switch(b.Error){case"8003":case"8006":this.processFailure(d,this.rootScope.localResources["Error_Login-RepGenTempPassword"],0),c.resolve(d);break;default:this.processFailure(d,this.rootScope.localResources["Error_Login-ResetPassword"],3),c.resolve(d)}break;case 1495:switch(b.Error){case"8011":this.processFailure(d,this.rootScope.localResources["Error_Login-TouchId"],4),c.resolve(d);break;default:this.processFailure(d,this.rootScope.localResources["Error_Login-UnableToComplete"],0),c.resolve(d)}break;default:switch(b.Error){case"3002":case"9001":this.processFailure(d,this.rootScope.localResources["Error_Login-TimedOut"],0),c.resolve(d);break;default:this.processFailure(d,this.rootScope.localResources["Error_Login-UnableToComplete"],0),c.resolve(d)}}return c.promise},b.prototype.getLoginSuccessAuthenticateUserModel=function(b){var c=this,d=new a.auth.Models.authenticateUserModel,e=this.q.defer();return this.contextSvc.me(!1).then(function(){c.hgTermsAndConditionsService.recordTermsAndConditionsData(),d.authenticationStatus=1,c.processProgramSelector(d),b&&b.RefreshToken?(c.processRefreshToken(d,b),c.rootScope.accounts.length<=0?c.q.all([c.touchTermsAndConditionsService.getTouchTermsAndConditionsData(),c.aeaSvc.hasTrialDeposits(),c.suitabilityQuestionsSvc.getAnswers()]).then(function(a){c.processTouchTerms(a[0],d),c.processPendingDeposits(a[1],d),c.processNoAccountScenarios(a[2],d),e.resolve(d)}).catch(function(a){e.resolve(d)}):c.q.all([c.touchTermsAndConditionsService.getTouchTermsAndConditionsData(),c.aeaSvc.hasTrialDeposits()]).then(function(a){c.processTouchTerms(a[0],d),c.processPendingDeposits(a[1],d),e.resolve(d)}).catch(function(a){e.resolve(d)})):c.rootScope.accounts.length<=0?c.q.all([c.aeaSvc.hasTrialDeposits(),c.suitabilityQuestionsSvc.getAnswers()]).then(function(a){c.processPendingDeposits(a[0],d),c.processNoAccountScenarios(a[1],d),e.resolve(d)}).catch(function(a){e.resolve(d)}):c.q.all([c.aeaSvc.hasTrialDeposits()]).then(function(a){c.processPendingDeposits(a[0],d),e.resolve(d)}).catch(function(a){e.resolve(d)})}).catch(function(a){c.processFailure(d,c.contextSvc.appConfig.featureUnavailableMessage,0),e.resolve(d)}),e.promise},b.prototype.appendIDPParameter=function(a,b){var c=b+this.getIDPValue();return a&&a.indexOf(c)==-1&&(a+=c),a},b.prototype.getIDPValue=function(){return this.contextSvc.isSIP()?this.contextSvc.appConfig.SIPProductIdp:this.contextSvc.appConfig.IIPProductIdp},b.$inject=["$rootScope","$q","$window","$http","$state","$modal","$timeout","hgContextSvc","hgDataContextSvc","hgUuidSvc","hgCommonJs2nSvc","hgExternalAccountSvc","hgManagedVersionSvc","hgAuthnProviderSvc","hgSessionTimeoutStrategy","hgProgramSelectorSvc","hgTermsAndConditionsService","hgTouchTermsAndConditionsService","hgSuitabilityQuestionsSvc","hgAccountApplicationSvc"],b}();b.authSvc=c}(b=a.auth||(a.auth={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(a,b,c,d,e,f,g,h){this.$scope=a,this.$window=b,this.$modal=c,this.$modalInstance=d,this.$timeout=e,this.hgContextSvc=f,this.hgCommonJs2nSvc=g,this.hgCrossOriginMessageSvc=h}return a}();a.modalBaseCtrl=b}(b=a.common||(a.common={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(a,b,c,d){this.$scope=a,this.$rootScope=b,this.$state=c,this.contextSvc=d}return a}();a.hgControllerBase=b}(b=a.common||(a.common={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(a){this.$window=a,this.subscribe()}return a.prototype.subscribe=function(){var a=this;try{this.$window.applicationCache&&(this.$window.applicationCache.addEventListener("checking",function(b){a.onchecking(b)},!1),this.$window.applicationCache.addEventListener("noupdate",function(b){a.onnoupdate(b)},!1),this.$window.applicationCache.addEventListener("downloading",function(b){a.ondownloading(b)},!1),this.$window.applicationCache.addEventListener("progress",function(b){a.onprogress(b)},!1),this.$window.applicationCache.addEventListener("cached",function(b){a.oncached(b)},!1),this.$window.applicationCache.addEventListener("updateready",function(b){a.onupdateready(b)},!1),this.$window.applicationCache.addEventListener("obsolete",function(b){a.onobselete(b)},!1),this.$window.applicationCache.addEventListener("error",function(b){a.onerror(b)},!1))}catch(a){}},a.prototype.check=function(){try{this.$window.applicationCache&&this.$window.applicationCache.update()}catch(a){}},a.prototype.swap=function(){if(this.$window.applicationCache)try{this.$window.applicationCache.swapCache()}catch(a){}finally{this.$window.location.reload()}},a.prototype.onchecking=function(a){},a.prototype.onnoupdate=function(a){},a.prototype.ondownloading=function(a){},a.prototype.onprogress=function(a){Math.ceil(a.loaded/a.total*100)},a.prototype.oncached=function(a){},a.prototype.onupdateready=function(a){this.swap()},a.prototype.onobselete=function(a){},a.prototype.onerror=function(a){},a.$inject=["$window"],a}();a.appCacheSvc=b}(b=a.common||(a.common={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(a,b,c){this.$rootScope=a,this.CacheFactory=b,this.$window=c;var d=this;this.$rootScope.$on("USER_LOGGED_OUT_EVENT",function(a){
d.dispose()}),this.init()}return a.prototype.init=function(){this.cache=this.CacheFactory("apiCache",{maxAge:18e4,cacheFlushInterval:9e5,verifyIntegrity:!0,deleteOnExpire:"aggressive"})},a.prototype.removeItem=function(a,b){a.remove(b)},a.prototype.dispose=function(){this.cache.removeAll(),this.cache.destroy(),this.$window.sessionStorage.clear(),this.init()},a}();a.cacheSvc=b}(b=a.common||(a.common={}))}(hg||(hg={}));var hg;!function(hg){var common;!function(common){var managedVersionSvc=function(){function managedVersionSvc(a,b,c){this.updated=!1,this.context="GLOBAL",this.isUpgradeNeeded=!1,this.isSoftUpgradeNeeded=!1,this.isHardUpgradeNeeded=!1,this.isIOS=!1,this.isAndroid=!1,this.window=a,this.commonJs2nSvc=b,this.contextSvc=c,this.commonJs2nSvc=b,this.softWarningTimeout=this.contextSvc.appConfig.mvSoftWarningTimeout,this.androidCurrentVersion=this.contextSvc.appConfig.mvAndroidCurrentVersion,this.androidRequiredVersion=this.contextSvc.appConfig.mvAndroidRequiredVersion,this.iOSCurrentVersion=this.contextSvc.appConfig.mvIOSCurrentVersion,this.iOSRequiredVersion=this.contextSvc.appConfig.mvIOSRequiredVersion,this.locationHref=this.window.location.href.toLowerCase(),this.appName=decodeURIComponent(this.getQueryString("appname",this.locationHref)),this.appVersion=decodeURIComponent(this.getQueryString("appversion",this.locationHref)),this.locale=decodeURIComponent(this.getQueryString("locale",this.locationHref))}return managedVersionSvc.prototype.subscribe=function(a){this.readyHandler=a},managedVersionSvc.prototype.getUpgradeStatus=function(){var a=0;if(this.upgradeNeeded())if(this.isHardUpgradeNeeded)a=1;else if(this.isSoftUpgradeNeeded){var b=new Date;this.window.localStorage.setItem("SoftWarningDateTime",b.toString()),a=2}return a},managedVersionSvc.prototype.upgradeNeeded=function(){this.isUpgradeNeeded=!1,this.isSoftUpgradeNeeded=!1,this.isHardUpgradeNeeded=!1,this.isIOS=!1,this.isAndroid=!1;try{if(null!=this.appName&&null!=this.appVersion&&(this.appName.indexOf("ios")>-1||this.appName.indexOf("android")>-1)){var a=new Date;if(this.appName.indexOf("ios")>-1){if(this.isIOS=!0,this.compareVersions(this.appVersion,"<",this.iOSRequiredVersion))this.isUpgradeNeeded=!0,this.isHardUpgradeNeeded=!0;else if(this.compareVersions(this.appVersion,"<",this.iOSCurrentVersion)){var b=this.window.localStorage.getItem("SoftWarningDateTime");if(null!=b){var c=new Date(b),d=a.getTime()-c.getTime(),e=Math.round(d/6e4);e>=parseInt(this.softWarningTimeout)&&(this.isUpgradeNeeded=!0,this.isSoftUpgradeNeeded=!0)}else this.isUpgradeNeeded=!0,this.isSoftUpgradeNeeded=!0}}else if(this.appName.indexOf("android")>-1)if(this.isAndroid=!0,this.compareVersions(this.appVersion,"<",this.androidRequiredVersion))this.isUpgradeNeeded=!0,this.isHardUpgradeNeeded=!0;else if(this.compareVersions(this.appVersion,"<",this.androidCurrentVersion)){var b=this.window.localStorage.getItem("SoftWarningDateTime");if(null!=b){var c=new Date(b),d=a.getTime()-c.getTime(),e=Math.round(d/6e4);e>=parseInt(this.softWarningTimeout)&&(this.isUpgradeNeeded=!0,this.isSoftUpgradeNeeded=!0)}else this.isUpgradeNeeded=!0,this.isSoftUpgradeNeeded=!0}}}catch(a){this.isUpgradeNeeded=!1,this.isSoftUpgradeNeeded=!1,this.isHardUpgradeNeeded=!1}return this.isUpgradeNeeded},managedVersionSvc.prototype.getQueryString=function(a,b){if(null==b)return null;a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c=new RegExp("[\\?&]"+a+"=([^&#]*)"),d=c.exec(b);return null==d?null:d[1]},managedVersionSvc.prototype.compareVersions=function(v1,comparator,v2){comparator="="==comparator?"==":comparator;for(var v1parts=v1.split("."),v2parts=v2.split("."),maxLen=Math.max(v1parts.length,v2parts.length),part1,part2,cmp=0,i=0;i<maxLen&&!cmp;i++)part1=parseInt(v1parts[i],10)||0,part2=parseInt(v2parts[i],10)||0,part1<part2&&(cmp=1),part1>part2&&(cmp=-1);return eval("0"+comparator+cmp)},managedVersionSvc.prototype.done=function(){this.readyHandler&&(this.readyHandler(),this.readyHandler=null)},managedVersionSvc.$inject=["$window","hgCommonJs2nSvc","hgContextSvc"],managedVersionSvc}();common.managedVersionSvc=managedVersionSvc}(common=hg.common||(hg.common={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(a,b,c){this.$window=a,this.$sce=b,this.contextSvc=c,this.messageCallbacks=[]}return a.prototype.subscribe=function(){var a=this;try{if(this.$window){var b=window.addEventListener?"addEventListener":"attachEvent",c=window[b],d="attachEvent"==b?"onmessage":"message";c(d,function(b){if(b.origin.indexOf("schwab.com")>=0){var c=b.data;a.invokeCallbacks(c.type,c.context,c.data)}else a.contextSvc.warn("Received cross origin message from unexpected origin.")},!1)}else this.contextSvc.warn("Unable to subscribe to window message events")}catch(a){this.contextSvc.error(a)}},a.prototype.getIndexOfCallback=function(a){var b;for(var c in this.messageCallbacks)if(b=this.messageCallbacks[c],b.type===a.type&&b.context===a.context&&b.callback===a.callback)return c;return-1},a.prototype.postMessage=function(a,b,c){switch(c){case 2:this.$window.parent.postMessage(a,b);break;case 1:this.$window.postMessage(a,b);break;default:this.contextSvc.warn("Unable to post message due to invalid crossOriginMessageTargetType")}},a.prototype.invokeCallbacks=function(a,b,c){var d;for(var e in this.messageCallbacks)d=this.messageCallbacks[e],(null===a||""===a||d.type===a&&d.context===b)&&(d.callback(c),d.executeOnce&&this.unregisterCallback(d))},a.prototype.registerCallback=function(a){this.getIndexOfCallback(a)===-1&&this.messageCallbacks.push(a)},a.prototype.unregisterCallback=function(a){var b=this.getIndexOfCallback(a);b>=0&&this.messageCallbacks.splice(b,1)},a.$inject=["$window","$sce","hgContextSvc"],a}();a.crossOriginMessageSvc=b}(b=a.common||(a.common={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(b){var c=function(a){function b(b,c){a.call(this,b,"STATE","GLOBAL"),this.hgJs2nManagerSvc=b,this.hgStateSvc=c,this.commands={NavigationEvent:this.handleNavigationEvent}}return __extends(b,a),b.prototype.handleNavigationEvent=function(a,b,c){var d=a.Data.action.href;0==d.indexOf("/")&&(d=d.replace("/","")),c.hgStateSvc.go(d,null,{notify:!0,reload:!0}),c.hgJs2nManagerSvc.sendAck(a)},b}(a.core.js2n.js2nServiceBase);b.stateJs2nSvc=c}(b=a.common||(a.common={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(){}return a.prototype.new=function(){function a(a){var b=(Math.random().toString(16)+"000000000").substr(2,8);return a?"-"+b.substr(0,4)+"-"+b.substr(4,4):b}return a(!1)+a(!0)+a(!0)+a(!1)},a.prototype.empty=function(){return"00000000-0000-0000-0000-000000000000"},a}();a.uuidSvc=b}(b=a.common||(a.common={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(a,b,c,d){this.QUERY_RESULT_LIMIT=1e3,this.q=a,this.http=c,this.contextSvc=d}return a.prototype.getDataServiceConfig=function(a){if(!a)return null;for(var b in this.contextSvc.appConfig.dataServices){var c=this.contextSvc.appConfig.dataServices[b];if(c.dataServiceId==a)return c}return null},a.prototype.buildOdataQueryRequest=function(a,b){var c=this.buildOdataUrl(a);return 1==b&&this.contextSvc.cache.removeItem(this.contextSvc.cache.cache,c),{method:"GET",url:c,headers:this.buildOdataRequestHeaders(a)}},a.prototype.buildOdataUpdateQueryRequest=function(a,b,c){return{method:"PATCH",url:this.buildOdataPatchUrl(a,b),headers:this.buildOdataRequestHeaders(a),data:c}},a.prototype.buildOdataRequestHeaders=function(a){return{DataServiceVersion:"2.0",MaxDataServiceVersion:"3.0"}},a.prototype.buildOdataPatchUrl=function(a,b){var c;return c=this.buildOdataUrl(a),c&&b&&b.length>0&&(c+="('"+b+"')"),c},a.prototype.buildOdataUrl=function(a){var b,c,d;return a&&a.dataServiceId?(c=this.getDataServiceConfig(a.dataServiceId),b=c.url,"/"!==b.charAt(b.length-1)&&(b+="/"),b+=a.entitySet,a.where&&a.where.length&&(b+=this.getParamDelimeter(d)+"$filter="+a.where,d=!0),a.expand&&a.expand.length>0&&(b+=this.getParamDelimeter(d)+"$expand="+a.expand,d=!0),a.select&&a.select.length>0&&(b+=this.getParamDelimeter(d)+"$select="+a.select,d=!0),a.orderBy&&a.orderBy.length>0&&(b+=this.getParamDelimeter(d)+"$orderby="+a.orderBy,d=!0),"undefined"!=typeof a.top&&0!==a.top&&(b+=this.getParamDelimeter(d)+"$top="+a.top,d=!0),a.param&&null!=a.param&&void 0!=a.param&&(b+=this.getParamDelimeter(d)+"$param="+a.param,d=!0),b):null},a.prototype.getParamDelimeter=function(a){return a?"&":"?"},a.$inject=["$q","$timeout","$http","hgContextSvc"],a}();a.dataContextSvc=b}(b=a.common||(a.common={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(){}return a.prototype.getWeightedGroups=function(a,b,c){var d={Total:{totalValue:void 0,weight:void 0,rows:b}};if(d.Total.totalValue=this.sum("Value",d.Total.rows),d.Total.weight=this.weightPct(d.Total.totalValue,d.Total.totalValue),a)for(var e in b){var f=b[e],g=f[a];d[g]||(g="undefined"==typeof c||c<1||Object.keys(d).length<c-1?g:"Other"),d[g]||(d[g]={totalValue:void 0,weight:void 0,rows:[]}),d[g].rows.push(f)}for(var h in b)b[h].Weight=this.weightPct(b[h].Value,d.Total.totalValue);for(var i in d)"all"!==i&&(d[i].totalValue=this.sum("Value",d[i].rows),d[i].weight=this.weightPct(d[i].totalValue,d.Total.totalValue));return d},a.prototype.sum=function(a,b){var c=0;for(var d in b)c+=b[d][a];return c},a.prototype.weight=function(a,b){return a>0?a/b:0},a.prototype.weightPct=function(a,b){var c=100*this.weight(a,b);return c},a.$inject=[],a}();a.calcSvc=b}(b=a.common||(a.common={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(b){var c=function(a){function b(b,c){a.call(this,b,"COMMON","GLOBAL"),this.hgJs2nManagerSvc=b,this.$rootScope=c,this.commands={PauseCommand:this.handlePauseCommand,ResumeCommand:this.handleResumeCommand,ThrowAwayBootstrappingMessage:this.handleThrowAwayBootstrappingMessage},this.isWebReady=!1}return __extends(b,a),b.prototype.handlePauseCommand=function(a,b,c){c.$rootScope.$broadcast("PAUSE_APP_EVENT"),c.hgJs2nManagerSvc.sendAck(a)},b.prototype.handleResumeCommand=function(a,b,c){c.$rootScope.$broadcast("RESUME_APP_EVENT"),c.hgJs2nManagerSvc.sendAck(a)},b.prototype.handleThrowAwayBootstrappingMessage=function(a,b,c){c.hgJs2nManagerSvc.sendAck(a)},b.prototype.getMeCard=function(){return this.hgJs2nManagerSvc.sendAsync("GetUserContact")},b.prototype.getTermsConsent=function(){this.hgJs2nManagerSvc.send("GetTermsAndConditionsAgreement")},b.prototype.sendTermsConsent=function(){this.hgJs2nManagerSvc.send("SendTermsAndConditionsAgreement")},b.prototype.showSpinner=function(){this.hgJs2nManagerSvc.send("ShowSpinner")},b.prototype.hideSpinner=function(){this.hgJs2nManagerSvc.send("HideSpinner")},b.prototype.showMenu=function(){return this.hgJs2nManagerSvc.sendAsync("ShowMenu")},b.prototype.raiseSessionTimeoutEvent=function(){this.hgJs2nManagerSvc.send("SessionTimeoutEvent")},b.prototype.raiseLogoutEvent=function(){this.hgJs2nManagerSvc.send("LogoutEvent")},b.prototype.raiseRedirectBeginEvent=function(a,b){this.hgJs2nManagerSvc.send("RedirectBeginEvent",null,{targetUrl:a,overrideTimeout:b})},b.prototype.raiseRedirectEndEvent=function(){this.hgJs2nManagerSvc.send("RedirectEndEvent")},b.prototype.raiseNetworkRequestEndEvent=function(){this.hgJs2nManagerSvc.send("NetworkRequestEndEvent")},b.prototype.navigateToExternal=function(a,b){var c={action:{href:a,rel:"external",context:"GLOBAL"},confirmation:{confirmationType:"Sheet",confirmationText:"You are about to leave the application. Do you want to continue?",cancelButtonText:"Cancel",confirmButtonText:"Continue"}};return this.hgJs2nManagerSvc.send("NavigationEvent",null,c,b)},b.prototype.navigateToApp=function(a,b){a||(a="hg-app://showLaunchScreen");var c={action:{href:a,rel:"app",context:"GLOBAL"}};return this.hgJs2nManagerSvc.send("NavigationEvent",null,c,b)},b.prototype.navigateToNativeDashboard=function(a,b){var c={action:{href:"app://assets",rel:"app",context:"GLOBAL"}};return this.hgJs2nManagerSvc.send("NavigationEvent",b,c,a)},b.prototype.navigateToSelectedDocument=function(a,b,c){var d={action:{href:a,rel:"web",context:"GLOBAL"},confirmation:{confirmationType:"Sheet",confirmationText:"You are about to leave the application. Do you want to continue?",cancelButtonText:"Cancel",confirmButtonText:"Continue"}};return this.hgJs2nManagerSvc.send("DocumentViewerEvent",c,d,b)},b.prototype.navigateToCamera=function(a,b){var c={targetURL:"http://mdev3.dev.schwab.com/savePicHere"};return this.hgJs2nManagerSvc.send("CameraEvent",b,c,a)},b.prototype.sendInterventionCompletedEvent=function(a){this.hgJs2nManagerSvc.send("InterventionCompletedEvent",null,a,"GLOBAL")},b.prototype.sendPresentInterstitialScreen=function(a,b,c){this.hgJs2nManagerSvc.send("PresentInterstitialScreen",void 0,{href:a,rel:b,presentationStyle:c},void 0)},b.prototype.raiseUrgentNotificationEvent=function(a,b,c){return this.hgJs2nManagerSvc.send("UrgentNotificationEvent",b,a,c)},b.prototype.invokeCameraForPicture=function(a,b,c,d){var e={overlay:d,targetURL:a,imageSettings:{imageColor:"C",imageResolutionWidth:"1600",imageResolutionHeight:"1200",imageDepth:"24",imageCompression:"30"}};return this.hgJs2nManagerSvc.sendAsync("CameraEvent",c,e,b||"GLOBAL")},b.prototype.isAndroid=function(){return/Android/i.test(navigator.userAgent)},b.prototype.isBlackBerry=function(){return/BlackBerry/i.test(navigator.userAgent)},b.prototype.isIOS=function(){return/(iPhone|iPod|iPad).*AppleWebKit(?!.*Version)/i.test(navigator.userAgent)},b.prototype.isOpera=function(){return/Opera Mini/i.test(navigator.userAgent)},b.prototype.isWindows=function(){return/IEMobile|MSIE/i.test(navigator.userAgent)},b.prototype.isSmallIOS=function(){return/(iPhone|iPod).*AppleWebKit(?!.*Version)/i.test(navigator.userAgent)},b.prototype.isSmallDevice=function(){return!!(this.isSmallIOS()||this.isAndroid()||this.isBlackBerry())},b.prototype.isLargeDevice=function(){return/(iPad).*AppleWebKit(?!.*Version)/i.test(navigator.userAgent)},b.prototype.isBigweb=function(){return!this.isSmallDevice()&&!this.isLargeDevice()},b}(a.core.js2n.js2nServiceBase);b.commonJs2nSvc=c}(b=a.common||(a.common={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(a,b,c){this.q=a,this.http=b,this.hgContextSvc=c,this.hgContextSvc.appConfig.cmsAssetUrl?(this.remoteAssetUrlBase=this.hgContextSvc.appConfig.cmsAssetUrl+"/asset?cmsid=",this.remotePageAssetUrlBase=this.hgContextSvc.appConfig.cmsAssetUrl+"/intelligent/page?cmsid=",this.remoteFileAssetUrlBase=this.hgContextSvc.appConfig.cmsAssetUrl+"/file/"):(this.remoteAssetUrlBase=this.hgContextSvc.appConfig.clientApiUrl+"/public/asset/",this.remotePageAssetUrlBase=this.hgContextSvc.appConfig.clientApiUrl+"/public/asset/",this.remoteFileAssetUrlBase=this.hgContextSvc.appConfig.clientApiUrl+"/public/file/"),this.remoteCmsPublicIntelligentPageAssetUrlBase=this.hgContextSvc.appConfig.cmsPublicIntelligentPageAssetUrl,this.remoteBlogUrl=this.hgContextSvc.appConfig.blogUrl,this.whitePapersUrl=this.hgContextSvc.appConfig.whitePaperUrl,this.remoteBeneAssetUrlBase=this.hgContextSvc.appConfig.clientApiUrl+"/public/asset/"}return a.prototype.getRemoteAssetUrl=function(a,b){return 0==a.indexOf("SIP-")||a.lastIndexOf("-AS")==a.length-3?"FILE"==b?this.remoteFileAssetUrlBase+a:this.remoteAssetUrlBase+a:0==a.toUpperCase().indexOf("SERVICE-BENEFICIARYWEBPART-")?this.remoteBeneAssetUrlBase+a:a.toUpperCase().indexOf("RULES-OF-SUCCESSION")>=0?this.remoteBeneAssetUrlBase+a:this.remotePageAssetUrlBase+a},a.prototype.getRemoteFileAssetUrl=function(a){return this.remoteFileAssetUrlBase+a},a.prototype.getRemoteBlogUrl=function(a){return this.remoteBlogUrl+a},a.prototype.getWhitePapersUrl=function(a){return this.whitePapersUrl+a},a.prototype.getRemoteCmsPublicIntelligentPageAssetUrl=function(a){return this.remoteCmsPublicIntelligentPageAssetUrlBase+a},a.prototype.getRemoteAsset=function(a,b){var c=this.q.defer();return this.http.get(this.getRemoteAssetUrl(a,b)).success(function(a,b,d,e){c.resolve(a)}).error(function(a,b,c,d){}),c.promise},a.prototype.getRemoteFileAsset=function(a,b){var c=this.q.defer();return this.http.get(this.getRemoteAssetUrl(a,b)).success(function(a,b,d,e){c.resolve(a)}).error(function(a,b,c,d){}),c.promise},a.$inject=["$q","$http","hgContextSvc"],a}();a.hgRemoteAssetSvc=b}(b=a.common||(a.common={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(a){this.$rootScope=a}return a.prototype.supportedSchemes=function(a,b){var c=!1;if(b)for(var d=0;d<b.length;d++)if(a.indexOf(b[d])>=0){c=!0;break}return c},a.prototype.getCMSBody=function(a){var b=null,c=null,d=null;if(a){try{c=angular.element(a)}catch(b){a="<span>"+a+"</span>",c=angular.element(a)}angular.isElement(c)?(d=c.find("#cms-body"),b=d&&d.length>0?d.contents():a):b=a}else b=a;return b},a}();a.hgCMSAssetHelperSvc=b}(b=a.common||(a.common={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(a,b,c,d,e,f,g){this.$q=a,this.$http=b,this.$window=c,this.$rootScope=d,this.APP_CONFIG=e,this.cache=f,this.hgCustomizationJs2nSvc=g,this.DEFAULT_PHONE="855-694-5208",this.DEFAULT_FIRM_ID=865045761,this.appConfig=e,this.window=c,this.$rootScope=d,this.resetToDefault();var h=new Date;this.cachebuster=h.getTime().toString()}return a.prototype.setAllFirms=function(a){this.allFirms=a},a.prototype.getAllFirms=function(){return this.allFirms?this.allFirms:[]},a.prototype.setFirmInfo=function(a){this.firm=a,this.hgCustomizationJs2nSvc.handleCSExtensionProgramChange(this.getThemeKey(),this.getAdvisorSpecificDisclosure())},a.prototype.getAdvisorProgramForProspect=function(a){return this.$http.get(this.appConfig.dataServices[2].url+"AsPrograms?$filter=ProgramPin eq '"+a+"' &$expand=ColorRef,FirmRef").then(function(a){return a.data&&a.data.value?a.data.value[0]:null},function(a){throw"getAdvisorProgramForProspect call failed: "+a})},a.prototype.setFirmProgramInfo=function(a){var b=this.appConfig.dashboardServiceApiUrl+"/profile/SetFirmProgramInfo?firmId="+a.FirmId.toString()+"&program="+a.ProgramPin;this.cache.removeItem(this.cache.cache,b);var c=this.$q.defer();return this.$http.get(b).success(function(a){c.resolve(a)}).error(function(){c.reject(!1)}),c.promise},a.prototype.setAdvisorProgram=function(a){var b="";a&&a.ColorRef&&(b=a.ColorRef.AssetSpriteRefId),this.firm={FirmId:0,Accounts:[],AdvisorProgramInfo:a,PhoneDisplay:"",MobileImageId:a.MobileImageRefId,WebImageId:a.WebImageRefId,AssetSpriteId:b}},a.prototype.getAdvisorProgram=function(){return this.firm.AdvisorProgramInfo},a.prototype.getThemeName=function(){var a=this.firm.AdvisorProgramInfo?this.firm.AdvisorProgramInfo.ColorRef.ThemeName:null;return a||!this.$rootScope.isIIP||this.$rootScope.session.isLoggedIn?a:"iipClass"},a.prototype.getColorPalette=function(){return this.firm.AdvisorProgramInfo&&this.firm.AdvisorProgramInfo.ColorRef&&this.firm.AdvisorProgramInfo.ColorRef.ColorPalette&&this.firm.AdvisorProgramInfo.ColorRef.ColorPalette.length>0?this.firm.AdvisorProgramInfo.ColorRef.ColorPalette:this.appConfig.colorPalette},a.prototype.getColorPaletteId=function(){return this.firm.AdvisorProgramInfo?this.firm.AdvisorProgramInfo.ColorRef.Id:null},a.prototype.getPaletteColor=function(a){var b=this.getColorPalette(),c=_.findWhere(b,{Key:a});return c?c.Value:null},a.prototype.getLogoStyle=function(a,b){void 0===b&&(b=!0);var c=null;return this.firm&&(c=b?this.getImageStyle(this.firm.WebImageId):this.getImageStyle(this.firm.MobileImageId)),null==c&&this.firm&&this.firm.FirmId&&this.firm.FirmId!=this.DEFAULT_FIRM_ID&&(c=""),null==c&&(c=a?this.appConfig.url+"images/IIP_logo.svg":this.appConfig.url+"images/logo.svg"),c},a.prototype.getAdvisorSpecificDisclosure=function(){return this.firm.AdvisorProgramInfo?this.firm.AdvisorProgramInfo.AdvisorInformation.Disclosure:null},a.prototype.getAdvisorInformation=function(){return this.firm.AdvisorProgramInfo?this.firm.AdvisorProgramInfo.AdvisorInformation:null},a.prototype.hasClientFeature=function(a){return!!this.$rootScope.isSIP||this.firm.AdvisorProgramInfo.ClientFeatures[a]!==!1},a.prototype.getDonutSpriteStyle=function(){return this.getImageStyle(this.firm.AssetSpriteId)},a.prototype.getImageStyle=function(a){var b=null;if(a){var c=this.appConfig.dataServices[2].url+"AsLogos(%27"+a+"%27)?"+this.cachebuster;b=c}return b},a.prototype.getPhoneDisplay=function(){return this.firm.PhoneDisplay?this.firm.PhoneDisplay:this.firm.AdvisorProgramInfo&&this.firm.AdvisorProgramInfo.AdvisorInformation.PhoneNumber&&this.firm.AdvisorProgramInfo.AdvisorInformation.PhoneNumber.Number?10==this.firm.AdvisorProgramInfo.AdvisorInformation.PhoneNumber.Number.length?this.firm.AdvisorProgramInfo.AdvisorInformation.PhoneNumber.Number.substr(0,3)+"-"+this.firm.AdvisorProgramInfo.AdvisorInformation.PhoneNumber.Number.substr(3,3)+"-"+this.firm.AdvisorProgramInfo.AdvisorInformation.PhoneNumber.Number.substr(6,4):this.firm.AdvisorProgramInfo.AdvisorInformation.PhoneNumber.Number:this.DEFAULT_PHONE},a.prototype.getSchwabFirmId=function(){return this.firm.AdvisorProgramInfo&&this.firm.AdvisorProgramInfo.FirmRef.SchwabFirmId?this.firm.AdvisorProgramInfo.FirmRef.SchwabFirmId:this.DEFAULT_FIRM_ID},a.prototype.getProgramPin=function(){return this.firm.AdvisorProgramInfo.ProgramPin},a.prototype.getProgramRefId=function(){return this.firm.AdvisorProgramInfo&&this.firm.AdvisorProgramInfo.Id?this.firm.AdvisorProgramInfo.Id:null},a.prototype.getThemeKey=function(){var a="";switch(this.getColorPaletteId()){case"54f4c59992428ab44a2b51a9":a="colorPalette01";break;case"54f4c59992428ab44a2b51aa":a="colorPalette02";break;case"54f4c59992428ab44a2b51ab":a="colorPalette03";break;case"54f4c59992428ab44a2b51ac":a="colorPalette04";break;case"54f4c59992428ab44a2b51ad":a="colorPalette05";break;case"54f4c59992428ab44a2b51ae":a="colorPalette06";break;case"54f4c59992428ab44a2b51af":a="colorPalette07";break;case"54f4c59992428ab44a2b51b0":a="colorPalette08";break;case"54f4c59992428ab44a2b51b1":a="colorPalette09"}return a},a.prototype.resetToDefault=function(){this.firm={FirmId:0,Accounts:[],AdvisorProgramInfo:{ColorRef:{AssetSpriteRefId:"",ColorPalette:[],ThemeName:"",IsDefault:!1,Id:""},Id:"",ProgramName:"",ProgramDescription:"",ProgramPin:"",Strategies:[],AdvisorInformation:{FirmName:"",AdvisorAddress:"",PhoneNumber:{Number:"",Label:"",Primary:!1},FaxNumber:{Number:"",Label:"",Primary:!1},EmailAddress:"",URL:"",Disclosure:"",UseCaliforniaMunis:null,OfferTaxLossHarvesting:null},ClientFeatures:{},FirmRef:{SchwabFirmId:""},OfferTaxLossHarvesting:!1,UseCaliforniaMunis:!1,MobileImageRefId:"",WebImageRefId:""},PhoneDisplay:"",MobileImageId:"",WebImageId:"",AssetSpriteId:""}},a.$inject=["$q","$http","APP_CONFIG"],a}();a.customizationSvc=b}(b=a.common||(a.common={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(b){var c=function(a){function b(b){a.call(this,b,"CUSTOMIZATION","GLOBAL"),this.hgJs2nManagerSvc=b,this.commands={CSExtensionProgramChange:this.handleCSExtensionProgramChange}}return __extends(b,a),b.prototype.handleCSExtensionProgramChange=function(a,b,c){var d={themeKey:a,advisorDisclosure:b};this.hgJs2nManagerSvc.send("ProgramChangedEvent",c,d,this.contextId)},b.$inject=["hgJs2nManagerSvc"],b}(a.core.js2n.js2nServiceBase);b.customizationJs2nSvc=c}(b=a.common||(a.common={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(b){var c=function(a){function b(b,c,d,e,f,g,h,i,j,k,l){a.call(this,c,d,e,f),this.$rootScope=b,this.$q=c,this.$timeout=d,this.$http=e,this.contextSvc=f,this.$filter=g,this.hgRemoteAssetSvc=h,this.$window=i,this.$sce=j,this.$modal=k,this.performanceSvc=l,this.ACTIVITY_BATCH_SIZE=100,this.USE_MOCK_DATA=!0,this.MOCK_DATA_MAP=[],this.mockBenchmarkItems=[{id:1,value:"S&P 500"},{id:2,value:"Russell 2000"},{id:3,value:"MSCI EAFE"},{id:4,value:"MSCI EAFE Small Cap"},{id:5,value:"MSCI Emerging Markets"},{id:6,value:"Barclays US Corporate Credit"},{id:7,value:"Barclays Global Agg Ex-US"},{id:8,value:"S&P GSCI Precious Metals"}],this.q=c,this.http=e,this.window=i,this.sce=j}return __extends(b,a),b.prototype.uninvestedChartMessage=function(){return this.contextSvc.isIIP()?"Your portfolio is awaiting funding or pending our selection and has not been established yet. Based on the information you provided, this is your pending portfolio allocation.":"Your portfolio has not been established yet. Based on the information you provided, this is your pending portfolio allocation."},b.prototype.getAllAccountsClosedMessage=function(){var a=this.contextSvc.getActiveAccount(),b=a&&a.AcctIdDisplay?a.AcctIdDisplay.toString():this.contextSvc.getAllAccountClosedFlag(),c=new Object;if(b){var d=this.contextSvc.appConfig.allAccountsClosedMessage.toString().replace("accountid",b.toString()).split(",");d&&d.length>0&&(c.message1=d[0],this.$rootScope.isSIP?c.message2=d[1]:this.$rootScope.isIIP&&(c.message2=d[2]))}return c},b.prototype.getAccountId=function(a){var b;return this.window.sessionStorage.getItem("slctdAccMdlId")?b=this.window.sessionStorage.getItem("slctdAccMdlId"):angular.forEach(this.contextSvc.getSessionData().mercuryAccounts,function(c){a==c.accountNumber&&null!=c.model&&(b=c.model.Id,this.window.sessionStorage.setItem("slctdAccMdlId",b))}),b},b.prototype.get=function(a){var b=this,c=this.$q.defer(),d={},e=this.contextSvc.getActiveAccount(),f=this.contextSvc.getActivePortfolioId();if(e&&e.accountNumber&&f){var g=(this.getAccountId(e.accountNumber),e.accountStatus),h=("00"==e.accountNumber.substr(0,2)?e.accountNumber.substr(2,e.accountNumber.length-2):e.accountNumber,"Invested"==g);this.applyCommonProps(d),d.accountStatus=g,this.$q.all([this.getAssetAllocation(f,e.accountNumber,h),this.getActivityFeed(f)]).then(function(a){if(a){var e,f;if(a[0]){if(a[0].assets&&a[0].assets.hasOwnProperty("status")&&"ERROR"==a[0].assets.status){var g=a[0].assets.hasOwnProperty("message")&&""!=a[0].assets.message?a[0].assets.message.toString().split("$"):[],i=g&&g[0]?g[0].toString():b.contextSvc.appConfig.featureUnavailableMessage.toString(),j=g&&g[1]?g[1].toString():"";d.badAssetData=!0,d.badAssetDataMessage1=i,d.badAssetDataMessage2=j}else d=a[0];if(a[0].goals)if(a[0].goals.hasOwnProperty("status")&&"ERROR"==a[0].goals.status){var g=a[0].goals.hasOwnProperty("message")&&""!=a[0].goals.message?a[0].goals.message.toString().split("$"):[],i=g&&g[0]?g[0].toString():b.contextSvc.appConfig.featureUnavailableMessage.toString(),j=g&&g[1]?g[1].toString():"";d.badGoalData=!0,d.badGoalDataMessage1=i,d.badGoalDataMessage2=j,d.goals=null}else d.goals=a[0].goals}a[1]&&(a[1].hasOwnProperty("badActivityData")&&a[1].badActivityData?(d.badActivityData=!0,d.badActivitydataMessage1=a[1].hasOwnProperty("badActivityDataMsg1")?a[1].badActivityDataMsg1.toString():b.contextSvc.appConfig.featureUnavailableMessage.toString(),d.badActivitydataMessage2=a[1].hasOwnProperty("badActivityDataMsg2")?a[1].badActivityDataMsg2.toString():""):(e=a[1]&&a[1].OverviewItem?a[1].OverviewItem:null,f=a[1]&&a[1].ActivityItems?a[1].ActivityItems:null,b.applyOverviewActivity(d,e,h),b.applyActivityFeed(d,f))),b.$rootScope.$emit("UPDATED_ACCOUNT_DATA",d),c.resolve(d)}}).catch(function(a){console.error("Error retrieving account data: "+(a&&a.value)),c.reject(a)})}else c.reject();return c.promise},b.prototype.getNativePerformanceChartData=function(a,c,d){var e,f=this.$q.defer(),g=this;return this.get(null).then(function(h){var i;"Invested"!=h.accountStatus?(i={status:"SUCCESS",message:b.TextNotInvestedPerformanceBody,messageTitle:b.TextNotInvestedMessageTitle},e={name:h.name,accountStatus:h.accountStatus,accountName:h.accountName,accountNumber:h.accountNumber,balance:h.balance,assets:h.assets,gainLoss:"",activity:h.activity,goals:h.goals,settings:h.settings,performance:i},f.resolve(e)):g.performanceSvc.getNativePerformanceChartData(a,c,d).then(function(a){i=a,e={name:h.name,accountStatus:h.accountStatus,accountName:h.accountName,accountNumber:h.accountNumber,balance:h.balance,assets:h.assets,activity:h.activity,goals:h.goals,settings:h.settings,gainLoss:i.gainLoss,performance:i},f.resolve(e)})}),f.promise},b.prototype.applyDrift=function(a,b,c){if(c)if(b&&b.first&&b.last){var d=b.first;b.last;a.accountName=d.AccountNumber,a.accountNumber=d.AccountNumber,a.balance=this.$filter("currency")(d.TotalValue,"$",2),a.assets={status:"SUCCESS",data:b.data,timestamp:b.timestamp}}else a.assets={status:"ERROR",message:"Data currently unavailable"};else a.accountName="Individual Account",this.$rootScope.deviceInfo.isSmallScreen()?a.balance="Pending":a.balance="Pending Portfolio Allocation",a.assets={status:"SUCCESS",message:this.uninvestedChartMessage(),data:b.data}},b.prototype.applyCommonProps=function(a){a.settings={status:"SUCCESS",display:!0,label:"Settings",imageId:"Inc1",_links:[{href:"charts.accountSettings",rel:"webApp"}]}},b.prototype.applyOverviewActivity=function(a,c,d){if(c){var e,f;switch(c.EventId){case 1:e="portfolio_36x36",f="icon-portfolio";break;case 2:e="tax-loss-harvesting_36x36",f="icon-tax-loss-harvesting";break;case 3:e="activityFunding",f="icon-warning";break;case 4:c.SummaryText.indexOf("rebalanced")>0?(e="portfolio_36x36",f="icon-portfolio"):c.SummaryText.indexOf("tax loss harvested")>0&&(e="tax-loss-harvesting_36x36",f="icon-tax-loss-harvesting");break;case 5:e="portfolio_36x36",f="icon-portfolio";break;case 6:e="dividends-interests_36x36",f="icon-dividends-intrest";break;case 200:case 201:case 202:e="transfer_36x36",f="icon-transfer";break;case 101:case 104:e="success_48x48",f="icon-success";break;case 102:case 105:case 106:case 107:e="info_48x48",f="icon-info-circle";break;case 103:e="error_48x48",f="icon-error"}a.activity={display:!0,imageId:e,iconClass:f,label:"ACTIVITY",status:"SUCCESS",message:c.SummaryText,_links:[{href:"charts.activity"}]}}else d?a.activity={status:"ERROR",message:"Data currently unavailable"}:a.activity={display:!0,label:"ACTIVITY",status:"SUCCESS",message:b.TextNotInvestedActivityFeedBody,_links:""}},b.prototype.applyActivityFeed=function(a,b){a.activityFeed=b},b.prototype.getPerfStartEndDates=function(a,b,c){var d,e;null==c&&(c=new Date);var f=moment(c).month()-moment(c).month()%3,g=moment(c).month()%3+1,h=moment(c).subtract({months:g}).endOf("month"),i=h.format(),j=h.clone().subtract({months:2}).startOf("month").format();if(a&&a.length>1)switch(b){case"Since Inception":d=a[0].Date,e=a[a.length-1].Date;break;case"Last Quarter":d=j,e=i;break;case"Quarter to Date":d=moment(new Date(moment(c).get("year"),f,1)).format(),e=a[a.length-1].Date;break;case"Last Year":d=moment().subtract(1,"year").startOf("year").format(),e=moment().subtract(1,"year").endOf("year").format();break;case"Year to Date":d=moment().startOf("year").format(),e=a[a.length-1].Date;break;case"Custom":}var k={sDate:d,eDate:e};return k},b.prototype.getAssetAllocation=function(a,b,c,d){var e=this.q.defer(),f=this.contextSvc.appConfig.clientApiUrl+"/accounts/"+a+"/"+b+"/dashboard";return d&&this.contextSvc.cache.removeItem(this.contextSvc.cache.cache,f),this.http.get(f).success(function(a,b,c,d){e.resolve(a)}).error(function(a,b,c,d){e.reject(a)}),e.promise},b.prototype.parseAssetAllocation=function(a){if(a&&a.length>0&&null!=a[0])return{first:a[0],last:a[a.length-1],data:this.normalizeAssets(a[0]),timestamp:moment(a[0].ReportTime).zone("-04:00").format(b.FormatAssetTimestamp)
}},b.prototype.parseModelAssetAllocations=function(a,b){return{first:"",last:"",data:this.normalizeModelAllocations(a,b),timestamp:""}},b.prototype.makeLeveledCharts=function(a,b,c,d,e,f){var g=this;void 0===f&&(f=!0);var h=this.findOrCreateAssetEntry(a,b,"Level1"),i=this.contextSvc.customization.getPaletteColor(h.name),j=this.contextSvc.customization.getPaletteColor(h.name+" Unselected");j||(j=i),h.value+=c,h.percentage+=100*d,h.fundDescription=b.AssetClass.Description,h.dollar+=c,h.dollarFormatted=f?this.$filter("currency")(h.dollar,"$",2):"Pending "+h.name+" Allocation",h.colorNormalhex=i,h.colorDeselectedhex=j,h.legendNumeric=this.$filter("currency")(h.dollar,"$",2),h.chartLabel=f?h.name:"Pending "+h.name+" Allocation",h.seriesLabel=f?h.name:h.name+" "+Math.round(100*h.percentage)/100+"%";var k=this.findOrCreateAssetEntry(h.items,b,"Level3");k.value+=d,k.percentage+=100*d,k.fundDescription=b.AssetClass.Description,k.dollar+=c,k.dollarFormatted=f?this.$filter("currency")(k.dollar,"$",2):"Pending "+h.name+" Allocation",k.colorNormalhex=i,k.colorDeselectedhex=j,k.legendNumeric=this.$filter("currency")(k.dollar,"$",2),k.chartLabel=k.name,k.uriSource=b.AssetClass.UriSource,k.seriesLabel=k.name,_.forEach(e,function(a){g.addSecuritiesList(k,c,d,a,f)})},b.prototype.addSecuritiesList=function(a,b,c,d,e){if(a.securities||(a.securities=[]),c>0&&d){var f=d.SecurityDescription?d.SecurityDescription:"",g=d.Info?d.Info:"",h=d.Symbol?d.Symbol:f+g,i=e?this.$filter("currency")(b,"$",2):"";a.securities.push({symbol:h,description:f,balance:i,info:g,percentage:100*c,percentageFormatted:Math.round(100*c*100)/100+"%"})}},b.prototype.normalizeModelAllocations=function(a,b){var c=this,d=[];return a&&(b.push("CASH"),_.forEach(a.Allocations,function(a){if(a.Weight>0){a.AssetClass.SecurityAllocations=_.filter(a.AssetClass.SecurityAllocations,function(a){return!_.contains(b,a.Symbol)});var e=_.map(a.AssetClass.SecurityAllocations,function(a){return a.Symbol}),f=[],g="";e&&e.length&&(g=e.join(", "),f.push({SecurityDescription:"ETFs used to represent this asset class"},{Info:g,SecurityDescription:"Ticker Symbols: "})),c.makeLeveledCharts(d,a,0,a.Weight,f,!1)}})),this.percentSweepers(d),this.sortAssetCategories(d)},b.prototype.normalizeAssets=function(a){var b=this,c=[];return a&&a.PositionDrifts&&_.each(a.PositionDrifts,function(a){if(a&&a.Allocation){var d=(100*a.PositionCurrent.Weight,a.Allocation),e=[{Symbol:a.Symbol,SecurityDescription:a.SecurityDescription}];b.makeLeveledCharts(c,d,a.PositionCurrent.Value,a.PositionCurrent.Weight,e,!0)}}),this.normalizePercentsLeastRemainder(c,100),this.percentSweepers(c),this.sortAssetCategories(c)},b.prototype.percentSweepers=function(a){return _.each(a,function(a){(isNaN(a.percentage)||null==a.percentage)&&(a.percentage=0),(isNaN(a.value)||null==a.value)&&(a.value=0),a.percentageFormatted=Math.floor(100*a.percentage)/100+"%",a.chartNumeric=a.percentage+"%";var b=_.reduce(a.items,function(a,b){return a+b.percentage},0);b<1&&(b=1),_.each(a.items,function(c){(isNaN(c.percentage)||null==c.percentage)&&(c.percentage=0),(isNaN(c.value)||null==c.value)&&(c.value=0),c.percentageFormatted=Math.floor(100*c.percentage)/100+"%",c.chartNumeric=c.percentage+"%",c.percentage=c.percentage*(a.percentage/b)})}),this.normalizeAssetsWithZeroPercentage(a),this.sortAssetCategories(a)},b.prototype.normalizeAssetsWithZeroPercentage=function(a){angular.forEach(a,function(b,c){if("0%"==a[c].percentageFormatted){var d=a[c].items;a[c].percentageFormatted="0.01%",a[c].percentage=.01,angular.forEach(d,function(a,b){"0%"==d[b].percentageFormatted&&(d[b].percentageFormatted="0.01%",d[b].percentage=.01)})}})},b.prototype.normalizePercentsLeastRemainder=function(a,b){var c=[],d=0;_.each(a,function(a){_.each(a.items,function(a){var b,e=0;b=(100*a.percentage).toString().split("."),e=b.length>1?Number("."+b[1]):0,c.push(e),a.percentage=Math.floor(100*a.percentage)/100,d+=a.percentage})});for(var e=_.flatten(_.pluck(a,"items")),f=0;f<c.length&&d<b;++f,d+=.01){var g=_.max(c,function(a){return a}),h=c.indexOf(g);e[h].percentage*=100,e[h].percentage+=1,e[h].percentage=Math.floor(e[h].percentage),e[h].percentage/=100,c[h]=0}_.each(a,function(a){a.items=_.where(e,{level1:a.level1})}),_.each(a,function(a){a.percentage=Math.floor(Math.floor(_.reduce(a.items,function(a,b){return a+1e3*b.percentage},0))/10)/100})},b.prototype.sortAssetCategories=function(a){var b=["Stocks","Fixed Income","Commodities","Cash"],c=[];return _.each(b,function(b){var d=_.find(a,function(a){return a.name===b});d&&c.push(d)}),c},b.prototype.findOrCreateAssetEntry=function(a,b,c){var d="",e="",f="";b&&(b.AssetClass[c]&&b.AssetClass[c].Label&&(d=b.AssetClass[c].Label),b.AssetClass&&b.AssetClass.Level1&&b.AssetClass.Level1.Label&&(e=b.AssetClass.Level1.Label),b.AssetClass&&b.AssetClass.Level3&&b.AssetClass.Level3.Label&&(f=b.AssetClass.Level3.Label));var g=_.find(a,function(a){return a.name==d});return g?g:(g={name:d,items:[],percentage:0,value:0,dollar:0,percentageFormatted:"",dollarFormatted:"",level1:"Level1"===c||"Level2"===c||"Level3"===c?e:null,level2:"Level2"===c||"Level3"===c?f:null,seriesLabel:d},a.push(g),g)},b.prototype.getActivityFeed=function(a,b,c){var d=this,e=this.q.defer(),f=void 0!=b&&void 0!=c?"/"+b+"/"+c:"",g=this.contextSvc.appConfig.clientApiUrl+"/activityfeed/"+a+f;return this.http({method:"GET",url:g}).success(function(a,b,c,f){if(a)if(a.hasOwnProperty("status")&&"ERROR"==a.status.toUpperCase()){var g=a.hasOwnProperty("message")&&""!=a.message?a.message.toString().split("$"):[],h=g&&g[0]?g[0].toString():this.contextSvc.appConfig.featureUnavailableMessage.toString(),i=g&&g[1]?g[1].toString():"",j={badActivityData:!0,badActivityDataMsg1:h,badActivityDataMsg2:i};e.resolve(j)}else a&&a.ActivityItems&&a.ActivityItems.length>0&&_.each(a.ActivityItems,function(a){d.addActivityFeedDetails(a)}),d.addActivityFeedDetails(a.OverviewItem),e.resolve(a);else{var j={badActivityData:!0,badActivityDataMsg1:d.contextSvc.appConfig.featureUnavailableMessage.toString(),badActivityDataMsg2:""};e.resolve(j)}}).error(function(a,b,c,d){e.reject(a)}),e.promise},b.prototype.addActivityFeedDetails=function(a){switch(a.hasDetail=!1,a.EventId){case 0:a.IconClass="menu-chart";break;case 120:a.hasDetail=!0,a.IconClass="icon-target",a.templateGroup=this.getActivityDetailGroupId(a.EventId);break;case 121:a.hasDetail=!0,a.IconClass="icon-target goals-icon-atrisk",a.templateGroup=this.getActivityDetailGroupId(a.EventId);break;case 122:a.hasDetail=!0,a.IconClass="icon-target goals-icon-atrisk",a.templateGroup=this.getActivityDetailGroupId(a.EventId);break;case 1:this.contextSvc.isSIP()&&(a.linkText="Learn more about rebalancing.",a.linkTarget=this.hgRemoteAssetSvc.getRemoteCmsPublicIntelligentPageAssetUrl("P-7509100")),a.IconClass="icon-portfolio",a.hasDetail=!0,a.hasBuys=this.hasTrades(a.Trades,!0),a.hasSells=this.hasTrades(a.Trades,!1),a.templateGroup=this.getActivityDetailGroupId(a.EventId);break;case 2:this.contextSvc.isSIP()&&(a.linkText="Learn more about tax loss harvesting.",a.linkTarget=this.hgRemoteAssetSvc.getRemoteCmsPublicIntelligentPageAssetUrl("P-7509100")),a.IconClass="icon-tax-loss-harvesting",a.hasDetail=!0,a.hasBuys=this.hasTrades(a.Trades,!0),a.hasSells=this.hasTrades(a.Trades,!1),a.templateGroup=this.getActivityDetailGroupId(a.EventId);break;case 3:a.hasDetail=!0,a.IconClass="icon-funding",a.templateGroup=this.getActivityDetailGroupId(a.EventId);break;case 4:a.IconClass="";break;case 5:this.contextSvc.isSIP()&&(a.linkText="Learn more about rebalancing.",a.linkTarget=this.hgRemoteAssetSvc.getRemoteCmsPublicIntelligentPageAssetUrl("P-7509100")),a.IconClass="icon-portfolio",a.hasDetail=!0,a.hasBuys=this.hasTrades(a.Trades,!0),a.hasSells=this.hasTrades(a.Trades,!1),a.templateGroup=this.getActivityDetailGroupId(a.EventId);break;case 6:a.IconClass="icon-dividends-intrest",a.hasDetail=!0,a.hasDividends=this.hasPayments(a.Payments,!0),a.hasInterests=this.hasPayments(a.Payments,!1),a.templateGroup=this.getActivityDetailGroupId(a.EventId);break;case 200:case 201:case 202:a.IconClass="icon-transfer",a.hasDetail=!0,a.templateGroup=this.getActivityDetailGroupId(a.EventId);break;case 101:case 104:a.IconClass="icon-success",a.hasDetail=!0,a.templateGroup=this.getActivityDetailGroupId(a.EventId);break;case 102:case 107:case 105:case 106:a.IconClass="icon-info-circle",a.hasDetail=!0,a.templateGroup=this.getActivityDetailGroupId(a.EventId),a.additionalText="Please contact us if you’d like to discuss our portfolio selection.";break;case 103:a.IconClass="icon-error",a.hasDetail=!0,a.templateGroup=this.getActivityDetailGroupId(a.EventId),a.linkText="Account Closure Form",a.linkTarget=this.hgRemoteAssetSvc.getRemoteFileAssetUrl("P-7697452");break;default:a.IconClass=""}},b.prototype.getPerfMe=function(a,b,c){var d=this.contextSvc.getActivePortfolioId(),e=this.getBenchmark()?this.getBenchmark().toString():"";a=void 0==a?"inception":a;var f=new Object,g="";b&&c&&(g=[moment(b).format("YYYY-MM-DD").toString(),moment(c).format("YYYY-MM-DD").toString()].toString());var h=this.contextSvc.appConfig.clientApiUrl+"/accounts/"+d+"/performance?report="+a+"&indicies="+e+"&dates="+g;this.USE_MOCK_DATA=!1,this.USE_MOCK_DATA&&(h="/mock/perfme/benchmarkMock04.json",this.contextSvc.appConfig.url.indexOf("local")<0&&(h="/benchmark2/client"+h));var i=this.q.defer(),j=!0;return j?this.http.get(h).success(function(a,b,c,d){f=a,i.resolve(f)}).error(function(a,b,c,d){i.reject(a)}):i.resolve(null),i.promise},b.prototype.filterDatesInRange=function(a,b,c){return _.filter(a,function(a){return moment(a.Date).utc().add(1,"d").isAfter(b,"day")&&moment(a.Date).utc().subtract(1,"d").isBefore(c,"day")})},b.prototype.getChartData=function(a,b,c,d){if(!a||a.length<1)return{};var e={},f=[],g=[],h=[],i=[];d||(d=0),b||(b=a[0].Date),c||(c=a[a.length-1].Date);var j,k=_.filter(a,function(a){return moment(a.Date).isBefore(b,"day")}),l=this.filterDatesInRange(a,b,c),m="As of "+moment(a[a.length-1].Date).format("MM/DD/YY"),n=_.sortBy(l,function(a){return moment(a.Date)});if(k&&k.length>0){var o=_.sortBy(k,function(a){return moment(a.Date)});j=o[o.length-1]}else j={BeginningBalance:0,Contributions:d,Withdraws:0,Dividends:0,CapitalAppreciation:0,InvestmentGain:0,Fees:0,OtherFees:0,EndingBalance:d,ChangeInAccrued:0};var p=j.EndingBalance,q=this.computeChartSeriesValues(n,0,function(a,b){return(1+b)*(1+a.NetReturn)-1}),r=this.computeChartSeriesValues(n,0,function(a,b){return(1+b)*(1+a.BenchmarkReturn)-1});if(n.length>0){var s=moment(n[0].Date).subtract({days:1});f.push({x:s,y:0}),g.push({x:s,y:0}),h.push({x:s,y:p}),i.push({x:s,y:j.Contributions+j.Withdraws})}if(_.each(n,function(a,b){f.push({x:moment(a.Date).utc(),y:100*q[b]}),g.push({x:moment(a.Date).utc(),y:100*r[b]}),h.push({x:moment(a.Date).utc(),y:a.EndingBalance}),i.push({x:moment(a.Date).utc(),y:a.Contributions+a.Withdraws})}),n&&n.length>0){var t=100*q[q.length-1],u=n[0],v=n[n.length-1],w=v.InvestmentGain-v.ChangeInAccrued-(j.InvestmentGain-j.ChangeInAccrued);e.gainLoss={status:"SUCCESS",label:"Since Inception",dollar:w,dollarFormatted:this.$filter("currency")(w,"$",2),dollarChange:w>=0?"POSITIVE":"NEGATIVE",percentage:t,percentageFormatted:this.$filter("number")(t,2)+"%",percentageChange:w>=0?"POSITIVE":"NEGATIVE"},e.range={start:u.Date,end:v.Date}}return e.timestamp=m,e.accountOpenDates={start:moment(a[0].Date).toDate(),end:moment(a[a.length-1].Date).toDate()},e.performanceChartTypes=["Investment Performance","Account Value"],e.charts=this.buildChartDataForResponse(f,g,h,i,m,w),e.componentsOfChangeLabel="BALANCE DETAILS",e.componentsOfChange=this.buildComponentsOfChangeForResponse(j,n[n.length-1]),e},b.prototype.computeChartSeriesValues=function(a,b,c){var d=[];return _.reduce(a,function(a,b,e){var f=c(b,a);return d[e]=f,f},b),d},b.prototype.buildChartDataForResponse=function(a,b,c,d,e,f){var g="0%",h="0%";a.length>0&&(g=this.$filter("number")(_.last(a).y,2)+"%"),b.length>0&&(h=this.$filter("number")(_.last(b).y,2)+"%");var i;i=g.indexOf("-")==-1?"POSITIVE":"NEGATIVE";var j;j=h.indexOf("-")==-1?"POSITIVE":"NEGATIVE";var k=f||0,l=b&&b.length?_.last(b).y:0,m=d&&d.length?_.last(d).y:0,n=c&&c.length?_.first(c).y:0,o=d&&d.length?_.first(d).y:0,p=a&&a.length?_.last(a).y:0,q=c&&c.length?_.last(c).y:0;return[{performanceChartType:"Performance",heroAmountHeader1:{label:"Your Investment Performance",dollar:k,dollarFormatted:this.formatCurrency(k),dollarChange:i,percentage:p,percentageFormatted:g,percentageChange:i},heroAmountHeader2:{label:"Your Portfolio's Blended Benchmark",percentage:l,percentageFormatted:h,percentageChange:j,info:{title:"Compare your returns to your benchmark to assess your portfolio's performance",header:"Your Portfolio's Blended Benchmark",assets:this.getBenchmarkPopUpAssets(),footer:[{text:"Learn More about benchmarks.",linkText:"Learn More",_links:{learnMore:[{href:"https://intelligent.schwab.com/public/intelligent/insights/whitepapers/blended-benchmark-performance.html",rel:"web"}]}}]}},series:[{label:"Performance",data:a,beginningBalance:0,endingBalance:g},{label:"Benchmark",data:b,beginningBalance:0,endingBalance:h}]},{performanceChartType:"Account Value",heroAmountHeader1:{label:"Account Value",dollar:q,dollarFormatted:this.formatCurrency(q)},heroAmountHeader2:{label:"Contributions & Withdrawls",dollar:m,dollarFormatted:this.formatCurrency(m)},endingLabel:e,series:[{label:"Balances",data:c,beginningBalance:this.formatCurrency(n),endingBalance:this.formatCurrency(q)},{label:"Contributions",data:d,beginningBalance:this.formatCurrency(o),endingBalance:this.formatCurrency(m)}]}]},b.prototype.buildComponentsOfChangeForResponse=function(a,b){var c=0,d=0,e=0,f=0,g=0,h=0,i=0,j=0;return a&&b&&(c=a.EndingBalance,d=b.EndingBalance,e=b.Contributions-a.Contributions,f=b.Withdraws-a.Withdraws,g=b.Dividends-a.Dividends,h=b.CapitalAppreciation-a.CapitalAppreciation,i=b.Fees-a.Fees,j=b.OtherFees-a.OtherFees),[{textLabel:"Beginning market value",detailTextLabel:this.formatCurrency(c),style:0},{textLabel:"My contributions",detailTextLabel:this.formatCurrency(e),style:1},{textLabel:"Withdrawals",detailTextLabel:this.formatCurrency(f),style:1},{textLabel:"Dividend payments",detailTextLabel:this.formatCurrency(g),style:1},{textLabel:"Investment gain or loss",detailTextLabel:this.formatCurrency(h),style:1},{textLabel:"Management fees",detailTextLabel:this.formatCurrency(i),style:1},{textLabel:"Other fees",detailTextLabel:this.formatCurrency(j),style:1},{textLabel:"Ending market value",detailTextLabel:this.formatCurrency(d),style:0}]},b.prototype.formatCurrency=function(a){return this.$filter("currency")(a,"$",2)},b.prototype.getBenchmarkPopUpAssets=function(){var a=this.contextSvc.getActiveAccount(),b=a?a.accountNumber:null,c=[];return angular.forEach(this.contextSvc.getSessionData().mercuryAccounts,function(a){if(a&&a.model&&a.model.Allocations&&b==a.accountNumber){var d=a.model.Allocations;angular.forEach(d,function(a){for(var b=a.AssetClass.Level1.Label,d=Math.round(100*a.Weight),e=!1,f=0;f<c.length;f++)c[f].textLabel==b&&(c[f].detailTextLabel+=d,e=!0);e||c.push({textLabel:b,detailTextLabel:d})})}}),angular.forEach(c,function(a){a.detailTextLabel=a.detailTextLabel+"%"}),c},b.prototype.hasTrades=function(a,b){for(var c=!1,d=0;d<a.length&&!c;d++)b&&"1"==a[d].TradeType?c=!0:b||"2"!=a[d].TradeType||(c=!0);return c},b.prototype.hasPayments=function(a,b){for(var c=!1,d=0;d<a.length&&!c;d++)b&&1==a[d].PaymentType?c=!0:b||2!=a[d].PaymentType||(c=!0);return c},b.prototype.getActivityDetailGroupId=function(a){var b,c="templates/assets/activityExpanded",d=".html";return 3==a?b="PortfolioUnderValue":6==a?b="DividendAndInterest":103==a?b="AccountRejected":120==a?b="GoalsBackOnTarget":121==a||122==a?b="GoalsAtRiskAndOffTarget":a>=101&&a<=107?b="Account":a>=200&&a<=299?b="Transfer":a<100&&(b="RebalanceAndTaxLoss"),c+b+d},b.prototype.getMockDataFilename=function(){if(this.USE_MOCK_DATA){var a=this.contextSvc.getSessionData().identity;if(a&&a.EmailAddress){var b=_.find(this.MOCK_DATA_MAP,function(b){return b.email==a.EmailAddress});if(b&&b.accounts&&b.accounts.length>0){var c=this.contextSvc.getActiveAccount(),d=c.accountNumber,e=_.find(b.accounts,function(a){return a.account==d});if(e&&e.filename){var f="/mock/perfme/"+e.filename;return this.contextSvc.appConfig.url.indexOf("local")<0&&(f="/release/client"+f),f}}}}},b.prototype.benchmarkOverlay=function(a,b){var a=a,c=this.$modal.open({templateUrl:"templates/assets/selectBenchmarkOverlay.html",controller:"hgSelectBenchmarkModalCtrl",resolve:{items:function(){return{benchmarkListParam:a,selectedBenchmarkListParam:b}}},windowClass:"accounts-modal",size:"lg"});return c},b.prototype.CreateDataLabelsOptions=function(a,b,c,d,e,f){a&&a.length>0&&(d&&""!==d&&"0"!==d&&(a[0].dataLabels={enabled:!0,borderRadius:5,borderWidth:1,color:"#fff",align:"left",y:c?15:-10,data:d,backgroundColor:f?this.convertHexToRGB(f,50):c?this.convertHexToRGB("#F28B24",50):this.convertHexToRGB("#26FFFF",50),formatter:function(){return"<b>"+d+"</b><br/>"}}),e&&""!==e&&"0"!==e&&1!==a.length&&(a[a.length-1].dataLabels={useHTML:!0,enabled:!0,borderRadius:5,borderWidth:0,color:"#fff",align:"right",backgroundColor:f?this.convertHexToRGB(f,50):c?this.convertHexToRGB("#F28B24",50):this.convertHexToRGB("#26FFFF",50),y:25,formatter:function(){return"<b>"+e+"</b><br/>"}}))},b.prototype.detectPlotOverlap=function(a,b,c){return c||(c=.05),a+b!=0?Math.abs((a-b)/((a+b)/2))<c:a==b},b.prototype.labelsThatOverlap=function(a,b){var c,d;return a&&a.length>1&&0!==b?{lhsOverlap:!!c&&c,rhsOverlap:!!d&&d}:{lhsOverlap:!1,rhsOverlap:!1}},b.prototype.convertHexToRGB=function(a,b){a=a.replace("#","");var c=parseInt(a.substring(0,2),16),d=parseInt(a.substring(2,4),16),e=parseInt(a.substring(4,6),16),f="rgba("+c+","+d+","+e+","+b/100+")";return f},b.prototype.removeDecimal=function(a){if(a){var b=parseInt(a);return b>=1e3?b.toLocaleString()+"%":a+"%"}},b.prototype.redrawPerformanceChart=function(a,b,c){var d,e,f=[],g=[],h=[],i=[],j=[],k=this;if(a.performanceRangeNames=[{value:"inception",text:"Since Inception"},{value:"qtd",text:"Quarter to Date"},{value:"ytd",text:"Year to Date"},{value:"custom",text:"Custom"}],a.viewType=[{view:"performance",displayView:"Your Investment Performance",mobileDisplayView:"Performance",mobileDisplayViewClass:"btn"},{view:"value",displayView:"Account Value",mobileDisplayView:"Account Value",mobileDisplayViewClass:"btn"}],void 0==a.customRange&&(a.customRange={},a.customRange.startDate=moment(a.charts.series[0].performanceData[0].x).format(),a.customRange.endDate=moment(a.charts.series[0].performanceData[a.charts.series[0].performanceData.length-1].x).format()),a.customRange.accountStartDate=moment(a.charts.series[0].performanceData[0].x).format(),a.customRange.accountEndDate=moment(a.charts.series[0].performanceData[a.charts.series[0].performanceData.length-1].x).format(),a.customRange.earliestAllowedEndDate=moment(a.customRange.startDate).add(1,"days").format(),a.customRange.latestAllowedStartDate=moment(a.customRange.endDate).subtract(1,"days").format(),a.customRange.dateOptions={formatYear:"yy",showWeeks:!1},a.customRange.openFirstDP=function(b){b.preventDefault(),b.stopPropagation(),a.customRange.firstDP=!0},a.customRange.openSecondDP=function(b){b.preventDefault(),b.stopPropagation(),a.customRange.secondDP=!0},"performance"==b){angular.forEach(a.charts.series[0].performanceData,function(a,b){f.push({x:new Date(a.x),y:a.y})});var l={data:f,fillColor:this.convertHexToRGB(a.charts.series[0].performanceColor,10),color:a.charts.series[0].performanceColor,name:b,lineWidth:3};this.CreateDataLabelsOptions(f,!1,!1,"0",a.charts.series[0].performanceData[a.charts.series[0].performanceData.length-1].y.toFixed(2),a.charts.series[0].performanceColor),c&&angular.forEach(c,function(c,d){h.push({name:c.name?c.name:c,color:a.charts.series[d+1].performanceColor,value:k.removeDecimal(a.charts.series[d+1].performanceData[a.charts.series[d+1].performanceData.length-1].y.toFixed(2)),negative:a.charts.series[d+1].performanceData[a.charts.series[d+1].performanceData.length-1].y<0}),i=[],null!=a.charts.series[d+1]&&(angular.forEach(a.charts.series[d+1].performanceData,function(a,b){i.push({x:new Date(a.x),y:a.y})}),j.push({data:i,fillColor:k.convertHexToRGB(a.charts.series[d+1].performanceColor,10),color:a.charts.series[d+1].performanceColor,name:b,lineWidth:3,type:"line"}),k.CreateDataLabelsOptions(i,!1,!1,"0",a.charts.series[d+1].performanceData[a.charts.series[d+1].performanceData.length-1].y.toFixed(2),a.charts.series[d+1].performanceColor))}),d={chartseries1:l,chartseries2:j[0]?j[0]:{},chartseries3:j[1]?j[1]:{},chartseries4:j[2]?j[2]:{},chartseries5:j[3]?j[3]:{},chartseries6:j[4]?j[4]:{}},e={performanceGain:k.removeDecimal(a.charts.series[0].performanceData[a.charts.series[0].performanceData.length-1].y.toFixed(2)),performanceGainAmt:a.balanceDetails.gainLoss,viewType:b,negative:a.charts.series[0].performanceData[a.charts.series[0].performanceData.length-1].y<0}}else{angular.forEach(a.charts.series[0].valueData,function(a,b){f.push({x:new Date(a.x),y:a.y})}),angular.forEach(a.charts.series[0].contributionData,function(a,b){g.push({x:new Date(a.x),y:a.y})}),this.CreateDataLabelsOptions(f,!1,!1,a.charts.series[0].valueData[0].y,a.charts.series[0].valueData[a.charts.series[0].valueData.length-1].y.toFixed(2),a.charts.series[0].valueColor),this.CreateDataLabelsOptions(g,!1,!1,a.charts.series[0].contributionData[0].y,a.charts.series[0].contributionData[a.charts.series[0].contributionData.length-1].y.toFixed(2),a.charts.series[0].contributionColor);var l={data:f,fillColor:this.convertHexToRGB(a.charts.series[0].performanceColor,10),color:a.charts.series[0].valueColor,name:b,lineWidth:3},m={data:g,fillColor:this.convertHexToRGB(a.charts.series[0].performanceColor,10),color:a.charts.series[0].contributionColor,name:b,lineWidth:3,type:"line"};d={chartseries1:l,chartseries2:m},e={rangeEndBalance:this.$filter("currency")(a.charts.series[0].valueData[a.charts.series[0].valueData.length-1].y,void 0,2),rangeContributions:this.$filter("currency")(a.charts.series[0].contributionData[a.charts.series[0].contributionData.length-1].y,void 0,2),viewType:b}}var n=[["day",[1,2,3]],["week",[1,2]],["month",[1,3,6]]],o={type:"datetime",gridLineWidth:1,gridLineColor:"#000",lineWidth:1,tickLength:5,tickWidth:1,tickPositioner:!1,labelsFormater:"dateFormat",units:n},p={showGridLines:!0,showXLabels:!0,xMinValue:void 0,xMaxValue:void 0,yAxisLocation:0,backgroundColor:"#303f50",IXAxisOption:o};a.chartSeries=d,a.chartOption=p,a.benchmarkWidgets=h,a.performanceAccountWidget=e},b.prototype.getBenchmark=function(){var a=0;if(this.$rootScope.accounts&&(a=this.$rootScope.accounts.indexOf(this.contextSvc.getActiveAccount())),null!=this.window.localStorage.getItem(this.$rootScope.session.userId)){var b=JSON.parse(this.window.localStorage.getItem(this.$rootScope.session.userId));b=void 0!=b[a]?b[a].benchmark:void 0;var c=[];return void 0!=b&&angular.forEach(b,function(a,b){c.push(a.id)}),c.length>0?c:void 0}},b.prototype.saveBenchmark=function(a){var b=0;this.$rootScope.accounts&&(b=this.$rootScope.accounts.indexOf(this.contextSvc.getActiveAccount()));var c={accountIndex:b,benchmark:a};a=[],this.window.localStorage.getItem(this.$rootScope.session.userId)&&(a=JSON.parse(this.window.localStorage.getItem(this.$rootScope.session.userId)),angular.forEach(a,function(c,d){c.accountIndex==b&&a.splice(b,1)})),a.push(c),this.window.localStorage.setItem(this.$rootScope.session.userId,JSON.stringify(a))},b.$inject=["$rootScope","$q","$timeout","$http","hgContextSvc","$filter","hgRemoteAssetSvc","$window","$sce","$modal","hgPerformanceService"],b.CocIntervals={SinceInception:"Since Inception",MonthToDate:"Month to Date",QuarterToDate:"Quarter to Date",YearToDate:"Year to Date",Custom:"Custom"},b.TextNotInvestedMessageTitle="Welcome!",b.TextNotInvestedPerformanceBody="Performance data will be available after your portfolio is established.",b.TextNotInvestedGainLossBody="Gain Loss Updates Appear Here",b.TextNotInvestedActivityFeedBody="Activity Updates Appear Here",b.FormatAssetTimestamp="[As of] M/D/YY h:mm A [EST]",b.FormatPerformanceTimestamp="[As of previous close] M/D/YY",b}(a.common.dataContextSvc);b.portfolioSvc=c}(b=a.assets||(a.assets={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(b){var c=function(a){function c(d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=this;a.call(this,e,f,g,h),this.$rootScope=d,this.$q=e,this.$timeout=f,this.$http=g,this.contextSvc=h,this.monteCarloService=i,this.$filter=j,this.hgRemoteAssetSvc=k,this.suitabilityQuestionsSvc=l,this.strategiesSvc=m,this.$window=n,this.hgAccountSettingsSvc=o,this.enrollmentCommonSvc=p,this.portfolioSvc=q,this.defaultGoalAmount=!0,this.MOCK_DATA_MAP_Email=[{email:"jamessmith1515e@a.com"},{email:"wills@gmai.COM"},{email:"s@sc.com"}],this.goalInfo={type:0,title:{}},this.USE_MOCK_DATA=!0,this.MOCK_DATA_MAP=[{status:"SavingsGoalSetup",filename:"SavingsGoalSetup.json"}],this.goalChartSimulationResults=function(a,b,d,e,f,g){var h,i,j=new Date,k=0;if(d)if(h=new Date,r.enrollmentCommonSvc.getStartingYearsOfYears()){var l=r.enrollmentCommonSvc.getStartingYearsOfYears(),m=l.split(",");k=2==a?Number(m[1]-m[0]):Number(m[1]),h.setFullYear(j.getFullYear()+k)}else h.setFullYear(j.getFullYear()+25);else b.target.endDate&&(h=b.target.endDate);i=""+h.getFullYear(),b.numberOfYears=k=h.getFullYear()-j.getFullYear();var n;if(2==a&&e==c.ColorsGoalSetup&&r.defaultGoalAmount){var o=b.currentBalance/k;n=o/12}else n=r.defaultGoalAmount&&e==c.ColorsGoalSetup&&!d?0:b.target.amount;var p={},j=new Date,q=0,s=JSON.parse(r.$window.localStorage.getItem("goalConfiguration")),t=c.createSimulationInputParams(j,h,a,n,q,b,s),u=r.monteCarloSimulator(t),v=u;if(console.log("1st simulation input"),console.log(t),console.log("1st simulation results"),console.log(u),2==a&&(e==c.ColorsGoalSetup||1==f)&&(r.defaultGoalAmount||d)){p.state=gtx.GoalState.NotSet,p.name=gtx.GoalTypes.Income,p.dates={established:j,targetEnd:h},p.values={targetBalance:0,endingBalance:0,recurringIncome:0==g?n:u.results.recommendations.recurringIncome,recurringDeposit:0},p.currentBalance=0==g&&u.results.recommendations.oneTimeDeposit>0?u.results.recommendations.oneTimeDeposit:b.currentBalance,p.oneTimeDeposit=null!=b.oneTimeContribution.amount?Number(b.oneTimeContribution.amount):0,p.simulationStartDate=j,p.model=b.selectedRiskModel;var w={};if(w.goals=p,w.config=s,t=w,u=r.monteCarloSimulator(t),console.log("2nd simulation input"),console.log(t),console.log("2nd simulation results"),console.log(u),p.values={targetBalance:0,endingBalance:0,recurringIncome:0==g?n:u.results.recommendations.recurringIncome,recurringDeposit:0},0==g){for(var x=0;x<3;x++)if(u.results.recommendations.recurringIncome>=0){var y;y=u.results.recommendations.oneTimeDeposit>0?u.results.currentBalance+u.results.recommendations.oneTimeDeposit:n/u.results.recommendations.recurringIncome*u.results.currentBalance,p.currentBalance=0==g?Math.round(y):b.currentBalance,u=r.monteCarloSimulator(t);var z;0==x&&(z=u),console.log(3+x+" simulation input"),console.log(p),console.log(3+x+"simulation results"),console.log(u)}}else{b.currentBalance<=5e3&&(p.currentBalance=u.results.recommendations.oneTimeDeposit>0?u.results.currentBalance-u.results.recommendations.oneTimeDeposit:u.results.currentBalance),u=r.monteCarloSimulator(t);console.log("3rd  simulation input"),console.log(p),console.log("3rd simulation results"),console.log(u),p.currentBalance=b.currentBalance,p.values={targetBalance:0,endingBalance:0,recurringIncome:u.results.recommendations.recurringIncome,recurringDeposit:0},u=r.monteCarloSimulator(t),console.log("4th  simulation input"),console.log(p),console.log("4th simulation results"),console.log(u)}if(0==g){var A=r.suitabilityQuestionsSvc.isUnfunded()||"newProfile"==r.suitabilityQuestionsSvc.getReferrer()?u.results.currentBalance+u.results.recommendations.oneTimeDeposit:u.results.recommendations.oneTimeDeposit;A>0&&A!=1/0&&(v.results.recommendations.oneTimeDeposit=A),u=v,console.log("final simulation results"),console.log(u)}1==g&&b.currentBalance<=5e3&&n<10&&(u.results.recurringIncome=Math.round(n))}return{goalChart:u,today:j,targetDate:h,targetYear:i}},this.redrawGoalChart=function(a,d,e,f,g,h,i){if(4!=e.state&&5!=e.state){var j=c.ColorsGoalSetup,k=e.title.class,l=1==e.type;switch(e.state){case 1:j=c.ColorsGoalOnTarget,k="goal-on-track-class";break;case 2:j=c.ColorsGoalAtRisk,k="goal-at-risk-class";break;case 3:j=c.ColorsGoalOffTarget,k="goal-off-track-class";break;default:k="goal-not-setup-class",e.title.class=k}var m,n=r.goalChartSimulationResults(d,e,f,j,i,h),o=n.goalChart,p=n.today,q=n.targetDate,s=n.targetYear,t=o.results.series.mid,u=o.results.series.low,v=o.results.series.high,w=o.results.simulationMonths,x=c.calcMonthDifference(p,q)+1,y=w<=60,z=_.last(o.results.series.months),A=o.results.series.months;f&&null!=A&&void 0!=A&&A.length>0&&angular.forEach(A,function(a,b){a==w&&(m=b)});var B,C=void 0,D=void 0;if(l?B=t.length-1:o.results.monthsToZero.mid>=0&&(B=_.indexOf(t,0)),angular.isDefined(B)&&(C=new Date(p.getTime()),C.setMonth(C.getMonth()+o.results.series.months[B]),D=t[B]),angular.isDefined(D)){e.projectedBalance.value1=""+D,j!=c.ColorsGoalSetup&&D>e.target.amount&&(j=c.ColorsGoalOnTarget,k="goal-on-track-class");var E=r.$filter("currency")(D,"",0);if(e&&e.recommendationTargetAmountText){var F=e.recommendationTargetAmountText.replace(/[^\d,]/g,"");if(""==F){var G="Adjusting your goal to $0 would put you back on target without requiring other action.";F=G.replace(/[^\d,]/g,""),e.recommendationTargetAmountText=G.replace(F,E),l&&(e.target.label6=G.replace(F,E))}else e.recommendationTargetAmountText=e.recommendationTargetAmountText.replace(F,E),l&&(e.target.label6=e.recommendationTargetAmountText.replace(F,E))}if(e&&e.recommendationWithdrawalAmountText&&!l){var H=e.recommendationWithdrawalAmountText.replace(/[^\d,]/g,""),I=o.results.recommendations.recurringIncome>0?o.results.recommendations.recurringIncome:0,J=r.$filter("currency")(I,"",0);e.target.editGoalFlag||(e.recommendationWithdrawalAmountText=e.recommendationWithdrawalAmountText.replace(H,J))}}if(e&&e.monthlyContribution.label1){var K=o.results.recommendations.recurringDeposit>0?o.results.recommendations.recurringDeposit:0;e.monthlyContribution.recommendationValue=K;var L=e.monthlyContribution.label1.replace(/[^\d,]/g,""),M=r.$filter("currency")(K,"",0);e.target.editGoalFlag||(e.monthlyContribution.recommendationFlag=0==K,e.monthlyContribution.staticLabel1=e.monthlyContribution.label1,e.monthlyContribution.label1=e.monthlyContribution.label1.replace(L,M)),e.monthlyContribution.staticLabel1=e.monthlyContribution.label1.replace(L,M)}if(e&&e.oneTimeContribution.label1){var N=o.results.recommendations.oneTimeDeposit>0?o.results.recommendations.oneTimeDeposit:0;e.oneTimeContribution.recommendationValue=N;var O=e.oneTimeContribution.label1.replace(/[^\d,]/g,""),M=r.$filter("currency")(N,"",0);e.target.editGoalFlag||(e.oneTimeContribution.recommendationFlag=0==N,e.oneTimeContribution.staticLabel1=e.oneTimeContribution.label1,e.oneTimeContribution.label1=e.oneTimeContribution.label1.replace(O,M)),e.oneTimeContribution.staticLabel1=e.oneTimeContribution.label1.replace(O,M)}if(e.summaryStatement&&(e.summaryStatement.showHelpLink=!0),(r.defaultGoalAmount||f)&&(j==c.ColorsGoalSetup||h)&&l)e.target.amount=D,e.target.label1=r.$filter("currency")(D,"$",0),r.defaultGoalAmount=!1,h&&(e.title.class="goal-on-track-class"),e.summaryStatement&&(e.summaryStatement.summary=(r.contextSvc.device.isSmallScreen()?r.$rootScope.localResources.Goal_Saving_SetupTarget_Mobile_Summary:r.$rootScope.localResources.Goal_Saving_SetupTarget_Summary).replace(/terminationYear/g,s).replace(/projectedBalanceVar/g,e.target.label1));else if(!r.defaultGoalAmount&&!f||j!=c.ColorsGoalSetup&&!h||l){
if(!f||f&&0!=e.state&&j!=c.ColorsGoalSetup){switch(o.results.activeStatus){case 1:j=c.ColorsGoalOnTarget,k="goal-on-track-class",e.editState=1,Q="goal-on-track-class",e.scorecard.borderCssClass="incomeScorecard-on-track-class",e.summaryStatement&&(e.summaryStatement.showHelpLink=1==e.target.editGoalFlag),1!=e.target.editGoalFlag&&(e.title.class="goal-on-track-class",e.state=1,e.title.label2="On Target",e.summaryStatement&&(e.summaryStatement.header="Right On!",r.contextSvc.device.isSmallScreen()?e.summaryStatement.summary=(l?r.$rootScope.localResources.Goal_Saving_OnTarget_Mobile_Summary:r.$rootScope.localResources.Goal_Income_OnTarget_Mobile_Summary).replace(/terminationYear/g,s):e.summaryStatement.summary=(l?r.$rootScope.localResources.Goal_Saving_OnTarget_Summary:r.$rootScope.localResources.Goal_Income_OnTarget_Summary).replace(/terminationYear/g,s)));break;case 2:j=c.ColorsGoalAtRisk,k="goal-at-risk-class",e.editState=2,Q="goal-at-risk-class",e.scorecard.borderCssClass="incomeScorecard-at-risk-class",1!=e.target.editGoalFlag&&(e.title.class="goal-at-risk-class",e.state=2,e.title.label2="At Risk",e.summaryStatement&&(e.summaryStatement.header="Uh oh",r.contextSvc.device.isSmallScreen()?e.summaryStatement.summary=(l?r.$rootScope.localResources.Goal_Saving_AtRisk_Mobile_Summary:r.$rootScope.localResources.Goal_Income_AtRisk_Mobile_Summary).replace(/terminationYear/g,s):e.summaryStatement.summary=(l?r.$rootScope.localResources.Goal_Saving_AtRisk_Summary:r.$rootScope.localResources.Goal_Income_AtRisk_Summary).replace(/terminationYear/g,s)));break;case 3:j=c.ColorsGoalOffTarget,k="goal-off-track-class",Q="goal-off-track-class",e.scorecard.borderCssClass="incomeScorecard-off-track-class",e.editState=3,1!=e.target.editGoalFlag&&(e.title.class="goal-off-track-class",e.state=3,e.title.label2="Off Target",e.summaryStatement&&(e.summaryStatement.header="Your goal needs help!",r.contextSvc.device.isSmallScreen()?e.summaryStatement.summary=(l?r.$rootScope.localResources.Goal_Saving_OffTarget_Mobile_Summary:r.$rootScope.localResources.Goal_Income_OffTarget_Mobile_Summary).replace(/terminationYear/g,s):e.summaryStatement.summary=(l?r.$rootScope.localResources.Goal_Saving_OffTarget_Summary:r.$rootScope.localResources.Goal_Income_OffTarget_Summary).replace(/terminationYear/g,s)));break;default:e.title.class="goal-not-setup-class",e.summaryStatement&&(r.contextSvc.device.isSmallScreen()?e.summaryStatement.summary=(l?r.$rootScope.localResources.Goal_Saving_SetupTarget_Mobile_Summary:r.$rootScope.localResources.Goal_Income_SetupTarget_Mobile_Summary).replace(/terminationYear/g,s):e.summaryStatement.summary=(l?r.$rootScope.localResources.Goal_Saving_SetupTarget_Summary:r.$rootScope.localResources.Goal_Income_SetupTarget_Summary).replace(/terminationYear/g,s))}if(r.defaultGoalAmount&&j==c.ColorsGoalSetup){var P=0;switch(l&&angular.isDefined(D)&&(P=Math.round(D/o.results.targetBalance*100)),o.results.activeStatus){case 1:e.title.class="goal-on-track-class",e.title.label2="On Target",e.title.percentage=P,e.state=1,e.summaryStatement&&(e.summaryStatement.showHelpLink=!1),r.contextSvc.device.isSmallScreen()?e.summaryStatement.summary=(l?r.$rootScope.localResources.Goal_Saving_OnTarget_Mobile_Summary:r.$rootScope.localResources.Goal_Income_OnTarget_Mobile_Summary).replace(/terminationYear/g,s):e.summaryStatement.summary=(l?r.$rootScope.localResources.Goal_Saving_OnTarget_Summary:r.$rootScope.localResources.Goal_Income_OnTarget_Summary).replace(/terminationYear/g,s);break;case 2:e.title.class="goal-at-risk-class",e.title.label2="At Risk",e.title.percentage=P,r.contextSvc.device.isSmallScreen()?e.summaryStatement.summary=(l?r.$rootScope.localResources.Goal_Saving_AtRisk_Mobile_Summary:r.$rootScope.localResources.Goal_Income_AtRisk_Mobile_Summary).replace(/terminationYear/g,s):e.summaryStatement.summary=(l?r.$rootScope.localResources.Goal_Saving_AtRisk_Summary:r.$rootScope.localResources.Goal_Income_AtRisk_Summary).replace(/terminationYear/g,s);break;case 3:e.title.class="goal-off-track-class",e.title.label2="Off Target",e.title.percentage=P,r.contextSvc.device.isSmallScreen()?e.summaryStatement.summary=(l?r.$rootScope.localResources.Goal_Saving_OffTarget_Mobile_Summary:r.$rootScope.localResources.Goal_Income_OffTarget_Mobile_Summary).replace(/terminationYear/g,s):e.summaryStatement.summary=(l?r.$rootScope.localResources.Goal_Saving_OffTarget_Summary:r.$rootScope.localResources.Goal_Income_OffTarget_Summary).replace(/terminationYear/g,s);break;default:r.contextSvc.device.isSmallScreen()?e.summaryStatement.summary=(l?r.$rootScope.localResources.Goal_Saving_SetupTarget_Mobile_Summary:r.$rootScope.localResources.Goal_Income_SetupTarget_Mobile_Summary).replace(/terminationYear/g,s):e.summaryStatement.summary=(l?r.$rootScope.localResources.Goal_Saving_SetupTarget_Summary:r.$rootScope.localResources.Goal_Income_SetupTarget_Summary).replace(/terminationYear/g,s)}}}}else e.target.amount=o.results.recurringIncome,e.target.label1=r.$filter("currency")(o.results.recurringIncome,"$",0),r.defaultGoalAmount=!1,h&&(e.title.class="goal-on-track-class",k=e.title.class,e.state=1),e.summaryStatement&&(e.summaryStatement.summary=(r.contextSvc.device.isSmallScreen()?r.$rootScope.localResources.Goal_Income_SetupTarget_Mobile_Summary:r.$rootScope.localResources.Goal_Income_SetupTarget_Summary).replace(/terminationYear/g,s).replace(/withdrawalAmount/g,e.target.label1));var Q,R,S,T,U;if(o.results.monthsToZero.mid!=-1){T=w-o.results.monthsToZero.mid;var V=Math.abs(T)/12;if(w>60)R=Math.ceil(V)+" years",S="";else{var W=V.toString().split(".");R=Number(W[0])>0?W[0]+" years":"",S=W[1]?Math.round(12*Number("."+W[1])):0,S=Number(W[0])>0&&Number(S)>0?1===S?" and "+S+" month":" and "+S+" months":Number(S)>0?1===S?S+" month":S+" months":""==R?"0 month":""}}angular.isDefined(C)?1==o.results.activeStatus||0==e.state&&r.defaultGoalAmount?e.scorecard.value3="Your monthly withdrawals of $"+r.$filter("currency")(e.target.amount,"",0)+" are projected, with 75% confidence, to last beyond your goal date by "+R+S:e.scorecard.value3="Your monthly withdrawals of $"+r.$filter("currency")(e.target.amount,"",0)+" are projected, with 75% confidence, to miss your goal date by "+R+S:e.scorecard.value3="Your monthly withdrawals of $"+r.$filter("currency")(e.target.amount,"",0)+" are projected, with 75% confidence, to last beyond your goal date by more than 5 years.",r.defaultGoalAmount=!1,f||r.updateViewModelLabels(e);var X,Y={line1:f&&0==e.state?"Goal Value":"Projected Balance",line2:r.$filter("currency")(D,"$",0),uiClass:k},Z=r.goalUiCommonHelper.buildChartSeries(d,u,t,v,o.results.series.months);if(2==e.type){if(angular.isDefined(B))U=b.GoalUICommon.dateLabelFromSimulationMonth(p,o.results.series.months[B],y);else{var $=b.GoalUICommon.dateLabelFromSimulationMonth(p,z,y);U=$+"+"}var aa=Math.min(_.last(Z.midSeries.data).x/w*100,100);X={seriesData:e.scorecard.seriesData,value:e.scorecard.seriesYear,borderCssClass:e.scorecard.borderCssClass,title:e.scorecard.title,value3:e.scorecard.value3,cssclass:Q,percentage:aa,innerLabel:U}}var ba=void 0;f&&!l&&(ba={line1:"Projected Monthly Withdrawal",line2:r.$filter("currency")(e.target.amount,"$",0),uiClass:k});var ca={chartSeriesProjected:Z,xAxisMin:0,xAxisMax:z,savingsOverlayModel:Y,incomeOverlayModel:X,enrollmentIncomeOverlayModel:ba,simulationMonthsXPoint:m,simulationRecommendations:o.results.recommendations,simulationSeries:o.results.series};e.chart=ca,e.goalChartSeries=[Z.highSeries,Z.midSeries,Z.lowSeries];var da=r.contextSvc.device.isLargeScreen();r.goalUiCommonHelper.configureSeriesUI(e.chart,a,da,j,e.type,f);var ea=r.createNonSeriesOverlays(l,e,f),fa=r.createChartOptions(e,Z,ea,l,y,w,z,j,a,da,x,q,f);e.goalChartOptions=fa}},this.generateXLabels=function(a,c,d,e,f,g){var h=new Array,i=new Date,j=_.last(c.lowSeries.data).x,k=_.last(c.midSeries.data).x,l=_.last(c.highSeries.data).x;return g&&r.$rootScope.deviceInfo.isLargeScreen()&&!a?h.push({value:0,text:'<span style="margin-left:30px;">Today</span>'}):h.push({value:0,text:"Today"}),0!=j&&j!=k&&h.push({value:j,text:b.GoalUICommon.dateLabelFromSimulationMonth(i,j,d),hideIfOverlapping:!0}),0!=k&&k!=f&&h.push({value:k,text:b.GoalUICommon.dateLabelFromSimulationMonth(i,k,d)}),l!=k&&l!=f&&h.push({value:l,text:b.GoalUICommon.dateLabelFromSimulationMonth(i,l,d),hideIfOverlapping:!0}),h.push({value:f,text:b.GoalUICommon.dateLabelFromSimulationMonth(i,f,d)}),h},this.configureTargetYearPlotLine=function(a,c,d,e,f,g){var h="Target "+b.GoalUICommon.dateLabelFromSimulationMonth(new Date,d,e);return angular.isDefined(d)?{color:f?f:"#fff",labelColor:f?f:"#fff",associatedValue:g?g:d,lineStyle:c?2:1,label:h,labelSize:11,labelPosition:c?0:1,preventOverlayIntersection:!c}:null},this.createGoalsTargetOverlay=function(a,b){if(!b||0!=a.state){var c,d=r.contextSvc.device.isLargeScreen();return d&&!b||"updateProfile"==r.suitabilityQuestionsSvc.getReferrer()?c={templateUrl:"templates/assets/goalTwoLineOverlay.html",model:{line1:"Goal",line2:b?null:r.$filter("currency")(a.target.amount,"$",0)},connectToAxis:!0,yAxisConnectValue:a.target.amount,connectFromSide:34,hPosition:4,lineStyle:2,xOffset:b?50:0}:b&&"updateProfile"!=r.suitabilityQuestionsSvc.getReferrer()||(c={templateHtml:'<div class="goal-overlay-simple-container">Goal</div>',connectToAxis:!0,yAxisConnectValue:a.target.amount,connectFromSide:34,hPosition:4,lineStyle:2}),c}},this.updateViewModelLabels=function(a){2==a.type?(a.target.label2=1==a.state?c.incomeOnTrackGoalValueText:c.incomeGoalValueText,a.target.label4=c.incomeOnTrackGoalValueText,4==a.state?a.title.details=r.$rootScope.localResources.Goal_Income_Accomplished_Details:5==a.state&&(a.title.details=r.$rootScope.localResources.Goal_Income_NotAccomplished_Details)):1===a.type&&(0===a.state&&(a.target.label2=c.savingsSetupGoalValueText,a.target.label4=c.savingsSetupGoalValueText),4==a.state?a.title.details=r.$rootScope.localResources.Goal_Saving_Accomplished_Details:5==a.state&&(a.title.details=r.$rootScope.localResources.Goal_Saving_NotAccomplished_Details)),a.monthlyContribution.slider.iconToolTip={},a.riskProfile.sliderGroup.iconToolTip={},a.riskProfile.sliderGroup.iconToolTip.info=r.$rootScope.localResources.RiskProfile_Tooltip_Info,1==a.type&&(a.monthlyContribution.slider.iconToolTip.info=r.$rootScope.localResources.Contribution_Tooltip_Info)},this.goalUiCommonHelper=new b.GoalUICommon(j),this.$rootScope.$on("DASHBOARD_ACCOUNT_SELECTED",function(){r.defaultGoalAmount=!0,r.$rootScope.dismissMessage(r.contextSvc.appConfig.featureUnavailableMessage);r.$rootScope.accounts.indexOf(r.contextSvc.getActiveAccount())}),this.$rootScope.$on("ACCOUNTS_UPDATED_EVENT",function(){r.contextSvc.isSIP()&&(r.defaultGoalAmount=!0,r.recalculateGoal())}),this.defaultGoalAmount=!0}return __extends(c,a),c.prototype.initializeGoalsViewModel=function(){var a=this.q.defer(),b=new Object,c=this.loadViewModelData();return c.then(function(c){b=c,a.resolve(b)}).catch(function(b){console.error("Error retrieving account data: "+(b&&b.value)),a.reject(b)}),a.promise},c.prototype.monteCarloSimulator=function(a){var b=new gtx.MonteCarloSimulator,c=b.doSimulation(a);return c},c.prototype.loadViewModelData=function(a){var b=this.q.defer(),c=new Object;if(this.USE_MOCK_DATA){var a=a?a:0;this.$rootScope.accounts&&0==a&&(a=this.$rootScope.accounts.indexOf(this.contextSvc.getActiveAccount()));var d,e=this.contextSvc.getActivePortfolioId(),f=this.contextSvc.getActiveAccount();if(f||(this.contextSvc.processAccounts(this.contextSvc.getSessionData()),e=this.contextSvc.getActivePortfolioId(),f=this.contextSvc.getActiveAccount()),this.$rootScope.allAccountsClosedFlag){var g={allAccountsClosedMessage:this.getAllAccountsClosedMessage()};b.resolve(g)}else{var h=f.accountNumber;d=this.contextSvc.appConfig.clientApiUrl+"/accounts/"+e+"/"+h+"/dashboard",this.contextSvc.cache.removeItem(this.contextSvc.cache.cache,d);var i=this;this.http.get(d).success(function(d,e,f,g){if(void 0==d||null==d.goals||d.hasOwnProperty("Failure")){var h={badGoalData:!0,badGoalDataMsg1:i.contextSvc.appConfig.featureUnavailableMessage.toString(),badGoalDataMsg2:""};b.resolve(h)}else if(d.hasOwnProperty("goals")&&d.goals.hasOwnProperty("status")&&"ERROR"==d.goals.status){var j=d.goals.hasOwnProperty("message")&&""!=d.goals.message?d.goals.message.toString().split("$"):[],k=j&&j[0]?j[0].toString():this.contextSvc.appConfig.featureUnavailableMessage.toString(),l=j&&j[1]?j[1].toString():"",h={badGoalData:!0,badGoalDataMsg1:k,badGoalDataMsg2:l};b.resolve(h)}else{var m=i.mapDomainModelToGoalViewModel(d);if(m)c=m,i.simulationGoalConfiguration(c.goalConfigurationLastModifiedDate).then(function(d){if(0==a&&i.contextSvc&&i.contextSvc.getActiveAccount()&&i.contextSvc.getActiveAccount().drift&&i.contextSvc.getActiveAccount().drift.TotalValue>=5e3){var e=i.contextSvc.getActiveAccount().drift.TotalValue;c.currentBalance=e}i.updateViewModelLabels(c),b.resolve(c)});else{var h={badGoalData:!0,badGoalDataMsg1:i.contextSvc.appConfig.featureUnavailableMessage.toString(),badGoalDataMsg2:""};b.resolve(h)}}}).error(function(a,c,d,e){b.reject(a)})}}else b.resolve(null);return b.promise},c.prototype.getGoal=function(a){return null},c.prototype.doSimulations=function(){},c.prototype.goToAccountSettings=function(){},c.prototype.isIncomeModel=function(a){return 2==a},c.calcMonthDifference=function(a,b){var c=12*a.getFullYear(),d=12*b.getFullYear();return d+b.getMonth()-(c+a.getMonth())},c.prototype.createChartOptions=function(a,b,d,e,f,g,h,i,j,k,l,m,n){var o=this.generateXLabels(e,b,f,g,h,n),p=c.getYMinMaxFromSeries(b,a.target.amount,!e),q=e?this.buildYAxisLabelsForSavings(b,i,p.min,p.max):this.buildYAxisLabelsForIncome(b),r={showGridLines:!1,showXLabels:!0,xLabels:o,yLabels:q,xMinValue:a.chart.xAxisMin,xMaxValue:a.chart.xAxisMax,yMinValue:p.min,yMaxValue:p.max,chartOverlays:d,plotAreaPaddingHorizontal:j?20:void 0};return k?(r.defaultMarkerRadius=7,r.defaultMarkerLineWidth=2,e?r.yAxisLocation=2:r.yAxisLocation=1):(r.defaultMarkerRadius=6,r.defaultMarkerLineWidth=1,r.yAxisLocation=0),!e&&l&&l>=0&&l<=a.chart.xAxisMax&&(r.xPlotLineOptions=[this.configureTargetYearPlotLine(a,k,l,f)]),r},c.prototype.createNonSeriesOverlays=function(a,b,c){var d=[],e=b.chart;return a&&b.target.amount&&b.target.amount>0&&d.push(this.createGoalsTargetOverlay(b,c)),e.enrollmentIncomeOverlayModel&&d.push({id:"incomeScoreCard",templateUrl:"templates/assets/goalTwoLineOverlayBoxed.html",hPosition:5,model:e.enrollmentIncomeOverlayModel}),d},c.prototype.simulationGoalConfiguration=function(a,b){var c=this,d=this.q.defer();if(null==this.$window.localStorage.getItem("goalConfiguration")||1==b)this.goalConfigurationAdapter().then(function(a){c.$window.localStorage.setItem("goalConfiguration",JSON.stringify(a[0])),d.resolve(!0)});else if(null!=this.$window.localStorage.getItem("goalConfiguration")){var e=JSON.parse(this.$window.localStorage.getItem("goalConfiguration"));e.lastModifiedDate!=a&&this.goalConfigurationAdapter().then(function(a){c.$window.localStorage.setItem("goalConfiguration",JSON.stringify(a[0]))}),d.resolve(!0)}return d.promise},c.prototype.buildYAxisLabelsForSavings=function(a,b,c,d){var e=[],f=_.last(a.lowSeries.data),g=_.last(a.midSeries.data),h=_.last(a.highSeries.data),i=c;i>0&&e.push({value:i}),e.push({value:f.y,text:"<b>Worse</b>",hideIfOverlapping:!0});var j=(f.y+g.y)/2;e.push({value:j,hideIfOverlapping:!0}),e.push({value:g.y,text:'<span style="font-weight:bold;color: '+b+'">Average</span>'});var k=(g.y+h.y)/2;e.push({value:k,hideIfOverlapping:!0}),e.push({value:h.y,text:"<b>Better</b>",hideIfOverlapping:!0});var l=d;return e.push({value:l}),e},c.getYMinMaxFromSeries=function(a,b,c){var d,e,f,g=_.min(a.lowSeries.data,function(a){return a.y}).y,h=_.max(a.highSeries.data,function(a){return a.y}).y;c?(d=g,e=h):(b>h?h=b:b<g&&(g=b),f=(h-g)/10,h+=f,b+f>h&&(h=b+f),b-f<g&&(g=b-f),e=h,d=Math.max(g,0));var i={min:d,max:e};return i},c.prototype.buildYAxisLabelsForIncome=function(a){var b=a.lowSeries,c=a.midSeries,d=a.highSeries,e=[];if(b.data&&b.data.length>0&&c.data&&c.data.length>0&&d.data&&d.data.length>0){var f=0,g=_.max([_.max(b.data,function(a){return a.y}).y,_.max(c.data,function(a){return a.y}).y,_.max(d.data,function(a){return a.y}).y]);if(g>=4)for(var h=g/4,i=f;i<=g;i+=h){var j=Math.ceil(i);e.push({value:j})}}return e},c.prototype.getGoalName=function(a){switch(a){case 0:return"Retirement";case 1:return"Expenses";case 2:return"Something Special";case 3:return"Emergency Fund";case 4:return"Income";case 5:return"Build Wealth";default:return""}},c.prototype.getGoalStateUIClass=function(a){switch(a){case 4:return"goal-on-track-class";case 5:return"goal-at-risk-class";case 0:case 6:return"goal-not-setup-class";case 1:return"goal-on-track-class";case 2:return"goal-at-risk-class";case 3:return"goal-off-track-class";default:return"goal-not-setup-class"}},c.prototype.recalculateGoal=function(){var a=this,b=this.q.defer(),c=_.filter(this.$rootScope.accounts,function(a){if(a.accountStatus&&"Invested"==a.accountStatus)return 6==a.drift.GoalState});return _.each(c,function(c){var d=a.$rootScope.accounts.indexOf(c),e=a;a.getGoalAdapter(c.portfolioRefId).then(function(c){if(null==c.models||null==c.selectedRiskModel)return void b.resolve(!0);var f=c.selectedRiskModel,g=f.split(" ");if(0==g[g.length-1])return void b.resolve(!0);var h={},i=new Date,j=new Date(i.getFullYear(),i.getMonth(),i.getDate()),k=new Date(c.targetEndDate);h.state=gtx.GoalState.NotSet,h.dates={established:j,targetEnd:k},1==c.type?(h.name=gtx.GoalTypes.Income,h.values={targetBalance:0,endingBalance:0,recurringIncome:c.targetAmount,recurringDeposit:0}):(h.name=gtx.GoalTypes.Savings,h.values={targetBalance:c.targetAmount,endingBalance:0,recurringIncome:0,recurringDeposit:c.recurringContributions?c.recurringContributions:0}),h.currentBalance=c.currentBalance,h.oneTimeDeposit=c.oneTimeContribution?c.oneTimeContribution:0,h.simulationStartDate=j,h.model=c.selectedRiskModel;var l={goals:h},m=a.monteCarloSimulator(l);e.$rootScope.accounts[d].drift.GoalState=Number(m.results.activeStatus),b.resolve(!0)}).catch(function(a){console.error("Error retrieving account data: "+(a&&a.value)),b.reject(!1)})}),b.promise},c.prototype.updateMenuGoalState=function(a){if(this.$rootScope.accounts){var b=this.contextSvc.getActiveAccount(),c=this.$rootScope.accounts.indexOf(b),d=this.$rootScope.accounts[c];d.drift.GoalState=a,this.broadcastGoalMenuChange()}},c.prototype.updateMenuGoalName=function(){if(this.$rootScope.accounts){var a=this.contextSvc.getActiveAccount(),b=this.$rootScope.accounts.indexOf(a),c=this.$rootScope.accounts[b],d=JSON.parse(this.$window.sessionStorage.getItem("question1"));d&&d.SelectedAnswers[0]&&(c.drift.ShortGoalNameText=this.getGoalName(d.SelectedAnswers[0].AnswerId-1))}},c.prototype.pollGoalState=function(a,b){var d=this,e=this;this.getGoalState(a).then(function(f){!e.isValidRefreshState(f.goalStatus)&&b<c.HG_GoalStatus_Max_Retries?(b++,d.$timeout(function(){e.pollGoalState(a,b)},c.HG_GoalStatus_Retry_Delay)):e.isValidRefreshState(f.goalStatus)&&(e.contextSvc.me(!0),e.broadcastGoalMenuChange())})},c.prototype.broadcastGoalMenuChange=function(){this.$rootScope.$emit("HG_SEND_MENU_MODEL"),this.contextSvc.device.isSmallScreen()&&!this.contextSvc.device.isNativeIOS()&&this.$rootScope.$broadcast("DASHBOARD_LOAD_GOALS_DATA",null)},c.prototype.isValidRefreshState=function(a){var b=[4,5,2,3,1];return _.contains(b,a)},c.prototype.saveGoal=function(a){var b;switch(b=this.getDonutPercentage(a),a.title.percentage=b,a.title.innerLabel=a.chart.incomeOverlayModel?a.chart.incomeOverlayModel.innerLabel:"",a.oneTimeContribution.recommendationFlag=!(a.oneTimeContribution.recommendationValue>0),a.monthlyContribution.recommendationFlag=!(a.monthlyContribution.recommendationValue>0),a.editState){case 1:a.title.class="goal-on-track-class",a.title.label2="On Target",a.summaryStatement.header="Right On!",a.summaryStatement.showHelpLink=!1,a.state=1,this.contextSvc.device.isSmallScreen()?a.summaryStatement.summary=(1==a.type?this.$rootScope.localResources.Goal_Saving_OnTarget_Mobile_Summary:this.$rootScope.localResources.Goal_Income_OnTarget_Mobile_Summary).replace(/terminationYear/g,new Date(a.scorecard.value2).getFullYear()):a.summaryStatement.summary=(1==a.type?this.$rootScope.localResources.Goal_Saving_OnTarget_Summary:this.$rootScope.localResources.Goal_Income_OnTarget_Summary).replace(/terminationYear/g,new Date(a.scorecard.value2).getFullYear());break;case 2:a.title.class="goal-at-risk-class",a.title.label2="At Risk",a.summaryStatement.header="Uh oh",a.state=2,this.contextSvc.device.isSmallScreen()?a.summaryStatement.summary=(1==a.type?this.$rootScope.localResources.Goal_Saving_AtRisk_Mobile_Summary:this.$rootScope.localResources.Goal_Income_AtRisk_Mobile_Summary).replace(/terminationYear/g,new Date(a.scorecard.value2).getFullYear()):a.summaryStatement.summary=(1==a.type?this.$rootScope.localResources.Goal_Saving_AtRisk_Summary:this.$rootScope.localResources.Goal_Income_AtRisk_Summary).replace(/terminationYear/g,new Date(a.scorecard.value2).getFullYear()),a.monthlyContribution.label1=a.monthlyContribution.staticLabel1,a.oneTimeContribution.label1=a.oneTimeContribution.staticLabel1;break;case 3:a.title.class="goal-off-track-class",a.title.label2="Off Target",a.summaryStatement.header="Your goal needs help!",a.state=3,this.contextSvc.device.isSmallScreen()?a.summaryStatement.summary=(1==a.type?this.$rootScope.localResources.Goal_Saving_OffTarget_Mobile_Summary:this.$rootScope.localResources.Goal_Income_OffTarget_Mobile_Summary).replace(/terminationYear/g,new Date(a.scorecard.value2).getFullYear()):a.summaryStatement.summary=(1==a.type?this.$rootScope.localResources.Goal_Saving_OffTarget_Summary:this.$rootScope.localResources.Goal_Income_OffTarget_Summary).replace(/terminationYear/g,new Date(a.scorecard.value2).getFullYear()),a.monthlyContribution.label1=a.monthlyContribution.staticLabel1,a.oneTimeContribution.label1=a.oneTimeContribution.staticLabel1}1==a.editState&&(a.state=1,a.target.editGoalFlag=!1),this.updateMenuGoalState(a.state)},c.prototype.sliderSetting=function(a,b,c){var d=a,e=a;b&&(e=b);var f,g;return c?(f=1==d?d:d-1,g=d>=3?3:d+1):(f=1==d?d:d-1,g=12==d?d:d+1),{finalRiskProfile:d,calculatedRiskProfile:e,minFinalRiskProfile:f,maxFinalRiskProfile:g}},c.prototype.setSelectedRiskProfile=function(a){this.enrollmentCommonSvc.setSelectedRiskProfile(a)},c.prototype.getSelectedRiskProfile=function(){return this.enrollmentCommonSvc.getSelectRiskProfile()?Number(this.enrollmentCommonSvc.getSelectRiskProfile()):0},c.prototype.getRiskProfileType=function(){return this.enrollmentCommonSvc.getRiskProfileType()},c.prototype.getSelectRiskProfile=function(){return this.enrollmentCommonSvc.getSelectRiskProfile()},c.prototype.removeUpdateProfile=function(){this.suitabilityQuestionsSvc.removeUpdateProfile()},c.prototype.setOriginalSelectedRiskProfile=function(a){this.enrollmentCommonSvc.setOriginalSelectedRiskProfile(a)},c.prototype.getOriginalSelectedRiskProfile=function(){return this.enrollmentCommonSvc.getOriginalSelectedRiskProfile()},c.prototype.removeOriginalSelectedRiskProfile=function(){this.enrollmentCommonSvc.removeOriginalSelectedRiskProfile()},c.prototype.assetAllocationDataAdapter=function(a){var b=this.contextSvc.getActivePortfolioId(),c=this.q.defer();return void 0!=a&&null!=a||c.reject("modelName unavaliable"),this.http.get(this.contextSvc.appConfig.clientApiUrl+"/models/"+b+"/"+a).success(function(a,b,d,e){c.resolve(a)}).error(function(a,b,d,e){c.reject(a)}),c.promise},c.prototype.goalConfigurationAdapter=function(){var a=this.contextSvc.appConfig.coreDataServiceApiUrl;a=a.replace("api","");var b=this.q.defer();return this.http.get(a+"GoalConfiguration").success(function(a,c,d,e){b.resolve(a)}).error(function(a,c,d,e){b.reject(a)}),b.promise},c.prototype.saveGoalParametersAdapter=function(a,b,c){var d=this,e=this.q.defer(),f=null;if((b&&b.target||b&&b.monthlyContribution)&&(f={},f.targetAmount=b.target.amount,f.recurringContributions=b.monthlyContribution.amount),c&&b.numberOfYears&&b.numberOfYears>0){var g=new Date;f.targetEndDate=moment(new Date(g.getFullYear()+Number(b.numberOfYears),g.getMonth(),g.getDate())).format()}var h=this.contextSvc.getActivePortfolioId();return"put"==a?this.http.put(this.contextSvc.appConfig.clientApiUrl+"/accounts/"+h+"/goals",JSON.stringify(f)).success(function(a,b,c,f){d.pollGoalState(h,0),e.resolve(a)}).error(function(a,b,c,d){e.reject(a)}):"refreshBalanceOnly"==a?(d.updateMenuGoalName(),d.pollGoalState(h,0)):this.http.post(this.contextSvc.appConfig.clientApiUrl+"/accounts/"+h+"/goals",JSON.stringify(f)).success(function(a,b,c,f){d.pollGoalState(h,0),e.resolve(a)}).error(function(a,b,c,d){e.reject(a)}),e.promise},c.prototype.getGoalAdapter=function(a){var b,c=this.q.defer();b=a?a:this.contextSvc.getActivePortfolioId();var d=this.contextSvc.appConfig.clientApiUrl+"/accounts/"+b+"/goals";return this.contextSvc.cache.removeItem(this.contextSvc.cache.cache,d),this.http.get(d).success(function(a,b,d,e){c.resolve(a)}).error(function(a,b,d,e){c.reject(a)}),c.promise},c.prototype.getGoalState=function(a){var b=this.q.defer();if(a){var c=this.contextSvc.appConfig.clientApiUrl+"/accounts/"+a+"/goals/status";this.contextSvc.cache.removeItem(this.contextSvc.cache.cache,c),this.http.get(c).success(function(a,c,d,e){b.resolve(a)}).error(function(a,c,d,e){b.reject(a)})}return b.promise},c.prototype.dashboardPresentationAdapter=function(){var a=this.q.defer(),b="54cf4a910cdf175ab022b9a1",c="0031770448";return this.http.get(this.contextSvc.appConfig.clientApiUrl+"/accounts/"+b+"/"+c+"/dashboard").success(function(b,c,d,e){a.resolve(b)}).error(function(b,c,d,e){a.reject(b)}),a.promise},c.prototype.navigateEnrollment=function(a){var b=this,c=this.contextSvc.getMongoActiveAccount();this.suitabilityQuestionsSvc.removeUpdateProfile();var d=this.q.defer();return this.suitabilityQuestionsSvc.getAnswers(null,c,!0,!0).then(function(c){b.suitabilityQuestionsSvc.processQuestionsResponse(c,!0);var e=b.suitabilityQuestionsSvc.getAccountType(c);b.setAccountTypeInLocalStorage(e,""),a&&(null!=c.RiskProfileInformation&&null!=c.RiskProfileInformation.RiskProfileforAdditonalQuestions&&b.enrollmentCommonSvc.setRiskProfileforAdditonalQuestions(c),b.setSelectedRiskProfile(a),b.suitabilityQuestionsSvc.setGoalRiskProfileFlow()),d.resolve(!0)}),d.promise},c.prototype.updatePortfolioAdapter=function(a){var b=this,c=this.contextSvc.getMongoActiveAccount();this.suitabilityQuestionsSvc.removeUpdateProfile();var d=this.contextSvc.getActivePortfolioId(),e=this.contextSvc.getActiveAccount();e||(this.contextSvc.processAccounts(this.contextSvc.getSessionData()),d=this.contextSvc.getActivePortfolioId(),e=this.contextSvc.getActiveAccount());var f=e.accountNumber,g=this.$q.defer();return this.suitabilityQuestionsSvc.getAnswers(null,c,!0,!0).then(function(c){b.suitabilityQuestionsSvc.processQuestionsResponse(c,!0),b.enrollmentCommonSvc.setVersionInfo(c.VersionInfo);var e=a,h=e.split(" "),i=h[h.length-1];b.setSelectedRiskProfile(i),b.suitabilityQuestionsSvc.saveAnswers().then(function(){b.portfolioSvc.getAssetAllocation(d,f,!0,!0).then(function(a){var b={PortfolioUpdated:!0};g.resolve(b)})})}),g.promise},c.prototype.modelAllocationsDataAdapter=function(a){var b=this.q.defer(),c=this.contextSvc.getActivePortfolioId();return void 0!=a&&null!=a||b.reject("modelName unavaliable"),this.http.get(this.contextSvc.appConfig.clientApiUrl+"/models/"+c+"/"+a).success(function(a,c,d,e){b.resolve(a)}).error(function(a,c,d,e){b.reject(a)}),b.promise},c.prototype.navigateToLastbehavioralQuestions=function(a){this.enrollmentCommonSvc.navigateToLastbehavioralQuestions(a)},c.prototype.setAccountTypeInLocalStorage=function(a,b){this.enrollmentCommonSvc.setAccountTypeInLocalStorage(a,b)},c.prototype.getContributionVal=function(){var a,b=JSON.parse(this.enrollmentCommonSvc.getSliderRiskModel11());return a=b&&b.SelectedAnswers[0]?b.SelectedAnswers[0].SelectedValue:0},c.prototype.mapDomainModelToGoalViewModel=function(a){var b=a.goals;if(void 0!=a.goals&&null!=b.models&&null!=b.selectedRiskModel&&"0001-01-01T00:00:00"!=b.targetEndDate){var d=b.selectedRiskModel,e=d.split(" ");if(0!=e[e.length-1]){var f,g,h=this.getDefaultScorecardParameters(b.state,b.projectedBalanceAmount,b.targetAmount),i=b.calculatedRiskModel,j=b.calculatedRiskModel?i.split(" "):null;f=j?Number(j[j.length-1]):0;var k=b.selectedRiskModel,l=b.selectedRiskModel?k.split(" "):null;g=l?Number(l[l.length-1]):0;var m,n=k.indexOf("Income")!=-1;if(this.enrollmentCommonSvc.getSelectRiskProfile()){var o=this.enrollmentCommonSvc.getSelectRiskProfile().split(" ");m=Number(o[o.length-1]);var p=k.replace(/[^\d,]/g,"");k=k.replace(p,this.enrollmentCommonSvc.getSelectRiskProfile())}var q,r=this.sliderSetting(f,g,n),s=[];angular.forEach(b.models,function(a,c){a.name==k&&(q=b.models[c].assetClasses)}),s=this.setRiskProfileAssets(q);var t;t=this.getDefaultParameterList(b.type,b.targetAmount,b.recurringContributions,b.currentBalance);var u=b&&b.oneTimeContribution&&b.oneTimeContribution.amount?b.oneTimeContribution.amount:0,v=b.recommendationRecurringAmount>0?b.recommendationRecurringAmount:0,w=b.recommendationOneTimeAmount>0?b.recommendationOneTimeAmount:0,x=this.contextSvc.activeAccount.drift&&this.contextSvc.activeAccount.drift.GoalState?this.contextSvc.activeAccount.drift.GoalState:b.state,y={type:0==b.type?1:2,state:6==b.state?x:b.state,title:{label1:b.objective+" Goal",label2:b.stateText,innerLabel:b.stateText,percentage:h.percentage>100?100:h.percentage,shortLabel1:null!=b.objective?b.objective:"",icon:"icon-info-circle",info:"Goal purpose,  and end year shown are based on answers you gave in the investment profile questionnaire.",details:"",class:h.cssClass},target:{amount:b.targetAmount,label1:b.targetAmountText,label2:"Setup Goal Target",label3:0==b.type?c.SavingsTargetLinkText:c.IncomeTargetLinkText,label4:"Your Goal",label5:0==b.type?"by "+b.targetEndDateYearText:"through "+b.targetEndDateYearText,label6:0==b.type?b.recommendationTargetAmountText:b.recommendationWithdrawalAmountText,buttonText1:null,buttonText2:null,buttonClickHandler1:null,buttonClickHandler2:null,endDate:new Date(b.targetEndDate)},scorecard:{percentageComplete:50,label1:b.incomeScorecardTitle,value1:"2033-2067",label2:b.incomeScorecardText,value2:b.targetEndDateYearText,isMini:!0,seriesData:[80,20],seriesYear:b.targetEndDateYearText,title:b.incomeScorecardTitle,value3:b.incomeScorecardText,mobileView:!1,borderCssClass:h.incomeBorderCssClass},numberOfYears:b.numberOfYearsToCompletion,currentBalance:b.currentBalance,seriesMaxYear:b.targetEndDateYearText,seriesHighLabel:"2059",seriesMidLabel:b.targetEndDateYearText,seriesLowLabel:"2035",selectedRiskModel:b.selectedRiskModel,projectedBalance:{label1:"Projected Balance",label2:"",value1:b.projectedBalanceAmount},monthlyContribution:{amount:b.recurringContributions,options:[""],label1:"Changing your monthly contribution to $"+this.$filter("currency")(v,"",0)+" will get you back on target.",iconToolTip:{icon:"icon-info-circle",info:"The dollar amount shown is the value you saved most recently in the investor profile questionnaire or on the goals tab."},slider:{title:"Monthly Contribution",buttonText:"Manage Contributions",buttonClickHandler:null,slider:{minValue:0,maxValue:5e3,value:b.recurringContributions,currentValue:b.recurringContributions,incrementValue:100,minLabel:"$0",maxLabel:"$5,000",valueLabel:"0"}},maxValidLength:c.MaxContributionAmount,invalidMessage:"Enter a dollar value of "+this.$filter("currency")(c.MaxContributionAmount,"$",0)+" or less.",updateInput:null,updateSlider:null,back:null},oneTimeContribution:{amount:u,options:[""],label1:"Making a one-time contribution of $"+this.$filter("currency")(w,"",0)+"  will get you back on target.",slider:{title:"One-Time Contribution",buttonText:"Manage Contributions",buttonClickHandler:null,slider:{minValue:0,maxValue:5e4,value:0,currentValue:0,incrementValue:1e3,
minLabel:"$0",maxLabel:"$50,000",valueLabel:"0"}},maxValidLength:c.MaxContributionAmount,invalidMessage:"Enter a dollar value of "+this.$filter("currency")(c.MaxContributionAmount,"$",0)+" or less.",updateInput:null,updateSlider:null,back:null},riskProfile:{items:s,sliderGroup:{title:"Risk Profile",buttonText:"Update Portfolio",buttonClickHandler:null,sliderType:2,slider:{incrementValue:1,minLabel:"Less Risk",maxLabel:"More Risk",valueLabel:"formatCurrency",minValue:r.minFinalRiskProfile,maxValue:r.maxFinalRiskProfile,value:m?m:r.calculatedRiskProfile,currentValue:m?m:r.calculatedRiskProfile}},isExpanded:!1,sliderStop:null,togglePopup:null,back:null,originalValue:r.calculatedRiskProfile,sliderInfoMessage:this.$rootScope.localResources.Risk_Profile_Slider_Info_Message},contributions:b.currentYearsContributions,models:b.models,summaryStatement:{header:b.summaryStatementHeader,summary:this.contextSvc.device.isLargeScreen()?b.summaryStatementWeb:b.summaryStatementMobileWeb,linkText:"Adjust time horizon and risk profile",showHelpLink:!0,href:"#/charts"},parameterSelector:t,whatsNext:{amount:null,label1:"What's Next",label2:"Let's take a look at how you can best use your ending balance.The Schwab decumulation tool will help you plan out your monthly withdrawals in the coming years.If you would like, you can also re-adjust your investor profile before proceeding.",label3:null,label6:null},quickView:{label1:"Investment Period",label2:"Total Net Contributions",value1:"28 Years",value2:"$1,131,512"},timeHorizon:{title:0==b.type?c.SavingsProgressBarText:c.IncomeProgressBarText,label1:0==b.type?b.timeRemainingText:b.targetEndDateYearText,label2:1==b.type?b.timeRemainingText:"",percentage:b.percentageTimeElapsed?100*b.percentageTimeElapsed:0,minValue:0,maxValue:100},educationData:{linkText1:"Read More",linkText2:"Learn More",textSection1:"This chart depicts how your portfolio may perform in a better-than-average, average, and worse-than-average market. Your projected balance is based on average market performance.",textSection2:"about setting your savings goal."},recommendationTargetAmountText:b.recommendationTargetAmountText,recommendationWithdrawalAmountText:b.recommendationWithdrawalAmountText,atRiskGoalSaveMessage:"Lowering your goal to $"+b.recommendationRecurringWithdrawalAmount+" would keep you on track",editState:angular.isDefined(b.state)?b.state:0,showSavingsTargetLink:void 0,showIncomeTargetLink:void 0,showRecommendedAmountLabel:void 0,showAccomplishmentStatus:this.isAccomplishmentState(b),goalConfigurationLastModifiedDate:b.goalConfigurationLastModifiedDate,showMobileViewIncomeScorecard:void 0};return y}}},c.prototype.saveLastModfiedDate=function(){var a=this.q.defer();return this.hgAccountSettingsSvc.getPortfolioSettingsData().then(function(b){a.resolve(b.value[0].LastModifiedDate)}),a.promise},c.prototype.getGoalPurpose=function(a){switch(a){case"Retirement":return 0;case"Expenses":return 1;case"Something Special":return 2;case"Emergency Fund":return 3;case"Income":return 4;case"Build Wealth":return 5}},c.prototype.getGoalPurposeTypeName=function(a){switch(a){case"Retirement":return"Retirement";case"Expenses":return"ExpensesSaving";case"Something Special":return"SpecialSaving";case"Emergency Fund":return"EmergencyFund";case"Income":return"Income";case"Build Wealth":return"BuildWealth"}},c.prototype.patchGoalParametersAdapter=function(a,b){var c=this,d=this.q.defer(),e={};e.LastModifiedDate=b,e.InvestmentStrategy={},e.InvestmentStrategy.Goal={},e.InvestmentStrategy.Goal.Values={},e.InvestmentStrategy.Goal.Name=1==a.type?0:1,e.InvestmentStrategy.Goal.GoalTypeName=1==a.type?"Savings":"Income";var f=this.getGoalPurpose(a.title.shortLabel1),g=this.getGoalPurposeTypeName(a.title.shortLabel1);e.InvestmentStrategy.Goal.Purpose=f,e.InvestmentStrategy.Goal.PurposeTypeName=g,e.InvestmentStrategy.Goal.State=1,e.InvestmentStrategy.Goal.StateTypeName="InProgress",1==a.type&&(e.InvestmentStrategy.Goal.Values.TargetBalance=a.target.amount,e.InvestmentStrategy.Goal.Values.RecurringDeposit=a.monthlyContribution.amount),2==a.type&&(e.InvestmentStrategy.Goal.Values.RecurringIncome=a.target.amount,e.InvestmentStrategy.Goal.Values.TargetBalance=a.target.amount),e.InvestmentStrategy.Goal.Values.EndingBalance=0,e.InvestmentStrategy.Goal.Dates={},e.InvestmentStrategy.Goal.Dates.Established=moment().format();var h=new Date;return e.InvestmentStrategy.Goal.Dates.TargetEnd=moment(new Date(h.getFullYear()+a.numberOfYears,h.getMonth(),h.getDate())).format(),this.contextSvc.showSpinner(),this.hgAccountSettingsSvc.savePortfolioSettingsData(e).then(function(a){d.resolve(!0)}).catch(function(a){d.reject(!1)}).finally(function(){c.contextSvc.hideSpinner()}),d.promise},c.prototype.setSetupGoalMessageSeenFlag=function(a){this.$window.window.localStorage.setItem("SetupGoalMessageSeenFlag",a)},c.prototype.getSetupGoalMessageSeenFlag=function(){var a=this.$window.localStorage.getItem("SetupGoalMessageSeenFlag");return!!a},c.prototype.setGoalInfo=function(a){this.goalInfo.type=a.type,this.goalInfo.title=a.title},c.prototype.getGoalInfo=function(){return this.goalInfo},c.prototype.isAccomplishmentState=function(a){return 4==a.state||5==a.state},c.prototype.showRecommendedAmount=function(a){var b=2==a||3==a;return b},c.prototype.setRiskProfileAssets=function(a){var b;return b=[],a&&_.each(a,function(a){var c;c=new Object,c.label1=a.percentage?a.percentage+"%":"",c.label2=a.name?a.name:"","Stocks"==a.name?c.color="legend-Stocks":"Fixed Income"==a.name?c.color="legend-Fixed_Income":"Commodities"==a.name?c.color="legend-Commodities":"Cash"==a.name&&(c.color="legend-Cash"),b.push(c)}),b},c.prototype.getDefaultParameterList=function(a,b,c,d){var e,f=0==a?1:2;return e={listItems:[]},e=1==f?{listItems:[{isClickable:!0,label1:"Goal Value",label2:"$"+Math.round(b).toLocaleString(),route:"charts.goal.goalValue"},{isClickable:!0,label1:"Monthly Contributions",label2:"$"+Math.round(c).toLocaleString(),route:"charts.goal.monthlyContributions"}]}:{listItems:[{isClickable:!1,label1:"Account Balance",label2:"$"+Math.round(d).toLocaleString(),route:null},{isClickable:!0,label1:"Monthly Withdrawals",label2:"$"+Math.round(b).toLocaleString(),route:"charts.goal.monthlyWithdrawals"}]},e.listItems.push({isClickable:!0,label1:"One-Time Contribution",label2:"$0",route:"charts.goal.oneTimeContribution"}),e.listItems.push({isClickable:!0,label1:"Adjust Risk Profile",label2:"",route:"charts.goal.riskProfile"}),e},c.prototype.getDefaultScorecardParameters=function(a,b,c){var d,e=this.contextSvc.activeAccount.drift&&this.contextSvc.activeAccount.drift.GoalState?this.contextSvc.activeAccount.drift.GoalState:a,f=6==a?e:a,g=Math.round(b/c*100);switch(f){case 0:d={cssClass:"goal-not-setup-class",percentage:g?g:100,incomeBorderCssClass:"incomeScorecard-not-setup-class"};break;case 1:d={cssClass:"goal-on-track-class",percentage:g?g:100,incomeBorderCssClass:"incomeScorecard-on-track-class"};break;case 2:d={cssClass:"goal-at-risk-class",percentage:g?g:0,incomeBorderCssClass:"incomeScorecard-at-risk-class"};break;case 3:d={cssClass:"goal-off-track-class",percentage:g?g:0,incomeBorderCssClass:"incomeScorecard-off-track-class"};break;default:d={cssClass:"goal-not-setup-class",percentage:g?g:0,incomeBorderCssClass:"incomeScorecard-not-setup-class"}}return d},c.prototype.getDonutPercentage=function(a){return this.isIncomeModel(a.type)?a.chart.incomeOverlayModel?a.chart.incomeOverlayModel.percentage:0:Math.round(Number(a.projectedBalance.value1)/a.target.amount*100)},c.prototype.getAllAccountsClosedMessage=function(){var a=this.contextSvc.getActiveAccount(),b=a&&a.AcctIdDisplay?a.AcctIdDisplay.toString():this.contextSvc.getAllAccountClosedFlag(),c=new Object;if(b){var d=this.contextSvc.appConfig.allAccountsClosedMessage.toString().replace("accountid",b.toString()).split(",");d&&d.length>0&&(c.message1=d[0],this.$rootScope.isSIP?c.message2=d[1]:this.$rootScope.isIIP&&(c.message2=d[2]))}return c},c.ColorsGoalSetup="#FFFFFF",c.ColorsGoalOnTarget="#26ffff",c.ColorsGoalAtRisk="#ffbf66",c.ColorsGoalOffTarget="#ff7373",c.HG_GoalStatus_Max_Retries=15,c.HG_GoalStatus_Retry_Delay=2e3,c.savingsSetupGoalValueText="Setup Goal Target",c.incomeGoalValueText="Monthly Income Goal Target",c.incomeOnTrackGoalValueText="Monthly Withdrawals",c.SavingsTargetLinkText="How much do I need?",c.IncomeTargetLinkText="Want guidance?",c.SavingsProgressBarText="Time Horizon",c.IncomeProgressBarText="Target Date",c.MaxContributionAmount=1e7,c.$inject=["$rootScope","$q","$timeout","$http","hgContextSvc","hgMonteCarloService","$filter","hgRemoteAssetSvc","hgSuitabilityQuestionsSvc","hgStrategiesSvc","$window","hgAccountSettingsSvc","hgEnrollmentCommonSvc","hgPortfolioSvc"],c.createSimulationInputParams=function(a,b,c,d,e,f,g){var h={};if(h.state=gtx.GoalState.NotSet,h.dates={established:a,targetEnd:b},2==c?(h.name=gtx.GoalTypes.Income,h.values={targetBalance:0,endingBalance:0,recurringIncome:d,recurringDeposit:0}):(h.name=gtx.GoalTypes.Savings,e=f.monthlyContribution.amount,h.values={targetBalance:d,endingBalance:0,recurringIncome:0,recurringDeposit:Number(e)}),h.currentBalance=f.currentBalance,h.oneTimeDeposit=null!=f.oneTimeContribution.amount?Number(f.oneTimeContribution.amount):0,h.simulationStartDate=a,f.selectedRiskModel.indexOf("Income")>0){var i=f.selectedRiskModel.match(/\d+$/);Number(i)>3&&(f.selectedRiskModel=f.selectedRiskModel.replace(i,3))}h.model=f.selectedRiskModel;var j={};return j.goals=h,j.config=g,j},c}(a.common.dataContextSvc);b.GoalService=c}(b=a.assets||(a.assets={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(a,b,c,d,e){this.$scope=a,this.$modal=b,this.items=c,this.benchmarkSelected=d,this.$state=e,a.items=angular.copy(c.benchmarkListParam),a.benchmarkLimit=5,a.benchmarkListSelected=angular.copy(c.selectedBenchmarkListParam);var f=0,g=[];a.benchmarkListSelected.length>0&&(g=a.benchmarkListSelected,f=a.benchmarkListSelected.length),g.length>0?(a.totalBenchmarks=g.length,a.benchmarkListSelected=g):(a.totalBenchmarks=0,a.benchmarkListSelected=[]),f>0?(a.totalBenchmarks=f,a.benchmarkListSelected=g):(a.totalBenchmarks=0,a.benchmarkListSelected=[]),a.selectedBenchmark=function(b){a.benchmarkListSelected=b,a.totalBenchmarks=a.benchmarkListSelected.length},a.back=function(){a.cancel(),e.go("charts.performance.performanceMain")},a.cancel=function(){d(a.benchmarkListSelected),a.$hide(),e.go("charts.performance.performanceMain")}}return a}();a.SelectBenchmarkModalCtrl=b}(b=a.assets||(a.assets={}))}(hg||(hg={}));var schwab;!function(a){var b;!function(a){var b=function(){function a(){this.self=this,this.toNominal=function(a){return a/12},this.pivotAndSort=function(a){for(var b=[],c=0;c<a[0].length;c++){var d=this.getTypedRowVector(a,c);this.radixSort(d),b.push(d)}return b},this.getTypedRowVector=function(a,b){for(var c=new Int32Array(a.length),d=0;d<a.length;d++)c[d]=a[d][b];return c},this.getRowVector=function(a,b){for(var c=[],d=0;d<a.length;d++)c.push(a[d][b]);return c},this.randn=function(a,b){var c,d,e,f,g,h=a||0,i=b||1;do c=Math.random(),d=1.7156*(Math.random()-.5),e=c-.449871,f=Math.abs(d)+.386595,g=e*e+f*(.196*f-.25472*e);while(g>.27597&&(g>.27846||d*d>-4*Math.log(c)*c*c));return d/c*i+h},this.randRates2=new Float64Array(0),this.addRates=function(a){var b=a-this.randRates2.length;if(b>0){this.randRates2=new Float64Array(a);for(var c=0;c<b;c++)this.randRates2[c]=this.randn()}return this.randRates2},this.randn2=function(a,b,c){return this.randRates2[a]*c+b},this.compound=function(a,b,c,d){for(var e=a,f=0;f<d;f++)if(e=(e+b)*(1+c),e<=0){e=0;break}return e},this.fvCompound=function(a,b,c,d){var e=Math.pow(1+c,d),f=b*((e-1)/c),g=a*e,h=g+f;return h},this.simAYear=function(a,b,c){for(var d=0;d<14;d++)this.fvCompound(a,b,this.toNominal(c),12);return this.fvCompound(a,b,this.toNominal(c),12)},this.aSimulation=function(a,b,c){var d=new Int32Array(c.length+1);d[0]=a;for(var e=1;e<c.length+1;e++)a=this.simAYear(a,b,c[e-1]/100),a<=0&&(a=0,b=0),d[e]=a;return d},this.ySimulations=function(a,b,c,d,e,f){for(var g={duration:0,simulations:[]},h=Date.now(),i=0,j=[],k=0;k<a;k++){for(var l=0;l<b;l++)j[l]=this.randn2(i,c,d),++i;g.simulations.push(this.aSimulation(e,f,j))}return g.duration=Date.now()-h,g},this.zSimulations=function(a,b,c,d,e,f){for(var g={duration:0,simulations:[]},h=Date.now(),i=0,j=[],k=0;k<b+1;k++)g.simulations.push(new Int32Array(a));for(var l=0;l<a;l++){for(var m=0;m<b;m++)j[m]=this.randn2(i,c,d),++i;for(var n=this.aSimulation(e,f,j),o=0;o<n.length;o++)g.simulations[o][l]=n[o]}for(var p=1;p<g.simulations.length;p++)this.radixSort(g.simulations[p]);return g.duration=Date.now()-h,g},this.colors=["#ff0000","#90ed7d","#7cb5ec","#434348","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"],this.getSeries=function(a,b){for(var c=[],d=0;d<b.length;d++){var e=parseInt(b[d],10);c.push({percentile:e,vector:this.getRowVector(a,Math.round(a[0].length*((100-e)/100)))})}return c},this.doSimulation=function(a){var b;b=a?{cme:a.rate,std:a.standardDeviation,contrib:a.monthlyContribution,portval:a.portfolioValue,simCount:a.simulationCount,years:a.numberOfYears,percentiles:a.percentiles,pcts:a.percentiles,duration:0,buildRate:0,pivot:0}:{cme:7.41,std:14.72,contrib:100,portval:1e3,simCount:5e3,years:25,percentiles:"60, 75, 85, 95",pcts:[30,60,90,85],duration:0,buildRates:0,pivot:0};var c=Date.now();this.addRates(b.years*b.simCount);var d=Date.now()-c;c=Date.now();var e=this.ySimulations(b.simCount,b.years,b.cme,b.std,b.portval,b.contrib),f=Date.now()-c;c=Date.now();for(var g=this.pivotAndSort(e.simulations),h=Date.now()-c,i=this.getSeries(g,b.pcts),j=[],k=[],l=[],m=0;m<i[0].vector.length;m++)j.push({x:"",y:i[2].vector[m]}),k.push({x:"",y:i[1].vector[m]}),l.push({x:"",y:i[0].vector[m]});return{timers:{buildRates:d,duration:f,pivot:h},seriesLow:j,seriesMid:k,seriesHigh:l}},this._radixSort_0=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}return a.prototype.radixSort=function(a){var b,c,d,e,f,g=new Array(a.length),h=[].concat(this._radixSort_0),i=[].concat(this._radixSort_0),j=[].concat(this._radixSort_0),k=[].concat(this._radixSort_0),l=0,m=0,n=0,o=0;for(f=0;f<a.length;f++)b=255&a[f],c=a[f]>>8&255,d=a[f]>>16&255,e=a[f]>>24&255^128,h[b]++,i[c]++,j[d]++,k[e]++;for(f=0;f<256;f++)b=l+h[f],c=m+i[f],d=n+j[f],e=o+k[f],h[f]=l,i[f]=m,j[f]=n,k[f]=o,l=b,m=c,n=d,o=e;for(f=0;f<a.length;f++)b=255&a[f],g[h[b]]=a[f],h[b]++;for(f=0;f<a.length;f++)c=g[f]>>8&255,a[i[c]]=g[f],i[c]++;for(f=0;f<a.length;f++)d=a[f]>>16&255,g[j[d]]=a[f],j[d]++;for(f=0;f<a.length;f++)e=g[f]>>24&255^128,a[k[e]]=g[f],k[e]++;return a},a}();a.MonteCarloService=b}(b=a.core||(a.core={}))}(schwab||(schwab={}));var hg;!function(a){var b;!function(a){var b=function(){function a(){this.routes=[],this.routes.push(this.createCharts()),this.routes.push(this.createChartsAssets()),this.routes.push(this.createChartsActivity()),this.routes.push(this.createChartsActivityDetail()),this.routes.push(this.createChartsAccountSettings()),this.routes.push(this.createChartsGoalPage()),this.routes.push(this.createChartsGoal()),this.routes.push(this.createChartsGoalStatusDetails()),this.routes.push(this.createChartsGoalValue()),this.routes.push(this.createChartsGoalValueFirstTimeMessage()),this.routes.push(this.createMonthlyContributionsPopup()),this.routes.push(this.createChartRiskProfileMessage()),this.routes.push(this.createChartsRiskProfilePage()),this.routes.push(this.createRiskProfilePopup()),this.routes.push(this.createEducationPopup()),this.routes.push(this.createChartsMonthlyContributions()),this.routes.push(this.createChartsMonthlyWithdrawals()),this.routes.push(this.createChartsOneTimeContribution()),this.routes.push(this.createPerformanceSelectIndex()),this.routes.push(this.createChartsPerformanceBase()),this.routes.push(this.createChartsPerformanceMain()),this.routes.push(this.createChartsPerformanceDateRange())}return a.prototype.createCharts=function(){return{key:"charts",route:{url:"/charts",templateUrl:"templates/assets/dashboard.html",controller:"hgDashboardCtrl",controllerAs:"mainViewModel",pageTitle:"Dashboard",publicAccess:!1,nativeAndroid:!1,nativeIos:!0}}},a.prototype.createChartsAssets=function(){return{key:"charts.assets",route:{url:"/assets",views:{mobile:{templateUrl:"templates/assets/assetChart.html"},web:{templateUrl:"templates/assets/assetChart.html"}},publicAccess:!1,nativeAndroid:!1,nativeIos:!0}}},a.prototype.createChartsActivity=function(){return{key:"charts.activity",route:{url:"/activity",pageTitle:"Activity",views:{mobile:{templateUrl:"templates/assets/activity.html"},web:{templateUrl:"templates/assets/activity.html"}},publicAccess:!1}}},a.prototype.createChartsActivityDetail=function(){return{key:"charts.activityDetail",route:{url:"/activityDetail",pageTitle:"Activity Detail",views:{mobile:{templateUrl:"templates/assets/activityDetail.html"},web:{templateUrl:"templates/assets/activityDetail.html"}},publicAccess:!1}}},a.prototype.createChartsGoal=function(){return{key:"charts.goal",route:{url:"/goal",pageTitle:"Goal",views:{mobile:{templateUrl:"templates/assets/goalbase.html",controller:"GoalController",controllerAs:"vm"},web:{templateUrl:"templates/assets/goalbase.html",controller:"GoalController",controllerAs:"vm"}},publicAccess:!1,nativeAndroid:!1,nativeIos:!0}}},a.prototype.createChartsGoalPage=function(){return{key:"charts.goal.goalMain",route:{url:"/goalMain",pageTitle:"Goal",templateUrl:"templates/assets/goal.html",publicAccess:!1,nativeAndroid:!1,nativeIos:!0}}},a.prototype.createChartsGoalStatusDetails=function(){return{key:"charts.goal.goalStatusDetails",route:{url:"/goalStatusDetails",pageTitle:"Goal Status Details",templateUrl:"templates/assets/goalStatusDetails.html",publicAccess:!1,nativeAndroid:!1,nativeIos:!0}}},a.prototype.createChartsGoalValue=function(){return{key:"charts.goal.goalValue",route:{url:"/goalValue",pageTitle:"Goal Value",templateUrl:"templates/assets/goalValue.html",publicAccess:!1,nativeAndroid:!1,nativeIos:!0}}},a.prototype.createChartsGoalValueFirstTimeMessage=function(){return{key:"charts.goal.goalValueFirstTimeMessage",route:{url:"/goalValueMessage",pageTitle:"Goal Value",templateUrl:"templates/assets/goalValueFirstTimeMessage.html",publicAccess:!1,nativeAndroid:!1,nativeIos:!0}}},a.prototype.createEducationPopup=function(){return{key:"charts.goal.educationPopup",route:{url:"/educationPopup",pageTitle:"Goal Value",templateUrl:"templates/assets/educationPopup.html",publicAccess:!1,nativeAndroid:!1,nativeIos:!0}}},a.prototype.createChartsRiskProfilePage=function(){return{key:"charts.goal.riskProfile",route:{url:"/riskProfile",pageTitle:"Risk Profile",templateUrl:"templates/assets/riskProfile.html",publicAccess:!1,nativeAndroid:!1,nativeIos:!0}}},a.prototype.createChartRiskProfileMessage=function(){return{key:"charts.goal.riskProfileSliderMessage",route:{url:"/riskProfileSliderMessage",pageTitle:"Risk Profile",templateUrl:"templates/assets/riskSliderMessage.html",publicAccess:!1,nativeAndroid:!1,nativeIos:!0}}},a.prototype.createRiskProfilePopup=function(){return{key:"charts.goal.riskProfilePopup",route:{url:"/riskProfilePopup",pageTitle:"Risk Profile",templateUrl:"templates/assets/riskProfilePopup.html",publicAccess:!1,nativeAndroid:!1,nativeIos:!0}}},a.prototype.createChartsMonthlyContributions=function(){return{key:"charts.goal.monthlyContributions",route:{url:"/monthlyContributions",pageTitle:"Monthly Contributions",templateUrl:"templates/assets/monthlyContributions.html",publicAccess:!1,nativeAndroid:!1,nativeIos:!0}}},a.prototype.createMonthlyContributionsPopup=function(){return{key:"charts.goal.monthlyContributionsPopup",route:{url:"/monthlyContributionsPopup",pageTitle:"Monthly Contributions",templateUrl:"templates/assets/monthlyContributionsPopup.html",publicAccess:!1,nativeAndroid:!1,nativeIos:!0}}},a.prototype.createChartsMonthlyWithdrawals=function(){return{key:"charts.goal.monthlyWithdrawals",route:{url:"/monthlyWithdrawals",pageTitle:"Monthly Withdrawals",templateUrl:"templates/assets/goalValue.html",publicAccess:!1,nativeAndroid:!1,nativeIos:!0}}},a.prototype.createChartsOneTimeContribution=function(){return{key:"charts.goal.oneTimeContribution",route:{url:"/oneTimeContribution",pageTitle:"One-Time Contribution",templateUrl:"templates/assets/oneTimeContribution.html",publicAccess:!1,nativeAndroid:!1,nativeIos:!0}}},a.prototype.createChartsAccountSettings=function(){return{key:"charts.accountSettings",route:{url:"/accountSettings",pageTitle:"Account Settings",views:{mobile:{templateUrl:"templates/assets/accountSettings.html",controller:"hgAccountSettingsCtrl"},web:{templateUrl:"templates/assets/accountSettings.html",controller:"hgAccountSettingsCtrl"}},publicAccess:!1}}},a.prototype.createChartsPerformanceBase=function(){return{key:"charts.performance",route:{url:"/performance",pageTitle:"Account Performance",views:{mobile:{templateUrl:"templates/assets/performanceBase.html",controller:"hgPerformanceCtrl",controllerAs:"vm"},web:{templateUrl:"templates/assets/performanceBase.html",controller:"hgPerformanceCtrl",controllerAs:"vm"}},publicAccess:!1,nativeAndroid:!1,nativeIos:!0}}},a.prototype.createChartsPerformanceMain=function(){return{key:"charts.performance.performanceMain",route:{url:"/performanceMain",pageTitle:"Account Performance",templateUrl:"templates/assets/performanceChart.html",publicAccess:!1,nativeAndroid:!1,nativeIos:!0}}},a.prototype.createChartsPerformanceDateRange=function(){return{key:"charts.performance.performanceDateRange",route:{url:"/performanceDateRange",pageTitle:"Date Range",templateUrl:"templates/assets/performanceDateRange.html",publicAccess:!1,nativeAndroid:!1,nativeIos:!0}}},a.prototype.createPerformanceSelectIndex=function(){return{key:"charts.performance.performanceSelectIndex",route:{url:"/performanceSelectIndex",pageTitle:"Performance Select Benchmark",views:{mobile:{template:""},web:{templateUrl:"templates/assets/performanceChart.html"}},publicAccess:!1,nativeAndroid:!1,nativeIos:!0}}},a}();a.assetsRouteRegistry=b}(b=a.assets||(a.assets={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(b){var c=function(a){function b(b,c,d,e){a.call(this,c,"GOAL","GLOBAL"),this.$state=b,this.hgJs2nManagerSvc=c,this.contextSvc=d,this.goalService=e,this.commands={dashboardPresentationData:this.dashboardPresentationData,assetAllocationData:this.assetAllocationData,goalConfigurationData:this.goalConfigurationData,saveGoalParameters:this.saveGoalParameters,updatePortfolioPost:this.updatePortfolioPost,modelAllocationsData:this.modelAllocationsData,getGoal:this.getGoal}}return __extends(b,a),b.prototype.dashboardPresentationData=function(a,b,c){c.goalService.dashboardPresentationAdapter().then(function(b){c.hgJs2nManagerSvc.send("dashboardPresentationData",a.CorrelationId,b.goals,a.Context)})},b.prototype.assetAllocationData=function(a,b,c){var d=a.Data.selectedRiskProfile;c.goalService.assetAllocationDataAdapter(d).then(function(b){c.hgJs2nManagerSvc.send("assetAllocationData",a.CorrelationId,b,a.Context)})},b.prototype.goalConfigurationData=function(a,b,c){c.goalService.goalConfigurationAdapter().then(function(b){c.hgJs2nManagerSvc.send("goalConfigurationData",a.CorrelationId,b[0],a.Context)})},b.prototype.saveGoalParameters=function(a,b,c){var d={};d.target={},d.monthlyContribution={},d.target.amount=a.Data.targetAmount,d.monthlyContribution.amount=a.Data.recurringContribution,c.goalService.saveGoalParametersAdapter("post",d).then(function(b){c.hgJs2nManagerSvc.send("saveGoalParameters",a.CorrelationId,b,a.Context)})},b.prototype.updatePortfolioPost=function(a,b,c){var d=a.Data.modelName;c.goalService.updatePortfolioAdapter(d).then(function(b){c.hgJs2nManagerSvc.send("updatePortfolioPost",a.CorrelationId,b,a.Context)})},b.prototype.modelAllocationsData=function(a,b,c){var d=a.Data.modelName;c.goalService.modelAllocationsDataAdapter(d).then(function(b){c.hgJs2nManagerSvc.send("modelAllocationsData",a.CorrelationId,b,a.Context)})},b.prototype.getGoal=function(a,b,c){c.goalService.getGoalAdapter().then(function(b){c.hgJs2nManagerSvc.send("getGoal",a.CorrelationId,b,a.Context)})},b.$inject=["$state","hgJs2nManagerSvc","hgContextSvc","hgGoalService"],b}(a.core.js2n.js2nServiceBase);b.hgGoalJs2nSvcAdapter=c}(b=a.assets||(a.assets={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(b){var c=function(a){function b(b,c,d,e){a.call(this,b,c,d,e)}return __extends(b,a),b.prototype.getLatestAccountData=function(a){var b,c=this.q.defer();return b={dataServiceId:"PCCDataService",entitySet:"AccountDailyData",where:"AccountNumber eq '"+a+"'",expand:"",top:1,select:"",orderBy:"AsOfDate desc",params:null},this.http(this.buildOdataQueryRequest(b)).success(function(a,b,d,e){c.resolve(a)}).error(function(a,b,d,e){c.reject(a)}),c.promise},b.$inject=["$q","$timeout","$http","hgContextSvc"],b}(a.common.dataContextSvc);b.accountDailyDataSvc=c}(b=a.account||(a.account={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(b){var c=function(a){function b(b,c,d,e,f){a.call(this,b,d,e,f),this.window=c,this.dataServiceUrl=this.getDataServiceConfig("HgCoreDataService").url}return __extends(b,a),b.prototype.getStrategies=function(a,b){var c=this,d=this.q.defer(),e=this.contextSvc.appConfig.clientApiUrl+"/models/"+a;return this.strategies?d.resolve(this.strategies):this.http({method:"GET",url:e}).success(function(a){c.setStrategies(a.value),d.resolve(a.value)}).error(function(a,b,c,e){d.reject(a)}),d.promise},b.prototype.getPortfolioModel=function(a,b,c,d){var e=this,f=this.q.defer();return this.getStrategies(c,d).then(function(c){var d={};d._embedded={},d._embedded["ht:modelChart"]={};var g=d._embedded["ht:modelChart"];g.dataSeries=[];var h;h={};var i,j,k=0;if(a||(a=1),b||(b="Mercury - Return"),b=b+" "+a,i=_.where(c,{Name:b}),0==i.length&&c.body&&(i=_.where(c.body,{Name:b}),0==i.length&&c.body.value&&(i=_.where(c.body.value,{Name:b}))),i&&i.length>0){j=i[0],_.each(j.Allocations,function(a){if("Equities"==a.AssetClass.Level1.Label&&(a.AssetClass.Level1.Label="Stocks"),a.AssetClass.Level2=a.AssetClass.Level3,h[a.AssetClass.Level1.Label]){var b=h[a.AssetClass.Level1.Label]+100*a.Weight;h[a.AssetClass.Level1.Label]=b}else h[a.AssetClass.Level1.Label]=100*a.Weight});var l;for(l in h)g.dataSeries.push({name:l,label:l,y:h[l],value:h[l],color:e.getUniqueColorKeys()[k]}),k+=1;var m=e.normalizeAssets(j.Allocations);d.assets=m}f.resolve(d)}),f.promise},b.prototype.normalizeAssets=function(a){var b=this,c=new Array;return _.each(a,function(a){if(a&&a.Weight>0){var d=a.Weight,e=+(100*d).toFixed(2),f=a,g=b.findOrCreateAssetEntry(c,f,"Level1");g.percentage=parseFloat((g.percentage+e).toFixed(2));var h=b.findOrCreateAssetEntry(g.items,f,"Level2");h.percentage=parseFloat((h.percentage+e).toFixed(2)),h.fundDescription=a.AssetClass.Description,h.uriSource=a.AssetClass.UriSource;var i=JSON.parse(self.window.sessionStorage.getItem("accountTypeInterface"));i&&"true"===i.californiaMunis&&a.AssetClass.SecurityAllocations.length>2?h.securities=_.where(a.AssetClass.SecurityAllocations,{State:"CA"}):h.securities=_.where(a.AssetClass.SecurityAllocations,{State:null});var j=b.findOrCreateAssetEntry(h.items,f,"Level3");j.percentage=parseFloat((j.percentage+e).toFixed(2))}}),this.sortAssetCategories(c)},b.prototype.sortAssetCategories=function(a){var b=["Stocks","Equities","Fixed Income","Commodities","Cash Investments","Cash"],c=[];return _.each(b,function(b){var d=_.find(a,function(a){return a.name===b});d&&c.push(d)}),c},b.prototype.findOrCreateAssetEntry=function(a,b,c){var d=_.find(a,function(a){return a.name==b.AssetClass[c].Label});return d?d:(d={name:b.AssetClass[c].Label,items:[],percentage:0,level1:"Level1"===c||"Level2"===c||"Level3"===c?b.AssetClass.Level1.Label:null,level2:"Level2"===c||"Level3"===c?b.AssetClass.Level2.Label:null,level3:"Level3"===c?b.AssetClass.Level3.Label:null},a.push(d),d)},b.prototype.getUniqueColorKeys=function(){return["#23fffc","#2b5766","#246f80","#2d889b","#35a2a4","#23fffc","#2b5766","#246f80","#2d889b","#35a2a4","#23fffc","#2b5766","#246f80","#2d889b","#35a2a4","#23fffc","#2b5766","#246f80","#2d889b","#35a2a4"]},b.prototype.setStrategies=function(a){this.strategies=a,this.contextSvc.hasStorage()&&this.window.sessionStorage.setItem("strategies",a)},b.prototype.getStartegiesFromStorage=function(){var a=null;if(this.contextSvc.hasStorage()){var b=this.window.sessionStorage.getItem("strategies");b&&b.length>0&&(a=b)}return a},b.prototype.getDonutClass=function(a){if("undefined"==typeof a||a.length<1)return"donut1";var b=a.split(" "),c=b[b.length-1];return"donut"+c},b.$inject=["$q","$window","$timeout","$http","hgContextSvc"],b}(a.common.dataContextSvc);b.strategiesSvc=c}(b=a.account||(a.account={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(b){var c=function(a){function b(b,c,d,e){a.call(this,b,c,d,e),this.q=b,this.http=d,this.contextSvc=e}return __extends(b,a),b.prototype.fetchDocuments=function(a,b){var c=this.q.defer(),d=this.contextSvc.appConfig.clientApiUrl+"/documents/me";return d=d+"?type="+b+"&acct="+a,this.http.get(d,{headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}}).success(function(a,b){c.resolve(a)}).error(function(a,b){c.reject({error:"failed to obtain list of documents",details:a})}),c.promise},b.$inject=["$q","$timeout","$http","hgContextSvc"],b}(a.common.dataContextSvc);b.statementSvc=c}(b=a.account||(a.account={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function b(a,b,c,d,e,f){this.hgContextSvc=a,this.$rootScope=b,this.$state=c,this.$location=d,this.beneficiarySvc=e,this.hgRemoteAssetSvc=f,this.init()}return b.prototype.init=function(){var a=this.hgContextSvc.getPortfolioSettings();a.encryptedAccountId&&(this.beneficiaryViewModel||(this.beneficiaryViewModel={},this.beneficiarySvc.getBeneSnapshot()?this.beneficiaryViewModel=this.beneficiarySvc.getBeneSnapshot():this.getBeneficiaries()),this.initBeneficiaryModelMethods())},b.prototype.addOrUpdateBeneficiary=function(b,c){if(this.beneficiaryViewModel.currentBeneficiary&&b||(this.beneficiaryViewModel.currentBeneficiary={}),this.beneficiaryViewModel.beneficiaryLimitReached=!1,b)c&&(this.beneficiaryViewModel.currentBeneficiary=angular.copy(c)),this.beneficiaryViewModel.currentBeneficiary.changeStatusId=a.beneficiarySvc.EditChangeStatusId,this.beneficiarySvc.saveBeneSnapshot(this.beneficiaryViewModel),this.goToInformation();else if(!b&&c)this.beneficiaryViewModel.currentBeneficiary=angular.copy(c),this.beneficiaryViewModel.currentBeneficiary.changeStatusId=a.beneficiarySvc.AddEditChangeStatusId,this.beneficiarySvc.saveBeneSnapshot(this.beneficiaryViewModel),this.goToInformation();else if(!b&&!c)if(this.canAddBeneficiary()){if(this.beneficiaryViewModel.currentBeneficiary.changeStatusId=a.beneficiarySvc.AddChangeStatusId,
this.beneficiaryViewModel.currentBeneficiary.newShare=0,this.beneficiaryViewModel.newBeneficiaries){var d=this.beneficiaryViewModel.newBeneficiaries.length;if(d<=0)this.beneficiaryViewModel.currentBeneficiary.id=-1;else{var e=this.beneficiaryViewModel.newBeneficiaries[d-1].id;this.beneficiaryViewModel.currentBeneficiary.id=e-1}}this.beneficiarySvc.saveBeneSnapshot(this.beneficiaryViewModel),this.goToInformation()}else this.beneficiaryViewModel.beneficiaryLimitReached=!0},b.prototype.removeBeneficiary=function(b,c){if(this.beneficiarySvc.saveBeneSnapshot(this.beneficiaryViewModel),this.canRemoveBeneficiary(b)){if(this.isAdded(b)||this.isAddedAndEdited(b)){var d=_.findWhere(this.beneficiaryViewModel.newBeneficiaries,{id:b.id});this.deleteFromList(d,this.beneficiaryViewModel.newBeneficiaries)}else b.newShare=0,b.changeStatusId=a.beneficiarySvc.DeleteChangeStatusId;this.beneficiaryViewModel.modifyBeneficiaryErrorFlag=!1,this.beneficiaryViewModel.modifyBeneficiaryErrorMessage="",this.beneficiarySvc.saveBeneSnapshot(this.beneficiaryViewModel),c&&this.goToInterstitial()}else{var e=_.findWhere(this.beneficiaryViewModel.primaryBeneficiaries.concat(this.beneficiaryViewModel.newBeneficiaries),{id:b.id});e&&(this.beneficiaryViewModel.modifyBeneficiaryErrorFlag=!0,this.beneficiaryViewModel.modifyBeneficiaryErrorMessage="You must delete all contingent beneficiaries before deleting all primary beneficiaries.")}},b.prototype.goToOverview=function(a){this.beneficiaryViewModel.newBeneficiaries=[],this.beneficiaryViewModel.submitSuccess=a,this.beneficiarySvc.navigate("beneficiary.overview",this.beneficiaryViewModel)},b.prototype.goToInformation=function(){this.beneficiarySvc.navigate("beneficiary.information",this.beneficiaryViewModel)},b.prototype.goToInterstitial=function(){var b=this;_.isEmpty(this.beneficiaryViewModel.currentBeneficiary)?(this.beneficiaryViewModel=this.beneficiarySvc.getBeneSnapshot(),this.initBeneficiaryModelMethods()):(this.beneficiaryViewModel.currentBeneficiary.beneficiaryCategory=a.beneficiarySvc.IndividualBeneficiaryCategoryId,this.isEntityType(this.beneficiaryViewModel.currentBeneficiary)&&(this.beneficiaryViewModel.currentBeneficiary.beneficiaryCategory=a.beneficiarySvc.EntityBeneficiaryCategoryId,this.beneficiaryViewModel.currentBeneficiary.middleName="",this.beneficiaryViewModel.currentBeneficiary.lastName="",this.beneficiaryViewModel.currentBeneficiary.dateOfBirth=""),this.beneficiaryViewModel.currentBeneficiary.changeStatusId==a.beneficiarySvc.AddChangeStatusId||this.beneficiaryViewModel.currentBeneficiary.changeStatusId==a.beneficiarySvc.AddEditChangeStatusId?(this.beneficiaryViewModel.currentBeneficiary.changeStatusId=a.beneficiarySvc.AddChangeStatusId,angular.forEach(b.beneficiaryViewModel.newBeneficiaries,function(a){a.id==b.beneficiaryViewModel.currentBeneficiary.id&&b.deleteFromList(a,b.beneficiaryViewModel.newBeneficiaries)}),this.beneficiaryViewModel.newBeneficiaries.push(this.beneficiaryViewModel.currentBeneficiary)):this.beneficiaryViewModel.currentBeneficiary.changeStatusId!=a.beneficiarySvc.EditChangeStatusId&&this.beneficiaryViewModel.currentBeneficiary.changeStatusId!=a.beneficiarySvc.DeleteChangeStatusId||(angular.forEach(b.beneficiaryViewModel.primaryBeneficiaries,function(a){a.id===b.beneficiaryViewModel.currentBeneficiary.id&&b.determineTypeAndInsert(a,b.beneficiaryViewModel.primaryBeneficiaries)}),angular.forEach(b.beneficiaryViewModel.contingentBeneficiaries,function(a){a.id===b.beneficiaryViewModel.currentBeneficiary.id&&b.determineTypeAndInsert(a,b.beneficiaryViewModel.contingentBeneficiaries)})),this.beneficiaryViewModel.modifyBeneficiaryErrorFlag=!1,this.beneficiaryViewModel.modifyBeneficiaryErrorMessage="",this.beneficiaryViewModel.disableSaveFlag=!1,this.beneficiarySvc.setNameProperties(this.beneficiaryViewModel),this.beneficiarySvc.saveBeneSnapshot(this.beneficiaryViewModel)),this.beneficiarySvc.navigate("beneficiary.interstitial",this.beneficiaryViewModel)},b.prototype.goToSharePercentages=function(){this.calculateBeneTotals(),this.beneficiaryViewModel.beneficiaryLimitReached=!1,this.beneficiarySvc.saveBeneSnapshot(this.beneficiaryViewModel),this.beneficiarySvc.navigate("beneficiary.sharePercentages",this.beneficiaryViewModel)},b.prototype.goToConsent=function(){this.setZeroSharesToDeleted(),this.beneficiarySvc.saveBeneSnapshot(this.beneficiaryViewModel),this.beneficiarySvc.navigate("beneficiary.consent",this.beneficiaryViewModel)},b.prototype.goToSubmit=function(){this.beneficiaryViewModel.iConsentTimeStamp=(new Date).toISOString(),this.beneficiarySvc.saveBeneSnapshot(this.beneficiaryViewModel),this.beneficiarySvc.navigate("beneficiary.submit",this.beneficiaryViewModel)},b.prototype.backToAccountSetting=function(){this.$state.go("charts.accountSettings")},b.prototype.backToOverview=function(){this.beneficiaryViewModel=null,this.beneficiarySvc.saveBeneSnapshot(this.beneficiaryViewModel),this.init(),this.beneficiarySvc.navigate("beneficiary.overview",this.beneficiaryViewModel)},b.prototype.backToInformation=function(){this.beneficiaryViewModel=this.beneficiarySvc.getBeneSnapshot(),this.initBeneficiaryModelMethods(),this.goToInformation()},b.prototype.backToSharePercentages=function(){this.beneficiaryViewModel=this.beneficiarySvc.getBeneSnapshot(),this.initBeneficiaryModelMethods(),this.beneficiarySvc.navigate("beneficiary.sharePercentages",this.beneficiaryViewModel)},b.prototype.backToConsent=function(){this.beneficiaryViewModel=this.beneficiarySvc.getBeneSnapshot(),this.initBeneficiaryModelMethods(),this.beneficiarySvc.navigate("beneficiary.consent",this.beneficiaryViewModel)},b.prototype.submit=function(){var a=this;this.hgContextSvc.showSpinner(),this.beneficiarySvc.saveBeneSnapshot(a.beneficiaryViewModel),this.beneficiarySvc.postBeneficiaryData(this.beneficiaryViewModel).then(function(b){1==b.isSuccess?(a.beneficiaryViewModel=null,a.beneficiarySvc.saveBeneSnapshot(a.beneficiaryViewModel),a.init(),a.beneficiaryViewModel.submitSuccessMessage=b.friendlySuccessMessage,a.beneficiaryViewModel.serverErrorMessage="",a.goToOverview(!0)):(a.hgRemoteAssetSvc.getRemoteAsset("Service-BeneficiaryWebPart-BeneficianryDetailsMessage").then(function(b){a.beneficiaryViewModel.serverErrorMessage=b}),a.hgContextSvc.hideSpinner())},function(b){a.hgRemoteAssetSvc.getRemoteAsset("Service-BeneficiaryWebPart-unableProcessMsg").then(function(b){a.beneficiaryViewModel.serverErrorMessage=b}),a.hgContextSvc.hideSpinner()})},b.prototype.determineNext=function(){this.beneficiarySvc.saveBeneSnapshot(this.beneficiaryViewModel),this.beneficiaryViewModel&&(0==this.beneficiaryViewModel.interstitialSelection?(this.beneficiaryViewModel.currentBeneficiary=void 0,this.addOrUpdateBeneficiary()):1==this.beneficiaryViewModel.interstitialSelection?this.goToSharePercentages():2==this.beneficiaryViewModel.interstitialSelection&&(this.beneficiaryViewModel.currentBeneficiary=angular.copy(this.beneficiaryViewModel.selectedBeneficiary),this.beneficiaryViewModel.selectedBeneficiary=null,this.addOrUpdateBeneficiary(!0,this.beneficiaryViewModel.currentBeneficiary)))},b.prototype.calculateBeneTotals=function(){var a=this,b=0,c=0,d=0,e=0;angular.forEach(this.beneficiaryViewModel.newBeneficiaries,function(b){a.isPrimary(b)?d+=b.newShare?b.newShare:0:a.isContingent(b)&&(e+=b.newShare?b.newShare:0)}),angular.forEach(this.beneficiaryViewModel.primaryBeneficiaries,function(c){a.setShareUpdated(c),a.isDeleted(c)||(b+=parseInt(c.shareText?c.shareText:"0"),d+=c.newShare?c.newShare:0)}),angular.forEach(this.beneficiaryViewModel.contingentBeneficiaries,function(b){a.setShareUpdated(b),a.isDeleted(b)||(c+=parseInt(b.shareText?b.shareText:"0"),e+=b.newShare?b.newShare:0)}),this.beneficiaryViewModel.currentPrimaryTotal=b+"%",this.beneficiaryViewModel.currentContingentTotal=c+"%",this.beneficiaryViewModel.newPrimaryTotal=d+"%",this.beneficiaryViewModel.newContingentTotal=e+"%"},b.prototype.isDistributionUpdated=function(){var a=!1;return angular.forEach(this.beneficiaryViewModel.primaryBeneficiaries,function(b){a||(a=!!b.isShareUpdate)}),angular.forEach(this.beneficiaryViewModel.contingentBeneficiaries,function(b){a||(a=!!b.isShareUpdate)}),a},b.prototype.isValidPrimaryTotal=function(){return!this.containsPrimary(this.beneficiaryViewModel.primaryBeneficiaries)&&!this.containsPrimary(this.beneficiaryViewModel.newBeneficiaries)||(100==parseInt(this.beneficiaryViewModel.newPrimaryTotal)||!(0!=parseInt(this.beneficiaryViewModel.newPrimaryTotal)||this.containsContingent(this.beneficiaryViewModel.contingentBeneficiaries.concat(this.beneficiaryViewModel.newBeneficiaries))&&0!=parseInt(this.beneficiaryViewModel.newContingentTotal)))},b.prototype.isValidContingentTotal=function(){return!this.containsContingent(this.beneficiaryViewModel.contingentBeneficiaries)&&!this.containsContingent(this.beneficiaryViewModel.newBeneficiaries)||(100==parseInt(this.beneficiaryViewModel.newContingentTotal)||0==parseInt(this.beneficiaryViewModel.newContingentTotal))},b.prototype.isAdded=function(b){return!(!b||b.changeStatusId!=a.beneficiarySvc.AddChangeStatusId)},b.prototype.isDeleted=function(b){return!(!b||b.changeStatusId!=a.beneficiarySvc.DeleteChangeStatusId)},b.prototype.isEdited=function(b){return!(!b||b.changeStatusId!=a.beneficiarySvc.EditChangeStatusId)},b.prototype.isCurrent=function(b){return!(!b||b.changeStatusId!=a.beneficiarySvc.CurrentChangeStatusId)},b.prototype.isAddedAndEdited=function(b){return!(!b||b.changeStatusId!=a.beneficiarySvc.AddEditChangeStatusId)},b.prototype.isPrimary=function(b){return!(!b||b.beneficiaryTypeId!=a.beneficiarySvc.PrimaryBeneficiaryTypeId)},b.prototype.isContingent=function(b){return!(!b||b.beneficiaryTypeId!=a.beneficiarySvc.ContingentBeneficiaryTypeId)},b.prototype.isEntityType=function(b){return!(!b||b.relationTypeId!=a.beneficiarySvc.TrustEntityTypeId&&b.relationTypeId!=a.beneficiarySvc.EstateEntityTypeId&&b.relationTypeId!=a.beneficiarySvc.CharityEntityTypeId)},b.prototype.containsUpdated=function(){var b=_.contains(_.pluck(this.beneficiaryViewModel.primaryBeneficiaries.concat(this.beneficiaryViewModel.contingentBeneficiaries),"changeStatusId"),a.beneficiarySvc.EditChangeStatusId);return b},b.prototype.updatedCount=function(){var b=_.where(this.beneficiaryViewModel.primaryBeneficiaries.concat(this.beneficiaryViewModel.contingentBeneficiaries),{changeStatusId:a.beneficiarySvc.EditChangeStatusId});return b.length},b.prototype.removedCount=function(){var b=_.where(this.beneficiaryViewModel.primaryBeneficiaries.concat(this.beneficiaryViewModel.contingentBeneficiaries),{changeStatusId:a.beneficiarySvc.DeleteChangeStatusId});return b.length},b.prototype.setShareUpdated=function(a){a.isShareUpdate=!1;var b=parseInt(a.shareText);b!=a.newShare&&(a.isShareUpdate=!0)},b.prototype.containsPrimary=function(b){var c=this,d=!1;return angular.forEach(b,function(b){b.beneficiaryTypeId!=a.beneficiarySvc.PrimaryBeneficiaryTypeId||c.isDeleted(b)||(d=!0)}),d},b.prototype.containsContingent=function(b){var c=this,d=!1;return angular.forEach(b,function(b){b.beneficiaryTypeId!=a.beneficiarySvc.ContingentBeneficiaryTypeId||c.isDeleted(b)||(d=!0)}),d},b.prototype.containsNew=function(){var a=!1;return this.beneficiaryViewModel.newBeneficiaries.length>0&&(a=!0),a},b.prototype.containsBeneficiary=function(){var a=!1;return(this.containsPrimary(this.beneficiaryViewModel.primaryBeneficiaries)||this.containsContingent(this.beneficiaryViewModel.contingentBeneficiaries))&&(a=!0),a},b.prototype.containsZeroPercent=function(){var a=this,b=!1;return angular.forEach(this.beneficiaryViewModel.newBeneficiaries,function(c){c.newShare&&0!=c.newShare||a.isDeleted(c)||(b=!0)}),angular.forEach(this.beneficiaryViewModel.primaryBeneficiaries,function(c){c.newShare&&0!=c.newShare||a.isDeleted(c)||(b=!0)}),angular.forEach(this.beneficiaryViewModel.contingentBeneficiaries,function(c){c.newShare&&0!=c.newShare||a.isDeleted(c)||(b=!0)}),b},b.prototype.hasBeenSubmitted=function(){return!!this.beneficiaryViewModel.submitSuccess},b.prototype.canChangePrimaryToContingent=function(a){if(a){var b=this.getEligiblePrimaryCount();if(1==b){var c=_.findWhere(this.beneficiaryViewModel.primaryBeneficiaries.concat(this.beneficiaryViewModel.newBeneficiaries),{id:a.id});c&&this.isContingent(a)&&this.isPrimary(c)?(this.beneficiaryViewModel.modifyBeneficiaryErrorFlag=!0,this.beneficiaryViewModel.modifyBeneficiaryErrorMessage="You must add a primary beneficiary before any contingent beneficiaries may be added to this account.",this.beneficiaryViewModel.disableSaveFlag=!0):(this.beneficiaryViewModel.modifyBeneficiaryErrorFlag=!1,this.beneficiaryViewModel.modifyBeneficiaryErrorMessage="",this.beneficiaryViewModel.disableSaveFlag=!1)}else if(0==b)if(this.containsPrimary(this.beneficiaryViewModel.newBeneficiaries)){var c=_.findWhere(this.beneficiaryViewModel.newBeneficiaries,{id:a.id});c&&this.isContingent(a)&&this.isPrimary(c)?(this.beneficiaryViewModel.modifyBeneficiaryErrorFlag=!0,this.beneficiaryViewModel.modifyBeneficiaryErrorMessage="You must add a primary beneficiary before any contingent beneficiaries may be added to this account.",this.beneficiaryViewModel.disableSaveFlag=!0):(this.beneficiaryViewModel.modifyBeneficiaryErrorFlag=!1,this.beneficiaryViewModel.modifyBeneficiaryErrorMessage="",this.beneficiaryViewModel.disableSaveFlag=!1)}else this.containsPrimary(this.beneficiaryViewModel.newBeneficiaries)||(this.isContingent(a)?(this.beneficiaryViewModel.modifyBeneficiaryErrorFlag=!0,this.beneficiaryViewModel.modifyBeneficiaryErrorMessage="You must add a primary beneficiary before any contingent beneficiaries may be added to this account.",this.beneficiaryViewModel.disableSaveFlag=!0):(this.beneficiaryViewModel.modifyBeneficiaryErrorFlag=!1,this.beneficiaryViewModel.modifyBeneficiaryErrorMessage="",this.beneficiaryViewModel.disableSaveFlag=!1));else this.beneficiaryViewModel.modifyBeneficiaryErrorFlag=!1,this.beneficiaryViewModel.modifyBeneficiaryErrorMessage="",this.beneficiaryViewModel.disableSaveFlag=!1}},b.prototype.modifyBeneficiaryError=function(){return this.beneficiaryViewModel.modifyBeneficiaryErrorFlag},b.prototype.disableSave=function(){return this.beneficiaryViewModel.disableSaveFlag},b.prototype.disableAdd=function(){return this.hgContextSvc.getSpinnerState()},b.prototype.canAddBeneficiary=function(){var a=this,b=this.beneficiaryViewModel.newBeneficiaries,c=this.beneficiaryViewModel.primaryBeneficiaries,d=this.beneficiaryViewModel.contingentBeneficiaries,e=0;return angular.forEach(b.concat(c,d),function(b){a.isDeleted(b)||e++}),e<10},b.prototype.canRemoveBeneficiary=function(a){if(a&&!this.allSharesZero()){var b=this.getEligiblePrimaryCount();if(b<=1&&this.containsContingent(this.beneficiaryViewModel.contingentBeneficiaries)){var c=_.findWhere(this.beneficiaryViewModel.primaryBeneficiaries.concat(this.beneficiaryViewModel.newBeneficiaries),{id:a.id});if(c&&this.isPrimary(c))return!1}}return!0},b.prototype.getEligiblePrimaryCount=function(){var b=this,c=_.where(this.beneficiaryViewModel.newBeneficiaries,{beneficiaryTypeId:a.beneficiarySvc.PrimaryBeneficiaryTypeId}),d=_.filter(this.beneficiaryViewModel.primaryBeneficiaries,function(a){return!b.isDeleted(a)}),e=_.size(c.concat(d));return e},b.prototype.setZeroSharesToDeleted=function(){var a=this;angular.forEach(this.beneficiaryViewModel.newBeneficiaries,function(b){0!=b.newShare||a.isDeleted(b)||a.removeBeneficiary(b,!1)}),angular.forEach(this.beneficiaryViewModel.primaryBeneficiaries,function(b){0!=b.newShare||a.isDeleted(b)||a.removeBeneficiary(b,!1)}),angular.forEach(this.beneficiaryViewModel.contingentBeneficiaries,function(b){0!=b.newShare||a.isDeleted(b)||a.removeBeneficiary(b,!1)})},b.prototype.allSharesZero=function(){return parseInt(this.beneficiaryViewModel.newPrimaryTotal)+parseInt(this.beneficiaryViewModel.newContingentTotal)==0},b.prototype.getBeneficiaries=function(){var a=this;this.hgContextSvc.showSpinner(),this.beneficiarySvc.getBeneficiaryData(this.beneficiaryViewModel).then(function(b){return b?(a.calculateBeneTotals(),void a.hgContextSvc.hideSpinner()):void a.hgContextSvc.hideSpinner()},function(b){a.hgRemoteAssetSvc.getRemoteAsset("Service-BeneficiaryWebPart-unableProcessMsg").then(function(b){a.beneficiaryViewModel.serverErrorMessage=b}),a.hgContextSvc.hideSpinner()})},b.prototype.deleteFromList=function(a,b){var c=b.indexOf(a);b.splice(c,1)},b.prototype.determineTypeAndInsert=function(a,b){this.deleteFromList(a,b),this.isContingent(this.beneficiaryViewModel.currentBeneficiary)?this.beneficiaryViewModel.contingentBeneficiaries.push(this.beneficiaryViewModel.currentBeneficiary):this.beneficiaryViewModel.primaryBeneficiaries.push(this.beneficiaryViewModel.currentBeneficiary)},b.prototype.maskSsnTaxId=function(a){if(a){var b="XXX-XX-X",c=a.substr(a.length-3),d=b+c;return d}return null},b.prototype.initBeneficiaryModelMethods=function(){var a=this;this.beneficiaryViewModel.calculateBeneTotals=function(){return a.calculateBeneTotals()},this.beneficiaryViewModel.addOrUpdateBeneficiary=function(b,c){return a.addOrUpdateBeneficiary(b,c)},this.beneficiaryViewModel.removeBeneficiary=function(b,c){return a.removeBeneficiary(b,c)},this.beneficiaryViewModel.goToOverview=function(b){return a.goToOverview(b)},this.beneficiaryViewModel.goToInformation=function(){return a.goToInformation()},this.beneficiaryViewModel.backToOverview=function(){return a.backToOverview()},this.beneficiaryViewModel.backToInformation=function(){return a.backToInformation()},this.beneficiaryViewModel.backToSharePercentages=function(){return a.backToSharePercentages()},this.beneficiaryViewModel.backToConsent=function(){return a.backToConsent()},this.beneficiaryViewModel.goToInterstitial=function(){return a.goToInterstitial()},this.beneficiaryViewModel.goToSharePercentages=function(){return a.goToSharePercentages()},this.beneficiaryViewModel.goToConsent=function(){return a.goToConsent()},this.beneficiaryViewModel.goToSubmit=function(){return a.goToSubmit()},this.beneficiaryViewModel.submit=function(){return a.submit()},this.beneficiaryViewModel.determineNext=function(){return a.determineNext()},this.beneficiaryViewModel.isAdded=function(b){return a.isAdded(b)},this.beneficiaryViewModel.isDeleted=function(b){return a.isDeleted(b)},this.beneficiaryViewModel.isEdited=function(b){return a.isEdited(b)},this.beneficiaryViewModel.isCurrent=function(b){return a.isCurrent(b)},this.beneficiaryViewModel.isAddedAndEdited=function(b){return a.isAddedAndEdited(b)},this.beneficiaryViewModel.isPrimary=function(b){return a.isPrimary(b)},this.beneficiaryViewModel.isContingent=function(b){return a.isContingent(b)},this.beneficiaryViewModel.isEntityType=function(b){return a.isEntityType(b)},this.beneficiaryViewModel.containsUpdated=function(){return a.containsUpdated()},this.beneficiaryViewModel.containsPrimary=function(b){return a.containsPrimary(b)},this.beneficiaryViewModel.containsContingent=function(b){return a.containsContingent(b)},this.beneficiaryViewModel.containsNew=function(){return a.containsNew()},this.beneficiaryViewModel.containsBeneficiary=function(){return a.containsBeneficiary()},this.beneficiaryViewModel.containsZeroPercent=function(){return a.containsZeroPercent()},this.beneficiaryViewModel.updatedCount=function(){return a.updatedCount()},this.beneficiaryViewModel.removedCount=function(){return a.removedCount()},this.beneficiaryViewModel.isValidPrimaryTotal=function(){return a.isValidPrimaryTotal()},this.beneficiaryViewModel.isValidContingentTotal=function(){return a.isValidContingentTotal()},this.beneficiaryViewModel.hasBeenSubmitted=function(){return a.hasBeenSubmitted()},this.beneficiaryViewModel.isDistributionUpdated=function(){return a.isDistributionUpdated()},this.beneficiaryViewModel.backToAccountSetting=function(){return a.backToAccountSetting()},this.beneficiaryViewModel.canChangePrimaryToContingent=function(b){return a.canChangePrimaryToContingent(b)},this.beneficiaryViewModel.modifyBeneficiaryError=function(){return a.modifyBeneficiaryError()},this.beneficiaryViewModel.disableSave=function(){return a.disableSave()},this.beneficiaryViewModel.disableAdd=function(){return a.disableAdd()},this.beneficiaryViewModel.verifyBeneficiaryFlow=function(b){return a.beneficiarySvc.verifyBeneficiaryFlow(b)},this.beneficiaryViewModel.maskSsnTaxId=function(b){return a.maskSsnTaxId(b)}},b.$inject=["hgContextSvc","$rootScope","$state","$location","hgBeneficiarySvc","hgRemoteAssetSvc"],b}();a.beneficiaryCtrl=b}(b=a.account||(a.account={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(){this.routes=[],this.routes.push(this.createBeneficiaryRoute()),this.routes.push(this.createBeneficiaryOverview()),this.routes.push(this.createBeneficiaryInformation()),this.routes.push(this.createBeneficiaryNextStep()),this.routes.push(this.createBeneficarySharePercentages()),this.routes.push(this.createBeneficaryConsent()),this.routes.push(this.createBeneficarySubmit())}return a.prototype.createBeneficiaryRoute=function(){return{key:"beneficiary",route:{url:"/beneficiary",pageTitle:"Beneficiaries Overview",templateUrl:"templates/account/beneficiary.html",controller:"hgBeneficiaryCtrl",controllerAs:"vm",publicAccess:!1}}},a.prototype.createBeneficiaryOverview=function(){return{key:"beneficiary.overview",route:{url:"/overview",pageTitle:"Beneficiaries Overview",templateUrl:"templates/account/beneficiaryOverview.html",publicAccess:!1}}},a.prototype.createBeneficiaryInformation=function(){return{key:"beneficiary.information",route:{url:"/information",pageTitle:"Beneficiary Information",templateUrl:"templates/account/beneficiaryInfo.html",publicAccess:!1}}},a.prototype.createBeneficiaryNextStep=function(){return{key:"beneficiary.interstitial",route:{url:"/interstitial",pageTitle:"What would you like to do next?",templateUrl:"templates/account/beneficiaryInterstitial.html",publicAccess:!1}}},a.prototype.createBeneficarySharePercentages=function(){return{key:"beneficiary.sharePercentages",route:{url:"/sharePercentages",pageTitle:"Set Share Percentages",templateUrl:"templates/account/beneficiarySharePercentages.html",publicAccess:!1}}},a.prototype.createBeneficaryConsent=function(){return{key:"beneficiary.consent",route:{url:"/consent",pageTitle:"Consent",templateUrl:"templates/account/beneficiaryConsent.html",publicAccess:!1}}},a.prototype.createBeneficarySubmit=function(){return{key:"beneficiary.submit",route:{url:"/submit",pageTitle:"Submit Changes",templateUrl:"templates/account/beneficiarySubmit.html",publicAccess:!1}}},a}();a.accountRouteRegistry=b}(b=a.account||(a.account={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(b){var c=function(a){function b(b,c,d,e,f,g){a.call(this,b,c,d,e),this.$q=b,this.$timeout=c,this.$http=d,this.contextSvc=e,this.beneMementoSvc=f,this.$state=g,this.mementoKey="beneModelInfo"}return __extends(b,a),b.prototype.getBeneficiaryData=function(a){var b=this.contextSvc.getPortfolioSettings(),c=this.q.defer();a.primaryBeneficiaries=Array(),a.contingentBeneficiaries=Array(),a.newBeneficiaries=Array(),a.beneficiarySelector=Array();var d=this.contextSvc.appConfig.clientApiUrl+"/me/accounts/"+b.encryptedAccountId+"/beneficiaries";this.contextSvc.cache.removeItem(this.contextSvc.cache.cache,d);var e=this;return this.http.get(d).success(function(b){a=e.mapDomainToViewModel(b,a),c.resolve(a)}).error(function(a){c.reject(a)}),c.promise},b.prototype.postBeneficiaryData=function(a){var b=this.contextSvc.getPortfolioSettings(),c=this.q.defer(),d=this.contextSvc.appConfig.clientApiUrl+"/me/accounts/"+b.encryptedAccountId+"/beneficiaries",e=this.mapViewModelToDomain(a);return this.http.post(d,JSON.stringify(e)).success(function(a){c.resolve(a)}).error(function(a){c.reject(a)}),c.promise},b.prototype.mapDomainToViewModel=function(a,c){if(void 0!=a)return a.lookups&&(c.beneficiaryTypes=a.lookups.beneficiaryTypes,c.relationTypes=a.lookups.relationTypes,c.changeStatuses=a.lookups.changeStatuses,c.states=a.lookups.states,c.countries=a.lookups.countries,c.beneficiaryCategories=a.lookups.beneficiaryCategories),a.beneficiaryGroups&&angular.forEach(a.beneficiaryGroups,function(a){a.newShare=parseInt(a.shareText),c.beneficiarySelector.push(a.firstName+" "+a.lastName),a.beneficiaryTypeId==b.PrimaryBeneficiaryTypeId?c.primaryBeneficiaries.push(a):a.beneficiaryTypeId==b.ContingentBeneficiaryTypeId&&c.contingentBeneficiaries.push(a)}),c},b.prototype.mapViewModelToDomain=function(a){var c={};c.beneficiaryGroups=Array(),c.lookups={},c.hasAcceptedAgreement=a.hasAcceptedAgreement,c.lookups.beneficiaryTypes=a.beneficiaryTypes,c.lookups.relationTypes=a.relationTypes,c.lookups.changeStatuses=a.changeStatuses,c.lookups.states=a.states,c.lookups.countries=a.countries,c.lookups.beneficiaryCategories=a.beneficiaryCategories;var d=angular.copy(a.newBeneficiaries),e=angular.copy(a.primaryBeneficiaries),f=angular.copy(a.contingentBeneficiaries);return angular.forEach(d,function(a){a.shareText=a.newShare.toString()+"%",a.shareValue=a.newShare,a.newShare=null,c.beneficiaryGroups.push(a)}),angular.forEach(e,function(d){d.shareText=d.newShare.toString()+"%",d.shareValue=d.newShare,d.newShare=null,d.isShareUpdate&&d.changeStatusId!=b.DeleteChangeStatusId&&(d.changeStatusId=_.where(a.changeStatuses,{id:b.EditChangeStatusId})[0].id,d.changeStatusName=_.where(a.changeStatuses,{id:b.EditChangeStatusId})[0].name),c.beneficiaryGroups.push(d)}),angular.forEach(f,function(d){d.shareText=d.newShare.toString()+"%",d.shareValue=d.newShare,d.newShare=null,d.isShareUpdate&&d.changeStatusId!=b.DeleteChangeStatusId&&(d.changeStatusId=_.where(a.changeStatuses,{id:b.EditChangeStatusId})[0].id,d.changeStatusName=_.where(a.changeStatuses,{id:b.EditChangeStatusId})[0].name),c.beneficiaryGroups.push(d)}),c},b.prototype.setNameProperties=function(a){a.beneficiaryTypes&&(a.currentBeneficiary.beneficiaryTypeName=_.where(a.beneficiaryTypes,{id:a.currentBeneficiary.beneficiaryTypeId})[0].name),a.relationTypes&&(a.currentBeneficiary.relationTypeName=_.where(a.relationTypes,{id:a.currentBeneficiary.relationTypeId})[0].name),a.changeStatuses&&(a.currentBeneficiary.changeStatusName=_.where(a.changeStatuses,{id:a.currentBeneficiary.changeStatusId})[0].name),a.countries&&a.currentBeneficiary.countryId&&(a.currentBeneficiary.countryName=a.currentBeneficiary.countryId?_.where(a.countries,{id:a.currentBeneficiary.countryId})[0].name:void 0),a.states&&a.currentBeneficiary.stateId&&(a.currentBeneficiary.stateName=a.currentBeneficiary.stateId?_.where(a.states,{id:a.currentBeneficiary.stateId})[0].name:void 0)},b.prototype.saveBeneSnapshot=function(a){this.beneMementoSvc.saveState(this.mementoKey,this.createSnapshot(a))},b.prototype.getBeneSnapshot=function(){var a;return a=this.beneMementoSvc.restoreState(this.mementoKey)},b.prototype.restoreSnapshot=function(a,b){a=b},b.prototype.createSnapshot=function(a){var b=a;return b},b.prototype.navigate=function(a,b){b.canNavigate=!0,this.$state.go(a)},b.prototype.verifyBeneficiaryFlow=function(a){var b=this.contextSvc.getPreviousState().name;if(b){var c=this.contextSvc.getPortfolioSettings();if(!a.canNavigate&&"charts.accountSettings"!=b)return a.canNavigate=!0,void this.$state.go(b);c.canLaunchBeneficiaryFeature||this.$state.go(b),a.canNavigate=!1}},b.PrimaryBeneficiaryTypeId="BENE",b.ContingentBeneficiaryTypeId="CONTB",b.CurrentChangeStatusId="C",b.AddChangeStatusId="A",b.DeleteChangeStatusId="D",b.EditChangeStatusId="E",b.AddEditChangeStatusId="AE",b.TrustEntityTypeId="TRUST",b.EstateEntityTypeId="ESTATE",b.CharityEntityTypeId="CHARITY",b.EntityBeneficiaryCategoryId="ORG",b.IndividualBeneficiaryCategoryId="IND",b.$inject=["$q","$timeout","$http","hgContextSvc","hgMementoService","$state"],b}(a.common.dataContextSvc);b.beneficiarySvc=c}(b=a.account||(a.account={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(b){var c=function(a){function b(b,c){a.call(this,c,"ACCOUNT","GLOBAL"),this.$state=b,this.hgJs2nManagerSvc=c,this.commands={}}return __extends(b,a),b.$inject=["$state","hgJs2nManagerSvc","hgContextSvc","hgPortfolioSvc"],b}(a.core.js2n.js2nServiceBase);b.beneficiaryJs2nSvc=c}(b=a.account||(a.account={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b;!function(a){var b=function(){function a(a,b){this.$resource=a,this.hgContext=b;var c={method:"GET"},d={method:"POST",headers:{"Content-Type":"application/json"}},e={method:"PUT",headers:{"Content-Type":"application/json"}};this.resource=this.$resource(b.appConfig.accountOpenServiceApiUrl+"/ChannelHandOff/initiateaccountopen/:visitorId",{visitorId:"@visitorId"},{get:c,save:d,update:e})}return a.prototype.initiateAccountOpen=function(a){return this.resource.save(a).$promise},a}();a.channelHandOffProvider=b}(b=a.providers||(a.providers={}))}(b=a.accountOpen||(a.accountOpen={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(){this.routes=[],this.routes.push(this.createSetup()),this.routes.push(this.createsetupNewCustomer()),this.routes.push(this.createsetupSchwabCustomer()),this.routes.push(this.createsetupSecurityQuestions()),this.routes.push(this.createAccountopen()),this.routes.push(this.createAccountopenProfile()),this.routes.push(this.createAccountopenEmailValidate()),this.routes.push(this.createAccountopenIdentity()),this.routes.push(this.createAccountopenAddress()),this.routes.push(this.createAccountopenMailingAddress()),this.routes.push(this.createAccountopenFund()),this.routes.push(this.createAccountopenReviewDepositCheck()),this.routes.push(this.createAccountopenDepositCheckConfirmation()),this.routes.push(this.createAccountopenEquifaxVerification()),this.routes.push(this.createAccountopenEmpFinance()),this.routes.push(this.createAccountopenRegulatoryQuestions()),this.routes.push(this.createAccountopenAgreements()),this.routes.push(this.createAccountopenLongRunActivity()),this.routes.push(this.createAccountopenEmailHardStop()),this.routes.push(this.createAccountopenJointThankYou()),this.routes.push(this.createAccountopenJointConfirmIdentity()),this.routes.push(this.createAccountopenAccountOpenError()),this.routes.push(this.createAccountopenProspectlogin()),this.routes.push(this.createAccountopenLoginsecurityquestions()),this.routes.push(this.createAccountopenLoginredirect()),this.routes.push(this.createAccountopenLivingtrust()),this.routes.push(this.createAccountopenLivingtrustadditionalinfo()),this.routes.push(this.createAccountopenLivingtrusdoc()),this.routes.push(this.createAccountopenLivingtrusdocmobile()),this.routes.push(this.createAccountopenLivingtrustagreements()),this.routes.push(this.createAccountopenLivingtrustgrantor()),this.routes.push(this.createAccountopenInvitesecondtenant()),this.routes.push(this.createAccountopenJointValidateEmail()),this.routes.push(this.createEnrollmentconfirmation()),this.routes.push(this.createConfirmation())}return a.prototype.createSetup=function(){return{key:"setup",route:{url:"/setup",templateUrl:"templates/accountOpen/setup.html",controller:"hgAccountOpenBaseCtrl",publicAccess:!0}}},a.prototype.createsetupNewCustomer=function(){return{key:"setup.newCustomer",route:{url:"/newCustomer",templateUrl:"templates/accountOpen/newCustomer.html",controller:"",publicAccess:!0,pageTitle:"Signup"}}},a.prototype.createsetupSchwabCustomer=function(){return{key:"setup.schwabCustomer",route:{url:"/schwabCustomer",templateUrl:"templates/accountOpen/schwabCustomer.html",publicAccess:!0}}},a.prototype.createsetupSecurityQuestions=function(){return{key:"setup.securityQuestions",route:{url:"/securityQuestions",templateUrl:"templates/accountOpen/securityQuestions.html",publicAccess:!0}}},a.prototype.createAccountopen=function(){
return{key:"accountopen",route:{url:"/accountopen",templateUrl:"templates/accountOpen/application.html",controller:"hgAccountOpenBaseCtrl",publicAccess:!0}}},a.prototype.createAccountopenProfile=function(){return{key:"accountopen.profile",route:{url:"/profile",templateUrl:"templates/accountOpen/profile.html",controller:"",publicAccess:!0,pageTitle:"Profile Details"}}},a.prototype.createAccountopenEmailValidate=function(){return{key:"accountopen.emailvalidate",route:{url:"/emailvalidate",templateUrl:"templates/accountOpen/emailvalidate.html",publicAccess:!0}}},a.prototype.createAccountopenIdentity=function(){return{key:"accountopen.identity",route:{url:"/identity",templateUrl:"templates/accountOpen/identity.html",publicAccess:!0}}},a.prototype.createAccountopenAddress=function(){return{key:"accountopen.address",route:{url:"/address",templateUrl:"templates/accountOpen/legal-address.html",publicAccess:!0,pageTitle:"Legal Address"}}},a.prototype.createAccountopenMailingAddress=function(){return{key:"accountopen.mailingAddress",route:{url:"/mailingAddress",templateUrl:"templates/accountOpen/mailing-address.html",publicAccess:!0,pageTitle:"Mailing Address"}}},a.prototype.createAccountopenFund=function(){return{key:"accountopen.fund",route:{url:"/fund",templateUrl:"templates/rdc/launchCheckDeposit.html",controller:"hgCheckDepositCtrl",publicAccess:!0,pageTitle:"Launch Check Deposit"}}},a.prototype.createAccountopenReviewDepositCheck=function(){return{key:"accountopen.reviewDepositCheck",route:{url:"/reviewDepositCheck",templateUrl:"templates/rdc/reviewDepositCheck.html",controller:"hgCheckDepositCtrl",publicAccess:!0,pageTitle:"Review Deposit Check"}}},a.prototype.createAccountopenDepositCheckConfirmation=function(){return{key:"depositCheckConfirmation",route:{url:"/depositCheckConfirmation",templateUrl:"templates/rdc/depositCheckConfirmation.html",controller:"hgCheckDepositCtrl",publicAccess:!0,pageTitle:"Review Deposit Check"}}},a.prototype.createAccountopenEquifaxVerification=function(){return{key:"accountopen.equifaxVerification",route:{url:"/equifaxVerification",templateUrl:"templates/accountOpen/equifax-verification.html",publicAccess:!0,pageTitle:"Equifax verification"}}},a.prototype.createAccountopenEmpFinance=function(){return{key:"accountopen.empFinance",route:{url:"/empFinance",templateUrl:"templates/accountOpen/emplFinance.html",publicAccess:!0,pageTitle:"Employee Finance"}}},a.prototype.createAccountopenRegulatoryQuestions=function(){return{key:"accountopen.regulatoryQuestions",route:{url:"/regulatoryQuestions",templateUrl:"templates/accountOpen/regulatoryQuestions.html",publicAccess:!0,pageTitle:"Regulatory Questions"}}},a.prototype.createAccountopenAgreements=function(){return{key:"accountopen.agreements",route:{url:"/agreements",templateUrl:"templates/accountOpen/agreements.html",publicAccess:!0,pageTitle:"Agreements"}}},a.prototype.createAccountopenLongRunActivity=function(){return{key:"accountopen.longRunActivity",route:{url:"/longRunActivity",templateUrl:"templates/accountOpen/longRunActivity.html",publicAccess:!0,pageTitle:"Waiting"}}},a.prototype.createAccountopenEmailHardStop=function(){return{key:"accountopen.emailHardStop",route:{url:"/emailhardstop",templateUrl:"templates/accountOpen/emailHardStop.html",publicAccess:!0}}},a.prototype.createAccountopenJointThankYou=function(){return{key:"accountopen.jointThankYou",route:{url:"/jointthankyou",templateUrl:"templates/accountOpen/jointThankYou.html",publicAccess:!0}}},a.prototype.createAccountopenJointConfirmIdentity=function(){return{key:"accountopen.jointConfirmIdentity",route:{url:"/jointconfirmidentity?appID/?duplicateCustID",templateUrl:"templates/accountOpen/jointConfirmIdentity.html",publicAccess:!0}}},a.prototype.createAccountopenAccountOpenError=function(){return{key:"accountopen.accountOpenError",route:{url:"/accountopenerror",templateUrl:"templates/accountOpen/accountOpenError.html",publicAccess:!0}}},a.prototype.createAccountopenLoginsecurityquestions=function(){return{key:"accountopen.loginsecurityquestions",route:{url:"/loginsecurityquestions",templateUrl:"templates/accountOpen/securityQuestions.html",publicAccess:!0}}},a.prototype.createAccountopenProspectlogin=function(){return{key:"accountopen.prospectlogin",route:{url:"/prospectlogin",templateUrl:"templates/accountOpen/prospectLogin.html",publicAccess:!0}}},a.prototype.createAccountopenLoginredirect=function(){return{key:"accountopen.loginredirect",route:{url:"/loginredirect",templateUrl:"templates/accountOpen/loginRedirect.html",publicAccess:!0}}},a.prototype.createAccountopenLivingtrust=function(){return{key:"accountopen.livingtrust",route:{url:"/livingtrust",templateUrl:"templates/accountOpen/livingTrust.html",publicAccess:!0}}},a.prototype.createAccountopenLivingtrustadditionalinfo=function(){return{key:"accountopen.additionalinfo",route:{url:"/additionalinfo",templateUrl:"templates/accountOpen/livingTrustAdditionalnfo.html",publicAccess:!0}}},a.prototype.createAccountopenLivingtrusdoc=function(){return{key:"accountopen.livingtrusdoc",route:{url:"/livingtrusdoc",templateUrl:"templates/accountOpen/livingTrustDoc.html",publicAccess:!0}}},a.prototype.createAccountopenLivingtrusdocmobile=function(){return{key:"accountopen.livingtrusdocmobile",route:{url:"/livingtrusdocmobile",templateUrl:"templates/accountOpen/livingTrustDoc-mobile.html",publicAccess:!0}}},a.prototype.createAccountopenLivingtrustagreements=function(){return{key:"accountopen.livingtrustagreements",route:{url:"/livingtrustagreements",templateUrl:"templates/accountOpen/livingTrustAgreements.html",publicAccess:!0}}},a.prototype.createAccountopenLivingtrustgrantor=function(){return{key:"accountopen.livingtrustgrantor",route:{url:"/livingtrustgrantor",templateUrl:"templates/accountOpen/livingTrustGrantor.html",publicAccess:!0}}},a.prototype.createAccountopenInvitesecondtenant=function(){return{key:"accountopen.invitesecondtenant",route:{url:"/invitesecondtenant",templateUrl:"templates/accountOpen/invite-second-tenant.html",publicAccess:!0,pageTitle:"Invite Second Tenant"}}},a.prototype.createAccountopenJointValidateEmail=function(){return{key:"accountopen.jointValidateEmail",route:{url:"/joint",templateUrl:"templates/accountOpen/jointValidateEmail.html",publicAccess:!0,pageTitle:"Invite Second Tenant"}}},a.prototype.createEnrollmentconfirmation=function(){return{key:"enrollmentconfirmation",route:{url:"/enrollmentconfirmation",templateUrl:"templates/accountOpen/confirmation.html",controller:"hgAccountOpenBaseCtrl",pageTitle:"Confirmation"}}},a.prototype.createConfirmation=function(){return{key:"confirmation",route:{url:"/confirmation",templateUrl:"templates/accountOpen/confirmation.html",controller:"hgAccountOpenBaseCtrl",publicAccess:!0}}},a}();a.accountOpenRouteRegistry=b}(b=a.accountOpen||(a.accountOpen={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(a,b,c,d,e,f,g,h){this.$http=a,this.$q=b,this.$window=c,this.$cookieStore=d,this.$rootScope=e,this.hgContextSvc=f,this.hgAccountApplicationSvc=g,this.hgChannelHandOffProviderSvc=h,this.q=b,this.window=c,this.cookieStore=d,this.rootScope=e,this.appConfig={identityStorageName:"accountOpen_newIdentity",profileStorageName:"accountOpen_newProfile",questionResponseStorageName:"accountOpen_questions",addressStorageName:"accountOpen_address",branchChromeBookStorageName:"hgBranchChromeBook"}}return a.prototype.saveIsBranchChromeBook=function(a){return this.window.sessionStorage.setItem(this.appConfig.branchChromeBookStorageName,a),!0},a.prototype.getIsBranchChromeBook=function(){return this.window.sessionStorage.getItem("hgBranchChromeBook")},a.prototype.saveNewIdentity=function(a){return this.window.sessionStorage.setItem(this.appConfig.identityStorageName,JSON.stringify(a)),!0},a.prototype.saveNewProfile=function(a){return this.window.sessionStorage.setItem(this.appConfig.profileStorageName,JSON.stringify(a)),!0},a.prototype.saveNewAddress=function(a){return this.window.sessionStorage.setItem(this.appConfig.addressStorageName,JSON.stringify(a)),!0},a.prototype.savePrimaryApplicant=function(a){return this.window.sessionStorage.setItem("primaryApplicant",JSON.stringify(a)),!0},a.prototype.getPrimaryApplicant=function(){return this.window.sessionStorage.getItem("primaryApplicant")},a.prototype.getAllAddress=function(){return this.window.sessionStorage.getItem("accountOpen_address")},a.prototype.removeAccountOpenAddress=function(){return this.window.sessionStorage.removeItem("accountOpen_address")},a.prototype.saveAccountType=function(a){return this.window.sessionStorage.setItem("accountOpen_address",JSON.stringify(a)),!0},a.prototype.saveWebLoginDetails=function(a){return this.window.sessionStorage.setItem("webLoginDetails",JSON.stringify(a)),!0},a.prototype.removeWebLoginDetails=function(){this.window.sessionStorage.removeItem("webLoginDetails")},a.prototype.setadvisorProgram=function(a){return this.window.sessionStorage.setItem("advisorProgram",JSON.stringify(a)),!0},a.prototype.applicationid=function(a){return this.window.sessionStorage.setItem("ApplicationId",a),!0},a.prototype.saveEmailCounter=function(a){return this.window.sessionStorage.setItem("emailCounter",a),!0},a.prototype.getEmailCounter=function(){return this.window.sessionStorage.getItem("emailCounter")},a.prototype.saveWebLogin=function(a){return this.window.sessionStorage.setItem("accountOpenWebLogin",a),!0},a.prototype.getWebLogin=function(){return this.window.sessionStorage.getItem("accountOpenWebLogin")},a.prototype.getApplicationid=function(){return this.window.sessionStorage.getItem("ApplicationId")},a.prototype.getPromoApplicationid=function(){return this.window.sessionStorage.getItem("PromoApplicationId")},a.prototype.getPromoCodes=function(){return this.window.sessionStorage.getItem("promoCodes")},a.prototype.savePromoCodes=function(a){this.window.sessionStorage.setItem("promoCodes",JSON.stringify(a))},a.prototype.removePromoCodes=function(){this.window.sessionStorage.removeItem("promoCodes")},a.prototype.getpromoCodeHandoffCompleted=function(){var a=!1;return null!=this.window.sessionStorage.getItem("promoCodeHandoffCompleted")&&(a=Boolean(this.window.sessionStorage.getItem("promoCodeHandoffCompleted"))),a},a.prototype.savePromoCodeHandoffCompleted=function(a){this.window.sessionStorage.setItem("promoCodeHandoffCompleted",a)},a.prototype.saveHgAccountNumber=function(a){return this.window.sessionStorage.setItem("hgAccountNumber",a),!0},a.prototype.getHgAccountNumber=function(){return this.window.sessionStorage.getItem("hgAccountNumber")},a.prototype.removeAddress=function(){return this.window.sessionStorage.removeItem(this.appConfig.addressStorageName),!0},a.prototype.getPersonalInfo=function(){return this.window.sessionStorage.getItem(this.appConfig.addressStorageName)},a.prototype.setLoginErrorFlag=function(a){return this.window.sessionStorage.setItem("loginError",a),!0},a.prototype.getLoginErrorFlag=function(){return this.window.sessionStorage.getItem("loginError")},a.prototype.setAccountFlow=function(a){return this.window.sessionStorage.setItem("accountFlow",a),!0},a.prototype.getAccountFlow=function(){return this.window.sessionStorage.getItem("accountFlow")},a.prototype.setSaveandResume=function(a){this.window.sessionStorage.setItem("saveResume",a)},a.prototype.removeSaveandResume=function(){this.window.sessionStorage.removeItem("saveResume")},a.prototype.saveInviteEmail=function(a){this.window.sessionStorage.setItem("inviteEmail",a)},a.prototype.getInviteEmail=function(){return this.window.sessionStorage.getItem("inviteEmail")},a.prototype.removeInviteEmail=function(){this.window.sessionStorage.removeItem("inviteEmail")},a.prototype.removeIdentity=function(){return this.window.sessionStorage.removeItem(this.appConfig.questionResponseStorageName),this.window.sessionStorage.removeItem(this.appConfig.profileStorageName),this.window.sessionStorage.removeItem(this.appConfig.identityStorageName),this.window.sessionStorage.removeItem(this.appConfig.addressStorageName),!0},a.prototype.copyApplicationId=function(){var a=this.getApplicationid();return this.window.sessionStorage.setItem("PromoApplicationId",a),!0},a.prototype.removeAccountOpen=function(){return this.window.sessionStorage.removeItem("accountOpen_address"),this.window.sessionStorage.removeItem("custodialApplicant"),this.window.sessionStorage.removeItem("questions"),this.window.sessionStorage.removeItem("ApplicationId"),null!=this.getPrimaryApplicant()&&this.window.sessionStorage.removeItem("primaryApplicant"),this.window.sessionStorage.removeItem("loginError"),this.window.sessionStorage.removeItem("webLoginDetails"),!0},a.prototype.branchChromeBookDetection=function(){var a=this.cookieStore.get("hgBranchChromeBook");return!!a&&this.saveIsBranchChromeBook(a)},a.prototype.isReferrerUpdateProfile=function(){var a=this.window.sessionStorage.getItem("referrer");return"updateProfile"==a},a.prototype.removeReferrer=function(){this.window.sessionStorage.getItem("referrer")&&this.window.sessionStorage.removeItem("referrer")},a.prototype.hasOnlyStrategyID=function(a){var b=this.hgContextSvc.customization.getAdvisorProgram();if(b){for(var c=0;c<b.Strategies.length;c++)if(b.Strategies[c].StrategyId!==a)return!1;return!0}},a.prototype.removeAccountOpenSession=function(a){if(1==a)this.window.sessionStorage.removeItem("ApplicationId"),this.window.sessionStorage.removeItem("oldCalculatedRiskProfile"),this.window.sessionStorage.removeItem("primaryApplicant");else if(3==a)return void this.removeAccountOpen();this.window.sessionStorage.removeItem("lastQuestionId"),this.window.sessionStorage.removeItem("willingness"),this.window.sessionStorage.removeItem("capacity"),this.window.sessionStorage.removeItem("RiskProfile"),this.window.sessionStorage.removeItem("willingnessBeforeSlider"),this.window.sessionStorage.removeItem("capacityBeforeSlider"),this.window.sessionStorage.removeItem("questions"),this.window.sessionStorage.removeItem("lastRiskResponse1"),this.window.sessionStorage.removeItem("lastRiskResponse2"),this.window.sessionStorage.removeItem("lastRiskResponse3"),this.window.sessionStorage.removeItem("lastRiskResponse4"),this.window.sessionStorage.removeItem("lastRiskResponse5"),this.window.sessionStorage.removeItem("lastRiskResponse6"),this.window.sessionStorage.removeItem("lastRiskResponse7"),this.window.sessionStorage.removeItem("lastRiskResponse8"),this.window.sessionStorage.removeItem("lastRiskResponse9"),this.window.sessionStorage.removeItem("lastRiskResponse10"),this.window.sessionStorage.removeItem("lastRiskResponse11"),this.window.sessionStorage.removeItem("lastRiskResponse12"),this.window.sessionStorage.removeItem("question1"),this.window.sessionStorage.removeItem("question2"),this.window.sessionStorage.removeItem("question3"),this.window.sessionStorage.removeItem("question4"),this.window.sessionStorage.removeItem("question5"),this.window.sessionStorage.removeItem("question6"),this.window.sessionStorage.removeItem("question7"),this.window.sessionStorage.removeItem("sliderRiskModel8"),this.window.sessionStorage.removeItem("sliderRiskModel9"),this.window.sessionStorage.removeItem("sliderRiskModel10"),this.window.sessionStorage.removeItem("sliderRiskModel11"),this.window.sessionStorage.removeItem("sliderRiskModel12"),this.window.sessionStorage.removeItem("compoundGrowthAge"),this.window.sessionStorage.removeItem("compoundGrowthannualContribution"),this.window.sessionStorage.removeItem("compoundGrowthnumberOfYears"),this.window.sessionStorage.removeItem("compoundGrowthstartingValue"),this.window.sessionStorage.removeItem("getGrowthannualStartingInYearsWeightage"),this.window.sessionStorage.removeItem("growthannualYearsWeightage"),this.window.sessionStorage.removeItem("investmentFluctuating"),this.window.sessionStorage.removeItem("investmentFluctuatingValue"),this.window.sessionStorage.removeItem("startingYearsOfYears"),this.window.sessionStorage.removeItem("JSONQuestion"),this.window.sessionStorage.removeItem("riskProfileInfo"),this.window.sessionStorage.removeItem("webLoginDetails"),this.window.sessionStorage.removeItem("GrowthannualContributionWeightage"),this.window.sessionStorage.removeItem("GrowthstartingValueWeightage"),this.window.sessionStorage.removeItem("accountOpen_address"),this.window.sessionStorage.removeItem("newAddressState"),this.window.sessionStorage.removeItem("SelectedRiskProfile"),this.window.sessionStorage.removeItem("CalculatedRiskProfile"),this.window.sessionStorage.removeItem("RiskProfileforAdditonalQuestions"),this.window.sessionStorage.removeItem("RiskProfileType"),this.window.sessionStorage.removeItem("inviteEmail"),this.window.sessionStorage.removeItem("minorFlow"),this.window.sessionStorage.removeItem("accountFlow"),this.window.sessionStorage.removeItem("tempRiskProfile"),this.window.sessionStorage.removeItem("accountTypeInterface"),this.window.sessionStorage.removeItem("monthlyIncomeWithdrawal"),this.window.sessionStorage.removeItem("initialCompoundGrowthstartingValue"),this.window.sessionStorage.removeItem("lastRiskResponse14"),this.window.sessionStorage.removeItem("oneTimeContributionAmount"),this.window.sessionStorage.removeItem("sliderRiskModel14"),this.window.sessionStorage.removeItem("sliderRiskModel13"),this.window.sessionStorage.removeItem("lastRiskResponse13")},a.prototype.getSavedIdentity=function(){var a={},b=this.q.defer();if(this.newIdentity)b.resolve(this.newIdentity);else{var c=this.window.sessionStorage.getItem(this.appConfig.profileStorageName);if(null!=c&&"undefined"!=typeof c){var d=JSON.parse(c);null!=d&&"undefined"!=typeof d&&(a.firstName=d.firstName,a.lastName=d.lastName,a.EmailAddress=d.EmailAddress,a.SocialSecurityNumber=d.SocialSecurityNumber,a.dateOfBirth=d.dateOfBirth,a.DrivingLicenceNumber=d.DrivingLicenceNumber)}var e=this.window.sessionStorage.getItem(this.appConfig.identityStorageName);if(null!=e&&"undefined"!=typeof e){var f=JSON.parse(e);null!=f&&"undefined"!=typeof f&&(a.SocialSecurityNumber=f.SocialSecurityNumber,a.dateOfBirth=f.dateOfBirth,a.DrivingLicenceNumber=f.DrivingLicenceNumber)}b.resolve(a)}return b.promise},a.prototype.getSavedAddress=function(){var a={},b=this.q.defer();if(this.newAddress)b.resolve(this.newAddress);else{var c=this.window.sessionStorage.getItem(this.appConfig.addressStorageName);if(null!=c&&"undefined"!=typeof c){var d,e=JSON.parse(c);d="S1"==e.accountType||"IRA"==e.accountType||"LivingTrust"==e.accountType?e.accountSubType:e.accountType,null!=e&&"undefined"!=typeof e&&(a.AddressLine1=e.AddressLine1,a.City=e.City,a.State=e.State,a.ZipCode=e.ZipCode,a.HomePhone=e.HomePhone,a.MobilePhone=e.MobilePhone,a.BusinessPhone=e.BusinessPhone,a.citizenship=e.citizenship,a.MothersMaidenName=e.MothersMaidenName,a.DrivingLicenceState=e.DrivingLicenceState,a.DrivingLicenceExpirationDate=e.DrivingLicenceExpirationDate,a.businessExt=e.businessExt,a.IsDirector=e.IsDirector,a.IsAffiliated=e.IsAffiliated,a.Is407Checked=e.IsAffiliated,a.CountryCode=e.CountryCode,a.AddressLine2=e.AddressLine2,a.AddressLine3=e.AddressLine3,a.addAddress=e.addAddress,a.AddAddressLine1=e.AddAddressLine1,a.AddAddressLine2=e.AddAddressLine2,a.AddCity=e.AddCity,a.AddState=e.AddState,a.AddZipCode=e.AddZipCode,a.AddCountryCode=e.AddCountryCode,a.middleName=e.middleName,a.suffix=e.suffix,a.employmentStatus=e.employmentStatus,a.annualIncome=e.annualIncome,a.liquidWorth=e.liquidWorth,a.mailAddressLine1=e.mailAddressLine1,a.mailAddressLine2=e.mailAddressLine2,a.mailCity=e.mailCity,a.mailState=e.mailState,a.mailZipCode=e.mailZipCode,a.employername=e.employername,a.occupation=e.occupation,a.businessAddressLine1=e.businessAddressLine1,a.businessAddressLine2=e.businessAddressLine2,a.businessCity=e.businessCity,a.businessState=e.businessState,a.businessZipCode=e.businessZipCode,a.businessCountryCode=e.businessCountryCode,a.socialSecurityNumber=e.socialSecurityNumber,a.accountType=d,a.drivingLicenceNumber=e.drivingLicenceNumber,a.dateOfBirth=e.dateOfBirth,a.emailAddress=e.emailAddress,a.lastName=e.lastName,a.firstName=e.firstName,a.mailCountryCode=e.mailCountryCode,a.oldAddress=e.oldAddress,a.oldAddressLine1=e.oldAddressLine1,a.oldAddressLine2=e.oldAddressLine2,a.oldCity=e.oldCity,a.oldState=e.oldState,a.oldZipCode=e.oldZipCode,a.oldCountryCode=e.oldCountryCode,a.symbol1=e.symbol1,a.symbol2=e.symbol2,a.symbol3=e.symbol3,a.symbol4=e.symbol4,a.symbol5=e.symbol5,a.symbol6=e.symbol6,a.symbol7=e.symbol7,a.symbol8=e.symbol8,a.symbol9=e.symbol9,a.symbol10=e.symbol10,a.moreSymbols=e.moreSymbols,a.addMoreSymbol=e.addMoreSymbol,a.riaAgreement=e.riaAgreement,a.cashAgreement=e.cashAgreement,a.paperlessAgreement=e.paperlessAgreement,a.taxpayerAgreement=e.taxpayerAgreement,a.brokerageAgreement=e.brokerageAgreement,a.irsAgreement=e.irsAgreement,a.accountNumber=e.accountNumber,a.abaNumber=e.abaNumber,a.depositAmount=e.depositAmount,a.agreementAcceptedTs=e.agreementAcceptedTs,a.applicationSubmittedTs=e.applicationSubmittedTs,a.TickerSymbols=e.TickerSymbols,a.jointFlag=e.jointFlag,a.accountSubType=e.accountSubType,a.IsEmailAddressInvalid=e.IsEmailAddressInvalid,a.irsTaxAgreement=e.irsTaxAgreement,a.CitizenShip=e.CitizenShip,a.trustName=e.trustName,a.trustDate=e.trustDate,a.trustITIN=e.trustITIN,a.trustState=e.trustState,a.trustAgreement=e.trustAgreement,a.trustAgreementName=e.trustAgreementName,a.trustAmendment=e.trustAmendment,a.trustRestatement=e.trustRestatement,a.trustSourceSalary=e.trustSourceSalary,a.trustSourceSocialSecurity=e.trustSourceSocialSecurity,a.trustSourceRealEstate=e.trustSourceRealEstate,a.trustSourceFamily=e.trustSourceFamily,a.trustSourceInvestment=e.trustSourceInvestment,a.trustSourceGifts=e.trustSourceGifts,a.trustSourceGambling=e.trustSourceGambling,a.trustSourceOther=e.trustSourceOther,a.trustSourceOtherText=e.trustSourceOtherText,a.Source=e.Source,a.trustPurpose=e.trustPurpose,a.trustPurposeOther=e.trustPurposeOther,a.trustGrantorSingle=e.trustGrantorSingle,a.trustGrantorTwo=e.trustGrantorTwo,a.SpouseSocialSecurityNumber=e.SpouseSocialSecurityNumber,a.SpouseLastName=e.SpouseLastName,a.SpouseDateOfBirth=e.SpouseDateOfBirth,a.validEmailAddress=e.validEmailAddress,a.electronicsAgreement=e.electronicsAgreement,a.hgAgreement=e.hgAgreement,a.accountTypeAgreement=e.accountTypeAgreement,a.livingTrustAgreementOne=e.livingTrustAgreementOne,a.livingTrustAgreementTwo=e.livingTrustAgreementTwo,a.livingTrustAgreementThree=e.livingTrustAgreementThree,a.trustAgreementAcceptedTs=e.trustAgreementAcceptedTs,a.taxOffer=e.taxOffer,a.incomeOffer=e.incomeOffer,a.muniOffer=e.muniOffer,a.californiaMunis=e.californiaMunis,a.californiaMunisNational=e.californiaMunisNational,a.equifaxQuestionCountFlag=e.equifaxQuestionCountFlag,a.equifaxPersonalInfoFlag=e.equifaxPersonalInfoFlag,a.isIncomeEligible=e.isIncomeEligible,a.isMuniEligible=e.isMuniEligible,a.isCalMuniEligible=e.isCalMuniEligible,a.annualIncomeLivingTrust=e.annualIncomeLivingTrust,a.liquidWorthLivingTrust=e.liquidWorthLivingTrust,a.equifaxProfileInfoFlag=e.equifaxProfileInfoFlag,a.SecondTenantEmailAddress=e.SecondTenantEmailAddress,a.confirmSecondTenantEmailAddress=e.confirmSecondTenantEmailAddress,a.secondTenantPin=e.secondTenantPin,a.customerFlow=e.customerFlow,a.trustPurposeAssets=e.trustPurposeAssets,a.trustPurposeExpense=e.trustPurposeExpense,a.trustPurposeCompensation=e.trustPurposeCompensation,a.trustPurposeDistribution=e.trustPurposeDistribution,a.trustPurposePool=e.trustPurposePool,a.trustPurposeTax=e.trustPurposeTax,a.trustPurposeOT=e.trustPurposeOT,a.trustPurposeOther=e.trustPurposeOther,a.occupationOther=e.occupationOther,a.trustInvestingAssets=e.trustInvestingAssets,a.trustPaymentExpenses=e.trustPaymentExpenses,a.trustPaymentCompensation=e.trustPaymentCompensation,a.trustDistributionAssets=e.trustDistributionAssets,a.trustInvestingPooledAssets=e.trustInvestingPooledAssets,a.trustInvestingTaxBenefits=e.trustInvestingTaxBenefits)}b.resolve(a)}return b.promise},a.prototype.getProspectLoginSecurityQuestion=function(){var a=this.$q.defer();return this.$http({method:"GET",url:this.hgContextSvc.appConfig.accountOpenServiceApiUrl+"/ao/ce/qns"}).success(function(b,c,d,e){a.resolve(b)}).error(function(b,c,d,e){a.reject(b)}),a.promise},a.prototype.getStates=function(){var a=this.$q.defer();return this.$http({method:"GET",url:this.hgContextSvc.appConfig.clientApiUrl+"/states"}).success(function(b,c,d,e){a.resolve(b)}).error(function(b,c,d,e){a.reject(b)}),a.promise},a.prototype.getCountries=function(){var a=this.$q.defer();return this.$http({method:"GET",url:this.hgContextSvc.appConfig.clientApiUrl+"/countries"}).success(function(b,c,d,e){a.resolve(b)}).error(function(b,c,d,e){a.reject(b)}),a.promise},a.prototype.intAddress=function(){var a=this,b=this.$q.defer();return this.getSavedAddress().then(function(c){var d;if(d=c?c:{AddressLine1:"",City:"",State:"",ZipCode:"",HomePhone:"",MobilePhone:"",BusinessPhone:"",citizenship:"",MothersMaidenName:"",DrivingLicenceState:"",DrivingLicenceExpirationDate:"",businessExt:"",CountryCode:"",IsDirector:null,IsAffiliated:null,trustSourceSalary:!1,trustSourceSocialSecurity:!1,trustSourceRealEstate:!1,trustSourceFamily:!1,trustSourceInvestment:!1,trustSourceGifts:!1,trustSourceGambling:!1,trustSourceOther:!1,AddressLine2:"",AddressLine3:"",firstName:"",lastName:""},null==d.accountSubType){var e=a.getPrimaryApplicant();if(e){var f=JSON.parse(e);d.accountType=f.accountType,d.accountSubType=f.accountSubType}}b.resolve(d)}),b.promise},a.prototype.initIdentity=function(){var a=this.$q.defer();return this.getSavedIdentity().then(function(b){b?a.resolve(b):a.resolve({userId:null,firstName:"",lastName:"",EmailAddress:"",SocialSecurityNumber:"",dateOfBirth:"",DrivingLicenceNumber:""})}),a.promise},a.prototype.getFullName=function(a){return null!=a&&"undefined"!=typeof a&&null!=a.firstName&&"undefined"!=typeof a.firstName&&null!=a.lastName&&"undefined"!=typeof a.lastName?a.firstName+" "+a.lastName:null},a.prototype.submitIdentity=function(a){return this.saveNewIdentity(a),!0},a.prototype.initiateChannelHandOffAccountOpen=function(){var a=this.getApplicationid(),b={visitorId:a};return this.hgChannelHandOffProviderSvc.initiateAccountOpen(b)},a.prototype.getAccountType=function(){return this.window.sessionStorage.getItem("accountTypeInterface")},a.prototype.lastQuestionId=function(a){return this.window.sessionStorage.setItem("lastQuestionId",a),!0},a.prototype.getRiskProfile=function(){return this.window.sessionStorage.getItem("RiskProfile")},a.prototype.getCalculatedRiskProfile=function(){return this.window.sessionStorage.getItem("CalculatedRiskProfile")},a.prototype.getSelectRiskProfile=function(){return this.window.sessionStorage.getItem("SelectedRiskProfile")},a.prototype.getCompoundGrowthannualContribution=function(){return this.window.sessionStorage.getItem("compoundGrowthannualContribution")},a.prototype.getCompoundGrowthstartingValue=function(){return this.window.sessionStorage.getItem("compoundGrowthstartingValue")},a.prototype.getLastquestionID=function(){return this.window.sessionStorage.getItem("lastQuestionId")},a.prototype.removeChartValue=function(){this.window.sessionStorage.removeItem("willingness"),this.window.sessionStorage.removeItem("capacity")},a.prototype.getLastRikModel=function(a){return this.window.sessionStorage.getItem("lastRiskResponse"+a)},a.prototype.hasStrategyID=function(a){var b=this.hgContextSvc.customization.getAdvisorProgram();if(b){for(var c=0;c<b.Strategies.length;c++)if(b.Strategies[c].StrategyId===a)return!0;return!1}},a.prototype.iipCaliEligibilityCheck=function(){if(!this.rootScope.isIIP)return!0;var a=this.hgContextSvc.customization.getAdvisorProgram();return a?!(!a.UseCaliforniaMunis||!this.hasStrategyID(200)&&!this.hasStrategyID(400)):void 0},a.prototype.iipMuniEligibilityCheck=function(){return!!this.rootScope.isSIP||!(!this.hasStrategyID(200)&&!this.hasStrategyID(400))},a.prototype.getCompoundGrowthnumberOfYears=function(){return this.window.sessionStorage.getItem("compoundGrowthnumberOfYears")},a.prototype.willingnessNumber=function(a){return this.window.sessionStorage.setItem("willingness",a),!0},a.prototype.capacityNumber=function(a){return this.window.sessionStorage.setItem("capacity",a),!0},a.prototype.getEnrollmentAddress=function(){return JSON.parse(this.getAllAddress())},a.prototype.isCalMuni=function(){if(this.rootScope.isInCali){if(this.rootScope.isSIP)return!0;var a=this.hgContextSvc.customization.getAdvisorProgram();if(a)return a.UseCaliforniaMunis}return!1},a.prototype.isIncomeProfile=function(){var a,b,c=this.getLastRikModel(1);null!=this.getRiskProfile()&&(b=this.getRiskProfile()),null!=this.getCompoundGrowthnumberOfYears()&&(a=this.getCompoundGrowthnumberOfYears());var d=JSON.parse(c);if(null!=d&&("10"==d.lastWeightage||"15"==d.lastWeightage)&&a<=2&&b<=6){if(this.rootScope.isSIP)return!0;if(this.hasStrategyID(300)&&this.hasStrategyID(400))return!0;var e=this.getEnrollmentAddress();if(this.hasStrategyID(300)&&"IRA"==e.accountType)return!0;if(this.hasStrategyID(400)&&"IRA"!=e.accountType)return!0}return!1},a.prototype.getQuestion=function(){return this.window.sessionStorage.getItem("JSONQuestion")},a.prototype.saveStartingYearsOfYears=function(a){if(a.length>0&&a[0]>a[1]){var b=a[0];a[0]=a[1],a[1]=b}return this.window.sessionStorage.setItem("startingYearsOfYears",a),!0},a.prototype.saveMinorFlag=function(a){return this.window.sessionStorage.setItem("minorFlow",a),!0},a.prototype.getMinorFlag=function(){return this.window.sessionStorage.getItem("minorFlow")},a.prototype.removeMinorFlag=function(){return this.window.sessionStorage.removeItem("minorFlow")},a.prototype.saveCustodialApplicant=function(a){return this.window.sessionStorage.setItem("custodialApplicant",JSON.stringify(a)),!0},a.prototype.saveCustodialApplicantBack=function(a){return this.window.sessionStorage.setItem("custodialApplicant",a),!0},a.prototype.getCustodialApplicant=function(){return this.window.sessionStorage.getItem("custodialApplicant")},a.prototype.removeCustodialApplicant=function(){return this.window.sessionStorage.removeItem("custodialApplicant")},a.prototype.saveTempCustodialApplicant=function(a){return this.window.sessionStorage.setItem("tempCustodialApplicant",a),!0},a.prototype.getTempCustodialApplicant=function(){return this.window.sessionStorage.getItem("tempCustodialApplicant")},a.prototype.removeTempCustodialApplicant=function(){return this.window.sessionStorage.removeItem("tempCustodialApplicant")},a.prototype.saveCustodialAccountAddress=function(a){return this.window.sessionStorage.setItem("accountOpen_address",a),!0},a}();a.accountOpenSvc=b}(b=a.accountOpen||(a.accountOpen={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(b){var c=function(a){function b(b,c,d,e,f,g){a.call(this,b,c,d,f),this.$q=b,this.validEmptyPromo=[{IsValid:!0}],this.window=e,this.timeout=c,this.dataServiceUrl=this.getDataServiceConfig("HgAccountOpenService").url,this.$rootScope=g}return __extends(b,a),b.prototype.getSavedPromoCodes=function(){if(null!=this.window.sessionStorage.getItem("promoCodes")){var a=JSON.parse(this.window.sessionStorage.getItem("promoCodes")),b=[];return a.forEach(function(a){b.push({Code:a.PromoCode,Name:a.OfferCmsAssetValue})}),b}},b.prototype.createAccount=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B=this.window.sessionStorage.getItem("ApplicationId");null==this.window.sessionStorage.getItem("accountFlow")&&null==this.window.sessionStorage.getItem("primaryApplicant")&&null==this.window.sessionStorage.getItem("custodialApplicant")?(r=this.window.sessionStorage.getItem("accountOpen_address"),s=JSON.stringify({})):null!=this.window.sessionStorage.getItem("primaryApplicant")?(r=this.window.sessionStorage.getItem("primaryApplicant"),s=this.window.sessionStorage.getItem("accountOpen_address")):null!=this.window.sessionStorage.getItem("custodialApplicant")?(r=this.window.sessionStorage.getItem("custodialApplicant"),
y=this.window.sessionStorage.getItem("accountOpen_address"),s=JSON.stringify({})):(r=JSON.stringify({}),s=this.window.sessionStorage.getItem("accountOpen_address"));var C=this.window.sessionStorage.getItem("accountOpen_newProfile"),D=JSON.parse(C),E=JSON.parse(r);t=JSON.parse(s),null!=this.window.sessionStorage.getItem("custodialApplicant")?(z=JSON.parse(y),E.agreementAcceptedTs=z.agreementAcceptedTs,E.applicationSubmittedTs=z.applicationSubmittedTs,E.irsAgreement=z.irsAgreement):z=JSON.stringify({});var F=this.window.location.hash.split("/"),G=F[F.length-1];if(null==this.window.sessionStorage.getItem("accountFlow")?(o=E.accountSubType,x=E.accountType,A=E.customerFlow):(o=t.accountSubType,x=t.accountType),null==x&&"undefined"!=B&&null!=B?(a="0",b=""+B):"Custodial"!=o||"#/accountopen/profile"!=this.window.location.hash&&"#/accountopen/address"!=this.window.location.hash&&"#/accountopen/mailingAddress"!=this.window.location.hash&&"#/accountopen/empFinance"!=this.window.location.hash&&"#/accountopen/additionalinfo"!=this.window.location.hash&&"#/accountopen/equifaxVerification"!=this.window.location.hash&&"#/accountopen/regulatoryQuestions"!=this.window.location.hash?"Custodial"!=o||"#/accountopen/agreements"!=this.window.location.hash&&"#/accountopen/emailhardstop"!=this.window.location.hash?"Custodial"==o?(a="1",b=""+B,v="true",w="false"):"Individual"!=o&&"Single Trustee"!=o||null!=this.window.sessionStorage.getItem("accountFlow")||"#/accountopen/profile"!=this.window.location.hash&&"#/accountopen/accountType"!=this.window.location.hash&&"#/accountopen/address"!=this.window.location.hash&&"#/accountopen/mailingAddress"!=this.window.location.hash&&"#/accountopen/empFinance"!=this.window.location.hash&&"#/accountopen/equifaxVerification"!=this.window.location.hash&&"#/accountopen/regulatoryQuestions"!=this.window.location.hash&&"#/accountopen/livingtrust"!=this.window.location.hash&&"#/accountopen/livingtrusdoc"!=this.window.location.hash&&"#/accountopen/additionalinfo"!=this.window.location.hash&&"#/accountopen/livingtrustagreements"!=this.window.location.hash?("Individual"==o||"Single Trustee"==o)&&null==this.window.sessionStorage.getItem("accountFlow")&&"#/accountopen/agreements"==this.window.location.hash||"#/accountopen/emailhardstop"==this.window.location.hash?(a="0",b=""+B,v="true",w="false"):"Individual"!=o&&"Single Trustee"!=o||null!=this.window.sessionStorage.getItem("accountFlow")?"JointTenants"!=o&&"CommunityProperty"!=o&&"CommonTenants"!=o&&"Two Trustee"!=o||null!=this.window.sessionStorage.getItem("accountFlow")||"#/accountopen/agreements"!=this.window.location.hash&&"#/accountopen/emailhardstop"!=this.window.location.hash&&"#/accountopen/prospectlogin"!=this.window.location.hash&&"#/accountopen/invitesecondtenant"!=this.window.location.hash?("JointTenants"!=o&&"CommunityProperty"!=o&&"CommonTenants"!=o&&"Two Trustee"!=o||null!=this.window.sessionStorage.getItem("accountFlow"))&&("JointTenants"!=o&&"CommunityProperty"!=o&&"CommonTenants"!=o&&"Two Trustee"!=o||null==this.window.sessionStorage.getItem("accountFlow")||"#/accountopen/profile"!=this.window.location.hash&&"#/accountopen/address"!=this.window.location.hash&&"#/accountopen/mailingAddress"!=this.window.location.hash&&"#/accountopen/regulatoryQuestions"!=this.window.location.hash&&"#/accountopen/empFinance"!=this.window.location.hash&&"#/accountopen/livingtrustagreements"!=this.window.location.hash)?"JointTenants"!=o&&"CommunityProperty"!=o&&"CommonTenants"!=o&&"Two Trustee"!=o||null==this.window.sessionStorage.getItem("accountFlow")||"#/accountopen/agreements"!=this.window.location.hash&&"#/accountopen/emailhardstop"!=this.window.location.hash?"IRA"!=x||"#/accountopen/profile"!=this.window.location.hash&&"#/accountopen/accountType"!=this.window.location.hash&&"#/accountopen/empFinance"!=this.window.location.hash&&"#/accountopen/address"!=this.window.location.hash&&"#/accountopen/mailingAddress"!=this.window.location.hash&&"#/accountopen/equifaxVerification"!=this.window.location.hash&&"#/accountopen/regulatoryQuestions"!=this.window.location.hash?"IRA"!=x||"#/accountopen/agreements"!=this.window.location.hash&&"#/accountopen/emailhardstop"!=this.window.location.hash?"IRA"==x?(a="1",b=""+B,v="true",w="false"):(a="1",b=""+B,v="false",w="true"):(a="0",b=""+B,v="true",w="false"):(a="0",b=""+B,v="false",w="false"):(a="0",b=""+B,v="false",w="true"):(a="0",b=""+B,v="false",w="false"):(a="0",b=""+B,v="true",w="false"):(a="1",b=""+B,v="true",w="false"):(a="0",b=""+B,v="false",w="false"):(a="0",b=""+B,v="true",w="false"):(a="0",b=""+B,v="false",w="false"),null!=this.window.sessionStorage.getItem("HG_SESSION_DATA")){var H=JSON.parse(this.window.sessionStorage.getItem("HG_SESSION_DATA")),I=JSON.parse(this.window.sessionStorage.getItem("accountOpen_address"));1!=H.isLoggedIn&&1!=I.customerFlow&&!A||"#/accountopen/agreements"!=this.window.location.hash&&"#/accountopen/emailhardstop"!=this.window.location.hash||"Individual"!=o&&"Single Trustee"!=o&&"IRA"!=x&&"Custodial"!=o?1!=H.isLoggedIn&&1!=I.customerFlow||"#/accountopen/agreements"!=this.window.location.hash&&"#/accountopen/emailhardstop"!=this.window.location.hash||"JointTenants"!=o&&"CommonTenants"!=o&&"CommunityProperty"!=o&&"Two Trustee"!=o||null==this.window.sessionStorage.getItem("accountFlow")||(a="1",v="false",w="true"):(a="1",v="true",w="false")}if(null!=this.window.sessionStorage.getItem("saveResume")&&(a="0",v="false",w="false"),null!=E&&"undefined"!=typeof E||null!=D&&"undefined"!=typeof D||null!=t&&"undefined"!=typeof t){void 0==E.addAddress?(c=E.AddressLine1,d=E.AddressLine2,e=E.City,f=E.State,g=E.ZipCode?E.ZipCode.toString():void 0,h=E.CountryCode):(c=E.mailAddressLine1,d=E.mailAddressLine2,e=E.mailCity,f=E.mailState,g=E.mailZipCode?E.mailZipCode.toString():void 0,h=E.mailCountryCode),void 0==t.addAddress?(i=t.AddressLine1,j=t.AddressLine2,k=t.City,l=t.State,m=t.ZipCode?t.ZipCode.toString():void 0,n=t.CountryCode):(i=t.mailAddressLine1,j=t.mailAddressLine2,k=t.mailCity,l=t.mailState,m=t.mailZipCode?t.mailZipCode.toString():void 0,n=t.mailCountryCode),u=null==this.window.sessionStorage.getItem("accountFlow")?"JointTenants"==E.accountSubType||"CommunityProperty"==E.accountSubType||"CommonTenants"==E.accountSubType||"Two Trustee"==E.accountSubType?"true":"false":"JointTenants"==t.accountSubType||"CommunityProperty"==t.accountSubType||"CommonTenants"==t.accountSubType||"Two Trustee"==t.accountSubType?"true":"false",null==this.window.sessionStorage.getItem("accountFlow")?p=E.trustGrantorSingle:(p=t.trustGrantorSingle,q=t.trustGrantorTwo);var J,K,L,M,N,O,P;"Custodial"==o&&null!=this.window.sessionStorage.getItem("minorFlow")&&null!=z&&(void 0==z.addAddress?(K=z.AddressLine1,L=z.AddressLine2,M=z.City,N=z.State,O=z.ZipCode?z.ZipCode.toString():void 0,P=z.CountryCode):(K=z.mailAddressLine1,L=z.mailAddressLine2,M=z.mailCity,N=z.mailState,O=z.mailZipCode?z.mailZipCode.toString():void 0,P=z.mailCountryCode)),null!=E.SecondTenantEmailAddress||void 0!=E.SecondTenantEmailAddress?(t.emailAddress=E.SecondTenantEmailAddress,J={EmailAddress:E.SecondTenantEmailAddress,Pin:E.secondTenantPin?E.secondTenantPin.toString():void 0}):J=void 0;var Q=this.getSavedPromoCodes(),R={ReferenceId:"1",ApplicationId:b,AccountType:x,AccountSubType:o,ApplicationState:a,IsJoint:u,AccountTitle:o,PageName:G,ByPassDoc:E.ByPassDoc,PromoCodes:Q,PrimaryApplicant:{FirstName:E.firstName,MiddleName:E.middleName,LastName:E.lastName,NameSuffix:E.suffix,EmailAddress:E.emailAddress,EmailConsentAcceptedTs:E.emailConsentAcceptedTs,DateOfBirth:E.dateOfBirth,IsMailingAddressDifferent:E.addAddress?E.addAddress.toString():void 0,HomeAddress:{AddressLine1:E.AddressLine1,AddressLine2:E.AddressLine2,City:E.City,State:E.State,ZipCode:E.ZipCode?E.ZipCode.toString():void 0,CountryCode:E.CountryCode},MailingAddress:{AddressLine1:c,AddressLine2:d,City:e,State:f,ZipCode:g,CountryCode:h},BusinessAddress:{AddressLine1:E.businessAddressLine1,AddressLine2:E.businessAddressLine2,City:E.businessCity,State:E.businessState,ZipCode:E.businessZipCode?E.businessZipCode.toString():void 0,CountryCode:E.businessCountryCode},PreviousAddress:{AddressLine1:E.oldAddressLine1,AddressLine2:E.oldAddressLine2,City:E.oldCity,State:E.oldState,ZipCode:E.oldZipCode?E.oldZipCode.toString():void 0,CountryCode:E.oldCountryCode},HomePhone:E.HomePhone?E.HomePhone.toString():void 0,MobilePhone:E.MobilePhone?E.MobilePhone.toString():void 0,BusinessPhone:E.BusinessPhone?E.BusinessPhone.toString():void 0,DrivingLicenceNumber:E.drivingLicenceNumber,DrivingLicenceState:E.DrivingLicenceState,DrivingLicenceExpirationDate:E.DrivingLicenceExpirationDate,IsDirector:void 0!=E.IsDirector?E.IsDirector.toString():void 0,TickerSymbols:E.TickerSymbols,HasMoreSymbols:E.moreSymbols?E.moreSymbols.toString():void 0,IsAffiliated:void 0!=E.IsAffiliated?E.IsAffiliated.toString():void 0,SocialSecurityNumber:E.socialSecurityNumber?E.socialSecurityNumber.toString():void 0,BusinessExtension:E.businessExt?E.businessExt.toString():void 0,EmploymentStatus:E.employmentStatus,EmploymentName:E.employername,Occupation:E.occupation,OtherOccupation:E.occupationOther,AnnualIncome:E.annualIncome,LiquidNetWorth:E.liquidWorth,AgreementAcceptedTs:E.agreementAcceptedTs,ApplicationSubmittedTs:E.applicationSubmittedTs,IsComplete:v,IsGrantor:p,TrustAgreementAcceptedTs:E.trustAgreementAcceptedTs,CitizenShip:E.CitizenShip,IsTaxWithHolding:E.irsAgreement?E.irsAgreement.toString():void 0,AccountPurpose:E.trustPurpose,OtherAccountPurpose:E.trustPurposeOther,FundingSources:E.Source,OtherFunding:E.trustSourceOtherText},SecondaryApplicant:{InvitationDetails:J?J:void 0,FirstName:t.firstName,MiddleName:t.middleName,LastName:t.lastName,NameSuffix:t.suffix,EmailAddress:t.emailAddress,EmailConsentAcceptedTs:t.emailConsentAcceptedTs,DateOfBirth:t.dateOfBirth,IsMailingAddressDifferent:t.addAddress?t.addAddress.toString():void 0,HomeAddress:{AddressLine1:t.AddressLine1,AddressLine2:t.AddressLine2,City:t.City,State:t.State,ZipCode:t.ZipCode?t.ZipCode.toString():void 0,CountryCode:t.CountryCode},MailingAddress:{AddressLine1:i,AddressLine2:j,City:k,State:l,ZipCode:m,CountryCode:n},BusinessAddress:{AddressLine1:t.businessAddressLine1,AddressLine2:t.businessAddressLine2,City:t.businessCity,State:t.businessState,ZipCode:t.businessZipCode?t.businessZipCode.toString():void 0,CountryCode:t.businessCountryCode},PreviousAddress:{AddressLine1:t.oldAddressLine1,AddressLine2:t.oldAddressLine2,City:t.oldCity,State:t.oldState,ZipCode:t.oldZipCode?t.oldZipCode.toString():void 0,CountryCode:t.oldCountryCode},HomePhone:t.HomePhone?t.HomePhone.toString():void 0,MobilePhone:t.MobilePhone?t.MobilePhone.toString():void 0,BusinessPhone:t.BusinessPhone?t.BusinessPhone.toString():void 0,IsDirector:void 0!=t.IsDirector?t.IsDirector.toString():void 0,TickerSymbols:t.TickerSymbols,HasMoreSymbols:E.moreSymbols?E.moreSymbols.toString():void 0,IsAffiliated:void 0!=t.IsAffiliated?t.IsAffiliated.toString():void 0,SocialSecurityNumber:t.socialSecurityNumber?t.socialSecurityNumber.toString():void 0,BusinessExtension:t.businessExt?t.businessExt.toString():void 0,EmploymentStatus:t.employmentStatus,EmploymentName:t.employername,Occupation:t.occupation,OtherOccupation:t.occupationOther,AnnualIncome:t.annualIncome,LiquidNetWorth:t.liquidWorth,AgreementAcceptedTs:t.agreementAcceptedTs,ApplicationSubmittedTs:t.applicationSubmittedTs,IsComplete:w,IsGrantor:q,TrustAgreementAcceptedTs:t.trustAgreementAcceptedTs,CitizenShip:t.CitizenShip,IsTaxWithHolding:t.irsAgreement?t.irsAgreement.toString():void 0},TrustAccountInfo:{LegalName:E.trustName,Date:E.trustDate,TaxId:E.trustITIN,State:E.trustState,IsAmended:E.trustAgreement,AmendedBy:E.trustAgreementName,AmendedDate:E.trustAmendment,RestatedDate:E.trustRestatement,AnnualIncome:E.annualIncomeLivingTrust,LiquidNetWorth:E.liquidWorthLivingTrust},Minor:{FirstName:z.firstName,MiddleName:z.middleName,LastName:z.lastName,NameSuffix:z.suffix,IsMailingAddressDifferent:z.addAddress?z.addAddress.toString():void 0,HomeAddress:{AddressLine1:z.AddressLine1,AddressLine2:z.AddressLine2,City:z.City,State:z.State,ZipCode:z.ZipCode?z.ZipCode.toString():void 0,CountryCode:z.CountryCode},MailingAddress:{AddressLine1:K,AddressLine2:L,City:M,State:N,ZipCode:O,CountryCode:P},BusinessAddress:{AddressLine1:z.businessAddressLine1,AddressLine2:z.businessAddressLine2,City:z.businessCity,State:z.businessState,ZipCode:z.businessZipCode?z.businessZipCode.toString():void 0,CountryCode:z.businessCountryCode},PreviousAddress:{AddressLine1:z.oldAddressLine1,AddressLine2:z.oldAddressLine2,City:z.oldCity,State:z.oldState,ZipCode:z.oldZipCode?z.oldZipCode.toString():void 0,CountryCode:z.oldCountryCode},HomePhone:z.HomePhone?z.HomePhone.toString():void 0,MobilePhone:z.MobilePhone?z.MobilePhone.toString():void 0,BusinessPhone:z.BusinessPhone?z.BusinessPhone.toString():void 0,IsDirector:void 0!=z.IsDirector?z.IsDirector.toString():void 0,IsAffiliated:void 0!=z.IsAffiliated?z.IsAffiliated.toString():void 0,BusinessExtension:z.businessExt?z.businessExt.toString():void 0,SocialSecurityNumber:z.socialSecurityNumber?z.socialSecurityNumber.toString():void 0,EmploymentStatus:z.employmentStatus,EmploymentName:z.employername,Occupation:z.occupation,OtherOccupation:z.occupationOther,AnnualIncome:z.annualIncome,LiquidNetWorth:z.liquidWorth,DateOfBirth:z.dateOfBirth,governingState:z.governingState,ageOfTermination:z.ageOfTermination,dateOfTermination:z.dateOfTermination,CitizenShip:z.CitizenShip,TickerSymbols:z.TickerSymbols}};return R}},b.prototype.saveAccountDetailsInLocalStorage=function(a){var b=this,c=this.q.defer();return this.getAccountOpenDetails(a).then(function(a){var d;null!=a.AccountTitle&&(d="accountopen.accountType");var e={},f={accountType:a.AccountType,accountSubType:a.AccountType};if(a.AccountTitle&&(f={accountType:a.AccountType,accountSubType:a.AccountTitle}),e=f,e&&b.window.sessionStorage.setItem("accountTypeInterface",JSON.stringify(e)),a.PrimaryApplicant&&null!=a.PrimaryApplicant.FirstName){d="accountopen.profile";var g={firstName:a.PrimaryApplicant.FirstName,middleName:a.PrimaryApplicant.MiddleName?a.PrimaryApplicant.MiddleName:"",lastName:a.PrimaryApplicant.LastName,suffix:a.PrimaryApplicant.NameSuffix?a.PrimaryApplicant.NameSuffix:"",emailAddress:a.PrimaryApplicant.EmailAddress,emailConsentAcceptedTs:a.PrimaryApplicant.EmailConsentAcceptedTs,electronicAgreement:!0};_.extend(e,g)}if("LivingTrust"==a.AccountType){if(a.SecondaryApplicant&&(f={accountType:a.AccountType,accountSubType:"Two Trustee"},_.extend(e,f)),a.TrustAccountInfo&&a.TrustAccountInfo.LegalName){d="accountopen.livingtrust";var h={trustName:a.TrustAccountInfo.LegalName,trustDate:a.TrustAccountInfo.Date,trustITIN:a.TrustAccountInfo.TaxId,trustState:a.TrustAccountInfo.State,trustAgreement:a.TrustAccountInfo.IsAmended};_.extend(e,h)}if("Yes"==a.TrustAccountInfo.IsAmended){var i={trustAgreementName:a.TrustAccountInfo.AmendedBy,trustAmendment:a.TrustAccountInfo.AmendedDate,trustRestatement:a.TrustAccountInfo.RestatedDate};_.extend(e,i)}if(null!=a.TrustAccountInfo.Source&&a.TrustAccountInfo.Source.length>0){d="accountopen.livingtrustadditionalinfo";var j=(_(a.TrustAccountInfo.Source).value(),{Source:[a.TrustAccountInfo.Source[0],a.TrustAccountInfo.Source[1],a.TrustAccountInfo.Source[2],a.TrustAccountInfo.Source[3]],trustPurpose:[a.TrustAccountInfo.TrustPurpose[0],a.TrustAccountInfo.TrustPurpose[1],a.TrustAccountInfo.TrustPurpose[2],a.TrustAccountInfo.TrustPurpose[4],a.TrustAccountInfo.TrustPurpose[5],a.TrustAccountInfo.TrustPurpose[6]]});_.extend(e,j)}}if(a.PrimaryApplicant&&a.PrimaryApplicant.HomeAddress&&null!=a.PrimaryApplicant.HomeAddress.AddressLine1){d="accountopen.address";var k=a.PrimaryApplicant.HomeAddress;_.extend(e,k);var l={HomePhone:a.PrimaryApplicant.HomePhone,MobilePhone:a.PrimaryApplicant.MobilePhone,BusinessPhone:a.PrimaryApplicant.BusinessPhone};if(_.extend(e,l),a.PrimaryApplicant&&a.PrimaryApplicant.MailingAddress&&a.PrimaryApplicant.MailingAddress.AddressLine1&&"true"==a.PrimaryApplicant.IsMailingAddressDifferent){d="accountopen.mailingAddress";var m={addAddress:!0,mailAddressLine1:a.PrimaryApplicant.MailingAddress.AddressLine1,mailAddressLine2:a.PrimaryApplicant.MailingAddress.AddressLine2,mailCity:a.PrimaryApplicant.MailingAddress.City,mailState:a.PrimaryApplicant.MailingAddress.State,mailZipCode:a.PrimaryApplicant.MailingAddress.ZipCode};_.extend(e,m)}if(a.PrimaryApplicant&&a.PrimaryApplicant.PreviousAddress&&a.PrimaryApplicant.PreviousAddress.AddressLine1){var n={oldAddress:!0,oldAddressLine1:a.PrimaryApplicant.PreviousAddress.AddressLine1,oldAddressLine2:a.PrimaryApplicant.PreviousAddress.AddressLine2,oldCity:a.PrimaryApplicant.PreviousAddress.City,oldState:a.PrimaryApplicant.PreviousAddress.State,oldZipCode:a.PrimaryApplicant.PreviousAddress.ZipCode};_.extend(e,n)}}if(a.PrimaryApplicant&&null!=a.PrimaryApplicant.DateOfBirth){d="accountopen.empFinance";var o={dateOfBirth:a.PrimaryApplicant.DateOfBirth,socialSecurityNumber:a.PrimaryApplicant.SocialSecurityNumber,employmentStatus:a.PrimaryApplicant.EmploymentStatus,employername:a.PrimaryApplicant.EmploymentName,occupation:a.PrimaryApplicant.Occupation,annualIncome:a.PrimaryApplicant.AnnualIncome,liquidWorth:a.PrimaryApplicant.LiquidNetWorth,trustGrantorSingle:a.PrimaryApplicant.IsGrantor};if(_.extend(e,o),a.PrimaryApplicant&&a.PrimaryApplicant.BusinessAddress&&a.PrimaryApplicant.BusinessAddress.AddressLine1){var p={businessAddressLine1:a.PrimaryApplicant.BusinessAddress.AddressLine1,businessAddressLine2:a.PrimaryApplicant.BusinessAddress.AddressLine2,businessCity:a.PrimaryApplicant.BusinessAddress.City,businessState:a.PrimaryApplicant.BusinessAddress.State,businessZipCode:a.PrimaryApplicant.BusinessAddress.ZipCode};_.extend(e,p)}}if(a.PrimaryApplicant&&a.PrimaryApplicant.IsAffiliated){d="accountopen.regulatoryQuestions";var q;if(a.PrimaryApplicant.TickerSymbols){for(var r=0;r<a.PrimaryApplicant.TickerSymbols.length;r++){var s="symbol"+(r+1),t={};t[s]=a.PrimaryApplicant.TickerSymbols[r].Code,_.extend(e,t)}q=a.PrimaryApplicant.TickerSymbols.length>5}var u={IsAffiliated:"true"==a.PrimaryApplicant.IsAffiliated,IsDirector:"true"==a.PrimaryApplicant.IsDirector,moreSymbols:"true"==a.PrimaryApplicant.HasMoreSymbols,addMoreSymbol:q,TickerSymbols:a.PrimaryApplicant.TickerSymbols};_.extend(e,u)}if(a.PrimaryApplicant){if("livingtrustagreements"==a.PageName){d="accountopen.livingtrustagreements";var v={livingTrustAgreementOne:!1,livingTrustAgreementTwo:!1,livingTrustAgreementThree:!1};_.extend(e,v)}if("agreements"==a.PageName){d="accountopen.agreements";var w={agreementAcceptedTs:a.PrimaryApplicant.AgreementAcceptedTs,electronicsAgreement:!1,hgAgreement:!1,cashAgreement:!1,irsTaxAgreement:!1,accountTypeAgreement:!1};_.extend(e,w)}null!=a.PrimaryApplicant.EnrollmentInfo&&(a.PrimaryApplicant&&1==a.PrimaryApplicant.IsComplete&&null==a.PrimaryApplicant.EnrollmentInfo.CustSuid&&(d="accountopen.prospectlogin"),a.PrimaryApplicant&&null!=a.PrimaryApplicant.EnrollmentInfo.CustSuid&&1==a.PrimaryApplicant.IsComplete&&(d="accountopen.invitesecondtenant"))}if(a.SecondaryApplicant){b.window.sessionStorage.setItem("primaryApplicant",JSON.stringify(e));var x={},y={accountType:a.AccountTitle};if(x=y,null!=a.SecondaryApplicant.InvitationDetails.EmailAddress&&(d="accountopen.jointThankYou"),null!=a.SecondaryApplicant.FirstName&&(d="accountopen.profile",g={firstName:a.SecondaryApplicant.FirstName,middleName:a.SecondaryApplicant.MiddleName?a.SecondaryApplicant.MiddleName:"",lastName:a.SecondaryApplicant.LastName,suffix:a.SecondaryApplicant.NameSuffix?a.SecondaryApplicant.NameSuffix:"",emailAddress:a.SecondaryApplicant.EmailAddress,emailConsentAcceptedTs:a.SecondaryApplicant.EmailConsentAcceptedTs,electronicAgreement:!0},_.extend(x,g)),a.SecondaryApplicant.HomeAddress&&null!=a.SecondaryApplicant.HomeAddress.AddressLine1&&(d="accountopen.address"),k=a.SecondaryApplicant.HomeAddress,_.extend(x,k),l={HomePhone:a.SecondaryApplicant.HomePhone,MobilePhone:a.SecondaryApplicant.MobilePhone,BusinessPhone:a.SecondaryApplicant.BusinessPhone},_.extend(x,l),a.SecondaryApplicant&&a.SecondaryApplicant.MailingAddress&&a.SecondaryApplicant.MailingAddress.AddressLine1){d="accountopen.mailingAddress";var m={addAddress:!0,mailAddressLine1:a.SecondaryApplicant.AddressLine1,mailAddressLine2:a.SecondaryApplicant.AddressLine2,mailCity:a.SecondaryApplicant.City,mailState:a.SecondaryApplicant.State,mailZipCode:a.SecondaryApplicant.ZipCode};_.extend(x,m)}if(a.SecondaryApplicant&&a.SecondaryApplicant.PreviousAddress&&a.SecondaryApplicant.PreviousAddress.AddressLine1){var n={oldAddress:!0,oldAddressLine1:a.SecondaryApplicant.PreviousAddress.AddressLine1,oldAddressLine2:a.SecondaryApplicant.PreviousAddress.AddressLine2,oldCity:a.SecondaryApplicant.PreviousAddress.City,oldState:a.SecondaryApplicant.PreviousAddress.State,oldZipCode:a.SecondaryApplicant.PreviousAddress.ZipCode};_.extend(x,n)}null!=a.SecondaryApplicant.DateOfBirth&&(d="accountopen.empFinance");var z={dateOfBirth:a.SecondaryApplicant.DateOfBirth,socialSecurityNumber:a.SecondaryApplicant.SocialSecurityNumber,employmentStatus:a.SecondaryApplicant.EmploymentStatus,employername:a.SecondaryApplicant.EmploymentName,occupation:a.SecondaryApplicant.Occupation,annualIncome:a.SecondaryApplicant.AnnualIncome,liquidWorth:a.SecondaryApplicant.LiquidNetWorth};if(_.extend(x,z),a.SecondaryApplicant&&a.SecondaryApplicant.BusinessAddress&&a.SecondaryApplicant.BusinessAddress.AddressLine1){var p={businessAddressLine1:a.SecondaryApplicant.BusinessAddress.AddressLine1,businessAddressLine2:a.SecondaryApplicant.BusinessAddress.AddressLine2,businessCity:a.SecondaryApplicant.BusinessAddress.City,businessState:a.SecondaryApplicant.BusinessAddress.State,businessZipCode:a.SecondaryApplicant.BusinessAddress.ZipCode};_.extend(x,p)}if(a.SecondaryApplicant.IsAffiliated){d="accountopen.regulatoryQuestions";var q;if(a.SecondaryApplicant.TickerSymbols){for(var r=0;r<a.SecondaryApplicant.TickerSymbols.length;r++){var s="symbol"+(r+1),t={};t[s]=a.SecondaryApplicant.TickerSymbols[r].Code,_.extend(e,t)}q=a.SecondaryApplicant.TickerSymbols.length>5}var u={IsAffiliated:"true"==a.SecondaryApplicant.IsAffiliated,IsDirector:"true"==a.SecondaryApplicant.IsDirector,moreSymbols:"true"==a.SecondaryApplicant.HasMoreSymbols,addMoreSymbol:q,TickerSymbols:a.SecondaryApplicant.TickerSymbols};_.extend(x,u)}var A=new Date(a.SecondaryApplicant.TrustAgreementAcceptedTs);if(A.getFullYear()>0){d="accountopen.livingtrustagreements";var v={livingTrustAgreementOne:!0,livingTrustAgreementTwo:!0,livingTrustAgreementThree:!0};_.extend(x,v)}if(null==a.SecondaryApplicant.InvitationDetails&&a.SecondaryApplicant.IsGrantor){d="accountopen.livingtrustgrantor";var B={trustGrantorTwo:"true"==a.SecondaryApplicant.IsGrantor};_.extend(x,B)}var C=new Date(a.SecondaryApplicant.AgreementAcceptedTs);if(C.getFullYear()>0){d="accountopen.agreements";var w={agreementAcceptedTs:a.SecondaryApplicant.AgreementAcceptedTs,electronicsAgreement:!0,hgAgreement:!0,cashAgreement:!0,irsTaxAgreement:!0,accountTypeAgreement:!0};_.extend(x,w)}b.window.sessionStorage.setItem("accountOpen_address",JSON.stringify(x))}else b.window.sessionStorage.setItem("accountOpen_address",JSON.stringify(e));c.resolve(d)}),c.promise},b.prototype.enrollmentStatus=function(a){var b=this.window.sessionStorage.getItem("ApplicationId"),c="P";null!=window.sessionStorage.getItem("accountFlow")&&(c="S");var d={ApplicantId:b,ApplicantType:c,SocialSecurityNumber:a},e=this.q.defer();return this.http.post(this.contextSvc.appConfig.accountOpenServiceApiUrl+"/enrollmentstatus",JSON.stringify(d),{headers:{"Content-Type":"application/json"}}).success(function(a){e.resolve(a)}).error(function(){e.reject(!1)}).finally(function(){}),e.promise},b.prototype.saveAccountOpen=function(){var a=this.q.defer();return 0!=this.checkProgramKeyInSession()&&this.http.post(this.dataServiceUrl+"AccountApplication",JSON.stringify(this.createAccount()),{headers:{"Content-Type":"application/json"}}).success(function(b){a.resolve(b)}).error(function(){a.reject(!1)}).finally(function(){}),a.promise},b.prototype.getAccountOpenDetails=function(a){var b=this.q.defer();return this.http({method:"GET",url:this.dataServiceUrl+"/AccountApplication",params:{appid:a}}).success(function(a,c,d,e){b.resolve(a)}).error(function(a,c,d,e){b.reject(a)}),b.promise},b.prototype.emailTrigger=function(a,b){var c="P",d=this.window.sessionStorage.getItem("accountOpen_address");JSON.parse(d);null!=this.window.sessionStorage.getItem("accountFlow")&&(c="S");var e=this.contextSvc.appConfig.accountOpenServiceApiUrl+"/email/SendVerificationEmail?appid="+a+"&applicantType="+c;1==b&&this.contextSvc.cache.removeItem(this.contextSvc.cache.cache,e);var f=this.q.defer();return this.http.get(e,{headers:{"Content-Type":"application/json"}}).success(function(a){f.resolve(a)}).error(function(){f.reject(!1)}).finally(function(){}),f.promise},b.prototype.emailVerified=function(a){var b=this.q.defer();return this.http.get(this.contextSvc.appConfig.accountOpenServiceApiUrl+"/email/VerifyEmail?meid="+a,{headers:{"Content-Type":"application/json"}}).success(function(a){b.resolve(a)}).error(function(){b.reject(!1)}).finally(function(){}),b.promise},b.prototype.jointEmailVerified=function(a){var b=this.q.defer();return this.http.get(this.contextSvc.appConfig.accountOpenServiceApiUrl+"/resume/joint?meid="+a,{headers:{"Content-Type":"application/json"}}).success(function(a){b.resolve(a)}).error(function(){b.reject(!1)}).finally(function(){}),b.promise},b.prototype.confirmJointIdentity=function(a){var b;b=null!=this.window.sessionStorage.getItem("ApplicationId")?this.window.sessionStorage.getItem("ApplicationId"):"M0000000014292894253184116P";var c=this.q.defer();return this.http.get(this.contextSvc.appConfig.accountOpenServiceApiUrl+"/resume/validatepin?appid="+b+"&ipin="+a,{headers:{"Content-Type":"application/json"}}).success(function(a){c.resolve(a)}).error(function(){c.reject(!1)}).finally(function(){}),c.promise},b.prototype.minionHardStop=function(){var a=this.window.sessionStorage.getItem("ApplicationId"),b=this.q.defer(),c=(new Date,this.contextSvc.appConfig.accountOpenServiceApiUrl+"/ao/status?appid="+a);return this.contextSvc.cache.removeItem(this.contextSvc.cache.cache,c),this.http.get(c,{headers:{"Content-Type":"application/json"}}).success(function(a){b.resolve(a)}).error(function(){b.reject(!1)}).finally(function(){}),b.promise},b.prototype.prospectloginHardStop=function(){var a=this.window.sessionStorage.getItem("ApplicationId"),b=this.q.defer(),c=(new Date,"P");null!=this.window.sessionStorage.getItem("accountFlow")&&(c="S");var d=this.contextSvc.appConfig.accountOpenServiceApiUrl+"/ao/ce/"+a+"/status?appType="+c;return this.contextSvc.cache.removeItem(this.contextSvc.cache.cache,d),this.http.get(d,{headers:{"Content-Type":"application/json"}}).success(function(a){b.resolve(a)}).error(function(){b.reject(!1)}).finally(function(){}),b.promise},b.prototype.savePromotionalSettings=function(a){var b="/ao/"+a+"/leadcapture/callme",c=this.q.defer();return this.http({method:"GET",url:this.contextSvc.appConfig.accountOpenServiceApiUrl+b}).success(function(a,b,d,e){c.resolve(a)}).error(function(a,b,d,e){c.reject(a)}).finally(function(){}),c.promise},b.prototype.saveProspectlogin=function(a){var b=this.q.defer();return this.http.post(this.contextSvc.appConfig.accountOpenServiceApiUrl+"/ao/ce/enroll",JSON.stringify(a),{headers:{Accept:"application/json"}}).success(function(a){b.resolve(a)}).error(function(){b.reject(!1)}).finally(function(){}),b.promise},b.prototype.getCustomerData=function(){var a=this,b=this.window.sessionStorage.getItem("ApplicationId"),c="P";null!=this.window.sessionStorage.getItem("accountFlow")&&(c="S");var d=this.$q.defer();return null!=this.getStoredCustomerData()?d.resolve(this.getStoredCustomerData()):this.http.get(this.contextSvc.appConfig.accountOpenServiceApiUrl+"/accountopen/GetCustomerData?appid="+b+"&applicantType="+c).success(function(b){a.setCustomerData(b),d.resolve(b)}).error(function(){d.reject(!1)}).finally(function(){}),d.promise},b.prototype.setCustomerData=function(a){this.contextSvc.hasStorage()&&this.window.sessionStorage.setItem("customerData",a)},b.prototype.getStoredCustomerData=function(){this.window.sessionStorage.getItem("customerData")},b.prototype.pageUpload=function(a,b){var c=this.q.defer(),d=new FormData;return d.append("file",b),this.http.post(a,d,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(function(a){c.resolve(a)}).error(function(){c.reject(!1)}).finally(function(){}),c.promise},b.prototype.saveAddressState=function(a){return this.window.sessionStorage.setItem("newAddressState",a),!0},b.prototype.getAddressState=function(){return this.window.sessionStorage.getItem("newAddressState")},b.prototype.removeAddressState=function(){return this.window.sessionStorage.removeItem("newAddressState"),!0},b.prototype.raiseCommonErrorMsg=function(){var a="";return a=this.$rootScope.session&&1==this.$rootScope.session.isLoggedIn?"An unexpected error occurred.  Please logout and then select Start a New Portfolio.":"An unexpected error occurred.  Please select the Get Started button from the beginning.",this.$rootScope.raiseMessage(a)},b.prototype.checkProgramKeyInSession=function(){if(1==this.$rootScope.isIIP&&""==this.contextSvc.customization.getProgramPin())return this.raiseCommonErrorMsg(),!1},b.prototype.promoCodeValidate=function(a,b){var c=this.q.defer();return this.http.get(this.contextSvc.appConfig.accountOpenServiceApiUrl+"/promo/validate?promoCodes="+b).success(function(a){"0"==a.ReturnCode?c.resolve(a.Promotions):c.reject("invalidPromoCode")}).error(function(){c.reject("notEligible")}).finally(function(){}),c.promise},b.prototype.verifyProspectlogin=function(a){var b=this.q.defer();return this.http.post(this.contextSvc.appConfig.accountOpenServiceApiUrl+"/ao/ce/create",JSON.stringify(a),{headers:{Accept:"application/json"}}).success(function(a){b.resolve(a)}).error(function(){b.reject(!1)}).finally(function(){}),b.promise},b.$inject=["$q","$timeout","$http","$window","hgContextSvc","$rootScope"],b}(a.common.dataContextSvc);b.accountApplicationSvc=c}(b=a.accountOpen||(a.accountOpen={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(b){var c=function(a){function b(b,c,d,e,f){a.call(this,b,c,d,f),this.dataServiceUrl=this.getDataServiceConfig("HgAccountOpenService").url,this.window=e}return __extends(b,a),b.prototype.getEquifaxQuestions=function(a){var b=this.q.defer(),c="P";null!=this.window.sessionStorage.getItem("accountFlow")&&(c="S");var d=new Date;return this.http({method:"GET",url:this.dataServiceUrl+"/EquifaxData?applicantType="+c+"&timestamp="+d,params:{appid:a}}).success(function(a,c,d,e){b.resolve(a)}).error(function(a,c,d,e){b.reject(a)}),b.promise},b.prototype.submitEquifaxQuestions=function(a){var b=this.q.defer();return this.http.post(this.dataServiceUrl+"/EquifaxData",JSON.stringify(a),{headers:{Accept:"application/json"}}).success(function(a){b.resolve(a)}).error(function(a){b.reject(a)}).finally(function(){}),b.promise},b.$inject=["$q","$timeout","$http","$window","hgContextSvc"],b}(a.common.dataContextSvc);b.equifaxSvc=c}(b=a.accountOpen||(a.accountOpen={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(a,b,c,d,e,f,g,h){this.$q=a,this.commonJs2nSvc=b,this.$http=c,this.contextSvc=d,this.$modal=e,this.hgGetStartedRouteChangeHandlerSvc=f,this.$window=g,this.$rootScope=h,this.$q=a,this.commonJs2nSvc=b,this.http=c,this.contextSvc=d,this.window=g,this.rootScope=h}return a.prototype.getStartedModal=function(){this.$modal({contentTemplate:"templates/enrollment/getStarted.html",templateUrl:"templates/uiComponents/defaultModalTemplate.html",animation:"fade in",controller:"hgGetStartedModalCtrl",
prefixEvent:"getStartedModal",backdrop:"static",size:"lg"})},a.prototype.getRiskProfile=function(){return this.window.sessionStorage.getItem("RiskProfile")},a.prototype.getCalculatedRiskProfile=function(){return this.window.sessionStorage.getItem("CalculatedRiskProfile")},a.prototype.getSelectRiskProfile=function(){return this.window.sessionStorage.getItem("SelectedRiskProfile")},a.prototype.getAccountFlow=function(){return this.window.sessionStorage.getItem("accountFlow")},a.prototype.getRiskProfileType=function(){return this.window.sessionStorage.getItem("RiskProfileType")},a.prototype.getCapacityNumber=function(){return this.window.sessionStorage.getItem("capacity")},a.prototype.getWillingnessNumber=function(){return this.window.sessionStorage.getItem("willingness")},a.prototype.saveTempRiskProfile=function(a){this.window.sessionStorage.setItem("tempRiskProfile",a)},a.prototype.getCompoundGrowthAge=function(){return this.window.sessionStorage.getItem("compoundGrowthAge")},a.prototype.getCompoundGrowthannualContribution=function(){return this.window.sessionStorage.getItem("compoundGrowthannualContribution")},a.prototype.getStartingYearsOfYears=function(){return this.window.sessionStorage.getItem("startingYearsOfYears")},a.prototype.getInvestmentFluctuatingValue=function(){return this.window.sessionStorage.getItem("investmentFluctuatingValue")},a.prototype.getCompoundGrowthstartingValue=function(){return this.window.sessionStorage.getItem("compoundGrowthstartingValue")},a.prototype.getCompoundGrowthIncomeWithdrawal=function(){return this.window.sessionStorage.getItem("monthlyIncomeWithdrawal")},a.prototype.getLastquestionID=function(){return this.window.sessionStorage.getItem("lastQuestionId")},a.prototype.removeChartValue=function(){this.window.sessionStorage.removeItem("willingness"),this.window.sessionStorage.removeItem("capacity")},a.prototype.getLastRikModel=function(a){return this.window.sessionStorage.getItem("lastRiskResponse"+a)},a.prototype.lastQuestionId=function(a){return this.window.sessionStorage.setItem("lastQuestionId",a),!0},a.prototype.GetQuestionRiskModel=function(a){return this.window.sessionStorage.getItem("question"+a)},a.prototype.saveCalculatedRiskProfile=function(a){return this.window.sessionStorage.setItem("CalculatedRiskProfile",a),!0},a.prototype.saveRiskProfileforAdditonalQuestions=function(a){return this.window.sessionStorage.setItem("RiskProfileforAdditonalQuestions",a),!0},a.prototype.saveRiskProfile=function(a){return this.window.sessionStorage.setItem("RiskProfile",a),!0},a.prototype.performedUpdateProfile=function(a){return this.window.sessionStorage.setItem("updateProfile",a),!0},a.prototype.getRiskProfileInfo=function(){return this.window.sessionStorage.getItem("riskProfileInfo")},a.prototype.hasStrategyID=function(a){var b=this.contextSvc.customization.getAdvisorProgram();if(b){for(var c=0;c<b.Strategies.length;c++)if(b.Strategies[c].StrategyId===a)return!0;return!1}},a.prototype.iipCaliEligibilityCheck=function(){if(!this.rootScope.isIIP)return!0;var a=this.contextSvc.customization.getAdvisorProgram();return a?!(!a.UseCaliforniaMunis||!this.hasStrategyID(200)&&!this.hasStrategyID(400)):void 0},a.prototype.iipMuniEligibilityCheck=function(){return!!this.rootScope.isSIP||!(!this.hasStrategyID(200)&&!this.hasStrategyID(400))},a.prototype.removeSelectRiskProfile=function(){this.window.sessionStorage.getItem("SelectedRiskProfile")&&this.window.sessionStorage.removeItem("SelectedRiskProfile")},a.prototype.removeRiskProfileType=function(){return this.window.sessionStorage.removeItem("RiskProfileType")},a.prototype.getRiskProfileforAdditonalQuestions=function(){return this.window.sessionStorage.getItem("RiskProfileforAdditonalQuestions")},a.prototype.saveRiskProfileType=function(a){return this.window.sessionStorage.setItem("RiskProfileType",a),!0},a.prototype.removeRiskProfileforAdditonalQuestions=function(){return this.window.sessionStorage.removeItem("RiskProfileforAdditonalQuestions")},a.prototype.saveCompoundGrowthAge=function(a){return this.window.sessionStorage.setItem("compoundGrowthAge",a),!0},a.prototype.saveInitialCompoundGrowthstartingValue=function(a){return this.window.sessionStorage.setItem("initialCompoundGrowthstartingValue",a),!0},a.prototype.getInitialCompoundGrowthstartingValue=function(){return this.window.sessionStorage.getItem("initialCompoundGrowthstartingValue")},a.prototype.saveCompoundGrowthstartingValue=function(a){return this.window.sessionStorage.setItem("compoundGrowthstartingValue",a),!0},a.prototype.getCompoundGrowthnumberOfYears=function(){return this.window.sessionStorage.getItem("compoundGrowthnumberOfYears")},a.prototype.saveCompoundGrowthannualContribution=function(a){return this.window.sessionStorage.setItem("compoundGrowthannualContribution",a),!0},a.prototype.getGrowthannualContributionWeightage=function(){return this.window.sessionStorage.getItem("GrowthannualContributionWeightage")},a.prototype.saveGrowthannualContributionWeightage=function(a){return this.window.sessionStorage.setItem("GrowthannualContributionWeightage",a),!0},a.prototype.willingnessNumber=function(a){return this.window.sessionStorage.setItem("willingness",a),!0},a.prototype.capacityNumber=function(a){return this.window.sessionStorage.setItem("capacity",a),!0},a.prototype.saveLastRiskModel=function(a,b){return this.window.sessionStorage.setItem("lastRiskResponse"+a,JSON.stringify(b)),!0},a.prototype.savesliderRiskModel=function(a,b){return this.window.sessionStorage.setItem("sliderRiskModel"+a,JSON.stringify(b)),!0},a.prototype.getTempRiskProfile=function(){return this.window.sessionStorage.getItem("tempRiskProfile")},a.prototype.getSliderRiskModel=function(a){return this.window.sessionStorage.getItem("sliderRiskModel"+a)},a.prototype.getGrowthstartingValueWeightage=function(){return this.window.sessionStorage.getItem("GrowthstartingValueWeightage")},a.prototype.saveGrowthstartingValueWeightage=function(a){return this.window.sessionStorage.setItem("GrowthstartingValueWeightage",a),!0},a.prototype.getInvestmentFluctuating=function(){return this.window.sessionStorage.getItem("investmentFluctuating")},a.prototype.saveInvestmentFluctuatingValue=function(a){return this.window.sessionStorage.setItem("investmentFluctuatingValue",a),!0},a.prototype.saveInvestmentFluctuating=function(a){return this.window.sessionStorage.setItem("investmentFluctuating",a),!0},a.prototype.getGrowthannualStartingInYearsWeightage=function(){return this.window.sessionStorage.getItem("getGrowthannualStartingInYearsWeightage")},a.prototype.saveGrowthannualStartingInYearsWeightage=function(a){return this.window.sessionStorage.setItem("getGrowthannualStartingInYearsWeightage",a),!0},a.prototype.getGrowthannualYearsWeightage=function(){return this.window.sessionStorage.getItem("growthannualYearsWeightage")},a.prototype.saveGrowthannualYearsWeightage=function(a){return this.window.sessionStorage.setItem("growthannualYearsWeightage",a),!0},a.prototype.getAllAddress=function(){return this.window.sessionStorage.getItem("accountOpen_address")},a.prototype.getAccountTypeInterface=function(){return this.window.sessionStorage.getItem("accountTypeInterface")},a.prototype.getEnrollmentAddress=function(){return JSON.parse(this.getAllAddress())},a.prototype.removeCompoundGrowthstartingValue=function(){return this.window.sessionStorage.removeItem("compoundGrowthstartingValue"),!0},a.prototype.getOneTimeContributionAmount=function(){return this.window.sessionStorage.getItem("oneTimeContributionAmount")},a.prototype.saveOneTimeContributionAmount=function(a){return this.window.sessionStorage.setItem("oneTimeContributionAmount",a),!0},a.prototype.removeOneTimeContributionAmount=function(){return this.window.sessionStorage.removeItem("oneTimeContributionAmount"),!0},a.prototype.isTLH=function(){var a;null!=this.getCompoundGrowthstartingValue()&&(a=Number(this.getCompoundGrowthstartingValue()));var b=JSON.parse(this.getAccountTypeInterface());return console.log(b),!!(a>=5e4&&b&&null!=b.accountType&&"IRA"!=b.accountType)&&(!this.rootScope.isIIP||this.contextSvc.customization.getAdvisorProgram().OfferTaxLossHarvesting)},a.prototype.isIncomeMuni=function(){var a=JSON.parse(this.getAccountTypeInterface());return console.log(a),!(!a||null==a.accountType||"IRA"==a.accountType)&&(!this.rootScope.isIIP||!(!this.hasStrategyID(200)&&!this.hasStrategyID(400)))},a.prototype.isCalMuni=function(){if(this.rootScope.isInCali){if(this.rootScope.isSIP)return!0;var a=this.contextSvc.customization.getAdvisorProgram();if(a)return a.UseCaliforniaMunis}return!1},a.prototype.isIncomeProfile=function(){var a,b,c=this.GetQuestionRiskModel(1);null!=this.getRiskProfile()&&(b=this.getRiskProfile()),null!=this.getCompoundGrowthnumberOfYears()&&(a=this.getCompoundGrowthnumberOfYears());var d=JSON.parse(c);if(null!=d&&("5"==d.SelectedAnswers[0].AnswerId||"2"==d.SelectedAnswers[0].AnswerId&&a<=2)&&b<=6){if(this.rootScope.isSIP)return!0;var e=JSON.parse(this.getAccountTypeInterface());if(this.isIncomeTaxableIIP()||this.isIncomeMuniIIP(e))return!0}return!1},a.prototype.isIncomeMuniIIP=function(a){return!(!a||"IRA"==a.accountType)&&(!this.rootScope.isIIP||!!this.hasStrategyID(400))},a.prototype.isIncomeTaxableIIP=function(){return!this.rootScope.isIIP||!!this.hasStrategyID(300)},a.prototype.getLastRiskResponse=function(a){return this.window.sessionStorage.getItem("lastRiskResponse"+a)},a.prototype.getQuestion=function(){return this.window.sessionStorage.getItem("JSONQuestion")},a.prototype.saveCompoundGrowthnumberOfYears=function(a){return this.window.sessionStorage.setItem("compoundGrowthnumberOfYears",a),!0},a.prototype.saveMonthlyIncomeWithdrawal=function(a){return this.window.sessionStorage.setItem("monthlyIncomeWithdrawal",a),!0},a.prototype.removeMonthlyIncomeWithdrawal=function(){return this.window.sessionStorage.removeItem("monthlyIncomeWithdrawal"),!0},a.prototype.saveStartingYearsOfYears=function(a){if(a.length>0&&a[0]>a[1]){var b=a[0];a[0]=a[1],a[1]=b}return this.window.sessionStorage.setItem("startingYearsOfYears",a),!0},a.prototype.resetQuestion12SliderValues=function(){this.window.sessionStorage.removeItem("startingYearsOfYears"),this.window.sessionStorage.removeItem("sliderRiskModel12"),this.window.sessionStorage.removeItem("compoundGrowthnumberOfYears")},a.prototype.saveSelectedRiskProfile=function(a){return this.window.sessionStorage.setItem("SelectedRiskProfile",a),!0},a.prototype.saveCapacityBeforeSlider=function(a){return this.window.sessionStorage.setItem("capacityBeforeSlider",a),!0},a.prototype.saveWillingnessBeforeSlider=function(a){return this.window.sessionStorage.setItem("willingnessBeforeSlider",a),!0},a.prototype.getOldCalculatedRiskProfile=function(){return this.window.sessionStorage.getItem("oldCalculatedRiskProfile")},a.prototype.getOriginalCalculatedRiskProfile=function(){return this.window.sessionStorage.getItem("OriginalSelectedRiskProfile")},a.prototype.removeRiskResponse=function(a){this.window.sessionStorage.removeItem("lastRiskResponse"+a),this.window.sessionStorage.removeItem("question"+a)},a.prototype.saveQuestion=function(a){if(null!=this.window.sessionStorage.getItem("questions")&&void 0!=this.window.sessionStorage.getItem("questions")){var b=this.window.sessionStorage.getItem("questions");this.window.sessionStorage.setItem("questions",b+","+JSON.stringify(a))}else this.window.sessionStorage.setItem("questions",JSON.stringify(a));return!0},a.prototype.saveQuestionRiskModel=function(a,b){return this.window.sessionStorage.setItem("question"+a,JSON.stringify(b)),!0},a.prototype.saveJSONQuestion=function(a,b,c,d,e,f){return this.window.sessionStorage.setItem("JSONQuestion","["+a+b+c+d+e+f+"]"),!0},a.prototype.saveAccountInterface=function(a){return this.window.sessionStorage.setItem("accountTypeInterface",JSON.stringify(a)),!0},a.prototype.intAccountInterface=function(){var a={},b=this.window.sessionStorage.getItem("accountTypeInterface");if(null!=b&&"undefined"!=typeof b){var c,d=JSON.parse(b);return c="S1"==d.accountType||"IRA"==d.accountType||"LivingTrust"==d.accountType?d.accountSubType:d.accountType,a.accountType=c,a.isIncomeEligible=d.isIncomeEligible,a.isMuniEligible=d.isMuniEligible,a.taxOffer=d.taxOffer,a.SpouseSocialSecurityNumber=d.SpouseSocialSecurityNumber,a.SpouseLastName=d.SpouseLastName,a.SpouseDateOfBirth=d.SpouseDateOfBirth,a.incomeOffer=d.incomeOffer,a.muniOffer=d.muniOffer,a.isCalMuniEligible=d.isCalMuniEligible,a.californiaMunis=d.californiaMunis,a}},a.prototype.getstate=function(){var a;return null!=this.window.sessionStorage.getItem("accountOpen_address")&&(a=JSON.parse(this.window.sessionStorage.getItem("accountOpen_address")).State),a},a.prototype.getApplicationid=function(){return this.window.sessionStorage.getItem("ApplicationId")},a.prototype.setSelectedRiskProfile=function(a){this.window.sessionStorage.setItem("SelectedRiskProfile",a.toString()),null!=this.window.sessionStorage.getItem("RiskProfileforAdditonalQuestions")&&(this.window.sessionStorage.setItem("RiskProfileforAdditonalQuestions",this.window.sessionStorage.getItem("RiskProfileType")+" "+a),this.window.window.sessionStorage.setItem("RiskProfile",a.toString()))},a.prototype.setOriginalSelectedRiskProfile=function(a){this.window.window.sessionStorage.setItem("OriginalSelectedRiskProfile",a.toString())},a.prototype.getOriginalSelectedRiskProfile=function(){return this.$window.window.sessionStorage.getItem("OriginalSelectedRiskProfile")},a.prototype.removeOriginalSelectedRiskProfile=function(){this.$window.window.sessionStorage.removeItem("OriginalSelectedRiskProfile")},a.prototype.setRiskProfileforAdditonalQuestions=function(a){this.window.sessionStorage.setItem("RiskProfileforAdditonalQuestions",a.RiskProfileInformation.RiskProfileforAdditonalQuestions);var b=a.RiskProfileInformation.RiskProfileforAdditonalQuestions;this.window.sessionStorage.setItem("SelectedRiskProfile",b.match(/\d+$/)[0]);var c=a.RiskProfileInformation.CalculatedRiskProfile,d=c.split(" ");this.window.sessionStorage.setItem("CalculatedRiskProfile",d[d.length-1])},a.prototype.setVersionInfo=function(a){this.window.sessionStorage.setItem("VersionInfo",a)},a.prototype.navigateToLastbehavioralQuestions=function(a){this.window.sessionStorage.setItem("referrer","updateProfile"),this.window.sessionStorage.setItem("lastQuestionId",a)},a.prototype.setAccountTypeInLocalStorage=function(a,b){var c=JSON.stringify({accountType:a,accountSubType:b});this.window.sessionStorage.setItem("accountTypeInterface",c)},a.prototype.getSliderRiskModel11=function(){return this.window.window.sessionStorage.getItem("sliderRiskModel11")},a.prototype.removeSliderRiskModel11=function(){this.window.window.sessionStorage.removeItem("sliderRiskModel11")},a.prototype.removeSliderRisResponse11=function(){this.window.sessionStorage.removeItem("lastRiskResponse11")},a.prototype.removeCompoundGrowthannualContribution=function(){this.window.window.sessionStorage.removeItem("compoundGrowthannualContribution")},a.prototype.saveDisplaySystemMonthlyValue=function(){this.window.window.sessionStorage.setItem("displaySystemMonthlyValue","true")},a.prototype.getDisplaySystemMonthlyValue=function(){return this.window.window.sessionStorage.getItem("displaySystemMonthlyValue")},a.prototype.removeDisplaySystemMonthlyValue=function(){this.window.window.sessionStorage.removeItem("displaySystemMonthlyValue")},a.prototype.setTargetAmount=function(a){this.window.window.sessionStorage.setItem("TargetAmount",a)},a.$inject=["$q","hgCommonJs2nSvc","$http","hgContextSvc","$modal","hgGetStartedRouteChangeHandlerSvc","$window","$rootScope"],a}();a.enrollmentCommonSvc=b}(b=a.enrollment||(a.enrollment={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(b){var c=function(a){function b(b,c,d,e){var f=this;a.call(this,c,"DASHBOARD","GLOBAL"),this.$state=b,this.hgJs2nManagerSvc=c,this.contextSvc=d,this.portfolioSvc=e,this.commands={RefreshDashboardChartData:this.handleRefreshDashboardChartData,FetchPerformanceChartData:this.handleFetchPerformanceChartData,UpdatePerformanceData:this.handleUpdatePerformanceData,FetchActivityFeedData:this.handleFetchActivityFeedData},this.contextSvc.$rootScope.$on("ACCOUNT_ADDED",function(a,b){f.hgJs2nManagerSvc.registerEvent("accounts."+b.id,f.contextId,f.handleFetchAccountPerformanceChartData,f)})}return __extends(b,a),b.prototype.handleRefreshDashboardChartData=function(a,b,c){var d="Since Inception",e=null,f=null,g=c.portfolioSvc.getNativePerformanceChartData(d,e,f);g.then(function(b){c.hgJs2nManagerSvc.send("RefreshedDashboardChartDataEvent",a.CorrelationId,b,a.Context)}),g.catch(function(b){c.hgJs2nManagerSvc.send("RefreshedDashboardChartDataEvent",a.CorrelationId,null,a.Context)}),g.finally(function(){})},b.prototype.handleUpdatePerformanceData=function(a,b,c){var d=a.Data.dateRangeType,e=a.Data.start,f=a.Data.end,g=c.portfolioSvc.getNativePerformanceChartData(d,e,f);g.then(function(b){c.hgJs2nManagerSvc.send("RefreshedUpdatePerformanceDataEvent",a.CorrelationId,b,a.Context)}),g.catch(function(b){c.hgJs2nManagerSvc.send("RefreshedUpdatePerformanceDataEvent",a.CorrelationId,null,a.Context)}),g.finally(function(){})},b.prototype.handleFetchPerformanceChartData=function(a,b,c){var d=c.portfolioSvc.get(null);d.then(function(b){c.hgJs2nManagerSvc.send("RefreshedDashboardChartDataEvent",a.CorrelationId,b,a.Context)})},b.prototype.handleFetchAccountPerformanceChartData=function(a,b,c){c.contextSvc.setActiveAccountByPortfolioId(a.Type.split(".")[1]),c.contextSvc.device.isNativeAndroid()&&c.$state.go("charts"),c.hgJs2nManagerSvc.sendAck(a)},b.prototype.handleFetchActivityFeedData=function(a,b,c){var d=c.portfolioSvc.getActivityFeed(c.contextSvc.getActivePortfolioId());d.then(function(b){c.hgJs2nManagerSvc.send("FetchActivityFeedDataCompletedEvent",a.CorrelationId,b,a.Context)})},b.$inject=["$state","hgJs2nManagerSvc","hgContextSvc","hgPortfolioSvc"],b}(a.core.js2n.js2nServiceBase);b.portfolioJs2nSvc=c}(b=a.assets||(a.assets={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(a,b,c,d){this.q=a,this.http=b,this.contextSvc=c,this.dataContextSvc=d}return a.prototype.getPortfolioSettingsData=function(a){var b=this.contextSvc.getActivePortfolioId()?this.contextSvc.getActivePortfolioId():this.contextSvc.getMongoActiveAccount(),c=this.q.defer(),d=this.contextSvc.appConfig.clientApiUrl+"/me/accounts/"+b+"/accountsettings";a&&this.contextSvc.cache.removeItem(this.contextSvc.cache.cache,d);var e={method:"GET",url:d,headers:null};return this.http(e).success(function(a,b,d,e){c.resolve(a)}).error(function(a,b,d,e){c.reject(a)}),c.promise},a.prototype.savePortfolioSettingsData=function(a){var b,c=this.contextSvc.getActivePortfolioId(),d=this.q.defer();return b={dataServiceId:"HgCoreDataService",entitySet:"Accounts",where:"",expand:"",top:0,select:"",orderBy:"",params:null},this.http(this.dataContextSvc.buildOdataUpdateQueryRequest(b,c,JSON.stringify(a))).success(function(a,b,c,e){d.resolve(a)}).error(function(a,b,c,e){d.reject(a)}),d.promise},a.prototype.savePortfolioTLHData=function(a){var b=this.q.defer(),c=this.contextSvc.getActivePortfolioId();return this.http.post(this.contextSvc.appConfig.dashboardServiceApiUrl+"/portfolioprofile/"+c,JSON.stringify(a),{headers:{"Content-Type":"application/json"}}).success(function(a){b.resolve(a)}).error(function(){b.reject(!1)}).finally(function(){}),b.promise},a.$inject=["$q","$http","hgContextSvc","hgDataContextSvc"],a}();a.accountSettingsSvc=b}(b=a.assets||(a.assets={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(b){var c=function(a){function b(b,c,d,e,f,g){a.call(this,b,d,e,f),this.dataServiceUrl=this.getDataServiceConfig("HgEnrollmentService").url,this.window=c,this.rootScope=g}return __extends(b,a),b.prototype.createApplication=function(a){var b=this,c=this.q.defer(),d=this.contextSvc.appConfig.clientApiUrl+"/SuitabilityQuestions";return this.contextSvc.isIIP()&&(d+="?ProgramPin="+this.contextSvc.customization.getAdvisorProgram().ProgramPin),1==a&&this.contextSvc.cache.removeItem(this.contextSvc.cache.cache,d),this.http.get(d).success(function(a,d,e,f){var g,h;a&&(g=a.ApplicationId,h=a.VersionInfo),b.window.sessionStorage.getItem("ApplicationId")||b.window.sessionStorage.setItem("ApplicationId",g),b.window.sessionStorage.setItem("VersionInfo",h),c.resolve(a.Questions)}).error(function(a,b,d,e){c.reject(a)}),c.promise},b.prototype.saveAnswers=function(a,b){void 0===a&&(a=null);var c=this.q.defer(),d=a&&""!==a?"?qnsgrpid="+a:"";return 0!=this.checkProgramKeyInSession()&&this.http.post(this.contextSvc.appConfig.clientApiUrl+"/SuitabilityQuestionAnswers"+d,JSON.stringify(this.riskQuestionAnswer(b)),{headers:{Accept:"application/json"}}).success(function(){c.resolve(!0)}).error(function(){c.reject(!1)}).finally(function(){}),c.promise},b.prototype.getAnswers=function(a,b,c,d){var e,f=this.q.defer();e="updateProfile"===this.getReferrer()||d?this.contextSvc.appConfig.clientApiUrl+"/SuitabilityQuestions":this.contextSvc.appConfig.clientApiUrl+"/SuitabilityQuestionAnswers",b?e+="/"+b:a&&(e+="/"+a),1==c&&this.contextSvc.cache.removeItem(this.contextSvc.cache.cache,e);var g=this;return this.http({method:"GET",url:e}).success(function(a,b,c,d){"updateProfile"!=g.getReferrer()&&g.processQuestionsResponse(a),f.resolve(a)}).error(function(a,b,c,d){f.reject(a)}),f.promise},b.prototype.setupAccountOpen_AddressForUpdateProfile=function(a,b,c){var d=JSON.stringify({State:a}),e=JSON.stringify({accountType:b,accountSubType:c});this.window.sessionStorage.setItem("accountOpen_address",d),this.window.sessionStorage.setItem("accountTypeInterface",e)},b.prototype.getLoggedInStateCode=function(){var a=this.contextSvc.appConfig.enrollmentServiceApiUrl+"/StateResidence",b=this.q.defer();return this.http.get(a).success(function(a,c,d,e){b.resolve(a.StateCode)}).error(function(a,c,d,e){b.reject("Error status "+c)}),b.promise},b.prototype.getAnswersForAccount=function(a){var b=this.q.defer();return this.http({method:"GET",url:this.contextSvc.appConfig.clientApiUrl+"/SuitabilityQuestionAnswers?"+a}).success(function(a,c,d,e){b.resolve(a)}).error(function(a,c,d,e){b.reject(a)}),b.promise},b.prototype.setNewProfileFlow=function(){this.window.sessionStorage.setItem("referrer","newProfile")},b.prototype.setUpdateProfileFlow=function(){this.window.sessionStorage.setItem("referrer","updateProfile")},b.prototype.setGoalRiskProfileFlow=function(){this.window.sessionStorage.setItem("referrer","goalFlow")},b.prototype.getReferrer=function(){return this.window.sessionStorage.getItem("referrer")},b.prototype.removeReferrer=function(){this.window.sessionStorage.getItem("referrer")&&this.window.sessionStorage.removeItem("referrer")},b.prototype.removeUpdateProfile=function(){return this.window.sessionStorage.removeItem("lastQuestionId"),this.window.sessionStorage.removeItem("willingness"),this.window.sessionStorage.removeItem("capacity"),this.window.sessionStorage.removeItem("RiskProfile"),this.window.sessionStorage.removeItem("ApplicationId"),this.window.sessionStorage.removeItem("willingnessBeforeSlider"),this.window.sessionStorage.removeItem("capacityBeforeSlider"),this.window.sessionStorage.removeItem("questions"),this.window.sessionStorage.removeItem("lastRiskResponse1"),this.window.sessionStorage.removeItem("lastRiskResponse2"),this.window.sessionStorage.removeItem("lastRiskResponse3"),this.window.sessionStorage.removeItem("lastRiskResponse4"),this.window.sessionStorage.removeItem("lastRiskResponse5"),this.window.sessionStorage.removeItem("lastRiskResponse6"),this.window.sessionStorage.removeItem("lastRiskResponse7"),this.window.sessionStorage.removeItem("lastRiskResponse8"),this.window.sessionStorage.removeItem("lastRiskResponse9"),this.window.sessionStorage.removeItem("lastRiskResponse10"),this.window.sessionStorage.removeItem("lastRiskResponse11"),this.window.sessionStorage.removeItem("lastRiskResponse12"),this.window.sessionStorage.removeItem("question1"),this.window.sessionStorage.removeItem("question2"),this.window.sessionStorage.removeItem("question3"),this.window.sessionStorage.removeItem("question4"),this.window.sessionStorage.removeItem("question5"),this.window.sessionStorage.removeItem("question6"),this.window.sessionStorage.removeItem("question7"),this.window.sessionStorage.removeItem("sliderRiskModel8"),this.window.sessionStorage.removeItem("sliderRiskModel9"),this.window.sessionStorage.removeItem("sliderRiskModel10"),this.window.sessionStorage.removeItem("sliderRiskModel11"),this.window.sessionStorage.removeItem("sliderRiskModel12"),this.window.sessionStorage.removeItem("oldCalculatedRiskProfile"),this.window.sessionStorage.removeItem("compoundGrowthAge"),this.window.sessionStorage.removeItem("compoundGrowthannualContribution"),this.window.sessionStorage.removeItem("compoundGrowthnumberOfYears"),this.window.sessionStorage.removeItem("compoundGrowthstartingValue"),this.window.sessionStorage.removeItem("getGrowthannualStartingInYearsWeightage"),this.window.sessionStorage.removeItem("growthannualYearsWeightage"),this.window.sessionStorage.removeItem("investmentFluctuating"),this.window.sessionStorage.removeItem("investmentFluctuatingValue"),this.window.sessionStorage.removeItem("startingYearsOfYears"),this.window.sessionStorage.removeItem("JSONQuestion"),this.window.sessionStorage.removeItem("riskProfileInfo"),this.window.sessionStorage.removeItem("webLoginDetails"),this.window.sessionStorage.removeItem("GrowthannualContributionWeightage"),this.window.sessionStorage.removeItem("GrowthstartingValueWeightage"),this.window.sessionStorage.removeItem("accountOpen_address"),this.window.sessionStorage.removeItem("newAddressState"),this.window.sessionStorage.removeItem("SelectedRiskProfile"),this.window.sessionStorage.removeItem("CalculatedRiskProfile"),this.window.sessionStorage.removeItem("RiskProfileforAdditonalQuestions"),this.window.sessionStorage.removeItem("RiskProfileType"),this.window.sessionStorage.removeItem("primaryApplicant"),this.window.sessionStorage.removeItem("accountTypeInterface"),this.window.sessionStorage.removeItem("tempRiskProfile"),this.window.sessionStorage.removeItem("goalFlow"),this.window.sessionStorage.removeItem("OriginalSelectedRiskProfile"),this.window.sessionStorage.removeItem("monthlyIncomeWithdrawal"),this.window.sessionStorage.removeItem("initialCompoundGrowthstartingValue"),this.window.sessionStorage.removeItem("lastRiskResponse14"),this.window.sessionStorage.removeItem("oneTimeContributionAmount"),this.window.sessionStorage.removeItem("sliderRiskModel14"),this.window.sessionStorage.removeItem("sliderRiskModel13"),this.window.sessionStorage.removeItem("lastRiskResponse13"),this.window.sessionStorage.removeItem("PromoCodesList"),this.window.sessionStorage.removeItem("TargetAmount"),!0},b.prototype.setFirstTimeFlag=function(){return this.contextSvc.window.sessionStorage.getItem("accountOpenFirstTime")?(this.contextSvc.window.sessionStorage.setItem("accountOpenFirstTime","no"),!1):(this.contextSvc.window.sessionStorage.setItem("accountOpenFirstTime","yes"),!0)},b.prototype.peekFirstTimeFlag=function(){return"yes"==this.window.sessionStorage.getItem("accountOpenFirstTime")},b.prototype.getAccountType=function(a){var b=this.contextSvc.getActiveAccount().acctType?this.contextSvc.getActiveAccount().acctType:a.AccountReference&&a.AccountReference.AccountType?a.AccountReference.AccountType:"S1";return b.toUpperCase()},b.prototype.processQuestionsResponse=function(a,b){var c=this;if(!a||400!=a.ReturnCode&&10!=a.ReturnCode){var d,e=1,f=[],g=0,h=0,i=[],j=[],k=[];if(b&&!this.isUnfundedOrUninvested()){a.Questions[8].Answers.forEach(function(a){a.IsSelected=!1});var l=this.contextSvc.getActiveAccount()?this.contextSvc.getActiveAccount().balance:"0",m=parseFloat(l.replace(/[^0-9-.]/g,"")),n=m>25e3?1:0;a.Questions[8].Answers[n].IsSelected=!0,a.Questions[8].Answers[n].SelectedValue=m.toString()}_.each(a.Questions,function(a){a&&a.Answers&&_.each(a.Answers,function(b){if(b.IsSelected){e=a.QuestionId;var l={};b.AnswerId?l={AnswerId:b.AnswerId}:b.AnswerText&&(l={AnswerId:b.AnswerText});var m={};"8"==a.QuestionId?b.AnswerText&&(m={AnswerText:b.AnswerText,SelectedValue:b.AnswerText}):b.AnswerId?m={AnswerId:b.AnswerId,SelectedValue:b.SelectedValue}:b.AnswerText&&(m={AnswerId:b.AnswerText,SelectedValue:b.SelectedValue});var n={SelectedAnswers:[l],QuestionId:a.QuestionId},o={SelectedAnswers:[m],QuestionId:a.QuestionId};if(f.push(n),d=d?d+","+JSON.stringify(n):JSON.stringify(n),a.QuestionId<=7)c.window.sessionStorage.setItem("question"+a.QuestionId,JSON.stringify(n));else if(a.QuestionId>7&&a.QuestionId<=11)c.window.sessionStorage.setItem("sliderRiskModel"+a.QuestionId,JSON.stringify(o));else if(12==a.QuestionId){var p=[];p.push(m);var q,r=c.window.sessionStorage.getItem("question1");if(null!=r){var s=JSON.parse(r);q=null!=s&&"5"==s.SelectedAnswers[0].AnswerId}q?i.push({AnswerId:p[0].AnswerId,SelectedValue:"0"},{AnswerId:p[0].AnswerId,SelectedValue:p[0].SelectedValue}):i.push({AnswerId:p[0].AnswerId,SelectedValue:p[0].SelectedValue},{AnswerId:p[0].AnswerId,SelectedValue:"0"});var t={SelectedAnswers:i,QuestionId:a.QuestionId};c.window.sessionStorage.setItem("sliderRiskModel"+a.QuestionId,JSON.stringify(t))}if(8==a.QuestionId&&c.window.sessionStorage.setItem("compoundGrowthAge",b.AnswerText),9==a.QuestionId&&(c.window.sessionStorage.setItem("compoundGrowthstartingValue",b.SelectedValue),c.window.sessionStorage.setItem("GrowthstartingValueWeightage",b.Weightage)),10==a.QuestionId&&(c.window.sessionStorage.setItem("investmentFluctuatingValue",b.SelectedValue),c.window.sessionStorage.setItem("investmentFluctuating",b.Weightage)),11==a.QuestionId&&(c.window.sessionStorage.setItem("compoundGrowthannualContribution",b.SelectedValue),c.window.sessionStorage.setItem("GrowthannualContributionWeightage",b.Weightage)),12==a.QuestionId){var u=null==b.SelectedValue?1:b.SelectedValue;if(j.push(u),angular.isDefined(j[1])){Number(j[1])+Number(j[0]);c.window.sessionStorage.setItem("startingYearsOfYears","0,"+j[1])}else c.window.sessionStorage.setItem("startingYearsOfYears","0,"+j[0]);c.window.sessionStorage.setItem("compoundGrowthnumberOfYears",j[0])}var v;if(12==a.QuestionId){var w;k.push(b.Weightage),w=k[0],c.window.sessionStorage.setItem("getGrowthannualStartingInYearsWeightage",k[0]),angular.isDefined(k[1])&&(w=k[0]+k[1],c.window.sessionStorage.setItem("growthannualYearsWeightage",k[1])),v={lastQuestionId:a.QuestionId,lastQuestionType:a.QuestionType,lastWeightage:w,indexAction:a.QuestionId-1}}else v={lastQuestionId:a.QuestionId,lastQuestionType:a.QuestionType,lastWeightage:b.Weightage,indexAction:a.QuestionId-1};c.window.sessionStorage.setItem("lastRiskResponse"+a.QuestionId,JSON.stringify(v)),"C"==a.QuestionType&&(g+=b.Weightage),"W"==a.QuestionType&&(h+=b.Weightage)}})}),e>8&&(e=8);var o={lastQuestionId:e};_.extend(a,o),this.window.sessionStorage.setItem("capacity",g),this.window.sessionStorage.setItem("willingness",h);var p=a.ApplicationId;this.window.sessionStorage.setItem("ApplicationId",p);var q=this.window.sessionStorage.getItem("question4");if(null!=q&&("1"==JSON.parse(q).SelectedAnswers[0].AnswerId?null!=this.window.sessionStorage.getItem("question6")&&(this.window.sessionStorage.removeItem("question6"),this.window.sessionStorage.removeItem("lastRiskResponse6")):null!=this.window.sessionStorage.getItem("question5")&&(this.window.sessionStorage.removeItem("question5"),this.window.sessionStorage.removeItem("lastRiskResponse5"))),null!=a.RiskProfileInformation){var r=a.RiskProfileInformation.CalculatedRiskProfile,s=r.split(" ");this.window.sessionStorage.setItem("oldCalculatedRiskProfile",s[s.length-1]);
var t=a.RiskProfileInformation.SelectedRiskProfile,u=t.split(" ");if(b)null!=a.RiskProfileInformation.RiskProfileforAdditonalQuestions?(u=a.RiskProfileInformation.RiskProfileforAdditonalQuestions.split(" "),this.window.sessionStorage.setItem("OriginalSelectedRiskProfile",u[u.length-1])):this.window.sessionStorage.setItem("OriginalSelectedRiskProfile",u[u.length-1]);else if(this.window.sessionStorage.setItem("SelectedRiskProfile",u[u.length-1]),null!=a.RiskProfileInformation.RiskProfileforAdditonalQuestions){var v=a.RiskProfileInformation.RiskProfileforAdditonalQuestions,w=v.match(/\D+ /).toString();this.window.sessionStorage.setItem("RiskProfileType",w.replace(/\s*$/,"")),this.window.sessionStorage.setItem("RiskProfile",v.match(/\d+$/)[0]),this.window.sessionStorage.setItem("CalculatedRiskProfile",u[u.length-1])}else this.window.sessionStorage.setItem("RiskProfile",s[s.length-1]),this.window.sessionStorage.setItem("CalculatedRiskProfile",s[s.length-1])}if(b){if(null!=a.RiskProfileInformation){var x={isIncomeEligible:a.RiskProfileInformation.IsIncomeEligible,isMuniEligible:a.RiskProfileInformation.IsMuniEligible,isCalMuniEligible:a.RiskProfileInformation.IsCalMuniEligible,taxOffer:a.RiskProfileInformation.IsTaxLossHarvesting,SpouseSocialSecurityNumber:a.RiskProfileInformation.SpouseSocialSecurityNumber,SpouseLastName:a.RiskProfileInformation.SpouseLastName,SpouseDateOfBirth:a.RiskProfileInformation.SpouseDateOfBirth,incomeOffer:a.RiskProfileInformation.IsIncome,muniOffer:a.RiskProfileInformation.IsMuni,californiaMunis:a.RiskProfileInformation.IsCalMuni};this.window.sessionStorage.setItem("riskProfileInfo",JSON.stringify(x))}this.window.sessionStorage.setItem("VersionInfo",a.VersionInfo),this.window.sessionStorage.setItem("lastQuestionId",1)}else this.window.sessionStorage.setItem("lastQuestionId",e);this.peekFirstTimeFlag()&&this.window.sessionStorage.setItem("lastQuestionId","1"),this.window.sessionStorage.setItem("questions",d),this.window.sessionStorage.setItem("JSONQuestion",JSON.stringify(f))}},b.prototype.riskProfileFinalCalculation=function(a){var b=0;b=void 0==a?12:a;for(var c="",d=[],e=1;e<=b;e++)null!=this.window.sessionStorage.getItem("lastRiskResponse"+e)&&(c+=1==e?this.window.sessionStorage.getItem("lastRiskResponse"+e):","+this.window.sessionStorage.getItem("lastRiskResponse"+e));d=JSON.parse("["+c+"]");for(var f=0,g=0,h=0;h<d.length;h++)"W"==d[h].lastQuestionType?void 0!=d[h].lastWeightage&&(f=d[h].lastWeightage+f):g=Number(d[h].lastWeightage)+g;var i={Willingness:f,Capacity:g};return i},b.prototype.raiseCommonErrorMsg=function(){var a="";return a=this.rootScope.session&&1==this.rootScope.session.isLoggedIn?"An unexpected error occurred.  Please logout and then select Start a New Portfolio.":"An unexpected error occurred.  Please select the Get Started button from the beginning.",this.rootScope.raiseMessage(a)},b.prototype.checkProgramKeyInSession=function(){if(1==this.rootScope.isIIP&&""==this.contextSvc.customization.getProgramPin())return this.raiseCommonErrorMsg(),!1},b.prototype.riskQuestionAnswer=function(a){var b,c,d,e,f,g,h;b=null!=this.window.sessionStorage.getItem("sliderRiskModel8")?","+this.window.sessionStorage.getItem("sliderRiskModel8"):",{}",c=null!=this.window.sessionStorage.getItem("sliderRiskModel9")?","+this.window.sessionStorage.getItem("sliderRiskModel9"):",{}",d=null!=this.window.sessionStorage.getItem("sliderRiskModel10")?","+this.window.sessionStorage.getItem("sliderRiskModel10"):",{}",e=null!=this.window.sessionStorage.getItem("sliderRiskModel11")?","+this.window.sessionStorage.getItem("sliderRiskModel11"):",{}",f=null!=this.window.sessionStorage.getItem("sliderRiskModel12")?","+this.window.sessionStorage.getItem("sliderRiskModel12"):",{}",g=null!=this.window.sessionStorage.getItem("sliderRiskModel13")?","+this.window.sessionStorage.getItem("sliderRiskModel13"):",{}",h=null!=this.window.sessionStorage.getItem("sliderRiskModel14")?","+this.window.sessionStorage.getItem("sliderRiskModel14"):",{}";var i,j,k,l,m,n;this.window.sessionStorage.getItem("questions");if(i=null!=this.window.sessionStorage.getItem("question1")?this.window.sessionStorage.getItem("question1"):"{}",j=null!=this.window.sessionStorage.getItem("question2")?","+this.window.sessionStorage.getItem("question2"):",{}",k=null!=this.window.sessionStorage.getItem("question3")?","+this.window.sessionStorage.getItem("question3"):",{}",null!=this.window.sessionStorage.getItem("question4")){l=","+this.window.sessionStorage.getItem("question4");var o=JSON.parse(this.window.sessionStorage.getItem("question4")),p=o.SelectedAnswers[0].AnswerId;m=1==p?null!=this.window.sessionStorage.getItem("question5")?","+this.window.sessionStorage.getItem("question5"):",{}":null!=this.window.sessionStorage.getItem("question6")?","+this.window.sessionStorage.getItem("question6"):",{}"}else l=",{}",m=",{}";n=null!=this.window.sessionStorage.getItem("question7")?","+this.window.sessionStorage.getItem("question7"):",{}";var q,r,s,t,u,v,w,x,y,z,A,B,C=(this.window.sessionStorage.setItem("JSONQuestion","["+i+j+k+l+m+n+b+c+d+e+f+g+h+"]"),JSON.parse(this.window.sessionStorage.getItem("JSONQuestion"))),D=this.window.sessionStorage.getItem("ApplicationId"),E=this.window.sessionStorage.getItem("VersionInfo"),F=this.window.sessionStorage.getItem("CalculatedRiskProfile");this.window.sessionStorage.getItem("RiskProfileType");if(null!=this.window.sessionStorage.getItem("accountTypeInterface")||null!=this.window.sessionStorage.getItem("riskProfileInfo")){var G;null!=this.window.sessionStorage.getItem("accountTypeInterface")&&"goalFlow"!=this.window.sessionStorage.getItem("referrer")?G=JSON.parse(this.window.sessionStorage.getItem("accountTypeInterface")):null!=this.window.sessionStorage.getItem("riskProfileInfo")&&(G=JSON.parse(this.window.sessionStorage.getItem("riskProfileInfo"))),q=G.incomeOffer,r=G.muniOffer,s="true"==G.californiaMunis&&Boolean(G.californiaMunis),t=G.taxOffer,u=G.SpouseSocialSecurityNumber,v=G.SpouseLastName,w=G.SpouseDateOfBirth,z=G.isIncomeEligible,A=G.isMuniEligible,B=G.isCalMuniEligible}x=this.window.sessionStorage.getItem("SelectedRiskProfile")?"Mercury - Return "+this.window.sessionStorage.getItem("SelectedRiskProfile"):"Mercury - Return "+F,this.window.sessionStorage.getItem("RiskProfileforAdditonalQuestions")&&(y=this.window.sessionStorage.getItem("RiskProfileforAdditonalQuestions"));var H;if(null!=this.window.sessionStorage.getItem("accountTypeInterface")){H=JSON.parse(this.window.sessionStorage.getItem("accountTypeInterface"));var I;I="JointTenants"==H.accountSubType||"CommunityProperty"==H.accountSubType||"CommonTenants"==H.accountSubType||"Two Trustee"==H.accountSubType?"true":"false"}else H={};var J=[];if(null!=this.window.sessionStorage.getItem("PromoCodesList"))if(this.window.sessionStorage.getItem("PromoCodesList").indexOf(",")!=-1){var K=this.window.sessionStorage.getItem("PromoCodesList").split(",");J=K}else J.push(this.window.sessionStorage.getItem("PromoCodesList"));var L=0;a&&a.target&&this.contextSvc.isSIP()&&this.contextSvc.isBigweb()?L=a.target.amount:null!=this.window.sessionStorage.getItem("monthlyIncomeWithdrawal")&&this.contextSvc.isSIP()&&this.contextSvc.isBigweb()?L=Number(this.window.sessionStorage.getItem("monthlyIncomeWithdrawal")):null!=this.window.sessionStorage.getItem("TargetAmount")&&this.contextSvc.isSIP()&&this.contextSvc.isBigweb()&&(L=Number(this.window.sessionStorage.getItem("TargetAmount")));var M={ApplicationId:D,VersionInfo:E,IsRiskProfileCompleted:!0,Questions:C,RiskProfileInformation:{CalculatedRiskProfile:"Mercury - Return "+F,SelectedRiskProfile:x,RiskProfileforAdditonalQuestions:y?y:"",IsIncomeEligible:z,IsMuniEligible:A,IsCalMuniEligible:B,IsIncome:q,IsMuni:r,IsCalMuni:s,IsTaxLossHarvesting:t,SpouseSocialSecurityNumber:u,SpouseLastName:v,SpouseDateOfBirth:w,PromoCodesList:J,TargetAmount:L},AccountReference:{AccountType:H.accountType,AccountSubType:H.accountSubType,IsJoint:I,AccountTitle:H.accountSubType}};return M},b.prototype.riskProfileMismatchErrorLog=function(){var a=this.q.defer(),b=this.window.sessionStorage.getItem("ApplicationId"),c=new Date,d=c.getTime().toString(),e=this.contextSvc.appConfig.accountOpenServiceApiUrl+"/ao/ce/ping?adHocLog=1&error=riskModelMismatch&appId="+b+"&date="+d;return this.http.get(e).success(function(b){a.resolve(b)}).error(function(){a.reject(!1)}).finally(function(){}),a.promise},b.prototype.getAddressState=function(){return this.window.sessionStorage.getItem("newAddressState")},b.prototype.isUnfundedOrUninvested=function(){var a;return this.contextSvc.activeAccount?a=this.contextSvc.activeAccount:(this.contextSvc.processAccounts(this.contextSvc.getSessionData()),a=this.contextSvc.getActiveAccount()),!(!a||!a.accountStatus||"NotFunded"!=a.accountStatus&&"Invested"===a.accountStatus)},b.prototype.redrawCompoundGrowthChart=function(a,b,c,d){for(var e=[a.startingValue],f=[a.startingValue],g=a.startingValue,h=a.startingValue,i=([a.age.toString()],a.age+a.numberOfYears,0);i<a.numberOfYears;i++)if(g=g*b+a.annualContribution,h=h*c+a.annualContribution,i==a.numberOfYears-1&&1!==a.numberOfYears){var j={x:i,y:g},k={x:i,y:h};e.push(j),f.push(k)}else if(1===a.numberOfYears){var j={x:a.numberOfYears,y:g},k={x:a.numberOfYears,y:h};e.push(j),f.push(k)}else{var j={x:i,y:g},k={x:i,y:h};e.push(j),f.push(k)}var l={label:"Growth with high rate",fillColor:{linearGradient:[0,0,0,500],stops:[[0,d.lineColor],[1,d.gradient]]},color:d.lineColor,lineWidth:3,data:e},m={label:"Growth with high rate",fillColor:{linearGradient:[0,0,0,500],stops:[[0,d.lineColor],[1,d.gradient]]},color:d.lineColor,lineWidth:3,data:f,type:"line"},n={showGridLines:!0,showXLabels:!1,xMinValue:void 0,xMaxValue:void 0,yAxisLocation:0,backgroundColor:d.background,IXAxisOption:{}};this.bindDataLabel(e,!1,d),this.bindDataLabel(f,!0,d);var o={prefSeries1:l,prefSeries2:m};return{performanceChartSeries:o,performanceChartOptions:n}},b.prototype.bindDataLabel=function(a,b,c){a[a.length-1].dataLabels={useHTML:!0,enabled:!0,borderRadius:5,borderWidth:1,borderColor:c.borderColor,color:c.textColor,backgroundColor:c.labelBackground,align:"right",y:25,formatter:function(){return b?"<div class='chart-tooltip'><b class='text-bold-17'>"+this.y.toFixed(2)+"</b><br/><span class='text-regular-15'>at 0% annual growth</span></div>":"<div class='chart-tooltip'><b class='text-bold-17'>"+this.y.toFixed(2)+"</b><br/><span class='text-regular-15'>at +6% annual growth</span></div>"}}},b.prototype.isUnfunded=function(){var a;if(this.contextSvc.activeAccount)a=this.contextSvc.activeAccount;else{var b=this.contextSvc.getSessionData();if(b&&!b.isLoggedIn)return!0;this.contextSvc.processAccounts(b),a=this.contextSvc.getActiveAccount()}return!(!a||!a.accountStatus||"NotFunded"!=a.accountStatus)},b.$inject=["$q","$window","$timeout","$http","hgContextSvc","$rootScope"],b}(a.common.dataContextSvc);b.suitabilityQuestionsSvc=c}(b=a.enrollment||(a.enrollment={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(){this.routes=[],this.routes.push(this.createGetStarted()),this.routes.push(this.createGetStartedModal()),this.routes.push(this.createBehavioralQuestions()),this.routes.push(this.createPlanRecommendation()),this.routes.push(this.createPlanConfirmation()),this.routes.push(this.createAccountopenQuestions()),this.routes.push(this.createAddtOfferings()),this.routes.push(this.createAccountopenAccountType()),this.routes.push(this.createPortfolioConfirmation())}return a.prototype.createGetStarted=function(){return{key:"getStarted",route:{url:"/getStarted",templateUrl:"templates/enrollment/getStarted.html",controller:"hgGetStartedCtrl",publicAccess:!0,pageTitle:"Get Started"}}},a.prototype.createGetStartedModal=function(){return{key:"getStartedModal",route:{url:"/getStartedModal",templateUrl:"templates/app/modalBackdrop.html",controller:["$scope","hgEnrollmentCommonSvc",function(a,b){b.getStartedModal()}],publicAccess:!0}}},a.prototype.createBehavioralQuestions=function(){return{key:"behavioralQuestions",route:{url:"/behavioralQuestions/:GroupID",templateUrl:"templates/enrollment/questions.html",controller:"hgEnrollmentCtrl",publicAccess:!0,pageTitle:"Enrollment Behavioral Questions",resolve:{GroupID:["$stateParams",function(a){return a.GroupID}]}}}},a.prototype.createPlanRecommendation=function(){return{key:"planRecommendation",route:{url:"/planRecommendation",templateUrl:"templates/enrollment/plan-recommendation.html",controller:"hgEnrollmentCtrl",publicAccess:!0,pageTitle:"Portfolio Plan Recommendation"}}},a.prototype.createPlanConfirmation=function(){return{key:"planConfirmation",route:{url:"/planConfirmation",templateUrl:"templates/enrollment/plan-recommendation.html",controller:"hgEnrollmentCtrl",publicAccess:!0,pageTitle:"Portfolio Plan Confirmation"}}},a.prototype.createAccountopenQuestions=function(){return{key:"accountopen.questions",route:{url:"/questions",templateUrl:"templates/enrollment/questions.html",publicAccess:!0}}},a.prototype.createAddtOfferings=function(){return{key:"accountopen.addtOfferings",route:{url:"/addtOfferings",templateUrl:"templates/enrollment/addtOfferings.html",controller:"hgEnrollmentCtrl",publicAccess:!0,pageTitle:"Additional Offerings"}}},a.prototype.createAccountopenAccountType=function(){return{key:"accountopen.accountType",route:{url:"/accountType",templateUrl:"templates/enrollment/accountType.html",controller:"hgEnrollmentCtrl",publicAccess:!0,pageTitle:"Account Type"}}},a.prototype.createPortfolioConfirmation=function(){return{key:"portfolioConfirmation",route:{url:"/portfolioConfirmation",templateUrl:"templates/enrollment/portfolioConfirmation.html",controller:"hgEnrollmentCtrl",publicAccess:!0,pageTitle:"Update Portfolio Confirmation"}}},a}();a.enrollmentRouteRegistry=b}(b=a.enrollment||(a.enrollment={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(a,b,c,d,e,f,g,h){this.$q=a,this.$rootScope=b,this.$timeout=c,this.$state=d,this.hgRouteService=e,this.hgContextSvc=f,this.hgManagedVersionSvc=g,this.hgAuthJs2nSvc=h,this.firstRun=!0,this.routeKey="getStarted",this.hgRouteService.registerHandler(this)}return a.prototype.go=function(a,b,c,d){a==this.hgContextSvc.appConfig.defaultSecureRouteState&&this.hgContextSvc.device.isNative()?this.goImpl(a,b,c,d):this.hgContextSvc.device.isNativeIOS()?this.goImpl(a,b,c,d):this.goImpl(a,b,c,d)},a.prototype.goImpl=function(a,b,c,d){var e=this;this.hgContextSvc.device.isSmallScreen()&&"none"!=d?(this.$rootScope.animateStyle=d||"slide-left",this.$timeout(function(){e.$state.go(a,b,c),e.$timeout(function(){e.$rootScope.animateStyle=""},1e3)},100)):(this.$rootScope.animateStyle="",this.$state.go(a,b,c))},a.prototype.start=function(a){var b=this.$q.defer();return this.hgContextSvc.device.isNative()?this.hgManagedVersionSvc.upgradeNeeded()&&(a.event.preventDefault(),this.hgAuthJs2nSvc.dismissGettingStarted()):this.hgContextSvc.device.isLargeScreen()&&location.href.indexOf("?PromoCodesList")==-1&&(a.event.preventDefault(),this.go("getStartedModal",null,null,"none")),b.resolve(!0),b.promise},a.prototype.success=function(a){var b=this.$q.defer();return b.resolve(!0),b.promise},a.$inject=["$q","$rootScope","$timeout","$state","hgRouteService","hgContextSvc","hgManagedVersionSvc","hgAuthJs2nSvc"],a}();a.enrollmentGetStartedRouteChangeHandlerSvc=b}(b=a.enrollment||(a.enrollment={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(a,b,c){this.q=a,this.http=b,this.contextSvc=c}return a.prototype.getUsersAccounts=function(){var a=this.q.defer();return this.http({method:"GET",url:this.contextSvc.appConfig.clientApiUrl+"/transfers/accounts"}).success(function(b,c,d,e){a.resolve(b)}).error(function(b,c,d,e){a.reject(b)}),a.promise},a.prototype.postDepositCheckData=function(a,b){var c=this.q.defer();return this.http({method:"put",url:this.contextSvc.appConfig.clientApiUrl+"/rdc/deposits/"+a,data:b}).success(function(a,b,d,e){c.resolve(a)}).error(function(a,b,d,e){c.reject(a)}),c.promise},a.prototype.initializeRemoteCheckDeposit=function(){var a=this.q.defer();return this.http.post(this.contextSvc.appConfig.clientApiUrl+"/rdc/deposits",{type:"remoteDeposit"},{headers:{"Content-Type":"application/json"}}).success(function(b){a.resolve(b)}).error(function(){a.reject(!1)}),a.promise},a.prototype.setHgAccounts=function(a,b){var c=new Array;return b.length>0&&angular.forEach(a,function(d,e){var f=_.where(b,{brkrAcctId:a[e].RDCAccountId});1==f.length&&(a[e].RDCAccountNickName=f[0].name,c.push(a[e]))}),c},a}();a.checkDepositSvc=b}(b=a.checkDepositMod||(a.checkDepositMod={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(){this.routes=[],this.routes.push(this.editTransactions()),this.routes.push(this.createTransfer()),this.routes.push(this.createTransferSetup()),this.routes.push(this.createEditTransferSetup()),this.routes.push(this.createTWEEditTransferSetup()),this.routes.push(this.createTransferConfirmation()),this.routes.push(this.createTransferAcknowledgement()),this.routes.push(this.createMoveMoney()),this.routes.push(this.createMoveMoneyLaunch()),this.routes.push(this.createExternalAccount()),this.routes.push(this.createExternalAccountLaunch()),this.routes.push(this.createVerifyExternalAccount()),this.routes.push(this.createExternalAccountSetup()),this.routes.push(this.createVerifyYourAccount()),this.routes.push(this.createAccountVerification()),this.routes.push(this.createExternalAccountAcknowledgement()),this.routes.push(this.createTrialDeposits()),this.routes.push(this.createTrialDepositsVerification()),this.routes.push(this.createTrialDepositsInitiation()),this.routes.push(this.createEditTransferSetupWithGoalMMData()),this.routes.push(this.createTransferGoalMMConfirmation()),this.routes.push(this.createTransferGoalMMAcknowledgement()),this.routes.push(this.createMoveMoneyMessage()),this.routes.push(this.createExternalAccountLogin()),this.routes.push(this.createExternalAccountMFAVerification()),this.routes.push(this.createMoveMoneyBlankSreen()),this.routes.push(this.createExternalAccountError())}return a.prototype.editTransactions=function(){return{key:"moveMoney.edit",route:{url:"/editTransactions",templateUrl:"templates/moveMoney/editTransactions.html",controller:"editTransactionCtrl",controllerAs:"mainViewModel",pageTitle:"Edit Transactions",publicAccess:!1,nativeAndroid:!1,nativeIos:!1,navigationConfiguration:{stateId:"moveMoney.edit",back:"charts.goal.goalMain",dismiss:"charts.goal.goalMain"}}}},a.prototype.createMoveMoneyBlankSreen=function(){return{key:"moveMoneyBlank",route:{url:"/moveMoneyBlank",templateUrl:"templates/app/blank.html",nativeIos:!0}}},a.prototype.createMoveMoneyMessage=function(){return{key:"moveMoneyMessage",route:{url:"/moveMoneyMessage",templateUrl:"templates/moveMoney/moveMoneyMessage.html",controller:"hgMoveMoneyMessageCtrl"}}},a.prototype.createTransfer=function(){return{key:"moveMoney.funding",route:{url:"/funding",templateUrl:"templates/funding/deposit.html",controller:"hgFundingCtrl",pageTitle:"Funding Deposit",abstract:!0}}},a.prototype.createTransferSetup=function(){return{key:"moveMoney.funding.transferSetup",route:{url:"/transferSetup",templateUrl:"templates/funding/transferSetup.html",pageTitle:"Funding Transfer Setup"}}},a.prototype.createEditTransferSetup=function(){return{key:"moveMoney.funding.transferSetup.edit",route:{url:"/transferEdit",templateUrl:"templates/funding/transferSetup.html",pageTitle:"Funding Transfer Setup",navigationConfiguration:{stateId:"moveMoney.funding.transferSetup.edit",back:"hide",dismiss:"moveMoney.edit"}}}},a.prototype.createEditTransferSetupWithGoalMMData=function(){return{key:"moveMoney.funding.transferSetup.editTransferGoalMMData",route:{url:"/transferEditGoal",templateUrl:"templates/funding/transferSetup.html",pageTitle:"Funding Transfer Setup",navigationConfiguration:{stateId:"moveMoney.funding.transferSetup.editTransferGoalMMData",back:"hide",dismiss:"charts.goal.goalMain"}}}},a.prototype.createTWEEditTransferSetup=function(){return{key:"moveMoney.funding.TWEedit",route:{url:"/TWEedit",templateUrl:"templates/funding/TWEedit.html",pageTitle:"Funding Transfer Setup"}}},a.prototype.createTransferConfirmation=function(){return{key:"moveMoney.funding.transferConfirmation",route:{url:"/transferConfirmation",templateUrl:"templates/funding/transferConfirmation.html",pageTitle:"Funding Transfer Confirmation"}}},a.prototype.createTransferGoalMMConfirmation=function(){return{key:"moveMoney.funding.transferGoalMMConfirmation",route:{url:"/transferGoalMMConfirmation",templateUrl:"templates/funding/transferConfirmation.html",pageTitle:"Funding Transfer Confirmation"}}},a.prototype.createTransferAcknowledgement=function(){return{key:"moveMoney.funding.transferAcknowledgement",route:{url:"/transferAcknowledgement",templateUrl:"templates/funding/transferAcknowledgement.html",pageTitle:"Funding Transfer Acknowledgement"}}},a.prototype.createTransferGoalMMAcknowledgement=function(){return{key:"moveMoney.funding.transferGoalMMAcknowledgement",route:{url:"/transferGoalMMAcknowledgement",templateUrl:"templates/funding/transferAcknowledgement.html",pageTitle:"Funding Transfer Acknowledgement"}}},a.prototype.createMoveMoney=function(){return{key:"moveMoney",route:{url:"/moveMoney",templateUrl:"templates/moveMoney/moveMoney.html",pageTitle:"Funding Transfer Acknowledgement",abstract:!0,controller:"hgMoveMoneyCtrl"}}},a.prototype.createMoveMoneyLaunch=function(){return{key:"moveMoney.moveMoneyLaunch",route:{url:"/moveMoneyLaunch",templateUrl:"templates/moveMoney/moveMoneyLaunch.html"}}},a.prototype.createExternalAccount=function(){return{key:"externalAccount",route:{url:"/moveMoneyLaunch",templateUrl:"templates/externalAccount/transfer.html",abstract:!0,controller:"hgAEATransferCtrl",controllerAs:"vm"}}},a.prototype.createExternalAccountLaunch=function(){return{key:"externalAccount.externalAccountLaunch",route:{url:"/externalAccount",templateUrl:"templates/externalAccount/externalAccountLaunch.html"}}},a.prototype.createVerifyExternalAccount=function(){return{key:"externalAccount.verifyExternalAccount",route:{url:"/externalaccountverification",templateUrl:"templates/externalAccount/verifyExternalAccount.html"}}},a.prototype.createExternalAccountSetup=function(){return{key:"externalAccount.externalAccountSetup",route:{url:"/externalaccountsetup",templateUrl:"templates/externalAccount/externalAccountSetup.html"}}},a.prototype.createVerifyYourAccount=function(){return{key:"externalAccount.verifyYourAccount",route:{url:"/verifyYourAccount",templateUrl:"templates/externalAccount/verifyYourAccount.html"}}},a.prototype.createAccountVerification=function(){return{key:"externalAccount.accountVerification",route:{url:"/accountVerification",templateUrl:"templates/externalAccount/accountVerification.html"}}},a.prototype.createExternalAccountAcknowledgement=function(){return{key:"externalAccount.aeaAcknowledgement",route:{url:"/aeaAcknowledgement",templateUrl:"templates/externalAccount/aeaAcknowledgement.html"}}},a.prototype.createTrialDeposits=function(){return{key:"trialDeposits",route:{url:"/trialDeposits",templateUrl:"templates/externalAccount/transfer.html",abstract:!0,controller:"hgTrialVerificationCtrl"}}},a.prototype.createTrialDepositsVerification=function(){return{key:"trialDeposits.trialVerification",route:{url:"/trialDeposits",templateUrl:"templates/externalAccount/trialVerification.html",pageTitle:"Funding Trial Verification"}}},a.prototype.createTrialDepositsInitiation=function(){return{key:"trialDeposits.trialDepositInitiation",route:{url:"/trialDepositInitiation",templateUrl:"templates/externalAccount/trialDepositInitiation.html",pageTitle:"Funding Trial Deposit Initiation"}}},a.prototype.createExternalAccountLogin=function(){return{key:"externalAccount.externalAccountLogin",route:{url:"/externalAccountLogin",templateUrl:"templates/externalAccount/loginExternalAccount.html"}}},a.prototype.createExternalAccountMFAVerification=function(){return{key:"externalAccount.externalAccountMFAVerification",route:{url:"/externalAccountMFAVerification",templateUrl:"templates/externalAccount/externalAccountMFAVerification.html"}}},a.prototype.createExternalAccountError=function(){return{key:"externalAccount.externalAccountError",route:{url:"/externalAccountError",templateUrl:"templates/externalAccount/externalAccountError.html"}}},a}();a.moveMoneyRouteRegistry=b}(b=a.moveMoneyMod||(a.moveMoneyMod={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(b){var c=function(a){function b(b,c,d,e,f){a.call(this,b,c,d,f),this.$state=e,this.rtmlLoginAttempts=0,this.externalAccountVerificationDto={},this.externalAccountMFAVerificationDto={},this.q=b,this.http=d,this.contextSvc=f}return __extends(b,a),b.prototype.confirmValidationOptions=function(a){var b=this.q.defer(),c=this.contextSvc.appConfig.clientApiUrl+"/external/accounts";return this.http({method:"POST",url:c,data:a}).success(function(a,c,d,e){b.resolve(a)}).error(function(a,c,d,e){b.reject(a)}),b.promise},b.prototype.getLoginChallengeResponses=function(){var a={},b=[],c={};c.Name=this.externalAccountVerificationDto.ValidationOptions.LoginParameters[0].Id.toString();var d={};return d.Name=this.externalAccountVerificationDto.ValidationOptions.LoginParameters[1].Id.toString(),b.push(c),b.push(d),a.QuestionResponses=b,a},b.prototype.getMFAChallengeResponses=function(){var a={};return a.QuestionResponses=this.externalAccountMFAVerificationDto.MfaRequirements,a},b.prototype.getValidationOptionsCommand=function(){var a={};a.ValidationParameters=angular.copy(this.externalAccountVerificationDto.ValidationOptions.LoginParameters);for(var b in a.ValidationParameters){var c=a.ValidationParameters[b];c.ErrorMessage="Please enter this required field.",c.Value=""}return a},b.prototype.getPendingAccounts=function(){var a=this.q.defer();return this.http({method:"GET",url:this.contextSvc.appConfig.clientApiUrl+"/transfers/externalAccounts"}).success(function(b,c,d,e){a.resolve(b)}).error(function(b,c,d,e){a.reject(b)}),a.promise},b.prototype.getUsersAccounts=function(){var a=this.q.defer();return this.http({method:"GET",url:this.contextSvc.appConfig.clientApiUrl+"/transfers/accounts"}).success(function(b,c,d,e){a.resolve(b)}).error(function(b,c,d,e){a.reject(b)}),a.promise},b.prototype.handleExternalAccountLaunchCommand=function(a,b){return b.AccountNumber=a.AccountNumber,b.RoutingNumber=a.RoutingNumber,b.AccountType=a.SelectedAccount,b.SelectedItem=a.SelectedItem,b},b.prototype.handleExternalAccountRTMLLoginCommand=function(a,b){var c=this,d=this.q.defer();if(this.rtmlLoginAttempts<3){this.getLoginAttemptRequest(b,a);var e=this.validateRTMLAccountLogin(this.externalAccountMFAVerificationDto);e.then(function(e){switch(e.Status.Error.Code){case"1":b.RouteTo="success";break;case"2":b.hasError=!0,b.errorMessage=[b.InstitutionName+" does not recognize the entered login id and password combination. Try again.","Attempts Remaining: "+(2-c.rtmlLoginAttempts).toString(),"Please note that repeated failed attempts to instantly verify your account may result in locking your user id and password by your banking institution."],c.sanitizeChallengeResponsesOnFail(a),c.rtmlLoginAttempts>=2?b.RouteTo="VerificationFailed":b.RouteTo=null;break;case"3":b.externalAccountLoginValidated=!0,b.InstitutionName=e.InstitutionName,b.RoutingNumber=e.RoutingNumber,b.AccountNumber=e.AccountNumber,b.MFARequired=e.MFARequired,b.MFARequirements=e.MfaRequirements,c.externalAccountMFAVerificationDto.MfaRequirements=e.MfaRequirements,b.RouteTo="MFAVerification";break;case"9999":b.RouteTo="VerificationFailed",c.sanitizeChallengeResponsesOnFail(a);break;default:b.RouteTo="VerificationFailed",c.sanitizeChallengeResponsesOnFail(a)}c.persistFiiserveData(e),d.resolve(b)}),e.catch(function(e){b.hasError=!0,b.errorMessage=[e.Message],c.sanitizeChallengeResponsesOnFail(a),d.reject(b)}),e.finally(function(){c.rtmlLoginAttempts++})}else b.RouteTo="VerificationFailed",d.resolve(b);return d.promise},b.prototype.handleValidationParametersCommand=function(a,b){var c={};return c.QuestionResponses=[],angular.forEach(a.ValidationParameters,function(a,b){var d={};d.Label=a.Label,d.Mutable=a.Mutable,d.Name=a.Id.toString(),d.Value=a.Value,c.QuestionResponses.push(d)}),c.externalAccountAgreeToTermsAndConditions=b.externalAccountAgreeToTermsAndConditions,c},b.prototype.hasTrialDeposits=function(){var a=this.q.defer(),b=!1;return this.http({method:"GET",url:this.contextSvc.appConfig.clientApiUrl+"/transfers/externalAccounts"}).success(function(c,d,e,f){c&&c.length>0&&(b=!0),a.resolve(b)}).error(function(c,d,e,f){a.reject(b)}),a.promise},b.prototype.submitData=function(a){var b=this.q.defer();return this.http({method:"PUT",url:this.contextSvc.appConfig.clientApiUrl+"/transfers/externalAccounts",data:a}).success(function(a,c,d,e){b.resolve(a)}).error(function(a,c,d,e){b.reject(a)}),b.promise},b.prototype.submitTrialDeposit=function(a){var b=this.q.defer();return this.http({method:"POST",url:this.contextSvc.appConfig.clientApiUrl+"/transfers/externalAccounts/TrialDeposit",data:a}).success(function(a,c,d,e){b.resolve(a)}).error(function(a,c,d,e){b.reject(a)}),b.promise},b.prototype.validateRTMLAccountLogin=function(a){var b=this.q.defer(),c=this.contextSvc.appConfig.clientApiUrl+"/external/verify";return this.http({method:"POST",url:c,data:a}).success(function(a,c,d,e){b.resolve(a)}).error(function(a,c,d,e){b.reject(a)}),b.promise},b.prototype.verifyAccount=function(a,b){var c=this,d=this.q.defer(),e=!1,f=this.getPendingAccounts();return f.then(function(f){angular.forEach(f,function(a,c){a.ExternalAccount.ExternalAccountNumber==b.AccountNumber.toString()&&a.ExternalAccount.AbaCode==b.RoutingNumber.toString()&&(e=!0)}),e?c.$state.go("trialDeposits.trialDepositInitiation"):c.http({method:"POST",url:c.contextSvc.appConfig.clientApiUrl+"/transfers/externalAccounts/verify",data:a}).success(function(a,b,c,e){d.resolve(a)}).error(function(a,b,c,e){d.reject(a)})}),d.promise},b.prototype.verifyExternalAccount=function(a,b){var c=this.q.defer();this.externalAccountVerificationDto={},this.externalAccountMFAVerificationDto={},this.rtmlLoginAttempts=0;var d=this.triggerConfirmValidationOptionsWorkflow(a,b);return d.then(function(a){c.resolve(a)}),d.catch(function(b){a.RouteToTrialDeposits=!0,a.hasAccountOptions=!0,a.FiiServeUnavailable=!0,a.AccountOptions=[{id:1,value:"Checking"},{id:2,value:"Savings"}],c.resolve(a)}),c.promise},b.prototype.persistFiiserveData=function(a){this.externalAccountMFAVerificationDto=a},b.prototype.getLoginAttemptRequest=function(a,b){var c=this;return this.externalAccountMFAVerificationDto.AccountNumber=this.externalAccountVerificationDto.AccountNumber,this.externalAccountMFAVerificationDto.AccountTypeCode=a.AccountType.value,this.externalAccountMFAVerificationDto.AccountTypeGroup=a.AccountType.accountTypeGroup,this.externalAccountMFAVerificationDto.TrialDepositsAccountType=a.AccountType.id,this.externalAccountMFAVerificationDto.ChallengeResponses=this.externalAccountMFAVerificationDto.ChallengeResponses?this.externalAccountMFAVerificationDto.ChallengeResponses:[],angular.forEach(b.QuestionResponses,function(a){var b={};b.Name=a.Name,b.Value=a.Value,c.externalAccountMFAVerificationDto.ChallengeResponses.push(b)}),this.externalAccountMFAVerificationDto.FailureCategory=this.externalAccountMFAVerificationDto.FailureCategory?this.externalAccountMFAVerificationDto.FailureCategory:0,this.externalAccountMFAVerificationDto.FailureReasonCode=this.externalAccountMFAVerificationDto.FailureReasonCode?this.externalAccountMFAVerificationDto.FailureReasonCode:"",this.externalAccountMFAVerificationDto.FailureReasonDesc=this.externalAccountMFAVerificationDto.FailureReasonDesc?this.externalAccountMFAVerificationDto.FailureReasonDesc:"",
this.externalAccountMFAVerificationDto.FIID=this.externalAccountVerificationDto.FIID,this.externalAccountMFAVerificationDto.InstitutionName=this.externalAccountVerificationDto.InstitutionName,this.externalAccountMFAVerificationDto.MfaRequired=!!this.externalAccountMFAVerificationDto.MfaRequired&&this.externalAccountMFAVerificationDto.MfaRequired,this.externalAccountMFAVerificationDto.MfaRequirements=this.externalAccountMFAVerificationDto.MfaRequirements?this.externalAccountMFAVerificationDto.MfaRequirements:[],this.externalAccountMFAVerificationDto.Profile=this.externalAccountMFAVerificationDto.Profile?this.externalAccountMFAVerificationDto.Profile:null,this.externalAccountMFAVerificationDto.RequestId=this.externalAccountVerificationDto.RequestId,this.externalAccountMFAVerificationDto.RoutingNumber=this.externalAccountVerificationDto.RoutingNumber,this.externalAccountMFAVerificationDto.RunId=this.externalAccountMFAVerificationDto.RunId?this.externalAccountMFAVerificationDto.RunId:null,this.externalAccountMFAVerificationDto.Status=this.externalAccountVerificationDto.Status,this.externalAccountMFAVerificationDto.ValidationOptions=this.externalAccountVerificationDto.ValidationOptions,this.externalAccountMFAVerificationDto.VerificationMode=this.externalAccountMFAVerificationDto.VerificationMode?this.externalAccountMFAVerificationDto.VerificationMode:"",this.externalAccountMFAVerificationDto.VerificationStatus=this.externalAccountMFAVerificationDto.VerificationStatus?this.externalAccountMFAVerificationDto.VerificationStatus:"",this.externalAccountMFAVerificationDto.Verified=!!this.externalAccountMFAVerificationDto.Verified&&this.externalAccountMFAVerificationDto.Verified,this.externalAccountMFAVerificationDto.CFIID=this.externalAccountMFAVerificationDto.CFIID?this.externalAccountMFAVerificationDto.CFIID:null,this.externalAccountMFAVerificationDto.RtmlSessionUserName=this.externalAccountVerificationDto.RtmlSessionUserName,this.externalAccountMFAVerificationDto.RtmlSessionPassword=this.externalAccountVerificationDto.RtmlSessionPassword,this.externalAccountMFAVerificationDto.SchwabAccountId=a&&a.SelectedItem&&a.SelectedItem.value1?a.SelectedItem.value1:void 0,this.externalAccountMFAVerificationDto},b.prototype.getConfirmValidationOptionsRequest=function(a){var b={};return b.RoutingNumber=a.RoutingNumber,b.AccountNumber=a.AccountNumber,b},b.prototype.sanitizeChallengeResponsesOnFail=function(a){var b=[],c=[];angular.forEach(a.QuestionResponses,function(a){b.push(a.Name)}),angular.forEach(this.externalAccountMFAVerificationDto.ChallengeResponses,function(a){for(var d=!0,e=0;e<b.length;e++)a.Name==b[e]&&(d=!1);d&&c.push(a)}),this.externalAccountMFAVerificationDto.ChallengeResponses=c},b.prototype.resetExternalAccountMFAVerificationDto=function(){this.externalAccountMFAVerificationDto.ChallengeResponses=null,this.externalAccountMFAVerificationDto.MfaRequirements=null,this.externalAccountMFAVerificationDto.RunId=null,this.externalAccountMFAVerificationDto.CFIID=null},b.prototype.triggerConfirmValidationOptionsWorkflow=function(a,b){var c=this,d=this.q.defer(),e=this.getConfirmValidationOptionsRequest(b),f=this.confirmValidationOptions(e);return a.AccountNumber=b.AccountNumber,a.RoutingNumber=b.RoutingNumber,f.then(function(b){c.taskSuccessConfirmValidationOptions(a,b),d.resolve(a)}),f.catch(function(a){d.reject(a)}),d.promise},b.prototype.taskSuccessConfirmValidationOptions=function(a,b){if(this.externalAccountVerificationDto=b,this.externalAccountVerificationDto.AccountNumber=a.AccountNumber,this.externalAccountVerificationDto.RoutingNumber=a.RoutingNumber,b.ValidationOptions)if(b.ValidationOptions.Realtime){a.hasAccountOptions=!0;var c=[];angular.forEach(b.AccountTypes,function(a){c.push({id:a.TrialDepositsAccountType,value:a.AccountTypeName,accountTypeGroup:a.AccountTypeGroup})}),a.AccountOptions=c,a.RouteToRTML=!0,a.InstitutionName=b.InstitutionName,a.LoginParameters=b.ValidationOptions.LoginParameters,a.verificationText="Before we can add this external account, we must verify your external account ownership.<br/><br/>Schwab is able to instantly verify your external account ownership if you provide your #Bank#  login user id and password. Your account information will be securely sent to #Bank#. Schwab does not keep or review your #Bank# user id and password.",a.verificationText=a.verificationText.split("#Bank#").join(b.InstitutionName)}else a.hasAccountOptions=!0,a.AccountOptions=[{id:1,value:"Checking"},{id:2,value:"Savings"}],a.RouteToRTML=!1,a.RouteToTrialDeposits=!0},b.prototype.RouteTo=function(a){this.$state.go(a.routeName)},b.$inject=["$q","$timeout","$http","$state","hgContextSvc"],b}(a.common.dataContextSvc);b.externalAccountSvc=c}(b=a.externalAccountMod||(a.externalAccountMod={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(b){var c=function(a){function b(b,c,d,e,f,g,h,i){a.call(this,b,c,e,g),this.$q=b,this.$timeout=c,this.$window=d,this.$http=e,this.$filter=f,this.contextSvc=g,this.cacheSvc=h,this.suitabilityQuestionsSvc=i,this.q=b,this.http=e,this.contextSvc=g}return __extends(b,a),b.prototype.getTransferData=function(){var a=this.q.defer();return this.http({method:"GET",url:this.contextSvc.appConfig.clientApiUrl+"/transfers/accounts"}).success(function(b,c,d,e){a.resolve(b)}).error(function(b,c,d,e){a.reject(b)}),a.promise},b.prototype.validateAccountPair=function(a){var b=this.q.defer();return this.http({method:"POST",url:this.contextSvc.appConfig.clientApiUrl+"/transfers/pairs/validator",data:a}).success(function(a,c,d,e){b.resolve(a)}).error(function(a,c,d,e){b.reject(a)}),b.promise},b.prototype.validateTransfer=function(a){var b=this.q.defer();return this.http({method:"POST",url:this.contextSvc.appConfig.clientApiUrl+"/transfers/validator",data:a}).success(function(a,c,d,e){b.resolve(a)}).error(function(a,c,d,e){b.reject(a)}),b.promise},b.prototype.submitTransfer=function(a,b){if(a.isUpdate)return this.updateTransfer(a,b);var c=this.q.defer();return this.http({method:"POST",url:this.contextSvc.appConfig.clientApiUrl+"/transfers",data:a}).success(function(a,b,d,e){c.resolve(a)}).error(function(a,b,d,e){c.reject(a)}),c.promise},b.prototype.updateTransfer=function(a,b){var c=this.q.defer();return this.http({method:"PUT",url:this.contextSvc.appConfig.clientApiUrl+"/transfers/"+encodeURIComponent(b),data:a}).success(function(a,b,d,e){c.resolve(a)}).error(function(a,b,d,e){c.reject(a)}),c.promise},b.prototype.clearCache=function(){var a=this.contextSvc.appConfig.clientApiUrl+"/transfers/accounts",b=this.contextSvc.appConfig.clientApiUrl+"/transfers/externalAccounts";this.cacheSvc.removeItem(this.cacheSvc.cache,a),this.cacheSvc.removeItem(this.cacheSvc.cache,b)},b.prototype.setHgAccounts=function(a,b,c){void 0===c&&(c=null);var d=this,e=_.pluck(b,"brkrAcctId");if(e.length>0){var f=this.contextSvc.isIIP()?"At least one account in this transfer must be an Institutional Intelligent Portfolio Account.":"At least one account in this transfer must be a Schwab Intelligent Portfolio Account.";angular.forEach(a,function(g,h){if("Brokerage"!=g.CompanyCode||!_.contains(e,g.Id)&&g.Id!=c)a[h].IsHg=!1,d.checkExclusionExistance(a[h].ToExclusionsList,"-1")||a[h].ToExclusionsList.push({Reason:"-1",Description:f}),d.checkExclusionExistance(a[h].FromExclusionsList,"-1")||a[h].FromExclusionsList.push({Reason:"-1",Description:f});else{a[h].IsHg=!0;var i=_.findWhere(b,{brkrAcctId:g.Id});i&&(a[h].BranchCode=i.branchCode)}})}return a},b.prototype.checkCanTransferFromExisting=function(a){return this.checkForValidPair(a)},b.prototype.checkForValidPair=function(a){for(var b=!1,c=!1,d=0,e=!1,f=0;f<a.length;++f)if(e=!1,(!a[f].FromIneligibleReasons||a[f].FromIneligibleReasons.length<=0)&&(b=!0,e=!0),this.excludeIneligibleReasons(a[f].ToIneligibleReasons,["T001","T009"]).Exclude||(c=!0,e=!0),e&&d++,b&&c&&d>1)return!0;return!1},b.prototype.excludeIneligibleReasons=function(a,b,c){var d=new Object;if(d.Exclusions=Array(),d.Exclude=!1,!a||a.length<=0)return d;for(var e=0;e<a.length;++e)b.indexOf(a[e].Reason)>=0&&(void 0==c||c)||(d.Exclusions.push(a[e].Description),d.Exclude=!0);return d},b.prototype.excludeAccounts=function(a,b){var c=Array(),d=new Object;d.Exclude=!1,d.Exclusions=Array(),angular.forEach(b,function(a,b){c.push(a.Reason)});for(var e=0;e<a.length;++e)c.indexOf(a[e].Reason)>=0&&(d.Exclusions.push(a[e].Description),d.Exclude=!0);return d},b.prototype.getHgAccountNumber=function(){return this.$window.sessionStorage.getItem("hgAccountNumber")},b.prototype.removeHgAccountNumber=function(){return this.$window.sessionStorage.removeItem("hgAccountNumber")},b.prototype.getAccountItemList=function(a,b){var c=new Array,d=null,e=null,f=null,g=null;a&&(g=this.$filter("orderBy")(a,"GroupOrder"));var h=this;return angular.forEach(g,function(a,g){e?e!=a.CompanyCode&&(e=a.CompanyCode,d=new Array,f={},f.group=a.GroupName,f.itemsList=d,c.push(f)):(e=a.CompanyCode,d=new Array,f={},f.group=a.GroupName,"Brokerage"==a.CompanyCode&&b&&(f.subHeader="Balances include Cash plus Margin if available"),f.itemsList=d,c.push(f)),d.push(h.createAccountListItem(a))}),c},b.prototype.createAccountListItem=function(a){var b={};return a&&(b.value1=a.Id,b.value2=a.Nickname,b.value3=this.getListBalance(a),b.value4=a.IsHg,b.value5=a.IsRetirement,b.value6=a.AccountIdDisplay,b.value8=a.CompanyCode,b.value9=a.AccountIdDisplay),b},b.prototype.getListBalance=function(a){var b="n/a",c=null,d=null,e=null;return a.Balances?(angular.forEach(a.Balances,function(a,b){"totalValue"==a.BalanceType&&(c=a.Amount),"cash"==a.BalanceType&&(d=a.Amount),"cashAndBorrowing"==a.BalanceType&&(e=a.Amount)}),a.IsHg&&$.isNumeric(c)?b=c.toString():($.isNumeric(d)||$.isNumeric(e))&&(b=e&&e>d?e.toString():d.toString()),b):b},b.prototype.getTransaction=function(a){if(!a||0==a.length)return null;var b=this.q.defer();return this.http({method:"GET",url:this.contextSvc.appConfig.clientApiUrl+"/transfers/"+encodeURIComponent(a)}).success(function(a,c,d,e){b.resolve(a)}).error(function(a,c,d,e){b.reject(a)}),b.promise},b.prototype.getTransactions=function(a,b,c){void 0===c&&(c=!1);var d=this.q.defer(),e="/transfers",f=this;(a||b)&&(e=e+"/"+a+"/"+b);var g=f.contextSvc.appConfig.clientApiUrl+e;return 1==c&&this.contextSvc.cache.removeItem(this.contextSvc.cache.cache,g),this.http({method:"GET",url:this.contextSvc.appConfig.clientApiUrl+e}).success(function(a,b,c,e){d.resolve(a)}).error(function(a,b,c,e){d.reject(a)}),d.promise},b.prototype.cancelTransaction=function(a){var b=this.q.defer();return this.http({method:"DELETE",url:this.contextSvc.appConfig.clientApiUrl+"/transfers/"+encodeURIComponent(a)}).success(function(a,c,d,e){b.resolve(a)}).error(function(a,c,d,e){b.reject(a)}),b.promise},b.prototype.checkExclusionExistance=function(a,b){if(a)for(var c=0;c<a.length;++c)if(a[c].Reason===b)return!0;return!1},b.prototype.calculateTaxAmounts=function(a,b,c,d){var e=new Object;return d?(e.CreditAmount=a,e.DebitAmount=a/(1-(b+c))):(e.CreditAmount=a-a*(b+c),e.DebitAmount=a),e.StateTaxAmount=e.DebitAmount*c,e.FedTaxAmount=e.DebitAmount*b,e.TotalTaxes=e.StateTaxAmount+e.FedTaxAmount,e},b.prototype.getMoveMoneyLaunchState=function(a,b,c){var d=this,e="moveMoney.moveMoneyLaunch",f=this.q.defer();return this.getTransferData().then(function(e){d.retrieveMoveMoneyLaunchState(a,b,c,e).then(function(a){f.resolve(a)})}).catch(function(a){console.error(a),f.resolve(e)}),f.promise},b.prototype.retrieveMoveMoneyLaunchState=function(a,b,c,d){var e,f,g="moveMoney.moveMoneyLaunch",h=!1,i=this.q.defer(),j=new Object,k=new Object;if(k.Id="0",j.Id=this.contextSvc.activeAccount.brkrAcctId,this.contextSvc.device.isNative()&&(g="moveMoneyMessage"),b?(e=j,f=k):(f=j,e=k),d&&d.Accounts&&d.Accounts.length>0)if(h=this.checkCanTransferFromExisting(d.Accounts))if(c)g="moveMoney.funding.transferSetup.editTransferGoalMMData",i.resolve(g);else{var l=this.getTransactions(e.Id,f.Id);l.then(function(a){if(a&&a.Transactions&&0==a.Transactions.length)g="moveMoney.funding.transferSetup.editTransferGoalMMData";else{g="moveMoney.funding.transferSetup.editTransferGoalMMData";for(var b=0;b<a.Transactions.length;b++){var c=a.Transactions[b];if(c&&c.Transaction&&"One Time"!=c.Transaction.FrequencyDescription){g="moveMoney.edit";break}}}}),l.catch(function(a){console.error(a)}),l.finally(function(){i.resolve(g)})}else i.resolve(g);else i.resolve(g);return i.promise},b.prototype.getFundingGoalParameters=function(a){var b=this.q.defer(),c=new Object,d=this.suitabilityQuestionsSvc.getAnswers(a);return d.then(function(a){var d=_.findWhere(a.Questions[0].Answers,{IsSelected:!0}),e=_.findWhere(a.Questions[8].Answers,{IsSelected:!0});c.goalType="5"==d.AnswerId?2:1,c.initialInvestment=e.SelectedValue,c.recurringWithdrawal=a.RiskProfileInformation.TargetAmount,b.resolve(c)}),b.promise},b.prototype.getRecurringWithdrawalNotification=function(a){return this.$window.localStorage.getItem(a)},b.prototype.RecurringWithdrawalNotification=function(a,b){this.$window.localStorage.setItem(a,JSON.stringify(b))},b.prototype.getAllAccountsClosedMessage=function(){var a=this.contextSvc.getActiveAccount(),b=a&&a.AcctIdDisplay?a.AcctIdDisplay.toString():this.contextSvc.getAllAccountClosedFlag(),c=new Object;if(b){var d=this.contextSvc.appConfig.allAccountsClosedMessage.toString().replace("accountid",b.toString()).split(",");d&&d.length>0&&(c.message1=d[0],this.contextSvc.isSIP()?c.message2=d[1]:this.contextSvc.isIIP()&&(c.message2=d[2]))}return c},b.$inject=["$q","$timeout","$window","$http","$filter","hgContextSvc","hgCacheSvc","hgSuitabilityQuestionsSvc"],b}(a.common.dataContextSvc);b.moneyTransferSvc=c}(b=a.moveMoneyMod||(a.moveMoneyMod={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(b){var c=function(a){function b(b,c,d,e,f){a.call(this,b,c,d,f),this.$q=b,this.q=b,this.http=d,this.contextSvc=f,this.cacheSvc=e}return __extends(b,a),b.prototype.getUserInfo=function(){var a=this.q.defer();return this.$q.all([this.getPersonalProfileData(),this.getStates(),this.getHousehold()]).then(function(b){var c=null;b&&(c=b[0],b[1]&&b[1].States&&(c.StateList=b[1].States),c.Household=b[2]),a.resolve(c)}).catch(function(b){a.reject(b)}),a.promise},b.prototype.getPersonalProfileData=function(){var a=this,b=this.q.defer();return this.http({method:"GET",url:this.contextSvc.appConfig.clientApiUrl+"/profiles/me"}).success(function(c,d,e,f){a.cacheSvc.removeItem(a.cacheSvc.cache,a.contextSvc.appConfig.clientApiUrl+"/profiles/me"),b.resolve(c)}).error(function(a,c,d,e){b.reject(a)}),b.promise},b.prototype.getStates=function(){var a=this.$q.defer();return this.http({method:"GET",url:this.contextSvc.appConfig.clientApiUrl+"/states"}).success(function(b,c,d,e){a.resolve(b)}).error(function(b,c,d,e){a.reject(b)}),a.promise},b.prototype.getHousehold=function(){var a=this.$q.defer();return this.http({method:"GET",url:this.getDataServiceConfig("HgCoreDataService").url+"Households"}).success(function(b,c,d,e){a.resolve(b.value[0])}).error(function(b,c,d,e){a.reject(b)}),a.promise},b.prototype.save=function(a){var b=this.q.defer();return this.http({method:"PUT",url:this.contextSvc.appConfig.clientApiUrl+"/profiles/me",data:a}).success(function(a,c,d,e){b.resolve(a)}).error(function(a,c,d,e){b.reject(a)}),b.promise},b.prototype.saveHousehold=function(a){var b=this.q.defer(),c=this;return this.http({method:"PUT",url:this.getDataServiceConfig("HgCoreDataService").url+"Households/SpouseAffiliation",data:a}).success(function(a,d,e,f){c.contextSvc.cache.removeItem(c.contextSvc.cache.cache,c.getDataServiceConfig("HgCoreDataService").url+"Households"),b.resolve(a)}).error(function(a,c,d,e){b.reject(a)}),b.promise},b.prototype.deleteHousehold=function(){var a=this.q.defer(),b=this;return this.http({method:"DELETE",url:this.getDataServiceConfig("HgCoreDataService").url+"Households/SpouseAffiliation"}).success(function(c,d,e,f){b.contextSvc.cache.removeItem(b.contextSvc.cache.cache,b.getDataServiceConfig("HgCoreDataService").url+"Households"),a.resolve(c)}).error(function(b,c,d,e){a.reject(b)}),a.promise},b.prototype.fetchSecurityData=function(){var a=this.q.defer();return this.http({method:"GET",url:this.contextSvc.appConfig.clientApiUrl+"/security"}).success(function(b,c,d,e){a.resolve(b)}).error(function(b,c,d,e){a.reject(b)}),a.promise},b.prototype.saveSecurityData=function(a){var b=this.q.defer();return this.http({method:"POST",url:this.contextSvc.appConfig.clientApiUrl+"/security",data:a}).success(function(a,c,d,e){b.resolve(a)}).error(function(a,c,d,e){b.reject(a)}),b.promise},b.$inject=["$q","$timeout","$http","hgCacheSvc","hgContextSvc"],b}(a.common.dataContextSvc);b.userProfileSvc=c}(b=a.user||(a.user={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(b){var c=function(a){function b(b,c,d,e,f){a.call(this,b,d,e,f),this.dataServiceUrl=this.getDataServiceConfig("HgEnrollmentService").url,this.window=c}return __extends(b,a),b.prototype.CreateOrValidateProspectLogin=function(a){var b=this,c=this.q.defer();return this.contextSvc.showSpinner(),this.http.post(this.dataServiceUrl+"/CreateOrValidateLogin",JSON.stringify(a),{headers:{Accept:"application/json"}}).success(function(a){a&&null!=a.ReturnCode&&0==a.ReturnCode?(b.window.sessionStorage.setItem("ApplicationId",a.ApplicationId),c.resolve(a.ReturnMessage)):c.resolve(a.ReturnMessage)}).error(function(){c.reject(!1)}).finally(function(){b.contextSvc.hideSpinner()}),c.promise},b.prototype.getSaveResumeNavigationState=function(){return this.window.sessionStorage.getItem("hg_save_resume_navigation_state")},b.prototype.setSaveResumeNavigationState=function(a){a&&this.window.sessionStorage.setItem("hg_save_resume_navigation_state",a)},b.$inject=["$q","$window","$timeout","$http","hgContextSvc"],b}(a.common.dataContextSvc);b.prospectLoginSvc=c}(b=a.auth||(a.auth={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(a,b){this.q=a}return a.prototype.insertCobrowseScript=function(a){var b=this.q.defer();a.fireflyAPI={},a.fireflyAPI.ready=function(a){"function"==typeof a&&(a=[a]),fireflyAPI.onLoaded=fireflyAPI.onLoaded||[];for(var b=0;b<a.length;b++)fireflyAPI.isLoaded?a[b]():fireflyAPI.onLoaded.push(a[b])},a.fireflyAPI.token="542c57420cd92af35495f5bf";var c=document.createElement("script");c.type="text/javascript",c.src="https://firefly-071591.s3.amazonaws.com/scripts/loaders/loader.js",c.async=!0;var d=document.getElementsByTagName("script")[0];return d.parentNode.insertBefore(c,d),a.fireflyAPI.ready(function(){b.resolve()}),b.promise},a.$inject=["$q","$window","$timeout"],a}();a.cobrowseSvc=b}(b=a.common||(a.common={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(b){var c=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b}(a.core.hal.Document);b.MenuDocument=c;var d=function(a){function b(b,c){a.call(this),this.text1=c,this.text2=b,this.containerStyle="2"}return __extends(b,a),b}(a.core.hal.Document);b.MenuTotalDocument=d;var e=function(a){function b(b){a.call(this),this.text1=b,this.containerStyle="-1"}return __extends(b,a),b}(a.core.hal.Document);b.MenuListDocument=e;var f=function(b){function c(c,d,e,f,g,h,i,j,k){b.call(this),this.text1=e,this.text3=d,this.containerStyle="1",this.imageId=f,this.goalName=c.isSIP()?i:null,this.goalState=c.isSIP()?j:null,this.goalShortNameText=c.isSIP()?k:null,c.halDocumentSvc.addLink(this,"self",new a.core.hal.Link(g,h))}return __extends(c,b),c}(a.core.hal.Document);b.MenuAccountDocument=f;var g=function(b){function c(c,d,e,f,g,h){b.call(this),this.containerStyle="0",this.text1=d,this.imageId=e,c.halDocumentSvc.addLink(this,"self",new a.core.hal.Link(f,g,h))}return __extends(c,b),c}(a.core.hal.Document);b.MenuItemDocument=g;var h=function(){function b(a,b,c,d,e){var f=this;this.$rootScope=a,this.$filter=b,this.contextSvc=c,this.strategiesSvc=d,this.hgMenuJs2nSvc=e,this.contextSvc.$rootScope.$on(this.hgMenuJs2nSvc.MENU_REFRESH_EVENT,function(a,b){f.hgMenuJs2nSvc.sendMenuModel(f.getMenu(),b.id)}),this.contextSvc.$rootScope.$on("ACCOUNTS_UPDATED_EVENT",function(){f.hgMenuJs2nSvc.sendMenuModel(f.getMenu(),null)})}return b.prototype.loadMenuModel=function(){this.hgMenuJs2nSvc.sendMenuModel(this.getMenu())},b.prototype.getDonut=function(a){var b="";if(a&&a.Name)switch(this.strategiesSvc.getDonutClass(a.Name)){case"donut1":b="TR1";break;case"donut2":b="TR2";break;case"donut3":b="TR3";break;case"donut4":b="TR4";break;case"donut5":b="TR5";break;case"donut6":b="TR6";break;case"donut7":b="TR7";break;case"donut8":b="TR8";break;case"donut9":b="TR9";break;case"donut10":b="TR10";break;case"donut11":b="TR11";break;case"donut12":b="TR12";break;case"donut13":b="Inc1";break;case"donut14":b="Inc2";break;case"donut15":b="Inc3";break;default:b="TR1"}else b="TR1";switch(this.contextSvc.customization.getColorPaletteId()){case"54f4c59992428ab44a2b51a9":b="AS09_"+b;break;case"54f4c59992428ab44a2b51aa":b="AS01_"+b;break;case"54f4c59992428ab44a2b51ab":b="AS02_"+b;break;case"54f4c59992428ab44a2b51ac":b="AS03_"+b;break;case"54f4c59992428ab44a2b51ad":b="AS04_"+b;break;case"54f4c59992428ab44a2b51ae":b="AS05_"+b;break;case"54f4c59992428ab44a2b51af":b="AS06_"+b;break;case"54f4c59992428ab44a2b51b0":b="AS07_"+b;break;case"54f4c59992428ab44a2b51b1":b="AS08_"+b}return b},b.prototype.addAccounts=function(a){var b=this,c=0,g=new e("Accounts");this.contextSvc.halDocumentSvc.addEmbedded(a,"0",g),this.$rootScope.accounts&&this.$rootScope.accounts.length>0&&(this.$rootScope.accounts.forEach(function(a){a.drift||(a.drift=new Object),a.drift&&null==a.drift&&(a.drift=new Object),("Invested"!==a.accountStatus||"NotFunded"==a.accountStatus)&&a.drift.GoalState>0&&(a.drift.GoalState=6);var d=new f(b.contextSvc,a.balance,a.name,b.getDonut(a.model),"showDashboard~accounts."+a.portfolioRefId,"app",a.drift.GoalName,a.drift.GoalState,a.drift.ShortGoalNameText);b.contextSvc.halDocumentSvc.addEmbedded(g,"accounts",d);var e=a.balance.replace(/[^0-9\.]+/g,"");c+=Number(e)}),this.$rootScope.accounts.length>1&&this.contextSvc.halDocumentSvc.addEmbedded(g,"accounts",new d(this.$filter("currency")(c,"$",2),"Total")))},b.prototype.addMenuItems=function(a){var b=new e("Menu");this.contextSvc.halDocumentSvc.addEmbedded(a,"1",b),this.contextSvc.halDocumentSvc.addEmbedded(b,"items",new g(this.contextSvc,"Start a New Portfolio","plus-circle","behavioralQuestions","webApp")),this.contextSvc.halDocumentSvc.addEmbedded(b,"items",new g(this.contextSvc,"Add/Withdraw Money","transfer_menu","moveMoney.moveMoneyLaunch","webApp")),this.contextSvc.halDocumentSvc.addEmbedded(b,"items",new g(this.contextSvc,"Statements & Documents","document","accountDocuments","webApp")),this.contextSvc.halDocumentSvc.addEmbedded(b,"items",new g(this.contextSvc,"Personal Information","person","personalProfile.manageprofile","webApp")),this.contextSvc.device.isNativeIOS()&&this.contextSvc.halDocumentSvc.addEmbedded(b,"items",new g(this.contextSvc,"Settings","settings","showSettings","app","modal")),this.contextSvc.halDocumentSvc.addEmbedded(b,"items",new g(this.contextSvc,"Contact Us","phone","contactUs.contactUsLaunch","webApp")),this.contextSvc.halDocumentSvc.addEmbedded(b,"items",new g(this.contextSvc,"Legal & Account Forms","checked-text","agreements.home","webApp")),this.contextSvc.customization.hasClientFeature("Insights")&&this.contextSvc.halDocumentSvc.addEmbedded(b,"items",new g(this.contextSvc,"Whitepapers","learnMore",this.$rootScope.isSIP?this.contextSvc.appConfig.whitePaperUrl:this.contextSvc.appConfig.IIPWhitePaperUrl,"web")),this.contextSvc.customization.hasClientFeature("Blog")&&this.contextSvc.halDocumentSvc.addEmbedded(b,"items",new g(this.contextSvc,"Investing Insights","newspaper",this.$rootScope.isSIP?this.contextSvc.appConfig.blogUrl:this.contextSvc.appConfig.IIPBlogUrl,"web")),this.contextSvc.customization.hasClientFeature("AboutSIP")&&this.contextSvc.halDocumentSvc.addEmbedded(b,"items",new g(this.contextSvc,"FAQ","info",this.$rootScope.isSIP?this.contextSvc.appConfig.FAQUrl:this.contextSvc.appConfig.IIPFAQUrl,"web")),this.$rootScope.isSIP&&this.contextSvc.halDocumentSvc.addEmbedded(b,"items",new g(this.contextSvc,"Coming Soon","comingSoon",this.contextSvc.appConfig.comingSoonUrl,"web")),this.contextSvc.halDocumentSvc.addEmbedded(b,"items",new g(this.contextSvc,"Logout","exit","hg-app://showLaunchScreen~LogoutUser","app"))},b.prototype.getMenu=function(){var b=new c;return b.pageTitle="Menu",this.contextSvc.halDocumentSvc.addLink(b,"self",new a.core.hal.Link("RefreshMenuCommand","app")),this.addAccounts(b),this.addMenuItems(b),b},b}();b.menuSvc=h}(b=a.app||(a.app={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(b){var c=function(a){function b(b,c){a.call(this,c,"MENU","GLOBAL"),this.$rootScope=b,this.hgJs2nManagerSvc=c,this.MENU_REFRESH_EVENT="MENU_REFRESH",this.commands={RefreshMenuCommand:this.handleRefreshMenuCommand}}return __extends(b,a),b.prototype.handleRefreshMenuCommand=function(a,b,c){c.$rootScope.$broadcast(c.MENU_REFRESH_EVENT,{message:a.Data,id:a.CorrelationId})},b.prototype.isDirty=function(a){return(!this.menuModel||!angular.equals(this.menuModel,a))&&(this.menuModel=a,!0)},b.prototype.sendMenuModel=function(a,b){this.isDirty(a)&&this.hgJs2nManagerSvc.send("RefreshDocumentEvent",b,a,this.contextId)},b}(a.core.js2n.js2nServiceBase);b.menuJs2nSvc=c}(b=a.app||(a.app={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(b){var c=function(a){function b(b,c,d){a.call(this),this.shouldClearUserNameField=b,this.shouldClearPasswordField=c,this.customerMessage=d}return __extends(b,a),b}(a.core.hal.Document);b.AuthenticateUserDocument=c}(b=a.auth||(a.auth={}))}(hg||(hg={}));var hg;!function(a){var b;!function(b){var c=function(){function c(){this.INVALID_PARAMETER_MSG="Invalid Parameter"}return c.prototype.createPostLoginCompleteResponse=function(c,d,e){if(!c)throw new Error(this.INVALID_PARAMETER_MSG);var f=new b.AuthenticateUserDocument(!0,!0,null);return c.halDocumentSvc.addLink(f,"self",new a.core.hal.Link("/viewLogin","app")),c.halDocumentSvc.setStatus(f,"302"),c.halDocumentSvc.setLocation(f,new a.core.hal.Link(d,e)),f},c}();b.AuthModelFactory=c}(b=a.auth||(a.auth={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(b){var c=function(a){function b(b,c,d){a.call(this),this.$q=b,this.hgContextSvc=c,this.$http=d}return __extends(b,a),b.prototype.execute=function(){var a=this.$q.defer();return this.identityProviderLogout().then(function(a){}).catch(function(b){a.reject(b)}).finally(function(){a.resolve()}),a.promise},b.prototype.identityProviderLogout=function(){var a=this.$q.defer();return this.$http({method:"DELETE",url:this.hgContextSvc.appConfig.identityProviderLogoutUrl}).success(function(){a.resolve(!0)}).error(function(){a.reject(!1)}),a.promise},b.$inject=["$q","hgContextSvc","$http"],b}(a.PromiseStrategy);b.SessionTimeoutStrategy=c}(b=a.auth||(a.auth={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(){this.routes=[],this.routes.push(this.createLogin()),this.routes.push(this.createCancelLogin()),this.routes.push(this.createLogout()),this.routes.push(this.createLoginIntervention()),this.routes.push(this.createProgramSelector())}return a.prototype.createLogin=function(){return{key:"login",route:{url:"/login",templateUrl:"templates/app/modalBackdrop.html",controller:["$scope","hgAuthSvc",function(a,b){b.login(1)}],publicAccess:!0,nativeIos:!0,nativeAndroid:!0,nativeAndroidState:"/viewLogin",nativeAlias:"viewLogin"}}},a.prototype.createCancelLogin=function(){return{key:"cancelLogin",route:{url:"/cancelLogin",publicAccess:!0,nativeIos:!0,nativeAndroid:!0}}},a.prototype.createLoginIntervention=function(){return{key:"loginIntervention",route:{url:"/auth/intervention",templateUrl:"templates/app/modalBackdrop.html",controller:"hgLoginInterventionCtrl",publicAccess:!0}}},a.prototype.createLogout=function(){return{key:"logout",route:{url:"/logout",publicAccess:!0}}},a.prototype.createProgramSelector=function(){return{key:"programSelector",route:{url:"/auth/programselector",templateUrl:"templates/ui/programSelector.html",controller:"hgProgramSelectorCtrl"}}},a}();a.authRouteRegistry=b}(b=a.auth||(a.auth={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(b){var c=function(a){function b(b,c,d){a.call(this,c,"AUTH","GLOBAL"),this.$rootScope=b,this.hgJs2nManagerSvc=c,this.hgAuthSvc=d,this.commands={GetApplicationLaunchModel:this.handleGetApplicationLaunchRequest,GetAuthenticateUserModel:this.handleGetAuthenticateUserRequest,LogoutUser:this.handleLogoutUserRequest}}return __extends(b,a),b.prototype.handleGetApplicationLaunchRequest=function(a,b,c){c.hgJs2nManagerSvc.send("ApplicationLaunchModel",a.CorrelationId,c.hgAuthSvc.getApplicationLaunchModel(),c.contextId)},b.prototype.handleGetAuthenticateUserRequest=function(a,b,c){c.hgAuthSvc.commandGetAuthenticateUserModel(a).then(function(b){c.hgJs2nManagerSvc.send("AuthenticateUserModel",a.CorrelationId,b,c.contextId)})},b.prototype.handleLogoutUserRequest=function(a,b,c){c.hgAuthSvc.commandLogout(a)},b.prototype.sendAuthenticationCompletedEvent=function(a,b){this.hgJs2nManagerSvc.send("AuthenticationCompletedEvent",b,a,this.contextId)},b.prototype.dismissGettingStarted=function(){this.hgJs2nManagerSvc.send("WebReadyEvent"),this.hgJs2nManagerSvc.send("HideWeb")},b}(a.core.js2n.js2nServiceBase);b.authJs2nSvc=c}(b=a.auth||(a.auth={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(b){var c;!function(b){var c=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b}(a.core.hal.Document);b.PageItem=c;var d=function(a){function b(b,c,d){a.call(this),this.text1=b,this.visualStyle=c,this.pageTitleHidden=d}return __extends(b,a),b}(a.core.hal.Document);b.HeaderItem=d;var e=function(a){function b(b,c,d,e){a.call(this),this.text=b,this.imageId=c,this.href=d,this.rel=e}return __extends(b,a),b}(a.core.hal.Document);b.MenuItem=e;var f=function(a){function b(b,c,d,e,f,g){a.call(this),this.text1=b,this.imageData=c,this.imageDataMimeType=d,this.imageRefId=e,this.imageUri=f,this.containerStyle=g}return __extends(b,a),b}(a.core.hal.Document);b.ProgramItem=f;var g=function(b){function c(c,d,e,f,g,h,i){b.call(this),this.text1=d,this.text2=e,this.text3=f,this.containerStyle=g,this.href=h,this.rel=i,c.halDocumentSvc.addLink(this,"self",new a.core.hal.Link(this.href,this.rel))}return __extends(c,b),
c}(a.core.hal.Document);b.AccountItem=g;var h=function(a){function b(){a.call(this)}return __extends(b,a),b}(a.core.hal.Document);b.SetProgramResponseSuccessDocument=h;var i=function(a){function b(b){a.call(this),this.customerMessage=b}return __extends(b,a),b}(a.core.hal.Document);b.SetProgramResponseErrorDocument=i;var j=function(a){function b(b,c,d,e){a.call(this),this.message=b,this.status=c,this.logonState=d,this.errorCode=e}return __extends(b,a),b}(a.core.hal.Document);b.SetProgramResponseCustomerMessage=j;var k=function(){function a(){}return a}();b.FirmProgram=k;var l=function(){function b(a,b,c,d,e,f){this.$q=a,this.$rootScope=b,this.contextSvc=c,this.$filter=d,this.window=e,this.hgCustomizationSvc=f,this.programCount=0,this.q=a,this.defaultAccountItem=null,this.programCount=0}return b.prototype.getSetProgramResponse=function(a){var b=this;try{this.setSelectedProgram(a.Data.href).then(function(){return b.getSetProgramResponseSuccess()})}catch(a){return this.getSetProgramResponseError()}},b.prototype.getPageItems=function(){var b=new c;return this.contextSvc.halDocumentSvc.addLink(b,"self",new a.core.hal.Link("hg-app://programSelector","app")),this.addHeaderItems(b),this.addProgramItems(b),b},b.prototype.addHeaderItems=function(b){var c="0",f="0",g=new d("Choose account",c,f);this.contextSvc.halDocumentSvc.addLink(g,"self",new a.core.hal.Link("hg-app://programSelector/pageTitle","app")),this.contextSvc.halDocumentSvc.addLinkDocument(g,"menu",new e("Logout","1","hg-app://showLaunchScreen~LogoutUser","app")),this.contextSvc.halDocumentSvc.addEmbedded(b,"pageTitle",g)},b.prototype.addProgramItems=function(a){var b=this,c="1",d="5";this.defaultAccountItem=null,this.programCount=0;for(var e=this.contextSvc.customization.getAllFirms(),h=0;h<e.length;h++){var i=e[h],j=!1;if(this.$rootScope.accounts&&this.$rootScope.accounts.length>0&&this.$rootScope.accounts.forEach(function(a){i.Accounts.forEach(function(b){a.accountNumber==b&&(j=!0)})}),j){var k=(i.AdvisorProgramInfo.ProgramName,i.AdvisorProgramInfo.AdvisorInformation.FirmName),l=i.WebImageId,m=(i.MobileImageId,this.contextSvc.appConfig.iipHostName,"");m=this.contextSvc.appConfig.dataServices[2].url+"AsLogos(%27"+l+"%27)";var n="",o="",p=i.FirmId,q=i.AdvisorProgramInfo.ProgramPin,r=new f(k,n,o,l,m,c);this.contextSvc.halDocumentSvc.addItemDocument(a,h.toString(),r),this.programCount=this.programCount+1,this.$rootScope.accounts&&this.$rootScope.accounts.length>0&&this.$rootScope.accounts.forEach(function(a){i.Accounts.forEach(function(c){if(a.accountNumber==c){var e=new g(b.contextSvc,a.name,a.balance,a.AcctIdDisplay,d,q+"/"+a.id+"/"+p,"app");b.contextSvc.halDocumentSvc.addEmbedded(r,"accounts",e),null==b.defaultAccountItem&&(b.defaultAccountItem=e)}})})}}},b.prototype.getAvailablePrograms=function(){return this.getPageItems()},b.prototype.getSetProgramResponseSuccess=function(){var b=new h;return this.contextSvc.halDocumentSvc.setStatus(b,"302"),this.contextSvc.halDocumentSvc.addLink(b,"self",new a.core.hal.Link("hg-app://programSelector","app")),this.contextSvc.halDocumentSvc.setLocation(b,new a.core.hal.Link("/charts","app")),b},b.prototype.getSetProgramResponseError=function(){var b=new j(this.$rootScope.localResources["Error_ProgramSelector-UnableToComplete"],"ERROR","",""),c=new i(b);return this.contextSvc.halDocumentSvc.setStatus(c,"200"),this.contextSvc.halDocumentSvc.addLink(c,"self",new a.core.hal.Link("hg-app://programSelector","app")),c},b.prototype.hasMultiplePrograms=function(){var a=!1,b=this.getAvailablePrograms();return null!=b.items&&this.programCount>1&&(a=!0),a},b.prototype.setDefaultProgram=function(){return this.getAvailablePrograms(),this.setSelectedProgram(this.defaultAccountItem.href)},b.prototype.setSelectedProgram=function(a){var b=this.q.defer();null==this.defaultAccountItem&&b.reject(!1);var c=a.split("/")[2],d=parseInt(c),e=a.split("/")[1],f=a.split("/")[0],g=new k;return g.FirmId=d,g.ProgramPin=f,this.window.sessionStorage.setItem("ACTIVE_ACCOUNT_ID",e),this.contextSvc.processFirmSelection(d,f),this.hgCustomizationSvc.setFirmProgramInfo(g),this.contextSvc.device.isNative()&&this.$rootScope.$broadcast("PROGRAM_SELECTOR_COMPLETED_EVENT"),b.resolve(!0),b.promise},b.$inject=["$q","$rootScope","hgContextSvc","$filter","$window","hgCustomizationSvc"],b}();b.programSelectorSvc=l}(c=b.advisors||(b.advisors={}))}(b=a.domain||(a.domain={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(b){var c;!function(b){var c=function(a){function b(b,c,d){a.call(this,c,"ADVISORS","GLOBAL"),this.$rootScope=b,this.hgJs2nManagerSvc=c,this.hgProgramSelectorSvc=d,this.commands={ProgramSelectorCommand:this.handleProgramSelectorCommand,SetProgramCommand:this.handleSetProgramCommand}}return __extends(b,a),b.prototype.handleProgramSelectorCommand=function(a,b,c){c.hgJs2nManagerSvc.send("ProgramSelectorResponseEvent",a.CorrelationId,c.hgProgramSelectorSvc.getAvailablePrograms(),c.contextId)},b.prototype.handleSetProgramCommand=function(a,b,c){c.hgJs2nManagerSvc.send("SetProgramResponse",a.CorrelationId,c.hgProgramSelectorSvc.getSetProgramResponse(a),c.contextId)},b}(a.core.js2n.js2nServiceBase);b.programSelectorJs2nAdapter=c}(c=b.advisors||(b.advisors={}))}(b=a.js2n||(a.js2n={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(){this.routes=[],this.routes.push(this.createContactUs()),this.routes.push(this.createContactUsLaunch()),this.routes.push(this.createFileUpload()),this.routes.push(this.createFileUploadLaunch()),this.routes.push(this.createFileUploadSuccess())}return a.prototype.createContactUs=function(){return{key:"contactUs",route:{url:"/contactus",templateUrl:"templates/ui/uiView.html",controller:"hgContactUsCtrl"}}},a.prototype.createContactUsLaunch=function(){return{key:"contactUs.contactUsLaunch",route:{url:"/launch",templateUrl:"templates/ui/contactus.html"}}},a.prototype.createFileUpload=function(){return{key:"contactUs.fileUpload",route:{url:"/files",templateUrl:"templates/ui/uiView.html",controller:"hgFileUploadCtrl"}}},a.prototype.createFileUploadLaunch=function(){return{key:"contactUs.fileUpload.fileUploadLaunch",route:{url:"/upload",templateUrl:"templates/ui/fileUpload.html"}}},a.prototype.createFileUploadSuccess=function(){return{key:"contactUs.fileUpload.fileUploadSuccess",route:{url:"/uploadsuccess",templateUrl:"templates/ui/fileUploadSuccess.html"}}},a}();a.uiRouteRegistry=b}(b=a.ui||(a.ui={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(b){var c;!function(b){var c=function(a){function b(b,c){a.call(this,c),this.$rootScope=b,this.hgJs2nManagerSvc=c,this.FILE_UPLOAD_NAVIGATION_COMMAND="FILE_UPLOAD_NAVIGATION_COMMAND"}return __extends(b,a),b.prototype.sendFileUploadNavigationCommand=function(a,b){this.hgJs2nManagerSvc.send("LaunchFileUpload",b,a,this.contextId)},b}(a.core.js2n.js2nServiceBase);b.fileUploadJs2nSvc=c}(c=b.contactUs||(b.contactUs={}))}(b=a.js2n||(a.js2n={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(b){var c;!function(b){var c=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b}(a.core.hal.Document);b.PageItem=c;var d=function(a){function b(b,c,d){a.call(this),this.accountID=b,this.accountName=c,this.accountBalance=d}return __extends(b,a),b}(a.core.hal.Document);b.AccountItem=d;var e=function(){function a(a,b,c,d){this.$q=a,this.$rootScope=b,this.contextSvc=c,this.hgFileUploadJs2nSvc=d,this.q=a}return a.prototype.getFileUploadData=function(){var a=new c;return a.imageSettings={imageColor:"C",imageCompression:"30",imageDepth:"24",imageResolutionHeight:"1200",imageResolutionWidth:"1600"},a.title="Upload a File",a.targetURL=this.contextSvc.appConfig.clientApiUrl+"/FileUpload/{filename}/{accountId}",this.addAccountItem(a),a},a.prototype.addAccountItem=function(a){var b=this;this.$rootScope.accounts&&this.$rootScope.accounts.length>0&&angular.forEach(this.$rootScope.accounts,function(c){if(c){var e=new d(c.AcctIdDisplay,c.name,c.balance);b.contextSvc.halDocumentSvc.addEmbedded(a,"accounts",e)}})},a.prototype.sendFileUploadData=function(){this.hgFileUploadJs2nSvc&&this.hgFileUploadJs2nSvc.sendFileUploadNavigationCommand(this.getFileUploadData())},a}();b.fileUploadSvc=e}(c=b.contactUs||(b.contactUs={}))}(b=a.domain||(a.domain={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b;!function(a){var b=function(){function a(a,b){this.$resource=a,this.hgContext=b;var c={method:"PUT",headers:{"Content-Type":"application/json"},isArray:!0};this.resource=this.$resource(b.appConfig.clientApiUrl+"/consent",null,{save:c})}return a.prototype.recordTermsAndConditionsData=function(a){return this.resource.save(a).$promise},a}();a.termsAndConditionsProvider=b}(b=a.providers||(a.providers={}))}(b=a.common||(a.common={}))}(hg||(hg={}));var hg;!function(a){var b;!function(b){var c=function(){function b(){this.$get.$inject=["$rootScope","$q","$http","$window","$filter","hgContextSvc","hgTermsAndConditionsProvider"]}return b.prototype.setCMSAsset=function(a){this.TERMSANDCONDITIONS_TEXT_CMS_KEY=a},b.prototype.$get=function(b,c,d,e,f,g,h){return new a.common.termsAndConditionsService(b,c,d,e,f,g,h,this.TERMSANDCONDITIONS_TEXT_CMS_KEY)},b}();b.termsAndConditionsServiceProvider=c;var d=function(){function a(a,b,c,d,e,f,g,h){this.windowSvc=null,this.filterSvc=null,this.rootScope=a,this.q=b,this.http=c,this.windowSvc=d,this.filterSvc=e,this.contextSvc=f,this.hgTermsAndConditionsProvider=g,this.TERMSANDCONDITIONS_TEXT_CMS_KEY=h}return a.prototype.getTermsAndConditionsData=function(){var a={},b=!1,c=this.getCMSAssetUrl(this.TERMSANDCONDITIONS_TEXT_CMS_KEY);return this.rootScope.session.isLoggedIn?(a.shouldPresentApplicationTerms=b,a.applicationTermsUrl=c):(b=this.shouldShowTandCPreLogin(),a.shouldPresentApplicationTerms=b,a.applicationTermsUrl=c),a},a.prototype.recordTermsAndConditionsData=function(){var a=this;if(this.rootScope.session.isLoggedIn){var b=this.getTermsAndConditionsPreLoginData(),c=null;c=b?JSON.parse(b):{},c.HgTermsVersion=this.getHgTermsVersionFromSession(),c.MrdcBrokerageVersion=this.getHgRDCVersionFromSession(),c.isTandCDataSaved||this.hgTermsAndConditionsProvider.recordTermsAndConditionsData(c).then(function(){c.isTandCDataSaved=!0,a.windowSvc.localStorage.setItem("HG_TANDC_PRELOGIN",JSON.stringify(c))})}else{var d=this.filterSvc("date")(new Date,"MM/dd/yyyy HH:mm:ss"),e={};e.preLoginAccepted=!0,e.HgTermsDate=d,this.contextSvc.isSIP()?e.HgProduct=this.contextSvc.appConfig.product.SIP:e.HgProduct=this.contextSvc.appConfig.product.IIP,this.windowSvc.localStorage.setItem("HG_TANDC_PRELOGIN",JSON.stringify(e))}},a.prototype.getCMSAssetUrl=function(a){return this.contextSvc.appConfig.clientApiUrl+"/public/asset/"+a},a.prototype.shouldShowTandCPreLogin=function(){var a=!0,b=this.getTermsAndConditionsPreLoginData();if(b){var c=JSON.parse(b);c&&c.preLoginAccepted&&(a=!1)}return a},a.prototype.getTermsAndConditionsPreLoginData=function(){return this.windowSvc.localStorage.getItem("HG_TANDC_PRELOGIN")},a.prototype.getHgTermsVersionFromSession=function(){var a,b=this.contextSvc.getSessionData();return b.preferences&&(a=this.contextSvc.isSIP()?b.preferences.HgDocumentVersion:b.iipPreferences.HgDocumentVersion),a},a.prototype.getHgRDCVersionFromSession=function(){var a,b=this.contextSvc.getSessionData();return b.preferences&&(a=this.contextSvc.isSIP()?b.preferences.MrdcDocumentVersion:b.iipPreferences.MrdcDocumentVersion),a},a}();b.termsAndConditionsService=d}(b=a.common||(a.common={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b;!function(a){var b=function(){function a(a,b){this.$resource=a,this.hgContext=b;var c={method:"GET"},d={method:"PUT",headers:{"Content-Type":"application/json"}};this.resource=this.$resource(b.appConfig.clientApiUrl+"/touchconsent",null,{get:c,save:d})}return a.prototype.getTouchTermsAndConditionsData=function(){return this.resource.get().$promise},a.prototype.recordTouchTermsAndConditionsData=function(){this.resource.save()},a}();a.touchTermsAndConditionsProvider=b}(b=a.providers||(a.providers={}))}(b=a.common||(a.common={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(a,b,c,d){this.rootScope=a,this.q=b,this.contextSvc=c,this.hgTouchTermsAndConditionsProvider=d}return a.prototype.getTouchTermsAndConditionsData=function(){var a=this,b=this.q.defer(),c={};return c.shouldPresentTouchTerms=!1,c.touchTermsUrl="",this.hgTouchTermsAndConditionsProvider.getTouchTermsAndConditionsData().then(function(d){0==parseInt(d.TouchOrderId)?c.shouldPresentTouchTerms=!0:d.TouchTermsVersion.trim()!=d.TouchDocumentVersion.trim()&&(c.shouldPresentTouchTerms=!0),c.touchTermsUrl=a.getCMSAssetUrl("Mobile-TouchID-TC"),b.resolve(c)}).catch(function(a){b.resolve(c)}),b.promise},a.prototype.recordTouchTermsAndConditionsData=function(){this.hgTouchTermsAndConditionsProvider.recordTouchTermsAndConditionsData()},a.prototype.getCMSAssetUrl=function(a){return this.contextSvc.appConfig.clientApiUrl+"/public/asset/"+a},a}();a.touchTermsAndConditionsService=b}(b=a.common||(a.common={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(b){var c;!function(b){var c=function(a){function b(b,c,d,e){a.call(this,c,"TERMS","GLOBAL"),this.$rootScope=b,this.hgJs2nManagerSvc=c,this.hgTermsAndConditionsService=d,this.hgTouchTermsAndConditionsService=e,this.commands={recordTouchTermsAndConditionsCommand:this.handleRecordTouchTermsRequest,recordTermsAndConditionsCommand:this.handleRecordTermsRequest}}return __extends(b,a),b.prototype.handleRecordTouchTermsRequest=function(a,b,c){c.hgTouchTermsAndConditionsService.recordTouchTermsAndConditionsData()},b.prototype.handleRecordTermsRequest=function(a,b,c){c.hgTermsAndConditionsService.recordTermsAndConditionsData()},b}(a.core.js2n.js2nServiceBase);b.termsAndConditionsJs2nAdapter=c}(c=b.common||(b.common={}))}(b=a.js2n||(a.js2n={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(a,b,c){this.$http=a,this.localStorageService=b,this.provider=c,this.mementoKeys=[],this.localStorageService.cookie.clearAll()}return a.prototype.saveState=function(a,b){this.isStateExists(a)||this.mementoKeys.push(a),this.provider.setState(b),this.localStorageService.isSupported?this.localStorageService.set(a,this.provider.createMemento()):this.localStorageService.cookie.set(a,JSON.stringify(this.provider.createMemento()))},a.prototype.restoreState=function(a){var b;return b=this.localStorageService.isSupported?this.localStorageService.get(a):JSON.parse(this.localStorageService.cookie.get(a)),this.provider.setMemento(b),this.provider.getState()},a.prototype.Remove=function(a){this.isStateExists(a)&&(this.mementoKeys.splice(this.mementoKeys.indexOf(a),1),this.localStorageService.remove(a))},a.prototype.RemoveAll=function(){angular.forEach(this.mementoKeys,function(a){this.Remove(a)})},a.prototype.isStateExists=function(a){return!!(this.mementoKeys&&!_.isEmpty(this.mementoKeys)&&this.mementoKeys.indexOf(a)>-1)},a.$inject=["$http","localStorageService","hgMementoProvider"],a}();a.hgMementoService=b}(b=a.common||(a.common={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(){}return a.prototype.createMemento=function(){var a={};return a=this.state},a.prototype.setMemento=function(a){this.state=a},a.prototype.setState=function(a){this.state=a},a.prototype.getState=function(){return this.state},a}();a.hgMementoProvider=b}(b=a.common||(a.common={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(){}return a.prototype.setState=function(a){this.state=a},a.prototype.getState=function(){return this.state},a}();a.hgMemento=b}(b=a.common||(a.common={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b;!function(a){var b=function(){function a(){this.managedVersionStatus=0,this.disclosureUrl="",this.shouldPresentApplicationTerms=!1,this.applicationTermsUrl=""}return a}();a.applicationLaunchModel=b}(b=a.Models||(a.Models={}))}(b=a.auth||(a.auth={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b;!function(a){var b=function(){function a(){this.authenticationStatus=0,this.refreshToken="",this.shouldPresentApplicationTerms=!1,this.applicationTermsUrl="",this.shouldPresentTouchTerms=!1,this.touchTermsUrl="",this.hasPendingDeposits=!1,this.shouldPresentProgramSelector=!1,this.hasPendingProfile=!1,this.hasPendingBehavioralQuestions=!1,this.failureMessage=""}return a}();a.authenticateUserModel=b}(b=a.Models||(a.Models={}))}(b=a.auth||(a.auth={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(b){var c;!function(b){var c=function(a){function b(b,c,d){a.call(this,c,"MOVEMONEY","GLOBAL"),this.$rootScope=b,this.hgJs2nManagerSvc=c,this.hgMoveMoneyNavigationService=d,this.commands={launchMoveMoneyCommand:this.handleLaunchMoveMoneyRequest},this.registerMoveMoneyLaunchHandler()}return __extends(b,a),b.prototype.registerMoveMoneyLaunchHandler=function(){var a=this;this.$rootScope.$on("HG_MOVEMONEY_LAUNCH",function(b,c){a.hgMoveMoneyNavigationService.navigateToMoveMoney(c)})},b.prototype.handleLaunchMoveMoneyRequest=function(a,b,c){var d={},e=a.Data;e&&(d.type=1..toString(),"income"==e.type&&(d.type=2..toString())),"oneTime"==e.selectedAction&&(d.amount=e.oneTimeAmount,d.isOnetime=!0),"monthly"==e.selectedAction&&(d.amount=e.monthlyAmount,d.isOnetime=!1),e.returnState&&e.returnState.length>0?d.returnState=e.returnState:d.returnState="charts.goal.goalMain",e.isWithdrawal?d.isWithdrawal=!0:d.isWithdrawal=!1,c.hgMoveMoneyNavigationService.navigateToMoveMoney(d)},b}(a.core.js2n.js2nServiceBase);b.moveMoneyNavigationServiceJs2nAdapter=c}(c=b.moveMoney||(b.moveMoney={}))}(b=a.js2n||(a.js2n={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(a,b,c,d){this.$window=a,this.$state=b,this.hgContextSvc=c,this.hgMoneyTransferSvc=d}return a.prototype.navigateToMoveMoney=function(a){var b=this,c=this;this.hgContextSvc.showSpinner(),this.hgMoneyTransferSvc.getMoveMoneyLaunchState(parseInt(a.type),a.isWithdrawal,a.isOnetime).then(function(b){b&&b.length>0&&("moveMoney.funding.transferSetup.editTransferGoalMMData"!=b&&"moveMoney.edit"!=b||c.setMoveMoneyRouteData(a,b),c.$state.go(b))}).finally(function(){b.hgContextSvc.hideSpinner(!0)})},a.prototype.setMoveMoneyRouteData=function(a,b){var c=this.$state.get(b);c.type=a.type.toString(),c.amount=a.amount,c.isOnetime=a.isOnetime,c.returnState=a.returnState,a.isWithdrawal?c.isWithdrawal=!0:c.isWithdrawal=!1},a.$inject=["$window","$state","hgContextSvc","hgMoneyTransferSvc"],a}();a.moveMoneyNavigationService=b}(b=a.moveMoney||(a.moveMoney={}))}(hg||(hg={}));var gtx;!function(a){a.plots=[{value:"percentiles",name:"Portfolio Value Percentiles"},{value:"distribution",name:"Portfolio Value Distribution"},{value:"prng",name:"Prng Value Distribution"}],function(a){a[a.Unknown=0]="Unknown",a[a.OnTarget=1]="OnTarget",a[a.AtRisk=2]="AtRisk",a[a.OffTarget=3]="OffTarget"}(a.GoalStatus||(a.GoalStatus={}));a.GoalStatus;!function(a){a[a.NotSet=0]="NotSet",a[a.InProgress=1]="InProgress",a[a.NotAccomplished=2]="NotAccomplished",a[a.Accomplished=3]="Accomplished"}(a.GoalState||(a.GoalState={}));a.GoalState;!function(a){a[a.Savings=0]="Savings",a[a.Income=1]="Income"}(a.GoalTypes||(a.GoalTypes={}));a.GoalTypes}(gtx||(gtx={}));var gtx;!function(a){var b=function(){function b(b){var c=this;this.setConfig=function(a){c.init(a)},this.getModelsByName=function(a){var b;return b=c.config.csiaModelCMEs.filter(function(b){return b.modelName===a})},this.getModelsById=function(a,b){var d=c.config.csiaModelCMEs.filter(function(c){var d=c.state?c.state:"";return b=b?b:"",c.modelRefId===a&&d==b});return d},this.isValidDate=function(a){return"[object Date]"===Object.prototype.toString.call(a)&&!isNaN(a.getTime())},this.doSimulation=function(b){if(b.goals.currentBalance=b.goals.currentBalance||0,b.goals.oneTimeDeposit=b.goals.oneTimeDeposit||0,b.goals.values.targetBalance=b.goals.values.targetBalance||0,b.goals.values.recurringIncome=b.goals.values.recurringIncome||0,b.goals.values.recurringDeposit=b.goals.values.recurringDeposit||0,isNaN(b.goals.oneTimeDeposit))throw new Error("data.goals.oneTimeDeposit is not a number");if(isNaN(b.goals.currentBalance))throw new Error("data.goals.currentBalance is not a number");if(!c.isValidDate(b.goals.simulationStartDate)&&(null!=b.goals.simulationStartDate||void 0!=b.goals.simulationStartDate))throw new Error("data.goals.simulationStartDate is not a Date");if(!c.isValidDate(b.goals.dates.targetEnd))throw new Error("data.goals.dates.targetEnd is not a Date");if(isNaN(b.goals.values.recurringDeposit))throw new Error("data.goals.values.recurringDeposit is not a number");if(isNaN(b.goals.values.recurringIncome))throw new Error("data.goals.values.recurringIncome is not a number");if(isNaN(b.goals.values.targetBalance))throw new Error("data.goals.values.targetBalance is not a number");var d=new Date;if(null==b.goals.simulationStartDate&&void 0==b.goals.simulationStartDate||(d=b.goals.simulationStartDate),d>b.goals.dates.targetEnd)throw new Error("simulation end date must be later than start date");var e=b.goals.name==a.GoalTypes.Income;if(e&&b.goals.values.recurringDeposit-b.goals.values.recurringIncome>0)throw new Error("Income goal simulations expect net periodic amounts to be negative");if(!e&&b.goals.values.recurringDeposit-b.goals.values.recurringIncome<0)throw new Error("Savings goal simulations expect net periodic amounts to be positive");if(b.goals.oneTimeDeposit<0)throw new Error("A One time deposit should be a positive value");e&&(b.goals.values.targetBalance=0);var f=0,g=[];f=c.monthsDiff(d,b.goals.dates.targetEnd),g=c.buildExpectedMonths(f,e),b.config&&c.init(b.config);var h,i=null!=c.config.csiaModelCMEs||void 0!=c.config.csiaModelCMEs;if(null!=b.goals.model||void 0!=b.goals.model){if(!i)throw new Error("cannot search model with no CME data available");var j=c.getModelsByName(b.goals.model);if(0==j.length)throw new Error("data.goals.model was provided, but no matching model was found");if(j.length>1)throw new Error("data.goals.model was provided, but more than 1 matching model was found");h=j[0]}else if(null!=b.goals.modelId||void 0!=b.goals.modelId){if(!i)throw new Error("cannot search model with no CME data available");var k=c.getModelsById(b.goals.modelId,b.goals.muniState);if(0==k.length)throw new Error("data.goals.modelId was provided, but no matching model was found");if(k.length>1)throw new Error("data.goals.modelId was provided, but more than 1 matching model was found");h=k[0]}var l,m;if(!h)throw new Error("could not resolve model");l=h.mean,m=h.standardDeviation;var n=0,o=0,p=0,q=[],r=-1;try{var s=b.goals.currentBalance+b.goals.oneTimeDeposit,t=b.goals.values.recurringDeposit-b.goals.values.recurringIncome;r=g.indexOf(f,0);var u=Date.now(),v=c.simulator.run(c.config.iterations,g,l,m,s,t);n=Date.now()-u,u=Date.now();var w=c.pivotAndSort(v);p=Date.now()-u;var x=e?c.config.drawDownPercentiles:c.config.growthPercentiles,y=c.getSeries(w,x,f,g,e);c.config.plot&&("distribution"===c.config.plot.value?q=c.getValueDistribution(w[r],100):"prng"===c.config.plot.value&&(q=c.getPrngDistribution(c.simulator.getRates(c.config.iterations,f))))}catch(a){console.log(a)}finally{return{timers:{simulation:n,buildRates:o,pivot:p},results:c.getGoalData(w,b.goals,x,y,r,g,e),valueDistribution:q}}},this.duration=0,this.buildRates=0,this.pivot=0,this.init(b)}return b.prototype.init=function(b){if(b||(b={growthPercentiles:{low:25,mid:50,atRisk:50,high:75,offTarget:75,recommendation:49},drawDownPercentiles:{low:10,mid:25,atRisk:25,high:50,offTarget:50,recommendation:24},iterations:1e3,seed:"SWI",plot:a.plots[0],buckets:50},b.csiaModelCMEs=a.models),isNaN(b.growthPercentiles.low)||b.growthPercentiles.low<0||b.growthPercentiles.low>100)throw new Error("growthPercentiles.low is not a number or not between 0 and 100");if(isNaN(b.growthPercentiles.mid)||b.growthPercentiles.mid<0||b.growthPercentiles.mid>100)throw new Error("growthPercentiles.mid is not a number or not between 0 and 100");if(isNaN(b.growthPercentiles.high)||b.growthPercentiles.high<0||b.growthPercentiles.high>100)throw new Error("growthPercentiles.high is not a number or not between 0 and 100");if(isNaN(b.growthPercentiles.atRisk)||b.growthPercentiles.atRisk<0||b.growthPercentiles.atRisk>100)throw new Error("growthPercentiles.atRisk is not a number or not between 0 and 100");if(isNaN(b.growthPercentiles.offTarget)||b.growthPercentiles.offTarget<0||b.growthPercentiles.offTarget>100)throw new Error("growthPercentiles.offTarget is not a number or not between 0 and 100");if(isNaN(b.growthPercentiles.recommendation)||b.growthPercentiles.recommendation<0||b.growthPercentiles.recommendation>100)throw new Error("growthPercentiles.recommendation is not a number or not between 0 and 100");if(b.growthPercentiles.offTarget<b.growthPercentiles.atRisk)throw new Error("Growth offTarget percentile cannot be less than atRisk percentile");if(isNaN(b.drawDownPercentiles.low)||b.drawDownPercentiles.low<0||b.drawDownPercentiles.low>100)throw new Error("drawDownPercentiles.low is not a number or not between 0 and 100");if(isNaN(b.drawDownPercentiles.mid)||b.drawDownPercentiles.mid<0||b.drawDownPercentiles.mid>100)throw new Error("drawDownPercentiles.mid is not a number or not between 0 and 100");if(isNaN(b.drawDownPercentiles.high)||b.drawDownPercentiles.high<0||b.drawDownPercentiles.high>100)throw new Error("drawDownPercentiles.high is not a number or not between 0 and 100");if(isNaN(b.drawDownPercentiles.atRisk)||b.drawDownPercentiles.atRisk<0||b.drawDownPercentiles.atRisk>100)throw new Error("drawDownPercentiles.atRisk is not a number or not between 0 and 100");if(isNaN(b.drawDownPercentiles.offTarget)||b.drawDownPercentiles.offTarget<0||b.drawDownPercentiles.offTarget>100)throw new Error("drawDownPercentiles.offTarget is not a number or not between 0 and 100");if(isNaN(b.drawDownPercentiles.recommendation)||b.drawDownPercentiles.recommendation<0||b.drawDownPercentiles.recommendation>100)throw new Error("drawDownPercentiles.recommendation is not a number or not between 0 and 100");if(b.drawDownPercentiles.offTarget<b.drawDownPercentiles.atRisk)throw new Error("Drawdown offTarget percentile cannot be less than atRisk percentile");if(isNaN(b.iterations)||b.iterations<0||b.iterations>2e4)throw new Error("iterations is not a number or less than 0 or greater than 20000");if(0==b.csiaModelCMEs.length)throw new Error("No capital market expectations are available for the simulator.");for(var c=0;c<b.csiaModelCMEs.length;c++){var d=b.csiaModelCMEs[c];if(isNaN(d.standardDeviation)||d.standardDeviation<0)throw new Error("CME standard deviation must be zero or greater.");if(isNaN(d.mean)||d.mean<0)throw new Error("Expected CME mean to be zero or greater.")}this.config=b,this.simulator=new a.PortfolioLevelSim(this.config.seed)},b.prototype.getTypedRowVector=function(a,b){for(var c=new Float64Array(a.length),d=0;d<a.length;d++)c[d]=a[d][b];return c},b.prototype.getRowVector=function(a,b){for(var c=[],d=0;d<a.length;d++)c.push(a[d][b]);return c},b.prototype.pivotAndSort=function(b){for(var c=[],d=0;d<b[0].length;d++){var e=this.getTypedRowVector(b,d);a.radixSort(e),c.push(e)}return c},b.prototype.getSeries=function(a,b,c,d,e){var f={},g=Math.round(a[0].length*(b.high/100));if(f.high=this.getRowVector(a,g),g=Math.round(a[0].length*(b.mid/100)),f.mid=this.getRowVector(a,g),g=Math.round(a[0].length*(b.low/100)),f.low=this.getRowVector(a,g),f.months=d,e){var h=f.high.indexOf(0,0);h>0&&(h<f.months.length&&f.months[h]<c&&(h=f.months.indexOf(c)),++h,f.high=f.high.slice(0,h),f.mid=f.mid.slice(0,h),f.low=f.low.slice(0,h),f.months=f.months.slice(0,h))}return f},b.prototype.getValueAtPercentile=function(a,b,c){var d=Math.round(a[0].length*(c/100)),e=a[b][d];return e},b.prototype.getPeriodsToTarget=function(a,b,c,d,e,f){var g=Math.round(a[0].length*(e/100)),h=-1;if(f){for(var i=0;i<=c;i++)if(a[i][g]<b&&Math.abs(a[i][g]-b)>.01*b){h=i-1;break}}else{for(var i=c;i>=0;i--)if(a[i][g]<=b&&Math.abs(a[i][g]-b)>.01*b){h=i+1;break}h>c?h=-1:h===-1&&(h=0)}return h>=0&&(h=d[h]),h},b.prototype.getPeriodsToZero=function(a,b,c,d){for(var e=Math.round(a[0].length*(d/100)),f=-1,g=0;g<=b;g++)if(a[g][e]<=0){f=g;break}return f>=0&&(f=c[f]),f},b.prototype.getGoalData=function(b,c,d,e,f,g,h){var i={};i.simulationMonths=g[f],i.projection={low:this.getValueAtPercentile(b,f,d.low),mid:this.getValueAtPercentile(b,f,d.mid),atRisk:this.getValueAtPercentile(b,f,d.atRisk),high:this.getValueAtPercentile(b,f,d.high),offTarget:this.getValueAtPercentile(b,f,d.offTarget)};var j=-1;h?(j=this.getPeriodsToZero(b,f,g,d.offTarget),j>=0?i.activeStatus=a.GoalStatus.OffTarget:(j=this.getPeriodsToZero(b,f,g,d.atRisk),j>=0?i.activeStatus=a.GoalStatus.AtRisk:i.activeStatus=a.GoalStatus.OnTarget)):c.values.targetBalance>i.projection.offTarget?i.activeStatus=a.GoalStatus.OffTarget:c.values.targetBalance>i.projection.atRisk?i.activeStatus=a.GoalStatus.AtRisk:i.activeStatus=a.GoalStatus.OnTarget,i.targetBalance=c.values.targetBalance,i.currentBalance=c.currentBalance,i.recurringIncome=c.values.recurringIncome,i.recurringDeposit=c.values.recurringDeposit,i.percentiles=d,i.monthsToTarget={low:this.getPeriodsToTarget(b,c.values.targetBalance,f,g,d.low,h),mid:this.getPeriodsToTarget(b,c.values.targetBalance,f,g,d.mid,h),high:this.getPeriodsToTarget(b,c.values.targetBalance,f,g,d.high,h)};var k=g.length-1;i.monthsToZero={low:this.getPeriodsToZero(b,k,g,d.low),mid:this.getPeriodsToZero(b,k,g,d.mid),high:this.getPeriodsToZero(b,k,g,d.high)},i.recommendations={recurringDeposit:-1,oneTimeDeposit:-1,recurringIncome:-1};try{(h||i.activeStatus!=a.GoalStatus.OnTarget)&&(i.recommendations=this.getRecommendations(b,c,d,f,g,h))}catch(a){}i.presentValueProjection={atRisk:-1,offTarget:-1};try{i.activeStatus==a.GoalStatus.OnTarget&&(h?i.presentValueProjection=this.getxFactorDrawdown(b,c,d,f,g,h):i.presentValueProjection=this.getxFactor(b,c,d,f,g,h))}catch(a){}return i.series=e,i},b.prototype.getRecommendations=function(b,c,d,e,f,g){var h={recurringDeposit:-1,oneTimeDeposit:-1,recurringIncome:-1};if(g)h=this.getIncomeRecommendation(b,c,d,e,f);else{var i=d.recommendation,j=this.getValueAtPercentile(b,0,i),k=this.getValueAtPercentile(b,e,i),l=c.values.recurringDeposit-c.values.recurringIncome,m=f[e],n=a.Rate(m,-1*l,-1*j,k,a.flowType.BeginningofPeriod),o=-1*a.PV(n,m,-1*l,c.values.targetBalance,a.flowType.BeginningofPeriod);o-=c.currentBalance,o=o<=0?0:o;var p=-1*a.PMT(n,m,-1*c.currentBalance,c.values.targetBalance,a.flowType.BeginningofPeriod);h.recurringDeposit=10*Math.round(p/10),h.oneTimeDeposit=10*Math.round(o/10)}return h},b.prototype.getIncomeRecommendation=function(b,c,d,e,f){var g=d.recommendation,h=this.getValueAtPercentile(b,0,g),i=this.getValueAtPercentile(b,e,g),j=c.values.recurringIncome-c.values.recurringDeposit,k=f[e],l=k;if(0==i){l=this.getPeriodsToZero(b,e,f,g);for(var m=0,n=0;n<f.length&&!(f[n]>=l);n++)m=n;m=m?m:1,i=this.getValueAtPercentile(b,m,g),k=f[m]}var o=-1,p=-1;if(i>0){var q=a.Rate(k,j,-1*h,i,a.flowType.BeginningofPeriod);
p=a.PMT(q,f[e],-1*c.currentBalance,0,a.flowType.BeginningofPeriod);var o=-1*a.PV(q,f[e],j,0,a.flowType.BeginningofPeriod);o-=c.currentBalance,o=o<=0?0:o}else p=h/f[e],o=j*f[e],o-=c.currentBalance;o=10*Math.round(o/10),p=10*Math.round(p/10);var r={recurringDeposit:-1,oneTimeDeposit:o,recurringIncome:p};return r},b.prototype.getxFactor=function(b,c,d,e,f,g){var h={atRisk:0,offTarget:0},i=d.atRisk,j=this.getValueAtPercentile(b,0,i),k=this.getValueAtPercentile(b,e,i),l=f[e],m=a.Rate(l,-1*c.values.recurringDeposit,-1*j,k,a.flowType.BeginningofPeriod),n=-1*a.PV(m,l,-1*c.values.recurringDeposit,c.values.targetBalance,a.flowType.BeginningofPeriod);n=n<=0?0:n,h.atRisk=Math.ceil(n),i=d.offTarget,j=this.getValueAtPercentile(b,0,i),k=this.getValueAtPercentile(b,e,i);var m=a.Rate(l,-1*c.values.recurringDeposit,-1*j,k,a.flowType.BeginningofPeriod),n=-1*a.PV(m,l,-1*c.values.recurringDeposit,c.values.targetBalance,a.flowType.BeginningofPeriod);return n=n<=0?0:n,h.offTarget=Math.ceil(n),h},b.prototype.getxFactorDrawdown=function(b,c,d,e,f,g){var h={atRisk:0,offTarget:0},i=d.atRisk,j=this.getValueAtPercentile(b,0,i),k=this.getValueAtPercentile(b,e,i),l=f[e],m=l;if(0==k){m=this.getPeriodsToZero(b,e,f,i);for(var n=0,o=0;o<f.length&&!(f[o]>=m);o++)n=o;n=n?n:1,k=this.getValueAtPercentile(b,n,i),l=f[n]}var p=a.Rate(l,c.values.recurringIncome,-1*j,k,a.flowType.BeginningofPeriod),q=-1*a.PV(p,l,c.values.recurringIncome,c.values.targetBalance,a.flowType.BeginningofPeriod);if(q=q<0?0:q,h.atRisk=Math.ceil(q),i=d.offTarget,j=this.getValueAtPercentile(b,0,i),k=this.getValueAtPercentile(b,e,i),0==k){m=this.getPeriodsToZero(b,e,f,i);for(var n=0,o=0;o<f.length&&!(f[o]>=m);o++)n=o;n=n?n:1,k=this.getValueAtPercentile(b,n,i),l=f[n]}var p=a.Rate(l,c.values.recurringIncome,-1*j,k,a.flowType.BeginningofPeriod),q=-1*a.PV(p,l,c.values.recurringIncome,c.values.targetBalance,a.flowType.BeginningofPeriod);return q=q<0?0:q,h.offTarget=Math.ceil(q),h},b.prototype.getValueDistribution=function(a,b){for(var c=[],d=a[a.length-1]-a[0],e=d/(b-1),f=1;f<=b;f++)c.push([Math.ceil(e*f),0]);for(var f=0;f<a.length;f++){var g=Math.ceil(a[f]/e);g>=c.length&&(console.log("i:"+f+"  bucket:"+g+" vector[i]:"+a[f]+" v/i:"+a[f]/e),g=c.length),g<1&&(console.log("i:"+f+"  bucket:"+g+" vector[i]:"+a[f]+" v/i:"+a[f]/e),g=1),c[g-1][1]++}return c},b.prototype.getPrngDistribution=function(a){for(var b=[],c=32,d=8,e=d/c,f=0;f<=c;f++){var g=e*f-4;b.push([g,0])}for(var f=0;f<a.length-1;f++){var h=Math.ceil(a[f]/e+c/2);h<0?(console.log("i:"+f+"  bucket:"+h+" vector[i]:"+a[f]),h=0):h>c&&(console.log("i:"+f+"  bucket:"+h+" vector[i]:"+a[f]),h=c),b[h][1]++}return b},b.prototype.monthsDiff=function(a,b){var c=12*(b.getFullYear()-a.getFullYear());if(c-=a.getMonth(),c+=b.getMonth(),c+=1,c>721)throw new Error("The simulation cannot be greater than 60 years");if(c<1)throw new Error("The simulation cannot be shorter than 1 month");return c},b.prototype.buildExpectedMonths=function(a,b){var c=[];if(a<=60){a+=b?60:0;for(var d=0;d<=a;d++)c.push(d)}else{for(var e=Math.floor(a/12),d=0;d<=e;d++)c.push(12*d);if(a%12&&c.push(a),b){e*=12;for(var d=1;d<=5;d++)c.push(e+12*d);a%12&&c.push(a+60)}}return c},b}();a.MonteCarloSimulator=b}(gtx||(gtx={}));var gtx;!function(a){var b=function(){function b(b,c){var d=this;void 0===c&&(c=60),this.run=function(a,b,c,e,f,g){var h=[],i=0;d.mean=c,d.std=e;var j=b[b.length-1];d.addRates(d.getNeededRateCount(j,a));for(var k=0;k<a;k++){var l=new Float64Array(d.randnRates.buffer,8*i,j);i+=j,h.push(d.anIteration(f,g,l,b))}return h},this.getRates=function(a,b){var c=d.getNeededRateCount(b,a);d.addRates(c);var e=new Float64Array(d.randnRates.buffer,0,c),f=e.slice(0,c);return f},this.randnRates=new Float64Array(0),this.prng=new a.Randn(new a.Xor4096(b)),this.mean=0,this.std=0,this.MonthsToYearsBoundary=c}return b.prototype.getNeededRateCount=function(a,b){return Math.ceil(a/12)*b*12},b.prototype.addRates=function(a){var b=this.randnRates.length,c=a-b;if(c>0){var d=new Float64Array(a);d.set(this.randnRates,0);for(var e=0;e<c;e++)d[e+b]=this.prng.next();this.randnRates=d}return this.randnRates},b.prototype.compound=function(a,b,c,d,e){for(var f=a,g=0;g<e;g++){var h=(c[d+g]*this.std+this.mean)/100;if(f=(f+b)*(1+h),f<=0){f=0;break}}return f},b.prototype.anIteration=function(a,b,c,d){var e=d.length,f=new Float64Array(e);f[0]=Math.round(a);for(var g=0,h=0,i=1;i<e;i++){var j=d[i]-h;if(h=d[i],j<=0)throw new Error("the reporting months are not ordered lowest to highest");a=this.compound(a,b,c,g,j),a<=0&&(a=0,b=0),g+=j,f[i]=Math.round(a)}return f},b}();a.PortfolioLevelSim=b}(gtx||(gtx={}));var gtx;!function(a){a.models=[{modelRefId:"54af318c0df2dcdf93367e49",modelName:"Mercury - Return 1",mean:.3,standardDeviation:1.03},{modelRefId:"54af318c0df2dcdf93367e4a",modelName:"Mercury - Return 2",mean:.35,standardDeviation:1.49},{modelRefId:"54af318c0df2dcdf93367e4b",modelName:"Mercury - Return 3",mean:.39,standardDeviation:1.81},{modelRefId:"54af318c0df2dcdf93367e4c",modelName:"Mercury - Return 4",mean:.42,standardDeviation:2.22},{modelRefId:"54af318c0df2dcdf93367e4d",modelName:"Mercury - Return 5",mean:.46,standardDeviation:2.6},{modelRefId:"54af318c0df2dcdf93367e4e",modelName:"Mercury - Return 6",mean:.49,standardDeviation:3.04},{modelRefId:"54af318c0df2dcdf93367e4f",modelName:"Mercury - Return 7",mean:.53,standardDeviation:3.35},{modelRefId:"54af318c0df2dcdf93367e50",modelName:"Mercury - Return 8",mean:.55,standardDeviation:3.59},{modelRefId:"54af318c0df2dcdf93367e51",modelName:"Mercury - Return 9",mean:.57,standardDeviation:3.81},{modelRefId:"54af318c0df2dcdf93367e52",modelName:"Mercury - Return 10",mean:.59,standardDeviation:4.03},{modelRefId:"54af318c0df2dcdf93367e53",modelName:"Mercury - Return 11",mean:.61,standardDeviation:4.25},{modelRefId:"54af318c0df2dcdf93367e54",modelName:"Mercury - Return 12",mean:.63,standardDeviation:4.55},{modelRefId:"54af318c0df2dcdf93367e55",modelName:"Mercury - Muni Return 1",mean:.29,standardDeviation:1.13},{modelRefId:"54af318c0df2dcdf93367e56",modelName:"Mercury - Muni Return 2",mean:.34,standardDeviation:1.52},{modelRefId:"54af318c0df2dcdf93367e57",modelName:"Mercury - Muni Return 3",mean:.38,standardDeviation:1.83},{modelRefId:"54af318c0df2dcdf93367e58",modelName:"Mercury - Muni Return 4",mean:.41,standardDeviation:2.23},{modelRefId:"54af318c0df2dcdf93367e59",modelName:"Mercury - Muni Return 5",mean:.45,standardDeviation:2.6},{modelRefId:"54af318c0df2dcdf93367e5a",modelName:"Mercury - Muni Return 6",mean:.49,standardDeviation:3.03},{modelRefId:"54af318c0df2dcdf93367e5b",modelName:"Mercury - Muni Return 7",mean:.52,standardDeviation:3.35},{modelRefId:"54af318c0df2dcdf93367e5c",modelName:"Mercury - Muni Return 8",mean:.55,standardDeviation:3.58},{modelRefId:"54af318c0df2dcdf93367e5d",modelName:"Mercury - Muni Return 9",mean:.57,standardDeviation:3.81},{modelRefId:"54af318c0df2dcdf93367e5e",modelName:"Mercury - Muni Return 10",mean:.59,standardDeviation:4.03},{modelRefId:"54af318c0df2dcdf93367e5f",modelName:"Mercury - Muni Return 11",mean:.61,standardDeviation:4.25},{modelRefId:"54af318c0df2dcdf93367e60",modelName:"Mercury - Muni Return 12",mean:.63,standardDeviation:4.55},{modelRefId:"54af318c0df2dcdf93367e61",modelName:"Mercury - Income 1",mean:.31,standardDeviation:1.02},{modelRefId:"54af318c0df2dcdf93367e62",modelName:"Mercury - Income 2",mean:.4,standardDeviation:1.82},{modelRefId:"54af318c0df2dcdf93367e63",modelName:"Mercury - Income 3",mean:.47,standardDeviation:2.57},{modelRefId:"54af318c0df2dcdf93367e64",modelName:"Mercury - Muni Income 1",mean:.3,standardDeviation:1.11},{modelRefId:"54af318c0df2dcdf93367e65",modelName:"Mercury - Muni Income 2",mean:.39,standardDeviation:1.84},{modelRefId:"54af318c0df2dcdf93367e66",modelName:"Mercury - Muni Income 3",mean:.46,standardDeviation:2.58}]}(gtx||(gtx={}));var gtx;!function(a){var b=function(){function a(a){var b=this;this.random=function(){return(b.next()>>>0)/4294967296},null===a&&(a=Date.now().toString()),this.init(a)}return a.prototype.next=function(){var a,b,c=this.w,d=this.X,e=this.i;return this.w=c=c+1640531527|0,b=d[e+34&127],a=d[e=e+1&127],b^=b<<13,a^=a<<17,b^=b>>>15,a^=a>>>12,b=d[e]=b^a,this.i=e,b+(c^c>>>16)|0},a.prototype.init=function(a){var b,c,d,e,f,g=[],h=128;for(a===(0|a)?(c=a,a=null):(a+="\0",c=0,h=Math.max(h,a.length)),d=0,e=-32;e<h;++e)a&&(c^=a.charCodeAt((e+32)%a.length)),0===e&&(f=c),c^=c<<10,c^=c>>>15,c^=c<<4,c^=c>>>13,e>=0&&(f=f+1640531527|0,b=g[127&e]^=c+f,d=0==b?d+1:0);for(d>=128&&(g[127&(a&&a.length||0)]=-1),d=127,e=512;e>0;--e)c=g[d+34&127],b=g[d=d+1&127],c^=c<<13,b^=b<<17,c^=c>>>15,b^=b>>>12,g[d]=c^b;this.w=f,this.X=g,this.i=d},a}();a.Xor4096=b}(gtx||(gtx={}));var gtx;!function(a){var b=function(){function a(a){var b=this;this.next=function(){var a,c,d;if(b.haveNext)return b.haveNext=!1,b.nextRandn;do{var e=b.prng.random(),f=b.prng.random();a=2*e-1,c=2*f-1,d=a*a+c*c}while(d>=1||0===d);var g=Math.sqrt(-2*Math.log(d)/d);return b.nextRandn=c*g,b.haveNext=!0,a*g},this.haveNext=!1,this.nextRandn=0,this.prng=a}return a}();a.Randn=b}(gtx||(gtx={}));var gtx;!function(a){var b=function(){function a(){var a=this;this.sort=function(b){for(var c,d=new Int32Array(b.buffer,b.byteOffset,b.byteLength>>2),e=Math.ceil(8*b.BYTES_PER_ELEMENT/a.radixBits),f=a.maxRadix*(e-1),g=1<<(8*b.BYTES_PER_ELEMENT-1)%a.radixBits,h=(g<<1)-1,i=new Int32Array(b.byteLength>>2),j=0,k=a.maxRadix*e;j<k;j++)a.histograms[j]=0;a.histogram(d,f,h);for(var l=0;l<=f;l+=a.maxRadix)for(var m=l,n=0;m<l+a.maxRadix;m++){var o=a.histograms[m]+n;a.histograms[m]=n-1,n=o}var p=0;if(e--,e)for(a.flipFloat64(d,i),c=i,i=d,d=c;++p<e;)a.innerFloat64(d,i,p),c=i,i=d,d=c;return a.unflipFloat64(d,i,p,g),new Float64Array(i.buffer)},this.maxRadix=1<<(this.radixBits=11),this.radixMask=this.maxRadix-1,this.histograms=new Int32Array(this.maxRadix*Math.ceil(64/this.radixBits))}return a.prototype.flipFloat64=function(a,b){for(var c=0,d=a.length;c<d;c++){var e=a[c],f=a[++c],g=f>>31;f^=2147483648|g,e^=g,g=++this.histograms[e&this.radixMask]<<1,b[g++]=e,b[g]=f}},a.prototype.unflipFloat64=function(a,b,c,d){for(var e=(d<<1)-1,f=0,g=a.length,h=c*this.maxRadix,i=c*this.radixBits-32;f<g;f++){var j=a[f],k=a[++f],l=k>>>i&e,m=~k>>31;l=++this.histograms[h+l]<<1,b[l++]=j^m,b[l]=k^(2147483648|m)}},a.prototype.innerFloat64=function(a,b,c){for(var d=c*this.radixBits,e=this.radixMask,f=0,g=32-d,h=d<32&&d>32-this.radixBits?(e=-1>>>d&this.radixMask,f=0,-1<<g&this.radixMask):d>=32?(d-=32,g+=32,e=0,f=this.radixMask,0):0,i=0,j=a.length,k=c*this.maxRadix,d=c*this.radixBits;i<j;i++){var l=a[i],m=a[++i],n=++this.histograms[k+(l>>>d&e|m>>>d&f|m<<g&h)]<<1;b[n++]=l,b[n]=m}},a.prototype.histogram=function(a,b,c){for(var d=0,e=a.length;d<e;d++){var f=a[d],g=a[++d],h=g>>31;g^=2147483648|h,f^=h;for(var i=0,j=0;j<=32-this.radixBits;i+=this.maxRadix,j+=this.radixBits)this.histograms[i+(f>>>j&this.radixMask)]++;for(this.histograms[i+((g<<32-j|f>>>j)&this.radixMask)]++,j+=this.radixBits-32,i+=this.maxRadix;i<b;i+=this.maxRadix,j+=this.radixBits)this.histograms[i+(g>>>j&this.radixMask)]++;this.histograms[i+(g>>>j&c)]++}},a}(),c=new b;a.radixSort=c.sort}(gtx||(gtx={}));var gtx;!function(a){function b(a,b,c,d){void 0===b&&(b=.1),void 0===c&&(c=1e-7),void 0===d&&(d=20);for(var e=Number.NaN,f=b,g=0,h=0;h<d;h++){var i=a(f),j=(a(f+c)-a(f-c))/(2*c),g=f-i/j;if(Math.abs(g-f)<=c){e=g;break}f=g}return e}function c(c,d,e,f,h,i){if(void 0===f&&(f=0),void 0===h&&(h=g.endOfPeriod),void 0===i&&(i=.01),isNaN(c)||c<0)throw new Error("Rate requires the periods parameter be >= zero");if(isNaN(d))throw new Error("Rate requires a periodic payment parameter");if(isNaN(e))throw new Error("Rate requires a present value parameter");var j=function(b){return a.FV(b,c,d,e,h)-f},k=b(j,i);return isNaN(k)&&(k=b(j,i/10)),k}function d(a,b,c,d,e){if(void 0===d&&(d=0),void 0===e&&(e=g.endOfPeriod),isNaN(a))throw new Error("FV requires a rate parameter");if(isNaN(b)||b<0)throw new Error("FV requires the periods parameter be >= zero");if(isNaN(c))throw new Error("FV requires a periodic payment parameter");var f=0;if(0==a)f=-d-c*b;else{e=e?g.BeginningofPeriod:g.endOfPeriod;var h=Math.pow(1+a,b);f=-c*(1+a*e)*(h-1)/a-d*h}return f}function e(a,b,c,d,e){if(void 0===d&&(d=0),void 0===e&&(e=g.endOfPeriod),isNaN(a))throw new Error("PV requires a rate parameter");if(isNaN(b)||b<0)throw new Error("PV requires the periods parameter be >= zero");if(isNaN(c))throw new Error("PV requires a periodic payment parameter");if(a==-1)throw Error("PV rate parameter cannot be -100%");var f=0;if(0==a)f=-d-c*b;else{e=e?g.BeginningofPeriod:g.endOfPeriod;var h=Math.pow(1+a,b);f=(-c*(1+a*e)*(h-1)/a-d)/h}return f}function f(a,b,c,d,e){if(void 0===d&&(d=0),void 0===e&&(e=g.endOfPeriod),isNaN(a))throw new Error("PMT requires a rate parameter");if(isNaN(b)||b<0)throw new Error("PMT requires the periods parameter be >= zero");if(isNaN(c))throw new Error("PMT requires a present value parameter");if(a==-1)throw Error("PMT rate parameter cannot be -100%");var f=0;if(0==a)b>=1&&(f=-(d+c)/b);else{var h=Math.pow(1+a,b);f=-(a*(d+c*h))/((h-1)*(e?1+a:1))}return f}!function(a){a[a.endOfPeriod=0]="endOfPeriod",a[a.BeginningofPeriod=1]="BeginningofPeriod"}(a.flowType||(a.flowType={}));var g=a.flowType;a.Rate=c,a.FV=d,a.PV=e,a.PMT=f}(gtx||(gtx={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(b){var c=function(a){function b(b,c,d,e,f,g,h,i,j,k,l){a.call(this,c,d,e,f),this.$rootScope=b,this.$q=c,this.$timeout=d,this.$http=e,this.contextSvc=f,this.$filter=g,this.hgRemoteAssetSvc=h,this.$window=i,this.$sce=j,this.$modal=k,this.$state=l,this.USE_MOCK_DATA=!0,this.q=c,this.http=e,this.window=i,this.sce=j,this.modal=k}return __extends(b,a),b.prototype.getPerformanceData=function(a,b,c){var d=this,e=this.contextSvc.getActivePortfolioId()?this.contextSvc.getActivePortfolioId():this.contextSvc.getMongoActiveAccount(),f=this.getBenchmark()?this.getBenchmark().toString():"";a=void 0==a?"inception":a;var g=new Object,h="";b&&c&&"custom"==a&&(h=[moment(b).format("YYYY-MM-DD").toString(),moment(c).format("YYYY-MM-DD").toString()].toString());var i=this.contextSvc.appConfig.clientApiUrl+"/accounts/"+e+"/performance?report="+a+"&indices="+f+"&dates="+h;this.USE_MOCK_DATA=!1,this.USE_MOCK_DATA&&(i="/mock/perfme/benchmarkMock04.json",this.contextSvc.appConfig.url.indexOf("local")<0&&(i="/benchmark2/client"+i));var j=this;this.contextSvc.showSpinner();var k=this.q.defer(),l=this.contextSvc.getActiveAccount();l||(this.contextSvc.processAccounts(this.contextSvc.getSessionData()),l=this.contextSvc.getActiveAccount());var m="NotFunded"!=l.accountStatus&&"Invested"===l.accountStatus;if(this.$rootScope.allAccountsClosedFlag){var n={allAccountsClosedMessage:this.getAllAccountsClosedMessage()};this.contextSvc.hideSpinner(),k.resolve(n)}else m?this.http.get(i).success(function(a,b,c,d){if(!a||a.hasOwnProperty("Failure")){var e={badPerformanceData:!0,badPerformanceDataMsg1:j.contextSvc.appConfig.featureUnavailableMessage,badPerformanceDataMsg2:""};k.resolve(e)}else if(a.hasOwnProperty("status")&&"ERROR"==a.status){var f=a.hasOwnProperty("message")&&""!=a.message?a.message.toString().split("$"):[],h=f&&f[0]?f[0].toString():this.contextSvc.appConfig.featureUnavailableMessage.toString(),i=f&&f[1]?f[1].toString():"",e={badPerformanceData:!0,badPerformanceDataMsg1:h,badPerformanceDataMsg2:i};k.resolve(e)}else g=a,g=j.createBalanceDetails(g),k.resolve(g)}).error(function(a,b,c,d){k.reject(a)}).finally(function(){d.contextSvc.hideSpinner()}):(k.resolve(null),this.contextSvc.hideSpinner());return k.promise},b.prototype.getNativePerformanceChartData=function(a,b,c){var d;d="Since Inception"==a?"inception":"Quarter to Date"==a?"qtd":"Year to Date"==a?"ytd":"Custom"==a?"custom":"inception";var e=this.$q.defer(),f=[],g=[];return this.getPerformanceData(d,b,c).then(function(a){if(1==a.badPerformanceData){var b={status:"SUCCESS",message:a.badPerformanceDataMsg1+a.badPerformanceDataMsg2,messageTitle:""};return e.resolve(b),e.promise}var c=[],d=[],h=[];angular.forEach(a.charts.series[0].performanceData,function(a,b){c.push({x:new Date(a.x),y:a.y})}),angular.forEach(a.charts.series[0].valueData,function(a,b){d.push({x:new Date(a.x),y:a.y})}),angular.forEach(a.charts.series[0].contributionData,function(a,b){h.push({x:new Date(a.x),y:a.y})}),a.benchmarkPicker.selectedBenchmarkList&&angular.forEach(a.benchmarkPicker.selectedBenchmarkList,function(b,c){f=[],null!=a.charts.series[c+1]&&(angular.forEach(a.charts.series[c+1].performanceData,function(a,b){f.push({x:new Date(a.x),y:a.y})}),g.push({data:f,label:b.name}))});var i={charts:[{performanceChartType:"Performance",heroAmountHeader1:{label:"Your Investment Performance",dollar:a.balanceDetails.gainLossAmount,dollarFormatted:a.balanceDetails.gainLoss,dollarChange:a.balanceDetails.gainLossChange,percentage:a.charts.series[0].performancePercentage,percentageFormatted:a.charts.series[0].performancePercentageFormatted,percentageChange:a.charts.series[0].performancePercentageChange},benchmarkPicker:a.benchmarkPicker,series:[{data:c,label:"Performance"},{benchmarkData:g}]},{performanceChartType:"Account Value",heroAmountHeader1:{label:"Account Value",dollar:a.charts.series[0].valueAmount,dollarFormatted:a.charts.series[0].valueAmountFormatted},heroAmountHeader2:{label:"Contributions & Withdrawls",dollar:a.charts.series[0].contributionAmount,dollarFormatted:a.charts.series[0].contributionAmountFormatted},endingLabel:a.charts.asOfText,series:[{label:"Balances",data:d,beginningBalance:a.balanceDetails.beginningMarketValue,endingBalance:a.balanceDetails.endingMarketValue},{label:"Contributions",data:h,beginningBalance:a.charts.series[0].beginningContributionAmountFormatted,endingBalance:a.charts.series[0].contributionAmountFormatted}]}],gainLoss:{dollar:a.balanceDetails.gainLoss.replace("$",""),dollarChange:a.balanceDetails.gainLossChange,dollarFormatted:a.balanceDetails.gainLoss,label:"Since Inception",percentage:a.charts.series[0].performancePercentage,percentageChange:a.charts.series[0].performancePercentageChange,percentageFormatted:a.charts.series[0].performancePercentageFormatted,status:"SUCCESS"},componentsOfChangeLabel:"BALANCE DETAILS",componentsOfChange:a.componentsOfChange,timestamp:a.charts.asOfText,accountOpenDates:{start:moment(a.charts.investmentDate).toDate(),end:moment(a.charts.seriesEndDate).toDate()},range:{start:moment(a.charts.series[0].performanceData[0].x).toDate(),end:moment(a.charts.series[0].performanceData[a.charts.series[0].performanceData.length-1].x).toDate()},performanceChartTypes:["Investment Performance","Account Value"]};e.resolve(i)}),e.promise},b.prototype.createBalanceDetails=function(a){return a.componentsOfChange=Array(),a.componentsOfChange.push({textLabel:"Beginning market value",detailTextLabel:a.balanceDetails.beginningMarketValue,style:0},{textLabel:"My contributions",detailTextLabel:a.balanceDetails.contributions,style:1},{textLabel:"Withdrawals",detailTextLabel:a.balanceDetails.withdrawals,style:1},{textLabel:"Dividend payments",detailTextLabel:a.balanceDetails.dividendPayments,style:1},{textLabel:"Investment gain or loss",detailTextLabel:a.balanceDetails.investmentGainLoss,style:1},{textLabel:"Management fees",detailTextLabel:a.balanceDetails.managementFees,style:1},{textLabel:"Other fees",detailTextLabel:a.balanceDetails.otherFees,style:1},{textLabel:"Ending market value",detailTextLabel:a.balanceDetails.endingMarketValue,style:0}),a},b.prototype.benchmarkOverlay=function(a){var b=a.benchmarkPicker.benchmarkList,c=[],d=this,e=d.getBenchmark(),f=[];if(e&&e.length>0)for(var g=0;g<e.length;g++)angular.forEach(b,function(a,b){a.id===e[g]&&c.push(a)});else c=a.benchmarkPicker.selectedBenchmarkList;var h=function(b){f=b,d.saveBenchmark(f),d.getPerformanceData(a.selectedRangeName,a.customRange.startDate,a.customRange.endDate).then(function(b){b&&(a.balanceDetails=b.balanceDetails,a.charts.series=b.charts&&b.charts.series?b.charts.series:[],a.benchmarkPicker.selectedBenchmarkList=b.benchmarkPicker&&b.benchmarkPicker.selectedBenchmarkList&&b.benchmarkPicker.selectedBenchmarkList.length>0?b.benchmarkPicker.selectedBenchmarkList:[],d.createBalanceDetails(a),d.redrawPerformanceChart(a,a.selectedViewType,a.benchmarkPicker.selectedBenchmarkList))})};this.modal({templateUrl:"templates/assets/selectBenchmarkOverlay.html",controller:"hgSelectBenchmarkModalCtrl",resolve:{items:function(){return{benchmarkListParam:b,selectedBenchmarkListParam:c}},benchmarkSelected:function(){return h}},show:!0})},b.prototype.showDatePicker=function(a,b){return b=!!a},b.prototype.CreateDataLabelsOptions=function(a,b,c,d,e,f,g){a&&a.length>0&&(e&&""!==e&&"0"!==e&&(a[0].dataLabels={enabled:!0,borderRadius:5,borderWidth:1,color:"#fff",align:"left",y:b?b:5,data:e,backgroundColor:g?this.convertHexToRGB(g,90):d?this.convertHexToRGB("#F28B24",90):this.convertHexToRGB("#26FFFF",90),formatter:function(){return"<b>"+e+"</b><br/>"},style:{fontSize:"9px"}}),f&&""!==f&&"0"!==f&&1!==a.length&&(a[a.length-1].dataLabels={useHTML:!0,enabled:!0,borderRadius:5,borderWidth:0,color:"#fff",align:"right",backgroundColor:g?this.convertHexToRGB(g,90):d?this.convertHexToRGB("#F28B24",90):this.convertHexToRGB("#26FFFF",90),y:c?c:5,formatter:function(){return"<b>"+f+"</b><br/>"}}))},b.prototype.detectPlotOverlap=function(a,b,c){return c||(c=.05),a+b!=0?Math.abs((a-b)/((a+b)/2))<c:a==b},b.prototype.labelsThatOverlap=function(a,b,c){var d,e,f=this,g=[];return a&&null!==a&&void 0!==a&&a.length>1&&angular.forEach(a,function(h,i){if(b&&null!==b&&void 0!==b&&"performance"===b){var j=[];if(angular.forEach(a,function(b,h){if(i!==h&&(c?a[h]&&a[h].performanceData[0]&&a[i]&&a[i].performanceData[0]&&(d=f.detectPlotOverlap(a[h].performanceData[0].y,a[i].performanceData[0].y,1.8)):a[i]&&a[i].performanceData[a[i].performanceData.length-1]&&a[h]&&a[h].performanceData[a[h].performanceData.length-1]&&(d=f.detectPlotOverlap(a[i].performanceData[a[i].performanceData.length-1].y,a[h].performanceData[a[h].performanceData.length-1].y,1.8)),d))if(g&&null!==g&&void 0!==g&&g.length>0){var k,l=!1;e=0,angular.forEach(g,function(a,b){a.overlappingLables&&null!==a.overlappingLables&&void 0!==a.overlappingLables&&a.overlappingLables.length>0&&angular.forEach(a.overlappingLables,function(a,c){a===h&&(e=1,l||(l=!0),k=b)})}),1===e?l||k&&null!==k&&void 0!==k&&(g[k].overlappingLables.push(h),g[k].overlappingLables.sort(),l=!0):0!==e||l||(j.push(h),l=!0,e=0)}else e=0,j.push(h)}),0===e&&j&&null!==j&&void 0!==j&&j.length>0){j.push(i),j=j.sort();var k={seriesNumber:i,overlappingLables:j};g.push(k)}}else d=c?f.detectPlotOverlap(a[0].valueData[0].y,a[0].contributionData[0].y):f.detectPlotOverlap(a[0].valueData[a[0].valueData.length-1].y,a[0].contributionData[a[0].contributionData.length-1].y)}),{overlapResult:g,valueOverlap:d}},b.prototype.convertHexToRGB=function(a,b){a=a.replace("#","");var c=parseInt(a.substring(0,2),16),d=parseInt(a.substring(2,4),16),e=parseInt(a.substring(4,6),16),f="rgba("+c+","+d+","+e+","+b/100+")";return f},b.prototype.redrawPerformanceChart=function(a,c,d){void 0==a.selectedRangeName&&(a.selectedRangeName="inception"),void 0==a.selectedRange&&(a.selectedRange="Since Inception"),a.performanceRangeNames=b.performanceRangeNames,a.viewType=b.performanceViewType,this.initializeCustomRangeObject(a),this.initializeThemeAttribute(a),this.initialiseChartSeriesObject(c,a,d),this.setMobileDisplayClass(c,a)},b.prototype.getBenchmark=function(){var a=0;if(this.$rootScope.accounts?a=this.$rootScope.accounts.indexOf(this.contextSvc.getActiveAccount()):(this.contextSvc.processAccounts(this.contextSvc.getSessionData()),a=this.$rootScope.accounts.indexOf(this.contextSvc.getActiveAccount())),null!=this.window.localStorage.getItem(this.$rootScope.session.brkrCustId)){var b=JSON.parse(this.window.localStorage.getItem(this.$rootScope.session.brkrCustId)),c=void 0;angular.forEach(b,function(b,d){b.accountIndex==a&&(c=b.benchmark)});var d=[];return void 0!=c&&angular.forEach(c,function(a,b){d.push(a.id)}),d.length>0?d:void 0}},b.prototype.saveBenchmark=function(a){var b=0;this.$rootScope.accounts?b=this.$rootScope.accounts.indexOf(this.contextSvc.getActiveAccount()):(this.contextSvc.processAccounts(this.contextSvc.getSessionData()),b=this.$rootScope.accounts.indexOf(this.contextSvc.getActiveAccount()));var c={accountIndex:b,benchmark:a};a=[],this.window.localStorage.getItem(this.$rootScope.session.brkrCustId)&&(a=JSON.parse(this.window.localStorage.getItem(this.$rootScope.session.brkrCustId)),angular.forEach(a,function(c,d){c.accountIndex==b&&a.splice(d,1)})),a.push(c),this.window.localStorage.setItem(this.$rootScope.session.brkrCustId,JSON.stringify(a))},b.prototype.getDateRange=function(a){this.$state.go("charts.performance.performanceDateRange"),a.startDate=moment(a.startDate).format(),a.endDate=moment(a.endDate).format()},b.prototype.navigateToBenchmarkSelection=function(a){this.$rootScope.deviceInfo.isSmallScreen()&&this.$state.go("charts.performance.performanceSelectIndex"),this.benchmarkOverlay(a)},b.prototype.navigateToPerformance=function(){this.$state.go("charts.performance.performanceMain")},b.prototype.removeBenchmark=function(a,b){var c=this,d=b.benchmarkPicker.selectedBenchmarkList.indexOf(a);d>=0&&b.benchmarkPicker.selectedBenchmarkList.splice(d,1),this.saveBenchmark(b.benchmarkPicker.selectedBenchmarkList),this.getPerformanceData(b.selectedRangeName,b.customRange.startDate,b.customRange.endDate).then(function(a){a&&(b.balanceDetails=a.balanceDetails,b.charts.series=a.charts&&a.charts.series?a.charts.series:[],b.benchmarkPicker.selectedBenchmarkList=a.benchmarkPicker&&a.benchmarkPicker.selectedBenchmarkList&&a.benchmarkPicker.selectedBenchmarkList.length>0?a.benchmarkPicker.selectedBenchmarkList:[],c.createBalanceDetails(b),c.redrawPerformanceChart(b,b.selectedViewType,b.benchmarkPicker.selectedBenchmarkList))})},b.prototype.updatePerformanceChart=function(a,b){var c=this;b.selectedViewType=void 0!=a?a:"performance";var d=b.selectedViewType;"custom"!=b.selectedRangeName&&this.redrawPerformanceChart(b,d,b.benchmarkPicker.selectedBenchmarkList),this.getPerformanceData(b.selectedRangeName,b.customRange.startDate,b.customRange.endDate).then(function(a){a&&(b.balanceDetails=a.balanceDetails,b.charts.series=a.charts&&a.charts.series?a.charts.series:[],b.benchmarkPicker.selectedBenchmarkList=a.benchmarkPicker&&a.benchmarkPicker.selectedBenchmarkList&&a.benchmarkPicker.selectedBenchmarkList.length>0?a.benchmarkPicker.selectedBenchmarkList:[],c.createBalanceDetails(b),c.redrawPerformanceChart(b,d,b.benchmarkPicker.selectedBenchmarkList))})},b.prototype.initializeThemeAttribute=function(a){var c=this.contextSvc.customization.getThemeName();c||(c="theme01"),a.currentTheme={},a.currentTheme.borderColor=this.contextSvc.customization.getPaletteColor("AssetBorder"),a.currentTheme.textColor="theme02"==c?"#000":"#fff",a.currentTheme.lineColor=this.contextSvc.customization.getPaletteColor("PChart"),a.currentTheme.background="theme02"==c?"#fafafa":"#303f50",a.currentTheme.gridLine="theme02"==c?"#f0f0f0":"#000",a.currentTheme.labelBackground="theme02"==c?"#dcdcdc":"rgba(0, 0, 0, 0.7)",a.currentTheme.gradient="theme02"==c?"#fff":"rgba(2,0,0,0)",b.performanceXAxisOption.customXlabelStyle.color="theme02"==c?"#000":"#fff",this.$rootScope.isIIP&&(a.charts.series[0].performanceColor=this.contextSvc.customization.getPaletteColor("Stocks"),a.charts.series[0].valueColor=this.contextSvc.customization.getPaletteColor("Commodities"),a.charts.series[0].valueColor=this.contextSvc.customization.getPaletteColor("Cash"))},b.prototype.initializeCustomRangeObject=function(a){var c=this;a.customRange={},a.customRange.startDate=moment(a.charts.series[0].performanceData[1].x).format(),a.customRange.endDate=moment(a.charts.series[0].performanceData[a.charts.series[0].performanceData.length-1].x).format(),a.customRange.accountStartDate=moment(a.charts.investmentDate).format("MM/DD/YYYY"),a.customRange.accountEndDate=moment(a.charts.seriesEndDate).format("MM/DD/YYYY"),a.customRange.earliestAllowedEndDate=moment(a.customRange.startDate).add(1,"days").format(),a.customRange.latestAllowedStartDate=moment(a.customRange.endDate).subtract(1,"days").format(),a.customRange.earliestAllowedEndDate=moment(a.customRange.earliestAllowedEndDate).format("MM/DD/YYYY"),a.customRange.latestAllowedStartDate=moment(a.customRange.latestAllowedStartDate).format("MM/DD/YYYY"),a.customRange.dateOptions=b.dateOptions,a.customRange.openFirstDP=function(b){a.customRange.firstDP=c.showDatePicker(b,a.customRange.firstDP)},a.customRange.openSecondDP=function(b){a.customRange.secondDP=c.showDatePicker(b,a.customRange.secondDP)},a.confirmDateRange=function(b){a.selectedRange=b.text}},b.prototype.initialiseChartSeriesObject=function(a,c,d){var e,f=[],g=[],h=[],i=[],j=this;if("performance"==a){var k=j.labelsThatOverlap(c.charts.series,a,!1),l=this.processOverlapDataWithSeries(k,!1,c.charts.series);angular.forEach(c.charts.series[0].performanceData,function(a,b){f.push({x:moment(a.x).valueOf(),y:a.y})});var m={data:f,fillColor:this.convertHexToRGB(c.currentTheme.lineColor,10),color:c.charts.series[0].performanceColor,name:a,lineWidth:3},n=l&&null!==l&&void 0!==l&&l.length>0&&null!==l[0]&&l[0]?l[0]:void 0;this.CreateDataLabelsOptions(f,void 0,n,!1,"0",c.charts.series[0].performancePercentageFormatted,c.charts.series[0].performanceColor),d&&angular.forEach(d,function(b,d){if(h=[],null!=c.charts.series[d+1]){angular.forEach(c.charts.series[d+1].performanceData,function(a,b){h.push({x:moment(a.x).valueOf(),y:a.y})}),i.push({data:h,fillColor:j.convertHexToRGB(c.benchmarkPicker.selectedBenchmarkList[d].colorNormalhex,10),color:c.benchmarkPicker.selectedBenchmarkList[d].colorNormalhex,name:a,lineWidth:3,type:"line"});var e=l&&null!==l&&void 0!==l&&l.length>0&&null!==l[d+1]&&l[d+1]?l[d+1]:void 0;j.CreateDataLabelsOptions(h,void 0,e,!1,"0",c.benchmarkPicker.selectedBenchmarkList[d].percentageChange,c.benchmarkPicker.selectedBenchmarkList[d].colorNormalhex)}}),e={chartseries1:m,chartseries2:i[0]?i[0]:{},chartseries3:i[1]?i[1]:{},chartseries4:i[2]?i[2]:{},chartseries5:i[3]?i[3]:{},chartseries6:i[4]?i[4]:{}}}else{angular.forEach(c.charts.series[0].valueData,function(a,b){f.push({x:moment(a.x).valueOf(),y:a.y})}),angular.forEach(c.charts.series[0].contributionData,function(a,b){g.push({x:moment(a.x).valueOf(),y:a.y})});var k=j.labelsThatOverlap(c.charts.series,a,!1),o=j.labelsThatOverlap(c.charts.series,a,!0),p=o.valueOverlap?-15:10,q=k.valueOverlap?-15:10;this.CreateDataLabelsOptions(f,10,10,!1,c.balanceDetails.beginningMarketValue,c.balanceDetails.endingMarketValue,c.charts.series[0].valueColor),this.CreateDataLabelsOptions(g,p,q,!1,c.charts.series[0].beginningContributionAmountFormatted,c.charts.series[0].contributionAmountFormatted,c.charts.series[0].contributionColor);var m={data:f,fillColor:this.convertHexToRGB(c.charts.series[0].performanceColor,10),color:c.charts.series[0].valueColor,name:a,lineWidth:3},r={data:g,fillColor:this.convertHexToRGB(c.charts.series[0].performanceColor,10),color:c.charts.series[0].contributionColor,name:a,lineWidth:3,type:"line"};e={chartseries1:m,chartseries2:r}}var s=b.performanceXAxisOption;s.gridLineColor=c.currentTheme.gridLine;var t={showGridLines:!0,showXLabels:!0,xMinValue:void 0,xMaxValue:void 0,yAxisLocation:0,backgroundColor:c.currentTheme.background,IXAxisOption:s};c.chartSeries=e,c.chartOption=t},b.prototype.setMobileDisplayClass=function(a,b){"performance"==a?(b.viewType[0].mobileDisplayViewClass="btn mview-dashboard-select",b.viewType[1].mobileDisplayViewClass="btn"):(b.viewType[0].mobileDisplayViewClass="btn",b.viewType[1].mobileDisplayViewClass="btn mview-dashboard-select")},b.prototype.getDataLabelYPosition=function(a,b){if(b)switch(a){case 1:return-10;case 2:return-20;case 3:return-30;case 4:return-40;case 5:return-50;default:return 0}else switch(a){
case 0:return 10;case 1:return 20;case 2:return 30;case 3:return 40;case 4:return 50;case 5:return 60;default:return 5}},b.prototype.processOverlapDataWithSeries=function(a,b,c){var d=this,e=[];if(a&&null!==a&&void 0!==a&&null!==a.overlapResult&&void 0!==a.overlapResult&&a.overlapResult&&a.overlapResult.length>0){var f=[],g=[];angular.forEach(a.overlapResult,function(a,d){a.overlappingLables&&null!==a.overlappingLables&&void 0!==a.overlappingLables&&a.overlappingLables.length>0&&angular.forEach(a.overlappingLables,function(a,d){var e;e=b?{seriesNumber:a,seriesData:c[a].performanceData[0].y}:{seriesNumber:a,seriesData:c[a].performanceData[c[a].performanceData.length-1].y},null!==e&&void 0!==e&&(e.seriesData<0?f.push(e):g.push(e))})});var h=_.sortBy(f,function(a){return a.seriesData}).reverse(),i=_.sortBy(g,function(a){return a.seriesData});h&&null!==h&&void 0!==h&&h.length>0&&angular.forEach(h,function(a,b){e[a.seriesNumber]=d.getDataLabelYPosition(b,!1)}),i&&null!==i&&void 0!==i&&i.length>0&&angular.forEach(i,function(a,b){e[a.seriesNumber]=d.getDataLabelYPosition(b,!0)})}return e},b.prototype.getAllAccountsClosedMessage=function(){var a=this.contextSvc.getActiveAccount(),b=a&&a.AcctIdDisplay?a.AcctIdDisplay.toString():this.contextSvc.getAllAccountClosedFlag(),c=new Object;if(b){var d=this.contextSvc.appConfig.allAccountsClosedMessage.toString().replace("accountid",b.toString()).split(",");d&&d.length>0&&(c.message1=d[0],this.$rootScope.isSIP?c.message2=d[1]:this.$rootScope.isIIP&&(c.message2=d[2]))}return c},b.performanceRangeNames=[{value:"inception",text:"Since Inception"},{value:"qtd",text:"Quarter to Date"},{value:"ytd",text:"Year to Date"},{value:"custom",text:"Custom"}],b.performanceViewType=[{view:"performance",displayView:"Your Investment Performance",mobileDisplayView:"Performance",mobileDisplayViewClass:"btn"},{view:"value",displayView:"Account Value",mobileDisplayView:"Account Value",mobileDisplayViewClass:"btn"}],b.performanceXAxisOption={type:"datetime",gridLineWidth:1,gridLineColor:"",lineWidth:1,tickLength:5,tickWidth:1,tickPositioner:!1,labelsFormater:"dateFormat",units:[["day",[1,2,3]],["week",[1,2]],["month",[1,3,6]]],customXlabelStyle:{fontSize:"11px",color:"#fff",textOverflow:"none"}},b.dateOptions={formatYear:"yy",showWeeks:!1},b.$inject=["$rootScope","$q","$timeout","$http","hgContextSvc","$filter","hgRemoteAssetSvc","$window","$sce","$modal","$state"],b}(a.common.dataContextSvc);b.performanceSvc=c}(b=a.assets||(a.assets={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(b){var c=function(a){function b(b,c,d){a.call(this,b,"PERFORMANCE","GLOBAL"),this.hgJs2nManagerSvc=b,this.contextSvc=c,this.performanceSvc=d,this.commands={savePerformanceData:this.savePerformanceData,getPerformanceData:this.getPerformanceData}}return __extends(b,a),b.prototype.savePerformanceData=function(a,b,c){var d=a.Data.dateRangeType,e=a.Data.start,f=a.Data.end,g=a.Data.indicies;c.performanceSvc.saveBenchmark(g),c.performanceSvc.getNativePerformanceChartData(d,e,f).then(function(b){c.hgJs2nManagerSvc.send("savePerformanceData",a.CorrelationId,b,a.Context)})},b.prototype.getPerformanceData=function(a,b,c){c.performanceSvc.getNativePerformanceChartData().then(function(b){c.hgJs2nManagerSvc.send("getPerformanceData",a.CorrelationId,b,a.Context)})},b.$inject=["hgJs2nManagerSvc","hgContextSvc","hgPerformanceService"],b}(a.core.js2n.js2nServiceBase);b.performanceJs2nSvc=c}(b=a.assets||(a.assets={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){function b(a,b,c,d,e){var f=function(a){for(var b=d.pdfWhiteList,c=0;c<b.length;++c)if(a.toUpperCase().indexOf(b[c].toUpperCase())>0)return!0;return!1};return{link:function(g,h,i,j,k){var l=function(){var a=i.href,b=h.prop("target"),d=i.targetid,e="_blank"!=b&&!!d;if(e){var d=(h.prop("href"),i.targetid),f=c.getContentAppState(!0);if(f&&f.length>0){var g="#/"+f;d&&(g+="/"+d),h.prop("href",g),$(h).attr("data-ohref",a)}}};h.on("click",function(g){var j=i.href,k=i.targetid,l=h.prop("target");if("_blank"==l.toLowerCase()){if(e.device.isNative()){g.preventDefault();var m=h.attr("data-mime-type");m&&"application/pdf"===m.toLowerCase()||j.length>3&&".pdf"===j.substr(j.length-4)||f(j)?a.navigateToSelectedDocument(j):a.navigateToExternal(j)}}else if(j&&j.length>0){var n;if(d&&d.supportedUrlSchemas&&(n=d.supportedUrlSchemas),0===j.indexOf("#/")||b.supportedSchemes(j,n));else if(g.preventDefault(),k){var o=c.getContentAppState(!1);o&&o.length>0&&c.navigateTOThisState(o,{assetId:k})}}}),g.$on("$destroy",function(){h.off("click")}),l()},priority:100,restrict:"E"}}a.hgHtmlAnchor=b}(b=a.common||(a.common={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){function b(a,b,c){return{link:function(d,e,f){f.$observe("hgAssetId",function(a){a&&a.length>0?d.getRemoteAsset(e,a):e.html("").show()}),d.getRemoteAsset=function(b,e){var f=null;c.getRemoteAsset(e).then(function(c){f=d.getCMSBody(c),b.html(f),a(b.contents())(d)})},d.getCMSBody=function(a){var c=null;return c=b.getCMSBody(a)}},restrict:"E",scope:{hgAssetId:"@"}}}a.hgRemoteAsset=b}(b=a.common||(a.common={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){function b(a,b,c,d){return{link:function(e,f,g){g.$observe("hgAssetId",function(a){a&&a.length>0?e.getLocalAsset(f,a):f.html("").show()}),e.getLocalAsset=function(c,f){var g=null;f&&(g=a.get(f)),g?(g=e.getCMSBody(g),c.html(g),b(c.contents())(e)):d.getRemoteAsset(f).then(function(d){g=e.getCMSBody(d),g&&a.put(f,g),c.html(g),b(c.contents())(e)})},e.getCMSBody=function(a){var b=null;return a&&(b=c.getCMSBody(a)),b}},restrict:"E",scope:{hgAssetId:"@"}}}a.hgLocalAsset=b}(b=a.common||(a.common={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){function b(a,b){return{templateUrl:"templates/widget/accountSelectorWidget.html",restrict:"AE",scope:{itemsList:"=",disabledList:"=",selectedItem:"=",title:"@",headerTitle:"@",compId:"@",styleId:"@",filterItem:"=",hideBalance:"@",disableSelector:"="},controller:["$scope","hgCommonJs2nSvc","$modal",function(a,b,c){var d=function(b){a.selectedItem=b};a.open=function(b){c({templateUrl:"templates/widget/showAccountListOverlay.html",controller:"hgModalInstanceCtrl",customClass:"accounts-modal",scope:a,resolve:{items:function(){return a.itemsList},styleId:function(){return a.styleId},headerTitle:function(){return a.headerTitle},selectedItem:function(){return a.selectedItem},filterItem:function(){return a.filterItem},hideBalance:function(){return a.hideBalance},disabledList:function(){return a.disabledList},setSelectedItem:function(){return d}}})},a.onTapped=function(){var b=!1;a.disableSelector&&(b=!0),(!b&&a.itemsList&&a.itemsList.length>0||!b&&a.disabledList&&a.disabledList.length>0)&&this.open("lg")}}],link:function(a,b,c){}}}a.hgSelector=b}(b=a.common||(a.common={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){function b(a,b,c,d,e){return{templateUrl:"templates/app/urgentNotification.html",restrict:"AE",scope:{hgAssetId:"@",hgAssetIdForIos:"@",hgPollingDurationInSecs:"@",hgAutoRefresh:"@"},link:function(f,g,h){var i=120;f.showUrgentNotification=!1,f.isBigweb=e.isBigweb(),f.isIOS=e.isIOS();var j=f.hgPollingDurationInSecs;if(j||(j=0),j<=0&&(j=c.appConfig.urgentNotificationPollingDurationInSes,j||(j=i)),!angular.isDefined(k)){var k,l=function(){var a,b=f.hgAssetId;f.isIOS&&(b=f.hgAssetIdForIos,a="FILE"),b&&d.getRemoteAsset(b,a).then(function(a){if(a&&a.trim)if(f.isIOS);else{f.UN_MESSAGE=a;var b=f.hasNotificationReadAlready(f.UN_MESSAGE);b||(f.showUrgentNotification=!0)}}).catch(function(a){console.error("error -"+a)})};f.hgAutoRefresh&&"true"==f.hgAutoRefresh.toLocaleLowerCase()&&(k=b(l,1e3*j)),f.$on("$destroy",function(){f.cancelPollingForUrgentNotification()}),f.cancelPollingForUrgentNotification=function(){angular.isDefined(k)&&(b.cancel(k),k=void 0)},f.dismissMessage=function(){f.showUrgentNotification=!1,f.cancelPollingForUrgentNotification()},f.hasNotificationReadAlready=function(b){var c=!0;if(b){var d=null,e=a.sessionStorage.getItem("UN_MESSAGE_READ_TRACKER");d=e?JSON.parse(e):[];var f=_.find(d,function(a){return a==b});f?c=!0:(d.push(b),a.sessionStorage.setItem("UN_MESSAGE_READ_TRACKER",JSON.stringify(d)),c=!1)}return c},f.LinkTapped=function(b){b&&b.length>0&&a.open(b)},f.raiseNotificationEvent=function(a){e.isIOS()&&e.raiseUrgentNotificationEvent(a)},l()}}}}a.hgUrgentNotification=b}(b=a.common||(a.common={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){function b(a){return{restrict:"AE",scope:{dynamicHtmlString:"="},link:function(b,c,d){b.$watch("dynamicHtmlString",function(d,e){c.html(b.dynamicHtmlString),a(c.contents())(b)})}}}a.hgDynamicHtmlCompile=b}(b=a.common||(a.common={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){"use strict";function b(a){var b=a.isNative()&&a.isNativeIOS()?"templates/common/page-ios.html":"templates/common/page.html";return{restrict:"AE",templateUrl:b,replace:!0,transclude:!0,scope:{full:"@?",solo:"=?"},controller:"hgLayoutCtrl",link:function(a,b,c){a.wizard=!1,a.solo=a.solo||!1,a.full=a.full||!1,a.bannerText=c.bannertext,a.iippagedisclosure=c.iippagedisclosure,a.iippagedisclosureasset=c.iippagedisclosureasset}}}function c(a){var b=a.isNative()?"templates/common/page-ios.html":"templates/common/page.html";return{restrict:"AE",templateUrl:b,replace:!0,transclude:!0,scope:{next:"&",back:"&",nextlabel:"@?",backlabel:"@?",mobile:"=?",nextdisabled:"=?",backdisabled:"=?",hideback:"=?",full:"@?",solo:"=?",hidenext:"=?"},controller:"hgLayoutCtrl",link:function(a,b,c){a.nextlabel=a.nextlabel||"Next",a.backlabel=a.backlabel||"Back",a.mobile=a.mobile||!1,a.hideback=a.hideback||!1,a.hidenext=a.hidenext||!1,a.nextdisabled=a.nextdisabled||!1,a.backdisabled=a.backdisabled||!1,a.wizard=!0,a.solo=a.solo||!1,a.full=a.full||!1,a.bannerText=c.bannertext,a.iippagedisclosure=c.iippagedisclosure,a.iippagedisclosureasset=c.iippagedisclosureasset}}}function d(){return{restrict:"AE",templateUrl:'  <div class="container-fluid">                                <div ng-if="full" class="row">                                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" ng-transclude>                                    </div>                                </div>                                <div ng-if="!full" class="row">                                    <div class="col-xs-12 col-sm-10 col-md-8 col-lg-6 col-sm-offset-1 col-md-offset-2 col-lg-offset-3" ng-transclude>                                    </div>                                </div>                            </div>',replace:!0,transclude:!0,scope:{full:"@?"},link:function(a,b,c){a.full=a.full||!1}}}function e(){return{restrict:"AE",template:'<h1 class="header text-center" ng-transclude></h1>',replace:!0,transclude:!0,scope:{header:"@",subHeader:"@"},link:function(a,b,c){}}}function f(){return{restrict:"AE",template:'<div class="row margin-0" ng-transclude>',replace:!0,transclude:!0,scope:{header:"@",subHeader:"@"},link:function(a,b,c){}}}function g(){return{restrict:"AE",template:'<span>                            <h2 ng-if="!left" class="sub-header text-center" ng-transclude=""></h2>                            <h2 ng-if="left" class="sub-header text-left" style="padding-left: 15px;" ng-transclude=""></h2>                        </span>',replace:!0,transclude:!0,scope:{header:"@",subHeader:"@",left:"@?"},link:function(a,b,c){a.left=a.left||null}}}function h(){return{restrict:"AE",template:'<div>                            <div ng-if="fixed" class="fixed-bottom">                                <div class="button-action-bar margin-0" ng-transclude></div>                            </div>                            <div ng-if="!fixed" class="button-action-bar margin-0" ng-transclude></div>                        </div>',replace:!0,transclude:!0,scope:{fixed:"="},link:function(a,b,c){}}}function i(){return{restrict:"AE",template:'<button type="button" class="btn btn-default" ng-transclude></button>',replace:!0,transclude:!0,scope:{header:"@",subHeader:"@"},link:function(a,b,c){}}}function j(){return{restrict:"AE",template:'<button type="button" class="btn btn-default btn-primary" ng-transclude></button>',replace:!0,transclude:!0,scope:{header:"@",subHeader:"@"},link:function(a,b,c){}}}function k(){return{restrict:"AE",template:'<div role="alert" class="alert-block"><div role="alert" class="row alert alert-{{alertSubClass}}"><div class="col-xs-1 padding-0"><i class="icon-{{iconSubClass}}"></i></div><div class="col-xs-11 padding-0 padding-left-30"><p data-ng-show="showCounter" class="pull-right padding-left-30" > {{msgIndex}} of {{msgTotal}}</p><h2 data-ng-show="showRaw" class="message-text margin-0 numeric-soft" hg-dynamic-html-compile dynamic-html-string="rawHtml"></h2><h2 data-ng-show="!showRaw" class="message-text margin-0 numeric-soft" ng-transclude></h2></div></div></div>',replace:!0,transclude:!0,scope:{rawHtml:"@",msgTotal:"@",msgIndex:"@",msgType:"@"},link:function(a,b,c){if(a.rawHtml?a.showRaw=!0:a.showRaw=!1,a.msgType)switch(a.msgType.toLowerCase()){case"info":a.iconSubClass=a.alertSubClass="info";break;case"error":a.iconSubClass="error",a.alertSubClass="danger";break;case"warning":default:a.iconSubClass=a.alertSubClass="warning"}else a.iconSubClass=a.alertSubClass="warning";a.msgTotal&&a.msgIndex?a.showCounter=!0:a.showCounter=!1}}}a.hgPage=b,a.hgWizardPage=c,a.hgContainer=d,a.hgPageTitle=e,a.hgPageRow=f,a.hgPageSubTitle=g,a.hgButtonGroup=h,a.hgButton=i,a.hgButtonPrimary=j,a.hgInlineMessage=k}(b=a.common||(a.common={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){function b(a,b){return{templateUrl:"templates/common/noNotMayFootnote.html",restrict:"AE",scope:{},controller:["$scope","hgCommonJs2nSvc","$modal",function(b,c,d){b.open=function(a){d({contentTemplate:"templates/common/noNotMayFootnoteDetailOverlay.html",templateUrl:"templates/uiComponents/defaultModalTemplate.html",controller:"hgNoNotMayModalInstanceCtrl",windowClass:"accounts-modal",size:a,resolve:{noNotMayData:function(){return b.noNotMayData}}})},b.onTapped=function(){var c=this,d=this.$root.isIIP?"GLOBAL-FOOTER-CONTAINER-AS":"SIP-Global-Footer-Container",e=this.$root.customizationInfo?this.$root.customizationInfo.getAdvisorSpecificDisclosure():"";a.getRemoteAsset(d).then(function(a){if(a){e&&(a="<p>"+e+" </p> "+a);var d=angular.element(a);d&&d.length?d.find(".FDIC-block").remove():(a="<div>"+a+"</div>",d=angular.element(a)),a=d.contents()}else a=angular.element("").contents();b.noNotMayData=a,c.open("lg")})}}],link:function(a,b,c){}}}a.hgNoNotMayFootnotes=b}(b=a.common||(a.common={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){function b(a){return{template:"<div class='row banner'><div class='col-xs-3 col-sm-2 col-md-2 col-lg-1  banner-logo'></div><div class='col-xs-9 col-sm-10 col-md-10 col-lg-11  banner-text'>{{renderText}}</div></div>",restrict:"E",replace:!0,scope:{bannerText:"@?"},transclude:!0,link:function(b,c,d){a.isSIP||null===b.bannerText||""==b.bannerText?c.remove():"BLANK"==b.bannerText.toUpperCase().trim()?b.renderText="":b.renderText=b.bannerText}}}a.hgSchwabBanner=b}(b=a.common||(a.common={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){function b(a,b,c){return{template:"<div class='headerlogo'><style-override>.headerlogo { {{backgroundimage}} }</style-override><span class='sr-only'>{{company}}</span></div>",replace:!0,link:function(a,d,e,f,g){b.getAdvisorInformation()&&b.getAdvisorInformation().FirmName?a.company=b.getAdvisorInformation().FirmName+" logo":a.company="Charles Schwab logo";var h=b.getLogoStyle(c.isIIP());h&&(a.backgroundimage="background-image: url('"+h+"')")}}}a.logo=b}(b=a.common||(a.common={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){function b(a){return{restrict:"E",link:function(b,c){if(c.html()){var d=a('<style ng-bind-template="'+c.html()+'"></style>');c.replaceWith(d(b))}}}}a.styleOverride=b}(b=a.common||(a.common={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){function b(a,b,c){return{template:'<link rel="shortcut icon" type="image/x-icon" href="{{icon}}"/>',replace:!0,link:function(a,d,e,f,g){b.isIIP()?a.icon=c.url+"images/iip/favicon.ico":a.icon=c.url+"images/favicon.ico"}}}a.favicon=b}(b=a.common||(a.common={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){function b(a,b,c){return{restrict:"E",template:"<i class='circle {{donut}}'><style-override>.circle {background-image: url('{{url}}');}</style-override><span class='sr-only'>portfolio graphics icon</span></i>",replace:!0,scope:{portfolio:"@?"},link:function(a,d,e,f,g){var h=a.portfolio?a.portfolio:"";a.donut=c.getDonutClass(h);var i=b.getDonutSpriteStyle();i||(i=b.appConfig.url+"images/DonutSprite_2016.svg"),a.url=i}}}a.smallDonut=b}(b=a.common||(a.common={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b;!function(a){"use strict";function b(a,b,c,d,e){return{templateUrl:"templates/ui/fileUploadTemplate.html",restrict:"A",transclude:!0,controller:["$scope",function(f,g,h,i){var j=!0,k=5,l=6e6,m=3e6,n="json",o=/(\.|\/)(gif|jpg|jpeg|png)$/i,p=!1,q="Uploading",r="Upload Failed",s="Upload Complete",t="File type not allowed",u="File is too large",v="This file exceeds the maximum file size of 6MB. Please select another file.",w="This file type isn’t supported.",x=!1,y="",z=!1,A=!1,B=angular.element("#fileupload"),C=angular.element("#customInputFile");f.showDragDropOutline=!1,b.device.isLargeScreen()&&(f.showDragDropOutline=!0),f.blueimpOptions||(f.blueimpOptions={}),f.blueimpOptions.xhrFields={withCredentials:!0},f.blueimpOptions.headers={"X-Channel":"SG"},e&&e.location&&e.location.hostname&&(f.blueimpOptions.headers["X-Host"]=e.location.hostname),f.blueimpOptions.hg_enableFileAddAction=!0,f.blueimpOptions.hg_enableUploadAction=!1,f.showConfirmDialogOnRemove||(j=f.showConfirmDialogOnRemove),f.blueimpOptions.dataType=n,f.blueimpOptions.fileUploadBegin=function(){angular.forEach(B.scope().queue,function(a,b){a.error&&a.error==s||(a.hg_upload_status=q,a.hg_upload_error_message="")}),B.scope().submit()},f.blueimpOptions.acceptFileTypes||(f.blueimpOptions.acceptFileTypes=o),f.blueimpOptions.autoUpload||(f.blueimpOptions.autoUpload=p),0==f.blueimpOptions.maxNumberOfFiles&&(f.blueimpOptions.maxNumberOfFiles=k),f.blueimpOptions.maxFileSize&&0!=f.blueimpOptions.maxFileSize||(f.blueimpOptions.maxFileSize=m),f.blueimpOptions.start=function(a){x=!1,z=!1,y="",A=!1},f.blueimpOptions.stop=function(b){c(function(){f.blueimpOptions.hg_fileUploadSubmissionDone=!0,f.blueimpOptions.hg_enableFileAddAction=!1,x?A?a.$broadcast("SESSION_TIMEOUT"):f.fileUploadFailed(y):(z=!0,f.fileUploadComplete())},0)},f.blueimpOptions.cancel=function(){B.scope().cancel()},f.blueimpOptions.always=function(a,c){x||"error"!=c.textStatus&&"abort"!=c.textStatus||(x=!0,y=c.errorThrown),"error"==c.textStatus||"abort"==c.textStatus?(c.files[0].hg_upload_status=r,c.result&&c.result.message?c.files[0].hg_upload_error_message=c.result.message:c.files[0].hg_upload_error_message=c.errorThrown,!A&&c.jqXHR&&"401"==c.jqXHR.status?A=!0:"500"==c.jqXHR.status?c.files[0].hg_upload_error_message=c.result.message:c.files[0].hg_upload_error_message=b.appConfig.featureUnavailableMessage,c.files[0].error=""):(c.files[0].hg_upload_status=s,c.files[0].hg_upload_error_message="",c.files[0].error=s)},f.removeFile=function(a,b){var c=-1;if(!f.blueimpOptions.hg_disable_file_remove)if(angular.forEach(a,function(a,d){b&&b==a&&(c=d)}),f.showConfirmDialogOnRemove){var d=function(){a.splice(c,1),a&&a.length<k&&(f.blueimpOptions.hg_enableFileAddAction=!0),E()},e=function(){};f.showModalConfirmDialog(d,e)}else a.splice(c,1),a&&a.length<k&&(f.blueimpOptions.hg_enableFileAddAction=!0),E()},f.showModalConfirmDialog=function(a,b){var c=d.open({templateUrl:"templates/ui/confirmDialog.html",controller:"hgConfirmDialogModalInstanceCtrl",windowClass:"confirmDialog-modal",size:"sm"});c.result.then(function(){a()},function(){b()})},f.triggerFileAdd=function(){c(function(){f.blueimpOptions.hg_enableFileAddAction&&(C.trigger("click"),b.isDesktop()||b.isAndroid()||C.trigger("click"))},0)},f.blueimpOptions.processalways=function(a,b){c(function(){b.files[0].error==u&&(b.files[0].error=v),b.files[0].error==t&&(b.files[0].error=w),E(b.files[0].error)},0)},f.blueimpOptions.drop=function(a,b){if(I(!1),B=angular.element("#fileupload"),f.blueimpOptions.hg_enableFileAddAction){if(B.scope().queue){var c=B.scope().queue.length,d=0;if(b&&b.files&&(d=b.files.length),c+d>k)for(var e=c+d-k,g=0;g<e;g++)b.files.pop();b.files&&b.files.length>0&&(D(b.files),b.files=new Array),!f.blueimpOptions.hg_queue&&B.scope().queue&&B.scope().queue.length>0&&(f.blueimpOptions.hg_queue=B.scope().queue)}}else b.files&&b.files.length>0&&(b.files=new Array)};var D=function(a){B=angular.element("#fileupload"),angular.forEach(a,function(a,b){var c=[];c.push(a);var d="";d=f.blueimpOptions.url&&f.blueimpOptions.url.length>0?f.blueimpOptions.url:f.getUploadURLPerFile(a.name),B.scope().queue&&B.scope().queue.length<k&&B.scope().add({files:c,url:d}),B.scope().queue&&B.scope().queue.length==k&&(f.blueimpOptions.hg_enableFileAddAction=!1)}),!f.blueimpOptions.hg_queue&&B.scope().queue&&B.scope().queue.length>0&&(f.blueimpOptions.hg_queue=B.scope().queue),C.replaceWith(C.clone()),C=angular.element("#customInputFile"),J(C)},E=function(a){var b=G(),c=H(),d=F();c?f.blueimpOptions.hg_overallFileSizeLimitExceeded=!0:f.blueimpOptions.hg_overallFileSizeLimitExceeded=!1,!b||d||a||c?f.blueimpOptions.hg_enableUploadAction=!1:f.blueimpOptions.hg_enableUploadAction=!0},F=function(){B=angular.element("#fileupload");var a=!1;return B.scope().queue&&B.scope().queue.length>0&&angular.forEach(B.scope().queue,function(b,c){b.error&&"HG_UPLOAD_STATUS_COMPLETE"!=b.error&&(a=!0)}),a},G=function(){B=angular.element("#fileupload");var a=!1;return B.scope().queue&&B.scope().queue.length>0&&(a=!0),a},H=function(){var a=0,b=!1;return B.scope().queue&&B.scope().queue.length>0&&(angular.forEach(B.scope().queue,function(b,c){a+=b.size}),a>l&&(b=!0)),b},I=function(a){var b=angular.element(".dragdrop_hint");a?(c(function(){f.blueimpOptions.hg_dragdrop_show_active_text=!0},0),b.css("visibility","visible")):(c(function(){f.blueimpOptions.hg_dragdrop_show_active_text=!1},0),b.css("visibility","hidden"))},J=function(a){a.bind("change",function(a){var b=a.target.files;D(b)})};c(function(){B=angular.element("#fileupload"),f.blueimpOptions.hg_queue&&B&&(B.scope().queue=f.blueimpOptions.hg_queue),J(C),E(),B.scope().queue&&B.scope().queue.length==k&&(f.blueimpOptions.hg_enableFileAddAction=!1),f.blueimpOptions.hg_fileUploadSubmissionDone&&(f.blueimpOptions.hg_enableFileAddAction=!1);var a=angular.element(document);a.on("dragbetterenter",function(){f.blueimpOptions.hg_enableFileAddAction&&I(!0)}).on("dragbetterleave",function(){f.blueimpOptions.hg_enableFileAddAction&&I(!1)}),f.$on("$destroy",function(){var a=angular.element(document);a.off("dragbetterenter"),a.off("dragbetterleave")})},0)}],link:function(a,b,c){}}}a.hgFileUploadUtil=b}(b=a.common||(a.common={}))}(b=a.ui||(a.ui={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){function b(a,b){return{templateUrl:"templates/assets/activityFeedDirective.html",restrict:"E",replace:!0,scope:{activities:"=",show:"&",set:"=",preventCollapse:"&"},transclude:!0,link:function(a,c,d){a.showdetail=function(b){a.show()(b,c)},a.preventCollapse=function(a){a.stopPropagation()},a.goToGoals=function(c){b.go("charts.goal.goalMain"),a.preventCollapse(c)},a.goToFundMoney=function(c){b.go("moveMoney.moveMoneyLaunch"),a.preventCollapse(c)}}}}a.hgActivityFeed=b}(b=a.assets||(a.assets={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(){var a=this;this.restrict="E",this.templateUrl="templates/assets/goalSavingsScoreCard.html",this.replace=!0,this.scope={model:"="},this.link=function(b,c,d,e){a.createChart(b,c)}}return a.factory=function(){var b=function(){return new a};return b.$inject=[],b},a.prototype.createChart=function(a,b){var c=b.find("#goalScoreCardPieChart");if(c){var d=a.model;if(d.seriesData&&2==d.seriesData.length){c.highcharts({chart:{type:"pie",margin:[0,0,0,0],backgroundColor:"rgba(0,0,0,0)"},title:{verticalAlign:"middle",text:"20%",useHTML:!0},credits:{enabled:!1},legend:{enabled:!1},plotOptions:{pie:{enableMouseTracking:!1,borderWidth:0,slicedOffset:0,shadow:!1,dataLabels:{enabled:!1},states:{hover:{enabled:!1}}}},tooltip:{enabled:!1},series:[{data:[{y:d.seriesData[0],color:"orange",borderWidth:3,borderColor:"#151f22"},{y:d.seriesData[1],color:"#384d66"}],size:"100%",innerSize:"60%"}]});var e=c.highcharts();a.$on("$destroy",function(){e.destroy()})}}},a}();a.GoalSavingsScoreCardDir=b}(b=a.assets||(a.assets={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b;!function(a){var b=function(){function a(b,c,d,e,f){var g=this;this.$templateRequest=b,this.$compile=c,this.$q=d,this.$timeout=e,this.$window=f,this.restrict="E",this.template='<div style="position: relative;"></div>',this.scope={options:"=",series:"=",chartLoaded:"&"},this.replace=!0,this.link=function(b,c){b.currentChartOverlays=new Array,b.currentSeriesOverlays=new Array,b.isChartLoaded=b.isChartOverlaysLoaded=b.isSeriesOverlaysLoaded=b.isPlotLinesDrawn=!1,g.ensureChart(b,c),b.$watchCollection("series",function(a,b,d){g.tryRenderChart(d,c)}),b.$watch("options",function(a,b,d){g.tryRenderChart(d,c)},!0),b.$watchCollection("options.chartOverlays",function(a,b,d){g.tryRenderChart(d,c)}),b.$on("$destroy",function(){g.destroyOverlaysAndConnectors(b.currentChartOverlays),g.destroyOverlaysAndConnectors(b.currentSeriesOverlays),a.destroyPlotLines(b),b.chart&&b.chart.destroy()})},this.tryRenderChart=function(a,b){g.ensureChart(a,b)&&(g.renderChartOverlays(a,b),g.renderChartSeries(a,b),g.renderChartPlotLines(a))},this.renderChartSeries=function(a,b){for(;a.chart.series&&a.chart.series.length>0;)a.chart.series[0].remove(!0);var c=[],d=[];_.each(a.series,function(e){var f={data:e.data,name:e.name,type:e.type,color:e.color,fillColor:e.fillColor,lineWidth:e.lineWidth},h=g.mergeDefaultSeriesOptions(a,f);if(a.chart.addSeries(h),e.overlay){var i=g.createOverlay(a,b,e.overlay,e).then(function(a){c.push(a)});d.push(i)}}),g.$q.all(d).then(function(){g.destroyOverlaysAndConnectors(a.currentSeriesOverlays),a.currentSeriesOverlays=c,g.drawPlotLines(a),a.isSeriesOverlaysLoaded=!0,g.checkAndCallChartLoaded(a)})},this.renderChartOverlays=function(a,b){var c=[],d=[];_.each(a.options.chartOverlays,function(e){d.push(g.createOverlay(a,b,e).then(function(a){c.push(a)}))}),g.$q.all(d).then(function(){g.destroyOverlaysAndConnectors(a.currentChartOverlays),a.currentChartOverlays=c,a.isChartOverlaysLoaded=!0,g.drawPlotLines(a),g.checkAndCallChartLoaded(a)})},this.renderChartPlotLines=function(b){a.destroyPlotLines(b),g.updateChartConfig(b),g.drawPlotLines(b)},this.checkAndCallChartLoaded=function(a){var b=a.options;a.series;if(a.isChartLoaded&&a.series){var c=b&&b.chartOverlays,d=b&&b.xPlotLineOptions;if((!c||a.isChartOverlaysLoaded)&&(!d||a.isPlotLinesDrawn)){var e=a.chartLoaded();e&&e()}}},this.ensureChart=function(a,b){return!!a.chart||!!a.options&&(b.highcharts(g.createBaseChartConfig(a)),a.chart=b.highcharts(),g.updateChartConfig(a),!0)},this.redrawOverlaysAndLines=function(a){var b=[];return b.push(g.positionOverlaysWithConnectors(a,a.currentChartOverlays)),b.push(g.positionOverlaysWithConnectors(a,a.currentSeriesOverlays)),g.$q.all(b).then(function(){g.drawPlotLines(a),g.checkAndCallChartLoaded(a)})},this.createBaseChartConfig=function(b){var c=b.options,d=c&&1==c.yAxisLocation,e=c&&2==c.yAxisLocation,f=d||e?void 0:0,h=c.plotAreaPaddingHorizontal||void 0,i={chart:{type:"area",animation:!1,marginTop:f,marginLeft:d?void 0:h,marginRight:e?void 0:h,backgroundColor:"rgba(0,0,0,0)",events:{redraw:function(){g.redrawOverlaysAndLines(b).then(function(){b.isChartLoaded=!0,g.checkAndCallChartLoaded(b),a.adjustOverlappingLabels(b)}),g.repositionOutOfChartdataLabels()}}},legend:{enabled:!1},credits:{enabled:!1},title:{text:null},xAxis:g.configureXAxis(b),yAxis:g.configureYAxis(b),plotOptions:{area:{animation:!1,enableMouseTracking:!1,lineWidth:3,fillOpacity:1}},tooltip:{animation:!1,enabled:!1,followTouchMove:!1},exporting:{enabled:!1},series:{}};return i},this.updateChartConfig=function(a){if(a.options){var b=a.chart,c=a.options;angular.isUndefined(c.backgroundColor)||angular.element(b.container).css({background:c.backgroundColor}),b.xAxis&&b.xAxis[0].update(g.configureXAxis(a)),b.yAxis&&b.yAxis[0].update(g.configureYAxis(a))}},this.mergeDefaultSeriesOptions=function(a,b){var c=a.options,d=c&&c.backgroundColor||"#303f50",e=angular.extend({animation:!1,states:{hover:{enabled:!1}},marker:{enabled:!1,fillColor:"#fff",radius:c&&c.defaultMarkerRadius||8,lineWidth:c&&c.defaultMarkerLineWidth||2,lineColor:d,symbol:"circle"}},b);return e},this.drawPlotLines=function(b){var c=b.options;if(b.chart&&b.chart.series&&c){var d=b.chart.series.length+3;if(c&&c.xPlotLineOptions){a.destroyPlotLines(b);var e=b.chart,f=e.renderer,h=e.xAxis[0],i=e.plotSizeY,j=e.plotTop,k="";_.each(c.xPlotLineOptions,function(c){var e=h.toPixels(c.associatedValue),g=c.labelSize?c.labelSize:12,l=.25*g,m=g+=l,n=a.calcPlotLineTopPosition(b,c,l,e,m,j);k=1===c.lineStyle?"2,2":"";var o=f.text(c.label,e,n).add(),p=o.element.attributes,q=angular.isDefined(p.x)?parseInt(p.x.value):0,r=angular.isDefined(p.y)?parseInt(p.y.value):0,s=-5,t="end",u=-90,v=angular.isDefined(c.labelPosition)?c.labelPosition:0;0==v||(2==v?(s=-s,u=90):1==v&&(s=.25*o.element.clientHeight));var w="translate("+(q+s)+","+r+")",x="rotate("+u+")",y="text-anchor: "+t,z=w+" "+x,A={zIndex:d,x:0,y:0,"font-size":g,fill:c.labelColor||"#fff",transform:z,style:y};if(o.attr(A),b.currentPlotLineElements||(b.currentPlotLineElements=[]),b.currentPlotLineElements.push(o),1==v){var B=o.element.getComputedTextLength();n=n+B+l}var C=f.path(["M",e,n,"L",e,i+j]).attr({"stroke-width":c.width||1,stroke:c.color||"#fff","stroke-dasharray":k,zIndex:d}).add();b.currentPlotLineElements.push(C)}),b.isPlotLinesDrawn=!0,g.checkAndCallChartLoaded(b)}}},this.xAxisTickPositioner=function(a){var b=null;return a.series&&a.series.length>0&&(b=[],b.push(a.chart.xAxis[0].getExtremes().min),_.each(a.series,function(a){var c=_.find(a.data,function(a){return a.y<=0});c&&b.push(c.x)}),b.push(a.chart.xAxis[0].getExtremes().max)),b},this.configureXAxis=function(a){var b=a.options,c=b&&b.showXLabels||!1,d={fontSize:"14px",color:"#fff",textOverflow:"none",fontWeight:"bold"},e=b&&b.xLabels||null,f={type:b&&b.IXAxisOption&&b.IXAxisOption.type?b.IXAxisOption.type:void 0,gridLineWidth:b&&b.IXAxisOption&&b.IXAxisOption.gridLineWidth?b.IXAxisOption.gridLineWidth:0,gridLineColor:b&&b.IXAxisOption&&b.IXAxisOption.gridLineColor?b.IXAxisOption.gridLineColor:"",min:b&&b.xMinValue,max:b&&b.xMaxValue,lineWidth:b&&b.IXAxisOption&&b.IXAxisOption.lineWidth?b.IXAxisOption.lineWidth:0,tickLength:b&&b.IXAxisOption&&b.IXAxisOption.tickLength?b.IXAxisOption.tickLength:0,tickWidth:b&&b.IXAxisOption&&b.IXAxisOption.tickWidth?b.IXAxisOption.tickWidth:0,showLastLabel:!0,showFirstLabel:!0,tickPosition:"outside",tickPositioner:function(){if(b&&void 0==b.IXAxisOption)return g.xAxisTickPositioner(a)},labels:{enabled:!0,useHTML:!0,formatter:function(){if(c){if(e){var a=_.findWhere(e,{value:this.value});return a&&a.text}return b&&b.IXAxisOption&&"dateFormat"==b.IXAxisOption.labelsFormater?Highcharts.dateFormat("%m/%e/%y",this.value):this.value}},style:b&&b.IXAxisOption&&b.IXAxisOption.customXlabelStyle?b.IXAxisOption.customXlabelStyle:d},title:{text:null},units:b&&b.IXAxisOption&&b.IXAxisOption.units?b.IXAxisOption.units:[]};return f},this.yAxisTickPositioner=function(a){var b=[];return a.options&&angular.isDefined(a.options.yMinValue)&&b.push(a.options.yMinValue),a.options&&a.options.yLabels&&a.series&&a.series.length>0&&_.each(a.options.yLabels,function(a){b.push(a.value)}),a.options&&angular.isDefined(a.options.yMaxValue)&&(_.contains(b,a.options.yMaxValue)||b.push(a.options.yMaxValue)),
b},this.formatAxisDollarValue=function(a){if(0==a)return"";if(a>=1e6){var b=a/1e6;return b.toFixed(1)+"M"}var c=a/1e3;return c.toFixed(0)+"K"},this.positionOverlaysWithConnectors=function(a,b){var c=[];_.each(b,function(b){c.push(g.positionOverlayElement(a,b))});var d=g.$q.defer();return g.$q.all(c).then(function(){d.resolve()})},this.createOverlay=function(a,b,c,d){void 0===d&&(d=null);var e=g.$q.defer(),f=e.promise;c&&c.templateHtml?e.resolve(c.templateHtml):c&&c.templateUrl?g.$templateRequest(c.templateUrl,!0).then(function(a){e.resolve(a)},function(){}):e.reject("MultiSeriesChart chart overlay requires templateUrl or templateHtml to be set");var h=g.$q.defer();return f.then(function(e){var f=g.createScopeForOverlay(a,c,d),i=angular.element('<div style="position: absolute; left: 0; top: 0; display: none;">'+e+"</div>");b.append(i),g.$compile(i)(f);var j={overlayDef:c,element:i,scope:f,series:d,svgElements:new Array};setTimeout(function(){g.positionOverlayElement(a,j),h.resolve(j)})}),h.promise},this.createScopeForOverlay=function(a,b,c){var d;return d=a.$new(!0,a),b.model&&(d.model=b.model),c&&(d.series=c),d},this.positionOverlayElement=function(a,b){var c=b.element,d=a.chart,e=0,f=d.plotLeft,h=d.plotSizeX,i=c.height(),j=c.width();if(0!=i&&0!=j){var k=g.calcXConnectPoint(d,b),l=g.calcYConnectPoint(d,b),m=g.calcXPointForOverlay(a,b,k,f,h,j);m=Math.max(f+e,m),m=Math.min(f+h-e-j,m);var n=g.calcYPositionForOverlay(a,b,l,j,i,e);g.resolveConnectFromSides(a,b,k,l,m,n,j,i);for(var o;b.svgElements&&(o=b.svgElements.pop());)o.destroy();(angular.isDefined(k)||angular.isDefined(l))&&g.drawConnectorLine(a,b,j,i,m,n,k,l),c.css({left:m+"px",top:n+"px",display:"block"});var p=g.$q.defer();return setTimeout(function(){p.resolve()}),p.promise}},this.calcXPointForOverlay=function(b,c,d,e,f,g){var h,i=c.overlayDef;angular.isDefined(i.hPosition)?h=i.hPosition:i.connectToAxis&&(h=0);var j=e+f/2,k=e+f,l=j-g/2,m=b.options?_.first(b.options.xPlotLineOptions):void 0;if(angular.isDefined(d)){var n=d;if(0===h&&m){var o=b.chart.xAxis[0].toPixels(m.associatedValue);n=o>j?e+(o-e)/2:o+(k-o)/2}var p=g/2;n+p>k?n=k-p:n-p<e&&(n=e+p),l=n-g/2}return 2==i.hPosition?l=e:5==i.hPosition?l=f-g:3==i.hPosition?l=a.centerAtPosition(g,j):4==i.hPosition&&(l=j),l+=i.xOffset||0},this.calcXConnectPoint=function(a,b){var c;angular.isDefined(b.overlayDef.xAxisConnectValue)?c=b.overlayDef.xAxisConnectValue:b.series&&b.series.data&&b.series.data.length>0&&b.overlayDef.connectToAxis&&(c=_.last(b.series.data).x);var d=void 0;if(angular.isDefined(c)){var e=a.xAxis[0].toPixels(c);e>=a.plotLeft&&e<=a.plotLeft+a.plotSizeX&&(d=e)}return d},this.calcYConnectPoint=function(a,b){var c;angular.isDefined(b.overlayDef.yAxisConnectValue)?c=b.overlayDef.yAxisConnectValue:b.series&&b.overlayDef.connectToAxis&&(c=_.last(b.series.data).y);var d=void 0;if(angular.isDefined(c)){var e=a.yAxis[0].toPixels(c);e>a.plotTop&&e<a.plotTop+a.plotSizeY&&(d=e)}return d},this.calcYPositionForOverlay=function(a,b,c,d,e,f){var h=b.overlayDef,i=a.chart,j=i.plotSizeY,k=i.plotTop,l=i.plotTop+i.plotSizeY,m=j/3-e/2,n=1;return angular.isDefined(c)&&h.connectToAxis&&c<j+i.plotTop&&c>i.plotTop?(angular.isDefined(c)&&2===(2&h.connectFromSide)&&(n=g.resolveForceTopOrBottom(a,b,c,e,f,l,k)),m=4===(4&n)?c:8===(8&n)?c-e:c-e/2):m=1==h.vPosition?k:3==h.vPosition?l-e:i.plotTop+i.plotSizeY/2-e/2,h.yOffset&&(m-=h.yOffset),m},this.resolveConnectFromSides=function(a,b,c,d,e,f,g,h){var i=b.overlayDef;a.chart,a.options.yAxisLocation||2;if(angular.isUndefined(b.computedConnectFromSide)){var j=angular.isDefined(i.connectFromSide)?i.connectFromSide:1;angular.isDefined(d)&&2==(2&j)?f>=d?j|=4:f+h<=d&&(j|=8):1==(1&j)&&(angular.isDefined(c)&&(e>=c?j|=32:e+g<c&&(j|=16)),angular.isDefined(d)&&(f>d?j|=4:f+h<d&&(j|=8))),b.computedConnectFromSide=j}},this.resolveForceTopOrBottom=function(a,b,c,d,e,f,g){var h=!0,i=a.chart,j=b.overlayDef;return _.each(a.series,function(a){if(a!=b.series&&a.overlay){var d=a.overlay.yAxisConnectValue||_.last(a.data).y,e=i.yAxis[0].toPixels(d);if(e<c)return void(h=!1)}}),_.each(a.options.chartOverlays,function(a){if(a!==j){var b=i.yAxis[0].toPixels(a.yAxisConnectValue);return b&&b<=c?void(h=!1):void 0}}),!h&&c+d+e>f&&(h=!0),h?8|j.connectFromSide:4|j.connectFromSide},this.drawConnectorLine=function(a,b,c,d,e,f,h,i){var j=b.overlayDef,k=a.chart;if(j.connectToAxis){var l=e+c,m=f+d,n=0;n=angular.isDefined(i)?i:k.plotTop+k.plotSizeY;var o;o=angular.isDefined(h)?h:k.plotLeft+k.plotSizeX;var p=a.chart.series.length+4,q={},r=e+c/2;q.X=0,angular.isDefined(h)&&(h<e?(r=e,q.X=1):h>e+c?(r=e+c,q.X=1):h>k.plotLeft&&h<k.plotLeft+k.plotSizeX&&(r=h)),32==(32&b.computedConnectFromSide)&&(r=e,q.X=1),16==(16&b.computedConnectFromSide)&&(r=e+c,q.X=1),8!=(8&b.computedConnectFromSide)&&4!=(4&b.computedConnectFromSide)||(q.X=0);var s=b.computedConnectFromSide,t=angular.isDefined(h)&&h>=e&&h<=l,u=f+d/2;q.Y=0,angular.isDefined(i)?4===(4&s)||t&&i<=f?(u=f,q.Y=1):8===(8&s)||t&&i>=m?(u=f+d,q.Y=1):i>k.plotTop&&i<k.plotTop+k.plotSizeY&&(u=i):h>=e&&h<=l&&(u=m);var v=k.renderer,w=angular.isDefined(j.lineStyle)?j.lineStyle:2,x=b.overlayDef.lineColor||"#fff",y="";1==w&&(y="2,2");var z=g.buildConnectorPath(r,u,o,n,q),A=void 0;_.each(z,function(a){if(A){var c=v.path(["M",A.X,A.Y,"L",a.X,a.Y]).attr({"stroke-width":1,stroke:x,"stroke-dasharray":y,zIndex:p}).add();A=a,b.svgElements.push(c)}else A=a})}},this.buildConnectorPath=function(a,b,c,d,e){var f=[];if(f.push({X:a,Y:b}),e!={X:0,Y:0}){var g={X:(c-a)*e.X,Y:(d-b)*e.Y},h={X:g.X+a,Y:g.Y+b};f.push(h)}return f.push({X:c,Y:d}),f},this.destroyOverlaysAndConnectors=function(a){for(var b;b=a.pop();){for(var c;c=b.svgElements.pop();)c.destroy();b.scope.$destroy(),b.element.remove()}},this.repositionOutOfChartdataLabels=function(){var a=document.querySelectorAll("div.highcharts-container>svg");a&&null!==a&&void 0!==a&&a.length>0&&angular.forEach(a,function(a,b){var c=parseInt(a.getAttribute("height"));if(c&&null!==c&&void 0!==c&&c>0){var d=a.querySelectorAll("div.highcharts-container>svg>g.highcharts-axis-labels >g"),e=a.parentNode.querySelectorAll("div.highcharts-container>div.highcharts-axis-labels >span"),f=a.parentNode.querySelectorAll("div.highcharts-container>div.highcharts-yaxis-labels >span");if(d&&null!==d&&void 0!==d){var g=c-30,h=18;angular.forEach(d,function(a,b){var d=a.getAttribute("transform");if(d&&null!==d&&void 0!==d){var e=parseInt(d.substr(d.indexOf(",")+1)),f=parseInt(d.substring(d.indexOf("(")+1,d.indexOf(",")));(navigator.userAgent.indexOf("MSIE")!==-1||navigator.userAgent.indexOf("Chrome")===-1&&navigator.userAgent.indexOf("Firefox")===-1&&navigator.userAgent.indexOf("Safari")===-1)&&(e=parseInt(d.substr(d.indexOf(" ")+1)),f=parseInt(d.substring(d.indexOf("(")+1,d.indexOf(" ")))),e<0?(a.setAttribute("transform","translate("+f+","+h+")"),h+=27):e>c-30&&(a.setAttribute("transform","translate("+f+","+g+")"),g-=27)}})}if(e&&null!==e&&void 0!==e){var i=c,j=18;angular.forEach(e,function(a,b){var d=parseInt(angular.element(a).css("top"));d&&null!==d&&void 0!==d&&(d<0?(angular.element(a).css("top",j),j+=27):d>c&&(angular.element(a).css("top",i),i-=27)),f&&null!==f&&void 0!==f&&angular.forEach(f,function(a,b){var d=parseInt(angular.element(a).css("top"));d>c-56&&b>0&&angular.element(f[b]).css("display","none")})})}}})}}return a.factory=function(){var b=function(b,c,d,e,f){return new a(b,c,d,e,f)};return b.$inject=["$templateRequest","$compile","$q","$timeout","$window"],b},a.prototype.configureYAxis=function(a){var b=this,c=a.options,d={fontSize:"12px",color:"#aaa",align:"right",fontWeight:"bold"},e=angular.isUndefined(c)?void 0:c.showYLabels,f=!!angular.isUndefined(e)||e,g=c&&c.yLabels||null,h=this,i={min:c&&c.yMinValue,max:c&&c.yMaxValue,visible:!(c&&0==c.yAxisLocation),gridLineWidth:0,tickWidth:0,opposite:c&&2==c.yAxisLocation,tickPositioner:function(){if(c&&void 0==c.IXAxisOption)return b.yAxisTickPositioner(a)},labels:{enabled:f,style:d,useHTML:!0,formatter:function(){return h.formatYAxisValue(this.value,g)}},title:{text:null},lineWidth:1,maxPadding:.05};return i},a.prototype.formatYAxisValue=function(a,b){if(!b)return a;var c=_.find(b,function(b){return b.value==a});return c?c.text||this.formatAxisDollarValue(c.value):void 0},a.calcPlotLineTopPosition=function(a,b,c,d,e,f){return b.preventOverlayIntersection&&_.each([a.currentSeriesOverlays,a.currentChartOverlays],function(a){_.each(a,function(a){var b=a.element;if(b){var c=b.position(),g=b.width(),h=c.top+b.height();c.left<d+e&&c.left+g>d-e&&h>f&&(f=h)}})}),1==b.labelPosition&&(f+=c),f},a.destroyPlotLines=function(a){if(a.currentPlotLineElements)for(var b;b=a.currentPlotLineElements.pop();)b.destroy()},a.adjustOverlappingLabels=function(b){var c=b.chart;c&&c.xAxis&&c.yAxis&&0!=c.xAxis.length&&0!=c.yAxis.length&&(a.adjustOverlappingLabelsForAxis(b,c.xAxis[0],b.options.xLabels,!0),a.adjustOverlappingLabelsForAxis(b,c.yAxis[0],b.options.yLabels,!0))},a.adjustOverlappingLabelsForAxis=function(a,b,c,d){var e=b.ticks;if(0!=Object.getOwnPropertyNames(e).length){var f=void 0,g=!1,h=[],i=_.first(_.values(e)).label,j=_.last(_.values(e)).label,k=function(a,b){var c=a.xy.x+a.getBBox().width-b.xy.x,d=-(a.xy.y-(b.xy.y+b.getBBox().height));return c>0&&d>0},l=function(a){a.attr({visibility:"hidden"})},m=_.sortBy(Object.keys(e),function(a){return parseFloat(a)});_.each(m,function(a){var b=e[a];if(b.label){var c=b.label;f&&k(f,c)&&(f&&f==i&&(_.contains(h,c)||h.push(c)),c==j&&f&&(_.contains(h,c)||h.push(f)),g=!0),f=c}}),_.each(e,function(a,b){if(a.label){var e=a.label,f=_.filter(c,function(a){return a.value==b});g&&f.length>0&&d&&_.every(f,function(a){return a.hideIfOverlapping})&&l(e),_.contains(h,e)&&e!=i&&e!=j&&l(e)}})}},a.centerAtPosition=function(a,b){return b-a/2},a}();a.MultiSeriesChartDir=b}(b=a.common||(a.common={}))}(b=a.ui||(a.ui={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(a,b){this.$scope=a,this.$state=b}return a}();a.rootCtrl=b}(b=a.app||(a.app={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(a,b){this.$scope=a,this.$state=b}return a}();a.blankCtrl=b}(b=a.app||(a.app={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(a,b,c,d,e,f,g,h,i,j){var k=this;this.$scope=a,this.$rootScope=b,this.$window=c,this.hgStateSvc=d,this.hgAuthSvc=e,this.hgStrategiesSvc=f,this.commonJs2nSvc=g,this.contextSvc=h,this.suitabilityQuestionsSvc=i,this.hgGoalService=j,a.activeMenuStateName=this.getActiveMenuStateName(),a.activeMenuStateName&&a.activeMenuStateName.length>0?this.contextSvc.setActiveMenuStateName(a.activeMenuStateName):a.activeMenuStateName=this.contextSvc.getActiveMenuStateName(),a.isMobile=this.contextSvc.device.isSmallScreen(),a.showDashboard=function(a){k.contextSvc.setActiveAccount(a,!0),angular.element(document.body).removeClass("menu-active"),k.hgStateSvc.go("charts","","",k.contextSvc.device.isNative()?"none":"slide-left")},a.showBalances=function(){k.showWeb("balances")},a.showPositions=function(){k.showWeb("positions")},a.showTransactions=function(){k.showWeb("transactions")},a.showDocuments=function(){k.showWeb("accountDocuments")},a.showMessages=function(){k.showWeb("notificationsCenter")},a.showDeposit=function(){k.$rootScope.addWithdrawMoneyFlow=!0,k.showWeb("moveMoney.moveMoneyLaunch")},a.showAccount=function(){k.showWeb("funding.transferSetup")},a.checkDeposit=function(){k.showWeb("rdc.launchCheckDeposit")},a.showAgreements=function(){k.showWeb("agreements.home")},a.showPersonalProfile=function(){k.showWeb("personalProfile.manageprofile")},a.showInsights=function(){k.$window.open(k.$rootScope.isSIP?k.contextSvc.appConfig.whitePaperUrl:k.contextSvc.appConfig.IIPWhitePaperUrl)},a.showBlog=function(){k.$window.open(k.$rootScope.isSIP?k.contextSvc.appConfig.blogUrl:k.contextSvc.appConfig.IIPBlogUrl)},a.showFaq=function(){k.$window.open(k.$rootScope.isSIP?k.contextSvc.appConfig.FAQUrl:k.contextSvc.appConfig.IIPFAQUrl)},a.showContactUs=function(){k.showWeb("contactUs.contactUsLaunch")},a.showSettings=function(){k.showWeb("charts.accountSettings")},a.doLogout=function(){angular.element(document.body).removeClass("menu-active"),e.logout()},a.showMenuItem=function(){return k.contextSvc.device.isNative()},a.showComingSoon=function(){k.$window.open(k.contextSvc.appConfig.comingSoonUrl)},a.openNewAccount=function(){k.contextSvc.showSpinner(),i.removeUpdateProfile(),i.setNewProfileFlow();var a=k.contextSvc.getSessionData(),b=k;if(1==a.isLoggedIn&&b.contextSvc.isIIP()){var c={};c.FirmId=b.contextSvc.customization.getSchwabFirmId(),c.ProgramPin=b.contextSvc.customization.getProgramPin(),b.contextSvc.customization.setFirmProgramInfo(c).then(function(){k.accountopenInfo()}).catch(function(a){b.$rootScope.raiseMessage(k.contextSvc.appConfig.featureUnavailableMessage)}).finally(function(){b.contextSvc.hideSpinner()})}else k.accountopenInfo()},a.getDonutClass=function(a){return a&&a.model?k.hgStrategiesSvc.getDonutClass(a.model.Name):"donut1"},a.getDonutStyle=function(){return k.contextSvc.customization.getDonutSpriteStyle()},a.hasClientFeature=function(a){var b=k.contextSvc.getSessionData();return!(b&&b.firmInfo&&b.firmInfo.AdvisorProgramInfo)||b.firmInfo.AdvisorProgramInfo.ClientFeatures[a]},a.getGoalName=function(a){return k.hgGoalService.getGoalName(a)},a.getGoalStateUIClass=function(a){return k.hgGoalService.getGoalStateUIClass(a)}}return a.prototype.accountopenInfo=function(){this.showWeb("behavioralQuestions")},a.prototype.showWeb=function(a){angular.element(document.body).removeClass("menu-active"),this.hgStateSvc.go(a,"","","none")},a.prototype.getActiveMenuStateName=function(){var a=new Array;a.push("charts"),a.push("moveMoney.moveMoneyLaunch"),a.push("accountDocuments"),a.push("personalProfile.manageprofile"),a.push("contactUs.contactUsLaunch"),a.push("agreements.home"),a.push("insights.home"),a.push("journal.home"),a.push("intelligentPortfolios.home"),a.push("comingSoon");var b=null,c=this.hgStateSvc.$state.current.name;return _.contains(a,c)&&(b=c),b},a}();a.menuCtrl=b}(b=a.app||(a.app={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(a,b,c,d){this.$scope=a,this.$rootScope=b,this.$state=c,a.screenSize="DESKTOP";try{d.onPhone(function(b){a.isPhone=b.matches,a.screenSize=a.isPhone?"MOBILE":"DESKTOP"})}catch(a){console.error(a)}}return a}();a.headerCtrl=b}(b=a.app||(a.app={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=this;this.$scope=a,this.$rootScope=b,this.$state=c,this.$timeout=d,this.$location=e,this.$window=f,this.matchmedia=g,this.hgContextSvc=h,this.hgProspectLoginSvc=i,this.hgStateSvc=j,this.cobrowseSvc=k,this.commonJs2nSvc=l,this.hgAuthSvc=m;var o=this;b.dismissMessages(),this.notifyWebAppUpdate(),a.navigation=o.fetchNavigationConfig(c.current.name),a.screenSize="DESKTOP",a.browserType=h.device.isNative()?h.device.isNativeIOS?"IOS":"ANDROID":"BROWSER",a.animateStyle="",a.session=b.session,b.advisorNameDisplay=this.$rootScope.isIIP?h.customization.getAdvisorInformation().FirmName:null,b.theme=a.navigation?a.navigation.theme:"light";var p,q;try{p=g.onPhone(function(c){a.isPhone=c.matches,a.screenSize=a.isTablet||a.isPhone?"MOBILE":"DESKTOP",a.isMobile="MOBILE"==a.screenSize,b.isMobile=a.isMobile,a.animateStyle=h.isMobileDevice()?"":"slide-left"}),q=g.onTablet(function(c){a.isTablet=c.matches,a.screenSize=a.isTablet||a.isPhone?"MOBILE":"DESKTOP",a.isMobile="MOBILE"==a.screenSize,b.isMobile=a.isMobile,a.animateStyle=h.isMobileDevice()?"":"slide-left"})}catch(a){console.error(a)}a.$on("$destroy",function(){p&&p(),q&&q()}),a.showPersonalProfile=function(){n.hgStateSvc.go("personalProfile.manageprofile")},a.goBack=function(){n.$scope.moveBack(n.$scope.navigation.back)},a.go=function(a){n.$scope.moveForward(a)},this.$scope.doProspectSave=function(){return n.doProspectSave()},this.$scope.closeModal=function(){return n.closeModal()},this.$scope.showMenu=function(){n.hgContextSvc.device.isNative()?n.commonJs2nSvc.showMenu():($(".slide-menu").animate({scrollTop:0},0),angular.element(document.body).toggleClass("menu-active"),angular.element(document.body).hasClass("menu-active")?angular.element("#iconMenuId").attr("aria-expanded","true"):angular.element("#iconMenuId").attr("aria-expanded","false"))},this.$scope.goDefaultLandingPage=function(){n.$rootScope.session.isLoggedIn?n.$rootScope.session.mercuryAccounts&&n.$rootScope.session.mercuryAccounts.length>0?n.hgStateSvc.go("charts"):n.hgAuthSvc.silentLogout().finally(function(){n.hgStateSvc.go("cancelLogin")}):n.hgStateSvc.go("cancelLogin")},this.$scope.moveBack=function(a){n.hgContextSvc.device.isNativeIOS()&&"charts.goal.goalMain"==a?n.hgStateSvc.go("moveMoneyBlank",null,null,"slide-right"):"beneficiary"==a.split(".",1)[0]?n.hgStateSvc.go(a,{canNavigate:!0},"","slide-right"):n.hgStateSvc.go(a,"","","slide-right")},this.$scope.showModal=function(a){n.hgStateSvc.go(a,"","","slide-left")},this.$scope.moveForward=function(a){n.hgStateSvc.go(a,"","","slide-left")},this.$scope.startCobrowse=function(){f.fireflyAPI?fireflyAPI.ready(function(){fireflyAPI.cobrowsingActive()||fireflyAPI.start()}):(sessionStorage.setItem("cobrowse","true"),k.insertCobrowseScript(f).then(function(){fireflyAPI.start()}))}}return a.prototype.notifyWebAppUpdate=function(){var a=this;if(this.hgContextSvc.appConfig&&this.hgContextSvc.appConfig.appUpdate){var b=this.hgContextSvc.isIIP()?this.hgContextSvc.appConfig.appUpdate.IIP:this.hgContextSvc.appConfig.appUpdate.SIP;if(b){var c=this.hgContextSvc.device.isNative()?b.native:b.web;c&&c.message&&this.hgContextSvc.identity&&this.hgContextSvc.identity.userId&&(this.hasNotificationBeenPresented(c.message)||this.$rootScope.raiseMessage(c.message,1,c.title,function(){a.$window.localStorage.setItem("webupgrademessage",c.message)}))}}},a.prototype.hasNotificationBeenPresented=function(a){if(!this.$window.localStorage)return!1;var b=this.$window.localStorage.getItem("webupgrademessage");return b==a},a.prototype.closeModal=function(){this.$scope.navigation.dismissRel?this.hgStateSvc.goUrl(this.$scope.navigation.dismissRel):this.hgContextSvc.device.isNativeIOS()&&"charts.goal.goalMain"==this.$scope.navigation.dismiss?this.hgStateSvc.go("moveMoneyBlank",null,null,"slide-right"):this.hgStateSvc.go(this.$scope.navigation.dismiss||"charts",null,null,"slide-right")},a.prototype.doProspectSave=function(){if(0==this.$rootScope.session.isLoggedIn){var a=this.$state.current;this.hgProspectLoginSvc.setSaveResumeNavigationState(this.$state.current.name),this.hgContextSvc.setPendingNavigationStateData(a,this.$location.search()),this.$rootScope.session.login(a)}this.$rootScope.$broadcast("SAVE_EVENT_CLICKED")},a.prototype.fetchNavigationConfig=function(a){var b,c=this,d=this.buildDefaultNavigationObject(a);if(a){var e=a.split(".");e.length>1&&_.each(e,function(a){b=b?b+"."+a:a,d=c.fetchStateConfig(b,d)}),d=this.fetchStateConfig(a,d)}return d.configurations=null,d=this.overrideNavigationConfig(d)},a.prototype.overrideNavigationConfig=function(a){var b=this.$state.current.navigationConfiguration;return b&&(a=this.applyNavigationObject(a,b)),a},a.prototype.fetchStateConfig=function(a,b){var c=_.find(b.configurations,function(b){return b.stateId===a});return c?this.applyNavigationObject(b,c):b},a.prototype.buildDefaultNavigationObject=function(a){var b="charts";return a&&a.indexOf("accountopen.")>-1&&(b="setup.newCustomer"),{stateId:a,header:"",title:"",headerType:"POSTLOGIN",mobileHeaderType:"POSTLOGIN",layout:"TUNNEL",theme:"light",back:"menu",dismiss:b,dismissRel:null,footer:this.$rootScope.isSIP?"SIP-Global-Footer-Container":"GLOBAL-FOOTER-CONTAINER-AS",configurations:this.hgContextSvc.navigationConfigurations,showUrgentNotification:!1,showHeader:!0,showFooter:!0}},a.prototype.applyNavigationObject=function(a,b){return b.headerType&&(a.headerType=b.headerType),b.mobileHeaderType&&(a.mobileHeaderType=b.mobileHeaderType),b.layout&&(a.layout=b.layout),b.theme&&(a.theme=b.theme),b.title&&(a.title=b.title),b.back&&(a.back=b.back),b.dismiss&&(a.dismiss=b.dismiss),b.dismissRel&&(a.dismissRel=b.dismissRel),b.footer&&(a.footer=b.footer),b.header&&(a.header=b.header),b.configurations&&(a.configurations=b.configurations),b.showUrgentNotification&&(a.showUrgentNotification=b.showUrgentNotification),"boolean"==typeof b.showHeader&&(a.showHeader=b.showHeader),"boolean"==typeof b.showFooter&&(a.showFooter=b.showFooter),this.$rootScope.session.isLoggedIn&&b.postLoginMobileHeaderType&&(a.mobileHeaderType=b.postLoginMobileHeaderType),a},a}();a.layoutCtrl=b}(b=a.app||(a.app={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(a,b,c,d,e){this.$scope=a,this.$state=b,this.$window=c,this.hgCacheSvc=d,this.hgAuthSvc=e,this.init()}return a.prototype.init=function(){this.hgCacheSvc.cache.removeAll(),this.$window.localStorage.clear(),this.hgAuthSvc.logout()},a}();a.resetCtrl=b}(b=a.app||(a.app={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(a,b){var c=this;this.scope=a,this.scope.changeTheme=function(a){return c.changeTheme(a)},b()}return a.prototype.changeTheme=function(a){if($("#themedCss")&&$("#themedCss").remove(),"default"!=a){var b='<link rel="stylesheet" href="styles/themes/'+a+'.css" type="text/css" id="themedCss"/>';$("head").append(b)}},a.$inject=["$scope"],a}();a.styleGuideCtrl=b}(b=a.app||(a.app={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(b){var c;!function(b){var c=function(a){function b(b,c,d,e,f,g,h,i,j){var k=this;a.call(this,b,c,d,g),this.$scope=b,this.$rootScope=c,this.$state=d,this.$window=e,this.$document=f,this.contextSvc=g,this.hgCommonJs2nSvc=h,this.cobrowseSvc=i,this.fileUploadSvc=j,this.$scope.title="Contact Us",this.$scope.isCobrowseVisible=!1,this.$scope.isBigweb=h.isBigweb(),this.$scope.isIOS=h.isIOS(),this.$scope.isNative=g.device.isNative(),this.$scope.isDesktop=g.isDesktop(),this.getAdvisorData();var l=function(a){72!=k.previousKey&&104!=k.previousKey||77!=a.keyCode&&109!=a.keyCode||(b.isCobrowseVisible=!0),k.previousKey=a.keyCode,b.$apply()};f[0].onkeypress=l,b.$on("$destroy",function(){f[0].removeEventListener("keypress",l)}),this.$scope.startCobrowse=function(){e.fireflyAPI?fireflyAPI.ready(function(){fireflyAPI.cobrowsingActive()||fireflyAPI.start()}):(sessionStorage.setItem("cobrowse","true"),i.insertCobrowseScript(e).then(function(){fireflyAPI.start()}))},this.$scope.goToFileUpload=function(){k.contextSvc.device.isNative()?k.fileUploadSvc.sendFileUploadData():k.$state.go("contactUs.fileUpload.fileUploadLaunch")}}return __extends(b,a),b.prototype.getAdvisorData=function(){var a=this.contextSvc.customization.getAdvisorInformation();a&&(this.$scope.advisorInfo=a)},b}(a.common.hgControllerBase);b.contactusCtrl=c}(c=b.contactUs||(b.contactUs={}))}(b=a.ui||(a.ui={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(a,b,c){this.$scope=a,this.$state=b,this.assetId=c,c&&(a.assetId=c)}return a}();a.cmsAssetCtrl=b}(b=a.app||(a.app={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(a,b,c,d,e,f){this.$scope=a,this.$stateParams=b,this.$rootScope=c,this.hgContextSvc=d,this.hgStateSvc=e,this.hgCommonJs2nSvc=f,this.init()}return a.prototype.init=function(){try{this.initScope();var a=this.hgContextSvc.device.isNativeIOS()?4:1;if(this.$scope.buttonViewId=a,this.$stateParams)switch(parseInt(this.$stateParams.messageId)){case 1:this.$scope.message="You have successfully logged out.";break;case 2:this.$scope.message="Your session has timed out.";break;case 4:this.$scope.buttonViewId=2,this.$scope.message="Sorry, that page does not exist.";break;case 3:this.$scope.buttonViewId=3,this.$scope.message="You do not have any "+this.$rootScope.product+"s™ accounts. If you are interested in opening"+(this.$rootScope.isIIP?" an ":" a ")+this.$rootScope.product+"s™ account, you can get started now.";break;case 6:this.$scope.message="We are unable to create or continue your session. Please log in again.";break;case 7:this.$scope.message="Oops, something went wrong. Please try again.";break;case 8:this.$scope.buttonViewId=5,this.$scope.message="Your login credentials have been created. Please click on the Sign Up button below to proceed with funding your account.";break;default:var b=this.hgContextSvc.isSIP()?this.$rootScope.localResources.Error_Phone_SIP:this.$rootScope.localResources.Error_Phone_IIP;this.$scope.message="We are unable to create or continue your session. Please try again or contact us at "+b+" for assistance."}}catch(a){this.$scope.message=this.hgContextSvc.appConfig.featureUnavailableMessage}5==this.$scope.buttonViewId&&this.$rootScope.session.clientSignup()},a.prototype.initScope=function(){var a=this;this.$scope.buttonViewId=1,this.$scope.goHome=function(){return a.goHome()},this.$scope.goLaunch=function(){return a.goLaunch()},this.$scope.goSignUp=function(){return a.goSignUp()}},a.prototype.goHome=function(){this.$rootScope.session&&this.$rootScope.session.isLoggedIn?this.hgStateSvc.go(this.hgContextSvc.appConfig.defaultSecureRouteState):this.hgStateSvc.goUrl({web:"public://",mobile:"hg-app://"})},a.prototype.goLaunch=function(){this.hgContextSvc.device.isNativeIOS()?this.hgCommonJs2nSvc.navigateToApp():this.hgStateSvc.go("login")},a.prototype.goSignUp=function(){this.$rootScope.session.clientSignup()},a.$inject=["$scope","$stateParams","$rootScope","hgContextSvc","hgStateSvc","hgCommonJs2nSvc"],a}();a.messageCtrl=b}(b=a.app||(a.app={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){"use strict";function b(a){var b,c={level1:null,level2:null,level3:null};return{restrict:"E",template:"<div><div class='selected-asset'><div class='element'><h2 class='asset-label'>{{displaySelection}}</h2><span><span ng-if='displayValue' class='asset-value' >{{displayValue}}</span><a ng-if='currentLevel>0'><i ng-click='goBack()' class='fa fa-arrow-circle-o-left image-cursor'></i></a></span></div></div><div class='asset-chart-wrapper'></div><div id='asset-chart-timestamp'>{{timestamp}}</div></div>",replace:!0,scope:{assets:"@?",message:"@?",portfoliovalue:"@?",disabledrilldown:"@?",disablelabels:"=?",ismobile:"=?",enablelegends:"@?",timestamp:"@",textcolor:"@",bordercolor:"@",showbalances:"=?"},transclude:!0,link:function(d,e,f){function g(a,b){var c=a.seriesLabel||a.name;return{name:c,id:a.name,y:a.percentage,color:b?"rgba(255,255,255,0)":a.colorNormalhex,asset:a}}function h(a,b,c){_.each(a,function(a){b.push(g(a,c))})}function i(a,b,c,e,f,g){var a=r.highcharts();if(!a.series[c]){var h={name:"Asset Class",size:"97%",innerSize:w};a.addSeries(h)}a.series[c].update({borderWidth:e+"px",data:b,showInLegend:!!d.enablelegends&&g,dataLabels:{enabled:!d.disablelabels&&f}},!0)}function j(a){if(a){if(c.level1==a.level1)return;c.level1=a.level1,c.level2=a.level2,c.level3=a.level3,d.displaySelection=a.chartLabel?a.chartLabel:d.message||"My Portfolio",d.displayValue=k(a),d.$emit("ASSET_CHART_LEVEL_CHANGED",c)}}function k(a){return d.showbalances?d.portfoliovalue?a&&a.level1?a.dollarFormatted:d.portfoliovalue:a&&a.level1?a.dollarFormatted:null:""}function l(a){d.$emit("TOGGLE_TOOL_TIP_EVENT",{removeTooltip:!0}),d.disabledrilldown||q(a.asset,!0)}function m(){d.$emit("CHART_LOADED_EVENT",null)}function n(a,b){a&&a.series&&a.series.length>b&&a.series[b].remove(!0)}function o(a){var c=[],e=[];_.each(b,function(a){h(a.items,e,!1)}),h(b,c,!0),i(a,e,0,1,!1,!0),i(a,c,1,6,!0,!1),d.portfoliovalue&&d.portfoliovalue.indexOf("Pending")!=-1?d.displaySelection=d.message||"Pending Portfolio Allocation":d.displaySelection=d.message||"My Portfolio",d.currentLevel=0,d.displayValue=k(null)}function p(a,b,c){a.series.length>1&&n(a,1),d.currentLevel=1;var e=[];h(b.items,e,!1),c&&_.each(e,function(a){a.asset===c?(a.color=a.asset.colorNormalhex,a.borderWidth="9px"):(a.color=a.asset.colorDeselectedhex,a.borderWidth="6px")});var f=!d.ismobile;i(a,e,0,6,f),j(b)}function q(a,c){var e=r.highcharts();if(a&&a.level1){var f,g=_.find(b,function(b){return b.level1===a.level1});a.level2&&(f=_.find(g.items,function(b){return b.name===a.level2})),p(e,g,f),f&&c&&d.$emit("ASSET_CHART_LEVEL_CHANGED",a)}}d.disabledrilldown=d.disabledrilldown||!1,d.disablelabels=d.disablelabels||!1,d.enablelegends=d.enablelegends||!1;var r=$(e[0].childNodes[1]),s=(d.ismobile?30:40,d.ismobile?30:40,d.ismobile?40:10,d.ismobile?30:10,d.ismobile?3:10),t=d.ismobile?"8px":"12px",u=(d.ismobile,250),v=d.ismobile?"40px":"225px",w=d.ismobile?"80%":"82%",x=d.textcolor?d.textcolor:"#fff",y=d.bordercolor?d.bordercolor:"#000",z={chart:{type:"pie",height:u,width:u,options3d:{enabled:!0,alpha:45},backgroundColor:"transparent",margin:[0,0,0,0],spacingTop:0,spacingBottom:0,spacingLeft:-10,spacingRight:0,plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,events:{redraw:function(){},load:function(){m()}}},title:{text:""},tooltip:{enabled:!1},plotOptions:{pie:{size:"100%",animation:!1,dataLabels:{enabled:!1,color:x,softConnector:!0,crop:!1,overflow:"none",distance:s,style:{fontSize:t,fontWeight:"normal",width:v,textShadow:"none"}},allowPointSelect:!0,center:["50%","50%"],borderWidth:"5px",borderColor:y,cursor:"pointer",states:{hover:{enabled:!1,halo:{attributes:null,opacity:1,size:10},lineWidth:2,marker:{enabled:!0,fillColor:null,lineColor:"#FFFFFF",lineWidth:0,radius:4,symbol:null}}}},column:{pointPadding:.2,cursor:"pointer",size:"95%",borderWidth:0,events:{legendItemClick:function(){return!1}}},series:{cursor:"pointer",slicedOffset:0,point:{events:{click:function(){l(this)},legendItemClick:function(){return!1}}}}},exporting:{enabled:!1},legend:{itemStyle:{color:x,fontSize:t,fontWeight:"normal"},enabled:!0,width:350,align:"center",itemWidth:150,itemDistance:12,symbolPadding:8,symbolWidth:10,symbolHeight:10,x:20,y:50},series:[],credits:{enabled:!1},navigator:{enabled:!1}};if(r.highcharts(z),d.$on("$destroy",function(){r.highcharts().destroy()}),c&&(c.level1||c.level2)){var A=r.highcharts();c.level1=null,c.level2=null,o(A),d.$emit("ASSET_CHART_LEVEL_CHANGED",null)}d.goBack=function(){var a=r.highcharts();c.level1=null,c.level2=null,o(a),d.$emit("ASSET_CHART_LEVEL_CHANGED",null)},f.$observe("assets",function(a){if(a&&"assetOptions.assets"!==a){var c=angular.fromJson(a);if(c!=b){var d=r.highcharts();b=c,o(d)}}}),f.$observe("portfoliovalue",function(a){d.displayValue=k(null);var b=r.highcharts();o(b)}),d.$on("ASSET_CHART_SELECT_LEVEL",function(a,b){q(b,!1)}),d.$on("ASSET_CHART_ASSETS_CHANGED",function(c,d){var e=r.highcharts();b=d,o(e),angular.element(a).resize()})}}}a.assetChart=b}(b=a.assets||(a.assets={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){"use strict";function b(a){return{restrict:"E",replace:!0,template:"<div><div id='twr-chart'/><div id='twr-chart-timestamp'>{{performanceOptions.charts[1].endingLabel}}</div></div>",link:function(b,c,d){function e(b,c,e,f){var g;switch(f){case"percent":g=function(b){return a("number")(b,2)+"%"};break;case"currency":g=function(b){return a("currency")(b,"$",2)};break;default:g=function(b){return a("number")(b,2)}}b&&b.length>0&&(d.compoundingchart||"percent"==f||(b[0].dataLabels={enabled:!0,borderRadius:5,borderWidth:0,color:m,align:"left",y:c.lhsOverlap&&e?15:-10,formatter:function(){if(!d.compoundingchart)return"<b>"+g(this.y)+"</b><br/>"}}),b[b.length-1].dataLabels={useHTML:!0,enabled:!0,borderRadius:5,borderWidth:0,color:m,align:"right",y:25,formatter:function(){return d.compoundingchart?e?"<div class='chart-tooltip'><b class='text-bold-17'>"+a("currency")(this.y,"$",2)+"</b><br/><span class='text-regular-15'>at 0% annual growth</span></div>":"<div class='chart-tooltip'><b class='text-bold-17'>"+a("currency")(this.y,"$",2)+"</b><br/><span class='text-regular-15'>at +6% annual growth</span></div>":"<b>"+g(this.y)+"</b><br/>"}},d.compoundingchart&&(b[b.length-1].marker={
symbol:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAAwElEQVQokaWSMQrCYBSDvxSvIIJDB2dHT9A7Ozgoujp6A3Fw6B0Sl1asrbViIPDzIC8h74c/oKFhknWSClgAtaRDkktRFJ832V7a3mYAtndJyjHh1XZaNqJX3mz3F3xyHEiwT9IRrt8cvnED0DZQSWIqgQpgBiBp0YnyBZLmT3GSutk4FfWr8+EXZ+D4fNmmueMUnHpGtsvmjmMt322vBrMkKW3v2w/ydt9Tko6w11ISkmwkVcA8SQ0cJZ1/LHUcD8ENTVsPQ47BAAAAAElFTkSuQmCC)"}))}function f(b){if(b&&b.charts&&b.charts.length>=2){var c=b.charts[0],d=b.charts[1];if(c.series&&c.series.length>0&&d.series&&d.series.length>1){var e=c.series[0].data,f=d.series[0].data,g=d.series[1].data;if(e&&f){var h=l.highcharts(),i=f[f.length-1].y-g[f.length-1].y,n=e[e.length-1].y,o=i>=0?j:k,p={text:o+a("number")(n,2)+"%"+o+a("currency")(i,"$",2),align:"left",floating:!0,x:10,y:20,style:{color:m,"font-size":"12px","font-weight":"bold"},useHTML:!0};h.setTitle(p)}}}}function g(a,b){a=a.replace("#","");var c=parseInt(a.substring(0,2),16),d=parseInt(a.substring(2,4),16),e=parseInt(a.substring(4,6),16),f="rgba("+c+","+d+","+e+","+b/100+")";return f}function h(a,b,c){return c||(c=.05),a+b!=0?Math.abs((a-b)/((a+b)/2))<c:a==b}function i(a){return a&&a.length>1&&a[0].yData.length&&a[1].yData.length?{lhsOverlap:h(a[0].yData[0],a[1].yData[0]),rhsOverlap:h(a[0].yData[a[0].yData.length-1],a[1].yData[a[1].yData.length-1])}:{lhsOverlap:!1,rhsOverlap:!1}}Highcharts.setOptions({global:{useUTC:!1}});var j="<div style='margin-left: 10px; margin-right: 5px; margin-bottom: 2px; display:inline-block; width:0; height:0; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 5px solid transparent; border-bottom: 5px solid #00cc22;'></div>",k="<div style='margin-left: 10px; margin-right: 5px; vertical-align: top; margin-top: 6px; display:inline-block; width:0; height:0; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 5px solid red; border-bottom: 5px solid transparent;'></div>",l=$(c[0].querySelector("#twr-chart")),m=b.textColor?b.textColor:"#fff",n=b.borderColor?b.borderColor:"#000",o=b.lineColor?b.lineColor:"#26ffff",p=b.background?b.background:"#303f50",q=b.gridLine?b.gridLine:"#000",r=b.gradient?b.gradient:"rgba(2,0,0,0)",s=b.labelBackground?b.labelBackground:"rgba(0, 0, 0, 0.7)",t={chart:{type:"area",backgroundColor:p,spacingTop:0,spacingBottom:0,spacingLeft:-3,spacingRight:3,marginRight:"30"},legend:{enabled:!1},credits:{enabled:!1},title:{text:null},xAxis:{type:"datetime",gridLineWidth:1,gridLineColor:q,tickLength:5,tickWidth:1,showFirstLabel:!0,tickPosition:"outside",labels:{align:"center",enabled:!d.compoundingchart,formatter:function(){return Highcharts.dateFormat("%m/%e/%y",this.value)},style:{color:m}},title:{text:null},lineWidth:1,units:[["day",[1,2,3]],["week",[1,2]],["month",[1,3,6]]]},yAxis:{gridLineWidth:0,tickLength:5,tickWidth:1,tickPosition:"outside",labels:{enabled:!1},title:{text:null},lineWidth:1,maxPadding:.2},tooltip:{enabled:!1},plotOptions:{area:{lineWidth:1,marker:{radius:0,lineColor:null,states:{hover:{enabled:!0,radius:5}}},shadow:!1,states:{hover:{enabled:!1,halo:{attributes:null,opacity:1,size:10},lineWidth:2,marker:{enabled:!0,fillColor:null,lineColor:m,lineWidth:0,radius:4,symbol:null}}},dataLabels:{enabled:!1}},series:{states:{hover:{enabled:!1}},marker:{enabled:!1}}},series:[{name:"Performance",type:"area",lineColor:o,lineWidth:3,fillColor:{linearGradient:[0,0,0,500],stops:[[0,o],[1,r]]},data:null},{name:"SecondSeries",type:"line",lineColor:"#33c5ff",lineWidth:3,fillColor:{linearGradient:[0,0,0,500],stops:[[0,"#33c5ff"],[1,r]]},data:null}]};l.highcharts(t),b.$on("$destroy",function(){l.highcharts().destroy()});var u=l.highcharts();void 0!==u&&void 0!==u.series[1]&&(void 0!==d.showseries1&&"false"===d.showseries1?u.series[1].hide():u.series[1].show());var v=b.$watch(d.performance,function(a){if(a){var c,h;if(void 0==b.model||"performance"==b.model.selectedView||void 0==b.model.selectedView?(c=a.charts[0],h="percent"):"value"==b.model.selectedView&&(c=a.charts[1],h="currency"),c.series[0].data){var j=l.highcharts(),k=c.series[0].data;b.performace=k,j.series[0].setData(k,!0),e(k,i(j.series),!1,h);var m=j.series[0].options;a.charts[0].series[0].color?(m.dataLabels.backgroundColor=g(c.series[0].color,50),m.lineColor=c.series[0].color,m.fillColor=g(c.series[0].color,10),j.series[0].update(j.series[0].options)):(m.dataLabels.backgroundColor=s,m.dataLabels.borderWidth=1,m.dataLabels.borderColor=n),b.model&&"performance"==b.model.selectedView&&d.showgainloss&&f(a),v()}}}),w=b.$watch(d.secondseries,function(a){if(a){var c;void 0==b.model||"performance"==b.model.selectedView||void 0==b.model.selectedView?c="percent":"value"==b.model.selectedView&&(c="currency"),b.secondSeries=a;var d=l.highcharts();d.series[1].setData(a,!0),e(a,i(d.series),!0,c);var f=d.series[1].options;a.color?(f.dataLabels.backgroundColor=g(a.color,50),f.lineColor=a.color,d.series[1].update(d.series[1].options)):(f.dataLabels.backgroundColor=s,f.dataLabels.borderWidth=1,f.dataLabels.borderColor=n),w()}}),x=b.$watch(d.thirdseries,function(a){if(a){var c="currency";b.thirdSeries=a;var d=l.highcharts();d.series[2].setData(a,!0),e(a,i(d.series),!0,c);var f=d.series[1].options;a.color?(f.dataLabels.backgroundColor=g(a.color,50),f.lineColor=a.color,d.series[1].update(d.series[1].options)):(f.dataLabels.backgroundColor=s,f.dataLabels.borderWidth=1,f.dataLabels.borderColor=n),x()}});b.$on("PERFORMANCE_CHART_CHANGED",function(a,c,h,j){if(c&&c.charts[0].series[0]){var k=l.highcharts(),m=c.charts[0].series[0].data;if(null!=h){var n=k.series[0].options;n.lineColor=h[0],n.dataLabels.backgroundColor=g(h[0],50),n.fillColor=g(h[0],10),k.series[0].update(k.series[0].options),k.series[0].setData(null),k.series[0].setData(m,!1),e(m,i(k.series),!1,j)}else e(m,i(k.series),!1,j),k.series[0].setData(m,!1);b.model&&"performance"==b.model.selectedView&&d.showgainloss&&f(c),k.redraw()}}),b.$on("PERFORMANCE_CHART_SECOND_SERIES_CHANGED",function(a,c,d,f){var h=l.highcharts();if(b.secondSeries=c,null!=d){var j=h.series[1].options;j.dataLabels.backgroundColor=g(d[1],50),j.lineColor=d[1],h.series[1].update(h.series[1].options),h.series[1].setData(null),h.series[1].setData(c,!1),e(c,i(h.series),!0,f)}else e(c,i(h.series),!0,f),h.series[1].setData(c,!1);h.redraw()})}}}a.twrChart=b}(b=a.assets||(a.assets={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){function b(){return{templateUrl:"templates/assets/incomeScorecard.html",replace:!0,scope:{scorecard:"="},link:function(a,b,c,d){}}}a.hgIncomeScorecard=b}(b=a.assets||(a.assets={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){function b(){return{templateUrl:"templates/assets/quickView.html",replace:!0,scope:{quickView:"="},link:function(a,b,c,d){}}}a.hgQuickView=b}(b=a.assets||(a.assets={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){function b(){return{templateUrl:"templates/uiComponents/parameterSelector.html",replace:!0,restrict:"E",scope:{parameterSelector:"="},link:function(a,b,c){}}}a.hgParameterSelector=b}(b=a.assets||(a.assets={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(b){var c=function(a){function b(b,c,d,e,f,g,h,i,j,k,l){var m=this;a.call(this,b,c,d,i),this.$scope=b,this.$rootScope=c,this.$state=d,this.$q=e,this.$timeout=f,this.$filter=g,this.$window=h,this.contextSvc=i,this.portfolioSvc=j,this.goalService=k,this.performanceSvc=l,this.handleWindowResize=function(){},b.model={},this.$scope.shouldShowPortfolioChartToolTip=i.shouldShowPortfolioChartToolTip(),this.$scope.chartStatus={},this.$scope.chartStatus.chartLoaded="false",this.$scope.assetOptions={},this.$scope.selectedBenchmark={},this.$scope.navigateGoals=function(a){a&&d.go(a)},this.$scope.displayDollar=this.isInvested(),this.$scope.selectedView="performance",this.$scope.isDesktop=i.isDesktop(),this.$scope.assetChartDisclosureAssetId=c.isIIP?"PORTFOLIO-VALUEPERFORMANCECOMBINED-AS":"SIP-Portfolio-ValuePerformanceCombined",this.$scope.isInvestedAssetPopup=this.isInvested(),this.$scope.uninvestedMessage=this.portfolioSvc.uninvestedChartMessage(),this.$scope.allAccountsClosedMessage=this.portfolioSvc.getAllAccountsClosedMessage(),this.initializeScopeThemeAttributes(),this.$scope.$on("$destroy",function(){c.dismissMessage(m.contextSvc.appConfig.featureUnavailableMessage)}),this.$scope.$on("DASHBOARD_ACCOUNT_SELECTED",function(){m.$rootScope.dismissMessage(m.contextSvc.appConfig.featureUnavailableMessage),m.setModel(m.contextSvc.getActiveAccountNumber()),m.$rootScope.deviceInfo.isSmallScreen()&&(m.loadGoalsData(),m.loadPerformanceData())}),this.$scope.$on("DASHBOARD_LOAD_GOALS_DATA",function(){m.$rootScope.deviceInfo.isSmallScreen()&&(m.loadGoalsData(),m.loadPerformanceData())}),this.$scope.$on("DASHBOARD_SETMODEL",function(){m.setModel(m.contextSvc.getActiveAccountNumber())}),this.$scope.$on("CHART_LOADED_EVENT",function(){m.$scope.chartStatus.chartLoaded="true"}),this.$scope.$on("TOGGLE_TOOL_TIP_EVENT",function(a,b){var c=angular.element("#chart1tooltip");if(c){var d=m;m.$timeout(function(){c.trigger("click"),b&&b.removeTooltip&&(d.$scope.shouldShowPortfolioChartToolTip=!1,d.contextSvc.setPortfolioChartToolTipShown("true"))},100)}}),this.$scope.updateCustomDates=function(){m.$scope.model.earliestAllowedEndDate=moment(m.$scope.model.startDate).add(1,"days").format(),m.$scope.model.latestAllowedStartDate=moment(m.$scope.model.endDate).subtract(1,"days").format()},this.$scope.updatePerfChart=function(a,c){m.loadPerformanceChart(b.model.dailyAccountInfo,c,a,b.model.DateGenerated)},this.$scope.confirmDateRange=function(a){m.$scope.selectedRange=a},this.$scope.getDateRange=function(){m.$state.go("charts.performanceDateRange"),m.$scope.model.startDate=moment(m.$scope.model.startDate).format(),m.$scope.model.endDate=moment(m.$scope.model.endDate).format()},this.$scope.goToGoals=function(){m.$state.go("charts.goal.goalMain")},this.$scope.isActiveTab=function(a){return"charts.assets"===a?m.$state.is("charts")||m.$state.includes(a):m.$state.includes(a)},this.$scope.goToAccountSettings=function(){m.goToAccountSettings()},this.$scope.assetOptions.select=function(a){var c=m.$scope.assetOptions.selected;c&&c.level1==a.level1&&c.level2==a.level2||(b.$broadcast("ASSET_CHART_SELECT_LEVEL",{level1:a.level1,level2:a.level2,level3:a.level3}),m.handleAssetSelectionChanged(a,!1))},this.$scope.assetOptions.isDisabled=function(a){return!(!m.$scope.assetOptions.selected||!m.$scope.assetOptions.selected.level1)&&m.$scope.assetOptions.selected.level1!==a.level1},this.$scope.assetOptions.isSelected=function(a){return!(!m.$scope.assetOptions.selected||!m.$scope.assetOptions.selected.level2)&&(m.$scope.showETFs?n.$scope.assetOptions.selected.level2===a.name:m.$scope.assetOptions.selected.level2===a.level2)},b.isInvested=function(){return m.isInvested()},b.isUnfundedOrUninvested=function(){return m.isUnfundedOrUninvested()},this.$scope.$on("ASSET_CHART_LEVEL_CHANGED",function(a,b){m.handleAssetSelectionChanged(b,!0)}),this.$scope.idFromAssetLevelNames=function(a,b){var c=a.replace(/[ &]/g,"_"),d=b.replace(/[ &]/g,"_");return c+"-"+d},this.contextSvc.getActiveAccountNumber()&&this.setModel(this.contextSvc.getActiveAccountNumber()),this.$scope.closeBenchmarkPopover=function(){angular.element("#benchPopover").trigger("click")},this.$scope.showdetail=function(a){m.$rootScope.deviceInfo.isLargeScreen()?a.expanded=!a.expanded:(m.$scope.selectedActivity=a,m.$state.go("charts.activityDetail"),m.$rootScope.pageTitle=a.Status)},this.addWatchers(),this.$scope.assetViewUpdate=function(){return m.assetViewUpdate()},this.$scope.assetETFViewUpdate=function(){return m.assetETFViewUpdate()},this.$scope.goToFundMoney=function(a){return m.goToFundMoney(a)};var n=this;this.$rootScope.deviceInfo.isSmallScreen()&&(this.loadGoalsData(),this.loadPerformanceData()),angular.element(h).on("resize",this.handleWindowResize),b.$on("$destroy",function(){return angular.element(h).off("resize",m.handleWindowResize)});var n=this;this.$scope.showForceSpinner=function(){m.contextSvc.isBigweb()||n.contextSvc.showSpinner()},this.contextSvc.isBigweb()||b.$on("$viewContentLoaded",function(){if("charts.activity"==n.$state.current.name||"charts.assets"==n.$state.current.name){var a=function(){n.contextSvc.hideSpinner()};setTimeout(a,1e3)}})}return __extends(b,a),b.prototype.addWatchers=function(){var a=this;this.$scope.$watch("assetOptions.partitionedAssets",function(b,c){b&&(a.$scope.displayDollar=a.isInvested(),a.$scope.isInvestedAssetPopup=a.isInvested())})},b.prototype.isInvested=function(){if(this.$rootScope.isIIP){var a=window.sessionStorage.getItem("updateProfile");null!=a&&this.$rootScope.raiseMessage("Once completed, we will review your updated portfolio and make the final portfolio selection. Please contact us if you would like more information about the final portfolio selection.",3,"Update Successful"),window.sessionStorage.removeItem("updateProfile")}return!(!this.contextSvc.activeAccount||!this.contextSvc.activeAccount.accountStatus)&&"Invested"==this.contextSvc.activeAccount.accountStatus},b.prototype.isNotFunded=function(){if(this.contextSvc.activeAccount&&this.contextSvc.activeAccount.accountStatus)return"NotFunded"==this.contextSvc.activeAccount.accountStatus},b.prototype.isUnfundedOrUninvested=function(){return!(!this.contextSvc.activeAccount||!this.contextSvc.activeAccount.accountStatus||"NotFunded"!=this.contextSvc.activeAccount.accountStatus&&"Invested"===this.contextSvc.activeAccount.accountStatus)},b.prototype.assetViewUpdate=function(){this.$scope.displayDollar=!this.$scope.displayDollar},b.prototype.goToFundMoney=function(a){a.stopPropagation(),this.$state.go("moveMoney.moveMoneyLaunch")},b.prototype.assetETFViewUpdate=function(){this.$scope.showETFs=!this.$scope.showETFs},b.prototype.handleAssetSelectionChanged=function(a,b){if(a){this.$scope.assetOptions.selected||(this.$scope.assetOptions.selected={}),this.$scope.assetOptions.selected.level1=a.level1,this.$scope.assetOptions.selected.level2=a.level2,this.$scope.assetOptions.level=a.level1?1:0;var c=this.findAsset(a);c&&(this.$scope.assetOptions.mobileAssets=c.items),a.level2&&b&&this.clickAssetInTable(a)}else this.$scope.assetOptions.selected=null,this.$scope.assetOptions.mobileAssets=this.$scope.assetOptions.assets;this.$scope.$$phase||this.$scope.$apply()},b.prototype.clickAssetInTable=function(a){var b=this.$scope.idFromAssetLevelNames(a.level1,a.level2),c=angular.element("#"+b);c&&c.trigger("click")},b.prototype.initializeScopeThemeAttributes=function(){var a=this.contextSvc.customization.getThemeName();if(a||(a="theme01"),this.$scope.borderColor=this.contextSvc.customization.getPaletteColor("AssetBorder"),this.$scope.textColor="theme02"==a?"#000":"#fff",this.$scope.lineColor=this.contextSvc.customization.getPaletteColor("PChart"),this.$scope.background="theme02"==a?"#fafafa":"#303f50",this.$scope.gridLine="theme02"==a?"#f0f0f0":"#000",this.$scope.labelBackground="theme02"==a?"#dcdcdc":"rgba(0, 0, 0, 0.7)",this.$scope.gradient="theme02"==a?"#fff":"rgba(2,0,0,0)",this.$rootScope.isIIP){var b=this.getSeriesColors();this.$scope.model.heroStylePerformance={color:b.performance},this.$scope.model.heroStyleBenchmark={color:b.benchmark},this.$scope.model.heroStyleValue={color:b.value},this.$scope.model.heroStyleContributions={color:b.contributions}}},b.prototype.setModel=function(a){var b=this,c=this;this.$rootScope.allAccountsClosedFlag||this.contextSvc.getAllAccountClosedFlag()?(this.$rootScope.allAccountsClosedFlag=!this.$rootScope.allAccountsClosedFlag||this.$rootScope.allAccountsClosedFlag,this.$scope.allAccountsClosedMessage=this.portfolioSvc.getAllAccountsClosedMessage()):(c.contextSvc.showSpinner(),this.resetChartData(),c.portfolioSvc.get(a).then(function(d){if(d.badAssetData?(c.$scope.model.badAssetData=!0,c.$scope.model.badAssetDataMessage1=d.badAssetDataMessage1,c.$scope.model.badAssetDataMessage2=d.badAssetDataMessage2):(c.$scope.model.name=d.name,c.$scope.model.memberSince=d.memberSince,c.$scope.model.balance=d.balance,c.$scope.model.profileImage=d.profileImage,c.$scope.model.performance=d.performance,c.$scope.model.dailyAccountInfo=d.dailyAccountInfo,c.$scope.model.DateGenerated=d.DateGenerated,c.$scope.model.beginningContributions=d.beginningContributions,c.loadAssetChart(d),c.$scope.model.benchmarkPopUpAssets=b.portfolioSvc.getBenchmarkPopUpAssets(),c.updateStoredBalance(a,d.balance)),d.badActivityData)c.$scope.model.badActivityData=!0,c.$scope.model.badActivitydataMessage1=d.badActivitydataMessage1,c.$scope.model.badActivitydataMessage2=d.badActivitydataMessage2;else{if(d.activityFeed){for(var e=0;e<d.activityFeed.length&&201==d.activityFeed[e].EventId;)e++;c.$scope.model.activityFeedPending=d.activityFeed.slice(0,e),c.$scope.model.activityFeedPosted=d.activityFeed.slice(e,d.activityFeed.length)}c.$scope.model.activity=b.getNonGoalFeaturedActivity(d.activityFeed),c.initializeRecurringWithdrawalSetup(d.activityFeed)}}).catch(function(){c.$rootScope.raiseMessage(b.contextSvc.appConfig.featureUnavailableMessage,2)}).finally(function(){c.contextSvc.hideSpinner()}))},b.prototype.getNonGoalFeaturedActivity=function(a){for(var b in a){var c=a[b];if(120!=c.EventId&&121!=c.EventId&&122!=c.EventId)return c}},b.prototype.resetChartData=function(){this.$scope.assetOptions.assets=null,this.$scope.assetOptions.partitionedAssets=null,this.$scope.assetOptions.mobileAssets=null,this.$scope.performanceOptions=null,this.$scope.model.componentsOfChange=null,this.$scope.model.activity=null,this.$scope.model.activityFeed=null},b.prototype.findAsset=function(a){if(a&&a.level1){var b=_.find(this.$scope.assetOptions.assets,function(b){return b.level1===a.level1});if(b){if(a.level2){var c=_.find(b.items,function(b){return b.level2===a.level2});if(c)return c}return b}}return null},b.prototype.loadAssetChart=function(a){var b=this;if(a&&a.assets&&a.assets.data){this.$scope.assetOptions.assets=a.assets.data,this.$scope.assetOptions.partitionedAssets=[],this.$scope.assetOptions.timestamp=a.assets.timestamp,_.forEach(a.assets.data,function(a){var c=b.contextSvc.customization.getPaletteColor(a.name);a.displayStyle={"border-bottom-color":c},a.legendStyle={color:c},_.forEach(a.items,function(a){a.popover={content:"<h2 class='secondary-header'>ITEM DETAILS</h2><h1>Name of the details</h1><p>Companies with capitalization over $10 billion are considered large-cap.  Roughly $0.10 of every dollar invested will go into purchasing this fund.</p><table><tr><td>Schwab U.S. Large-Company ETF™<strong>(SCHX)</strong></td><td class='numeric'>$1,080</td></tr><tr><td>Schwab U.S. Large-Company Value ETF™<strong>(SCHX)</strong></td><td class='numeric'>$540</td></tr><tr><td>Schwab U.S. Broad Market ETF™<strong>(SCHX)</strong></td><td class='numeric'>$540</td></tr></table>"}})}),this.$scope.assetOptions.mobileAssets=a.assets.data;var c=["Stocks","Commodities","Fixed Income","Cash"],d=[];_.each(c,function(a){var c=_.find(b.$scope.assetOptions.assets,function(b){return b.name===a});c&&(c.percentage<0&&(c.percentage=0),d.push(c))});for(var e=this.$scope.assetOptions.assets.slice(0);e.length;)this.$scope.assetOptions.partitionedAssets.push(e.splice(0,2));this.$scope.assetOptions.selected=null,this.$scope.$broadcast("ASSET_CHART_ASSETS_CHANGED",a.assets.data)}},b.prototype.loadPerformanceChart=function(a,b,c,d,e){if(a){var f=this.portfolioSvc.getPerfStartEndDates(a,b,d);"Custom"!=b?(this.$scope.model.startDate=moment(f.sDate).format(),this.$scope.model.endDate=moment(f.eDate).format()):(this.$scope.model.startDate=moment(this.$scope.model.startDate).format(),this.$scope.model.endDate=moment(this.$scope.model.endDate).format()),this.$scope.model.accountStartDate=moment(a.series[0].performanceData[0].x).format(),this.$scope.model.accountEndDate=moment(a.series[0].performanceData[a.series[0].performanceData.length-1].x).format(),this.$scope.model.earliestAllowedEndDate=moment(this.$scope.model.startDate).add(1,"days").format(),this.$scope.model.latestAllowedStartDate=moment(this.$scope.model.endDate).subtract(1,"days").format(),this.$scope.model.selectedView=c,this.$scope.selectedView=c,this.$scope.selectedRange=b,"performance"==c?(this.$scope.viewType[0].mobileDisplayViewClass="btn mview-dashboard-select",this.$scope.viewType[1].mobileDisplayViewClass="btn"):(this.$scope.viewType[1].mobileDisplayViewClass="btn mview-dashboard-select",this.$scope.viewType[0].mobileDisplayViewClass="btn")}},b.prototype.updateStoredBalance=function(a,b){var c=this;b&&(_.each(c.$rootScope.accounts,function(c){b.indexOf("Pending")==-1&&c.accountNumber==a&&(c.balance=b)}),c.$rootScope.$broadcast("ACCOUNTS_UPDATED_EVENT"))},b.prototype.getSeriesColors=function(){return this.$rootScope.isSIP?{performance:"#26ffff",benchmark:"#f28b24",value:"#26ffff",contributions:"#f28b24",benchmarkIndex0:this.contextSvc.customization.getPaletteColor("BenchmarkIndex0"),benchmarkIndex1:this.contextSvc.customization.getPaletteColor("BenchmarkIndex1"),benchmarkIndex2:this.contextSvc.customization.getPaletteColor("BenchmarkIndex2"),benchmarkIndex3:this.contextSvc.customization.getPaletteColor("BenchmarkIndex3"),benchmarkIndex4:this.contextSvc.customization.getPaletteColor("BenchmarkIndex4")}:this.$rootScope.isIIP?{performance:this.contextSvc.customization.getPaletteColor("Stocks"),benchmark:this.contextSvc.customization.getPaletteColor("Fixed Income"),value:this.contextSvc.customization.getPaletteColor("Commodities"),contributions:this.contextSvc.customization.getPaletteColor("Cash")}:{}},b.prototype.goToAccountSettings=function(){this.$state.go("charts.accountSettings")},b.prototype.isIncomeModel=function(){return 2==this.$scope.goalViewModel.type},b.prototype.loadGoalsData=function(){var a=this,b=this;this.$rootScope.allAccountsClosedFlag||this.goalService.loadViewModelData().then(function(c){if(c)if(1!=c.badGoalData)b.$scope.goalViewModel=c,b.$scope.goalViewModel.title.class=c.title.class,a.isIncomeModel()?b.goalService.redrawGoalChart(!1,2,c):b.goalService.redrawGoalChart(!1,1,c);else if(c.badGoalData)return b.$scope.goalViewModel=new Object,b.$scope.goalViewModel.badGoalData=c.badGoalData,b.$scope.goalViewModel.badGoalDataMsg1=c.badGoalDataMsg1,void(b.$scope.goalViewModel.badGoalDataMsg2=c.badGoalDataMsg2)})},b.prototype.loadPerformanceData=function(){var a=this;this.$rootScope.allAccountsClosedFlag||this.performanceSvc.getPerformanceData().then(function(b){if(b){if(a.$scope.performanceViewModel=new Object,b.badPerformanceData)return a.$scope.performanceViewModel.badPerformanceData=b.badPerformanceData,a.$scope.performanceViewModel.badPerformanceDataMsg1=b.badPerformanceDataMsg1,void(a.$scope.performanceViewModel.badPerformanceDataMsg2=b.badPerformanceDataMsg2);a.$scope.performanceViewModel=b,a.performanceSvc.redrawPerformanceChart(b,"performance",void 0)}})},b.prototype.hideRecurringWithdrawalNotification=function(){var a=0;this.$rootScope.accounts?a=this.$rootScope.accounts.indexOf(this.contextSvc.getActiveAccount()):(this.contextSvc.processAccounts(this.contextSvc.getSessionData()),a=this.$rootScope.accounts.indexOf(this.contextSvc.getActiveAccount()));var b={accountIndex:a,RecurringWithdrawalNotification:!0},c=[];null!=this.$window.localStorage.getItem("RIRW_"+this.$rootScope.session.brkrCustId)&&(c=JSON.parse(this.$window.localStorage.getItem("RIRW_"+this.$rootScope.session.brkrCustId)),angular.forEach(c,function(b,d){b.accountIndex==a&&c.splice(d,1)})),c.push(b),this.$window.localStorage.setItem("RIRW_"+this.$rootScope.session.brkrCustId,JSON.stringify(c))},b.prototype.removeRecurringWithdrawalNotificationFlag=function(){var a=0;this.$rootScope.accounts?a=this.$rootScope.accounts.indexOf(this.contextSvc.getActiveAccount()):(this.contextSvc.processAccounts(this.contextSvc.getSessionData()),a=this.$rootScope.accounts.indexOf(this.contextSvc.getActiveAccount()));var b=[];null!=this.$window.localStorage.getItem("RIRW_"+this.$rootScope.session.brkrCustId)&&(b=JSON.parse(this.$window.localStorage.getItem("RIRW_"+this.$rootScope.session.brkrCustId)),angular.forEach(b,function(c,d){c.accountIndex==a&&b.splice(d,1)})),b.length>0&&this.$window.localStorage.setItem("RIRW_"+this.$rootScope.session.brkrCustId,JSON.stringify(b))},b.prototype.getRecurringWithdrawalNotificationFlag=function(){var a=0;if(this.$rootScope.accounts?a=this.$rootScope.accounts.indexOf(this.contextSvc.getActiveAccount()):(this.contextSvc.processAccounts(this.contextSvc.getSessionData()),a=this.$rootScope.accounts.indexOf(this.contextSvc.getActiveAccount())),null!=this.$window.localStorage.getItem("RIRW_"+this.$rootScope.session.brkrCustId)){var b=JSON.parse(this.$window.localStorage.getItem("RIRW_"+this.$rootScope.session.brkrCustId)),c=void 0;return angular.forEach(b,function(b,d){b.accountIndex==a&&(c=b.RecurringWithdrawalNotification)}),c}},b.prototype.setupRecurringWithdrawalDate=function(a){if("0001-01-01T00:00:00"==a)return!1;var b=moment().utc().format("MMM Do YYYY"),c=moment(a).utc().format("MMM Do YYYY"),d=moment(a).utc().add(1,"days").format("MMM Do YYYY"),e=moment().utc().format("H");return b!=c&&(!(Number(e)>=1&&Number(e)<=10)||b!=d)},b.prototype.initializeRecurringWithdrawalSetup=function(a){var b=this,c=this.contextSvc.getActivePortfolioId(),d=this.contextSvc.getActiveAccount();if(d||(this.contextSvc.processAccounts(this.contextSvc.getSessionData()),c=this.contextSvc.getActivePortfolioId(),d=this.contextSvc.getActiveAccount()),this.setupRecurringWithdrawalDate(d.AccountInfo.EstablishedDate),"Income"==d.drift.ShortGoalNameText&&d.drift.GoalState>0&&1==this.setupRecurringWithdrawalDate(d.AccountInfo.EstablishedDate)&&d.AccountInfo&&d.AccountInfo.AccountProfile&&d.AccountInfo.AccountProfile.AccountRestrictionCodes&&0==d.AccountInfo.AccountProfile.AccountRestrictionCodes.length){if(a.length>0){var e=!1,f=!1;_.forEach(a,function(a){a&&void 0!=a.Frequency&&"One time"!=a.Frequency&&(f=!0),a&&void 0!=a.Frequency&&"One time"==a.Frequency&&(e=!0)}),0==f&&1==e?1!=this.getRecurringWithdrawalNotificationFlag()?this.$rootScope.raiseMessage("Set up a <a href='#/moveMoney/moveMoneyLaunch?isrecurring=true'>recurring withdrawal</a> from your new income account.",1,"",function(){b.hideRecurringWithdrawalNotification()}):1==this.getRecurringWithdrawalNotificationFlag()&&this.$rootScope.dismissMessage("Set up a <a href='#/moveMoney/moveMoneyLaunch?isrecurring=true'>recurring withdrawal</a> from your new income account."):this.$rootScope.dismissMessage("Set up a <a href='#/moveMoney/moveMoneyLaunch?isrecurring=true'>recurring withdrawal</a> from your new income account.")}}else this.$rootScope.dismissMessage("Set up a <a href='#/moveMoney/moveMoneyLaunch?isrecurring=true'>recurring withdrawal</a> from your new income account."),this.removeRecurringWithdrawalNotificationFlag()},b.$inject=["$scope","$rootScope","$state","$q","$timeout","$filter","$window","hgContextSvc","hgPortfolioSvc","hgGoalService","hgPerformanceService"],b}(a.common.hgControllerBase);b.dashboardCtrl=c}(b=a.assets||(a.assets={}))}(hg||(hg={}));var hg;!function(a){var b;!function(b){var c=function(){function b(b,c,d,e,f,g){var h=this;this.$rootScope=b,this.goalService=c,this.$state=d,this.$filter=e,this.contextSvc=f,this.$timeout=g,this.chartLoadedHandler=function(){h.loadPopup(!1)};var i=this;i.contextSvc=f,this.contextSvc.showSpinner(),c.loadViewModelData().then(function(c){if(c){if(i.goalDetails=new Object,c.allAccountsClosedMessage)return i.goalDetails.allAccountsClosedMessage=c.allAccountsClosedMessage,void h.contextSvc.hideSpinner();if(c.badGoalData)return i.goalDetails.badGoalData=c.badGoalData,i.goalDetails.badGoalDataMsg1=c.badGoalDataMsg1,i.goalDetails.badGoalDataMsg2=c.badGoalDataMsg2,void h.contextSvc.hideSpinner();i.goalDetails=c,i.goalService.defaultGoalAmount=!0,i.goalDetails.riskProfile.sliderStop=function(){if(i.goalDetails.riskProfile.sliderGroup.slider.value!==i.goalDetails.riskProfile.sliderGroup.slider.currentValue){i.goalDetails.riskProfile.sliderGroup.slider.currentValue=i.goalDetails.riskProfile.sliderGroup.slider.value;var a=h.goalDetails.selectedRiskModel.replace(/[^\d,]/g,"");i.goalDetails.selectedRiskModel=i.goalDetails.selectedRiskModel.replace(a,i.goalDetails.riskProfile.sliderGroup.slider.value.toString()),angular.forEach(h.goalDetails.models,function(a,b){a.name==i.goalDetails.selectedRiskModel&&i.goalDetails.models[b].assetClasses&&(i.goalDetails.riskProfile.items=i.goalService.setRiskProfileAssets(i.goalDetails.models[b].assetClasses))}),h.enableUpdateButton(),i.sliderStop(i.goalDetails.riskProfile.sliderGroup.slider.value,i.goalDetails.riskProfile.sliderGroup.sliderType),i.goalDetails.riskProfile.togglePopup()}},i.goalDetails.riskProfile.togglePopup=function(){(i.goalDetails.riskProfile.popupOpened||i.goalDetails.riskProfile.sliderGroup.slider.value!=i.goalDetails.riskProfile.originalValue)&&(i.goalDetails.riskProfile.popupOpened=!i.goalDetails.riskProfile.popupOpened,i.contextSvc.device.isLargeScreen()?angular.element("#riskProfilePopover").trigger("click"):d.go("charts.goal.riskProfileSliderMessage"))},i.goalDetails.monthlyContribution.updateInput=function(){i.goalDetails.monthlyContribution.slider.slider.value!==i.goalDetails.monthlyContribution.slider.slider.currentValue&&(i.goalDetails.monthlyContribution.slider.slider.currentValue=i.goalDetails.monthlyContribution.slider.slider.value,i.goalDetails.monthlyContribution.amount=i.goalDetails.monthlyContribution.slider.slider.value,i.sliderStop(i.goalDetails.monthlyContribution.slider.slider.value,0),i.updateMonthlyContributionLabelForMobile())},i.goalDetails.monthlyContribution.updateSlider=function(a){var b=i.goalDetails.monthlyContribution.amount>i.goalDetails.monthlyContribution.slider.slider.maxValue?i.goalDetails.monthlyContribution.slider.slider.maxValue:i.goalDetails.monthlyContribution.amount;i.goalDetails.monthlyContribution.slider.slider.value=Number(b.toFixed()),i.goalDetails.monthlyContribution.amount<=i.goalDetails.monthlyContribution.maxValidLength&&(a==i.goalDetails.monthlyContribution.slider.title&&angular.element(".contribution-input").trigger("blur"),i.sliderStop(i.goalDetails.monthlyContribution.slider.slider.value,0)),i.updateMonthlyContributionLabelForMobile()},i.goalDetails.oneTimeContribution.updateInput=function(){i.goalDetails.oneTimeContribution.slider.slider.value!==i.goalDetails.oneTimeContribution.slider.slider.currentValue&&(i.goalDetails.oneTimeContribution.slider.slider.currentValue=i.goalDetails.oneTimeContribution.slider.slider.value,i.goalDetails.oneTimeContribution.amount=i.goalDetails.oneTimeContribution.slider.slider.value,i.sliderStop(i.goalDetails.oneTimeContribution.slider.slider.value,1),i.updateOneTimeContributionLabelForMobile())},i.goalDetails.oneTimeContribution.updateSlider=function(a){var b=angular.isNumber(i.goalDetails.oneTimeContribution.amount)?i.goalDetails.oneTimeContribution.amount:0,c=b>i.goalDetails.oneTimeContribution.slider.slider.maxValue?i.goalDetails.oneTimeContribution.slider.slider.maxValue:b;i.goalDetails.oneTimeContribution.slider.slider.value=Number(c.toFixed()),i.goalDetails.oneTimeContribution.amount<=i.goalDetails.oneTimeContribution.maxValidLength&&(a==i.goalDetails.oneTimeContribution.slider.title&&angular.element(".contribution-input").trigger("blur"),i.sliderStop(i.goalDetails.oneTimeContribution.slider.slider.value,1)),i.updateOneTimeContributionLabelForMobile()},i.goalDetails.riskProfile.back=function(){i.back()},i.goalDetails.monthlyContribution.back=function(){i.back()},i.goalDetails.oneTimeContribution.back=function(){i.back()},i.goalDetails.monthlyContribution.launchMoveMoney=function(){b.$emit("HG_MOVEMONEY_LAUNCH",{type:i.goalDetails.type,amount:i.goalDetails.monthlyContribution.amount,returnState:"charts.goal.goalMain"})},i.goalDetails.oneTimeContribution.launchMoveMoney=function(){b.$emit("HG_MOVEMONEY_LAUNCH",{type:i.goalDetails.type,amount:i.goalDetails.oneTimeContribution.amount,
isOnetime:!0,returnState:"charts.goal.goalMain"})},i.goalDetails.oneTimeContribution.launchMoveMoneyWithdrawal=function(){b.$emit("HG_MOVEMONEY_LAUNCH",{type:i.goalDetails.type,amount:i.goalDetails.target.amount,returnState:"charts.goal.goalMain",isWithdrawal:!0})},i.goalDetails.parameterSelector.navigateToRoute=function(a){a&&d.go(a)},i.goalDetails.riskProfile.launchPlanConfirmation=function(){i.navigateToPlanconfirm()},i.goalDetails.summaryStatement.jumpSlider=function(){i.jumpSlider("8")},i.goalDetails.riskProfile.riskSelectionUnchanged=!0,i.loadChart(),i.goalService.setGoalInfo(i.goalDetails),i.goalDetails.riskProfile.sliderShow=!0,null!=i.goalService.getSelectRiskProfile()&&(i.goalDetails.riskProfile.riskSelectionUnchanged=!1,i.goalService.removeUpdateProfile()),i.goalDetails.showIncomeTargetLink=function(){return 2==i.goalDetails.type},i.goalDetails.showSavingsTargetLink=function(){return 1==i.goalDetails.type},i.goalDetails.showRecommendedAmountLabel=function(){return i.showRecommendedAmountLabel()},i.goalDetails.showMobileViewIncomeScorecard=function(){return i.showMobileViewIncomeScorecard()},i.goalDetails.changeGoalTargetAmount=function(){i.changeGoalTargetAmount(!0)},i.goalDetails.resetTargetGoal=function(){i.resetTargetGoal()},i.goalDetails.target.editGoal=function(){i.editGoal()},i.goalDetails.saveGoal=function(){i.saveGoal()},i.goalDetails.monthlyContribution.toolTipNav=function(){i.iconInfoPopup("charts.goal.monthlyContributionsPopup")},i.goalDetails.riskProfile.toolTipNav=function(){i.iconInfoPopup("charts.goal.riskProfilePopup")},i.goalDetails.target.toolTipNav=function(){i.iconInfoPopup("charts.goal.educationPopup")},i.goalDetails.monthlyContribution.slider.iconToolTip&&(i.goalDetails.monthlyContribution.slider.iconToolTip.info=i.$rootScope.localResources.Contribution_Tooltip_Info),i.goalDetails.riskProfile.sliderGroup.iconToolTip&&(i.goalDetails.riskProfile.sliderGroup.iconToolTip.info=i.$rootScope.localResources.RiskProfile_Tooltip_Info),i.$rootScope.$on("$stateChangeStart",function(a,b,c,d,e){"charts.goal.goalValue"!=b.name&&"charts.goal.monthlyContributions"!=b.name&&"charts.goal.oneTimeContribution"!=b.name&&"charts.goal.riskProfile"!=b.name&&"charts.goal.goalMain"!=b.name&&"charts.goal.monthlyWithdrawals"!=b.name||("charts.goal.goalMain"==b.name&&(i.goalDetailsMementoOriginator.discardUpdatesToMemento(),i.goalDetails=i.goalDetailsMementoOriginator.getMemento()),"charts.goal.goalValue"==b.name&&"charts.goal.goalValueFirstTimeMessage"==d.name&&i.loadPopup(!0))}),i.goalDetailsMementoOriginator=new a.assets.MementoOriginator(i.goalDetails)}},function(){h.contextSvc.hideSpinner()})}return b.prototype.updateMonthlyContributionLabelForMobile=function(){var a=this;this.contextSvc.device.isLargeScreen()||_.each(this.goalDetails.parameterSelector.listItems,function(b){"Monthly Contributions"==b.label1&&(b.label2=a.$filter("currency")(a.goalDetails.monthlyContribution.amount,"$",0))})},b.prototype.updateOneTimeContributionLabelForMobile=function(){var a=this;this.contextSvc.device.isLargeScreen()||_.each(this.goalDetails.parameterSelector.listItems,function(b){"One-Time Contribution"==b.label1&&(b.label2=a.$filter("currency")(a.goalDetails.oneTimeContribution.amount,"$",0))})},b.prototype.updateTargetAmountParameterSelector=function(){var a=this;this.goalDetails.parameterSelector&&!this.contextSvc.device.isLargeScreen()&&_.each(this.goalDetails.parameterSelector.listItems,function(b){"Goal Value"!=b.label1&&"Monthly Withdrawals"!=b.label1||(b.label2=a.$filter("currency")(a.goalDetails.target.amount,"$",0))})},b.prototype.loadPopup=function(a){var b=this;a&&(this.goalDetails.goalSetupPopoverFlag=!1,this.goalService.setSetupGoalMessageSeenFlag("true"));var c=this.goalService.getSetupGoalMessageSeenFlag();(0===this.goalDetails.state&&!this.goalDetails.goalSetupPopoverFlag&&!c||a)&&(this.goalDetails.goalSetupPopoverFlag=!0,this.$timeout(function(){b.contextSvc.device.isLargeScreen()?b.goalService.isIncomeModel(b.goalDetails.type)?angular.element("#setupIncomeGoalPopup").trigger("click"):angular.element("#setupSavingGoalPopup").trigger("click"):c||b.$state.go("charts.goal.goalValueFirstTimeMessage")}))},b.prototype.loadChart=function(){this.goalService.isIncomeModel(this.goalDetails.type)?(this.goalService.redrawGoalChart(!0,2,this.goalDetails),this.goalDetails.title.innerLabel=this.goalDetails.chart.incomeOverlayModel.innerLabel,this.goalDetails.title.percentage=this.goalService.getDonutPercentage(this.goalDetails)):this.goalService.redrawGoalChart(!0,1,this.goalDetails),this.contextSvc.hideSpinner()},b.prototype.sliderStop=function(a,b){var c=1;this.goalService.isIncomeModel(this.goalDetails.type)&&(c=2),this.goalDetails.target.editGoalFlag=!0,this.goalService.redrawGoalChart(!0,c,this.goalDetails),this.goalDetailsMementoOriginator.updateMemento(this.goalDetails)},b.prototype.sliderFunction=function(){},b.prototype.saveGoal=function(){this.goalService.saveGoal(this.goalDetails),this.goalService.saveGoalParametersAdapter("post",this.goalDetails),this.updateTargetAmountParameterSelector(),this.goalDetailsMementoOriginator.updateMemento(this.goalDetails),this.goalDetailsMementoOriginator.acceptUpdatesToMemento()},b.prototype.back=function(){var a=this.contextSvc.getPreviousState(),b=a?a.name:"charts.goal.goalMain";this.$state.go(b)},b.prototype.enableUpdateButton=function(){this.goalDetails.riskProfile.riskSelectionUnchanged=this.goalDetails.riskProfile.sliderGroup.slider.value==this.goalDetails.riskProfile.originalValue},b.prototype.navigateToPlanconfirm=function(){var a=this.goalDetails.riskProfile.sliderGroup.slider.value,b=this;this.goalService.navigateEnrollment(a).then(function(a){b.$state.go("planConfirmation")})},b.prototype.changeGoalTargetAmount=function(a){var b=this;a&&(angular.element(".input-box-target").trigger("blur"),a=!1),this.goalDetails.target.editGoalFlag=!0,this.goalDetails.target.amount&&(_.each(this.goalDetails.parameterSelector.listItems,function(a){"Goal Value"==a.label1&&(a.label2=b.$filter("currency")(b.goalDetails.target.amount,"$",0))}),this.goalDetails.target.label1=this.$filter("currency")(this.goalDetails.target.amount,"$",0),this.goalService.isIncomeModel(this.goalDetails.type)?this.goalService.redrawGoalChart(!0,2,this.goalDetails):this.goalService.redrawGoalChart(!0,1,this.goalDetails),this.goalDetailsMementoOriginator.updateMemento(this.goalDetails))},b.prototype.resetTargetGoal=function(){this.goalDetails.target.editGoalFlag=!0,this.goalDetails.target.amount=0,this.goalDetails.target.label1=this.$filter("currency")(0),this.goalService.isIncomeModel(this.goalDetails.type)?this.goalService.redrawGoalChart(!0,2,this.goalDetails):this.goalService.redrawGoalChart(!0,1,this.goalDetails),this.goalDetailsMementoOriginator.updateMemento(this.goalDetails)},b.prototype.jumpSlider=function(a){var b=this;this.setAccountTypeInLocalStorage(),this.goalService.navigateEnrollment().then(function(c){b.goalService.navigateToLastbehavioralQuestions(a),b.$state.go("behavioralQuestions")})},b.prototype.setAccountTypeInLocalStorage=function(){var a=this.contextSvc.getActiveAccount().acctType,b="";null!=a&&this.goalService.setAccountTypeInLocalStorage(a,b)},b.prototype.editGoal=function(){this.goalDetails.target.editGoalFlag=!0,this.goalDetails.summaryStatement.showHelpLink=!0},b.prototype.iconInfoPopup=function(a){this.$state.go(a)},b.prototype.showRecommendedAmountLabel=function(){return this.goalService.showRecommendedAmount(this.goalDetails.state)},b.prototype.showMobileViewIncomeScorecard=function(){var a=this.goalDetails.state,b=this.contextSvc.device.isSmallScreen(),c=2===a||3===a,d=this.goalService.isIncomeModel(this.goalDetails.type);return b&&c&&d},b.$inject=["$rootScope","hgGoalService","$state","$filter","hgContextSvc","$timeout"],b}();b.GoalController=c}(b=a.assets||(a.assets={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(a){this.$filter=a,this.buildChartSeries=function(a,b,c,d,e){var f=[],g=[],h=[];2==a?(angular.forEach(c,function(a,b){0!=a&&f.push({x:e?e[b]:b,y:a})}),angular.forEach(b,function(a,b){0!=a&&h.push({x:e?e[b]:b,y:a})}),angular.forEach(d,function(a,b){0!=a&&g.push({x:e?e[b]:b,y:a})}),f.length<c.length&&f.push({x:e[f.length],y:0}),h.length<b.length&&h.push({x:e[h.length],y:0}),g.length<d.length&&g.push({x:e[g.length],y:0})):(angular.forEach(c,function(a,b){f.push({x:e?e[b]:b,y:a})}),angular.forEach(b,function(a,b){h.push({x:e?e[b]:b,y:a})}),angular.forEach(d,function(a,b){g.push({x:e?e[b]:b,y:a})}));var i={name:"Test series 1",data:h,fillColor:"#279ed8",lineWidth:0},j={name:"Test series 2",data:f,fillColor:"#456282",lineWidth:0},k={name:"Test series 3",data:g,fillColor:"#384d66",lineWidth:0};return{lowSeries:i,midSeries:j,highSeries:k}}}return a.prototype.configureSeriesUI=function(a,b,c,d,e,f){var g="#384d66",h="#fff",i=a.chartSeriesProjected,j=i.lowSeries,k=i.midSeries,l=i.highSeries;if(b){c&&(j.data[0].marker={enabled:!0,lineColor:j.fillColor}),_.last(l.data).marker={enabled:!0,lineColor:g,fillColor:h};var m={enabled:!0,lineColor:g,fillColor:d,radius:c?9:7},n=_.last(k.data);n.marker=m;var o=_.last(j.data);n.x!=o.x||n.y!=o.y?_.last(j.data).marker={enabled:!0,lineColor:g,fillColor:h}:o.marker=m}if(1==e)k.overlay={templateUrl:f?"templates/assets/goalTwoLineOverlayBoxed.html":"templates/assets/goalTwoLineOverlay.html",hPosition:!c||f?2:4,model:a.savingsOverlayModel,connectToAxis:!0,connectFromSide:f?16:34,lineStyle:2,lineColor:d};else if(!f){var p,q=2,r=2;if(c){var s=!1;0==_.last(k.data).y&&(r=0,s=!0),p={id:"incomeScoreCard",templateUrl:"templates/assets/incomeScorecard.html",hPosition:r,vPosition:q,connectToAxis:s,model:a.incomeOverlayModel,lineColor:d}}else b||k.data.length>0&&0==_.last(k.data).y&&(p={id:"incomeScoreCard",templateHtml:'<status-donut-chart id="dashobardstatus" color="model.cssclass" percentage="model.percentage" label="model.innerLabel" size="70" style="margin-bottom: -5px;"></status-donut-chart>',hPosition:1,vPosition:1,yOffset:10,connectToAxis:!0,model:a.incomeOverlayModel,lineColor:d});k.overlay=p}},a.monthNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],a.dateLabelFromSimulationMonth=function(b,c,d){var e=new Date(b.getTime());e.setMonth(b.getMonth()+c-1);var f=e.getFullYear();if(d){var g=a.monthNames[e.getMonth()];return g+" "+f}return""+f},a}();a.GoalUICommon=b}(b=a.assets||(a.assets={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(b){var c=function(a){function b(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=this;a.call(this,c,d,e,g),this.q=b,this.$scope=c,this.$rootScope=d,this.$state=e,this.$location=f,this.contextSvc=g,this.hgCommonJs2nSvc=h,this.authJs2nSvc=i,this.accountOpenSvc=j,this.equifaxSvc=k,this.accountApplicationSvc=l,this.$timeout=m,this.$filter=n,this.hgStateSvc=o,this.hgAuthSvc=p,this.$scope.title="Account Application",this.$scope.$on("$destroy",function(){d&&d.dismissMessage&&q.$rootScope.dismissMessage(q.contextSvc.appConfig.featureUnavailableMessage)}),this.$scope.isBigweb=!this.contextSvc.device.isNative(),this.$scope.isChromeOS=this.contextSvc.device.isChromeOS(),this.$scope.isDesktop=g.isDesktop(),this.$scope.getFullName=function(){return q.getFullName()},this.$scope.submitProfile=function(a){return q.submitProfile(a)},this.$scope.submitIdentity=function(){return q.submitIdentity()},this.$scope.viewDashboard=function(){return q.viewDashboard()},this.$scope.viewNewCustomer=function(){return q.viewNewCustomer()},this.$scope.saveForm=function(){return q.saveForm()},this.$scope.clearForm=function(){return q.clearForm()},this.$scope.getEquifaxQuestions=function(){return q.getEquifaxQuestions()},this.$scope.submitAddress=function(){return q.submitAddress()},this.$scope.check=function(){return q.check()},this.$scope.mobilePlan1=function(){return q.mobilePlan1()},this.$scope.fund=function(){return q.fund()},this.$scope.confirm=function(){return q.confirm()},this.$scope.userForm={},this.$scope.CustomerType="ExistingCustomer",this.$scope.isCitizenFieldEmpty=!0,this.$scope.backToBehavioralQuestions=function(){return q.backToBehavioralQuestions()},this.$scope.saveNewCustomer=function(){return q.saveNewCustomer()},this.$scope.schwabLogin=function(){return q.schwabLogin()},this.$scope.backToSchwabCustomer=function(){return q.backToSchwabCustomer()},this.$scope.backToAccountType=function(){return q.backToAccountType()},this.$scope.submitSecurityQuestions=function(){return q.submitSecurityQuestions()},this.$scope.submitEmpFinanace=function(){return q.submitEmpFinanace()},this.$scope.submitRegulatoryQuestions=function(){return q.submitRegulatoryQuestions()},this.$scope.backToEmplFinance=function(){return q.backToEmplFinance()},this.$scope.additionalAddress=!0,this.$scope.next=function(a){return q.next(a)},this.$scope.previous=function(a){return q.previous(a)},this.$scope.chooseCustomerType=function(){return q.chooseCustomerType()},this.$scope.customerBackButton=function(){return q.customerBackButton()},this.$scope.goHome=function(){return q.goHome()},this.$scope.submitMailingAddress=function(){return q.submitMailingAddress()},this.$scope.businessAddress=function(){return q.businessAddress()},this.$scope.backAddress=function(){return q.backAddress()},this.$scope.checkboxClick=function(a){return q.checkboxClick(a)},this.$scope.submitAgreement=function(){return q.submitAgreement()},this.$scope.longRunActivity=function(){return q.longRunActivity()},this.$scope.submitEquifax=function(){return q.submitEquifax()},this.$scope.checkAndReturnActiveStyle=function(a){return q.checkAndReturnActiveStyle(a)},this.$scope.returnActiveText=function(a){return q.returnActiveText(a)},this.$scope.offerCheck=function(){return q.offerCheck()},this.$scope.currentState=!1,this.$scope.backProfile=function(){return q.backProfile()},this.$scope.emailValidate=function(){return q.emailValidate()},this.$scope.resendEmail=function(){return q.resendEmail()},this.$scope.validateResendEmail=function(){return q.validateResendEmail()},this.$scope.joinTitle=" for second tenant",this.$scope.validateAgeIRAAccounts=function(){return q.validateAgeIRAAccounts()},this.$scope.backSecondAddress=function(){return q.backSecondAddress()},this.$scope.backRegulatoryQuestions=function(){return q.backRegulatoryQuestions()},this.$scope.backAgreement=function(){return q.backAgreement()},this.$scope.checkboxAccordianClick=function(a,b,c,d){return q.checkboxAccordianClick(a,b,c,d)},this.$scope.profileModel=function(){return q.profileModel()},this.$scope.setTrustDocValidation=function(){return q.setTrustDocValidation()},this.$scope.trustUploadModel={},this.$scope.loginRedirect=function(){return q.loginRedirect()},this.$scope.loginModel=function(){return q.loginModel()},this.$scope.invokeFrontCamera=function(){return q.invokeFrontCamera()},this.$scope.invokeBackCamera=function(){return q.invokeBackCamera()},this.$scope.firstPageUpload=function(){return q.firstPageUpload()},this.$scope.lastPageUpload=function(){return q.lastPageUpload()},this.$scope.trustGrantorValidation=function(){return q.trustGrantorValidation()},this.$scope.isTrustSourceSelected=function(){return q.isTrustSourceSelected()},this.$scope.isTrustPurposeSelected=function(){return q.isTrustPurposeSelected()},this.$scope.taxHarvestingEnable=function(){return q.taxHarvestingEnable()},this.init(),this.initPageAndStep(),this.$scope.municipalBondsCalif=function(){return q.municipalBondsCalif()},this.$scope.backEquifax=function(){return q.backEquifax()},this.$scope.inviteSecondTenant=function(){return q.inviteSecondTenant()},this.$scope.jointValidate=function(){return q.jointValidate()},this.$scope.jointConfirmIdentity=function(){return q.jointConfirmIdentity()},this.$scope.enrollmentStatusCheck=function(a,b){return q.enrollmentStatusCheck(a,b)},this.$scope.updateClientText=this.setUpdateClientText(),this.$scope.signUpText=this.setSignUpText(),this.$scope.regulatoryQuestionsTitle=this.setRegulatoryQuestionsTitle(),this.$scope.emailValidateText=this.setEmailValidateText(),this.$scope.livingTrustDocTitle=this.setLivingTrustDocTitle(),this.$scope.agreementsPageTitle=this.setAgreementsPageTitle(),this.$scope.confirmationPageTitle=this.setConfirmationPageTitle(),this.$scope.displayDuplicateCustIDError=this.displayDuplicateCustIDError(),this.$scope.isPhoneRequired=function(){return q.isPhoneRequired()},this.$scope.selectGoverningState=function(){return q.selectGoverningState()},this.$scope.getAgeOfTerminationRange=function(a){return q.getAgeOfTerminationRange(a)},this.$scope.getDateOfTermination=function(a){return q.getDateOfTermination(a)},this.$scope.accountOpenBannerText="Open your account with Schwab",this.$scope.iipSetFirmInfo=function(){return q.iipSetFirmInfo()},this.$scope.occupationCheck=function(){return q.occupationCheck()},this.$scope.employmentStatusCheck=function(){return q.employmentStatusCheck()},this.$scope.pinValidityCheck=function(){return q.pinValidityCheck()},this.$scope.isCitizenShipFieldDisabled=function(){return q.isCitizenShipFieldDisabled()},this.setAppDownloadLinks(),this.initializeScopeThemeAttributes(),this.$scope.toggleElem=function(a,b){return q.toggleElem(a,b)},this.$scope.electronicsAgreement={open:!0},this.$scope.livingTrustAgreementOne={open:!0},this.$scope.lowGrowthRate=1,this.$scope.highGrowthRate=1.06,this.$scope.steps=[],this.$scope.stepsMobile=[],"/accountopen/accountType"!==this.$location.path()&&"/accountopen/addtOfferings"!==this.$location.path()&&(this.$scope.steps.push({link:"SignUp",linkText:"Sign Up"}),this.$scope.steps.push({link:"Personal",linkText:"Personal Information"}),this.$scope.steps.push({link:"AccountSetup",linkText:"Account Setup"}),this.$scope.steps.push({link:"Fund",linkText:"Fund Account"}),this.$scope.stepsMobile.push({link:"SignUp",linkText:"Sign Up"}),this.$scope.stepsMobile.push({link:"Personal",linkText:"Personal Info"}),this.$scope.stepsMobile.push({link:"AccountSetup",linkText:"Account"}),this.$scope.stepsMobile.push({link:"Fund",linkText:"Funding"})),this.$scope.equifaxInitialBusinessResponse={ConsumerId:null,NumberOfQuestions:0,TransactionStatusCd:null,Id:null,Questions:null},this.$scope.isActiveTab=function(a){return"charts.assets"===a?q.$state.is("charts")||q.$state.includes(a):q.$state.includes(a)},this.$scope.saveProspectDetails=function(){return q.saveProspectDetails()},this.$scope.$on("SAVE_EVENT_CLICKED",function(a,b){q.$scope.saveProspectDetails()}),this.$scope.$on("USER_LOGGED_IN_EVENT",function(a,b){q.$scope.saveProspectDetails()}),this.$scope.promo={},this.$scope.promo.receivePromoEnable=!0,this.$scope.promo.receivePromoFlag=!1,this.$scope.savePromotionalSettings=function(){q.savePromotionalSettings()},this.$scope.cmsUrl=this.contextSvc.appConfig.clientApiUrl+"/public/asset/",this.$scope.newPromo={},this.$scope.newPromo.newCode="",this.$scope.newPromo.showPromoCodeNotValid=!1,this.$scope.newPromo.confirmEmailAddress="",this.$scope.promoCodes=[],this.$scope.validatePromoCode=function(a,b,c,d){q.validatePromoCode(a,b,c,d)},this.$scope.removePromoCode=function(a){return q.removePromoCode(a)},this.$scope.showPromoCodeBox=function(a){return q.showPromoCodeBox(a)},this.$scope.getPromoCodeLinkModifier=function(){return q.getPromoCodeLinkModifier()},this.$scope.enablePromoCodeLink=function(){return q.enablePromoCodeLink()},this.$scope.isJointFlowTypes=function(){return q.isJointFlowTypes()},this.showPromoCodeBox(!1),this.validatePromoCode(null,!1,!1,null),this.$scope.questionModel={},this.$scope.questionModel.SelectedAnswers=[],this.$scope.formatCurrency=function(a){return n("currency")(a,void 0,0)},this.$scope.formatCurrencyMore=function(a){return n("currency")(a,void 0,0)+" & more"},this.$scope.setCustomerType=function(a){q.$scope.CustomerType=a},this.$scope.directorSymbols=function(){return q.directorSymbols()}}return __extends(b,a),b.prototype.setUpdateClientText=function(){var a=this.contextSvc.isIIP(),a=this.contextSvc.isIIP();return a?this.contextSvc.getLocalResourceContentById("Update_Client_Text-AS"):this.contextSvc.getLocalResourceContentById("Update_Client_Text")},b.prototype.setSignUpText=function(){var a=this.contextSvc.isIIP();return a?this.contextSvc.getLocalResourceContentById("SIGN_UP-Title-AS"):this.contextSvc.getLocalResourceContentById("SIGN_UP-Title")},b.prototype.setRegulatoryQuestionsTitle=function(){var a=this.contextSvc.isIIP();return a?this.contextSvc.getLocalResourceContentById("Regulatory_Questions-Title-AS"):this.contextSvc.getLocalResourceContentById("Regulatory_Questions-Title")},b.prototype.setEmailValidateText=function(){var a=this.contextSvc.isIIP();return a?this.contextSvc.getLocalResourceContentById("Email_Validate_Text-AS"):this.contextSvc.getLocalResourceContentById("Email_Validate_Text")},b.prototype.setLivingTrustDocTitle=function(){var a=this.contextSvc.isIIP();return a?this.contextSvc.getLocalResourceContentById("Living_Trust_Doc-Title-AS"):this.contextSvc.getLocalResourceContentById("Living_Trust_Doc-Title")},b.prototype.setAgreementsPageTitle=function(){var a=this.contextSvc.isIIP();return a?this.contextSvc.getLocalResourceContentById("Agreements_Page-Title-AS"):this.contextSvc.getLocalResourceContentById("Agreements_Page-Title")},b.prototype.setConfirmationPageTitle=function(){var a=this.contextSvc.isIIP();return a?this.contextSvc.getLocalResourceContentById("Confirmation_Page-Title-AS"):this.contextSvc.getLocalResourceContentById("Confirmation_Page-Title")},b.prototype.setAppDownloadLinks=function(){var a=this.contextSvc.isIIP();!this.contextSvc.device.isNative()&&this.contextSvc.device.isSmallScreen()&&(this.$scope.showAppStoreLinks=!0,this.$scope.appleStoreImage="https://institutionalintelligent.schwab.com/public/file/P-7612602/applbadge.png",this.$scope.googleStoreImage="https://institutionalintelligent.schwab.com/public/file/P-7612602/googlebadge.png",a?(this.$scope.appleLink="https://itunes.apple.com/us/app/institutional-intelligent/id989870465?mt=8",this.$scope.googleLink="https://play.google.com/store/apps/details?id=com.schwab.mobile.iip"):(this.$scope.appleLink="https://itunes.apple.com/us/app/schwab-intelligent-portfolios/id951120920?mt=8",this.$scope.googleLink="https://play.google.com/store/apps/details?id=com.schwab.mobile.sip"))},b.prototype.displayDuplicateCustIDError=function(){return this.contextSvc.getLocalResourceContentById("Error_Duplicate_CUSTID")},b.prototype.recreateScopesForSaveAndResume=function(){var a=this.accountOpenSvc.getPrimaryApplicant();if(a){var b=JSON.parse(a);"JointTenants"!=b.accountSubType&&"CommunityProperty"!=b.accountSubType&&"CommonTenants"!=b.accountSubType||(this.$scope.jointFlag=!0),"LivingTrust"==b.accountType&&(this.$scope.twoTrusteeFlag=!0)}this.checkRSAFeatures()},b.prototype.checkRSAFeatures=function(){if(this.accountOpenSvc.getAllAddress()){var a=JSON.parse(this.accountOpenSvc.getAllAddress());a&&a.Source&&(a.Source[0]&&this.$scope.newAddress&&(null!=this.$scope.newAddress.trustSourceSalary?this.$scope.newAddress.trustSourceSalary=!0:_.extend(this.$scope.newAddress,{trustSourceSalary:!0})),a.Source[1]&&this.$scope.newAddress&&(null!=this.$scope.newAddress.trustSourceSocialSecurity?this.$scope.newAddress.trustSourceSocialSecurity=!0:_.extend(this.$scope.newAddress,{trustSourceSocialSecurity:!0})),a.Source[2]&&this.$scope.newAddress&&(null!=this.$scope.newAddress.trustSourceRealEstate?this.$scope.newAddress.trustSourceRealEstate=!0:_.extend(this.$scope.newAddress,{trustSourceRealEstate:!0})),a.Source[3]&&this.$scope.newAddress&&(null!=this.$scope.newAddress.trustSourceFamily?this.$scope.newAddress.trustSourceFamily=!0:_.extend(this.$scope.newAddress,{trustSourceFamily:!0})),a.Source[4]&&this.$scope.newAddress&&(null!=this.$scope.newAddress.trustSourceInvestment?this.$scope.newAddress.trustSourceInvestment=!0:_.extend(this.$scope.newAddress,{trustSourceInvestment:!0})),a.Source[5]&&this.$scope.newAddress&&(null!=this.$scope.newAddress.trustSourceGifts?this.$scope.newAddress.trustSourceGifts=!0:_.extend(this.$scope.newAddress,{trustSourceGifts:!0})),a.Source[6]&&this.$scope.newAddress&&(null!=this.$scope.newAddress.trustSourceGambling?this.$scope.newAddress.trustSourceGambling=!0:_.extend(this.$scope.newAddress,{trustSourceGambling:!0})),a.Source[7]&&this.$scope.newAddress&&(null!=this.$scope.newAddress.trustSourceOther?this.$scope.newAddress.trustSourceOther=!0:_.extend(this.$scope.newAddress,{trustSourceOther:!0})))}},b.prototype.initializeScopeThemeAttributes=function(){var a=this.contextSvc.customization.getThemeName(),b=this.contextSvc.customization.getPaletteColor("AssetBorder"),c=this.contextSvc.customization.getPaletteColor("PChart");this.$scope.borderColor=b,this.$scope.textColor="theme02"==a?"#000":"#fff",this.$scope.lineColor=c,this.$scope.background="theme02"==a?"#fafafa":"#303f50",this.$scope.gridLine="theme02"==a?"#f0f0f0":"#000",this.$scope.labelBackground="theme02"==a?"#dcdcdc":"rgba(0, 0, 0, 0.7)",this.$scope.gradient="theme02"==a?"#fff":"rgba(2,0,0,0)"},b.prototype.getProspectloginSecurityQuestion=function(){var a=this;this.accountOpenSvc.getProspectLoginSecurityQuestion().then(function(b){a.$scope.prospectloginSecurityQuestion=b.SecurityQuestions}).catch(function(b){a.$rootScope.raiseMessage(a.contextSvc.appConfig.featureUnavailableMessage)})},b.prototype.longRunActivity=function(){null==this.accountOpenSvc.getLoginErrorFlag()||0==this.accountOpenSvc.getLoginErrorFlag()?(this.$scope.lRActivityTitle="Creating your account",this.$scope.lRActivityBodyText="Please wait. This may take a minute.",this.mHardStop()):(this.$scope.lRActivityTitle="Create Your Web credentials",this.$scope.lRActivityBodyText="This part of set up for prospect web credentials can take up a minute. When it is done, the spinner will go away and you will move on to the next step.",this.loginHardStop())},b.prototype.getStates=function(){var a=this;this.contextSvc.showSpinner(),this.accountOpenSvc.getStates().then(function(b){a.$scope.StateList=b.States}).catch(function(b){a.$rootScope.raiseMessage(a.contextSvc.appConfig.featureUnavailableMessage)}).finally(function(){a.contextSvc.hideSpinner()})},b.prototype.getCountries=function(){var a=this;this.contextSvc.showSpinner(),this.accountOpenSvc.getCountries().then(function(b){a.$scope.CountriesList=b.Countries}).catch(function(b){a.$rootScope.raiseMessage(a.contextSvc.appConfig.featureUnavailableMessage)}).finally(function(){a.contextSvc.hideSpinner()})},b.prototype.checkAndReturnActiveStyle=function(a){var b=this.$scope.accountCreationSteps[a.link],c=this.$location.path(),d=this.$scope.stepToPageMap[c],e=this.$scope.accountCreationSteps[d];return a.link==d||b<e?1==b?"hg-navbar-active-first-of-type":4==b?"hg-navbar-active-last-of-type":"hg-navbar-active":4==b?"hg-navbar-inactive-last-of-type":"hg-navbar-inactive"},b.prototype.returnActiveText=function(a){var b=this.$scope.accountCreationSteps[a.link],c=this.$location.path(),d=this.$scope.stepToPageMap[c],e=this.$scope.accountCreationSteps[d];return a.link==d||b<e?"Active Step":""},b.prototype.checkboxClick=function(a){"/accountopen/agreements"==this.$location.path()&&(this.$scope.newAddress.agreementAcceptedTs=new Date,this.accountOpenSvc.saveNewAddress(this.$scope.newAddress))},b.prototype.setTrustDocValidation=function(){1==this.$scope.newAddress.ByPassDoc?this.$scope.trustUploadModel.trustDocValidation=!1:this.$scope.trustUploadModel.trustDocValidation=!0,this.selectAccountType()},b.prototype.trustGrantorValidation=function(){1!=this.$scope.newAddress.trustGrantorSingle&&1!=this.$scope.newAddress.trustGrantorTwo||(this.$scope.trustGrantorFlag=!1)},b.prototype.isTrustSourceSelected=function(){return 1==this.$scope.newAddress.trustSourceSalary||1==this.$scope.newAddress.trustSourceInvestment||1==this.$scope.newAddress.trustSourceFamily||1==this.$scope.newAddress.trustSourceRealEstate||1==this.$scope.newAddress.trustSourceOther||1==this.$scope.newAddress.trustSourceSocialSecurity||1==this.$scope.newAddress.trustSourceGifts||1==this.$scope.newAddress.trustSourceGambling},b.prototype.isTrustPurposeSelected=function(){return 1==this.$scope.newAddress.trustPurposeAssets||1==this.$scope.newAddress.trustPurposeExpense||1==this.$scope.newAddress.trustPurposeCompensation||1==this.$scope.newAddress.trustPurposeDistribution||1==this.$scope.newAddress.trustPurposePool||1==this.$scope.newAddress.trustPurposeTax||1==this.$scope.newAddress.trustPurposeOT||1==this.$scope.newAddress.trustInvestingAssets||1==this.$scope.newAddress.trustPaymentExpenses||1==this.$scope.newAddress.trustPaymentCompensation||1==this.$scope.newAddress.trustDistributionAssets||1==this.$scope.newAddress.trustInvestingPooledAssets||1==this.$scope.newAddress.trustInvestingTaxBenefits},b.prototype.backToBehavioralQuestions=function(){this.$state.go("behavioralQuestions")},b.prototype.backToSchwabCustomer=function(){"/accountopen/loginsecurityquestions"==this.$location.path()?this.$state.go("accountopen.prospectlogin"):this.$state.go("setup.schwabCustomer")},b.prototype.backToEmplFinance=function(){this.$state.go("accountopen.empFinance")},b.prototype.backToAccountType=function(){this.$state.go("accountopen.accountType")},b.prototype.saveNewCustomer=function(){this.$state.go("accountopen.profile")},b.prototype.goHome=function(){var a=this;this.accountOpenSvc.removeAccountOpenSession(1),this.$rootScope.session.isLoggedIn?(this.contextSvc.isIIP()&&this.setFirmSessionData(),this.contextSvc.me(!1).then(function(){var b=JSON.parse(window.sessionStorage.getItem("HG_SESSION_DATA"));b.mercuryAccounts.length?a.viewDashboard():a.hgAuthSvc.silentLogout().finally(function(){a.hgStateSvc.go("cancelLogin")})})):this.hgStateSvc.go("cancelLogin")},b.prototype.schwabLogin=function(){this.$state.go("setup.securityQuestions")},b.prototype.submitSecurityQuestions=function(){this.$state.go("charts")},b.prototype.validateResendEmail=function(){var a=this;this.contextSvc.showSpinner();var b=this;return this.accountApplicationSvc.saveAccountOpen().then(function(c){var d=JSON.stringify(c),e=JSON.parse(d);"6"==e.ReturnCd||"3"==e.ReturnCd||"4"==e.ReturnCd||"5"==e.ReturnCd||"7"==e.ReturnCd||"8"==e.ReturnCd||"9"==e.ReturnCd?(a.$scope.accountApplicationSubmit=!0,"6"==e.ReturnCd?a.$scope.accountApplicationSubmitMsg="You must confirm your email address in order to open a "+b.$rootScope.product+"s account.  If you are experiencing difficulty confirming the receipt of the email we have sent, please call us at: "+b.$rootScope.customizationInfo.getPhoneDisplay()+".":a.$scope.accountApplicationSubmitMsg=e.ReturnMessage,$("#resendEmailNext").removeAttr("disabled"),$("#resendEmailBack").removeAttr("disabled"),"2"==a.accountOpenSvc.getEmailCounter()&&(a.$scope.resendEmailFlag=!0)):"0"==e.ReturnCd&&($("#submitAgreements").attr("disabled","disabled"),$("#backAgreement").attr("disabled","disabled"),1!=a.$rootScope.session.isLoggedIn||"JointTenants"!=a.$scope.newAddress.accountSubType&&"CommunityProperty"!=a.$scope.newAddress.accountSubType&&"CommonTenants"!=a.$scope.newAddress.accountSubType&&"Two Trustee"!=a.$scope.newAddress.accountSubType||null!=a.accountOpenSvc.getAccountFlow()?1==a.$rootScope.session.isLoggedIn?(a.$scope.isProgressBar=!0,a.$state.go("accountopen.longRunActivity")):a.$state.go("accountopen.prospectlogin"):("JointTenants"==a.$scope.newAddress.accountSubType||"CommunityProperty"==a.$scope.newAddress.accountSubType||"CommonTenants"==a.$scope.newAddress.accountSubType?a.$scope.jointFlag=!0:"Two Trustee"==a.$scope.newAddress.accountSubType&&(a.$scope.twoTrusteeFlag=!0),a.$state.go("accountopen.invitesecondtenant")))}).catch(function(b){a.$rootScope.raiseMessage(a.contextSvc.appConfig.featureUnavailableMessage),console.error("Submit failed."+b)}).finally(function(){a.contextSvc.hideSpinner()}),!1},b.prototype.selectGoverningState=function(){this.$scope.newAddress.State&&1==this.$scope.custodialFlag&&(this.$scope.newAddress.governingState=this.$scope.newAddress.State,
this.getAgeOfTerminationRange(this.$scope.newAddress.governingState))},b.prototype.validateAgeIRAAccounts=function(){var a=new Date(this.$scope.newAddress.dateOfBirth),b=a.getFullYear()+70,c=a.getMonth(),d=a.getDay();c>6&&(b+=1,c-=6),a=new Date(b,c,d),a<=new Date?this.$scope.iraWarning=!0:this.$scope.iraWarning=!1,this.$scope.newAddress.ageOfTermination&&this.$scope.getDateOfTermination(this.$scope.newAddress.ageOfTermination)},b.prototype.isCitizenShipFieldDisabled=function(){return this.$scope.isLoggedIn&&!this.$scope.newAddress.CitizenShip?(this.$scope.isCitizenFieldEmpty=!1,!1):!!this.$scope.isCitizenFieldEmpty&&(!this.$scope.custodialFlag&&this.$scope.isLoggedIn&&this.$scope.isCitizenFieldEmpty)},b.prototype.backAgreement=function(){if(null!=this.accountOpenSvc.getAccountFlow()){var a=JSON.parse(this.accountOpenSvc.getAllAddress());"JointTenants"==a.accountSubType||"CommonTenants"==a.accountSubType||"CommunityProperty"==a.accountSubType?this.$state.go("planConfirmation"):"Single Trustee"==this.$scope.newAddress.accountSubType||"Two Trustee"==this.$scope.newAddress.accountSubType?this.$state.go("accountopen.livingtrustagreements"):this.$state.go("accountopen.regulatoryQuestions")}else"Single Trustee"==this.$scope.newAddress.accountSubType||"Two Trustee"==this.$scope.newAddress.accountSubType?this.$state.go("accountopen.livingtrustagreements"):this.$state.go("accountopen.regulatoryQuestions")},b.prototype.checkboxAccordianClick=function(a,b,c,d){a.stopPropagation(),b&&c&&d&&(("electronicsAgreement"==b&&c||"hgAgreement"==b&&c||"cashAgreement"==b&&c||"irsTaxAgreement"==b&&c||"advisorAuthorization"==b&&c||"accountTypeAgreement"==b&&c||"livingTrustAgreementOne"==b&&c||"livingTrustAgreementTwo"==b&&c||"livingTrustAgreementThree"==b&&c||"minorAgreement"==b&&c)&&this.toggleElem(b,d.open),this.selectAccountType()),"electronicsAgreement"==b&&1==c?this.$scope.hgAgreement={open:!0}:"hgAgreement"==b&&1==c?1==this.$scope.custodialFlag?this.$scope.minorAgreement={open:!0}:this.$scope.cashAgreement={open:!0}:"cashAgreement"==b&&1==c?this.$scope.irsTaxAgreement={open:!0}:"irsTaxAgreement"==b&&1==c?(this.$rootScope.isSIP&&(this.$scope.accountTypeAgreement={open:!0}),this.$rootScope.isIIP&&(this.$scope.advisorAuthorization={open:!0})):"advisorAuthorization"==b&&1==c&&(this.$scope.accountTypeAgreement={open:!0}),"livingTrustAgreementOne"==b&&1==c?this.$scope.livingTrustAgreementTwo={open:!0}:"livingTrustAgreementTwo"==b&&1==c?this.$scope.livingTrustAgreementThree={open:!0}:"accountTypeAgreement"==b&&1==c||"minorAgreement"==b&&1==c&&(this.$scope.cashAgreement={open:!0})},b.prototype.backRegulatoryQuestions=function(){"S1"!=this.$scope.newAddress.accountType||null!=this.accountOpenSvc.getAccountFlow()||0!=this.$scope.custodialFlag&&void 0!=this.$scope.custodialFlag?null!=this.accountOpenSvc.getAccountFlow()||1==this.$scope.custodialFlag?this.$state.go("accountopen.empFinance"):1==this.$scope.isLoggedIn?this.$state.go("accountopen.empFinance"):1==this.$scope.newAddress.equifaxQuestionCountFlag?this.$state.go("accountopen.empFinance"):0==this.$scope.newAddress.equifaxPersonalInfoFlag?this.$state.go("accountopen.empFinance"):0==this.$scope.newAddress.equifaxProfileInfoFlag?this.$state.go("accountopen.empFinance"):1==this.$scope.equifaxSubmitFlag?this.$state.go("accountopen.empFinance"):this.$state.go("accountopen.equifaxVerification"):this.$state.go("accountopen.additionalinfo")},b.prototype.livingTrustDocState=function(){this.$scope.isBigWeb?this.$state.go("accountopen.livingtrusdoc"):this.$state.go("accountopen.livingtrusdocmobile")},b.prototype.backSecondAddress=function(){var a=this;this.$scope.newPromo.confirmEmailAddress="",null!=this.accountOpenSvc.getAccountFlow()||1==this.$scope.custodialFlag?this.$state.go("accountopen.profile"):(this.accountOpenSvc.intAddress().then(function(b){a.$scope.newAddress=b}),"LivingTrust"==this.$scope.newAddress.accountType?this.livingTrustDocState():this.$state.go("accountopen.profile"))},b.prototype.profileModel=function(){var a=this;if(this.selectAccountType(),this.$scope.currentState=!1,"accountopen.address"!=this.$state.current.name&&"accountopen.mailingAddress"!=this.$state.current.name&&"accountopen.livingtrust"!=this.$state.current.name&&"accountopen.empFinance"!=this.$state.current.name||(this.getStates(),this.getCountries()),"accountopen.address"==this.$state.current.name&&(void 0==this.$scope.newAddress.CitizenShip&&(this.$scope.newAddress.CitizenShip="US"),this.isPhoneRequired()),"accountopen.jointConfirmIdentity"==this.$state.current.name){var b=this.$location.url(),c=this.$location.url(b).search().appID;c&&this.accountOpenSvc.applicationid(c);var d=this.$location.url(b).search().duplicateCustID;this.$scope.duplicateCustID=d}if("accountopen.livingtrusdoc"==this.$state.current.name&&(this.accountOpenSvc.branchChromeBookDetection(),"true"==this.accountOpenSvc.getIsBranchChromeBook()&&this.$scope.isChromeOS?this.$scope.isBranchChromeBook=!0:this.$scope.isBranchChromeBook=!1),"accountopen.empFinance"==this.$state.current.name)if(1==this.$scope.isSSNTaken&&(this.$scope.isSSNTaken=!1,this.$scope.isLoggedIn||(this.$scope.newAddress.socialSecurityNumber=null)),this.$scope.custStateList=this.contextSvc.appConfig.custodialAgeByState,this.addWatchers(),null!=this.accountOpenSvc.getAccountFlow()){var e=JSON.parse(this.accountOpenSvc.getAllAddress());"Two Trustee"==e.accountSubType&&(this.$scope.grantorTwoTrusteeDisplayFlag=!0,this.$scope.twoTrusteeLabelText="primary")}else"Single Trustee"==this.$scope.newAddress.accountSubType&&(this.$scope.twoTrusteeLabelText="this");"accountopen.prospectlogin"==this.$state.current.name&&("Custodial"==this.$scope.newAddress.accountSubType&&(this.$scope.custodialAddress=JSON.parse(this.accountOpenSvc.getCustodialApplicant())),this.getProspectloginSecurityQuestion()),"accountopen.livingtrustgrantor"==this.$state.current.name&&(this.displayPrimaryName(),this.$scope.trustGrantorFlag=!0),"accountopen.livingtrusdoc"==this.$state.current.name&&(this.$scope.trustUploadModel.trustDocValidation=!0),this.$scope.isLoggedIn=this.$rootScope.session.isLoggedIn,"accountopen.profile"==this.$state.current.name&&(this.contextSvc.showSpinner(),this.accountOpenSvc.initiateChannelHandOffAccountOpen().then(function(b){if(b.PromoCodeList){var c=b.PromoCodeList;0==a.accountOpenSvc.getpromoCodeHandoffCompleted()&&(a.validatePromoCode(null,!1,!1,c),a.accountOpenSvc.savePromoCodeHandoffCompleted(!0))}1!=a.$rootScope.session.isLoggedIn||0!=a.$scope.custodialFlag&&void 0!=a.$scope.custodialFlag||a.loginRedirect(),1==a.$rootScope.session.isLoggedIn&&(a.$scope.updateClientInfo=!0)}).catch(function(b){a.$rootScope.raiseMessage(a.contextSvc.appConfig.featureUnavailableMessage),console.error("initiateChannelHandoffAccountOpen() failed.")}).finally(function(){a.contextSvc.hideSpinner()})),null!=this.accountOpenSvc.getAccountFlow()&&"Two Trustee"==this.accountOpenSvc.getAccountFlow()?this.$scope.twoTrusteeFlag=!0:null!=this.accountOpenSvc.getAccountFlow()&&"Two Trustee"!=this.accountOpenSvc.getAccountFlow()?this.$scope.jointFlag=!0:null!=this.accountOpenSvc.getMinorFlag()&&(this.$scope.custodialFlag=!0)},b.prototype.isPhoneRequired=function(){0==this.$scope.custodialFlag||void 0==this.$scope.custodialFlag?this.$scope.phoneRequirement=!(this.$scope.newAddress.HomePhone||this.$scope.newAddress.MobilePhone||this.$scope.newAddress.BusinessPhone):this.$scope.phoneRequirement=!1},b.prototype.getAgeOfTerminationRange=function(a){a&&(this.$scope.ageOfTerminationRange=this.contextSvc.appConfig.custodialAgeByState[a].RANGE,this.$scope.newAddress.ageOfTermination=this.contextSvc.appConfig.custodialAgeByState[a].DEFAULT)},b.prototype.addWatchers=function(){var a=this;this.$scope.$watch("newAddress.ageOfTermination",function(b,c){b&&a.$scope.newAddress.dateOfBirth&&a.getDateOfTermination(b)})},b.prototype.getDateOfTermination=function(a){var b=new Date(this.$scope.newAddress.dateOfBirth);this.$scope.newAddress.dateOfTermination=moment(b).add(a,"years").calendar()},b.prototype.mHardStop=function(){var a,b,c=this.$timeout,d=this,e=this.$state,f=function(){c(function(){var c=this;d.accountApplicationSvc.minionHardStop().then(function(c){var d=JSON.stringify(c),e=JSON.parse(d);"complete"==e.status?(a=e.status,b=e.acctid):a=e.status}).catch(function(a){c.$rootScope.raiseMessage(c.contextSvc.appConfig.featureUnavailableMessage),console.error("Submit failed. minionHardStop"+a)}),"complete"==a||"ops"==a||"Error occurred"==a?"complete"==a?(d.$rootScope.hgAccountNumber=b,d.accountOpenSvc.saveHgAccountNumber(b),d.contextSvc.isIIP()&&d.setFirmSessionData(),d.contextSvc.me(!0).then(function(){d.contextSvc.$rootScope.$broadcast("ACCOUNTS_UPDATED_EVENT")}),1==d.$rootScope.session.isLoggedIn?(d.$scope.isProgressBar=!1,d.accountOpenSvc.copyApplicationId(),d.accountOpenSvc.removeAccountOpenSession(3),d.accountOpenSvc.removeAccountOpenSession(1),e.go("moveMoney.moveMoneyLaunch")):(d.$scope.isProgressBar=!0,d.displayPrimaryName(),d.loginHardStop())):(d.$scope.isProgressBar=!1,e.go("accountopen.accountOpenError")):f()},3e3)};f()},b.prototype.displayPrimaryName=function(){if(null!=this.accountOpenSvc.getAccountFlow()){var a=JSON.parse(this.accountOpenSvc.getAllAddress());this.$scope.primaryApplicantFirstName=a.firstName,this.$scope.primaryApplicantLastName=a.lastName,this.$scope.jointFlow=!0}else this.$scope.jointFlow=!1},b.prototype.submitAgreement=function(){var a=this;return this.selectAccountType(),this.$scope.newAddress.applicationSubmittedTs=new Date,this.accountOpenSvc.saveNewAddress(this.$scope.newAddress),this.contextSvc.showSpinner(),this.accountApplicationSvc.saveAccountOpen().then(function(b){var c=JSON.stringify(b),d=JSON.parse(c);"3"==d.ReturnCd||"4"==d.ReturnCd||"5"==d.ReturnCd||"7"==d.ReturnCd||"8"==d.ReturnCd||"9"==d.ReturnCd?(a.$scope.accountApplicationSubmit=!0,a.$scope.accountApplicationSubmitMsg=d.ReturnMessage,$("#submitAgreements").removeAttr("disabled"),$("#backAgreement").removeAttr("disabled")):"0"==d.ReturnCd&&($("#submitAgreements").attr("disabled","disabled"),$("#backAgreement").attr("disabled","disabled"),1!=a.$rootScope.session.isLoggedIn||"JointTenants"!=a.$scope.newAddress.accountSubType&&"CommunityProperty"!=a.$scope.newAddress.accountSubType&&"CommonTenants"!=a.$scope.newAddress.accountSubType&&"Two Trustee"!=a.$scope.newAddress.accountSubType||null!=a.accountOpenSvc.getAccountFlow()?1==a.$rootScope.session.isLoggedIn?(a.$scope.isProgressBar=!0,a.$state.go("accountopen.longRunActivity")):a.$state.go("accountopen.prospectlogin"):("JointTenants"==a.$scope.newAddress.accountSubType||"CommunityProperty"==a.$scope.newAddress.accountSubType||"CommonTenants"==a.$scope.newAddress.accountSubType?a.$scope.jointFlag=!0:"Two Trustee"==a.$scope.newAddress.accountSubType&&(a.$scope.twoTrusteeFlag=!0),a.$state.go("accountopen.invitesecondtenant")))}).catch(function(b){a.$rootScope.raiseMessage(a.contextSvc.appConfig.featureUnavailableMessage),console.error("Submit failed."+b)}).finally(function(){a.contextSvc.hideSpinner()}),!1},b.prototype.submitEmpFinanace=function(){var a=this;if(null==this.accountOpenSvc.getPersonalInfo()&&(this.$scope.newAddress.equifaxPersonalInfoFlag=!0),this.checkRSAFeatures(),this.accountOpenSvc.saveNewAddress(this.$scope.newAddress),"Single Trustee"==this.$scope.newAddress.accountSubType){if(void 0==this.$scope.newAddress.trustGrantorSingle||"false"==this.$scope.newAddress.trustGrantorSingle)return this.$scope.empSingleGrantorFlag=!0,!1;this.$scope.empSingleGrantorFlag=!1}if(null!=this.accountOpenSvc.getAccountFlow()){var b=JSON.parse(this.accountOpenSvc.getAllAddress());if("Two Trustee"==b.accountSubType){if(!(void 0!=this.$scope.newAddress.trustGrantorSingle&&"false"!=this.$scope.newAddress.trustGrantorSingle||void 0!=this.$scope.newAddress.trustGrantorTwo&&"false"!=this.$scope.newAddress.trustGrantorTwo))return this.$scope.empSingleGrantorFlag=!0,!1;this.$scope.empSingleGrantorFlag=!1}}"S1"!=this.$scope.newAddress.accountType||null!=this.accountOpenSvc.getAccountFlow()||void 0!=this.$scope.custodialFlag&&0!=this.$scope.custodialFlag?1==this.$scope.custodialFlag?(this.contextSvc.showSpinner(),this.accountApplicationSvc.saveAccountOpen().then(function(b){a.$state.go("accountopen.regulatoryQuestions")}).catch(function(b){a.$rootScope.raiseMessage(a.contextSvc.appConfig.featureUnavailableMessage),console.error("Submit failed."+b)}).finally(function(){a.contextSvc.hideSpinner()})):this.checkEquifax():(this.contextSvc.showSpinner(),this.accountApplicationSvc.saveAccountOpen().then(function(b){a.$state.go("accountopen.additionalinfo")}).catch(function(b){a.$rootScope.raiseMessage(a.contextSvc.appConfig.featureUnavailableMessage),console.error("Submit failed."+b)}).finally(function(){a.contextSvc.hideSpinner()}))},b.prototype.checkEquifax=function(){var a=this;if(1==this.$scope.newAddress.equifaxPersonalInfoFlag||1==this.$scope.newAddress.equifaxProfileInfoFlag){if(1!=this.$scope.isLoggedIn)return this.contextSvc.showSpinner(),this.accountApplicationSvc.saveAccountOpen().then(function(b){var c=a;a.$scope.getEquifaxQuestions().then(function(a){a.NumberOfQuestions>0?null==c.accountOpenSvc.getAccountFlow()?(c.$scope.newAddress.equifaxQuestionCountFlag=!1,c.accountOpenSvc.saveNewAddress(c.$scope.newAddress),c.$state.go("accountopen.equifaxVerification")):c.$state.go("accountopen.regulatoryQuestions"):(c.$scope.newAddress.equifaxQuestionCountFlag=!0,c.accountOpenSvc.saveNewAddress(c.$scope.newAddress),c.$state.go("accountopen.regulatoryQuestions"))})}).catch(function(b){a.$rootScope.raiseMessage(a.contextSvc.appConfig.featureUnavailableMessage),console.error("Submit failed."+b)}).finally(function(){a.contextSvc.hideSpinner()}),!1;this.$state.go("accountopen.regulatoryQuestions")}else this.$state.go("accountopen.regulatoryQuestions")},b.prototype.backEquifax=function(){this.$scope.equifaxSubmitFlag=void 0,"S1"==this.$scope.newAddress.accountType?this.$state.go("accountopen.additionalinfo"):this.$state.go("accountopen.empFinance")},b.prototype.submitEquifax=function(){var a=this,b=this.accountOpenSvc.getApplicationid(),c=[];angular.forEach(this.$scope.equifaxInitialBusinessResponse.Questions,function(a){var b=a.Response.split("_"),d={AnswerNumber:parseInt(b[1]),QuestionNumber:parseInt(b[0])};c.push(d)});var d={ApplicationId:b,Answers:c};this.$rootScope.equifaxFlag=!1,this.contextSvc.showSpinner(),this.equifaxSvc.submitEquifaxQuestions(d).then(function(b){0!=b.TransactionStatusCd&&(a.$rootScope.equifaxFlag=!0),a.$scope.equifaxSubmitFlag=!0,a.$scope.newAddress.equifaxProfileInfoFlag=!1,a.$scope.newAddress.equifaxPersonalInfoFlag=!1,a.accountOpenSvc.saveNewAddress(a.$scope.newAddress)}).catch(function(b){a.$rootScope.raiseMessage(a.contextSvc.appConfig.featureUnavailableMessage)}).finally(function(){a.contextSvc.hideSpinner()});var e=this.accountApplicationSvc.saveAccountOpen();e.then(function(b){a.$state.go("accountopen.regulatoryQuestions")}),e.catch(function(b){a.$rootScope.raiseMessage(a.contextSvc.appConfig.featureUnavailableMessage),console.error("Submit failed. email"+b)}),e.finally(function(){})},b.prototype.municipalBondsCalif=function(){this.$scope.newAddress.muniOffer?this.$scope.newAddress.californiaMunisNational="true":(this.$scope.newAddress.californiaMunis="false",this.$scope.newAddress.californiaMunisNational="false"),this.$rootScope.isIIP&&(this.accountOpenSvc.hasStrategyID(400)&&!this.accountOpenSvc.hasStrategyID(200)&&this.$scope.newAddress.muniOffer?this.$scope.newAddress.incomeOffer=!0:this.accountOpenSvc.hasStrategyID(200)||this.accountOpenSvc.hasStrategyID(300)||this.$scope.newAddress.muniOffer?!this.accountOpenSvc.hasStrategyID(200)||this.accountOpenSvc.hasStrategyID(300)||this.$scope.newAddress.muniOffer||(this.$scope.newAddress.incomeOffer=!1):this.$scope.newAddress.incomeOffer=!1)},b.prototype.offerCheck=function(){},b.prototype.taxHarvestingEnable=function(){1==this.$scope.newAddress.taxOffer?this.$scope.taxHarvestingDisbaledFlag=!1:this.$scope.taxHarvestingDisbaledFlag=!0},b.prototype.submitRegulatoryQuestions=function(){var a=this,b=[];b.push({Code:this.$scope.newAddress.symbol1,Name:this.$scope.newAddress.symbol1},{Code:this.$scope.newAddress.symbol2,Name:this.$scope.newAddress.symbol2},{Code:this.$scope.newAddress.symbol3,Name:this.$scope.newAddress.symbol3},{Code:this.$scope.newAddress.symbol4,Name:this.$scope.newAddress.symbol4},{Code:this.$scope.newAddress.symbol5,Name:this.$scope.newAddress.symbol5},{Code:this.$scope.newAddress.symbol6,Name:this.$scope.newAddress.symbol6},{Code:this.$scope.newAddress.symbol7,Name:this.$scope.newAddress.symbol7},{Code:this.$scope.newAddress.symbol8,Name:this.$scope.newAddress.symbol8},{Code:this.$scope.newAddress.symbol9,Name:this.$scope.newAddress.symbol9},{Code:this.$scope.newAddress.symbol10,Name:this.$scope.newAddress.symbol10}),this.$scope.newAddress.TickerSymbols=b;var c=this.accountOpenSvc.saveNewAddress(this.$scope.newAddress);this.contextSvc.showSpinner();var d=this.accountApplicationSvc.saveAccountOpen();d.then(function(b){if("Custodial"==a.$scope.newAddress.accountSubType&&null==a.accountOpenSvc.getMinorFlag())a.accountOpenSvc.saveMinorFlag(!0),null==a.accountOpenSvc.getCustodialApplicant()?(a.accountOpenSvc.saveCustodialApplicant(a.$scope.newAddress),a.accountOpenSvc.removeAccountOpenAddress(),a.$scope.newAddress={}):(a.accountOpenSvc.saveTempCustodialApplicant(a.accountOpenSvc.getCustodialApplicant()),a.accountOpenSvc.removeCustodialApplicant(),null!=a.accountOpenSvc.getAllAddress()?(a.accountOpenSvc.saveCustodialApplicantBack(a.accountOpenSvc.getAllAddress()),a.accountOpenSvc.removeAccountOpenAddress()):a.accountOpenSvc.saveCustodialApplicantBack("{}"),a.accountOpenSvc.saveCustodialAccountAddress(a.accountOpenSvc.getTempCustodialApplicant()),a.accountOpenSvc.removeTempCustodialApplicant(),a.$scope.newAddress=JSON.parse(a.accountOpenSvc.getAllAddress())),a.$state.go("accountopen.profile");else{if(null==a.accountOpenSvc.getAccountFlow()&&null==a.accountOpenSvc.getPrimaryApplicant())return 1==c&&(void 0!=a.$scope.offerFlagIncome&&(a.$scope.newAddress.isIncomeEligible=!0),void 0!=a.$scope.offerFlagMuni&&(a.accountOpenSvc.iipMuniEligibilityCheck()&&(a.$scope.newAddress.isMuniEligible=!0),a.accountOpenSvc.iipCaliEligibilityCheck()&&"CA"==a.$scope.newAddress.State&&(a.$scope.newAddress.isCalMuniEligible=!0)),a.accountOpenSvc.saveNewAddress(a.$scope.newAddress),"Single Trustee"==a.$scope.newAddress.accountSubType||"Two Trustee"==a.$scope.newAddress.accountSubType?a.$state.go("accountopen.livingtrustagreements"):a.$state.go("accountopen.agreements"),!0);var d=JSON.parse(a.accountOpenSvc.getAllAddress());"LivingTrust"==d.accountType||"JointTenants"==d.accountSubType||"CommunityProperty"==d.accountSubType||"CommonTenants"==d.accountSubType?a.$state.go("planConfirmation"):a.$state.go("accountopen.agreements")}}),d.catch(function(b){a.$rootScope.raiseMessage(a.contextSvc.appConfig.featureUnavailableMessage),console.error("Submit failed. email"+b)}),d.finally(function(){a.contextSvc.hideSpinner()})},b.prototype.init=function(){var a=this;this.accountOpenSvc.initIdentity().then(function(b){a.$scope.identity=b}),this.accountOpenSvc.intAddress().then(function(b){if(a.$scope.newAddress=b,a.recreateScopesForSaveAndResume(),a.accountOpenSvc.isReferrerUpdateProfile()){if(a.accountOpenSvc.getAccountFlow()){var c=JSON.parse(a.accountOpenSvc.getAllAddress());c&&c.State&&(a.$scope.newAddress.State=c.State)}var d=a.accountApplicationSvc.getAddressState();d&&(a.$scope.newAddress.State=a.accountApplicationSvc.getAddressState())}}),this.$scope.prospectlogin={};var b=this.accountOpenSvc.getLastquestionID();null!=b&&void 0!=b?(this.$scope.questionId=b-1,this.$scope.groupID=b):(this.$scope.questionId=0,this.$scope.groupID=1,this.accountOpenSvc.removeChartValue()),8==this.$scope.groupID?this.$scope.isCompoundGrowthDisplayed=!0:this.$scope.isCompoundGrowthDisplayed=!1,this.$scope.chartData={stockPercent:70,bondPercent:30},this.$scope.stockPercent=this.$scope.chartData.stockPercent,this.$scope.bondPercent=this.$scope.chartData.bondPercent,this.$scope.isBigWeb=!this.contextSvc.device.isNative(),this.$scope.ageFormatter=function(a){return a+" years"},this.$scope.ageFormatterMore=function(a){return a+" years or more"},this.$scope.ageRangeFormatter=function(a){return a+" years"};var c=this;this.$scope.$on("$locationChangeStart",function(){var a=c.$location.path();if(a.indexOf("/behavioralQuestions")!=-1&&"/behavioralQuestions/GroupID"+c.$scope.groupID!=c.$location.url()){for(var b,d="",e=[],f=1;c.$scope.questionId>=f;f++)void 0!=c.accountOpenSvc.getLastRikModel(c.$scope.groupID-f)&&null!=c.accountOpenSvc.getLastRikModel(c.$scope.groupID-f)&&(d+=c.$scope.groupID-f==1?c.accountOpenSvc.getLastRikModel(c.$scope.groupID-f):c.accountOpenSvc.getLastRikModel(c.$scope.groupID-f)+",");e=JSON.parse("["+d+"]"),b=null!=c.accountOpenSvc.getLastRikModel(c.$scope.questionId)?c.accountOpenSvc.getLastRikModel(c.$scope.questionId):c.accountOpenSvc.getLastRikModel(c.$scope.questionId-1);for(var g=0,h=0,i=JSON.parse(b),j=0;j<e.length;j++)"W"==e[j].lastQuestionType?g=e[j].lastWeightage+g:h=e[j].lastWeightage+h;c.accountOpenSvc.willingnessNumber(g),c.accountOpenSvc.capacityNumber(h),null!=i&&(null!=i.lastQuestionId&&c.accountOpenSvc.lastQuestionId(i.lastQuestionId),c.$scope.questionId=i.indexAction,c.$scope.groupID=c.$location.search().GroupID)}}),"2"==this.accountOpenSvc.getEmailCounter()&&(this.$scope.resendEmailFlag=!0),null!=this.accountOpenSvc.getCompoundGrowthstartingValue()&&(this.accountOpenSvc.getCompoundGrowthstartingValue()>=1e4&&this.accountOpenSvc.getCompoundGrowthstartingValue()<1e5||this.accountOpenSvc.getCompoundGrowthstartingValue()>=1e5,this.accountOpenSvc.getCompoundGrowthstartingValue()>=2e5?this.$scope.formatCurrencyMoreFlag=!0:this.$scope.formatCurrencyMoreFlag=!1),null!=this.accountOpenSvc.getCompoundGrowthannualContribution()&&(this.accountOpenSvc.getCompoundGrowthannualContribution()>=5e3,this.accountOpenSvc.getCompoundGrowthannualContribution()>=1e4),null!=this.accountOpenSvc.getAccountFlow()&&(this.$scope.newCustomerBack=!0)},b.prototype.initPageAndStep=function(){this.$scope.stepToPageMap={},this.$scope.stepToPageMap["/setup/newCustomer"]="SignUp",this.$scope.stepToPageMap["/accountopen/profile"]="SignUp",this.$scope.stepToPageMap["/accountopen/jointconfirmidentity"]="SignUp",this.$scope.stepToPageMap["/accountopen/invitesecondtenant"]="SignUp",this.$scope.stepToPageMap["/accountopen/joint"]="SignUp",this.$scope.stepToPageMap["/accountopen/address"]="Personal",this.$scope.stepToPageMap["/accountopen/mailingAddress"]="Personal",this.$scope.stepToPageMap["/accountopen/empFinance"]="Personal",this.$scope.stepToPageMap["/accountopen/equifaxVerification"]="Personal",this.$scope.stepToPageMap["/accountopen/emailvalidate"]="Personal",this.$scope.stepToPageMap["/accountopen/accountType"]="Personal",this.$scope.stepToPageMap["/accountopen/loginredirect"]="Personal",this.$scope.stepToPageMap["/accountopen/regulatoryQuestions"]="AccountSetup",this.$scope.stepToPageMap["/accountopen/addtOfferings"]="AccountSetup",this.$scope.stepToPageMap["/accountopen/agreements"]="AccountSetup",this.$scope.stepToPageMap["/accountopen/emailhardstop"]="AccountSetup",this.$scope.stepToPageMap["/accountopen/accountopenerror"]="AccountSetup",this.$scope.stepToPageMap["/accountopen/prospectlogin"]="AccountSetup",this.$scope.stepToPageMap["/accountopen/loginsecurityquestions"]="AccountSetup",this.$scope.stepToPageMap["/accountopen/livingtrust"]="AccountSetup",this.$scope.stepToPageMap["/accountopen/additionalinfo"]="AccountSetup",this.$scope.stepToPageMap["/accountopen/livingtrusdoc"]="AccountSetup",this.$scope.stepToPageMap["/accountopen/livingtrustagreements"]="AccountSetup",this.$scope.stepToPageMap["/accountopen/livingtrustgrantor"]="AccountSetup",this.$scope.stepToPageMap["/accountopen/jointthankyou"]="AccountSetup",this.$scope.stepToPageMap["/accountopen/fund"]="Fund",this.$scope.stepToPageMap["/accountopen/reviewDepositCheck"]="Fund",this.$scope.stepToPageMap["/accountopen/depositCheckConfirmation"]="Fund",this.$scope.accountCreationSteps={},this.$scope.accountCreationSteps.SignUp=1,this.$scope.accountCreationSteps.Personal=2,this.$scope.accountCreationSteps.AccountSetup=3,this.$scope.accountCreationSteps.Fund=4},b.prototype.getFullName=function(){return this.accountOpenSvc.getFullName(this.$scope.identity)},b.prototype.backProfile=function(){this.$state.go("accountopen.profile")},b.prototype.emailValidate=function(){var a=this.$location.url(),b=this.$location.url(a).search().meid;this.accountApplicationSvc.emailVerified(b)},b.prototype.resendEmail=function(){var a=this;null==this.accountOpenSvc.getEmailCounter()&&this.accountOpenSvc.saveEmailCounter(0),null!=this.accountOpenSvc.getApplicationid()&&this.accountApplicationSvc.emailTrigger(this.accountOpenSvc.getApplicationid(),!0).then(function(){a.accountOpenSvc.saveEmailCounter(Number(a.accountOpenSvc.getEmailCounter())+1),a.$scope.accountApplicationSubmit=!1,2==a.accountOpenSvc.getEmailCounter()&&(a.$scope.resendEmailFlag=!0)}).catch(function(b){a.$rootScope.raiseMessage(a.contextSvc.appConfig.featureUnavailableMessage),console.error("Submit failed. email"+b)})},b.prototype.submitProfileContinue=function(){var a=this;try{if("Individual"!=this.$scope.newAddress.accountType&&"JointTenants"!=this.$scope.newAddress.accountType&&"CommonTenants"!=this.$scope.newAddress.accountType&&"CommunityProperty"!=this.$scope.newAddress.accountType||(this.$scope.newAddress.accountSubType=this.$scope.newAddress.accountType,this.$scope.newAddress.accountType="S1"),"Roth"!=this.$scope.newAddress.accountType&&"Rollover"!=this.$scope.newAddress.accountType&&"Tradition"!=this.$scope.newAddress.accountType||(this.$scope.newAddress.accountSubType=this.$scope.newAddress.accountType,this.$scope.newAddress.accountType="IRA"),"Single Trustee"!=this.$scope.newAddress.accountType&&"Two Trustee"!=this.$scope.newAddress.accountType||(this.$scope.newAddress.accountSubType=this.$scope.newAddress.accountType,this.$scope.newAddress.accountType="LivingTrust"),this.$scope.newAddress.emailConsentAcceptedTs=new Date,null==this.accountOpenSvc.getPersonalInfo())this.$scope.newAddress.equifaxProfileInfoFlag=!0;else{var b=JSON.parse(this.accountOpenSvc.getPersonalInfo());this.$scope.newAddress.firstName==b.firstName&&this.$scope.newAddress.middleName==b.middleName&&this.$scope.newAddress.lastName==b.lastName&&1==this.$scope.equifaxSubmitFlag?this.$scope.newAddress.equifaxProfileInfoFlag=!1:this.$scope.newAddress.equifaxProfileInfoFlag=!0}return null!=this.accountOpenSvc.getInviteEmail()&&this.accountOpenSvc.getInviteEmail().toLowerCase()!=this.$scope.newAddress.emailAddress.toLowerCase()&&(this.$scope.emailTriggerSecondApplicant=!0),this.accountOpenSvc.saveNewAddress(this.$scope.newAddress),this.cleanupPromoCode(),this.contextSvc.showSpinner(),this.accountApplicationSvc.saveAccountOpen().then(function(b){$("#profileButton").attr("disabled","disabled"),null==a.accountOpenSvc.getAccountFlow()&&"LivingTrust"==a.$scope.newAddress.accountType?a.$state.go("accountopen.livingtrust"):a.$state.go("accountopen.address")}).catch(function(b){a.$rootScope.raiseMessage(a.contextSvc.appConfig.featureUnavailableMessage),$("#profileButton").removeAttr("disabled"),console.error("Submit failed."+b)}).finally(function(){a.contextSvc.hideSpinner()}),!1}catch(a){$("#profileButton").removeAttr("disabled"),console.error("submitProfile error -->"+a)}},b.prototype.saveProspectDetails=function(){var a=this,b=this.$location.path();"/accountopen/jointthankyou"!=b&&(0!=this.$rootScope.session.isLoggedIn&&void 0!=this.$rootScope.session.isLoggedIn||(this.accountOpenSvc.saveNewAddress(this.$scope.newAddress),null!=this.accountOpenSvc.getApplicationid()&&(this.accountOpenSvc.setSaveandResume(!0),this.contextSvc.showSpinner(),this.accountApplicationSvc.saveAccountOpen().then(function(a){}).catch(function(b){a.$rootScope.raiseMessage(a.contextSvc.appConfig.featureUnavailableMessage),console.error("Submit failed."+b)}).finally(function(){a.contextSvc.hideSpinner()}),this.accountOpenSvc.removeSaveandResume())))},b.prototype.submitIdentity=function(){var a=this.accountOpenSvc.submitIdentity(this.$scope.identity);return 1==a&&(this.$state.go("accountopen.address"),!0)},b.prototype.businessAddress=function(){"Employed"==this.$scope.newAddress.employmentStatus?$(".blockBusinessAddress").show():$(".blockBusinessAddress").hide()},b.prototype.submitAddress=function(){var a=this;if(this.$scope.isCitizenFieldEmpty=!0,null!=this.accountOpenSvc.getPersonalInfo()){var b=JSON.parse(this.accountOpenSvc.getPersonalInfo());1!=this.$rootScope.session.isLoggedIn&&(null!=this.$scope.newAddress.dateOfBirth&&void 0!=this.$scope.newAddress.dateOfBirth&&""!=this.$scope.newAddress.dateOfBirth&&void 0==b.dateOfBirth&&(this.$scope.newAddress.dateOfBirth=""),null!=this.$scope.newAddress.socialSecurityNumber&&void 0!=this.$scope.newAddress.socialSecurityNumber&&""!=this.$scope.newAddress.socialSecurityNumber&&void 0==b.socialSecurityNumber&&(this.$scope.newAddress.socialSecurityNumber=""),this.$scope.newAddress.HomePhone==b.HomePhone&&this.$scope.newAddress.MobilePhone==b.MobilePhone&&this.$scope.newAddress.BusinessPhone==b.BusinessPhone&&this.$scope.newAddress.socialSecurityNumber==b.socialSecurityNumber&&this.$scope.newAddress.dateOfBirth==b.dateOfBirth||void 0==this.$scope.newAddress.equifaxPersonalInfoFlag||(this.$scope.newAddress.equifaxPersonalInfoFlag=!0)),0==this.$scope.newAddress.addAddress&&(this.$scope.newAddress.addAddress=void 0)}this.offerCheck(),void 0!=this.$scope.offerFlagMuni&&(void 0!=this.$scope.offerFlagMuni&&(this.accountOpenSvc.iipMuniEligibilityCheck()&&(this.$scope.newAddress.isMuniEligible=!0),this.accountOpenSvc.iipCaliEligibilityCheck()&&"CA"==this.$scope.newAddress.State&&(this.$scope.newAddress.isCalMuniEligible=!0)),this.$scope.offerFlagTax=!1),this.accountOpenSvc.saveNewAddress(this.$scope.newAddress);var c=this.accountApplicationSvc.saveAccountOpen();c.then(function(b){return 1==a.$scope.newAddress.addAddress?a.$state.go("accountopen.mailingAddress"):a.$state.go("accountopen.empFinance"),!0}),c.catch(function(b){a.$rootScope.raiseMessage(a.contextSvc.appConfig.featureUnavailableMessage),console.error("Submit failed. email"+b)}),c.finally(function(){a.contextSvc.hideSpinner()})},b.prototype.backAddress=function(){1==this.$scope.newAddress.addAddress?this.$state.go("accountopen.mailingAddress"):this.$state.go("accountopen.address")},b.prototype.submitMailingAddress=function(){var a=this;this.accountOpenSvc.saveNewAddress(this.$scope.newAddress),null!=this.accountOpenSvc.getPersonalInfo()&&1!=this.$rootScope.session.isLoggedIn&&(null!=this.$scope.newAddress.dateOfBirth&&void 0!=this.$scope.newAddress.dateOfBirth&&""!=this.$scope.newAddress.dateOfBirth&&(this.$scope.newAddress.dateOfBirth=""),null!=this.$scope.newAddress.socialSecurityNumber&&void 0!=this.$scope.newAddress.socialSecurityNumber&&""!=this.$scope.newAddress.socialSecurityNumber&&(this.$scope.newAddress.socialSecurityNumber="")),this.contextSvc.showSpinner();var b=this.accountApplicationSvc.saveAccountOpen();b.then(function(b){return a.$state.go("accountopen.empFinance"),!0}),b.catch(function(b){a.$rootScope.raiseMessage(a.contextSvc.appConfig.featureUnavailableMessage),console.error("Submit failed."+b)}),b.finally(function(){a.contextSvc.hideSpinner()})},b.prototype.viewDashboard=function(){return this.contextSvc.device.isNative()?this.$rootScope.$broadcast("ACCOUNT_OPEN_COMPLETED_EVENT"):this.$state.go("charts"),this.$rootScope.hgAccountNumber=null,!0},b.prototype.viewNewCustomer=function(){return this.$state.go("setup.newCustomer"),!0},b.prototype.saveForm=function(){return this.contextSvc.setIdentity(this.$scope.identity),!0},b.prototype.chooseCustomerType=function(){"NewCustomer"==this.$scope.CustomerType?this.$state.go("accountopen.profile"):this.$rootScope.session.clientSignup()},b.prototype.customerBackButton=function(){
this.$state.go("planRecommendation")},b.prototype.clearForm=function(){return this.$scope.identity=null,this.accountOpenSvc.removeIdentity(),!0},b.prototype.getEquifaxQuestions=function(){var a=this;this.contextSvc.showSpinner();var b=this.q.defer(),c=this.accountOpenSvc.getApplicationid();return this.equifaxSvc.getEquifaxQuestions(c).then(function(c){a.$scope.equifaxInitialBusinessResponse=c,b.resolve(a.$scope.equifaxInitialBusinessResponse)}).catch(function(){a.$rootScope.raiseMessage(a.contextSvc.appConfig.featureUnavailableMessage),b.reject("getEquifaxQuestions failed.")}).finally(function(){a.contextSvc.hideSpinner()}),b.promise},b.prototype.check=function(){var a=$(".check").attr("id");$("#"+a).hasClass("fa fa-square-o fa-3x check")?($("#"+a).removeClass("fa fa-square-o fa-3x check"),$("#"+a).addClass("fa fa-square fa-3x check")):($("#"+a).removeClass("fa fa-square fa-3x check"),$("#"+a).addClass("fa fa-square-o fa-3x check"))},b.prototype.mobilePlan1=function(){$(".plan1").hide(),$(".plan2").show()},b.prototype.fund=function(){this.$state.go("accountopen.fund")},b.prototype.confirm=function(){this.$state.go("confirmation")},b.prototype.loginHardStop=function(){var a,b,c=this.$timeout,d=this,d=(this.$state,this),e=function(){d.accountApplicationSvc.prospectloginHardStop().then(function(f){var g=JSON.stringify(f),h=JSON.parse(g);0!=h.Errors.length&&(a=h.Errors[0].Code,b="100"==a?"We were unable to create a Schwab login.  Please call 1-855-694-5208 for assistance with creating your Schwab login.":"8000"==a?"The username you've entered is unavailable. Please select another username.":"8001"==a?"We were unable to create a Schwab login.  Please call 1-855-694-5208 for assistance with creating your Schwab login.":"8002"==a?"We were unable to create a Schwab login.  Please call 1-855-694-5208 for assistance with creating your Schwab login.":"8003"==a?"Our records indicate that you already have a Schwab login. Schwab will  link your new account to your existing login within 24-48 hours.  If you have questions regarding this process, please call 1-855-694-5208 for assistance.":"8004"==a?"Our records indicate that you already have a Schwab login. Schwab will  link your new account to your existing login within 24-48 hours.  If you have questions regarding this process, please call 1-855-694-5208 for assistance.":"8005"==a?"We were unable to create a Schwab login for this account.  Please call 1-855-694-5208 for assistance with creating your Schwab login.":"8006"==a?"We were unable to create a Schwab login for this account.  Please call 1-855-694-5208 for assistance with creating your Schwab login.":"8007"==a?"We were unable to create a Schwab login for this account.  Please call 1-855-694-5208 for assistance with creating your Schwab login.":"8008"==a?"We need to take additional steps to confirm your identity.  Please call 1-855-694-5208 for assistance with creating your Schwab login.":"8009"==a?"We need to take additional steps to confirm your identity.  Please call 1-855-694-5208 for assistance with creating your Schwab login.":"8010"==a?"We were unable to create a Schwab login for this account.  Please call 1-855-694-5208 for assistance with creating your Schwab login.":"8011"==a?"We were unable to create a Schwab login for this account.  Please call 1-855-694-5208 for assistance with creating your Schwab login.":"8012"==a?"We were unable to create a Schwab login for this account.  Please call 1-855-694-5208 for assistance with creating your Schwab login.":"9991"==a?"This feature is temporarily unavailable online.  Please call 1-855-694-5208 for assistance with creating your Schwab login.":"9992"==a?"We experienced an error while submitting your information.  Please call 1-855-694-5208 for assistance with creating your Schwab login.":"We were unable to create a Schwab login for this account.  Please call 1-855-694-5208 for assistance with creating your Schwab login.",0==a?(d.accountOpenSvc.saveWebLogin(!0),d.$scope.isProgressBar=!1,d.accountOpenSvc.copyApplicationId(),d.accountOpenSvc.removeAccountOpenSession(3),d.accountOpenSvc.removeAccountOpenSession(1),0==d.$scope.isBigWeb?d.$rootScope.session.clientSignup():d.$state.go("message",{messageId:8})):void 0!=a?(d.accountOpenSvc.setLoginErrorFlag(!0),d.$scope.loginErrorFlag=!0,d.$scope.prospectloginMessage=b,$("#propectLogin").removeAttr("disabled"),d.$scope.isProgressBar=!1,d.$state.go("accountopen.prospectlogin")):e()),void 0==a&&c(e,3e3)}).catch(function(a){d.$rootScope.raiseMessage(d.contextSvc.appConfig.featureUnavailableMessage)})};e()},b.prototype.loginModel=function(){"true"==this.accountOpenSvc.getWebLogin()&&(this.$scope.loginFlag=!0)},b.prototype.selectAccountType=function(){var a=JSON.parse(this.accountOpenSvc.getAccountType());a&&null!=a.accountSubType&&(this.$scope.newAddress.accountType=a.accountSubType),"Individual"!=this.$scope.newAddress.accountType&&"JointTenants"!=this.$scope.newAddress.accountType&&"CommonTenants"!=this.$scope.newAddress.accountType&&"CommunityProperty"!=this.$scope.newAddress.accountType&&"CommunityProperty"!=this.$scope.newAddress.accountType&&"Custodial"!=this.$scope.newAddress.accountType||(this.$scope.newAddress.accountSubType=this.$scope.newAddress.accountType,this.$scope.newAddress.accountType="S1"),"Roth"!=this.$scope.newAddress.accountType&&"Rollover"!=this.$scope.newAddress.accountType&&"Tradition"!=this.$scope.newAddress.accountType||(this.$scope.newAddress.accountSubType=this.$scope.newAddress.accountType,this.$scope.newAddress.accountType="IRA"),"Single Trustee"!=this.$scope.newAddress.accountType&&"Two Trustee"!=this.$scope.newAddress.accountType||(this.$scope.newAddress.accountSubType=this.$scope.newAddress.accountType,this.$scope.newAddress.accountType="LivingTrust")},b.prototype.next=function(a){var b=this;if(!a)if(a=this.$location.path(),"/accountopen/prospectlogin"==a)if(this.$scope.currentState=!1,this.$scope.loginErrorFlag=!1,null==this.accountOpenSvc.getLoginErrorFlag()||0==this.$scope.loginErrorFlag){var c;c=null!=this.accountOpenSvc.getPromoApplicationid()?this.accountOpenSvc.getPromoApplicationid():this.accountOpenSvc.getApplicationid();var d="P";null!=this.accountOpenSvc.getAccountFlow()&&(d="S");var e={CustPswrd:this.$scope.prospectlogin.password,CustSuid:this.$scope.prospectlogin.username,ApplicationId:c,applicantType:d,SecurityQaData:{Question:this.$scope.prospectlogin.securityQuestion,Answer:this.$scope.prospectlogin.securityAnswer}};$("#propectLogin").attr("disabled","disabled"),this.contextSvc.showSpinner(),this.accountApplicationSvc.verifyProspectlogin(e).then(function(a){b.contextSvc.hideSpinner();var c,d=a.status;if("0"!=d){switch(d){case"-1":c=b.$rootScope.raiseMessage(a.message);break;case"100":c="We were unable to create a Schwab login.  Please call 1-855-694-5208 for assistance with creating your Schwab login.";break;case"8000":c="We were unable to create a Schwab login.  Please call 1-855-694-5208 for assistance with creating your Schwab login.";break;case"8001":c="We were unable to create a Schwab login.  Please call 1-855-694-5208 for assistance with creating your Schwab login.";break;case"8002":c="We were unable to create a Schwab login.  Please call 1-855-694-5208 for assistance with creating your Schwab login.";break;case"8003":c="Our records indicate that you already have a Schwab login. Schwab will  link your new account to your existing login within 24-48 hours.  If you have questions regarding this process, please call 1-855-694-5208 for assistance.";break;case"8004":c="Our records indicate that you already have a Schwab login. Schwab will  link your new account to your existing login within 24-48 hours.  If you have questions regarding this process, please call 1-855-694-5208 for assistance.";break;case"8005":c="We were unable to create a Schwab login for this account.  Please call 1-855-694-5208 for assistance with creating your Schwab login.";break;case"8006":c="We were unable to create a Schwab login for this account.  Please call 1-855-694-5208 for assistance with creating your Schwab login.";break;case"8007":c="We were unable to create a Schwab login for this account.  Please call 1-855-694-5208 for assistance with creating your Schwab login.";break;case"8008":c="We need to take additional steps to confirm your identity.  Please call 1-855-694-5208 for assistance with creating your Schwab login.";break;case"8009":c="We need to take additional steps to confirm your identity.  Please call 1-855-694-5208 for assistance with creating your Schwab login.";break;case"8010":c="We were unable to create a Schwab login for this account.  Please call 1-855-694-5208 for assistance with creating your Schwab login.";break;case"8011":c="We were unable to create a Schwab login for this account.  Please call 1-855-694-5208 for assistance with creating your Schwab login.";break;case"8012":c="We were unable to create a Schwab login for this account.  Please call 1-855-694-5208 for assistance with creating your Schwab login.";break;case"9991":c="This feature is temporarily unavailable online.  Please call 1-855-694-5208 for assistance with creating your Schwab login.";break;case"9992":c="We experienced an error while submitting your information.  Please call 1-855-694-5208 for assistance with creating your Schwab login.";break;case"9993":c="We were unable to create a Schwab login for this account.  Please call 1-855-694-5208 for assistance with creating your Schwab login.";break;case"9994":c="We were unable to create a Schwab login for this account.  Please call 1-855-694-5208 for assistance with creating your Schwab login.";break;case"9999":c="We were unable to create a Schwab login for this account.  Please call 1-855-694-5208 for assistance with creating your Schwab login.";break;default:c="We were unable to create a Schwab login for this account.  Please call 1-855-694-5208 for assistance with creating your Schwab login."}b.$scope.prospectloginMessage=c,b.$scope.loginErrorFlag=!0,$("#propectLogin").removeAttr("disabled")}else b.accountOpenSvc.saveWebLoginDetails(b.$scope.prospectlogin),b.accountApplicationSvc.saveAccountOpen().then(function(a){"JointTenants"!=b.$scope.newAddress.accountSubType&&"CommunityProperty"!=b.$scope.newAddress.accountSubType&&"CommonTenants"!=b.$scope.newAddress.accountSubType&&"Two Trustee"!=b.$scope.newAddress.accountSubType||null!=b.accountOpenSvc.getAccountFlow()?(b.accountOpenSvc.removeWebLoginDetails(),b.$scope.isProgressBar=!0,b.$state.go("accountopen.longRunActivity")):("JointTenants"==b.$scope.newAddress.accountSubType||"CommunityProperty"==b.$scope.newAddress.accountSubType||"CommonTenants"==b.$scope.newAddress.accountSubType?b.$scope.jointFlag=!0:"Two Trustee"==b.$scope.newAddress.accountSubType&&(b.$scope.twoTrusteeFlag=!0),b.$state.go("accountopen.invitesecondtenant"))}).catch(function(a){b.$rootScope.raiseMessage(b.contextSvc.appConfig.featureUnavailableMessage),$("#propectLogin").removeAttr("disabled"),b.contextSvc.hideSpinner()}).finally(function(){})}).catch(function(a){b.$rootScope.raiseMessage(b.contextSvc.appConfig.featureUnavailableMessage),$("#propectLogin").removeAttr("disabled"),b.contextSvc.hideSpinner()}).finally(function(){})}else{var c;c=null!=this.accountOpenSvc.getPromoApplicationid()?this.accountOpenSvc.getPromoApplicationid():this.accountOpenSvc.getApplicationid();var d="P";null!=this.accountOpenSvc.getAccountFlow()&&(d="S");var e={CustPswrd:this.$scope.prospectlogin.password,CustSuid:this.$scope.prospectlogin.username,ApplicationId:c,applicantType:d,SecurityQaData:{Question:this.$scope.prospectlogin.securityQuestion,Answer:this.$scope.prospectlogin.securityAnswer}};this.accountApplicationSvc.saveProspectlogin(e).then(function(a){b.$scope.isProgressBar=!0,b.$state.go("accountopen.longRunActivity")}).catch(function(a){b.$rootScope.raiseMessage(b.contextSvc.appConfig.featureUnavailableMessage),console.error("Submit failed. email"+a),$("#propectLogin").removeAttr("disabled")}).finally(function(){})}else if("/accountopen/livingtrust"==a)this.accountOpenSvc.saveNewAddress(this.$scope.newAddress),this.contextSvc.showSpinner(),this.accountApplicationSvc.saveAccountOpen().then(function(a){}).catch(function(a){b.$rootScope.raiseMessage(b.contextSvc.appConfig.featureUnavailableMessage),console.error("Submit failed."+a)}).finally(function(){b.contextSvc.hideSpinner()}),this.$state.go("accountopen.additionalinfo");else if("/accountopen/additionalinfo"==a){var f,g,h,i,j,k,l,m,n=[];f=1==this.$scope.newAddress.trustSourceSalary?0:"",k=1==this.$scope.newAddress.trustSourceSocialSecurity?1:"",i=1==this.$scope.newAddress.trustSourceRealEstate?2:"",h=1==this.$scope.newAddress.trustSourceFamily?3:"",g=1==this.$scope.newAddress.trustSourceInvestment?4:"",l=1==this.$scope.newAddress.trustSourceGifts?5:"",m=1==this.$scope.newAddress.trustSourceGambling?6:"",j=1==this.$scope.newAddress.trustSourceOther?7:"",n.push(f,k,i,h,g,l,m,j),this.$scope.newAddress.Source=n;var o,p,q,r,s,t,u,v,w,x,y,z,A=[];o=1==this.$scope.newAddress.trustPurposeAssets?0:"",p=1==this.$scope.newAddress.trustPurposeExpense?1:"",q=1==this.$scope.newAddress.trustPurposeCompensation?2:"",r=1==this.$scope.newAddress.trustPurposeDistribution?3:"",s=1==this.$scope.newAddress.trustPurposePool?4:"",t=1==this.$scope.newAddress.trustPurposeTax||1==this.$scope.newAddress.trustInvestingPooledAssets?5:"",v=1==this.$scope.newAddress.trustInvestingAssets?6:"",w=1==this.$scope.newAddress.trustPaymentExpenses?7:"",x=1==this.$scope.newAddress.trustPaymentCompensation?8:"",y=1==this.$scope.newAddress.trustDistributionAssets?9:"",z=1==this.$scope.newAddress.trustInvestingTaxBenefits?10:"",u=1==this.$scope.newAddress.trustPurposeOT?11:"",A.push(o,p,q,r,s,t,v,w,x,y,z,u),this.$scope.newAddress.trustPurpose=A,this.accountOpenSvc.saveNewAddress(this.$scope.newAddress),"S1"==this.$scope.newAddress.accountType?this.checkEquifax():(this.contextSvc.showSpinner(),this.accountApplicationSvc.saveAccountOpen().then(function(a){}).catch(function(a){b.$rootScope.raiseMessage(b.contextSvc.appConfig.featureUnavailableMessage),console.error("Submit failed."+a)}).finally(function(){b.contextSvc.hideSpinner()}),this.livingTrustDocState())}else"/accountopen/livingtrustagreements"==a?(this.$scope.newAddress.trustAgreementAcceptedTs=new Date,this.selectAccountType(),this.accountOpenSvc.saveNewAddress(this.$scope.newAddress),this.contextSvc.showSpinner(),this.accountApplicationSvc.saveAccountOpen().then(function(a){}).catch(function(a){b.$rootScope.raiseMessage(b.contextSvc.appConfig.featureUnavailableMessage),console.error("Submit failed."+a)}).finally(function(){b.contextSvc.hideSpinner()}),this.$state.go("accountopen.agreements")):"/accountopen/livingtrustgrantor"==a&&(this.contextSvc.showSpinner(),this.accountApplicationSvc.saveAccountOpen().then(function(a){}).catch(function(a){b.$rootScope.raiseMessage(b.contextSvc.appConfig.featureUnavailableMessage),console.error("Submit failed."+a)}).finally(function(){b.contextSvc.hideSpinner()}),this.$state.go("accountopen.agreements"))},b.prototype.previous=function(a){a||(a=this.$location.path(),"/accountopen/accountType"==a?this.$state.go("behavioralQuestions"):"/accountopen/livingtrustagreements"==a?null!=this.accountOpenSvc.getAccountFlow()?this.$state.go("planConfirmation"):this.$state.go("accountopen.regulatoryQuestions"):"/accountopen/profile"==a?null!=this.accountOpenSvc.getMinorFlag()?(this.accountOpenSvc.removeMinorFlag(),this.accountOpenSvc.saveTempCustodialApplicant(this.accountOpenSvc.getCustodialApplicant()),this.accountOpenSvc.removeCustodialApplicant(),null!=this.accountOpenSvc.getAllAddress()?(this.accountOpenSvc.saveCustodialApplicantBack(this.accountOpenSvc.getAllAddress()),this.accountOpenSvc.removeAccountOpenAddress()):this.accountOpenSvc.saveCustodialApplicantBack("{}"),this.accountOpenSvc.saveCustodialAccountAddress(this.accountOpenSvc.getTempCustodialApplicant()),this.accountOpenSvc.removeTempCustodialApplicant(),this.$scope.custodialFlag=!1,this.$scope.newAddress=JSON.parse(this.accountOpenSvc.getAllAddress()),this.$state.go("accountopen.regulatoryQuestions")):this.$state.go("setup.newCustomer"):"/accountopen/additionalinfo"==a&&("S1"==this.$scope.newAddress.accountType?this.$state.go("accountopen.empFinance"):this.$state.go("accountopen.livingtrust")))},b.prototype.savePromotionalSettings=function(){var a=this,b=this,c=this.accountOpenSvc.getPromoApplicationid();this.contextSvc.showSpinner(),this.accountApplicationSvc.savePromotionalSettings(c).then(function(a){b.$scope.promo.receivePromoEnable=!1}).catch(function(c){a.$rootScope.raiseMessage(a.contextSvc.appConfig.featureUnavailableMessage),a.$timeout(function(){b.$scope.$apply(function(){b.$scope.promo.receivePromoEnable=!0,b.$scope.promo.receivePromoFlag=!1})},100),console.error(c)}).finally(function(){a.contextSvc.hideSpinner()})},b.prototype.invokeFrontCamera=function(){var a=this,b=this.accountOpenSvc.getApplicationid(),c=this.contextSvc.appConfig.accountOpenServiceApiUrl+"/ao/lt/"+b+"/images/first";this.hgCommonJs2nSvc.invokeCameraForPicture(c,"","","LivingTrustFront").then(function(){"singlePageTrust"==a.$scope.newAddress.trustType?a.$scope.trustUploadModel.trustCertificateThumbnailAvailable=!0:a.$scope.trustUploadModel.frontThumbnailAvailable=!0}).catch(function(b){a.$rootScope.raiseMessage(a.contextSvc.appConfig.featureUnavailableMessage),console.error("error")}).catch(function(b){a.$rootScope.raiseMessage(a.contextSvc.appConfig.featureUnavailableMessage)})},b.prototype.invokeBackCamera=function(){var a=this,b=this.accountOpenSvc.getApplicationid(),c=this.contextSvc.appConfig.accountOpenServiceApiUrl+"/ao/lt/"+b+"/images/last";this.hgCommonJs2nSvc.invokeCameraForPicture(c,"","","LivingTrustBack").then(function(){a.$scope.trustUploadModel.backThumbnailAvailable=!0}).catch(function(b){a.$rootScope.raiseMessage(a.contextSvc.appConfig.featureUnavailableMessage),console.error("error")}).catch(function(b){a.$rootScope.raiseMessage(a.contextSvc.appConfig.featureUnavailableMessage)})},b.prototype.firstPageUpload=function(){var a=this;if("true"==this.accountOpenSvc.getIsBranchChromeBook()&&this.$scope.newAddress.ByPassDoc&&(this.accountOpenSvc.saveNewAddress(this.$scope.newAddress),this.contextSvc.showSpinner(),this.accountApplicationSvc.saveAccountOpen().then(function(a){}).catch(function(b){a.$rootScope.raiseMessage(a.contextSvc.appConfig.featureUnavailableMessage),console.error("Submit failed."+b)}).finally(function(){a.contextSvc.hideSpinner()}),this.$state.go("accountopen.address")),!this.$scope.newAddress.ByPassDoc||null==this.$scope.newAddress.ByPassDoc){if("singlePageTrust"==this.$scope.newAddress.trustType)var b=this.$scope.trustUploadModel.certificateOfTrust;else var b=this.$scope.trustUploadModel.trustFirstDoc;var c=this.accountOpenSvc.getApplicationid(),d=this.contextSvc.appConfig.accountOpenServiceApiUrl+"/ao/lt/"+c+"/images/first";this.contextSvc.showSpinner(),this.accountApplicationSvc.pageUpload(d,b).then(function(){b==a.$scope.trustUploadModel.trustFirstDoc?a.lastPageUpload():a.$state.go("accountopen.address")}).catch(function(b){a.$rootScope.raiseMessage(a.contextSvc.appConfig.featureUnavailableMessage),console.error("error")}).catch(function(b){a.$rootScope.raiseMessage(a.contextSvc.appConfig.featureUnavailableMessage)}).finally(function(){a.contextSvc.hideSpinner()})}},b.prototype.lastPageUpload=function(){var a=this,b=this.$scope.trustUploadModel.trustLastDoc,c=this.accountOpenSvc.getApplicationid(),d=this.contextSvc.appConfig.accountOpenServiceApiUrl+"/ao/lt/"+c+"/images/last";this.contextSvc.showSpinner(),this.accountApplicationSvc.pageUpload(d,b).then(function(){a.$state.go("accountopen.address")}).catch(function(b){a.$rootScope.raiseMessage(a.contextSvc.appConfig.featureUnavailableMessage),console.error("error")}).catch(function(b){a.$rootScope.raiseMessage(a.contextSvc.appConfig.featureUnavailableMessage)}).finally(function(){a.contextSvc.hideSpinner()})},b.prototype.enrollmentStatusCheck=function(a,b){var c=this;void 0!=this.$scope.custodialFlag&&0!=this.$scope.custodialFlag||this.accountApplicationSvc.enrollmentStatus(a).then(function(a){var d=JSON.stringify(a),e=JSON.parse(d);e.status?(c.$scope.isSSNTaken=!0,b.SocialSecurityNumber.$setValidity("existingSSN",!1)):(c.$scope.isSSNTaken=!1,b.SocialSecurityNumber.$setValidity("existingSSN",!0))}).catch(function(a){c.$rootScope.raiseMessage(c.contextSvc.appConfig.featureUnavailableMessage),console.error("Enrollment status check failed."+a)}).finally(function(){c.contextSvc.hideSpinner()})},b.prototype.pinValidityCheck=function(){var a=/[^0-9]/g,b=this.$scope.newAddress.secondTenantPin,c=b.match(a);return"undefined"==b||null==b||""==b||!(!b||!(c||b.length>=4))},b.prototype.inviteSecondTenant=function(){var a=this;this.selectAccountType(),this.accountOpenSvc.saveNewAddress(this.$scope.newAddress),this.contextSvc.showSpinner(),this.accountApplicationSvc.saveAccountOpen().then(function(b){"Two Trustee"==a.$scope.newAddress.accountSubType?a.$scope.jointThankYou="Trustee":a.$scope.jointThankYou="joint",a.accountOpenSvc.removeAccountOpenSession(2),a.$state.go("accountopen.jointThankYou")}).catch(function(b){a.$rootScope.raiseMessage(a.contextSvc.appConfig.featureUnavailableMessage),console.error("Invite J2 failed."+b)}).finally(function(){a.contextSvc.hideSpinner()})},b.prototype.jointValidate=function(){var a=this,b=this,c=this.$location.url(),d=this.$location.url(c).search().meid;this.hgAuthSvc.silentLogout().finally(function(){a.accountApplicationSvc.jointEmailVerified(d).then(function(c){var d=JSON.stringify(c),e=JSON.parse(d);null!=e.ApplicationId||void 0!=e.ApplicationId?(a.accountOpenSvc.applicationid(e.ApplicationId),a.$rootScope.isIIP?a.contextSvc.customization.getAdvisorProgramForProspect(e.ProgramKey).then(function(a){b.contextSvc.customization.setAdvisorProgram(a),b.accountOpenSvc.setadvisorProgram(a),b.$state.go("accountopen.jointConfirmIdentity")}).catch(function(c){b.$rootScope.raiseMessage(a.contextSvc.appConfig.featureUnavailableMessage),console.error("failed account application for programkey"+c)}).finally(function(){}):a.$state.go("accountopen.jointConfirmIdentity")):a.$state.go("accountopen.accountOpenError")}).catch(function(b){a.$rootScope.raiseMessage(a.contextSvc.appConfig.featureUnavailableMessage),console.error("Invite J2 failed."+b)}).finally(function(){})})},b.prototype.jointConfirmIdentity=function(){var a=this;this.$scope.jointConfirmIdentityFlag=!1,this.accountApplicationSvc.confirmJointIdentity(this.$scope.newAddress.pin).then(function(b){var c=JSON.stringify(b),d=JSON.parse(c);void 0==d.Error||null==d.Error?(a.$scope.newAddress.accountType=d.AccountType,a.$scope.newAddress.accountSubType=d.AccountTitle,a.$scope.newAddress.emailAddress=d.SecondaryEmailAddress,a.accountOpenSvc.saveNewAddress(a.$scope.newAddress),a.accountOpenSvc.setAccountFlow(d.AccountTitle),a.accountOpenSvc.saveInviteEmail(d.SecondaryEmailAddress),a.$scope.newCustomerBack=!0,1==a.$rootScope.session.isLoggedIn?a.$state.go("accountopen.profile"):a.$state.go("setup.newCustomer")):a.$scope.jointConfirmIdentityFlag=!0}).catch(function(b){a.$rootScope.raiseMessage(a.contextSvc.appConfig.featureUnavailableMessage),console.error("Invite J2 failed."+b)}).finally(function(){})},b.prototype.iipSetFirmInfo=function(){if(1==this.$rootScope.session.isLoggedIn&&this.contextSvc.isIIP()){var a={};a.FirmId=this.contextSvc.customization.getSchwabFirmId(),a.ProgramPin=this.contextSvc.customization.getProgramPin(),this.contextSvc.customization.setFirmProgramInfo(a)}},b.prototype.loginRedirect=function(){var a=this;return this.contextSvc.showSpinner(),this.accountApplicationSvc.getCustomerData().then(function(b){var c;c=null!=a.accountOpenSvc.getAccountFlow()?b.SecondaryApplicant:b.PrimaryApplicant;var d,e;null!=c.IsDirector&&void 0!=c.IsDirector&&(d="true"==c.IsDirector.toLocaleLowerCase()),null!=c.IsAffiliated&&void 0!=c.IsAffiliated&&(e="Y"==c.IsAffiliated);var f,g;if(f="0"==c.AnnualIncome?"":c.AnnualIncome,g="0"==c.LiquidNetWorth?"":c.LiquidNetWorth,a.$scope.newAddress.firstName=c.FirstName,a.$scope.newAddress.lastName=c.LastName,a.$scope.newAddress.middleName=c.MiddleName,a.$scope.newAddress.suffix=c.NameSuffix,a.$scope.newAddress.emailAddress=c.EmailAddress,a.$scope.newAddress.IsEmailAddressInvalid=c.IsEmailAddressInvalid,a.$scope.newAddress.dateOfBirth=c.DateOfBirth,a.$scope.newAddress.HomePhone=c.HomePhone,a.$scope.newAddress.MobilePhone=c.MobilePhone,a.$scope.newAddress.BusinessPhone=c.BusinessPhone,a.$scope.newAddress.businessExt=c.BusinessExtension?Number(c.BusinessExtension):null,a.$scope.newAddress.IsDirector=d,a.$scope.newAddress.IsAffiliated=e,a.$scope.newAddress.Is407Checked=e,a.$scope.newAddress.socialSecurityNumber=c.SocialSecurityNumber,a.$scope.newAddress.CitizenShip=c.CitizenShip,a.$scope.newAddress.employmentStatus=c.EmploymentStatus.toLocaleLowerCase(),a.$scope.newAddress.employername=c.EmploymentName,""!=c.Occupation)var h=["BSOWN SELF-EMP","EXECUTIVE/SENIOR MAN","MEDICAL PROFESSIONAL","LEGAL PROFESSIONAL","ACCOUNTING PROF","FINANCIAL PROFESSION","INFORMATION SYSTEMS","OTHER PROFESSIONAL","U.S. GOVERNMENT EMPL","NON-U.S. GOVT EMPL","MILITARY","EDUCATOR","CLERICAL OR ADMIN","SERVICE WORKER","SALES, MARKETING","CONSULTANT","OTHER"],i=_.find(h,function(a){if(c)return c.Occupation.toLocaleLowerCase()==a.toLocaleLowerCase()});i||""==c.Occupation?(a.$scope.newAddress.occupation=c.Occupation,a.$scope.newAddress.occupationOther=c.OtherOccupation):(a.$scope.newAddress.occupation="other",a.$scope.newAddress.occupationOther=c.Occupation),a.$scope.newAddress.annualIncome=f,a.$scope.newAddress.liquidWorth=g,null!=c.IsMailingAddressDifferent&&"false"!=c.IsMailingAddressDifferent&&(a.$scope.newAddress.addAddress=Boolean(c.IsMailingAddressDifferent)),a.$scope.newAddress.TickerSymbols=c.TickerSymbols,null!=c.TickerSymbols&&(void 0!=c.TickerSymbols[0]&&(a.$scope.newAddress.symbol1=c.TickerSymbols[0].Code),void 0!=c.TickerSymbols[1]&&(a.$scope.newAddress.symbol2=c.TickerSymbols[1].Code),void 0!=c.TickerSymbols[2]&&(a.$scope.newAddress.symbol3=c.TickerSymbols[2].Code),void 0!=c.TickerSymbols[3]&&(a.$scope.newAddress.symbol4=c.TickerSymbols[3].Code),void 0!=c.TickerSymbols[4]&&(a.$scope.newAddress.symbol5=c.TickerSymbols[4].Code),void 0!=c.TickerSymbols[5]&&(a.$scope.newAddress.symbol6=c.TickerSymbols[5].Code),void 0!=c.TickerSymbols[6]&&(a.$scope.newAddress.symbol7=c.TickerSymbols[6].Code),void 0!=c.TickerSymbols[7]&&(a.$scope.newAddress.symbol8=c.TickerSymbols[7].Code),void 0!=c.TickerSymbols[8]&&(a.$scope.newAddress.symbol9=c.TickerSymbols[8].Code),void 0!=c.TickerSymbols[9]&&(a.$scope.newAddress.symbol10=c.TickerSymbols[9].Code)),null!=c.HomeAddress&&(a.$scope.newAddress.AddressLine1=c.HomeAddress.AddressLine1,a.$scope.newAddress.AddressLine2=c.HomeAddress.AddressLine2,a.$scope.newAddress.City=c.HomeAddress.City,a.$scope.newAddress.State=c.HomeAddress.State,a.$scope.newAddress.ZipCode=c.HomeAddress.ZipCode,null==c.HomeAddress.CountryCode?a.$scope.newAddress.CountryCode="US":a.$scope.newAddress.CountryCode=c.HomeAddress.CountryCode),null!=c.MailingAddress&&(a.$scope.newAddress.mailAddressLine1=c.MailingAddress.AddressLine1,a.$scope.newAddress.mailAddressLine2=c.MailingAddress.AddressLine2,a.$scope.newAddress.mailCity=c.MailingAddress.City,a.$scope.newAddress.mailState=c.MailingAddress.State,a.$scope.newAddress.mailZipCode=c.MailingAddress.ZipCode,null==c.MailingAddress.CountryCode?a.$scope.newAddress.mailCountryCode="US":a.$scope.newAddress.mailCountryCode=c.MailingAddress.CountryCode),null!=c.BusinessAddress&&(a.$scope.newAddress.businessAddressLine1=c.BusinessAddress.AddressLine1,a.$scope.newAddress.businessAddressLine2=c.BusinessAddress.AddressLine2,a.$scope.newAddress.businessCity=c.BusinessAddress.City,a.$scope.newAddress.businessState=c.BusinessAddress.State,a.$scope.newAddress.businessZipCode=c.BusinessAddress.ZipCode,null==c.BusinessAddress.CountryCode?a.$scope.newAddress.businessCountryCode="US":a.$scope.newAddress.businessCountryCode=c.BusinessAddress.CountryCode),null!=c.PreviousAddress&&(a.$scope.newAddress.oldAddress=!0,a.$scope.newAddress.oldAddressLine1=c.PreviousAddress.AddressLine1,a.$scope.newAddress.oldAddressLine2=c.PreviousAddress.AddressLine2,a.$scope.newAddress.oldCity=c.PreviousAddress.City,a.$scope.newAddress.oldState=c.PreviousAddress.State,a.$scope.newAddress.oldZipCode=c.PreviousAddress.ZipCode,(c.PreviousAddress.CountryCode=null)?a.$scope.newAddress.oldCountryCode="US":a.$scope.newAddress.oldCountryCode=c.PreviousAddress.CountryCode),a.$scope.newAddress.customerFlow=!0,a.accountOpenSvc.saveNewAddress(a.$scope.newAddress),a.$state.go("accountopen.profile")}).catch(function(b){a.$rootScope.raiseMessage(a.contextSvc.appConfig.featureUnavailableMessage),console.error("Submit failed."+b)}).finally(function(){a.contextSvc.hideSpinner()}),!1},b.prototype.setFirmSessionData=function(){var a=this.contextSvc.getSessionData(),b=new Object;b.FirmId=this.contextSvc.customization.getSchwabFirmId(),b.AdvisorProgramInfo=this.contextSvc.customization.getAdvisorProgram(),a.firmInfo=b,this.contextSvc.setSessionData(a);var c={};c.FirmId=this.contextSvc.customization.getSchwabFirmId(),c.ProgramPin=this.contextSvc.customization.getProgramPin(),this.contextSvc.customization.setFirmProgramInfo(c)},b.prototype.directorSymbols=function(){this.$scope.newAddress.IsDirector||(this.$scope.newAddress.symbol1="",this.$scope.newAddress.symbol2="",this.$scope.newAddress.symbol3="",this.$scope.newAddress.symbol4="",this.$scope.newAddress.symbol6="",this.$scope.newAddress.symbol7="",this.$scope.newAddress.symbol8="",this.$scope.newAddress.symbol9="",this.$scope.newAddress.symbol10="")},b.prototype.employmentStatusCheck=function(){"employed"!=this.$scope.newAddress.employmentStatus&&"self employed"!=this.$scope.newAddress.employmentStatus&&(this.$scope.newAddress.employername="",this.$scope.newAddress.businessAddressLine1="",this.$scope.newAddress.businessAddressLine2="",this.$scope.newAddress.businessCity="",this.$scope.newAddress.businessState="",this.$scope.newAddress.businessCountryCode="",this.$scope.newAddress.occupation="",this.$scope.newAddress.occupationOther="",this.$scope.newAddress.businessZipCode=null,this.$scope.newAddress.businessExt=null)},b.prototype.occupationCheck=function(){"other"!=this.$scope.newAddress.occupation&&(this.$scope.newAddress.occupationOther="")},b.prototype.toggleElem=function(a,b){switch(a){case"electronicsAgreement":this.$scope.electronicsAgreement={open:!b};break;case"hgAgreement":this.$scope.hgAgreement={open:!b};break;case"minorAgreement":this.$scope.minorAgreement={open:!b};break;case"cashAgreement":this.$scope.cashAgreement={open:!b};break;case"irsTaxAgreement":this.$scope.irsTaxAgreement={open:!b};break;case"accountTypeAgreement":this.$scope.accountTypeAgreement={open:!b};break;case"advisorAuthorization":this.$scope.advisorAuthorization={open:!b};break;case"livingTrustAgreementOne":this.$scope.livingTrustAgreementOne={open:!b};break;case"livingTrustAgreementTwo":this.$scope.livingTrustAgreementTwo={open:!b};break;case"livingTrustAgreementThree":this.$scope.livingTrustAgreementThree={open:!b}}},b.prototype.showPromoCodeBox=function(a){this.$scope.isShowPromoCodeBox=a,this.$scope.focusShowPromoCodeBox=a},b.prototype.getPromoCodeLinkModifier=function(){return 0==this.$scope.promoCodes.length?"an":"another"},b.prototype.submitProfile=function(a){return a.promoCode&&a.promoCode.$viewValue?($("#profileButton").prop("disabled",!0),this.validatePromoCode(a,!0,!0,null)):this.submitProfileContinue(),!1},b.prototype.validatePromoCode=function(a,b,c,d){var e=this;if(b&&a){var f=a.promoCode.$viewValue;if(f){for(var g=0;g<a.promoCode.$formatters.length;g++)f=a.promoCode.$formatters[g](f);for(var g=0;g<a.promoCode.$parsers.length;g++)f=a.promoCode.$parsers[g](f);a.promoCode.$invalid||(this.$scope.newPromo.newCode=f)}}if(b&&a.promoCode.$invalid)return void(this.$scope.newPromo.showPromoCodeNotValid=!1);var h=this,i=this.accountOpenSvc.getPromoApplicationid(),j=this.accountOpenSvc.getPromoCodes();
h.$scope.newPromo.showPromoCodeNotValid=!1,null==j||"[]"==j||b||(h.$scope.promoCodes=JSON.parse(j),h.showPromoCodeBox(!1),d=null),b&&(d=this.$scope.newPromo.newCode),null!=d&&void 0!=d&&(this.contextSvc.showSpinner(),this.accountApplicationSvc.promoCodeValidate(i,d).then(function(c){h.$scope.promo.receivePromoEnable=!1,c.forEach(function(c){c.IsValid&&b?(h.parsePromotionalCode(c),h.showPromoCodeBox(!1),h.$scope.newPromo.newCode="",h.$timeout(function(){$(".offer-code-success").find("a").focus()},0)):a?(a.promoCode.$setValidity("invalidPromo",!1),h.$scope.newPromo.showPromoCodeNotValid=!0,h.$scope.focusShowPromoCodeBox=!0):(h.parsePromotionalCode(c),h.showPromoCodeBox(!1))})}).catch(function(b){a&&(a.promoCode.$setValidity("unabletoProcess",!1),h.$scope.newPromo.showPromoCodeNotValid=!0,h.$scope.focusShowPromoCodeBox=!0),e.$rootScope.raiseMessage("We are unable to process this code at this time. Try again or call 866-232-9890 for assistance.")}).finally(function(){c?h.$scope.newPromo.showPromoCodeNotValid?($("#profileButton").removeAttr("disabled"),e.contextSvc.hideSpinner()):e.submitProfileContinue():e.contextSvc.hideSpinner()}))},b.prototype.removePromoCode=function(a){this.accountOpenSvc.removePromoCodes();for(var b=0;b<this.$scope.promoCodes.length;b++)this.$scope.promoCodes[b].PromoCode==a&&(this.$scope.promoCodes.splice(b,1),this.$timeout(function(){$(".pc-block").focus()},0));this.accountOpenSvc.savePromoCodes(this.$scope.promoCodes)},b.prototype.cleanupPromoCode=function(){if(this.$scope.promoCodes.length>0){var a=this;a.accountOpenSvc.removePromoCodes();var b=a.$scope.promoCodes;a.$scope.promoCodes=[],b.forEach(function(b){b.IsValid&&a.parsePromotionalCode(b)})}},b.prototype.parsePromotionalCode=function(a){this.$scope.promoCodes.push({PromoCode:a.PromoCode,IsValid:a.IsValid,MessageCode:a.MessageCode,TncCmsAssetId:a.TncCmsAssetId,OfferCmsAssetId:a.OfferCmsAssetId,OfferCmsAssetValue:a.OfferCmsAssetValue}),this.accountOpenSvc.savePromoCodes(this.$scope.promoCodes)},b.prototype.enablePromoCodeLink=function(){return!!this.isJointFlowTypes()&&(!this.$scope.isShowPromoCodeBox&&this.$scope.promoCodes.length<3)},b.prototype.isJointFlowTypes=function(){return this.$rootScope.isSIP&&(0==this.$scope.jointFlag||void 0==this.$scope.jointFlag)&&(0==this.$scope.twoTrusteeFlag||void 0==this.$scope.twoTrusteeFlag)&&(0==this.$scope.custodialFlag||void 0==this.$scope.custodialFlag)},b}(a.common.hgControllerBase);b.accountOpenBaseCtrl=c}(b=a.accountOpen||(a.accountOpen={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(b){var c=function(a){function b(b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=this;a.call(this,b,c,d,i),this.$scope=b,this.$rootScope=c,this.$state=d,this.$window=e,this.$filter=f,this.$timeout=g,this.q=h,this.contextSvc=i,this.hgAccountSettingsSvc=j,this.suitabilityQuestionsSvc=k,this.accountApplicationSvc=l,this.hgGoalService=m,this.enrollmentCommonSvc=n,this.hgBeneficiarySvc=o,this.SUCCESS_MSG="Thank you, your information has been received.",this.SYMBOL_LOOKUP_ERROR="No matching symbols found",this.SYMBOL_LOOKUP_MAX_TXT_LENGTH=3,this.MIN_DATE="01/01/0001",this.fetchedLookupSymbolList=null,this.ACCOUNTSETTINGSCTRL_SYMBOL_LOOKUP_EVENT="ACCOUNTSETTINGSCTRL_SYMBOL_LOOKUP_EVENT",this.ACCOUNTSETTINGSCTRL_SYMBOL_VALIDATE_EVENT="ACCOUNTSETTINGSCTRL_SYMBOL_VALIDATE_EVENT",this.fetchedLookupSymbolList=null,b.title="Settings",this.$scope.taxLossData={},this.$scope.isLoggedIn=this.$rootScope.session.isLoggedIn,this.removeSuccessMessage(),b.SECURITIES_EXCLUSION_COUNT=3,b.SYMBOL_LOOKUP_LIST_COUNT=8,b.securitiesLookupHolder=new Array,b.securitiesExclusionList=new Array,b.securitiesExclusionShowErrorList=new Array,b.allAccountsClosedMessage=this.hgGoalService.getAllAccountsClosedMessage(),this.$rootScope.isIIP?b.isTLHEnabled=this.contextSvc.customization.getAdvisorProgram().OfferTaxLossHarvesting:b.isTLHEnabled=!0,b.symbolChanged=function(a){p.symbolChanged(a)},b.removeHint=function(a,b){p.removeHint(a,b)},b.getNumberArray=function(a){return new Array(a)},b.onSelectingSymbol=function(a,b){p.onSelectingSymbol(a,b)},b.updateProfile=function(){p.updateProfile()},b.getMonthlyContribution=function(a){p.getMonthlyContribution(a)},b.setLastQuestionIdAndRouteToBehavioralQuestions=function(a){p.setLastQuestionIdAndRouteToBehavioralQuestions(a)},b.saveTLHData=function(){p.saveTLHData()},b.saveExclusionList=function(){p.saveExclusionList()},b.updateBeneficiaries=function(){p.updateBeneficiaries()},b.disableSaveBtn=!1,b.accountIdDisplay=function(){return p.getActiveAccountIdDisplay()},b.$on("$destroy",function(){p.removeSuccessMessage()}),this.getPortfolioSettingsData()}return __extends(b,a),b.prototype.saveTLHData=function(){var a=this;this.removeSuccessMessage();var b=this.$scope.taxLossData.taxLossHarvestOptIn,c={RiskProfileInformation:{IsTaxLossHarvesting:b}};this.contextSvc.showSpinner(),this.hgAccountSettingsSvc.savePortfolioTLHData(c).then(function(b){a.showSuccessMessage()}).catch(function(a){}).finally(function(){a.contextSvc.hideSpinner()})},b.prototype.showSuccessMessage=function(){var a=this.$rootScope;a.raiseMessage(this.SUCCESS_MSG,3)},b.prototype.removeSuccessMessage=function(){var a=this.$rootScope;a.dismissMessage(this.SUCCESS_MSG)},b.prototype.saveExclusionList=function(){var a=this;this.removeSuccessMessage();var b={};b.LastModifiedDate=this.$scope.lastModifiedDate,b.InvestmentStrategy={},b.InvestmentStrategy.ExcludedSecurities=this.$scope.securitiesExclusionList,this.contextSvc.showSpinner(),this.hgAccountSettingsSvc.savePortfolioSettingsData(b).then(function(b){if(a.showSuccessMessage(),b&&b.value){var c=JSON.parse(b.value);a.$scope.lastModifiedDate=c.LastModifiedDate}}).catch(function(a){}).finally(function(){a.contextSvc.hideSpinner()})},b.prototype.getPortfolioSettingsData=function(){var a=this;this.$rootScope.allAccountsClosedFlag||(this.contextSvc.showSpinner(),this.hgAccountSettingsSvc.getPortfolioSettingsData(!0).then(function(b){a.handlePortfolioSettingsData(b)}).finally(function(){a.contextSvc.hideSpinner()}))},b.prototype.handlePortfolioSettingsData=function(a){if(a&&a.value){var b=a.value;if(b.length>0){var c=b[0];if(c){this.$scope.canLaunchBeneficiaryFeature=c.CanLaunchBeneficiaryFeature,this.$scope.maritalStatusUnknown=c.MaritalStatusUnknown,this.$scope.marriedInCommunityPropertyState=c.MarriedInCommunityPropertyState,this.$scope.hasAccountRestrictions=c.HasAccountRestrictions,this.$scope.showBeneficiariesSection=this.enableBeneficiariesSection(),this.contextSvc.setPortfolioSettings(c),this.$scope.lastModifiedDate=c.LastModifiedDate;var d=c.InvestmentStrategy;if(this.$scope.securitiesExclusionList=new Array,d&&d.ExcludedSecurities){this.$scope.taxLossHarvestEligible=d.TaxLossHarvestEligible,this.$scope.taxLossData.taxLossHarvestOptIn=d.TaxLossHarvestOptIn;for(var e=0;e<d.ExcludedSecurities.length;e++)this.$scope.securitiesExclusionList.push(d.ExcludedSecurities[e])}d&&d.AccountSearchData&&(this.$scope.taxLossData.spouseSSN=null,this.$scope.taxLossData.dateOfBirth=null,this.$scope.taxLossData.lastName=null,d.AccountSearchData.TaxId&&d.AccountSearchData.TaxId.length>0&&(this.$scope.taxLossData.spouseSSN=d.AccountSearchData.TaxId),d.AccountSearchData.DateOfBirth&&(this.$scope.taxLossData.dateOfBirth=this.formatDate(d.AccountSearchData.DateOfBirth,"MM/dd/yyyy")),d.AccountSearchData.LastName&&(this.$scope.taxLossData.lastName=d.AccountSearchData.LastName))}}}},b.prototype.formatDate=function(a,b){var c=null;if(a){var d=a;if(d&&d.length>=10){var e=d.toString().substr(0,4),f=d.toString().substr(5,2),g=d.toString().substr(8,2);c=f+"/"+g+"/"+e,c==this.MIN_DATE&&(c="")}}return c},b.prototype.setLastQuestionIdAndRouteToBehavioralQuestions=function(a){this.$window.sessionStorage.setItem("lastQuestionId",a),this.$state.go("behavioralQuestions")},b.prototype.getProfileSuitabilityQuestions=function(){var a=this,b=this.q.defer(),c=this.contextSvc.trimLeading(this.contextSvc.getActiveAccountNumber());return this.suitabilityQuestionsSvc.removeUpdateProfile(),this.suitabilityQuestionsSvc.setUpdateProfileFlow(),this.suitabilityQuestionsSvc.getAnswers(null,c,!0).then(function(c){a.suitabilityQuestionsSvc.processQuestionsResponse(c,!0);var d=a.contextSvc.isIIP();d&&c&&c.IsReadOnly?(a.$rootScope.raiseMessage("Your updated portfolio has been submitted for review and we will make the final portfolio selection. Your account will remain in the existing portfolio until we complete the final portfolio selection.",1),a.contextSvc.hideSpinner()):a.accountApplicationSvc.saveAccountDetailsInLocalStorage(c.ApplicationId).then(function(c){a.hgAccountSettingsSvc.getPortfolioSettingsData().then(function(c){c&&c.value[0]&&c.value[0].AccountProfile&&c.value[0].AccountProfile.Address&&c.value[0].AccountProfile.Address.State&&a.accountApplicationSvc.saveAddressState(c.value[0].AccountProfile.Address.State),a.setLastQuestionIdAndRouteToBehavioralQuestions(1),b.resolve(c)})})}).catch(function(){b.reject("getQuestions failed.")}),b.promise},b.prototype.getMonthlyContribution=function(a){var b=this;this.hgGoalService.initializeGoalsViewModel().then(function(c){var d=c?c.monthlyContribution:null,e=d?d.amount:null;b.$window.sessionStorage.setItem("compoundGrowthannualContribution",e);var f={};f.SelectedAnswers=[];var g,h,i,j,k,l=e,m=a.Questions[8].SliderDefaults[0];k=null!=m?100*Number(l)/m:100*Number(l)/5e3,angular.forEach(a.Questions[10],function(a,b){"QuestionType"==b&&(j=a),"Answers"==b&&(k<"10"?(g=a[0].Weightage,h=a[0].AnswerText,i=a[0].AnswerId):(g=a[1].Weightage,h=a[1].AnswerText,i=a[1].AnswerId))});var n={AnswerId:i,AnswerText:h,SelectedValue:l.toString()};f.SelectedAnswers.push(n),f.QuestionId=a.Questions[10].QuestionId,null==b.enrollmentCommonSvc.getGrowthannualContributionWeightage()?(b.enrollmentCommonSvc.saveGrowthannualContributionWeightage(g),"W"==j?b.enrollmentCommonSvc.willingnessNumber(Number(b.enrollmentCommonSvc.getWillingnessNumber())+g):b.enrollmentCommonSvc.capacityNumber(Number(b.enrollmentCommonSvc.getCapacityNumber())+g)):b.enrollmentCommonSvc.getGrowthannualContributionWeightage()!=g&&("W"==j?(b.enrollmentCommonSvc.willingnessNumber(Number(b.enrollmentCommonSvc.getWillingnessNumber())-Number(b.enrollmentCommonSvc.getGrowthannualContributionWeightage())),b.enrollmentCommonSvc.willingnessNumber(Number(b.enrollmentCommonSvc.getWillingnessNumber())+g)):(b.enrollmentCommonSvc.capacityNumber(Number(b.enrollmentCommonSvc.getCapacityNumber())-Number(b.enrollmentCommonSvc.getGrowthannualContributionWeightage())),b.enrollmentCommonSvc.capacityNumber(Number(b.enrollmentCommonSvc.getCapacityNumber())+g)),b.enrollmentCommonSvc.saveGrowthannualContributionWeightage(g));var o={};o.lastQuestionId=a.Questions[10].QuestionId.toString(),o.lastQuestionType=j,o.lastWeightage=g,o.indexAction=7,b.enrollmentCommonSvc.savesliderRiskModel(11,f),b.enrollmentCommonSvc.saveLastRiskModel(11,o)})},b.prototype.updateProfile=function(){var a=this,b=this.contextSvc.getMongoActiveAccount();return this.suitabilityQuestionsSvc.removeUpdateProfile(),this.suitabilityQuestionsSvc.setUpdateProfileFlow(),this.contextSvc.showSpinner(),this.suitabilityQuestionsSvc.getAnswers(null,b,!0).then(function(b){var c=a.contextSvc.isIIP();a.suitabilityQuestionsSvc.processQuestionsResponse(b,!0),a.contextSvc.device.isSmallScreen()&&!c&&a.getMonthlyContribution(b);var d=a.suitabilityQuestionsSvc.getAccountType(b);c&&b&&b.IsReadOnly?a.$rootScope.raiseMessage("Your updated portfolio has been submitted for review and we will make the final portfolio selection. Your account will remain in the existing portfolio until we complete the final portfolio selection.",1):(a.contextSvc.showSpinner(),a.suitabilityQuestionsSvc.getLoggedInStateCode().then(function(b){var c="";a.contextSvc.hideSpinner(),a.suitabilityQuestionsSvc.setupAccountOpen_AddressForUpdateProfile(b,d,c),a.accountApplicationSvc.saveAddressState(b),a.setLastQuestionIdAndRouteToBehavioralQuestions(1)}).finally(function(){a.contextSvc.hideSpinner()}))}).finally(function(){a.contextSvc.hideSpinner()})},b.prototype.symbolChanged=function(a){var b=this,c=this.$scope.securitiesExclusionList[a];if(c&&c.length>0){var d=(new Array,this.$scope.securitiesExclusionList[a]),e=this,f=this.$scope.$on(e.ACCOUNTSETTINGSCTRL_SYMBOL_LOOKUP_EVENT,function(c,d){var g=d.symbolLookupItemNbr,h=e.populateLookupSymbolList(d);e.$scope.$apply(function(){h&&h.length>0?(e.fetchedLookupSymbolList=angular.copy(h),e.setSymbolLookupList(g,h)):e.$scope.securitiesLookupHolder=new Array}),b.validateSymbol(a),f()}),g=this.$scope.$on(e.ACCOUNTSETTINGSCTRL_SYMBOL_LOOKUP_EVENT+"_404",function(a,b){var c=b.symbolLookupItemNbr;e.removeHint(c,!1),g()});if(c.length<=e.SYMBOL_LOOKUP_MAX_TXT_LENGTH){var h=this.fetchLookupSymbolList(a,d,e.ACCOUNTSETTINGSCTRL_SYMBOL_LOOKUP_EVENT);h||(e.$scope.securitiesExclusionShowErrorList[a]=!0,e.enableDisableSaveBtn())}else{var i=this.filterSymbolLookupList(d);i&&i.length>0?this.setSymbolLookupList(a,i):this.$scope.securitiesLookupHolder=new Array}}else this.removeHint(a,!1)},b.prototype.filterSymbolLookupList=function(a){var b=this.$filter("filter")(this.fetchedLookupSymbolList,a);return b},b.prototype.setSymbolLookupList=function(a,b){this.$scope.securitiesLookupHolder=new Array,this.$scope.securitiesLookupHolder[a]=b},b.prototype.removeHint=function(a,b){var c=this,d=function(){c.$scope.$apply(function(){c.$scope.securitiesLookupHolder=new Array}),b&&c.validateSymbol(a)};this.$timeout(d,100)},b.prototype.onSelectingSymbol=function(a,b){this.$scope.securitiesExclusionList[a]=b,this.removeHint(a,!0)},b.prototype.validateSymbol=function(a){var b=this.$scope.securitiesExclusionList[a],c=this;if(b&&b.length>0){var d=this.$scope.$on(c.ACCOUNTSETTINGSCTRL_SYMBOL_VALIDATE_EVENT,function(a,e){var f=e.symbolLookupItemNbr,g=c.populateLookupSymbolList(e);c.$scope.$apply(function(){var a=_.find(g,function(a){if(a)return a.symbol.toLowerCase()==b.toLowerCase()});a?c.$scope.securitiesExclusionShowErrorList[f]=!1:c.$scope.securitiesExclusionShowErrorList[f]=!0,c.enableDisableSaveBtn()}),d()}),e=this.$scope.$on(c.ACCOUNTSETTINGSCTRL_SYMBOL_VALIDATE_EVENT+"_404",function(a,b){c.$scope.$apply(function(){var a=b.symbolLookupItemNbr;c.$scope.securitiesExclusionShowErrorList[a]=!0,c.enableDisableSaveBtn()}),e()});b&&b.length>0&&(b.length>=c.SYMBOL_LOOKUP_MAX_TXT_LENGTH?this.fetchLookupSymbolList(a,b.substr(0,c.SYMBOL_LOOKUP_MAX_TXT_LENGTH),c.ACCOUNTSETTINGSCTRL_SYMBOL_VALIDATE_EVENT):this.fetchLookupSymbolList(a,b,c.ACCOUNTSETTINGSCTRL_SYMBOL_VALIDATE_EVENT))}else c.$scope.securitiesExclusionShowErrorList[a]=!1,c.enableDisableSaveBtn()},b.prototype.enableDisableSaveBtn=function(){for(var a=!0,b=0;b<this.$scope.SECURITIES_EXCLUSION_COUNT;b++)this.$scope.securitiesExclusionShowErrorList[b]&&(a=!1);a?this.$scope.disableSaveBtn=!1:this.$scope.disableSaveBtn=!0},b.prototype.populateLookupSymbolList=function(a){var b=new Array;if(a&&a.Symbols)for(var c=0;c<a.Symbols.length;c++){var d=a.Symbols[c],e={};d.length>=2&&(e.symbol=d[0].toString(),e.symbolDesc=d[1].toString()),b.push(e)}return b},b.prototype.fetchLookupSymbolList=function(a,b,c){var d=this,e=null,f=d.$rootScope;f.dismissMessage(d.SYMBOL_LOOKUP_ERROR);var g=this.contextSvc.appConfig.symbolLookupUrl+"jsonCwpEquities/"+b+".txt";return this.$window.SuggestionBox={JsonpCallback:function(b,e){e||(e={}),e.symbolLookupItemNbr=a,void 0===e.Symbols?404==e.Status&&d.$scope.$emit(c+"_404",e):d.$scope.$emit(c,e)}},$.ajax({type:"GET",url:g,async:!1,dataType:"script",success:function(a){},error:function(a){console.error(a)}}),e},b.prototype.updateBeneficiaries=function(){this.hgBeneficiarySvc.saveBeneSnapshot(null),this.$state.go("beneficiary.overview")},b.prototype.enableBeneficiariesSection=function(){return!!(this.$scope.canLaunchBeneficiaryFeature||!this.$scope.canLaunchBeneficiaryFeature&&this.$scope.hasAccountRestrictions)},b.prototype.getActiveAccountIdDisplay=function(){var a=this.contextSvc.getActiveAccount();return a||(this.contextSvc.processAccounts(this.contextSvc.getSessionData()),a=this.contextSvc.getActiveAccount()),a?a.AcctIdDisplay:null},b}(a.common.hgControllerBase);b.accountSettingsCtrl=c}(b=a.assets||(a.assets={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(a){this.setOriginalMemento(a)}return a.prototype.updateMemento=function(a){this.currentMemento=angular.copy(a),this.updatesApplied=!0},a.prototype.discardUpdatesToMemento=function(){this.updatesToMementoExist()&&this.setOriginalMemento(this.originalMemento)},a.prototype.acceptUpdatesToMemento=function(){this.updatesToMementoExist()&&this.setOriginalMemento(this.currentMemento)},a.prototype.updatesToMementoExist=function(){return this.updatesApplied},a.prototype.getMemento=function(){return angular.copy(this.currentMemento)},a.prototype.setOriginalMemento=function(a){this.originalMemento=angular.copy(a),this.currentMemento=angular.copy(a),this.updatesApplied=!1},a}();a.MementoOriginator=b}(b=a.assets||(a.assets={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){function b(){return{templateUrl:"templates/assets/performanceBenchmark.html",replace:!0,restrict:"E",scope:{performance:"=",removebenchmark:"=",benchmarks:"=",viewType:"=",gainAmount:"=",gainAmountChange:"="},transclude:!0,link:function(a,b,c,d){}}}a.hgPerformanceBenchmark=b}(b=a.assets||(a.assets={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(b){var c=function(a){function b(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=this;a.call(this,c,d,e,g),this.q=b,this.$scope=c,this.$rootScope=d,this.$state=e,this.$location=f,this.contextSvc=g,this.hgCommonJs2nSvc=h,this.authJs2nSvc=i,this.enrollmentCommonSvc=j,this.suitabilityQuestionsSvc=k,this.strategiesSvc=l,this.$timeout=m,this.$filter=n,this.hgStateSvc=o,this.hgAuthSvc=p,this.hgGoalService=q,this.defaultGoalState=!0,this.firstIncomesimulation=!0,this.firstTimeUpdateProfile=!0,this.$scope.$on("$destroy",function(){r.$rootScope.dismissMessage(r.contextSvc.appConfig.featureUnavailableMessage)}),this.$scope.isBigweb=!this.contextSvc.device.isNative(),this.$scope.isChromeOS=this.contextSvc.device.isChromeOS(),this.$scope.isDesktop=g.isDesktop(),this.$scope.saveResponses=function(){return r.saveResponses()},this.$scope.sliderValue=7,this.$scope.initPlanView=function(){return r.initPlanView()},this.$scope.selectionChanged=function(a){return r.selectionChanged(a)},this.$scope.additionalAddress=!0,this.$scope.next=function(a){return r.next(a)},this.$scope.previous=function(a){return r.previous(a)},this.$scope.backQuestion=function(){return r.backQuestion()},this.$scope.redrawCompoundGrowthChart=function(a){return r.redrawCompoundGrowthChart(a)},this.$scope.redrawGoalChart=function(){return r.redrawGoalChart()},this.$scope.jumpPlanRecommendation=function(){return r.jumpPlanRecommendation()},this.$scope.jumpAccountType=function(){return r.jumpAccountType()},this.$scope.sliderFunction=function(a){return r.sliderFunction(a)},this.$scope.sliderStop=function(a){return r.sliderStop(a)},this.$scope.nextquestion=function(){return r.nextquestion()},this.$scope.sliderBusinessRule=0,this.$scope.calculateSuggestion=!1,this.$scope.submitaddtOfferings=function(){return r.submitaddtOfferings()},this.$scope.businessRule=function(a){return r.businessRule(a)},this.$scope.getSelectedAnswer=function(a){return r.getSelectedAnswer(a)},this.$scope.planChangeBusinessRule=function(){return r.planChangeBusinessRule()},this.$scope.loadQuestion=function(){return r.loadQuestion()},this.$scope.planSignUp=function(){return r.planSignUp()},this.$scope.sliderCustomDecrement=function(a){return r.sliderCustomDecrement(a)},this.$scope.sliderCustomIncrement=function(a){return r.sliderCustomIncrement(a)},this.$scope.sliderDollarInit=function(a){return r.sliderDollarInit(a)},this.$scope.sliderDollarInput=function(a,b){return r.sliderDollarInput(a,b)},this.$scope.setSuggestionAmount=function(){return r.setSuggestionAmount()},this.$scope.setGoalYear=function(){return r.setGoalYear()},this.$scope.setSuggestionYear=function(){return r.setSuggestionYear()},this.$scope.submitAccountType=function(){return r.submitAccountType()},this.init(),this.$scope.hideInitialInvestment=!(!this.$rootScope.session.isLoggedIn||"updateProfile"!=k.getReferrer()||this.suitabilityQuestionsSvc.isUnfunded()),this.initModelAssignments(),this.$scope.redrawModelChartOnResize=function(){return r.redrawModelChartOnResize()},this.$scope.questionsBackStart=function(){return r.questionsBackStart()},this.$scope.closeGuardRail=function(){return r.closeGuardRail()},this.$scope.myPortfolioText=this.setMyPortfolioText(),this.$scope.accountOpenBannerText="Open your account with Schwab",this.$scope.iipSetFirmInfo=function(){return r.iipSetFirmInfo()},this.initializeScopeThemeAttributes(),this.$scope.changeSuggestion=function(){return r.changeSuggestion()},this.$scope.sliderCalculation=function(){return r.sliderCalculation()},this.$scope.incomeProfileCheckBox=function(){return r.incomeProfileCheckBox()},this.$scope.municipalBondsCalif=function(){return r.municipalBondsCalif()},this.$scope.offerCheck=function(){return r.offerCheck()},this.$scope.showDocument=function(a){return r.showDocument(a)};var s=this;this.$timeout(function(){s.getInitialStrategies()},100),this.$scope.lowGrowthRate=1,this.$scope.highGrowthRate=1.06,this.$scope.isLargeScreen=this.contextSvc.device.isLargeScreen(),this.$scope.isGoalsChartDisplayed=this.contextSvc.device.isLargeScreen()&&this.contextSvc.isSIP()&&8==this.$scope.groupID;var t="portfolioConfirmation"==this.$state.current.name||"accountopen.addtOfferings"==this.$state.current.name;if(!this.contextSvc.activeAccount||"newProfile"==this.suitabilityQuestionsSvc.getReferrer()||!this.$scope.isGoalsChartDisplayed&&"goalFlow"!=this.suitabilityQuestionsSvc.getReferrer()||t?this.hgGoalService.simulationGoalConfiguration(null,!0).then(function(a){s.$scope.goalDetails=s.initializeGoalViewModel(),s.initialiseIncomeWithdrawal()}):this.hgGoalService.initializeGoalsViewModel().then(function(a){if(s.enrollmentCommonSvc.setTargetAmount(a.target.amount),s.$scope.goalDetails=a,!r.hgGoalService.isIncomeModel(s.$scope.goalDetails.type)){var b=s.$scope.goalDetails.monthlyContribution&&s.$scope.goalDetails.monthlyContribution.amount?Number(s.$scope.goalDetails.monthlyContribution.amount):0;s.$scope.sliderInputContribute=s.$filter("currency")(b,void 0,0),$("#sliderContribute").blur(),s.enrollmentCommonSvc.saveCompoundGrowthannualContribution(b)}null!=r.enrollmentCommonSvc.getRiskProfile()&&r.initialiseIncomeWithdrawal()}),this.$scope.assetAllocationConfig=this.buildChart(null),this.enrollmentCommonSvc.getRiskProfile()){var u=parseInt(this.enrollmentCommonSvc.getRiskProfile()),v=u;this.enrollmentCommonSvc.getCalculatedRiskProfile()&&(v=parseInt(this.enrollmentCommonSvc.getCalculatedRiskProfile()));var w=1==v?v:v-1,x=12==v?v:v+1;this.$scope.sliderValues={InitialInvestment:5e3,Contribution:0,MoneyReturn:5,FinalRecommendation:u,MinFinalRecommendation:w,MaxFinalRecommendation:x,SliderPosition:"slider-position-"+v}}else this.$scope.sliderValues={InitialInvestment:5e3,Contribution:0,MoneyReturn:5,FinalRecommendation:6,MinFinalRecommendation:4,MaxFinalRecommendation:7,SliderPosition:"slider-position-1"};if(null!=this.enrollmentCommonSvc.getSelectRiskProfile()?this.$scope.sliderValues.FinalRecommendation=Number(this.enrollmentCommonSvc.getSelectRiskProfile()):null!=this.enrollmentCommonSvc.getRiskProfile()&&(this.$scope.sliderValues.FinalRecommendation=Number(this.enrollmentCommonSvc.getRiskProfile())),this.enrollmentCommonSvc.getRiskProfileType()&&this.enrollmentCommonSvc.getRiskProfileType().indexOf("Income")>-1){var y=Number(this.enrollmentCommonSvc.getRiskProfile());this.$scope.sliderValues.MinFinalRecommendation=1==y?1:y-1,this.$scope.sliderValues.MaxFinalRecommendation=3==y?3:y+1,this.$scope.sliderValues.SliderPosition="slider-position-income-"+y}this.$rootScope.session.isLoggedIn||1!=this.$scope.groupID||null!=this.enrollmentCommonSvc.GetQuestionRiskModel(1)?this.$rootScope.disabledLinkClass="":this.$rootScope.disabledLinkClass="disabledLink",this.$scope.assetOptions={},this.$scope.isActiveTab=function(a){return"charts.assets"===a?r.$state.is("charts")||r.$state.includes(a):r.$state.includes(a)},this.$scope.assetOptions.select=function(a){c.$broadcast("ASSET_CHART_SELECT_LEVEL",{level1:a.level1,level2:a.level2,level3:a.level3}),r.handleAssetSelectionChanged(a,!1)},this.$scope.assetOptions.isDisabled=function(a){return!(!r.$scope.assetOptions.selected||!r.$scope.assetOptions.selected.level1)&&r.$scope.assetOptions.selected.level1!==a.level1},this.$scope.assetOptions.isSelected=function(a){return!(!r.$scope.assetOptions.selected||!r.$scope.assetOptions.selected.level2)&&r.$scope.assetOptions.selected.level2===a.level2},this.$scope.$on("ASSET_CHART_LEVEL_CHANGED",function(a,b){r.handleAssetSelectionChanged(b,!0)}),this.$scope.idFromAssetLevelNames=function(a,b){var c=a.replace(/[ &]/g,"_"),d=b.replace(/[ &]/g,"_");return c+"-"+d},this.$scope.modelOptions={series:[{name:"Asset Class",size:"90%",innerSize:"85%",data:null,dataLabels:{color:"#fff",connectorColor:"#fff",softConnector:!1}}]},this.$scope.defaultCompoundGrowth={startingValue:5e3,numberOfYears:25,annualContribution:0,age:40},this.redrawCompoundGrowthChart(this.$scope.defaultCompoundGrowth),this.$scope.saveProspectDetails=function(){return r.saveProspectDetails()},this.$scope.$on("SAVE_EVENT_CLICKED",function(a,b){r.$scope.saveProspectDetails()}),this.$scope.$on("USER_LOGGED_IN_EVENT",function(a,b){r.$scope.saveProspectDetails()}),this.$scope.promo={receivePromoEnable:!0,receivePromoFlag:!1},this.$scope.questionModel={},this.$scope.questionModel.SelectedAnswers=[],this.$scope.formatCurrency=function(a){return n("currency")(a,void 0,0)},this.$scope.formatCurrencyMore=function(a){return n("currency")(a,void 0,0)+" & more"},this.$scope.getGoalName=function(){return r.getGoalName()},this.$scope.getActiveAccountBalance=function(){return r.getActiveAccountBalance()},this.$scope.getHeaderText=function(){return r.getHeaderText()},this.$scope.isIncomeGoal=function(){return r.isIncomeGoal()},this.$scope.isSipAccount=function(){return r.isSipAccount()},this.$scope.isSipIncomeGoal=!!this.isSipAccount()&&this.isIncomeGoal(),this.$scope.isIIPIncomeGoal=!!this.contextSvc.isIIP()&&this.isIncomeGoal(),this.$scope.editIncomeWithdrawal=function(a){return r.editIncomeWithdrawal(a)},this.$scope.viewSuggestedWithdrawal=null==this.enrollmentCommonSvc.getCompoundGrowthIncomeWithdrawal(),this.$scope.setWithdrawalAmountFromSlider=function(a){return r.setWithdrawalAmountFromSlider(a)},this.$scope.getStoredIncomeWithdrawal=function(){return r.getStoredIncomeWithdrawal()},this.$scope.redrawGoalChartOnValidWithdrawal=function(){return r.redrawGoalChartOnValidWithdrawal()},this.$scope.sliderWithdrawalAmount=this.$scope.sliderWithdrawalAmount?this.$scope.sliderWithdrawalAmount:0,this.$scope.withdrawalAmount=this.$scope.withdrawalAmount?this.$filter("currency")(this.$scope.withdrawalAmount,void 0,0):"$0",this.$scope.isProfileUpdateFlag="updateProfile"==this.suitabilityQuestionsSvc.getReferrer(),this.$scope.isProfileUpdateFlag&&(this.$scope.calculateSuggestion=!0,this.$scope.viewSuggestedWithdrawal=null==this.enrollmentCommonSvc.getCompoundGrowthIncomeWithdrawal()||null!=this.enrollmentCommonSvc.getDisplaySystemMonthlyValue()),this.$scope.isIncomeUpdateOnBigweb=function(){return r.isIncomeUpdateOnBigweb()},this.firstIncomesimulation=null==this.enrollmentCommonSvc.getCompoundGrowthIncomeWithdrawal(),8==this.$scope.groupID&&(this.defaultGoalState=!0),this.$rootScope.$on("HG_PLANRECOMMENDATION_LAUNCH",function(){r.navigateToRecurringMoveMoneyTransfer()}),this.$scope.sliderInputOneTimeContribution=null!==this.enrollmentCommonSvc.getOneTimeContributionAmount()?this.$filter("currency")(Number(this.enrollmentCommonSvc.getOneTimeContributionAmount())):"$0",this.$scope.currentAccountBalance=this.getActiveAccountBalance()?this.$filter("currency")(Number(this.getActiveAccountBalance().replace(/\$|,/g,"")),void 0,0):null}return __extends(b,a),b.prototype.fetchQuestionsAndOrAnswers=function(){var a=this;if(this.$rootScope.session.isLoggedIn){var b=this.suitabilityQuestionsSvc.getReferrer(),c=null;"updateProfile"==b&&(c=this.contextSvc.getMongoActiveAccount()),this.suitabilityQuestionsSvc.getAnswers(null,c).then(function(b){b&&400!=b.ReturnCode?(a.setSliderQuestionResponse(b.Questions),a.processQuestions(b.Questions)):a.createApplication()}).catch(function(){c||a.createApplication()}).finally(function(){a.contextSvc.hideSpinner()})}else this.createApplication()},b.prototype.createApplication=function(){var a=this;this.suitabilityQuestionsSvc.createApplication(!1).then(function(b){a.setSliderQuestionResponse(b),a.processQuestions(b)})},b.prototype.setMyPortfolioText=function(){var a=this.contextSvc.isIIP();return this.initPlanView(),this.$scope.isPlanRecommendationPage?a?this.contextSvc.getLocalResourceContentById("Plan_Recommendation_Page-Text-AS"):this.contextSvc.getLocalResourceContentById("Plan_Recommendation_Page-Text"):a?this.contextSvc.getLocalResourceContentById("Plan_Confirmation_Page-Text-AS"):null==this.enrollmentCommonSvc.getAccountFlow()?this.contextSvc.getLocalResourceContentById("Plan_Confirmation_Page-Text"):this.contextSvc.getLocalResourceContentById("Plan_Confirmation_Page-Joint-Text")},b.prototype.redrawModelChartOnResize=function(){var a=this,b=this;"planConfirmation"==this.$state.current.name&&null!=this.enrollmentCommonSvc.getAccountFlow()?this.suitabilityQuestionsSvc.getAnswers(this.enrollmentCommonSvc.getApplicationid()).then(function(){b.$timeout(function(){b.getInitialStrategies()},100)}).catch(function(){a.$rootScope.raiseMessage(a.contextSvc.appConfig.featureUnavailableMessage)}).finally(function(){}):this.$timeout(function(){b.getInitialStrategies()},100)},b.prototype.handleAssetSelectionChanged=function(a,b){if(a){this.$scope.assetOptions.selected||(this.$scope.assetOptions.selected={}),this.$scope.assetOptions.selected.level1=a.level1,this.$scope.assetOptions.selected.level2=a.level2,this.$scope.assetOptions.level=a.level1?1:0;var c=this.findAsset(a);c&&(this.$scope.assetOptions.mobileAssets=c.items),a.level2&&b&&this.clickAssetInTable(a)}else this.$scope.assetOptions.selected=null,this.$scope.assetOptions.mobileAssets=this.$scope.assetOptions.assets;this.$scope.$$phase||this.$scope.$apply()},b.prototype.clickAssetInTable=function(a){var b=this.$scope.idFromAssetLevelNames(a.level1,a.level2),c=angular.element("#"+b);c&&c.trigger("click")},b.prototype.findAsset=function(a){if(a&&a.level1){var b=_.find(this.$scope.assetOptions.assets,function(b){return b.level1===a.level1});if(b){if(a.level2){var c=_.find(b.items,function(b){return b.level2===a.level2});if(c)return c}return b}}return null},b.prototype.getInitialStrategies=function(){var a=this.$location.path();if("/planRecommendation"==a&&this.enrollmentCommonSvc.getSelectRiskProfile())return this.enrollmentCommonSvc.getRiskProfileType()?this.getStrategies(this.enrollmentCommonSvc.getSelectRiskProfile(),this.enrollmentCommonSvc.getRiskProfileType()):this.getStrategies(this.enrollmentCommonSvc.getSelectRiskProfile());if(parseInt(this.enrollmentCommonSvc.getRiskProfile()))return this.enrollmentCommonSvc.getRiskProfileType()?this.getStrategies(this.enrollmentCommonSvc.getRiskProfile(),this.enrollmentCommonSvc.getRiskProfileType()):null!=this.enrollmentCommonSvc.getSelectRiskProfile()?this.getStrategies(this.enrollmentCommonSvc.getSelectRiskProfile()):this.getStrategies(this.enrollmentCommonSvc.getRiskProfile());if(!this.enrollmentCommonSvc.getCapacityNumber()||!this.enrollmentCommonSvc.getWillingnessNumber())return this.getStrategies(1);
if(this.redrawModelChart(this.enrollmentCommonSvc.getWillingnessNumber(),this.enrollmentCommonSvc.getCapacityNumber()),parseInt(this.enrollmentCommonSvc.getRiskProfile())){var b=parseInt(this.enrollmentCommonSvc.getRiskProfile()),c=b;this.enrollmentCommonSvc.getCalculatedRiskProfile()&&(c=parseInt(this.enrollmentCommonSvc.getCalculatedRiskProfile()));var d=1==c?c:c-1,e=12==c?c:c+1;this.$scope.sliderValues={InitialInvestment:5e3,Contribution:0,MoneyReturn:5,FinalRecommendation:b,MinFinalRecommendation:d,MaxFinalRecommendation:e,SliderPosition:"slider-position-"+c}}},b.prototype.initializeScopeThemeAttributes=function(){var a=this.contextSvc.customization.getThemeName(),b=this.contextSvc.customization.getPaletteColor("AssetBorder"),c=this.contextSvc.customization.getPaletteColor("PChart");this.$scope.borderColor=b,this.$scope.textColor="theme02"==a?"#000":"#fff",this.$scope.lineColor=c,this.$scope.background="theme02"==a?"#fafafa":"#303f50",this.$scope.gridLine="theme02"==a?"#f0f0f0":"#000",this.$scope.labelBackground="theme02"==a?"#dcdcdc":"rgba(0, 0, 0, 0.7)",this.$scope.gradient="theme02"==a?"#fff":"rgba(2,0,0,0)"},b.prototype.goToPlanRecommendation=function(){this.$state.go("planRecommendation")},b.prototype.planSignUp=function(){"planRecommendation"==this.$state.current.name?(this.enrollmentCommonSvc.saveTempRiskProfile(this.enrollmentCommonSvc.getRiskProfile()),"updateProfile"==this.suitabilityQuestionsSvc.getReferrer()?this.$scope.planButtonText="Update Profile":this.$scope.planButtonText="Sign Up"):null==this.suitabilityQuestionsSvc.getReferrer()||"updateProfile"!=this.suitabilityQuestionsSvc.getReferrer()&&"goalFlow"!=this.suitabilityQuestionsSvc.getReferrer()?this.$scope.planButtonText="Next":this.$scope.planButtonText="Update Profile","planConfirmation"==this.$state.current.name&&null!=this.enrollmentCommonSvc.getAccountFlow()&&(this.$scope.modelDisclosureJoint=!0)},b.prototype.loadQuestion=function(){var a=this;if("behavioralQuestions"==this.$state.current.name){if(this.$scope.groupID||(this.$scope.groupID="1"),this.$location.path()!="/behavioralQuestions/GroupID"+this.$scope.groupID)return void this.$location.path("/behavioralQuestions/GroupID"+this.$scope.groupID);"updateProfile"==this.suitabilityQuestionsSvc.getReferrer()&&this.redrawModelChart(this.enrollmentCommonSvc.getWillingnessNumber(),this.enrollmentCommonSvc.getCapacityNumber()),this.getQuestions().then(function(b){a.setSliderQuestionResponse(b)})}},b.prototype.setSliderQuestionResponse=function(a){var b=a[7].QuestionTextArray&&a[7].QuestionTextArray[0].QuestionText?a[7].QuestionTextArray[0].QuestionText.split("___"):a[7].QuestionText.split("___");this.$scope.riskProfileQuestion8am=b[0],this.$scope.riskProfileQuestion8old=b[1];var c=[];c=this.$rootScope.session.isLoggedIn?a[8].QuestionTextArray&&a[8].QuestionTextArray[0]&&this.suitabilityQuestionsSvc.isUnfunded()?a[8].QuestionTextArray[0].QuestionText.split("_____"):a[8].QuestionTextArray&&a[8].QuestionTextArray[1]&&!this.suitabilityQuestionsSvc.isUnfunded()?"updateProfile"==this.suitabilityQuestionsSvc.getReferrer()?["Current balance"]:a[8].QuestionTextArray[1].QuestionText.split("_____"):a[8].QuestionTextArray&&a[8].QuestionTextArray[0]?a[8].QuestionTextArray[0].QuestionText.split("_____"):a[8].QuestionText.split("_____"):a[8].QuestionTextArray&&a[8].QuestionTextArray[0]?a[8].QuestionTextArray[0].QuestionText.split("_____"):a[8].QuestionText.split("_____"),this.$scope.riskProfileQuesiton9=c[0];var d=a[9].QuestionTextArray&&a[9].QuestionTextArray[0].QuestionText?a[9].QuestionTextArray[0].QuestionText.split("____"):a[9].QuestionText.split("____");this.$scope.riskProfilequestion10b=d[0],this.$scope.riskProfilequestion10a=d[1];var e=a[10].QuestionTextArray&&a[10].QuestionTextArray[0].QuestionText?a[10].QuestionTextArray[0].QuestionText.split("___"):a[10].QuestionText.split("___");this.$scope.riskProfilequestion11c=e[0],this.$scope.riskProfilequestion11m=e[1],this.$scope.isTwoPartQuestion12=!0;var f,g=!1;if(a[11].QuestionTextArray){g=this.isIncomeGoal();var h=g?"Income":"Savings",i=a[11].QuestionTextArray.map(function(a){return a.Goal}).indexOf(h);f=a[11].QuestionTextArray[i]}else f=a[11];if(f){var j=f.QuestionText.split("____");this.$scope.riskProfileQuestion12for=j[0]}var k;if(this.$rootScope.isSIP&&(this.$scope.isProfileUpdateFlag?(k=a[12].QuestionTextArray[0].QuestionText.split("___"),this.$scope.riskProfileQuestion13a=k[0],this.$scope.riskProfileQuestion13b=k[1]):0==this.$scope.viewSuggestedWithdrawal?(k=a[12].QuestionTextArray[0].QuestionText.split("___"),this.$scope.riskProfileQuestion13a=k[0],this.$scope.riskProfileQuestion13b=k[1]):(k=a[12].QuestionTextArray[1].QuestionText.split("___"),this.$scope.riskProfileQuestion13a=k[0],this.$scope.riskProfileQuestion13b=k[1])),null!=this.enrollmentCommonSvc.getCompoundGrowthAge()?this.$scope.compoundGrowthAge=this.enrollmentCommonSvc.getCompoundGrowthAge():this.$scope.compoundGrowthAge=Number(a[7].SliderDefaults[0]),null!=this.enrollmentCommonSvc.getCompoundGrowthannualContribution()?this.$scope.compoundGrowthannualContribution=this.enrollmentCommonSvc.getCompoundGrowthannualContribution():this.$scope.compoundGrowthannualContribution=Number(a[10].SliderDefaults[0]),this.enrollmentCommonSvc.getStartingYearsOfYears()){var l=this.enrollmentCommonSvc.getStartingYearsOfYears();if(l){var m=l.split(",");this.$scope.startingYearsOfYearsValue=[m[0].toString(),m[1].toString()]}else g?this.$scope.startingYearsOfYearsValue=[0,a[11].SliderDefaults[0].toString()]:this.$scope.startingYearsOfYearsValue=[a[11].SliderDefaults[0].toString(),a[11].SliderDefaults[1].toString()];this.$scope.sliderInYear=m[0],this.$scope.sliderForYear=m[1]+" years"}else if(g){this.$scope.startingYearsOfYearsValue=[0,a[11].SliderDefaults[0]],this.$scope.sliderInYear=0;var n=Number(a[11].SliderDefaults[0]),o=1==n?" year":" years";this.$scope.sliderForYear=n+o}else{this.$scope.startingYearsOfYearsValue=a[11].SliderDefaults,this.$scope.sliderInYear=a[11].SliderDefaults[0];var n=Number(a[11].SliderDefaults[0]),o=1==n?" year":" years";this.$scope.sliderForYear=n+o}null!=this.enrollmentCommonSvc.getInvestmentFluctuatingValue()?this.$scope.investmentFluctuatingValue=Number(this.enrollmentCommonSvc.getInvestmentFluctuatingValue()):this.$scope.investmentFluctuatingValue=10,this.enrollmentCommonSvc.saveInitialCompoundGrowthstartingValue(Number(this.getActiveAccountBalance().replace(/\$|,/g,"")));var p;if(this.$scope.hideInitialInvestment){p=Number(this.getActiveAccountBalance().replace(/\$|,/g,"")),this.$scope.investmentFlag=!1,this.$scope.sliderSuccessFlag=!1,this.enrollmentCommonSvc.saveCompoundGrowthstartingValue(p);var q;if(null!=this.enrollmentCommonSvc.getLastRiskResponse(9)&&null!=this.enrollmentCommonSvc.getGrowthstartingValueWeightage()){var r=JSON.parse(this.enrollmentCommonSvc.getLastRiskResponse(9));Number(r.lastWeightage)!=Number(this.enrollmentCommonSvc.getGrowthstartingValueWeightage())&&(q=Number(this.enrollmentCommonSvc.getCapacityNumber())-Number(r.lastWeightage),q+=Number(this.enrollmentCommonSvc.getGrowthstartingValueWeightage()),this.enrollmentCommonSvc.capacityNumber(q),r.lastWeightage=this.enrollmentCommonSvc.getGrowthstartingValueWeightage(),this.enrollmentCommonSvc.saveLastRiskModel(9,r))}this.enrollmentCommonSvc.saveGrowthstartingValueWeightage(p>25e3?10:5)}else null!=this.enrollmentCommonSvc.getCompoundGrowthstartingValue()?(p=Number(this.enrollmentCommonSvc.getCompoundGrowthstartingValue()),this.$scope.initialInvestmentValue=this.enrollmentCommonSvc.getCompoundGrowthstartingValue(),p<5e3?(this.$scope.investmentFlag=!0,this.$scope.sliderSuccessFlag=!0,this.$scope.investmentInputError="A $5,000 minimum investment is required to open an account."):p>999999999&&(this.$scope.investmentFlag=!0,this.$scope.sliderSuccessFlag=!0,this.$scope.investmentInputError="Initial investment must be less than $1,000,000,000.")):(p=Number(a[8].SliderDefaults[0]),this.$scope.initialInvestmentValue=Number(a[8].SliderDefaults[0]));this.setInvestmentFluctuationRange(p,this.$scope.investmentFluctuatingValue);var s=a[13].QuestionTextArray&&a[13].QuestionTextArray.length>0&&a[13].QuestionTextArray[0].QuestionText?a[13].QuestionTextArray[0].QuestionText.split("___"):a[13].QuestionText.split("___");this.$scope.riskProfileQuesiton14=s[0];var t;null!=this.enrollmentCommonSvc.getOneTimeContributionAmount()?(this.$scope.oneTimeContribution=Number(this.enrollmentCommonSvc.getOneTimeContributionAmount()),t=Number(this.enrollmentCommonSvc.getOneTimeContributionAmount())):(this.$scope.oneTimeContribution=0,t=0),t>999999999?(this.$scope.oneTimeContributionSliderFlag=!0,this.$scope.sliderSuccessFlag=!0,this.$scope.oneTimeContributionInputError="One time contribution must be less than $1,000,000,000."):(this.$scope.oneTimeContributionSliderFlag=!1,this.$scope.sliderSuccessFlag=!1)},b.prototype.riskProfileMisMatch=function(){var a=this.suitabilityQuestionsSvc.riskProfileFinalCalculation();return(Number(this.enrollmentCommonSvc.getWillingnessNumber())!=a.Willingness||Number(this.enrollmentCommonSvc.getCapacityNumber())!=a.Capacity)&&(a&&a.Willingness&&Number(this.enrollmentCommonSvc.getWillingnessNumber())!=a.Willingness&&(console.log("session willingness"+this.enrollmentCommonSvc.getWillingnessNumber()+"actual willingess"+a.Willingness),console.log("Resetting session willingness"+this.enrollmentCommonSvc.getWillingnessNumber()+"to actual willingess"+a.Willingness),this.enrollmentCommonSvc.willingnessNumber(a.Willingness)),a&&a.Capacity&&Number(this.enrollmentCommonSvc.getCapacityNumber())!=a.Capacity&&(console.log("session Capacity"+this.enrollmentCommonSvc.getCapacityNumber()+"actual Capacity"+a.Capacity),console.log("Resetting session Capacity"+this.enrollmentCommonSvc.getCapacityNumber()+" to actual Capacity"+a.Capacity),this.enrollmentCommonSvc.capacityNumber(a.Capacity)),!1)},b.prototype.init=function(){if(this.$scope.accountInterface={},null!=this.enrollmentCommonSvc.intAccountInterface()&&(this.$scope.accountInterface=this.enrollmentCommonSvc.intAccountInterface(),this.$scope.accountInterface.State=this.enrollmentCommonSvc.getstate()),"updateProfile"==this.suitabilityQuestionsSvc.getReferrer()){if(this.enrollmentCommonSvc.getAccountFlow()){var a=JSON.parse(this.enrollmentCommonSvc.getAllAddress());a&&a.State&&(this.$scope.accountInterface.State=a.State)}var b=this.suitabilityQuestionsSvc.getAddressState();b&&(this.$scope.accountInterface.State=this.suitabilityQuestionsSvc.getAddressState())}var c=this.enrollmentCommonSvc.getLastquestionID();null!=c&&void 0!=c?(this.$scope.questionId=c-1,this.$scope.groupID=c):(this.$scope.questionId=0,this.$scope.groupID=1,this.enrollmentCommonSvc.removeChartValue()),8==this.$scope.groupID?this.$scope.isCompoundGrowthDisplayed=!0:this.$scope.isCompoundGrowthDisplayed=!1,this.$scope.chartData={stockPercent:70,bondPercent:30},this.$scope.stockPercent=this.$scope.chartData.stockPercent,this.$scope.bondPercent=this.$scope.chartData.bondPercent,this.$scope.isBigWeb=!this.contextSvc.device.isNative(),this.$scope.ageFormatter=function(a){return a+" years"},this.$scope.ageFormatterMore=function(a){return a+" years or more"},this.$scope.ageRangeFormatter=function(a){return"1"==a?a+" years":a+" year"};var d=this;this.$scope.$on("$locationChangeStart",function(a,b,c){var e=d.$location.path();if(e.indexOf("/behavioralQuestions")!=-1&&"/behavioralQuestions/GroupID"+d.enrollmentCommonSvc.getLastquestionID()!=d.$location.url()){var f,g=b.split("GroupID"),h=c.split("GroupID"),i=g[1],j=h[1];if(Number(i)<Number(j)){f=null!=d.enrollmentCommonSvc.getLastRikModel(d.$scope.questionId)?d.enrollmentCommonSvc.getLastRikModel(d.$scope.questionId):d.enrollmentCommonSvc.getLastRikModel(d.$scope.questionId-1);var k=JSON.parse(f);null!=k&&(null!=k.lastQuestionId&&d.enrollmentCommonSvc.lastQuestionId(k.lastQuestionId),d.$scope.questionId=k.indexAction,d.$scope.groupID=d.$location.search().GroupID)}else Number(i)>Number(j)&&(d.enrollmentCommonSvc.lastQuestionId(i),d.$scope.questionId=i,d.$scope.groupID=i)}if(c.indexOf("GroupID")!=-1&&(b.indexOf("accountopen")!=-1||b.indexOf("setup")!=-1||b.indexOf("planRecommendation")!=-1)){for(var l,m=7,n=!1,o=1;o<=m;o++){var p=d.enrollmentCommonSvc.GetQuestionRiskModel(o);if(null!=p){var q=JSON.parse(p),r=q.SelectedAnswers[0].AnswerId,s=o-1,t=d.enrollmentNextQuestion(r,s);void 0!=d.$scope.questions&&null==d.enrollmentCommonSvc.GetQuestionRiskModel(t)&&Number(t)<8&&(n=!0,l=t)}}d.enrollmentMissingAnswerModel(n,l)}}),null!=this.enrollmentCommonSvc.getCompoundGrowthstartingValue()&&(this.enrollmentCommonSvc.getCompoundGrowthstartingValue()>=1e4&&this.enrollmentCommonSvc.getCompoundGrowthstartingValue()<1e5?(this.$scope.sliderInvestmentRule=!0,this.$scope.sliderInvestmentRuleUpdate=!1):this.enrollmentCommonSvc.getCompoundGrowthstartingValue()>=1e5?(this.$scope.sliderInvestmentRule=!1,this.$scope.sliderInvestmentRuleUpdate=!0):(this.$scope.sliderInvestmentRule=!1,this.$scope.sliderInvestmentRuleUpdate=!1),this.enrollmentCommonSvc.getCompoundGrowthstartingValue()>=2e5?this.$scope.formatCurrencyMoreFlag=!0:this.$scope.formatCurrencyMoreFlag=!1),null!=this.enrollmentCommonSvc.getCompoundGrowthannualContribution()&&(this.enrollmentCommonSvc.getCompoundGrowthannualContribution()>=5e3?this.$scope.sliderContributeRule=!0:this.$scope.sliderContributeRule=!1,this.enrollmentCommonSvc.getCompoundGrowthannualContribution()>=1e4?this.$scope.sliderContributeCurrencyFlag=!0:this.$scope.sliderContributeCurrencyFlag=!1),null!=this.enrollmentCommonSvc.getAccountFlow()&&(this.$scope.newCustomerBack=!0)},b.prototype.initModelAssignments=function(){this.$scope.modelAssignments={},this.$scope.modelAssignments[10]=[1,2,3,3,4,5,5,6,7,8],this.$scope.modelAssignments[20]=[1,2,3,4,4,5,5,6,7,8],this.$scope.modelAssignments[30]=[1,2,3,4,4,5,6,6,8,9],this.$scope.modelAssignments[40]=[1,2,3,4,4,5,6,7,8,9],this.$scope.modelAssignments[50]=[1,2,3,4,4,6,6,7,8,9],this.$scope.modelAssignments[60]=[1,2,4,4,5,6,7,7,9,10],this.$scope.modelAssignments[70]=[1,2,4,5,5,6,7,8,10,11],this.$scope.modelAssignments[80]=[1,2,4,5,5,6,8,9,10,11],this.$scope.modelAssignments[90]=[1,3,4,5,6,7,8,10,11,12],this.$scope.modelAssignments[100]=[1,3,5,5,6,7,9,10,12,12],this.$scope.incomeModelAssignments={},this.$scope.incomeModelAssignments[10]=[1,1,2,2,2,3,3,3],this.$scope.incomeModelAssignments[20]=[1,1,2,2,2,3,3,3],this.$scope.incomeModelAssignments[30]=[1,1,2,2,2,3,3,3],this.$scope.incomeModelAssignments[40]=[1,1,2,2,2,3,3],this.$scope.incomeModelAssignments[50]=[1,1,2,2,3,3,3],this.$scope.incomeModelAssignments[60]=[1,1,2,2,3,3],this.$scope.incomeModelAssignments[70]=[1,1,3,3,3,3],this.$scope.incomeModelAssignments[80]=[1,1,3,3,3,3],this.$scope.incomeModelAssignments[90]=[1,2,3,3,3],this.$scope.incomeModelAssignments[100]=[1,2,3,3,3]},b.prototype.redrawModelChart=function(a,b){b<0&&(b=0),a=a<=10?10:a>10&&a<=20?20:a>20&&a<=30?30:a>30&&a<=40?40:a>40&&a<=50?50:a>50&&a<=60?60:a>60&&a<=70?70:a>70&&a<=80?80:a>80&&a<=90?90:a>90?100:10,b<=10&&(b=0),b>10&&b<=20&&(b=1),b>20&&b<=30&&(b=2),b>30&&b<=40&&(b=3),b>40&&b<=50&&(b=4),b>50&&b<=60&&(b=5),b>60&&b<=70&&(b=6),b>70&&b<=80&&(b=7),b>80&&b<=90&&(b=8),b>90&&(b=9);var c;if(this.enrollmentCommonSvc.getRiskProfileType()&&"Mercury - Income"==this.enrollmentCommonSvc.getRiskProfileType()||"Mercury - Muni Income"==this.enrollmentCommonSvc.getRiskProfileType())c=this.$scope.incomeModelAssignments[a];else{c=this.$scope.modelAssignments[a];var d=c[b];this.enrollmentCommonSvc.saveCalculatedRiskProfile(d)}var e=c[b];this.enrollmentCommonSvc.saveRiskProfile(e),(this.enrollmentCommonSvc.getRiskProfileType()&&"Mercury - Income"==this.enrollmentCommonSvc.getRiskProfileType()||"Mercury - Muni Income"==this.enrollmentCommonSvc.getRiskProfileType()||"Mercury - Muni Return"==this.enrollmentCommonSvc.getRiskProfileType())&&this.setRiskProfileAdditionQuestion(),this.$scope.sliderPosition="slider-position-"+e,this.$scope.modelSeries=this.getStrategies(e)},b.prototype.redrawCompoundGrowthChart=function(a){if(this.isIncomeGoal())this.$scope.isCompoundGrowthDisplayed=!1;else{var b={lineColor:this.$scope.lineColor,gradient:this.$scope.gradient,background:this.$scope.background,borderColor:this.$scope.borderColor,textColor:this.$scope.textColor,labelBackground:this.$scope.labelBackground},c=this.suitabilityQuestionsSvc.redrawCompoundGrowthChart(a,this.$scope.highGrowthRate,this.$scope.lowGrowthRate,b);this.$scope.performanceChartSeries=c.performanceChartSeries,this.$scope.performanceChartOption=c.performanceChartOptions}},b.prototype.getGoalType=function(){return this.isIncomeGoal()?2:1},b.prototype.redrawGoalChart=function(){var a=this;this.$timeout(function(){if(a.$scope.isGoalsChartDisplayed&&!angular.isUndefined(a.$scope.goalDetails)){a.readSlidersForGoalChart();var b;1==a.$scope.isProfileUpdateFlag&&1==a.firstTimeUpdateProfile?(b=1!=a.$scope.isProfileUpdateFlag&&a.$scope.viewSuggestedWithdrawal,a.firstTimeUpdateProfile=!1):b=1!=a.$scope.isProfileUpdateFlag&&a.$scope.viewSuggestedWithdrawal,a.hgGoalService.isIncomeModel(a.$scope.goalDetails.type)?(a.firstIncomesimulation=!0,a.hgGoalService.redrawGoalChart(!1,2,a.$scope.goalDetails,!0,!1,b,a.firstIncomesimulation)):a.hgGoalService.redrawGoalChart(!1,1,a.$scope.goalDetails,!0,!1,b)}},100).then(function(){if(a.$scope.isSipIncomeGoal&&a.$scope.isLargeScreen){if(a.$scope.goalDetails&&a.$scope.goalDetails.goalChartOptions&&a.$scope.goalDetails.goalChartOptions.chartOverlays&&a.$scope.goalDetails.goalChartOptions.chartOverlays.length>0&&void 0!=a.$scope.goalDetails.goalChartOptions.chartOverlays[0]&&a.$scope.goalDetails.goalChartOptions.chartOverlays[0].model&&a.$scope.goalDetails.goalChartOptions.chartOverlays[0].model.line2&&(a.$scope.projectedIncomeWithdrawalAmount=a.$scope.goalDetails.goalChartOptions.chartOverlays[0].model.line2,a.$scope.viewSuggestedWithdrawal&&a.$scope.questions&&a.$scope.sliderStop(13)),a.getAccountPerformanceData(),null!=a.$scope.goalDetails&&null!=a.$scope.goalDetails.chart&&null!=a.$scope.goalDetails.chart.simulationRecommendations){var b;if(b=a.$scope.goalDetails.chart.simulationRecommendations.oneTimeDeposit,!a.$scope.isProfileUpdateFlag){null!=a.enrollmentCommonSvc.getCompoundGrowthstartingValue()?a.enrollmentCommonSvc.getCompoundGrowthstartingValue():5e3;b=b}b=Math.ceil(b/1e3),b*=1e3,a.$scope.oneTimeContributionSuggestionAmount=a.$filter("currency")(b,"$",0),a.$scope.calculateSuggestion=!1}if(a.$scope.goalDetails&&a.$scope.goalDetails.chart&&a.$scope.goalDetails.chart.simulationSeries){var c,d=a.$scope.goalDetails.chart.simulationSeries.mid;angular.forEach(d,function(a,b){a>0&&(c=b)});var e=c&&c>1?c-1:1;null!=a.enrollmentCommonSvc.getCompoundGrowthnumberOfYears()&&Number(a.enrollmentCommonSvc.getCompoundGrowthnumberOfYears())<=5&&Number(e)>=12&&(e=Math.round(Number(e)/12)),a.$scope.adjustYearsText=e>1?e+" years":e+" year"}}})},b.prototype.saveProspectDetails=function(){var a=this.$location.path();("/planRecommendation"==a||a.lastIndexOf("/behavioralQuestions")>=0)&&this.suitabilityQuestionsSvc.saveAnswers()},b.prototype.selectionChanged=function(a){return 0==a.Answers.indexOf(a.response)?(this.$scope.bondPercent+=10,this.$scope.stockPercent-=10):(this.$scope.bondPercent-=10,this.$scope.stockPercent+=10),this.$scope.bondPercent>100||this.$scope.stockPercent<0?(this.$scope.bondPercent=100,void(this.$scope.stockPercent=0)):this.$scope.stockPercent>100||this.$scope.bondPercent<0?(this.$scope.bondPercent=0,void(this.$scope.stockPercent=100)):(this.$scope.assetAllocationConfig=this.buildChart(null),!0)},b.prototype.sliderStop=function(a){if(8==this.$scope.groupID){var b,c,d,e,f,g,h,i,j=this.$scope.questions[a-1].weight,k=this.enrollmentCommonSvc.getCompoundGrowthstartingValue(),l=this;angular.forEach(this.$scope.questions[a-1],function(a,i){if("QuestionType"==i&&(e=a),"QuestionText"==i&&(b=a),"QuestionId"==i&&(h=a,g=a),"Answers"==i){if("9"==h){if(angular.isUndefined(j))if(l.$scope.hideInitialInvestment)j=parseFloat(l.getActiveAccountBalance().replace(/[^0-9-.]/g,""));else{var m=l.$scope.questions[8].Answers.filter(function(a){return a.IsSelected});j=1===m.length?m[0].SelectedValue:l.$scope.questions[8].SliderDefaults[0]}Number(j)>25e3?(c=a[1].Weightage,d=a[1].AnswerText,f=a[1].AnswerId):(c=a[0].Weightage,d=a[0].AnswerText,f=a[0].AnswerId)}if("10"==h&&("10"==j?(c=a[0].Weightage,d=a[0].AnswerText,f=a[0].AnswerId):"20"==j?(c=a[1].Weightage,d=a[1].AnswerText,f=a[1].AnswerId):"30"==j?(c=a[2].Weightage,d=a[2].AnswerText,f=a[2].AnswerId):"40"==j?(c=a[3].Weightage,d=a[3].AnswerText,f=a[3].AnswerId):"50"==j?(c=a[4].Weightage,d=a[4].AnswerText,f=a[4].AnswerId):"60"==j?(c=a[5].Weightage,d=a[5].AnswerText,f=a[5].AnswerId):"70"==j&&(c=a[6].Weightage,d=a[6].AnswerText,f=a[6].AnswerId)),!l.isIncomeGoal()&&"11"==h){var n;n=null!=k?100*Number(j)/k:100*Number(j)/5e3,n<"10"?(c=a[0].Weightage,d=a[0].AnswerText,f=a[0].AnswerId):(c=a[1].Weightage,d=a[1].AnswerText,f=a[1].AnswerId)}if("12"==h){var o,p=l.isIncomeGoal();p?(o=j,o>=1&&o<=4?(c=a[4].Weightage,d=a[4].AnswerText,f=a[4].AnswerId):o>=5&&o<=9?(c=a[5].Weightage,d=a[5].AnswerText,f=a[5].AnswerId):o>=10&&o<=19?(c=a[6].Weightage,d=a[6].AnswerText,f=a[6].AnswerId):o>19&&(c=a[7].Weightage,d=a[7].AnswerText,f=a[7].AnswerId)):j<2?(c=a[0].Weightage,d=a[0].AnswerText,f=a[0].AnswerId):j>=2&&j<=5?(c=a[1].Weightage,d=a[1].AnswerText,f=a[1].AnswerId):j>=6&&j<=10?(c=a[2].Weightage,d=a[2].AnswerText,f=a[2].AnswerId):j>10&&(c=a[3].Weightage,d=a[3].AnswerText,f=a[3].AnswerId)}if("13"==h&&l.$scope.isSipIncomeGoal&&l.$rootScope.deviceInfo.isLargeScreen()){if(angular.isUndefined(j))if(l.$scope.viewSuggestedWithdrawal)j=Number(l.$scope.projectedIncomeWithdrawalAmount.toString().replace(/[^0-9\.]+/g,""));else{var m=l.$scope.questions[12].Answers.filter(function(a){return a.IsSelected});j=1===m.length?m[0].SelectedValue:l.$scope.questions[12].SliderDefaults[0]}d=a[0].AnswerText,f=a[0].AnswerId}if("14"==h&&l.$scope.isIncomeUpdateOnBigweb()&&l.$scope.hideInitialInvestment){if(angular.isUndefined(j)){var m=l.$scope.questions[13].Answers.filter(function(a){return a.IsSelected});j=1===m.length?m[0].SelectedValue:l.$scope.questions[13].SliderDefaults[0]}d=a[0].AnswerText,f=a[0].AnswerId}}}),this.$scope.sliderModel={},this.$scope.sliderModel.SelectedAnswers=[];var m;if(void 0==f&&(m=this.enrollmentCommonSvc.getCompoundGrowthAge()),""==f)switch(a){case 13:m=this.$scope.viewSuggestedWithdrawal?Number(l.$scope.projectedIncomeWithdrawalAmount.toString().replace(/[^0-9\.]+/g,"")):this.enrollmentCommonSvc.getCompoundGrowthIncomeWithdrawal();break;case 14:m=this.enrollmentCommonSvc.getOneTimeContributionAmount()}if(12==a)if(this.isIncomeGoal())this.$scope.sliderModel.SelectedAnswers.push({AnswerId:f,SelectedValue:"0"},{AnswerId:f,SelectedValue:j.toString()});else{j[1]-j[0];this.$scope.sliderModel.SelectedAnswers.push({AnswerId:f,SelectedValue:j.toString()},{AnswerId:f,SelectedValue:"0"})}else{var n={AnswerId:f,AnswerText:m,SelectedValue:j.toString()};this.$scope.sliderModel.SelectedAnswers.push(n)}this.$scope.sliderModel.QuestionId=a.toString();Number(this.$scope.questionId)+Number(1);if(this.$scope.lastRiskModel={},this.$scope.lastRiskModel.lastQuestionId=a.toString(),this.$scope.lastRiskModel.lastQuestionType=e,null!=c){if("9"==g)if(null==this.enrollmentCommonSvc.getGrowthstartingValueWeightage())this.enrollmentCommonSvc.saveGrowthstartingValueWeightage(c),this.$scope.lastRiskModel.lastWeightage=c,this.enrollmentCommonSvc.capacityNumber(Number(this.enrollmentCommonSvc.getCapacityNumber())+c);else{if(this.enrollmentCommonSvc.getGrowthstartingValueWeightage()!=c){var o=Number(this.enrollmentCommonSvc.getCapacityNumber())-Number(this.enrollmentCommonSvc.getGrowthstartingValueWeightage())+c;this.enrollmentCommonSvc.capacityNumber(o),this.enrollmentCommonSvc.saveGrowthstartingValueWeightage(c)}this.$scope.lastRiskModel.lastWeightage=c}if("10"==g&&(null==this.enrollmentCommonSvc.getInvestmentFluctuating()?(this.enrollmentCommonSvc.saveInvestmentFluctuating(c),this.$scope.lastRiskModel.lastWeightage=c,"W"==e?this.enrollmentCommonSvc.willingnessNumber(Number(this.enrollmentCommonSvc.getWillingnessNumber())+c):this.enrollmentCommonSvc.capacityNumber(Number(this.enrollmentCommonSvc.getCapacityNumber())+c)):(this.enrollmentCommonSvc.getInvestmentFluctuating()!=c&&("W"==e?(this.enrollmentCommonSvc.willingnessNumber(Number(this.enrollmentCommonSvc.getWillingnessNumber())-Number(this.enrollmentCommonSvc.getInvestmentFluctuating())),this.enrollmentCommonSvc.willingnessNumber(Number(this.enrollmentCommonSvc.getWillingnessNumber())+c)):(this.enrollmentCommonSvc.capacityNumber(Number(this.enrollmentCommonSvc.getCapacityNumber())-Number(this.enrollmentCommonSvc.getInvestmentFluctuating())),this.enrollmentCommonSvc.capacityNumber(Number(this.enrollmentCommonSvc.getCapacityNumber())+c)),this.enrollmentCommonSvc.saveInvestmentFluctuating(c)),this.$scope.lastRiskModel.lastWeightage=c)),this.isIncomeGoal()||"11"!=g||(null==this.enrollmentCommonSvc.getGrowthannualContributionWeightage()?(this.enrollmentCommonSvc.saveGrowthannualContributionWeightage(c),this.$scope.lastRiskModel.lastWeightage=c,"W"==e?this.enrollmentCommonSvc.willingnessNumber(Number(this.enrollmentCommonSvc.getWillingnessNumber())+c):this.enrollmentCommonSvc.capacityNumber(Number(this.enrollmentCommonSvc.getCapacityNumber())+c)):(this.enrollmentCommonSvc.getGrowthannualContributionWeightage()!=c&&("W"==e?(this.enrollmentCommonSvc.willingnessNumber(Number(this.enrollmentCommonSvc.getWillingnessNumber())-Number(this.enrollmentCommonSvc.getGrowthannualContributionWeightage())),this.enrollmentCommonSvc.willingnessNumber(Number(this.enrollmentCommonSvc.getWillingnessNumber())+c)):(this.enrollmentCommonSvc.capacityNumber(Number(this.enrollmentCommonSvc.getCapacityNumber())-Number(this.enrollmentCommonSvc.getGrowthannualContributionWeightage())),this.enrollmentCommonSvc.capacityNumber(Number(this.enrollmentCommonSvc.getCapacityNumber())+c)),this.enrollmentCommonSvc.saveGrowthannualContributionWeightage(c)),this.$scope.lastRiskModel.lastWeightage=c)),"12"==g&&angular.isDefined(c)&&null!=c){angular.isDefined(i)&&(c+=i);var p=this.enrollmentCommonSvc.getLastRiskResponse(12);if(p){var q=angular.fromJson(p);if(q){var r=Number(q.lastWeightage);this.enrollmentCommonSvc.capacityNumber(Number(this.enrollmentCommonSvc.getCapacityNumber())-r)}}this.enrollmentCommonSvc.capacityNumber(Number(this.enrollmentCommonSvc.getCapacityNumber())+c),this.enrollmentCommonSvc.saveGrowthannualStartingInYearsWeightage(c),this.$scope.lastRiskModel.lastWeightage=c}}if(this.$scope.lastRiskModel.indexAction=this.$scope.questionId,this.isIncomeGoal()&&11!=a?(this.enrollmentCommonSvc.saveLastRiskModel(Number(a),this.$scope.lastRiskModel),this.enrollmentCommonSvc.savesliderRiskModel(a,this.$scope.sliderModel)):this.isIncomeGoal()||(this.enrollmentCommonSvc.saveLastRiskModel(Number(a),this.$scope.lastRiskModel),this.enrollmentCommonSvc.savesliderRiskModel(a,this.$scope.sliderModel)),this.redrawModelChart(this.enrollmentCommonSvc.getWillingnessNumber(),this.enrollmentCommonSvc.getCapacityNumber()),10==a){var s;s=null!=this.enrollmentCommonSvc.getCompoundGrowthstartingValue()?Number(this.enrollmentCommonSvc.getCompoundGrowthstartingValue()):5e3,this.setInvestmentFluctuationRange(s,j)}if("9"==g&&this.$scope.questions[8].weight){var t;t=null!=this.enrollmentCommonSvc.getCompoundGrowthannualContribution()?this.enrollmentCommonSvc.getCompoundGrowthannualContribution():"0",this.sliderQuestionContributation(t,this.$scope.questions[10])}9==a||10==a||12==a||14==a?this.redrawGoalChart():this.hgGoalService.isIncomeModel(this.getGoalType())||11!=a||this.redrawGoalChart()}},b.prototype.businessRule=function(a){var b=this.$scope.questions[a-1].weight;switch(a){case 8:this.setupQ8(Number(b));break;case 9:this.setupQ9(Number(b));break;case 10:this.setupQ10(Number(b));break;case 11:this.setupQ11(Number(b));break;case 12:this.setupQ12(b);break;case 14:this.setupQ14(Number(b))}this.$scope.sliderSuccessFlag=this.$scope.ageFlag||this.$scope.investmentFlag||this.$scope.contributionFlag||this.$scope.sliderFluctuationRuleFlag||this.$scope.sliderAgeRule||this.$scope.isSipIncomeGoal&&this.$scope.isLargeScreen&&this.$scope.incomeWithdrawalErrorFlag},b.prototype.setupQ8=function(a){this.$scope.ageFormatterMoreFlag="100"==a;var b=5;if(null!=this.enrollmentCommonSvc.getStartingYearsOfYears()){var c=this.enrollmentCommonSvc.getStartingYearsOfYears().split(",");b=Number(c[1])}if(b+=Number(a),null!=this.enrollmentCommonSvc.GetQuestionRiskModel(1)){var d=JSON.parse(this.enrollmentCommonSvc.GetQuestionRiskModel(1));"1"==d.SelectedAnswers[0].AnswerId&&b<=40&&a>17?(this.$scope.sliderAgeRule=!0,this.$scope.sliderSuccessFlag=!0):(this.$scope.sliderAgeRule=!1,this.$scope.sliderSuccessFlag=!1)}},b.prototype.setupQ9=function(a){a>=1e4&&a<1e5?(this.$scope.sliderInvestmentRule=!0,this.$scope.sliderInvestmentRuleUpdate=!1):a>=1e5?(this.$scope.sliderInvestmentRule=!1,this.$scope.sliderInvestmentRuleUpdate=!0):(this.$scope.sliderInvestmentRule=!1,this.$scope.sliderInvestmentRuleUpdate=!1),2e5==a?this.$scope.formatCurrencyMoreFlag=!0:this.$scope.formatCurrencyMoreFlag=!1},b.prototype.setupQ10=function(a){if(null!=this.enrollmentCommonSvc.getLastRiskResponse(5)){var b=JSON.parse(this.enrollmentCommonSvc.getLastRiskResponse(5));a>=30&&0==b.lastWeightage?(this.$scope.sliderFluctuationRuleFlag=!0,this.$scope.sliderSuccessFlag=!0,this.$scope.sliderFluctuationRuleText="Are you sure?  You indicated this amount of fluctuation caused you to sell in the past.  Please narrow the range of fluctuation to continue."):(this.$scope.sliderFluctuationRuleFlag=!1,this.$scope.sliderSuccessFlag=!1,this.$scope.sliderFluctuationRuleText="")}if(null!=this.enrollmentCommonSvc.getLastRiskResponse(6)){var b=JSON.parse(this.enrollmentCommonSvc.getLastRiskResponse(6));a>=30&&0==b.lastWeightage?(this.$scope.sliderFluctuationRuleFlag=!0,this.$scope.sliderSuccessFlag=!0,this.$scope.sliderFluctuationRuleText="Are you sure?  You indicated this amount of fluctuation would cause you to sell.  Please narrow the range of fluctuation to continue."):(this.$scope.sliderFluctuationRuleFlag=!1,this.$scope.sliderSuccessFlag=!1,this.$scope.sliderFluctuationRuleText="")}},b.prototype.setupQ11=function(a){a>=5e3?this.$scope.sliderContributeRule=!0:this.$scope.sliderContributeRule=!1,1e4==a?this.$scope.sliderContributeCurrencyFlag=!0:this.$scope.sliderContributeCurrencyFlag=!1},b.prototype.setupQ12=function(a){var b;if(b=null!=this.enrollmentCommonSvc.getCompoundGrowthAge()?this.enrollmentCommonSvc.getCompoundGrowthAge():Number(this.$scope.questions[7].SliderDefaults[0]),null!=this.enrollmentCommonSvc.GetQuestionRiskModel(1)){var c=JSON.parse(this.enrollmentCommonSvc.GetQuestionRiskModel(1)),d=Number(b)+Number(a);"1"==c.SelectedAnswers[0].AnswerId&&d<=40&&b>17?(this.$scope.sliderAgeRule=!0,this.$scope.sliderSuccessFlag=!0):(this.$scope.sliderAgeRule=!1,this.$scope.sliderSuccessFlag=!1)}},b.prototype.setupQ14=function(a){2e5==a?this.$scope.oneTimeContributionFormatCurrencyFlag=!0:this.$scope.oneTimeContributionFormatCurrencyFlag=!1},b.prototype.getSelectedAnswer=function(a){var b=JSON.parse(this.enrollmentCommonSvc.getQuestion()),c=_.find(b,function(b){return b.QuestionId==a});return c&&c.SelectedAnswers[0]?a+"_"+c.SelectedAnswers[0].AnswerId:""},b.prototype.sliderFunction=function(a){var b=this;if(8==this.$scope.groupID){var c,d,e,f,g,h,i,j,k,l=(this.$scope.questions[a-1].weight,this.isIncomeGoal());if(angular.forEach(this.$scope.questions[a-1],function(a,m){"QuestionText"==m&&(c=a),"QuestionId"==m&&(h=a),"weight"==m&&(8==h&&(g=a),9==h&&(d=a),10==h&&(j=a),12==h&&(b.changeSuggestion(),l?(e=a,i=[0,a]):(e=a,i=[a,0])),11==h&&(f=a),14==h&&(k=a))}),null!=g&&(g>"0"&&g<"100"?(this.enrollmentCommonSvc.saveCompoundGrowthAge(g),this.$scope.compoundGrowthAge=g,this.$scope.compoundGrowthAgeInput=g,angular.element("#sliderCompoundGrowthAge").val(g),this.$scope.ageFlag=!1,this.$scope.sliderSuccessFlag=!1):this.$scope.compoundGrowthAgeInput>=1&&this.$scope.compoundGrowthAgeInput<=100&&(this.enrollmentCommonSvc.saveCompoundGrowthAge(g),
this.$scope.compoundGrowthAge=g,this.$scope.compoundGrowthAgeInput=g,angular.element("#sliderCompoundGrowthAge").val(g),this.$scope.ageFlag=!1,this.$scope.sliderSuccessFlag=!1)),null!=d){void 0==this.$scope.sliderInputInvestment&&(this.$scope.sliderInputInvestment=0);var m=Number(this.$scope.sliderInputInvestment.toString().replace(/[^0-9\.]+/g,""));d>"5000"&&d<"200000"?(this.enrollmentCommonSvc.saveCompoundGrowthstartingValue(d),this.$scope.sliderInputInvestment=this.$filter("currency")(d,void 0,0),$("#sliderInvestment").val(this.$filter("currency")(d,void 0,0)),this.$scope.investmentFlag=!1,this.$scope.sliderSuccessFlag=!1):m>=5e3&&m<=2e5&&(this.enrollmentCommonSvc.saveCompoundGrowthstartingValue(d),this.$scope.sliderInputInvestment=this.$filter("currency")(d,void 0,0),$("#sliderInvestment").val(this.$filter("currency")(d,void 0,0)),this.$scope.investmentFlag=!1,this.$scope.sliderSuccessFlag=!1)}if(null!=e&&(this.changeSuggestion(),this.enrollmentCommonSvc.saveCompoundGrowthnumberOfYears(e)),null!=f){f>"0"&&(this.$scope.contributionFlag=!1,this.$scope.sliderSuccessFlag=!1),this.$scope.sliderInputContribute||(this.$scope.sliderInputContribute="");var n=Number(this.$scope.sliderInputContribute.toString().replace(/[^0-9\.]+/g,""));f>"0"&&f<"10000"?(this.enrollmentCommonSvc.saveCompoundGrowthannualContribution(f),this.$scope.sliderInputContribute=this.$filter("currency")(f,void 0,0),$("#sliderContribute").val(this.$filter("currency")(f,void 0,0))):n>=0&&n<=1e4&&(this.enrollmentCommonSvc.saveCompoundGrowthannualContribution(f),this.$scope.sliderInputContribute=this.$filter("currency")(f,void 0,0),$("#sliderContribute").val(this.$filter("currency")(f,void 0,0)))}if(null!=i&&void 0!=i&&(this.enrollmentCommonSvc.saveStartingYearsOfYears(i),this.$scope.startingYearsOfYearsValue=i,this.$scope.sliderInYear=i[0],this.$scope.sliderForYear=i[1]+" years"),null!=j&&void 0!=j&&(this.enrollmentCommonSvc.saveInvestmentFluctuatingValue(j),this.$scope.investmentFluctuatingValue=j),null!=k){this.$scope.goalDetails&&this.$scope.goalDetails.oneTimeContribution&&(this.$scope.goalDetails.oneTimeContribution.amount=k),void 0==this.$scope.sliderInputOneTimeContribution&&(this.$scope.sliderInputOneTimeContribution="$0");var o=Number(this.$scope.sliderInputOneTimeContribution.toString().replace(/[^0-9\.]+/g,""));(k>=0&&k<2e5||o>=0&&o<=2e5)&&(this.enrollmentCommonSvc.saveOneTimeContributionAmount(k),this.$scope.sliderInputOneTimeContribution=this.$filter("currency")(k,void 0,0),$("#sliderOneTimeContribution").val(this.$filter("currency")(k,void 0,0)),this.$scope.oneTimeContributionSliderFlag=!1,this.$scope.sliderSuccessFlag=!1)}void 0==d&&(d=null!=this.enrollmentCommonSvc.getCompoundGrowthstartingValue()?Number(this.enrollmentCommonSvc.getCompoundGrowthstartingValue()):5e3),void 0==e&&(e=null!=this.enrollmentCommonSvc.getCompoundGrowthnumberOfYears()?Number(this.enrollmentCommonSvc.getCompoundGrowthnumberOfYears()):25),void 0==f&&(f=null!=this.enrollmentCommonSvc.getCompoundGrowthannualContribution()?Number(this.enrollmentCommonSvc.getCompoundGrowthannualContribution()):0),void 0==g&&(g=null!=this.enrollmentCommonSvc.getCompoundGrowthAge()?Number(this.enrollmentCommonSvc.getCompoundGrowthAge()):40),this.$scope.defaultCompoundGrowth={startingValue:d,numberOfYears:e,annualContribution:12*f,age:g},d>"5000"&&d<"200000"?this.$scope.initialInvestmentValue=d:this.$scope.sliderInputInvestment>=5e3&&this.$scope.sliderInputInvestment<=2e5&&(this.$scope.initialInvestmentValue=this.$scope.sliderInputInvestment),void 0==k&&(k=null!=this.enrollmentCommonSvc.getOneTimeContributionAmount()?Number(this.enrollmentCommonSvc.getOneTimeContributionAmount()):0),l||(this.$scope.isCompoundGrowthDisplayed=!0),9==a&&this.$scope.sliderInputInvestment>=5e3&&this.$scope.sliderInputInvestment<=2e5?this.redrawCompoundGrowthChart(this.$scope.defaultCompoundGrowth):8!=a&&10!=a&&11!=a&&12!=a||this.redrawCompoundGrowthChart(this.$scope.defaultCompoundGrowth);var p;p=null!=this.enrollmentCommonSvc.getInvestmentFluctuatingValue()?Number(this.enrollmentCommonSvc.getInvestmentFluctuatingValue()):10,d>"5000"&&d<"200000"&&this.setInvestmentFluctuationRange(d,p),1==this.$scope.ageFlag||1==this.$scope.investmentFlag||1==this.$scope.contributionFlag||1==this.$scope.sliderFluctuationRuleFlag||1==this.$scope.sliderAgeRule||1==this.$scope.oneTimeContributionSliderFlag?this.$scope.sliderSuccessFlag=!0:this.$scope.sliderSuccessFlag=!1}},b.prototype.planChangeBusinessRule=function(){this.$scope.assetOptions.selected=!1;var a=this.$scope.sliderValues.FinalRecommendation;this.enrollmentCommonSvc.saveSelectedRiskProfile(a),this.getStrategies(a,this.enrollmentCommonSvc.getRiskProfileType()),this.enrollmentCommonSvc.getRiskProfile()!=this.enrollmentCommonSvc.getSelectRiskProfile()&&angular.element("#guardRail").trigger("click")},b.prototype.questionsBackStart=function(){this.enrollmentCommonSvc.lastQuestionId(1),this.$state.go("behavioralQuestions")},b.prototype.closeGuardRail=function(){angular.element("#guardRail").trigger("click")},b.prototype.nextquestion=function(){var a=this;if(0==this.suitabilityQuestionsSvc.checkProgramKeyInSession())return!1;if(1==this.$scope.groupID){var b=this.isIncomeGoal();this.$scope.isSipIncomeGoal!=b&&this.isSipAccount()?(this.$scope.isSipIncomeGoal=b,this.enrollmentCommonSvc.resetQuestion12SliderValues()):this.$scope.isIIPIncomeGoal!=b&&this.contextSvc.isIIP()&&this.enrollmentCommonSvc.resetQuestion12SliderValues()}$("html, body").animate({scrollTop:0},200);var c;if(void 0!=this.$scope.questions[this.$scope.questionId].weight&&this.$scope.questions[this.$scope.questionId].weight.indexOf("_")>-1){var d=this.$scope.questions[this.$scope.questionId].weight.split("_");this.$scope.questionModel.QuestionId=d[0],this.$scope.questionModel.answerId=d[1],c=parseInt(d[1])}else c=parseInt("1");var e;if(angular.forEach(this.$scope.questions[this.$scope.questionId],function(a,b){"NextAction"==b&&(e="1"!=a.length?a[c-1].QuestionId:a[0].QuestionId)}),1==this.$scope.groupID&&c&&5!==c&&(this.enrollmentCommonSvc.getRiskProfileType()&&this.enrollmentCommonSvc.removeRiskProfileType(),this.enrollmentCommonSvc.getRiskProfileforAdditonalQuestions()&&this.enrollmentCommonSvc.removeRiskProfileforAdditonalQuestions(),this.enrollmentCommonSvc.getCompoundGrowthIncomeWithdrawal()&&this.enrollmentCommonSvc.removeMonthlyIncomeWithdrawal(),this.enrollmentCommonSvc.getOneTimeContributionAmount()&&this.enrollmentCommonSvc.removeOneTimeContributionAmount()),7==this.$scope.groupID&&(this.enrollmentCommonSvc.saveCapacityBeforeSlider(this.enrollmentCommonSvc.getCapacityNumber()),this.enrollmentCommonSvc.saveWillingnessBeforeSlider(this.enrollmentCommonSvc.getWillingnessNumber())),8==this.$scope.groupID){this.$scope.isCompoundGrowthDisplayed=!0,this.$scope.defaultCompoundGrowth={startingValue:5e3,numberOfYears:25,annualContribution:0,age:40};var f=this;this.$timeout(function(){f.redrawCompoundGrowthChart(f.$scope.defaultCompoundGrowth)},10)}else this.$scope.isCompoundGrowthDisplayed=!1;"updateProfile"!=this.suitabilityQuestionsSvc.getReferrer()&&this.suitabilityQuestionsSvc.saveAnswers(this.$scope.groupID).then(function(){}).catch(function(){a.$rootScope.raiseMessage(a.contextSvc.appConfig.featureUnavailableMessage)}),this.isIncomeGoal()&&(null!=this.enrollmentCommonSvc.getLastRiskResponse(11)&&this.enrollmentCommonSvc.removeSliderRisResponse11(),null!=this.enrollmentCommonSvc.getSliderRiskModel11()&&this.enrollmentCommonSvc.removeSliderRiskModel11(),null!=this.enrollmentCommonSvc.getCompoundGrowthannualContribution()&&this.enrollmentCommonSvc.removeCompoundGrowthannualContribution()),this.$scope.groupID<8&&(this.$scope.questionId=e-1,this.$scope.groupID=e,this.enrollmentCommonSvc.lastQuestionId(e),null!=this.$scope.groupID&&void 0!=this.$scope.groupID?this.$location.path("/behavioralQuestions/GroupID"+this.$scope.groupID):this.$location.path("/behavioralQuestions/GroupID1")),this.enrollmentCommonSvc.willingnessNumber(this.suitabilityQuestionsSvc.riskProfileFinalCalculation().Willingness),this.enrollmentCommonSvc.capacityNumber(this.suitabilityQuestionsSvc.riskProfileFinalCalculation().Capacity)},b.prototype.jumpPlanRecommendation=function(){var a=this,b=this;if("updateProfile"==this.suitabilityQuestionsSvc.getReferrer())this.enrollmentCommonSvc.saveRiskProfileType("Mercury - Return"),this.enrollmentCommonSvc.saveRiskProfileforAdditonalQuestions(""),null!=this.enrollmentCommonSvc.getOldCalculatedRiskProfile()&&this.enrollmentCommonSvc.getOldCalculatedRiskProfile()!=this.enrollmentCommonSvc.getCalculatedRiskProfile()&&this.enrollmentCommonSvc.removeSelectRiskProfile();else if(null!=this.enrollmentCommonSvc.getSelectRiskProfile()){var c=Number(this.enrollmentCommonSvc.getSelectRiskProfile()),d=Number(this.enrollmentCommonSvc.getCalculatedRiskProfile());c!=d+1&&c!=d-1&&this.enrollmentCommonSvc.removeSelectRiskProfile()}"updateProfile"!=this.suitabilityQuestionsSvc.getReferrer()?this.suitabilityQuestionsSvc.saveAnswers(this.$scope.groupID).then(function(){b.$state.go("planRecommendation")}).catch(function(){a.$rootScope.raiseMessage(a.contextSvc.appConfig.featureUnavailableMessage)}):this.$state.go("planRecommendation")},b.prototype.jumpAccountType=function(){var a=this,b=this;if("updateProfile"==this.suitabilityQuestionsSvc.getReferrer())this.enrollmentCommonSvc.saveRiskProfileType("Mercury - Return"),this.enrollmentCommonSvc.saveRiskProfileforAdditonalQuestions(""),null!=this.enrollmentCommonSvc.getOldCalculatedRiskProfile()&&this.enrollmentCommonSvc.getOldCalculatedRiskProfile()!=this.enrollmentCommonSvc.getCalculatedRiskProfile()&&this.enrollmentCommonSvc.removeSelectRiskProfile();else if(null!=this.enrollmentCommonSvc.getSelectRiskProfile()){var c=Number(this.enrollmentCommonSvc.getSelectRiskProfile()),d=Number(this.enrollmentCommonSvc.getCalculatedRiskProfile());c!=d+1&&c!=d-1&&this.enrollmentCommonSvc.removeSelectRiskProfile()}if("updateProfile"!=this.suitabilityQuestionsSvc.getReferrer())this.suitabilityQuestionsSvc.saveAnswers(this.$scope.groupID,this.$scope.goalDetails).then(function(){b.$state.go("accountopen.accountType")}).catch(function(){a.$rootScope.raiseMessage(a.contextSvc.appConfig.featureUnavailableMessage)});else{if(this.getAccoutType(),null!=this.enrollmentCommonSvc.getRiskProfileInfo()){var e=JSON.parse(this.enrollmentCommonSvc.getRiskProfileInfo());this.$scope.accountInterface.isIncomeEligible=e.isIncomeEligible,this.$scope.accountInterface.isMuniEligible=e.isMuniEligible,this.$scope.accountInterface.taxOffer=e.taxOffer,this.$scope.accountInterface.SpouseSocialSecurityNumber=e.SpouseSocialSecurityNumber,this.$scope.accountInterface.SpouseLastName=e.SpouseLastName,this.$scope.accountInterface.SpouseDateOfBirth=e.SpouseDateOfBirth,this.$scope.accountInterface.incomeOffer=e.incomeOffer,this.$scope.accountInterface.muniOffer=e.muniOffer,this.enrollmentCommonSvc.iipCaliEligibilityCheck()&&("CA"==this.$scope.accountInterface.State?(this.$scope.accountInterface.isCalMuniEligible=e.isCalMuniEligible,this.$scope.accountInterface.californiaMunis=e.californiaMunis.toString()):(this.$scope.accountInterface.isCalMuniEligible=!1,this.$scope.accountInterface.californiaMunis="false")),this.$scope.accountInterface.californiaMunisNational="true"==this.$scope.accountInterface.californiaMunis?"false":e.muniOffer?"true":"false"}this.offerCheck(),void 0==this.$scope.offerFlagMuni&&void 0==this.$scope.offerFlagIncome||(void 0!=this.$scope.offerFlagIncome&&(this.$scope.accountInterface.isIncomeEligible=!0),void 0!=this.$scope.offerFlagMuni&&this.enrollmentCommonSvc.iipMuniEligibilityCheck()&&(this.$scope.accountInterface.isMuniEligible=!0)),this.enrollmentCommonSvc.saveAccountInterface(this.$scope.accountInterface),angular.isUndefined(this.$scope.offerFlagTax)&&angular.isUndefined(this.$scope.offerFlagMuni)&&angular.isUndefined(this.$scope.offerFlagIncome)?this.$state.go("planRecommendation"):this.$state.go("accountopen.addtOfferings")}},b.prototype.getAccoutType=function(){var a=JSON.parse(this.enrollmentCommonSvc.getAccountTypeInterface());a&&(this.$scope.accountInterface.accountType=a.accountType,this.$scope.accountInterface.accountSubType=a.accountSubType)},b.prototype.saveResponses=function(a){null!=this.enrollmentCommonSvc.getSelectRiskProfile()&&this.enrollmentCommonSvc.removeSelectRiskProfile(),3==this.$scope.questionId&&(null!=this.enrollmentCommonSvc.getLastRiskResponse(6)&&this.enrollmentCommonSvc.removeRiskResponse(6),null!=this.enrollmentCommonSvc.getLastRiskResponse(5)&&this.enrollmentCommonSvc.removeRiskResponse(5)),this.$rootScope.session.isLoggedIn||1!=this.$scope.groupID||"disabledLink"!=this.$rootScope.disabledLinkClass||(this.$rootScope.disabledLinkClass=""),this.$scope.questionModel={},this.$scope.questionModel.SelectedAnswers=[];var b;if(void 0!=this.$scope.questions[this.$scope.questionId].weight&&this.$scope.questions[this.$scope.questionId].weight.indexOf("_")>-1){var c=this.$scope.questions[this.$scope.questionId].weight.split("_"),d={AnswerId:c[1]};this.$scope.questionModel.SelectedAnswers.push(d),this.$scope.questionModel.QuestionId=c[0],b=parseInt(c[1])}else b=parseInt("1");if(1==this.$scope.groupID&&b&&5!==b&&null==this.enrollmentCommonSvc.getLastRiskResponse(11)){var e={};e.lastQuestionId="11",e.lastQuestionType="C",e.lastWeightage=Number(this.enrollmentCommonSvc.getGrowthannualContributionWeightage()),e.indexAction=10,this.enrollmentCommonSvc.saveLastRiskModel(11,e)}var f,g,h,i;angular.forEach(this.$scope.questions[this.$scope.questionId],function(a,c){"QuestionType"==c&&(g=a),"Answers"==c&&(f=a[b-1].AnswerText,h=a[b-1].Weightage),"NextAction"==c&&(i="1"!=a.length?a[b-1].QuestionId:a[0].QuestionId)});var j=Number(this.$scope.questionId)+1;this.$scope.lastRiskModel={},this.$scope.lastRiskModel.lastQuestionId=j.toString(),this.$scope.lastRiskModel.lastQuestionType=g,"W"==g?this.$scope.lastRiskModel.lastWeightage=Number(h):this.$scope.lastRiskModel.lastWeightage=Number(h),this.$scope.lastRiskModel.indexAction=this.$scope.questionId,this.enrollmentCommonSvc.saveLastRiskModel(j,this.$scope.lastRiskModel),this.enrollmentCommonSvc.saveQuestion(this.$scope.questionModel),this.enrollmentCommonSvc.saveQuestionRiskModel(j,this.$scope.questionModel);var k=this.suitabilityQuestionsSvc.riskProfileFinalCalculation();this.enrollmentCommonSvc.willingnessNumber(k.Willingness),this.enrollmentCommonSvc.capacityNumber(k.Capacity);var l;a?"behavior"==a&&(l=this.$scope.behavioralQuestions):l=this.$scope.questions,this.redrawModelChart(this.enrollmentCommonSvc.getWillingnessNumber(),this.enrollmentCommonSvc.getCapacityNumber());var m,n,o,p,q,r;return m=null!=this.enrollmentCommonSvc.GetQuestionRiskModel(1)?this.enrollmentCommonSvc.GetQuestionRiskModel(1):"{}",n=null!=this.enrollmentCommonSvc.GetQuestionRiskModel(2)?","+this.enrollmentCommonSvc.GetQuestionRiskModel(2):",{}",o=null!=this.enrollmentCommonSvc.GetQuestionRiskModel(3)?","+this.enrollmentCommonSvc.GetQuestionRiskModel(3):",{}",p=null!=this.enrollmentCommonSvc.GetQuestionRiskModel(4)?","+this.enrollmentCommonSvc.GetQuestionRiskModel(4):",{}",q=null!=this.enrollmentCommonSvc.GetQuestionRiskModel(5)?","+this.enrollmentCommonSvc.GetQuestionRiskModel(5):null!=this.enrollmentCommonSvc.GetQuestionRiskModel(6)?","+this.enrollmentCommonSvc.GetQuestionRiskModel(6):",{}",r=null!=this.enrollmentCommonSvc.GetQuestionRiskModel(7)?","+this.enrollmentCommonSvc.GetQuestionRiskModel(7):",{}",this.enrollmentCommonSvc.saveJSONQuestion(m,n,o,p,q,r),!0},b.prototype.backQuestion=function(){$("html, body").animate({scrollTop:0},200);var a;a=null!=this.enrollmentCommonSvc.getLastRikModel(this.$scope.questionId)?this.enrollmentCommonSvc.getLastRikModel(this.$scope.questionId):this.enrollmentCommonSvc.getLastRikModel(this.$scope.questionId-1);var b=JSON.parse(a);1==this.$scope.groupID?(this.$rootScope.session.isLoggedIn&&this.$rootScope.accounts.length<=0&&this.$rootScope.session.logout(),"updateProfile"==this.suitabilityQuestionsSvc.getReferrer()||"newProfile"==this.suitabilityQuestionsSvc.getReferrer()||this.$rootScope.session.isLoggedIn?(this.suitabilityQuestionsSvc.removeReferrer(),this.suitabilityQuestionsSvc.removeUpdateProfile(),"updateProfile"==this.suitabilityQuestionsSvc.getReferrer()?this.$state.go("charts.accountSettings"):this.contextSvc.device.isNativeIOS()?this.hgCommonJs2nSvc.showMenu():this.$state.go("charts")):(this.enrollmentCommonSvc.removeChartValue(),this.$state.go("getStarted"))):(this.enrollmentCommonSvc.lastQuestionId(b.lastQuestionId),this.$scope.questionId=b.indexAction,this.$scope.groupID=b.lastQuestionId,null!=this.$scope.groupID&&void 0!=this.$scope.groupID?this.$location.path("/behavioralQuestions/GroupID"+this.$scope.groupID):this.$location.path("/behavioralQuestions/GroupID1")),8==this.$scope.groupID?this.$scope.isCompoundGrowthDisplayed=!0:this.$scope.isCompoundGrowthDisplayed=!1},b.prototype.getQuestions=function(){var a=this;this.contextSvc.showSpinner();var b=this.q.defer();if("updateProfile"==this.suitabilityQuestionsSvc.getReferrer()){var c=this.contextSvc.getMongoActiveAccount();this.suitabilityQuestionsSvc.getAnswers(null,c,!1).then(function(c){a.processQuestions(c.Questions),b.resolve(c.Questions)})}else this.suitabilityQuestionsSvc.createApplication().then(function(c){return 0==c.length?(a.suitabilityQuestionsSvc.raiseCommonErrorMsg(),!1):(a.processQuestions(c),void b.resolve(c))});return b.promise},b.prototype.processQuestions=function(a){var b=JSON.parse(this.enrollmentCommonSvc.getQuestion()),c=_.find(b,function(a){return 8==a.QuestionId});c&&c.SelectedAnswers[0]&&c.SelectedAnswers[0].AnswerId&&(a[7].SliderDefaults[0]=c.SelectedAnswers[0].AnswerId);var d;c=_.find(b,function(a){return 9==a.QuestionId}),c&&c.SelectedAnswers[0]&&c.SelectedAnswers[0].AnswerId&&(2==c.SelectedAnswers[0].AnswerId?(a[8].SliderDefaults[0]=25e3,d=25e3):(a[8].SliderDefaults[0]=5e3,d=5e3)),c=_.find(b,function(a){return 11==a.QuestionId}),c&&c.SelectedAnswers[0]&&c.SelectedAnswers[0].AnswerId&&(2==c.SelectedAnswers[0].AnswerId?a[10].SliderDefaults[0]=d/10:a[10].SliderDefaults[0]=0),c=_.find(b,function(a){return 12==a.QuestionId}),c&&c.SelectedAnswers[0]&&c.SelectedAnswers[0].AnswerId&&(1==c.SelectedAnswers[0].AnswerId?(a[11].SliderDefaults[0]=1,a[11].SliderDefaults[0]=1):2==c.SelectedAnswers[0].AnswerId?(a[11].SliderDefaults[0]=2,a[11].SliderDefaults[0]=2):3==c.SelectedAnswers[0].AnswerId?(a[11].SliderDefaults[0]=6,a[11].SliderDefaults[0]=6):4==c.SelectedAnswers[0].AnswerId&&(a[11].SliderDefaults[0]=25,a[11].SliderDefaults[0]=25)),this.$scope.questions=a},b.prototype.getStrategies=function(a,b){var c=this;this.contextSvc.showSpinner();var d=this.q.defer(),e=this.contextSvc.customization.getSchwabFirmId().toString(),f=this.contextSvc.customization.getProgramRefId();return this.strategiesSvc.getPortfolioModel(a,b,e,f).then(function(a){c.$scope.assetOptions.assets=a.assets,c.loadAssetChart(a),c.setCurrentAssetLabel(),c.$scope.modelSeries={},c.$scope.modelOptions.series[0].data={},c.$scope.assets=a.assets,c.$scope.partitionAssets=[];var b=0;_.each(c.$scope.assets,function(a){b++,b%2!==0?(0===c.$scope.partitionAssets.length&&c.$scope.partitionAssets.push([]),c.$scope.partitionAssets[0].push(a)):(1===c.$scope.partitionAssets.length&&c.$scope.partitionAssets.push([]),c.$scope.partitionAssets[1].push(a))}),d.resolve(a)}).catch(function(){c.$rootScope.raiseMessage(c.contextSvc.appConfig.featureUnavailableMessage),d.reject("getPortfolioModel failed.")}).finally(function(){c.contextSvc.hideSpinner()}),d.promise},b.prototype.loadAssetChart=function(a){var b=this,c=[],d=this.contextSvc.customization.getColorPalette();d?c=d:(d=this.contextSvc.customization.getColorPalette(),c=d?d:this.contextSvc.appConfig.colorPalette);var e=this.$location.path();if("/planRecommendation"==e||"/planConfirmation"==e){this.$scope.assetOptions.assets=a.assets,this.$scope.assetOptions.partitionedAssets=[],this.$scope.assetOptions.mobileAssets=a.assets;var f=["Stocks","Fixed Income","Commodities","Cash Investments","Cash"],g=[];_.each(f,function(a){var c=_.find(b.$scope.assetOptions.assets,function(b){return b.name===a});c&&g.push(c)});var h=0;_.each(g,function(a){var d=_.findWhere(c,{Key:a.name});a.displayStyle={"border-bottom-color":d?d.Value:"999"},a.legendStyle={color:d?d.Value:"999"},h%2==0&&b.$scope.assetOptions.partitionedAssets.push([]),b.$scope.assetOptions.partitionedAssets[b.$scope.assetOptions.partitionedAssets.length-1].push(a),h++});_.each(a.assets,function(a){a.name=a.name+" "+a.percentage+"%",_.each(a.items,function(a){a.colorNormalhex=b.getColor(c,a.level1),a.colorDeselectedhex=b.getColor(c,a.level1+" Unselected")})})}else{_.each(a.assets,function(a){a.items=[],a.items=[{level1:a.level1,level2:a.level1,level3:a.level1,name:a.name+" - "+a.percentage+"%",percentage:a.percentage,colorNormalhex:b.getColor(c,a.level1),colorDeselectedhex:b.getColor(c,a.level1+" Unselected")}]}),this.$scope.assetOptions.assets=a.assets}this.$scope.$broadcast("ASSET_CHART_ASSETS_CHANGED",a.assets)},b.prototype.setCurrentAssetLabel=function(){var a,b=this.enrollmentCommonSvc.getRiskProfile(),c=this.enrollmentCommonSvc.getOriginalCalculatedRiskProfile();!c||c<=0?a="noRiskProfile":b>c?a="isBefore":b<c&&(a="isAfter",3==c&&(a+=" position-3")),this.$scope.originalRiskPosition=a,this.$scope.originalRiskProfile="position-"+c},b.prototype.getColor=function(a,b){var c=_.findWhere(a,{Key:b});return c?c.Value:null},b.prototype.initPlanView=function(){var a=this.$location.path(),b="goalFlow"==this.suitabilityQuestionsSvc.getReferrer();"/planRecommendation"==a||b?this.$scope.isPlanRecommendationPage=!0:this.$scope.isPlanRecommendationPage=!1,this.$scope.isPlanView=!0,this.$scope.title=""},b.prototype.next=function(a){var b=this;if(!a){if(this.riskProfileMisMatch())return!1;a=this.$location.path();var c=this.suitabilityQuestionsSvc.getReferrer();switch(a){case"/planRecommendation":if(null==this.enrollmentCommonSvc.getRiskProfile())return this.suitabilityQuestionsSvc.raiseCommonErrorMsg(),!1;(this.enrollmentCommonSvc.getRiskProfileType()&&"Mercury - Income"==this.enrollmentCommonSvc.getRiskProfileType()||"Mercury - Muni Income"==this.enrollmentCommonSvc.getRiskProfileType()||"Mercury - Muni Return"==this.enrollmentCommonSvc.getRiskProfileType())&&this.setRiskProfileAdditionQuestion(),"updateProfile"==c?(this.$rootScope.isIIP&&this.enrollmentCommonSvc.performedUpdateProfile(!0),this.nextUpdateProfile()):this.suitabilityQuestionsSvc.saveAnswers(this.$scope.groupID,this.$scope.goalDetails).then(function(){1==b.$rootScope.session.isLoggedIn?b.$state.go("accountopen.profile"):b.$state.go("setup.newCustomer")}).catch(function(a){b.$rootScope.raiseMessage(b.contextSvc.appConfig.featureUnavailableMessage)}).finally(function(){b.contextSvc.hideSpinner()});break;case"/planConfirmation":if("updateProfile"==c){this.contextSvc.showSpinner();var d=this.suitabilityQuestionsSvc.saveAnswers();d.then(function(){b.$state.go("portfolioConfirmation")}),d.catch(function(a){b.$rootScope.raiseMessage(b.contextSvc.appConfig.featureUnavailableMessage),console.error("Submit failed. email"+a)}),d.finally(function(){b.contextSvc.hideSpinner()})}else if(null!=this.enrollmentCommonSvc.getAccountFlow()){var e=JSON.parse(this.enrollmentCommonSvc.getAllAddress());"LivingTrust"==e.accountType?this.$state.go("accountopen.livingtrustagreements"):"JointTenants"!=e.accountSubType&&"CommunityProperty"!=e.accountSubType&&"CommonTenants"!=e.accountSubType||this.$state.go("accountopen.agreements")}else if(null!=this.suitabilityQuestionsSvc.getReferrer()&&"goalFlow"==this.suitabilityQuestionsSvc.getReferrer()){this.contextSvc.showSpinner();var d=this.suitabilityQuestionsSvc.saveAnswers(null,this.$scope.goalDetails);d.then(function(){b.$state.go("portfolioConfirmation")}),d.catch(function(a){b.$rootScope.dismissMessage(b.contextSvc.appConfig.featureUnavailableMessage);var c=b.suitabilityQuestionsSvc.saveAnswers(null,b.$scope.goalDetails);c.then(function(){b.$state.go("portfolioConfirmation")}),c.catch(function(a){b.$rootScope.raiseMessage(b.contextSvc.appConfig.featureUnavailableMessage),console.error("Submit failed. email"+a)}),c.finally(function(){b.contextSvc.hideSpinner()})}),d.finally(function(){b.contextSvc.hideSpinner()})}else this.contextSvc.showSpinner(),this.suitabilityQuestionsSvc.saveAnswers().then(function(){"Single Trustee"==b.$scope.accountInterface.accountSubType||"Two Trustee"==b.$scope.accountInterface.accountSubType?b.$state.go("accountopen.livingtrustagreements"):b.$state.go("accountopen.agreements")}).catch(function(a){b.$rootScope.raiseMessage(b.contextSvc.appConfig.featureUnavailableMessage),console.error("Submit failed. email"+a)}).finally(function(){b.contextSvc.hideSpinner()});break;case"/portfolioConfirmation":if("goalFlow"==c)this.suitabilityQuestionsSvc.removeReferrer(),this.suitabilityQuestionsSvc.removeUpdateProfile(),this.$state.go("charts.goal.goalMain");else if("updateProfile"!=c||null==this.enrollmentCommonSvc.getOneTimeContributionAmount()&&null==this.enrollmentCommonSvc.getCompoundGrowthIncomeWithdrawal())this.suitabilityQuestionsSvc.removeReferrer(),this.suitabilityQuestionsSvc.removeUpdateProfile(),this.$state.go("charts");else{var f=null!==this.enrollmentCommonSvc.getOneTimeContributionAmount()?Number(this.enrollmentCommonSvc.getOneTimeContributionAmount()):0;this.$scope.isIncomeUpdateOnBigweb()&&f&&f>0?null!=this.enrollmentCommonSvc.getCompoundGrowthIncomeWithdrawal()?this.$rootScope.$emit("HG_MOVEMONEY_LAUNCH",{type:2,amount:f,isOnetime:!0,returnState:"planRecommendation"}):this.$rootScope.$emit("HG_MOVEMONEY_LAUNCH",{type:2,amount:f,isOnetime:!0,returnState:"charts"}):f||null==this.enrollmentCommonSvc.getCompoundGrowthIncomeWithdrawal()||this.navigateToRecurringMoveMoneyTransfer()}}}},b.prototype.nextUpdateProfile=function(){var a=this;if(null!=this.enrollmentCommonSvc.getRiskProfileInfo()){var b=JSON.parse(this.enrollmentCommonSvc.getRiskProfileInfo());this.$scope.accountInterface.isIncomeEligible=b.isIncomeEligible,this.$scope.accountInterface.isMuniEligible=b.isMuniEligible,this.$scope.accountInterface.taxOffer=b.taxOffer,this.$scope.accountInterface.SpouseSocialSecurityNumber=b.SpouseSocialSecurityNumber,this.$scope.accountInterface.SpouseLastName=b.SpouseLastName,this.$scope.accountInterface.SpouseDateOfBirth=b.SpouseDateOfBirth,this.$scope.accountInterface.incomeOffer=b.incomeOffer,this.$scope.accountInterface.muniOffer=b.muniOffer,this.enrollmentCommonSvc.iipCaliEligibilityCheck()&&("CA"==this.enrollmentCommonSvc.getstate()?(this.$scope.accountInterface.isCalMuniEligible=b.isCalMuniEligible,this.$scope.accountInterface.californiaMunis=b.californiaMunis.toString()):(this.$scope.accountInterface.isCalMuniEligible=!1,this.$scope.accountInterface.californiaMunis="false")),this.$scope.isSipIncomeGoal?null!=this.enrollmentCommonSvc.getCompoundGrowthIncomeWithdrawal()&&this.$scope.goalDetails&&null!=this.$scope.goalDetails&&null!=this.$scope.goalDetails.target&&(this.$scope.goalDetails.target.amount=Number(this.enrollmentCommonSvc.getCompoundGrowthIncomeWithdrawal())):this.isIncomeGoal()&&null!=this.enrollmentCommonSvc.getOneTimeContributionAmount()&&this.$scope.goalDetails&&null!=this.$scope.goalDetails&&null!=this.$scope.goalDetails.oneTimeContribution&&(this.$scope.goalDetails.oneTimeContribution.amount=Number(this.enrollmentCommonSvc.getOneTimeContributionAmount()))}this.suitabilityQuestionsSvc.saveAnswers(null,this.$scope.goalDetails).then(function(){a.$rootScope.isSIP&&a.hgGoalService.saveGoalParametersAdapter("refreshBalanceOnly",a.$scope.goalDetails),a.$state.go("portfolioConfirmation")}).catch(function(b){a.$rootScope.dismissMessage(a.contextSvc.appConfig.featureUnavailableMessage);var c=a.suitabilityQuestionsSvc.saveAnswers(null,a.$scope.goalDetails);c.then(function(){a.$state.go("portfolioConfirmation")}),c.catch(function(b){a.$rootScope.raiseMessage(a.contextSvc.appConfig.featureUnavailableMessage),console.error("Submit failed. email"+b)}),c.finally(function(){a.contextSvc.hideSpinner()})}).finally(function(){a.contextSvc.hideSpinner()})},b.prototype.previous=function(a){if(!a)if(a=this.$location.path(),"/planRecommendation"==a)this.enrollmentCommonSvc.removeSelectRiskProfile(),this.enrollmentCommonSvc.removeRiskProfileforAdditonalQuestions(),this.offerCheck(),"updateProfile"==this.suitabilityQuestionsSvc.getReferrer()?angular.isUndefined(this.$scope.offerFlagTax)&&angular.isUndefined(this.$scope.offerFlagMuni)&&angular.isUndefined(this.$scope.offerFlagIncome)?this.$state.go("behavioralQuestions",{GroupID:"GroupID"+this.$scope.groupID}):this.$state.go("accountopen.addtOfferings"):angular.isUndefined(this.$scope.offerFlagTax)&&angular.isUndefined(this.$scope.offerFlagMuni)&&angular.isUndefined(this.$scope.offerFlagIncome)?this.$state.go("accountopen.accountType"):this.$state.go("accountopen.addtOfferings");else if("/planConfirmation"==a)null!=this.enrollmentCommonSvc.getAccountFlow()?(null!=this.enrollmentCommonSvc.getRiskProfileType()&&this.enrollmentCommonSvc.removeRiskProfileType(),null!=this.enrollmentCommonSvc.getRiskProfileforAdditonalQuestions()&&this.enrollmentCommonSvc.removeRiskProfileforAdditonalQuestions(),this.$state.go("accountopen.regulatoryQuestions")):null!=this.suitabilityQuestionsSvc.getReferrer()&&"goalFlow"==this.suitabilityQuestionsSvc.getReferrer()?this.$state.go("charts.goal.goalMain"):(null!=this.enrollmentCommonSvc.getRiskProfileType()&&this.enrollmentCommonSvc.removeRiskProfileType(),null!=this.enrollmentCommonSvc.getRiskProfileforAdditonalQuestions()&&this.enrollmentCommonSvc.removeRiskProfileforAdditonalQuestions(),this.$state.go("accountopen.addtOfferings"));else if("/accountopen/addtOfferings"==a)if("updateProfile"==this.suitabilityQuestionsSvc.getReferrer()){this.enrollmentCommonSvc.saveRiskProfileType("Mercury - Return");var b=this.enrollmentCommonSvc.getSelectRiskProfile()?this.enrollmentCommonSvc.getSelectRiskProfile():this.enrollmentCommonSvc.getCalculatedRiskProfile()?this.enrollmentCommonSvc.getCalculatedRiskProfile():this.enrollmentCommonSvc.getRiskProfile();this.enrollmentCommonSvc.saveRiskProfile(b),this.$state.go("behavioralQuestions")}else this.$state.go("accountopen.accountType");else"/accountopen/accountType"==a&&this.$state.go("behavioralQuestions")},b.prototype.buildChart=function(a){var b=this.$scope.stockPercent,c=this.$scope.bondPercent;return{options:{chart:{type:"pie",backgroundColor:{linearGradient:[500,500,500,500],stops:[[0,"#435e7a"],[1,"#2c3947"]]},borderWidth:0,spacingTop:0,spacingBottom:0},title:{text:" "},tooltip:{enabled:!1,animation:!1,shadow:!1},plotOptions:{allowPointSelect:!1,pie:{animation:!1,shadow:!1,center:["50%","50%"],borderWidth:0}},exporting:{enabled:!1}},size:{height:300},series:[{name:"Portfolio Model",size:"90%",innerSize:"70%",dataLabels:{enabled:!1},allowPointSelect:!1,data:[["Equity",b],["Bond",c],["ETF",10],["CD",20],["INDEX",30],{name:"Others",y:0,dataLabels:{enabled:!1}}]}]}},b.prototype.sliderCustomIncrement=function(a){if("9"==a.QuestionId){var b;b=null!=this.enrollmentCommonSvc.getCompoundGrowthstartingValue()?Number(this.enrollmentCommonSvc.getCompoundGrowthstartingValue()):Number(a.MinRange),b<1e4?(this.$scope.sliderInvestmentRule=!1,this.$scope.sliderInvestmentRuleUpdate=!1,a.weight=b+Number(a.Interval)):b>=1e4&&b<1e5?(this.$scope.sliderInvestmentRule=!0,this.$scope.sliderInvestmentRuleUpdate=!1,a.weight=b+100):b>=1e5&&(this.$scope.sliderInvestmentRule=!1,this.$scope.sliderInvestmentRuleUpdate=!0,a.weight=b+500),2e5==b?this.$scope.formatCurrencyMoreFlag=!0:this.$scope.formatCurrencyMoreFlag=!1,this.$scope.sliderInputInvestment=a.weight}if("11"==a.QuestionId){var b;b=null!=this.enrollmentCommonSvc.getCompoundGrowthannualContribution()?Number(this.enrollmentCommonSvc.getCompoundGrowthannualContribution()):Number(a.MinRange),b<5e3?(this.$scope.sliderContributeRule=!1,a.weight=b+Number(a.Interval)):(this.$scope.sliderContributeRule=!0,a.weight=b+100),1e4==b?this.$scope.sliderContributeCurrencyFlag=!0:this.$scope.sliderContributeCurrencyFlag=!1,
this.$scope.sliderInputContribute=a.weight}},b.prototype.sliderCustomDecrement=function(a){if("9"==a.QuestionId){var b;b=null!=this.enrollmentCommonSvc.getCompoundGrowthstartingValue()?Number(this.enrollmentCommonSvc.getCompoundGrowthstartingValue()):Number(a.MinRange),b<1e4?(this.$scope.sliderInvestmentRule=!1,this.$scope.sliderInvestmentRuleUpdate=!1,a.weight=b-Number(a.Interval)):b>=1e4&&b<1e5?(this.$scope.sliderInvestmentRule=!0,this.$scope.sliderInvestmentRuleUpdate=!1,a.weight=b-100):b>=1e5&&(this.$scope.sliderInvestmentRule=!1,this.$scope.sliderInvestmentRuleUpdate=!0,a.weight=b-500),2e5==b?this.$scope.formatCurrencyMoreFlag=!0:this.$scope.formatCurrencyMoreFlag=!1,this.$scope.sliderInputInvestment=a.weight}if("11"==a.QuestionId){var b;b=null!=this.enrollmentCommonSvc.getCompoundGrowthannualContribution()?Number(this.enrollmentCommonSvc.getCompoundGrowthannualContribution()):Number(a.MinRange),b<5e3?(this.$scope.sliderContributeRule=!1,a.weight=b-Number(a.Interval)):(this.$scope.sliderContributeRule=!0,a.weight=b-100),1e4==b?this.$scope.sliderContributeCurrencyFlag=!0:this.$scope.sliderContributeCurrencyFlag=!1,this.$scope.sliderInputContribute=a.weight}},b.prototype.sliderDollarInit=function(a){if("8"==a.QuestionId){var b;b=null!=this.enrollmentCommonSvc.getCompoundGrowthAge()?this.enrollmentCommonSvc.getCompoundGrowthAge():a.SliderDefaults[0],this.$scope.compoundGrowthAgeInput=b,100==b&&(this.$scope.ageFormatterMoreFlag=!0),b>125&&(this.$scope.ageFlag=!0,this.$scope.sliderSuccessFlag=!0,this.$scope.ageInputError="Please enter your current age.");var c=Number(this.$scope.questions[11].SliderDefaults[0]);if(null!=this.enrollmentCommonSvc.getStartingYearsOfYears()){var d=this.enrollmentCommonSvc.getStartingYearsOfYears().split(",");c=Number(d[1])}if(c+=Number(b),null!=this.enrollmentCommonSvc.GetQuestionRiskModel(1)){var e=JSON.parse(this.enrollmentCommonSvc.GetQuestionRiskModel(1));"1"==e.SelectedAnswers[0].AnswerId&&c<=40&&b>17?(this.$scope.sliderAgeRule=!0,this.$scope.sliderSuccessFlag=!0):(this.$scope.sliderAgeRule=!1,this.$scope.sliderSuccessFlag=!1)}}if("9"==a.QuestionId){var f=this.enrollmentCommonSvc.getCompoundGrowthstartingValue(),g=null!=f?Number(f):void 0;this.$scope.sliderInputInvestment=this.$filter("currency")(g,void 0,0)}if("11"==a.QuestionId){var h;null!=this.enrollmentCommonSvc.getCompoundGrowthannualContribution()&&(h=Number(this.enrollmentCommonSvc.getCompoundGrowthannualContribution())),this.$scope.sliderInputContribute=this.$filter("currency")(h,void 0,0)}if("13"==a.QuestionId){var i=this.enrollmentCommonSvc.getCompoundGrowthIncomeWithdrawal(),j=null!=i?Number(i):void 0;this.$scope.withdrawalAmount=this.$filter("currency")(j,void 0,0)}if("14"==a.QuestionId){var k=this.enrollmentCommonSvc.getOneTimeContributionAmount(),l=null!=k?Number(k):void 0;this.$scope.sliderInputOneTimeContribution=this.$filter("currency")(l,void 0,0)}},b.prototype.sliderDollarInput=function(a,b){var c=(new RegExp("^[0-9]+(.[0-9]{1,2})?$"),new RegExp("^[0-9,$]"));if(a=a?a.toString():"","8"==b.QuestionId){if(!a||!a.match(new RegExp("^[0-9]+$")))return this.$scope.ageFlag=!0,this.$scope.sliderSuccessFlag=!0,this.$scope.ageInputError="Please enter valid age",!1;this.$scope.ageFlag=!1,this.$scope.sliderSuccessFlag=!1,a>=Number(b.MinRange)&&a<=Number(b.MaxRange)?(b.weight=Number(a),this.$scope.ageFlag=!1,this.$scope.sliderSuccessFlag=!1,this.$scope.compoundGrowthAgeInput=a,angular.element("#sliderCompoundGrowthAge").val(a),this.enrollmentCommonSvc.saveCompoundGrowthAge(a)):a<Number(b.MinRange)?(b.weight=Number(b.MinRange),this.$scope.compoundGrowthAgeInput=a,this.enrollmentCommonSvc.saveCompoundGrowthAge(a),this.$scope.ageFlag=!0,this.$scope.sliderSuccessFlag=!0,this.$scope.ageInputError="You must be at least 18 years old to open an account.",angular.element("#sliderCompoundGrowthAge").val(a)):a>Number(b.MaxRange)&&(b.weight=Number(b.MaxRange),this.$scope.compoundGrowthAgeInput=a,this.enrollmentCommonSvc.saveCompoundGrowthAge(a),angular.element("#sliderCompoundGrowthAge").val(a),a>125?(this.$scope.ageFlag=!0,this.$scope.sliderSuccessFlag=!0,this.$scope.ageInputError="Please enter your current age."):(this.$scope.ageFlag=!1,this.$scope.sliderSuccessFlag=!1)),this.businessRule(8),this.sliderStop(8)}if("9"==b.QuestionId){if(!a||!a.match(c))return this.$scope.investmentFlag=!0,this.$scope.sliderSuccessFlag=!0,this.$scope.investmentInputError="Please enter valid amount",!1;this.$scope.investmentFlag=!1,this.$scope.sliderSuccessFlag=!1,a=a.replace(/[^0-9\.]+/g,""),a>=Number(b.MinRange)&&a<=Number(b.MaxRange)?(b.weight=Number(a),this.$scope.investmentFlag=!1,this.$scope.sliderSuccessFlag=!1,this.$scope.sliderInputInvestment=this.$filter("currency")(a,void 0,0),$("#sliderInvestment").val(this.$filter("currency")(a,void 0,0))):a<Number(b.MinRange)?(b.weight=Number(b.MinRange),this.$scope.sliderInputInvestment=this.$filter("currency")(a,void 0,0),$("#sliderInvestment").val(this.$filter("currency")(a,void 0,0)),this.$scope.investmentFlag=!0,this.$scope.sliderSuccessFlag=!0,this.$scope.investmentInputError="A $5,000 minimum investment is required to open an account."):a>Number(b.MaxRange)&&(b.weight=Number(b.MaxRange),this.$scope.sliderInputInvestment=this.$filter("currency")(a,void 0,0),$("#sliderInvestment").val(this.$filter("currency")(a,void 0,0)),a>999999999?(this.$scope.investmentFlag=!0,this.$scope.sliderSuccessFlag=!0,this.$scope.investmentInputError="Initial investment must be less than $1,000,000,000."):(this.$scope.investmentFlag=!1,this.$scope.sliderSuccessFlag=!1)),a>=1e4&&a<1e5?(this.$scope.sliderInvestmentRule=!0,this.$scope.sliderInvestmentRuleUpdate=!1):a>=1e5?(this.$scope.sliderInvestmentRule=!1,this.$scope.sliderInvestmentRuleUpdate=!0):(this.$scope.sliderInvestmentRule=!1,this.$scope.sliderInvestmentRuleUpdate=!1),a==Number(b.MaxRange)||a>Number(b.MaxRange)?this.$scope.formatCurrencyMoreFlag=!0:this.$scope.formatCurrencyMoreFlag=!1,this.sliderStop(9),this.$scope.initialInvestmentValue=a,this.$scope.isIncomeUpdateOnBigweb()&&this.$scope.goalDetails&&(this.$scope.goalDetails.oneTimeContribution.amount=a),this.enrollmentCommonSvc.saveCompoundGrowthstartingValue(a);var d;d=null!=this.enrollmentCommonSvc.getInvestmentFluctuatingValue()?Number(this.enrollmentCommonSvc.getInvestmentFluctuatingValue()):10,this.setInvestmentFluctuationRange(Number(a),d);var e,f,g,h;e=Number(a),f=null!=this.enrollmentCommonSvc.getCompoundGrowthnumberOfYears()?Number(this.enrollmentCommonSvc.getCompoundGrowthnumberOfYears()):25,g=null!=this.enrollmentCommonSvc.getCompoundGrowthannualContribution()?Number(this.enrollmentCommonSvc.getCompoundGrowthannualContribution()):0,h=null!=this.enrollmentCommonSvc.getCompoundGrowthAge()?Number(this.enrollmentCommonSvc.getCompoundGrowthAge()):40,this.$scope.defaultCompoundGrowth={startingValue:e,numberOfYears:f,annualContribution:12*g,age:h},this.redrawCompoundGrowthChart(this.$scope.defaultCompoundGrowth);var i;i=null!=this.enrollmentCommonSvc.getCompoundGrowthannualContribution()?this.enrollmentCommonSvc.getCompoundGrowthannualContribution():"0",this.sliderQuestionContributation(i,this.$scope.questions[10]),1==this.$scope.investmentFlag&&(this.$scope.sliderSuccessFlag=!0)}"11"==b.QuestionId&&(this.sliderQuestionContributation(a,b),this.redrawGoalChart()),"13"==b.QuestionId&&this.$scope.isSipIncomeGoal&&!this.$scope.viewSuggestedWithdrawal&&(this.changeSuggestion(),this.sliderQuestionWithdrawal(a,b),this.sliderStop(13)),"14"==b.QuestionId&&this.isIncomeGoal()&&(this.sliderQuestionOneTimeContributionInput(a,b),this.sliderStop(14))},b.prototype.setGoalYear=function(){this.$scope.questions&&this.enrollmentCommonSvc.getCompoundGrowthnumberOfYears()&&(this.$scope.questions[11].weight=Number(this.enrollmentCommonSvc.getCompoundGrowthnumberOfYears()),this.sliderFunction(12),this.sliderStop(12))},b.prototype.setSuggestionAmount=function(){var a,b=this.$scope.oneTimeContributionSuggestionAmount;a=this.$scope.isIncomeUpdateOnBigweb()&&!this.suitabilityQuestionsSvc.isUnfunded()?this.$scope.questions[13]:this.$scope.questions[8],this.sliderDollarInput(b,a)},b.prototype.setSuggestionYear=function(){var a=this.$scope.adjustYearsText.split(" ");this.$scope.questions[11].weight=Number(a[0]),this.sliderFunction(12),this.sliderStop(12)},b.prototype.changeSuggestion=function(){if(this.enrollmentCommonSvc.isIncomeProfile()&&this.$scope.questions){this.$scope.calculateSuggestion=!this.$scope.calculateSuggestion;var a=Number(this.enrollmentCommonSvc.getCompoundGrowthIncomeWithdrawal()),b=Number(this.enrollmentCommonSvc.getCompoundGrowthnumberOfYears());a&&a!=this.$scope.questions[12].weight&&(this.$scope.calculateSuggestion=!0),b>0&&b!=this.$scope.questions[11].weight&&(this.$scope.calculateSuggestion=!0)}},b.prototype.sliderQuestionContributation=function(a,b){var c=new RegExp("^[0-9,$]");if(a||(a=""),!a.toString().match(c))return this.$scope.contributionFlag=!0,this.$scope.sliderSuccessFlag=!0,this.$scope.contributionInputError="Please enter valid amount",!1;if(this.$scope.contributionFlag=!1,this.$scope.sliderSuccessFlag=!1,a=a.replace(/[^0-9\.]+/g,""),a>=Number(b.MinRange)&&a<=Number(b.MaxRange)?(b.weight=Number(a),this.$scope.sliderInputContribute=this.$filter("currency")(a,void 0,0),$("#sliderContribute").val(this.$filter("currency")(a,void 0,0))):a<Number(b.MinRange)?(b.weight=Number(b.MinRange),this.$scope.sliderInputContribute=this.$filter("currency")(a,void 0,0),$("#sliderContribute").val(this.$filter("currency")(a,void 0,0))):a>Number(b.MaxRange)&&(b.weight=Number(b.MaxRange),this.$scope.sliderInputContribute=this.$filter("currency")(a,void 0,0),$("#sliderContribute").val(this.$filter("currency")(a,void 0,0))),a>=5e3?this.$scope.sliderContributeRule=!0:this.$scope.sliderContributeRule=!1,a==Number(b.MaxRange)||a>Number(b.MaxRange)?this.$scope.sliderContributeCurrencyFlag=!0:this.$scope.sliderContributeCurrencyFlag=!1,this.enrollmentCommonSvc.saveCompoundGrowthannualContribution(a),a>Number(b.MaxRange)){var d,e,f,g,h,i,j,k=a,l=this.enrollmentCommonSvc.getCompoundGrowthstartingValue();angular.forEach(this.$scope.questions[10],function(a,b){if("QuestionType"==b&&(g=a),"QuestionText"==b&&(d=a),"QuestionId"==b&&(j=a),"QuestionId"==b&&(i=a),"Answers"==b){var c;c=null!=l?100*k/l:100*k/5e3,c<10?(e=a[0].Weightage,f=a[0].AnswerText,h=a[0].AnswerId):(e=a[1].Weightage,f=a[1].AnswerText,h=a[1].AnswerId)}}),this.$scope.sliderModel={},this.$scope.sliderModel.SelectedAnswers=[];var m={AnswerId:h,AnswerText:f,SelectedValue:k.toString()};this.$scope.sliderModel.SelectedAnswers.push(m),this.$scope.sliderModel.QuestionId="11";this.$scope.lastRiskModel={},this.$scope.lastRiskModel.lastQuestionId="11",this.$scope.lastRiskModel.lastQuestionType=g,null==this.enrollmentCommonSvc.getGrowthannualContributionWeightage()?(this.enrollmentCommonSvc.saveGrowthannualContributionWeightage(e),this.$scope.lastRiskModel.lastWeightage=e,"W"==g?this.enrollmentCommonSvc.willingnessNumber(Number(this.enrollmentCommonSvc.getWillingnessNumber())+e):this.enrollmentCommonSvc.capacityNumber(Number(this.enrollmentCommonSvc.getCapacityNumber())+e)):(this.enrollmentCommonSvc.getGrowthannualContributionWeightage()!=e&&("W"==g?(this.enrollmentCommonSvc.willingnessNumber(Number(this.enrollmentCommonSvc.getWillingnessNumber())-Number(this.enrollmentCommonSvc.getGrowthannualContributionWeightage())),this.enrollmentCommonSvc.willingnessNumber(Number(this.enrollmentCommonSvc.getWillingnessNumber())+e)):(this.enrollmentCommonSvc.capacityNumber(Number(this.enrollmentCommonSvc.getCapacityNumber())-Number(this.enrollmentCommonSvc.getGrowthannualContributionWeightage())),this.enrollmentCommonSvc.capacityNumber(Number(this.enrollmentCommonSvc.getCapacityNumber())+e)),this.enrollmentCommonSvc.saveGrowthannualContributionWeightage(e)),this.$scope.lastRiskModel.lastWeightage=e),this.$scope.lastRiskModel.indexAction=7,this.enrollmentCommonSvc.saveLastRiskModel(11,this.$scope.lastRiskModel),this.enrollmentCommonSvc.savesliderRiskModel(11,this.$scope.sliderModel);var n,o,p,q;p=Number(a),o=null!=this.enrollmentCommonSvc.getCompoundGrowthnumberOfYears()?Number(this.enrollmentCommonSvc.getCompoundGrowthnumberOfYears()):25,n=null!=this.enrollmentCommonSvc.getCompoundGrowthstartingValue()?Number(this.enrollmentCommonSvc.getCompoundGrowthstartingValue()):5e3,q=null!=this.enrollmentCommonSvc.getCompoundGrowthAge()?Number(this.enrollmentCommonSvc.getCompoundGrowthAge()):40,this.$scope.defaultCompoundGrowth={startingValue:n,numberOfYears:o,annualContribution:12*p,age:q},this.redrawCompoundGrowthChart(this.$scope.defaultCompoundGrowth),this.redrawModelChart(this.enrollmentCommonSvc.getWillingnessNumber(),this.enrollmentCommonSvc.getCapacityNumber())}else this.sliderFunction(11),this.sliderStop(11)},b.prototype.iipSetFirmInfo=function(){if(1==this.$rootScope.session.isLoggedIn&&this.contextSvc.isIIP()){var a={};a.FirmId=this.contextSvc.customization.getSchwabFirmId(),a.ProgramPin=this.contextSvc.customization.getProgramPin(),this.contextSvc.customization.setFirmProgramInfo(a)}},b.prototype.setInvestmentFluctuationRange=function(a,b){var c={10:[10,15],20:[15,25],30:[25,35],40:[30,45],50:[35,50],60:[40,55],70:[45,60]};this.$scope.investmentFluctuatingMinus=a-a*c[b][0]/100,this.$scope.investmentFluctuatingPlus=a+a*c[b][1]/100},b.prototype.enrollmentMissingAnswerModel=function(a,b){1==a&&(this.$scope.questionId=Number(b)-1,this.$scope.groupID=b,this.enrollmentCommonSvc.lastQuestionId(b),this.$location.path("/behavioralQuestions/GroupID"+this.$scope.groupID))},b.prototype.enrollmentNextQuestion=function(a,b){var c;if(void 0!=this.$scope.questions){var d=this.$scope.questions[b];if(d.NextAction.length>1)for(var e=0;e<d.NextAction.length;e++)a==d.NextAction[e].AnswerId&&(c=d.NextAction[e].QuestionId);else c=d.NextAction[0].QuestionId}return c},b.prototype.sliderCalculation=function(){if(null==this.enrollmentCommonSvc.getSliderRiskModel("8")){this.$scope.sliderModel={},this.$scope.sliderModel.SelectedAnswers=[];var a={AnswerText:this.$scope.questions[7].SliderDefaults[0].toString(),SelectedValue:this.$scope.questions[7].SliderDefaults[0].toString()};this.$scope.sliderModel.SelectedAnswers.push(a),this.$scope.sliderModel.QuestionId=this.$scope.questions[7].QuestionId,this.enrollmentCommonSvc.savesliderRiskModel(8,this.$scope.sliderModel),this.$scope.sliderDefault=!0}if(null==this.enrollmentCommonSvc.getSliderRiskModel("9")){this.$scope.sliderModel={},this.$scope.sliderModel.SelectedAnswers=[];var b,c,d,e,f=this.$scope.questions[8].SliderDefaults[0];angular.forEach(this.$scope.questions[8],function(a,g){"QuestionType"==g&&(e=a),"Answers"==g&&(f>25e3?(b=a[1].Weightage,c=a[1].AnswerText,d=a[1].AnswerId):(b=a[0].Weightage,c=a[0].AnswerText,d=a[0].AnswerId))});var a={AnswerId:d,AnswerText:c,SelectedValue:f.toString()};this.$scope.sliderModel.SelectedAnswers.push(a),this.$scope.sliderModel.QuestionId=this.$scope.questions[8].QuestionId,null==this.enrollmentCommonSvc.getGrowthstartingValueWeightage()?(this.enrollmentCommonSvc.saveGrowthstartingValueWeightage(b),"W"==e?this.enrollmentCommonSvc.willingnessNumber(Number(this.enrollmentCommonSvc.getWillingnessNumber())+b):this.enrollmentCommonSvc.capacityNumber(Number(this.enrollmentCommonSvc.getCapacityNumber())+b)):this.enrollmentCommonSvc.getGrowthstartingValueWeightage()!=b&&("W"==e?(this.enrollmentCommonSvc.willingnessNumber(Number(this.enrollmentCommonSvc.getWillingnessNumber())-Number(this.enrollmentCommonSvc.getGrowthstartingValueWeightage())),this.enrollmentCommonSvc.willingnessNumber(Number(this.enrollmentCommonSvc.getWillingnessNumber())+b)):(this.enrollmentCommonSvc.capacityNumber(Number(this.enrollmentCommonSvc.getCapacityNumber())-Number(this.enrollmentCommonSvc.getGrowthstartingValueWeightage())),this.enrollmentCommonSvc.capacityNumber(Number(this.enrollmentCommonSvc.getCapacityNumber())+b)),this.enrollmentCommonSvc.saveGrowthstartingValueWeightage(b)),this.$scope.lastRiskModel={},this.$scope.lastRiskModel.lastQuestionId=this.$scope.questions[8].QuestionId.toString(),this.$scope.lastRiskModel.lastQuestionType=e,this.$scope.lastRiskModel.lastWeightage=b,this.$scope.lastRiskModel.indexAction=7,this.enrollmentCommonSvc.savesliderRiskModel(9,this.$scope.sliderModel),this.enrollmentCommonSvc.saveLastRiskModel(9,this.$scope.lastRiskModel),this.$scope.sliderDefault=!0}if(null==this.enrollmentCommonSvc.getSliderRiskModel("10")){this.$scope.sliderModel={},this.$scope.sliderModel.SelectedAnswers=[];var b,c,d,e,f=this.$scope.questions[9].SliderDefaults[1];angular.forEach(this.$scope.questions[9],function(a,g){"QuestionType"==g&&(e=a),"Answers"==g&&(10==f?(b=a[0].Weightage,c=a[0].AnswerText,d=a[0].AnswerId):20==f?(b=a[1].Weightage,c=a[1].AnswerText,d=a[1].AnswerId):30==f?(b=a[2].Weightage,c=a[2].AnswerText,d=a[2].AnswerId):40==f?(b=a[3].Weightage,c=a[3].AnswerText,d=a[3].AnswerId):50==f?(b=a[4].Weightage,c=a[4].AnswerText,d=a[4].AnswerId):60==f?(b=a[5].Weightage,c=a[5].AnswerText,d=a[5].AnswerId):70==f&&(b=a[6].Weightage,c=a[6].AnswerText,d=a[6].AnswerId))});var a={AnswerId:d,AnswerText:c,SelectedValue:f.toString()};this.$scope.sliderModel.SelectedAnswers.push(a),this.$scope.sliderModel.QuestionId=this.$scope.questions[9].QuestionId,null==this.enrollmentCommonSvc.getInvestmentFluctuating()?(this.enrollmentCommonSvc.saveInvestmentFluctuating(b),"W"==e?this.enrollmentCommonSvc.willingnessNumber(Number(this.enrollmentCommonSvc.getWillingnessNumber())+b):this.enrollmentCommonSvc.capacityNumber(Number(this.enrollmentCommonSvc.getCapacityNumber())+b)):this.enrollmentCommonSvc.getInvestmentFluctuating()!=b&&("W"==e?(this.enrollmentCommonSvc.willingnessNumber(Number(this.enrollmentCommonSvc.getWillingnessNumber())-Number(this.enrollmentCommonSvc.getInvestmentFluctuating())),this.enrollmentCommonSvc.willingnessNumber(Number(this.enrollmentCommonSvc.getWillingnessNumber())+b)):(this.enrollmentCommonSvc.capacityNumber(Number(this.enrollmentCommonSvc.getCapacityNumber())-Number(this.enrollmentCommonSvc.getInvestmentFluctuating())),this.enrollmentCommonSvc.capacityNumber(Number(this.enrollmentCommonSvc.getCapacityNumber())+b)),this.enrollmentCommonSvc.saveInvestmentFluctuating(b)),this.$scope.lastRiskModel={},this.$scope.lastRiskModel.lastQuestionId=this.$scope.questions[9].QuestionId.toString(),this.$scope.lastRiskModel.lastQuestionType=e,this.$scope.lastRiskModel.lastWeightage=b,this.$scope.lastRiskModel.indexAction=7,this.enrollmentCommonSvc.savesliderRiskModel(10,this.$scope.sliderModel),this.enrollmentCommonSvc.saveLastRiskModel(10,this.$scope.lastRiskModel),this.$scope.sliderDefault=!0}if(!this.isIncomeGoal()&&null==this.enrollmentCommonSvc.getSliderRiskModel("11")){this.$scope.sliderModel={},this.$scope.sliderModel.SelectedAnswers=[];var b,c,d,e,g,f=this.$scope.questions[10].SliderDefaults[0],h=this.$scope.questions[8].SliderDefaults[0];g=null!=h?100*Number(f)/h:100*Number(f)/5e3,angular.forEach(this.$scope.questions[10],function(a,f){"QuestionType"==f&&(e=a),"Answers"==f&&(g<"10"?(b=a[0].Weightage,c=a[0].AnswerText,d=a[0].AnswerId):(b=a[1].Weightage,c=a[1].AnswerText,d=a[1].AnswerId))});var a={AnswerId:d,AnswerText:c,SelectedValue:f.toString()};this.$scope.sliderModel.SelectedAnswers.push(a),this.$scope.sliderModel.QuestionId=this.$scope.questions[10].QuestionId,null==this.enrollmentCommonSvc.getGrowthannualContributionWeightage()?(this.enrollmentCommonSvc.saveGrowthannualContributionWeightage(b),"W"==e?this.enrollmentCommonSvc.willingnessNumber(Number(this.enrollmentCommonSvc.getWillingnessNumber())+b):this.enrollmentCommonSvc.capacityNumber(Number(this.enrollmentCommonSvc.getCapacityNumber())+b)):this.enrollmentCommonSvc.getGrowthannualContributionWeightage()!=b&&("W"==e?(this.enrollmentCommonSvc.willingnessNumber(Number(this.enrollmentCommonSvc.getWillingnessNumber())-Number(this.enrollmentCommonSvc.getGrowthannualContributionWeightage())),this.enrollmentCommonSvc.willingnessNumber(Number(this.enrollmentCommonSvc.getWillingnessNumber())+b)):(this.enrollmentCommonSvc.capacityNumber(Number(this.enrollmentCommonSvc.getCapacityNumber())-Number(this.enrollmentCommonSvc.getGrowthannualContributionWeightage())),this.enrollmentCommonSvc.capacityNumber(Number(this.enrollmentCommonSvc.getCapacityNumber())+b)),this.enrollmentCommonSvc.saveGrowthannualContributionWeightage(b)),this.$scope.lastRiskModel={},this.$scope.lastRiskModel.lastQuestionId=this.$scope.questions[10].QuestionId.toString(),this.$scope.lastRiskModel.lastQuestionType=e,this.$scope.lastRiskModel.lastWeightage=b,this.$scope.lastRiskModel.indexAction=7,this.enrollmentCommonSvc.savesliderRiskModel(11,this.$scope.sliderModel),this.enrollmentCommonSvc.saveLastRiskModel(11,this.$scope.lastRiskModel),this.$scope.sliderDefault=!0}if(null==this.enrollmentCommonSvc.getSliderRiskModel("12")){this.$scope.sliderModel={},this.$scope.sliderModel.SelectedAnswers=[];var b,c,d,e,i,j=this.isIncomeGoal(),f=j?0:this.$scope.questions[11].SliderDefaults[0],k=(j?this.$scope.questions[11].SliderDefaults[0]:this.$scope.questions[11].SliderDefaults[1],this);if(angular.forEach(this.$scope.questions[11],function(a,g){if("QuestionType"==g&&(e=a),"Answers"==g){var h=k.isIncomeGoal();if(h){var i=k.$scope.questions[11].SliderDefaults[1];i>=1&&i<4?(b=a[4].Weightage,c=a[4].AnswerText,d=a[4].AnswerId):i>=5&&i<9?(b=a[5].Weightage,c=a[5].AnswerText,d=a[5].AnswerId):i>=10&&i<=19?(b=a[6].Weightage,c=a[6].AnswerText,d=a[6].AnswerId):i>19&&(b=a[7].Weightage,c=a[7].AnswerText,d=a[7].AnswerId)}else Number(f)<2?(b=a[0].Weightage,c=a[0].AnswerText,d=a[0].AnswerId):Number(f)>=2&&Number(f)<=5?(b=a[1].Weightage,c=a[1].AnswerText,d=a[1].AnswerId):Number(f)>=6&&Number(f)<=10?(b=a[2].Weightage,c=a[2].AnswerText,d=a[2].AnswerId):Number(f)>10&&(b=a[3].Weightage,c=a[3].AnswerText,d=a[3].AnswerId)}}),j?this.$scope.sliderModel.SelectedAnswers.push({AnswerId:d,SelectedValue:f.toString()},{AnswerId:d,SelectedValue:k.$scope.questions[11].SliderDefaults[1].toString()}):this.$scope.sliderModel.SelectedAnswers.push({AnswerId:d,SelectedValue:f.toString()},{AnswerId:d,SelectedValue:"0"}),this.$scope.sliderModel.QuestionId=this.$scope.questions[11].QuestionId,angular.isDefined(b)&&null!=b){angular.isDefined(i)&&(b+=i);var l=this.enrollmentCommonSvc.getLastRiskResponse(12);if(l){var m=angular.fromJson(l);if(m){var n=Number(m.lastWeightage);this.enrollmentCommonSvc.capacityNumber(Number(this.enrollmentCommonSvc.getCapacityNumber())-n)}}this.enrollmentCommonSvc.capacityNumber(Number(this.enrollmentCommonSvc.getCapacityNumber())+b),this.enrollmentCommonSvc.saveGrowthannualStartingInYearsWeightage(b)}this.$scope.lastRiskModel={},this.$scope.lastRiskModel.lastQuestionId=this.$scope.questions[11].QuestionId.toString(),this.$scope.lastRiskModel.lastQuestionType=e,this.$scope.lastRiskModel.lastWeightage=b,this.$scope.lastRiskModel.indexAction=7,this.enrollmentCommonSvc.savesliderRiskModel(12,this.$scope.sliderModel),this.enrollmentCommonSvc.saveLastRiskModel(12,this.$scope.lastRiskModel),this.$scope.sliderDefault=!0}this.redrawModelChart(this.enrollmentCommonSvc.getWillingnessNumber(),this.enrollmentCommonSvc.getCapacityNumber())},b.prototype.incomeProfileCheckBox=function(){this.$rootScope.isIIP&&(this.enrollmentCommonSvc.hasStrategyID(400)&&!this.enrollmentCommonSvc.hasStrategyID(300)&&this.$scope.accountInterface.incomeOffer?(this.$scope.accountInterface.muniOffer=!0,this.enrollmentCommonSvc.iipCaliEligibilityCheck()&&"CA"==this.$scope.accountInterface.State&&(this.$scope.accountInterface.californiaMunis="true")):!this.enrollmentCommonSvc.hasStrategyID(400)||this.enrollmentCommonSvc.hasStrategyID(200)||this.$scope.accountInterface.incomeOffer?this.enrollmentCommonSvc.hasStrategyID(200)&&!this.enrollmentCommonSvc.hasStrategyID(400)&&this.$scope.accountInterface.incomeOffer?this.$scope.muniOfferDisabled=!0:!this.enrollmentCommonSvc.hasStrategyID(200)||this.enrollmentCommonSvc.hasStrategyID(400)||this.$scope.accountInterface.incomeOffer||(this.$scope.muniOfferDisabled=!1):(this.$scope.accountInterface.muniOffer=!1,"true"==this.$scope.accountInterface.californiaMunis&&(this.$scope.accountInterface.californiaMunis="false")))},b.prototype.municipalBondsCalif=function(){this.$scope.accountInterface.muniOffer?this.$scope.accountInterface.californiaMunisNational="true":(this.$scope.accountInterface.californiaMunis="false",this.$scope.accountInterface.californiaMunisNational="false"),this.$rootScope.isIIP&&(this.enrollmentCommonSvc.hasStrategyID(400)&&!this.enrollmentCommonSvc.hasStrategyID(200)&&this.$scope.accountInterface.muniOffer?this.$scope.accountInterface.incomeOffer=!0:(this.enrollmentCommonSvc.hasStrategyID(200)||this.enrollmentCommonSvc.hasStrategyID(300)||this.$scope.accountInterface.muniOffer)&&(!this.enrollmentCommonSvc.hasStrategyID(200)||this.enrollmentCommonSvc.hasStrategyID(300)||this.$scope.accountInterface.muniOffer)?this.enrollmentCommonSvc.hasStrategyID(200)&&!this.enrollmentCommonSvc.hasStrategyID(400)&&this.$scope.accountInterface.muniOffer?this.$scope.incomeOfferDisabled=!0:!this.enrollmentCommonSvc.hasStrategyID(200)||this.enrollmentCommonSvc.hasStrategyID(400)||this.$scope.accountInterface.muniOffer?this.enrollmentCommonSvc.hasStrategyID(200)&&!this.enrollmentCommonSvc.hasStrategyID(400)&&this.$scope.accountInterface.incomeOffer?this.$scope.muniOfferDisabled=!0:!this.enrollmentCommonSvc.hasStrategyID(200)||this.enrollmentCommonSvc.hasStrategyID(400)||this.$scope.accountInterface.incomeOffer||(this.$scope.muniOfferDisabled=!1):this.$scope.incomeOfferDisabled=!1:this.$scope.accountInterface.incomeOffer=!1)},b.prototype.offerCheck=function(){this.getAccoutType(),this.selectAccountType(),this.$scope.accountInterface.californiaMunisNational="true"==this.$scope.accountInterface.californiaMunis?"false":this.$scope.accountInterface.muniOffer?"true":"false",this.$rootScope.isInCali="CA"==this.enrollmentCommonSvc.getstate(),"updateProfile"==this.suitabilityQuestionsSvc.getReferrer()?this.$scope.isProfileUpdateFlag=!0:this.$scope.isProfileUpdateFlag=!1,this.$scope.currentState=!1,1==this.$scope.accountInterface.taxOffer?this.$scope.taxHarvestingDisbaledFlag=!1:this.$scope.taxHarvestingDisbaledFlag=!0,this.enrollmentCommonSvc.isTLH()?this.$scope.offerFlagTax=!0:(this.$scope.offerFlagTax=void 0,this.$scope.accountInterface.taxOffer=!1),this.enrollmentCommonSvc.isIncomeMuni()?this.$scope.offerFlagMuni=!0:(this.$scope.offerFlagMuni=void 0,this.$scope.accountInterface.isMuniEligible=!1,this.$scope.accountInterface.muniOffer=!1,this.$scope.accountInterface.californiaMunis=!1,this.$scope.accountInterface.isCalMuniEligible=!1),this.enrollmentCommonSvc.isCalMuni()?this.$scope.isCali=!0:this.$scope.isCali=!1,this.enrollmentCommonSvc.isIncomeProfile()?this.$scope.offerFlagIncome=!0:(this.$scope.offerFlagIncome=void 0,this.$scope.accountInterface.incomeOffer=!1,this.$scope.accountInterface.isIncomeEligible=!1),this.$rootScope.isIIP&&(this.enrollmentCommonSvc.hasStrategyID(200)&&!this.enrollmentCommonSvc.hasStrategyID(400)&&this.$scope.accountInterface.muniOffer?(this.$scope.incomeOfferDisabled=!0,this.$scope.accountInterface.incomeOffer=!1):this.enrollmentCommonSvc.hasStrategyID(200)&&!this.enrollmentCommonSvc.hasStrategyID(400)&&this.$scope.accountInterface.incomeOffer&&(this.$scope.muniOfferDisabled=!0,this.$scope.accountInterface.muniOffer=!1),this.enrollmentCommonSvc.hasStrategyID(200)||this.enrollmentCommonSvc.isIncomeProfile()||(this.$scope.offerFlagMuni=void 0))},b.prototype.submitaddtOfferings=function(){if(this.riskProfileMisMatch())return!1;this.enrollmentCommonSvc.iipCaliEligibilityCheck()&&"CA"!=this.enrollmentCommonSvc.getstate()&&this.$scope.isProfileUpdateFlag&&"true"==this.$scope.accountInterface.californiaMunis&&(this.$scope.accountInterface.californiaMunis="false",this.$scope.accountInterface.isCalMuniEligible=!1),this.getAccoutType();var a=this.enrollmentCommonSvc.saveAccountInterface(this.$scope.accountInterface);if(1==a)if(1==this.$scope.offerFlagIncome&&this.$scope.accountInterface.incomeOffer)this.$scope.offerFlagMuni&&this.$scope.accountInterface.muniOffer?this.enrollmentCommonSvc.saveRiskProfileType("Mercury - Muni Income"):this.enrollmentCommonSvc.saveRiskProfileType("Mercury - Income"),this.redrawModelChart(this.enrollmentCommonSvc.getWillingnessNumber(),this.enrollmentCommonSvc.getCapacityNumber()),this.$state.go("planRecommendation");else if(this.$scope.offerFlagMuni&&this.$scope.accountInterface.muniOffer)this.enrollmentCommonSvc.saveRiskProfileType("Mercury - Muni Return"),this.redrawModelChart(this.enrollmentCommonSvc.getWillingnessNumber(),this.enrollmentCommonSvc.getCapacityNumber()),this.$state.go("planRecommendation");else{if(this.enrollmentCommonSvc.saveRiskProfileType("Mercury - Return"),this.enrollmentCommonSvc.saveRiskProfile(this.enrollmentCommonSvc.getCalculatedRiskProfile()),"updateProfile"==this.suitabilityQuestionsSvc.getReferrer())return void this.$state.go("planRecommendation");this.$state.go("planRecommendation")}return a},b.prototype.selectAccountType=function(){"Individual"!=this.$scope.accountInterface.accountType&&"JointTenants"!=this.$scope.accountInterface.accountType&&"CommonTenants"!=this.$scope.accountInterface.accountType&&"CommunityProperty"!=this.$scope.accountInterface.accountType&&"Custodial"!=this.$scope.accountInterface.accountType||(this.$scope.accountInterface.accountSubType=this.$scope.accountInterface.accountType,this.$scope.accountInterface.accountType="S1"),"Roth"!=this.$scope.accountInterface.accountType&&"Rollover"!=this.$scope.accountInterface.accountType&&"Tradition"!=this.$scope.accountInterface.accountType||(this.$scope.accountInterface.accountSubType=this.$scope.accountInterface.accountType,this.$scope.accountInterface.accountType="IRA"),"Single Trustee"!=this.$scope.accountInterface.accountType&&"Two Trustee"!=this.$scope.accountInterface.accountType||(this.$scope.accountInterface.accountSubType=this.$scope.accountInterface.accountType,this.$scope.accountInterface.accountType="LivingTrust")},b.prototype.submitAccountType=function(){var a=this;"Individual"!=this.$scope.accountInterface.accountType&&"JointTenants"!=this.$scope.accountInterface.accountType&&"CommonTenants"!=this.$scope.accountInterface.accountType&&"CommunityProperty"!=this.$scope.accountInterface.accountType&&"Custodial"!=this.$scope.accountInterface.accountType||(this.$scope.accountInterface.accountSubType=this.$scope.accountInterface.accountType,this.$scope.accountInterface.accountType="S1"),"Roth"!=this.$scope.accountInterface.accountType&&"Rollover"!=this.$scope.accountInterface.accountType&&"Tradition"!=this.$scope.accountInterface.accountType||(this.$scope.accountInterface.accountSubType=this.$scope.accountInterface.accountType,this.$scope.accountInterface.accountType="IRA"),"Single Trustee"!=this.$scope.accountInterface.accountType&&"Two Trustee"!=this.$scope.accountInterface.accountType||(this.$scope.accountInterface.accountSubType=this.$scope.accountInterface.accountType,this.$scope.accountInterface.accountType="LivingTrust");var b=this.enrollmentCommonSvc.saveAccountInterface(this.$scope.accountInterface);return 1==b&&(a.offerCheck(),angular.isUndefined(a.$scope.offerFlagTax)&&angular.isUndefined(a.$scope.offerFlagMuni)&&angular.isUndefined(a.$scope.offerFlagIncome)?this.$state.go("planRecommendation"):(void 0==this.$scope.offerFlagMuni&&void 0==this.$scope.offerFlagIncome||(void 0!=this.$scope.offerFlagIncome&&(this.$scope.accountInterface.isIncomeEligible=!0),void 0!=this.$scope.offerFlagMuni&&this.enrollmentCommonSvc.iipMuniEligibilityCheck()&&(this.$scope.accountInterface.isMuniEligible=!0),this.$scope.offerFlagTax=!1,this.enrollmentCommonSvc.saveAccountInterface(this.$scope.accountInterface)),this.$state.go("accountopen.addtOfferings")),!0)},b.prototype.getHeaderText=function(){return 8===Number(this.$scope.groupID)?"Now let's see how we can help you achieve your "+this.getGoalName()+" Goal.":1===Number(this.$scope.groupID)?"Please tell us about your goal for this account.":"Please answer a few questions to design your personal portfolio.";
},b.prototype.getGoalName=function(){var a="",b=this.enrollmentCommonSvc.GetQuestionRiskModel(1);if(null!=b){var c=JSON.parse(b),d=c.SelectedAnswers[0].AnswerId;a=this.hgGoalService.getGoalName(d-1)}return a},b.prototype.readSlidersForGoalChart=function(){if(this.$scope.isGoalsChartDisplayed&&!angular.isUndefined(this.$scope.goalDetails)){var a=!1,b=this.getGoalType(),c=this.$scope.goalDetails.state;b!=this.$scope.goalDetails.type&&(a=!0),c=1;var d,e,f,g=JSON.parse(this.enrollmentCommonSvc.getSliderRiskModel(9)),h=g?g.SelectedAnswers[0]:null;f=this.enrollmentCommonSvc.getCompoundGrowthstartingValue()?Number(this.enrollmentCommonSvc.getCompoundGrowthstartingValue()):h?Number(h.SelectedValue):0;var i,j,k=0,l=JSON.parse(this.enrollmentCommonSvc.getSliderRiskModel(12)),m=l?l.SelectedAnswers:null;if(m&&null!=m&&m.length>0&&(i=m[1]?m[1].SelectedValue:0,j=m[0]?m[0].SelectedValue:0),null!=this.enrollmentCommonSvc.getStartingYearsOfYears()){var n=this.enrollmentCommonSvc.getStartingYearsOfYears().split(",");k=Number(n[1])-Number(n[0])}else k=Number(i)-Number(j);var o=12*Math.abs(k);this.hgGoalService.isIncomeModel(b)?(d=0,e=null!=this.enrollmentCommonSvc.getCompoundGrowthIncomeWithdrawal()&&0==this.$scope.viewSuggestedWithdrawal?Number(this.enrollmentCommonSvc.getCompoundGrowthIncomeWithdrawal()):this.$scope.isProfileUpdateFlag&&!this.suitabilityQuestionsSvc.isUnfundedOrUninvested()?a?o>0?f/o:0:this.$scope.goalDetails.target.amount:1!=this.$scope.viewSuggestedWithdrawal||this.$scope.isProfileUpdateFlag?this.$scope.goalDetails.target.amount:o>0?f/o:0):(d=Number(this.enrollmentCommonSvc.getCompoundGrowthannualContribution()),e="updateProfile"!=this.suitabilityQuestionsSvc.getReferrer()?Number(f):this.$scope.goalDetails.target.amount),this.$scope.goalDetails.monthlyContribution&&null!=this.$scope.goalDetails.monthlyContribution&&(this.$scope.goalDetails.monthlyContribution.amount=d),this.$scope.goalDetails.target&&null!=this.$scope.goalDetails.target&&(this.$scope.goalDetails.target.amount=e),this.$scope.goalDetails.numberOfYears=0==c?Number(j):this.$scope.goalDetails.numberOfYears,this.$scope.goalDetails.scorecard&&null!=this.$scope.goalDetails.scorecard&&(this.$scope.goalDetails.scorecard.value2=null),"updateProfile"!=this.suitabilityQuestionsSvc.getReferrer()||this.suitabilityQuestionsSvc.isUnfundedOrUninvested()?this.$scope.goalDetails.currentBalance=Number(f):(this.$scope.goalDetails.currentBalance=0!=c||a?Number(this.$scope.goalDetails.currentBalance):Number(f),this.$scope.goalDetails.oneTimeContribution.amount=null!=this.enrollmentCommonSvc.getOneTimeContributionAmount()?Number(this.enrollmentCommonSvc.getOneTimeContributionAmount()):0),this.$scope.goalDetails.type=b,this.$scope.goalDetails.state=c,this.$scope.goalDetails.selectedRiskModel=this.getCurrentPortfolioForGoalsChart(),this.defaultGoalState=!1}},b.prototype.getCurrentPortfolioForGoalsChart=function(){var a=JSON.parse(this.enrollmentCommonSvc.getRiskProfileInfo()),b=this.enrollmentCommonSvc.getCalculatedRiskProfile(),c="Mercury - Return";return null!=a&&(c=a.incomeOffer?a.muniOffer?"Mercury - Muni Income":"Mercury - Income":a.muniOffer?"Mercury - Muni Return":"Mercury - Return"),c+" "+b},b.prototype.initializeGoalViewModel=function(){return{type:null,state:null,title:{label1:null,label2:null,innerLabel:null,percentage:null,shortLabel1:null,icon:null,info:null,details:null,class:null},target:{amount:null,label1:null,label2:null,label3:null,label4:null,label5:null,label6:null,buttonText1:null,buttonText2:null,buttonClickHandler1:null,buttonClickHandler2:null},chart:null,scorecard:{percentageComplete:null,label1:null,value1:null,label2:null,value2:null,isMini:!0,seriesData:[100,0],seriesYear:null,color:null,title:null,value3:null,mobileView:!1},projectedBalance:{label1:null,value1:null,label2:null},numberOfYears:null,monthlyContribution:{amount:null,options:null,label1:null,maxValidLength:null,invalidMessage:null,slider:null,updateInput:null,updateSlider:null,back:null,launchMoveMoney:null,iconToolTip:null},oneTimeContribution:{amount:null,options:null,label1:null,maxValidLength:null,invalidMessage:null,slider:null,updateInput:null,updateSlider:null,back:null,launchMoveMoney:null,iconToolTip:null},riskProfile:null,timeHorizon:null,contributions:null,currentBalance:null,quickView:null,parameterSelector:null,summaryStatement:null,navigateGoals:null,whatsNext:null,pageSectionModel:null,back:null,statusColor:null,goalChartOptions:null,goalChartSeries:null,seriesMaxYear:null,seriesHighLabel:null,seriesMidLabel:null,seriesLowLabel:null,goalChartOptionsMini:null,goalChartSeriesMini:null,seriesValue:null,miniIncomeChart:null,educationData:null,changeGoalTargetAmount:null,resetTargetGoal:null,saveGoal:null,showSavingsTargetLink:null,showIncomeTargetLink:null,showAccomplishmentStatus:null,showRecommendedAmountLabel:null,showMobileViewIncomeScorecard:null}},b.prototype.getActiveAccountBalance=function(){var a=this.contextSvc.getActiveAccount();return a?a.balance:"0"},b.prototype.isIncomeGoal=function(){var a=this.enrollmentCommonSvc.GetQuestionRiskModel(1),b=JSON.parse(a);return null!=b&&"5"==b.SelectedAnswers[0].AnswerId},b.prototype.isSipAccount=function(){return this.contextSvc.isSIP()},b.prototype.showDocument=function(a){this.contextSvc.device.isNative()?this.hgCommonJs2nSvc.navigateToSelectedDocument(a):a&&window.open(a)},b.prototype.editIncomeWithdrawal=function(a){var b;if(a)if(this.$scope.viewSuggestedWithdrawal=!0,this.$scope.isProfileUpdateFlag?(b=this.$scope.questions[12].QuestionTextArray[0].QuestionText.split("___"),this.$scope.riskProfileQuestion13a=b[0],this.$scope.riskProfileQuestion13b=b[1]):(b=this.$scope.questions[12].QuestionTextArray[1].QuestionText.split("___"),this.$scope.riskProfileQuestion13a=b[0],this.$scope.riskProfileQuestion13b=b[1]),this.$scope.isProfileUpdateFlag){null!=this.enrollmentCommonSvc.getDisplaySystemMonthlyValue()&&this.enrollmentCommonSvc.removeDisplaySystemMonthlyValue();var c=this.$scope.goalDetails&&this.$scope.goalDetails.target&&this.$scope.goalDetails.target.label1?Number(this.$scope.goalDetails.target.label1.replace(/[^0-9\.]+/g,"")):0;this.$scope.goalDetails&&this.$scope.goalDetails.target&&this.$scope.goalDetails.target.label6?this.$scope.goalDetails.target.label6.replace(/[^\d,]/g,""):"";null!=this.enrollmentCommonSvc.getCompoundGrowthstartingValue()&&null!=this.enrollmentCommonSvc.getCompoundGrowthnumberOfYears()?null!=this.enrollmentCommonSvc.getOneTimeContributionAmount()?this.$scope.goalDetails.target.amount=(Number(this.enrollmentCommonSvc.getCompoundGrowthstartingValue())+Number(this.enrollmentCommonSvc.getOneTimeContributionAmount()))/(12*Number(this.enrollmentCommonSvc.getCompoundGrowthnumberOfYears())):this.$scope.goalDetails.target.amount=Number(this.enrollmentCommonSvc.getCompoundGrowthstartingValue())/(12*Number(this.enrollmentCommonSvc.getCompoundGrowthnumberOfYears())):this.$scope.goalDetails.target.amount=c,this.enrollmentCommonSvc.saveDisplaySystemMonthlyValue(),this.redrawGoalChartOnValidWithdrawal(),null!=this.enrollmentCommonSvc.getDisplaySystemMonthlyValue()&&(this.changeSuggestion(),this.enrollmentCommonSvc.saveMonthlyIncomeWithdrawal(this.$scope.goalDetails.target.amount))}else this.enrollmentCommonSvc.removeMonthlyIncomeWithdrawal(),this.redrawGoalChartOnValidWithdrawal();else this.$scope.viewSuggestedWithdrawal=!1,b=this.$scope.questions[12].QuestionTextArray[0].QuestionText.split("___"),this.$scope.riskProfileQuestion13a=b[0],this.$scope.riskProfileQuestion13b=b[1],this.$scope.questions[12].weight=this.$scope.goalDetails.target.amount,this.sliderDollarInput(this.$scope.questions[12].weight,this.$scope.questions[12]),this.$scope.withdrawalAmount=this.$filter("currency")(this.$scope.goalDetails.target.amount,void 0,0),angular.element("#sliderIncomeWithdraw").val(this.$filter("currency")(this.$scope.goalDetails.target.amount,void 0,0))},b.prototype.sliderQuestionWithdrawal=function(a,b){null!=this.enrollmentCommonSvc.getDisplaySystemMonthlyValue()&&this.enrollmentCommonSvc.removeDisplaySystemMonthlyValue();var c=new RegExp("^[0-9,$]"),d=1e7;if(a||(a=""),!a.toString().match(c))return this.$scope.incomeWithdrawalErrorFlag=!0,this.$scope.incomeWithdrawalErrorMessage="Please enter valid amount.",!1;this.$scope.incomeWithdrawalErrorFlag=!1,a=a.replace(/[^0-9\.]+/g,"");var e;e=null!=this.enrollmentCommonSvc.getCompoundGrowthIncomeWithdrawal()&&a!=this.enrollmentCommonSvc.getCompoundGrowthIncomeWithdrawal(),this.$scope.withdrawalAmount=this.$filter("currency")(a,void 0,0),a>=Number(b.MinRange)&&a<=Number(d)?(b.weight=Number(a),this.$scope.goalDetails&&null!=this.$scope.goalDetails&&null!=this.$scope.goalDetails.target&&(this.$scope.goalDetails.target.amount=Number(a)),this.changeSuggestion(),this.enrollmentCommonSvc.saveMonthlyIncomeWithdrawal(a),angular.element("#sliderIncomeWithdraw").val(this.$filter("currency")(a,void 0,0))):a<Number(d)?(this.$scope.goalDetails&&null!=this.$scope.goalDetails&&null!=this.$scope.goalDetails.target&&(this.$scope.goalDetails.target.amount=Number(b.MinRange)),b.weight=Number(b.MinRange),this.changeSuggestion(),this.enrollmentCommonSvc.saveMonthlyIncomeWithdrawal(b.MinRange),angular.element("#sliderIncomeWithdraw").val(this.$filter("currency")(b.MinRange,void 0,0))):a>Number(b.MaxRange)&&(this.$scope.goalDetails&&null!=this.$scope.goalDetails&&null!=this.$scope.goalDetails.target&&(this.$scope.goalDetails.target.amount=Number(a)),b.weight=Number(b.MaxRange),this.changeSuggestion(),this.enrollmentCommonSvc.saveMonthlyIncomeWithdrawal(a),angular.element("#sliderIncomeWithdraw").val(this.$filter("currency")(a,void 0,0))),a<Number(b.MinRange)||a>Number(d)?(this.$scope.incomeWithdrawalErrorFlag=!0,this.$scope.incomeWithdrawalErrorMessage="Withdrawal target must be less than $10,000,000 per month."):this.$scope.incomeWithdrawalErrorFlag=!1,a==Number(b.MaxRange)||a>Number(b.MaxRange)?this.$scope.incomeWithdrawalCurrencyFlag=!0:this.$scope.incomeWithdrawalCurrencyFlag=!1,1==e&&this.redrawGoalChartOnValidWithdrawal()},b.prototype.setWithdrawalAmountFromSlider=function(a){null!=this.enrollmentCommonSvc.getDisplaySystemMonthlyValue()&&0==this.$scope.viewSuggestedWithdrawal&&this.enrollmentCommonSvc.removeDisplaySystemMonthlyValue();var b;b=a.weight>2e4?this.$scope.withdrawalAmount.replace(/[^0-9\.]+/g,""):a.weight;var c=1e7;if(null!=b&&void 0!=b){a.weight==Number(a.MaxRange)||a.weight>Number(a.MaxRange)?this.$scope.incomeWithdrawalCurrencyFlag=!0:this.$scope.incomeWithdrawalCurrencyFlag=!1,b||(b="");var d=Number(this.$scope.withdrawalAmount.toString().replace(/[^0-9\.]+/g,""));(b>a.MinRange&&b<c||d>=a.MinRange&&d<=c)&&(b<a.MaxRange||d<a.MaxRange)&&(this.$scope.goalDetails&&null!=this.$scope.goalDetails&&(this.$scope.goalDetails.target.amount=b),this.changeSuggestion(),this.enrollmentCommonSvc.saveMonthlyIncomeWithdrawal(b),this.$scope.sliderWithdrawalAmount=Number(b),this.$scope.withdrawalAmount=this.$filter("currency")(b,void 0,0),angular.element("#sliderIncomeWithdraw").val(this.$filter("currency")(b,void 0,0)));var e=Number(this.$scope.withdrawalAmount.toString().replace(/[^0-9\.]+/g,""));a.weight<Number(a.MinRange)||a.weight>Number(c)||e<Number(a.MinRange)||e>Number(c)?(this.$scope.incomeWithdrawalErrorFlag=!0,this.$scope.sliderSuccessFlag=!0,this.$scope.incomeWithdrawalErrorMessage="Withdrawal target must be less than $10,000,000 per month."):this.$scope.incomeWithdrawalErrorFlag=!1}},b.prototype.getStoredIncomeWithdrawal=function(){if(this.enrollmentCommonSvc.getCompoundGrowthIncomeWithdrawal()){var a=Number(this.enrollmentCommonSvc.getCompoundGrowthIncomeWithdrawal());a&&(void 0!=this.$scope.questions&&(this.$scope.questions[12].weight=a),this.$scope.withdrawalAmount=this.$filter("currency")(a,void 0,0),angular.element("#sliderIncomeWithdraw").val(this.$filter("currency")(a,void 0,0)),null!=this.enrollmentCommonSvc.getDisplaySystemMonthlyValue()&&(this.$scope.goalDetails.target.amount=a))}else if(this.$scope.projectedIncomeWithdrawalAmount){var b=this.$scope.projectedIncomeWithdrawalAmount;this.$scope.questions[12].weight=Number(b.replace(/[^0-9\.]+/g,"")),this.$scope.withdrawalAmount=this.$filter("currency")(b,void 0,0),angular.element("#sliderIncomeWithdraw").val(this.$filter("currency")(b,void 0,0))}},b.prototype.redrawGoalChartOnValidWithdrawal=function(){this.$scope.incomeWithdrawalErrorFlag||this.$scope.redrawGoalChart(),this.$scope.sliderSuccessFlag=this.$scope.ageFlag||this.$scope.investmentFlag||this.$scope.contributionFlag||this.$scope.sliderFluctuationRuleFlag||this.$scope.sliderAgeRule||this.$scope.isSipIncomeGoal&&this.$scope.isLargeScreen&&this.$scope.incomeWithdrawalErrorFlag},b.prototype.initialiseIncomeWithdrawal=function(){this.redrawGoalChart(),(this.$scope.isSipIncomeGoal||this.isSipAccount()&&this.isIncomeGoal())&&8==this.$scope.groupID&&(null==this.enrollmentCommonSvc.getCompoundGrowthIncomeWithdrawal()?this.$scope.goalDetails&&this.$scope.goalDetails.target&&this.$scope.goalDetails.target.amount&&(void 0!=this.$scope.questions&&null!=this.$scope.questions&&(this.$scope.questions[12].weight=this.$scope.goalDetails.target.amount),this.$scope.withdrawalAmount=this.$filter("currency")(this.$scope.goalDetails.target.amount,void 0,0),angular.element("#sliderIncomeWithdraw").val(this.$filter("currency")(this.$scope.goalDetails.target.amount,void 0,0))):this.getStoredIncomeWithdrawal())},b.prototype.navigateToRecurringMoveMoneyTransfer=function(){var a;null!=this.enrollmentCommonSvc.getCompoundGrowthIncomeWithdrawal()&&(a=Number(this.enrollmentCommonSvc.getCompoundGrowthIncomeWithdrawal()),this.isIncomeGoal()&&this.$rootScope.$emit("HG_MOVEMONEY_LAUNCH",{type:2,amount:a,returnState:"charts",isWithdrawal:!0}))},b.prototype.isIncomeUpdateOnBigweb=function(){return this.$scope.isProfileUpdateFlag&&this.$scope.isIncomeGoal()&&this.$rootScope.deviceInfo.isLargeScreen()},b.prototype.getAccountPerformanceData=function(){if(null!=this.$scope.goalDetails&&void 0!=this.$scope.goalDetails&&null!=this.$scope.goalDetails.chart&&void 0!=this.$scope.goalDetails.chart&&null!=this.$scope.goalDetails.chart.chartSeriesProjected&&void 0!=this.$scope.goalDetails.chart.chartSeriesProjected){var a,b,c,d=this.$scope.goalDetails.chart.simulationMonthsXPoint?this.$scope.goalDetails.chart.simulationMonthsXPoint:0;null!=this.$scope.goalDetails.chart.chartSeriesProjected.lowSeries&&void 0!=this.$scope.goalDetails.chart.chartSeriesProjected.lowSeries&&null!=this.$scope.goalDetails.chart.chartSeriesProjected.lowSeries.data&&void 0!=this.$scope.goalDetails.chart.chartSeriesProjected.lowSeries.data&&(a=this.$scope.goalDetails.chart.chartSeriesProjected.lowSeries.data.length,a&&a<d?this.$scope.accountPerformancePoorValue=0:this.$scope.accountPerformancePoorValue=this.$scope.goalDetails.chart.chartSeriesProjected.lowSeries.data[d]?this.$scope.goalDetails.chart.chartSeriesProjected.lowSeries.data[d].y:0),null!=this.$scope.goalDetails.chart.chartSeriesProjected.midSeries&&void 0!=this.$scope.goalDetails.chart.chartSeriesProjected.midSeries&&null!=this.$scope.goalDetails.chart.chartSeriesProjected.midSeries.data&&void 0!=this.$scope.goalDetails.chart.chartSeriesProjected.midSeries.data&&(b=this.$scope.goalDetails.chart.chartSeriesProjected.midSeries.data.length,b&&b<d?this.$scope.accountPerformanceWorseValue=0:this.$scope.accountPerformanceWorseValue=this.$scope.goalDetails.chart.chartSeriesProjected.midSeries.data[d]?this.$scope.goalDetails.chart.chartSeriesProjected.midSeries.data[d].y:0),null!=this.$scope.goalDetails.chart.chartSeriesProjected.highSeries&&void 0!=this.$scope.goalDetails.chart.chartSeriesProjected.highSeries&&null!=this.$scope.goalDetails.chart.chartSeriesProjected.highSeries.data&&void 0!=this.$scope.goalDetails.chart.chartSeriesProjected.highSeries.data&&(c=this.$scope.goalDetails.chart.chartSeriesProjected.highSeries.data.length,c&&c<d?this.$scope.accountPerformanceAverageValue=0:this.$scope.accountPerformanceAverageValue=this.$scope.goalDetails.chart.chartSeriesProjected.highSeries.data[d]?this.$scope.goalDetails.chart.chartSeriesProjected.highSeries.data[d].y:0)}},b.prototype.sliderQuestionOneTimeContributionInput=function(a,b){var c=new RegExp("^[0-9,$]");return a&&a.match(c)?(this.$scope.oneTimeContributionSliderFlag=!1,this.$scope.sliderSuccessFlag=!1,a=a.replace(/[^0-9\.]+/g,""),this.$scope.sliderInputOneTimeContribution=this.$filter("currency")(a,void 0,0),$("#sliderOneTimeContribution").val(this.$filter("currency")(a,void 0,0)),this.enrollmentCommonSvc.saveOneTimeContributionAmount(a),this.$scope.goalDetails&&this.$scope.goalDetails.oneTimeContribution&&(this.$scope.goalDetails.oneTimeContribution.amount=a),a>=Number(b.MinRange)&&a<=Number(b.MaxRange)?(b.weight=Number(a),this.$scope.oneTimeContributionSliderFlag=!1,this.$scope.sliderSuccessFlag=!1):a<Number(b.MinRange)?(b.weight=Number(b.MinRange),this.$scope.oneTimeContributionSliderFlag=!0,this.$scope.sliderSuccessFlag=!0,this.$scope.oneTimeContributionInputError="Please enter valid amount"):a>Number(b.MaxRange)&&(b.weight=Number(b.MaxRange),a>999999999?(this.$scope.oneTimeContributionSliderFlag=!0,this.$scope.sliderSuccessFlag=!0,this.$scope.oneTimeContributionInputError="One time contribution must be less than $1,000,000,000."):(this.$scope.oneTimeContributionSliderFlag=!1,this.$scope.sliderSuccessFlag=!1)),a==Number(b.MaxRange)||a>Number(b.MaxRange)?this.$scope.oneTimeContributionFormatCurrencyFlag=!0:this.$scope.oneTimeContributionFormatCurrencyFlag=!1,void this.redrawGoalChart()):(this.$scope.oneTimeContributionSliderFlag=!0,this.$scope.sliderSuccessFlag=!0,this.$scope.oneTimeContributionInputError="Please enter valid amount",!1)},b.prototype.setRiskProfileAdditionQuestion=function(){"Mercury - Income"==this.enrollmentCommonSvc.getRiskProfileType()||"Mercury - Muni Income"==this.enrollmentCommonSvc.getRiskProfileType()?null!=this.enrollmentCommonSvc.getSelectRiskProfile()?Number(this.enrollmentCommonSvc.getSelectRiskProfile())>3?this.enrollmentCommonSvc.saveRiskProfileforAdditonalQuestions(this.enrollmentCommonSvc.getRiskProfileType()+" 3"):this.enrollmentCommonSvc.saveRiskProfileforAdditonalQuestions(this.enrollmentCommonSvc.getRiskProfileType()+" "+this.enrollmentCommonSvc.getSelectRiskProfile()):Number(this.enrollmentCommonSvc.getRiskProfile())>3?this.enrollmentCommonSvc.saveRiskProfileforAdditonalQuestions(this.enrollmentCommonSvc.getRiskProfileType()+" 3"):this.enrollmentCommonSvc.saveRiskProfileforAdditonalQuestions(this.enrollmentCommonSvc.getRiskProfileType()+" "+this.enrollmentCommonSvc.getRiskProfile()):"Mercury - Muni Return"==this.enrollmentCommonSvc.getRiskProfileType()&&null!=this.enrollmentCommonSvc.getSelectRiskProfile()?this.enrollmentCommonSvc.saveRiskProfileforAdditonalQuestions(this.enrollmentCommonSvc.getRiskProfileType()+" "+this.enrollmentCommonSvc.getSelectRiskProfile()):this.enrollmentCommonSvc.saveRiskProfileforAdditonalQuestions(this.enrollmentCommonSvc.getRiskProfileType()+" "+this.enrollmentCommonSvc.getRiskProfile())},b}(a.common.hgControllerBase);b.enrollmentCtrl=c}(b=a.enrollment||(a.enrollment={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(b){var c=function(a){function b(b,c,d,e,f,g,h,i,j){var k=this;a.call(this,b,c,d,f),this.$scope=b,this.$rootScope=c,this.$state=d,this.$window=e,this.hgContextSvc=f,this.hgStateSvc=g,this.hgCommonJs2nSvc=h,this.hgAccountOpenSvc=i,this.$location=j,this.$scope.continue=function(){return k.continue()},this.$scope.showDocument=function(a){return k.showDocument(a)},this.$scope.showWebDocument=function(a){return k.showWebDocument(a)},this.$scope.continueQuestion=function(){return k.continueQuestion()},this.$location.search().PromoCodesList&&this.$rootScope.isSIP&&this.$window.sessionStorage.setItem("PromoCodesList",this.$location.search().PromoCodesList)}return __extends(b,a),b.prototype.programIdentification=function(){var a=this;this.$scope.userForm.programPin.$viewValue?(this.hgContextSvc.showSpinner(),this.hgContextSvc.customization.getAdvisorProgramForProspect(this.$scope.userForm.programPin.$viewValue).then(function(b){b?(a.hgContextSvc.customization.setAdvisorProgram(b),a.$window.sessionStorage.setItem("advisorProgram",JSON.stringify(b)),a.$scope.advisorProgramPinError=!1,a.continue()):a.$scope.advisorProgramPinError=!0}).catch(function(b){a.$rootScope.raiseMessage(a.contextSvc.appConfig.featureUnavailableMessage),console.error("Submit failed."+b)}).finally(function(){a.hgContextSvc.hideSpinner()})):(this.$rootScope.raiseMessage(this.contextSvc.appConfig.featureUnavailableMessage),console.error("Missing programPin."))},b.prototype.continue=function(){this.hgAccountOpenSvc.removeAccountOpenSession(2),this.hgAccountOpenSvc.removeAccountOpenSession(3),this.hgAccountOpenSvc.removeReferrer(),this.$state.go("behavioralQuestions")},b.prototype.dismiss=function(){var a=_.find(this.hgContextSvc.navigationConfigurations,function(a){return"getStarted"===a.stateId});a&&this.hgStateSvc.goUrl(a.dismissRel)},b.prototype.showDocument=function(a){this.hgContextSvc.device.isNative()?this.hgCommonJs2nSvc.navigateToSelectedDocument(a):this.$window.open(a)},b.prototype.showWebDocument=function(a){this.hgContextSvc.device.isNative()?this.hgCommonJs2nSvc.navigateToExternal(a):this.$window.open(a)},b.prototype.continueQuestion=function(){this.$rootScope.isIIP?this.$scope.userForm.$valid?this.programIdentification():this.$scope.userForm.programPin.$pristine=!1:this.continue()},b.$inject=["$scope","$rootScope","$state","$window","hgContextSvc","hgStateSvc","hgCommonJs2nSvc","hgAccountOpenSvc","$location"],b}(a.common.hgControllerBase);b.getStartedCtrl=c}(b=a.enrollment||(a.enrollment={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(b){var c=function(a){function b(b,c,d,e,f,g,h,i,j,k){a.call(this,b,c,d,e,g,h,i,j,k),this.$scope=b,this.$rootScope=c,this.$state=d,this.$window=e,this.$modal=f,this.hgContextSvc=g,this.hgStateSvc=h,this.hgCommonJs2nSvc=i,this.hgAccountOpenSvc=j,this.$location=k}return __extends(b,a),b.prototype.continue=function(){this.$scope.$hide(),a.prototype.continue.call(this)},b.$inject=["$scope","$rootScope","$state","$window","$modal","hgContextSvc","hgStateSvc","hgCommonJs2nSvc","hgAccountOpenSvc","$location"],b}(a.enrollment.getStartedCtrl);b.getStartedModalCtrl=c}(b=a.enrollment||(a.enrollment={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){function b(){return{templateUrl:"templates/widget/hgTitleStyle1Widget.html",replace:!0,restrict:"E",scope:{pageTitleModel:"=value",type:"=type",detailsPage:"@detailsPage"},controller:c,controllerAs:"ctrl",bindToController:!0}}a.hgTitleStyle1=b;var c=function(){function a(a,b){this.scope=a,this.state=b}return a.prototype.goToDetails=function(){this.state.go(this.detailsPage)},a.$inject=["$scope","$state"],a}();a.hgTitleStyle1Ctrl=c}(b=a.widget||(a.widget={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){function b(){return{templateUrl:"templates/widget/hgTitleStyle2Widget.html",restrict:"E",replace:!0,scope:{value:"="},transclude:!0,link:function(a,b,c){a.callback=function(){a.value.buttonClickHandler()}}}}a.hgTitleStyle2=b}(b=a.widget||(a.widget={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){function b(){return{templateUrl:"templates/widget/hgTitleStyle3Widget.html",replace:!0,restrict:"E",scope:{stateTitleModel:"=value"}}}a.hgTitleStyle3=b}(b=a.widget||(a.widget={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){function b(){return{templateUrl:"templates/widget/hgTitleStyle4Widget.html",replace:!0,restrict:"E",scope:{titleModel:"=value"},controller:c}}a.hgTitleStyle4=b;var c=function(){function a(a){a.titleModel&&(a.titleModel.sign="",a.titleModel.percent>0?a.titleModel.sign="+":a.titleModel.percent<0&&(a.titleModel.sign="-"))}return a.$inject=["$scope"],a}();a.hgTitleStyle4DirController=c}(b=a.widget||(a.widget={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){function b(){return{templateUrl:"templates/widget/hgTitleStyle5Widget.html",replace:!0,restrict:"E",scope:{pageTitleModel:"=value"}}}a.hgTitleStyle5=b}(b=a.widget||(a.widget={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){function b(){return{templateUrl:"templates/widget/hgCounterWidget.html",replace:!0,restrict:"E",scope:{contributions:"=value"}}}a.hgCounter=b}(b=a.widget||(a.widget={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){function b(){return{templateUrl:"templates/widget/hgButtonStyle1Widget.html",restrict:"E",replace:!0,scope:{callback:"&callback",buttonText:"@",vm:"="},transclude:!0,link:function(a,b,c){}}}a.hgButtonStyle1=b}(b=a.widget||(a.widget={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){function b(){return{templateUrl:"templates/widget/hgTextBlockWidget.html",replace:!0,restrict:"E",scope:{textblock:"="}}}a.hgTextBlock=b}(b=a.widget||(a.widget={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){function b(){return{templateUrl:"templates/widget/riskProfile.html",replace:!0,restrict:"E",scope:{riskProfile:"=",viewmodel:"="},link:function(a,b,c,d){a.pageTitleModel=a.riskProfile.sliderGroup.iconToolTip}}}a.hgRiskProfile=b}(b=a.widget||(a.widget={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){function b(){return{templateUrl:"templates/widget/summaryStatement.html",replace:!0,restrict:"E",scope:{summaryStatement:"=",editState:"="},link:function(a,b,c,d){}}}a.hgSummaryStatement=b}(b=a.widget||(a.widget={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){function b(){return{templateUrl:"templates/widget/disclosureText.html",replace:!0,restrict:"E",scope:{goaldetails:"="},link:function(a,b,c,d){}}}a.hgDisclosureText=b}(b=a.widget||(a.widget={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){function b(){return{templateUrl:"templates/widget/contribution.html",replace:!0,restrict:"E",scope:{contribution:"=",state:"="},transclude:!0,link:function(a,b,c,d){a.pageTitleModel=a.contribution.slider.iconToolTip}}}a.hgContribution=b}(b=a.widget||(a.widget={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){function b(){return{templateUrl:"templates/widget/targetAmountWidget.html",replace:!0,restrict:"E",scope:{value:"="},transclude:!0,link:function(a,b,c,d){}}}a.hgTargetAmount=b}(b=a.widget||(a.widget={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){function b(){return{templateUrl:"templates/widget/progressBar.html",replace:!0,restrict:"E",scope:{progressBar:"="},link:function(a,b,c,d){}}}a.hgProgressBar=b}(b=a.widget||(a.widget={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){function b(){return{templateUrl:"templates/widget/hgTextBlock2Widget.html",replace:!0,restrict:"E",scope:{value:"="},link:function(a,b,c){}}}a.hgTextBlock2=b}(b=a.widget||(a.widget={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){function b(){return{templateUrl:"templates/widget/hgInputStyleWidget.html",replace:!0,restrict:"E",scope:{value:"=",viewmodel:"="},link:function(a,b,c){a.callback=function(){a.value.buttonClickHandler()}}}}a.hgInputStyle=b}(b=a.widget||(a.widget={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){function b(){return{templateUrl:"templates/widget/statusDonutChartWidget.html",restrict:"E",scope:{color:"=color",percentage:"=percentage",label:"=label",size:"=size",goaltype:"=goaltype"},replace:!1,link:function(a,b){function c(){var b={"goal-not-setup-class":"#ffffff","goal-on-track-class":"#26ffff","goal-at-risk-class":"#ffbf66","goal-off-track-class":"#ff7373"};(angular.isUndefined(a.percentage)||a.percentage>100)&&(a.percentage=100),e.addClass(a.color),setTimeout(function(){var c=b[a.color],e=a.percentage,f=[{y:e,color:c,borderWidth:0,borderColor:"#151f22"}];if(a.percentage<100){var g=100-a.percentage;f.push({y:g,color:"#151f22"})}d(l,f)},500)}function d(a,b){var c=a.series[0];c.setData(null),c.setData(b)}angular.isUndefined(a.color)&&(a.color="goal-not-setup-class");var e=b.find("#statusDonutChart");if(e){(angular.isUndefined(a.percentage)||a.percentage>100)&&(a.percentage=100),e.addClass(a.color);var f=e.css("color"),g=a.percentage,h=[{y:g,color:f,borderWidth:0,borderColor:"#151f22"}];if(a.percentage<100){var i=100-a.percentage;h.push({y:i,color:"#151f22"})}var j,k;void 0!=a.size&&null!=a.size?(k=a.size,j=a.size):(k=57,j=57),e.highcharts({chart:{type:"pie",margin:[1,1,1,1],backgroundColor:"rgba(0,0,0,0)",width:k,height:j,events:{redraw:function(){},load:function(){}}},title:null,credits:{enabled:!1},legend:{enabled:!1},plotOptions:{pie:{enableMouseTracking:!1,borderWidth:0,slicedOffset:0,shadow:!1,dataLabels:{enabled:!1},center:["50%","50%"],states:{hover:{enabled:!1}}}},tooltip:{enabled:!1},series:[{data:h,size:"100%",innerSize:"80%"}],exporting:{enabled:!1}});var l=e.highcharts();a.$on("$destroy",function(){l&&l.destroy()}),a.$watch("color",function(a,b){l&&c()},!0),a.$watch("percentage",function(a,b){l&&c()},!0)}}}}a.statusDonutChart=b}(b=a.widget||(a.widget={}))}(hg||(hg={}));var hg;!function(a){var b;!function(b){function c(){return{templateUrl:"templates/widget/hgMiniChartWidget.html",replace:!0,restrict:"E",scope:{model:"="},controller:d}}b.hgMiniChart=c;var d=function(){function b(c,d,e,f,g){var h=this;this.contextSvc=d,this.$filter=e,this.$window=f,this.goalService=g,this.redrawGoalChart=function(a,c,d){var e=h.contextSvc.device.isLargeScreen(),f="#FFFFFF",g="#26ffff",i="#ffbf66",j="#ff7373",k=f;switch(d.state){case 2:k=g;break;case 3:k=i;break;case 4:k=j}d.statusColor=k;var l,m=h.goalService.goalChartSimulationResults(c,d,!1,k),n=m.goalChart,o=n.results.series.mid,p=n.results.series.low,q=n.results.series.high,r=n.results.series.months,s=n.results.simulationMonths,t=m.today,u=m.targetDate,v=b.calcMonthDifference(t,u)+1,w=s<=60;angular.forEach(r,function(a,b){a==s&&(l=b)});var x=h.buildChartSeries(c,p,o,q,k,null,!1,!1,null,null,!0,l),y={highSeries:x.highSeries,lowSeries:x.lowSeries,midSeries:x.midSeries,xAxisMin:0,xAxisMax:l};d.chart=y,d.goalChartSeriesMini=[x.highSeries,x.midSeries,x.lowSeries];var z=new Array;z.push({value:0,text:"Today"});var A=_.min(x.lowSeries.data,function(a){return a.y}).y,B=_.max(x.highSeries.data,function(a){return a.y}).y,C=h.goalService.buildYAxisLabelsForIncome(x),D="#000",E={showGridLines:!1,showXLabels:!0,xLabels:z,yLabels:C,xMinValue:y.xAxisMin,xMaxValue:y.xAxisMax,yMinValue:A,yMaxValue:B,chartOverlays:void 0,plotAreaPaddingHorizontal:void 0,xPlotLineOptions:[h.goalService.configureTargetYearPlotLine(d,e,v,w,D,l)],yAxisLocation:1};d.goalChartOptionsMini=E,d.seriesValue={chartSeriesProjected:{lowSeries:{name:"Very Poor",data:[]},midSeries:{name:"Worse",data:[]},highSeries:{name:"Average",data:[]}}};var F=x.lowSeries.data.length,G=x.midSeries.data.length,H=x.highSeries.data.length;F<l?d.seriesValue.chartSeriesProjected.lowSeries.data[0]={x:_.last(x.lowSeries.data).x,y:0}:d.seriesValue.chartSeriesProjected.lowSeries.data[0]={x:F,y:_.last(x.lowSeries.data).y},G<l?d.seriesValue.chartSeriesProjected.midSeries.data[0]={x:G,y:0}:d.seriesValue.chartSeriesProjected.midSeries.data[0]={x:H,y:_.last(x.midSeries.data).y},H<l?d.seriesValue.chartSeriesProjected.highSeries.data[0]={x:H,y:0}:d.seriesValue.chartSeriesProjected.highSeries.data[0]={x:H,y:_.last(x.highSeries.data).y}},this.buildChartSeries=function(a,b,c,d,e,f,g,h,i,j,k,l){var m=[],n=[],o=[];angular.forEach(c,function(a,b){0!=a&&b<=l&&m.push({x:b,y:a})}),angular.forEach(b,function(a,b){0!=a&&b<=l&&o.push({x:b,y:a})}),angular.forEach(d,function(a,b){0!=a&&b<=l&&n.push({x:b,y:a})}),m.length<l&&m.push({x:m.length,y:0}),o.length<l&&o.push({x:o.length,y:0}),n.length<l&&n.push({x:n.length,y:0});var p={name:"Test series 1",data:o,fillColor:"#279ed8",lineWidth:0},q={name:"Test series 2",data:m,fillColor:"#456282",
lineWidth:0},r={name:"Test series 3",data:n,fillColor:"#384d66",lineWidth:0};return{lowSeries:p,midSeries:q,highSeries:r}},c.$watch("model.goalChartSeries",function(a,b){h.redrawGoalChart(c.model.oneTimeContribution.amount,c.model.type,c.model)}),this.goalUiCommonHelper=new a.assets.GoalUICommon(e),this.defaultGoalAmount=!0}return b.calcMonthDifference=function(a,b){var c=12*a.getFullYear(),d=12*b.getFullYear();return d+b.getMonth()-(c+a.getMonth())},b.$inject=["$scope","hgContextSvc","$filter","$window","hgGoalService"],b}();b.hgMiniChartDirController=d}(b=a.widget||(a.widget={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){function b(){return{templateUrl:"templates/widget/goalStatusWidget.html",replace:!0,restrict:"E",scope:{goalstate:"=",goaltype:"=",goaltitle:"="},link:function(a,b,c){}}}a.hgGoalStatus=b}(b=a.widget||(a.widget={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){function b(){return{restrict:"AE",templateUrl:"templates/widget/checkListWidget.html",replace:!0,transclude:!0,scope:{itemslist:"=",callBackOnSelction:"=",limit:"=selectionLimit",onSelection:"&callbackFunction",selecteditemlist:"=selectedItemList"},link:function(a,b,c){a.selectedItems=a.selecteditemlist.length>0?a.selecteditemlist:[],a.totalSelectedItems=a.selectedItems.length>0?a.selectedItems.length:0,a.selectedItems.length>0&&angular.forEach(a.selectedItems,function(b,c){angular.forEach(a.itemslist,function(a,c){b.id===a.id&&(a.selected=!0)})}),a.selection=function(b,c){if(c){if(a.selectedItems.length<=a.limit&&a.selectedItems.indexOf(a.itemslist[b].name)<1){var d={name:a.itemslist[b].name,id:a.itemslist[b].id};a.selectedItems.push(d),a.onSelection({list:a.selectedItems})}}else angular.forEach(a.selectedItems,function(c,d){c.name==a.itemslist[b].name&&a.selectedItems.splice(d,1),a.onSelection({list:a.selectedItems})});a.totalSelectedItems=a.selectedItems.length},a.shouldBeDisabled=function(b){return!(a.totalSelectedItems!=a.limit||!b)}}}}a.hgCheckList=b}(b=a.widget||(a.widget={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(a,b,c){this.$scope=a,this.$rootScope=b,this.$modal=c,this.$scope.slides=[],this.init(this.$scope)}return a.prototype.init=function(a){a.myInterval=-1;var b=0;a.addSlide=function(){a.slides.push({image:"img"+b,title:["Welcome","Lorem Ipsum","Ipsum Lorem"][b],text:["Lorem Ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor.","Vivamus elementum semper nisi. Aenean vulputate eleifend tellus. Aenean leo ligula, porttitor eu, consequat vitae sem quam semper libero.","Nam quam nunc, blandit vel, luctus pulvinar, hendrerit id, lorem. Maecenas nec odio et ante tincidunt tempus. Donec vitae sapien ut libero venenatis faucibus."][b],linkText:["Explore as Guest","Explore as Guest","Explore as Guest"][b],faIcon:["fa-bank","fa-sitemap","fa-anchor"][b]}),b+=1};for(var c=0;c<3;c++)a.addSlide()},a}();a.launchCtrl=b}(b=a.launch||(a.launch={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(b){var c=function(a){function b(b,c,d,e,f,g,h,i,j,k,l,m,n){var o=this;a.call(this,c,g,d,j),this.forgotPwdUrl=null,this.q=b,this.scope=c,this.state=d,this.window=e,this.location=h,this.modal=f,this.hgAuthSvc=i,this.hgContextSvc=j,this.prospectLoginSvc=k,this.suitabilityQuestionsSvc=l,this.accountApplicationSvc=m,this.accountOpenSvc=n,this.rootScope=g,c.tryIt=function(){return o.tryIt()},c.login=function(){return o.login()},c.navigateToForgotPassword=function(){return o.navigateToForgotPassword()},c.initProspectView=function(){return o.initProspectView()},c.initProspectCreateView=function(){return o.initProspectCreateView()},c.initProspectLoginView=function(){return o.initProspectLoginView()},c.launchProspectCreateView=function(){return o.launchProspectCreateView()},c.launchProspectLoginView=function(){return o.launchProspectLoginView()},c.cancel=function(){return o.cancel()},c.isBigWeb=this.hgContextSvc.isBigweb(),c.prospect={source:"login",title:"Save or continue an unfinished profile or application.",additionalInfo:"If you already have an account, please use the previous screen.",inputControls:"empty",actionControls:"empty",otherControls:"empty"},this.forgotPwdUrl=this.hgContextSvc.appConfig.forgotPasswordLink,c.next=function(a){return o.next(a)},c.previous=function(a){return o.previous(a)}}return __extends(b,a),b.prototype.initProspectView=function(){var a=this.location.path();"/prospectCreate"==a?this.scope.prospect={source:"create",title:"Save your progress using your email address and password.",additionalInfo:"",inputControls:"empty",actionControls:"empty",otherControls:"modalControl"}:"/prospectLogin"==a&&(this.scope.prospect={source:"login",title:"Save or continue an unfinished profile or application.",additionalInfo:"If you already have an account, please use the previous screen.",inputControls:"empty",actionControls:"empty",otherControls:"modalControl"})},b.prototype.initProspectLoginView=function(){this.scope.prospect={source:"login",title:"Save or continue an unfinished profile or application.",additionalInfo:"Enter your email address and password below to continue an unfinished profile or application. If you already have an account, please use the previous screen to login.",inputControls:"empty",actionControls:"empty",otherControls:"modalControl"}},b.prototype.initProspectCreateView=function(){this.scope.prospect={source:"create",title:"Save your progress using your email address and password.",additionalInfo:"",inputControls:"empty",actionControls:"empty",otherControls:"modalControl"}},b.prototype.tryIt=function(){this.state.go("behavioralQuestions")},b.prototype.login=function(){var a={userId:"pcc2.user2@scsdev1.com",firstName:"Bob",lastName:"Jones",EmailAddress:"pcc2.user2@scsdev1.com",SocialSecurityNumber:null,dateOfBirth:null,DrivingLicenceNumber:null};this.hgContextSvc.setIdentity(a),this.state.go(this.hgContextSvc.appConfig.defaultSecureRouteState)},b.prototype.navigateToForgotPassword=function(){this.window.open(this.forgotPwdUrl)},b.prototype.createOrValidateProspectLogin=function(a){var b=this,c=this.q.defer();return this.prospectLoginSvc.CreateOrValidateProspectLogin(a).then(function(d){"Success"==d?"2"==a.Mode?(a.ApplicationId=b.accountOpenSvc.getApplicationid(),b.getAccountDetails(a.ApplicationId)):(b.rootScope.raiseMessage("Your progress will now be saved automatically as you complete each step.",3,"Save Successful"),b.scope.$hide()):"Invalid Password"==d.toString()||"No records found"==d.toString()?(b.scope.errorMessage="You entered an invalid email address or password. Please try again.",b.scope.prospectLoginRequest.Password="",b.scope.prospectLoginRequest.EmailId=""):b.scope.errorMessage=d.toString(),c.resolve(d)}).catch(function(){c.reject("Create Prospect Login failed.")}),c.promise},b.prototype.getQuestions=function(a){var b=this,c=this.q.defer();return this.contextSvc.showSpinner(),this.suitabilityQuestionsSvc.getAnswers(a).then(function(a){if(400!=a.ReturnCode){var d=b.processQuestionsResponse(a);d>8?b.state.go("accountopen.accountType"):b.state.go("behavioralQuestions")}else b.state.go("behavioralQuestions");b.scope.$hide(),c.resolve(a)}).catch(function(){c.reject("getQuestions failed.")}).finally(function(){b.contextSvc.hideSpinner()}),c.promise},b.prototype.getAccountDetails=function(a){var b=this,c=this.q.defer();return this.accountApplicationSvc.saveAccountDetailsInLocalStorage(a).then(function(d){d?b.suitabilityQuestionsSvc.getAnswers(a).then(function(a){b.state.go(d),b.scope.$hide()}).catch(function(a){c.reject("getQuestions failed: suitabilityQuestionsSvc.getAnswers().")}):b.getQuestions(a),c.resolve(d)}).catch(function(){c.reject("getQuestions failed.")}),c.promise},b.prototype.launchProspectCreateView=function(){this.scope.$hide(),this.hgAuthSvc.prospectCreateModal()},b.prototype.launchProspectLoginView=function(){this.scope.$hide(),this.hgAuthSvc.prospectLoginModal()},b.prototype.next=function(a){var b=this;a||(a=this.location.path()),this.scope.errorMessage="";var c=this.accountOpenSvc.getApplicationid();"/prospectCreate"==a?(this.scope.prospectLoginRequest={ApplicationId:c,EmailId:this.scope.prospectLoginRequest.EmailId,Mode:"0",Password:this.scope.prospectLoginRequest.Password},c?this.createOrValidateProspectLogin(this.scope.prospectLoginRequest):this.suitabilityQuestionsSvc.createApplication().then(function(){c=b.accountOpenSvc.getApplicationid(),b.scope.prospectLoginRequest={ApplicationId:c,EmailId:b.scope.prospectLoginRequest.EmailId,Mode:"0",Password:b.scope.prospectLoginRequest.Password},b.createOrValidateProspectLogin(b.scope.prospectLoginRequest)})):"/prospectLogin"==a&&(this.scope.prospectLoginRequest={ApplicationId:c,EmailId:this.scope.prospectLoginRequest.EmailId,Mode:"2",Password:this.scope.prospectLoginRequest.Password},this.createOrValidateProspectLogin(this.scope.prospectLoginRequest))},b.prototype.processQuestionsResponse=function(a){var b=1;return _.each(a.Questions,function(a){a&&a.Answers&&_.each(a.Answers,function(c){c.IsSelected&&(b=a.QuestionId)})}),b>8&&(b=8),this.accountOpenSvc.lastQuestionId(b),b},b.prototype.processAccountDetailsResponse=function(a){},b.prototype.previous=function(a){a||(a=this.location.path()),"/prospectCreate"==a?(this.scope.$hide(),this.launchProspectLoginView()):"/prospectLogin"==a&&(this.scope.$hide(),this.hgAuthSvc.login(1))},b.prototype.cancel=function(){this.scope.$hide()},b.$inject=["$q","$scope","$state","$window","$modal","$rootScope","$location","hgAuthSvc","hgContextSvc","hgProspectLoginSvc","hgSuitabilityQuestionsSvc","hgAccountApplicationSvc","hgAccountOpenSvc"],b}(a.common.hgControllerBase);b.loginCtrl=c}(b=a.auth||(a.auth={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(b){var c=function(a){function b(b,c,d,e,f,g,h,i,j,k,l,m,n){var o=this;a.call(this,c,f,d,i),this.forgotPwdUrl=null,this.q=b,this.scope=c,this.state=d,this.window=e,this.hgAuthSvc=h,this.hgContextSvc=i,this.prospectLoginSvc=j,this.suitabilityQuestionsSvc=k,this.accountApplicationSvc=l,this.accountOpenSvc=m,this.rootScope=f,this.routerJs2nSvc=n,c.tryIt=function(){return o.tryIt()},c.login=function(){return o.login()},c.navigateToForgotPassword=function(){return o.navigateToForgotPassword()},c.initProspectView=function(){return o.initProspectView()},c.initProspectCreateView=function(){return o.initProspectCreateView()},c.initProspectLoginView=function(){return o.initProspectLoginView()},c.launchProspectCreateView=function(){return o.launchProspectCreateView()},c.launchProspectLoginView=function(){return o.launchProspectLoginView()},c.cancel=function(){return o.cancel()},c.isBigWeb=this.hgContextSvc.isBigweb(),c.prospect={source:"login",title:"Save or continue an unfinished profile or application.",additionalInfo:"If you already have an account, please use the previous screen.",inputControls:"empty",actionControls:"empty",otherControls:"empty"},this.forgotPwdUrl=this.hgContextSvc.appConfig.forgotPasswordLink,c.next=function(a){return o.next(a)},c.previous=function(a){return o.previous(a)}}return __extends(b,a),b.prototype.initProspectView=function(){var a=this.location.path();"/prospectCreate"==a?this.scope.prospect={source:"create",title:"Save your progress using your email address and password.",additionalInfo:"",inputControls:"empty",actionControls:"empty",otherControls:"empty"}:"/prospectLogin"==a&&(this.scope.prospect={source:"login",title:"Save or continue an unfinished profile or application.",additionalInfo:"If you already have an account, please use the previous screen.",inputControls:"empty",actionControls:"empty",otherControls:"empty"})},b.prototype.initProspectLoginView=function(){this.scope.prospect={source:"login",title:"Save or continue an unfinished profile or application.",additionalInfo:"Enter your email address and password below to continue an unfinished profile or application. If you already have an account, please use the previous screen to login.",inputControls:"empty",actionControls:"empty",otherControls:"noHeader"}},b.prototype.initProspectCreateView=function(){this.scope.prospect={source:"create",title:"Save your progress using your email address and password.",additionalInfo:"",inputControls:"empty",actionControls:"empty",otherControls:"noHeader"}},b.prototype.tryIt=function(){this.state.go("behavioralQuestions")},b.prototype.login=function(){var a={userId:"pcc2.user2@scsdev1.com",firstName:"Bob",lastName:"Jones",EmailAddress:"pcc2.user2@scsdev1.com",SocialSecurityNumber:null,dateOfBirth:null,DrivingLicenceNumber:null};this.hgContextSvc.setIdentity(a),this.state.go(this.hgContextSvc.appConfig.defaultSecureRouteState)},b.prototype.navigateToForgotPassword=function(){this.window.open(this.forgotPwdUrl)},b.prototype.createOrValidateProspectLogin=function(a){var b=this,c=this.q.defer();return this.prospectLoginSvc.CreateOrValidateProspectLogin(a).then(function(d){if("Success"==d)if("2"==a.Mode)a.ApplicationId=b.accountOpenSvc.getApplicationid(),b.getAccountDetails(a.ApplicationId);else{b.rootScope.raiseMessage("Your progress will now be saved automatically as you complete each step.",3,"Save Successful");var e=b.prospectLoginSvc.getSaveResumeNavigationState();b.prospectLoginSvc.setSaveResumeNavigationState(null),e?b.state.go(e):b.state.go("behavioralQuestions")}else"Invalid Password"==d.toString()||"No records found"==d.toString()?b.scope.errorMessage="You entered an invalid email address or password. Please try again.":b.scope.errorMessage=d.toString();c.resolve(d)}).catch(function(){c.reject("Create Prospect Login failed.")}),c.promise},b.prototype.getQuestions=function(a){var b=this,c=this.q.defer();return this.contextSvc.showSpinner(),this.suitabilityQuestionsSvc.getAnswers(a).then(function(a){if(400!=a.ReturnCode){var d=b.processQuestionsResponse(a);d>7?b.state.go("planRecommendation"):b.state.go("behavioralQuestions",{GroupID:"GroupID"+d})}else b.state.go("behavioralQuestions");c.resolve(a)}).catch(function(){c.reject("getQuestions failed.")}).finally(function(){b.contextSvc.hideSpinner()}),c.promise},b.prototype.getAccountDetails=function(a){var b=this,c=this.q.defer();return this.accountApplicationSvc.saveAccountDetailsInLocalStorage(a).then(function(d){d?b.suitabilityQuestionsSvc.getAnswers(a).then(function(a){b.state.go(d)}).catch(function(a){c.reject("getQuestions failed: suitabilityQuestionsSvc.getAnswers().")}):b.getQuestions(a),c.resolve(d)}).catch(function(){c.reject("getQuestions failed.")}),c.promise},b.prototype.launchProspectCreateView=function(){this.state.go("prospectCreate")},b.prototype.launchProspectLoginView=function(){this.state.go("prospectLogin")},b.prototype.next=function(a){var b=this;a||(a=this.location.path()),this.scope.errorMessage="";var c=this.accountOpenSvc.getApplicationid();"/prospectCreate"==a?(this.scope.prospectLoginRequest={ApplicationId:c,EmailId:this.scope.prospectLoginRequest.EmailId,Mode:"0",Password:this.scope.prospectLoginRequest.Password},c?this.createOrValidateProspectLogin(this.scope.prospectLoginRequest):this.suitabilityQuestionsSvc.createApplication().then(function(){c=b.accountOpenSvc.getApplicationid(),b.scope.prospectLoginRequest={ApplicationId:c,EmailId:b.scope.prospectLoginRequest.EmailId,Mode:"0",Password:b.scope.prospectLoginRequest.Password},b.createOrValidateProspectLogin(b.scope.prospectLoginRequest)})):"/prospectLogin"==a&&(this.scope.prospectLoginRequest={ApplicationId:c,EmailId:this.scope.prospectLoginRequest.EmailId,Mode:"2",Password:this.scope.prospectLoginRequest.Password},this.createOrValidateProspectLogin(this.scope.prospectLoginRequest))},b.prototype.processQuestionsResponse=function(a){var b=0;return _.each(a.Questions,function(a){a&&a.Answers&&_.each(a.Answers,function(c){c.IsSelected&&(b=a.QuestionId)})}),b>8&&(b=8),this.accountOpenSvc.lastQuestionId(b),b},b.prototype.processAccountDetailsResponse=function(a){},b.prototype.previous=function(a){a||(a=this.location.path()),"/prospectCreate"==a?this.launchProspectLoginView():"/prospectLogin"==a&&(this.contextSvc.device.isNative()?this.routerJs2nSvc.sendHideWeb():this.hgAuthSvc.login(1,null,"launch"))},b.prototype.cancel=function(){this.hgAuthSvc.login(1)},b.$inject=["$q","$scope","$state","$window","$rootScope","$location","hgAuthSvc","hgContextSvc","hgProspectLoginSvc","hgSuitabilityQuestionsSvc","hgAccountApplicationSvc","hgAccountOpenSvc","hgRouterJs2nSvc"],b}(a.common.hgControllerBase);b.prospectLoginCtrl=c}(b=a.auth||(a.auth={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l){this.$scope=a,this.$rootScope=b,this.$window=c,this.$modal=d,this.$state=e,this.$timeout=f,this.hgAuthSvc=g,this.hgContextSvc=h,this.hgCommonJs2nSvc=i,this.hgCrossOriginMessageSvc=j,this.hgStateSvc=k,this.loginType=l,a.loginType=l,a.micrositeUrl=this.hgAuthSvc.buildMicrositeUrl(this.$scope.loginType),a.showMicrositeLogin=function(){return 1===a.loginType},this.registerCallbacks()}return a.prototype.dismiss=function(a){1===this.$scope.loginType&&"login"===this.$state.current.name&&"user navigated to prospect login via message callback"!==a&&"user completed login flow"!==a&&this.hgStateSvc.goUrl({web:"public://",mobile:null})},a.prototype.registerCallbacks=function(){var a=this;this.cancelCallback={type:"cancelLoginEvent",context:this.hgContextSvc.appConfig.identityProviderMessageContext,callback:function(b){return a.cancelCallbackFn(b)},executeOnce:!0},this.forgotPasswordCallback={type:"forgotPasswordEvent",context:this.hgContextSvc.appConfig.identityProviderMessageContext,callback:function(b){return a.forgotPasswordCallbackFn(b)},executeOnce:!1},this.prospectLoginCallback={type:"prospectLoginEvent",context:this.hgContextSvc.appConfig.identityProviderMessageContext,callback:function(b){return a.prospectLoginCallbackFn(b)},executeOnce:!1},this.submitAuthCodeCallback={type:"submitAuthCodeToAuthnApiEvent",context:this.hgContextSvc.appConfig.identityProviderMessageContext,callback:function(b){return a.submitAuthCodeCallbackFn(b)},executeOnce:!1},this.loginCompleteCallback={type:"loginCompleteEvent",context:this.hgContextSvc.appConfig.hgUIMessageContext,callback:function(b){return a.loginCompleteCallbackFn(b)},executeOnce:!1},this.hgCrossOriginMessageSvc.registerCallback(this.cancelCallback),this.hgCrossOriginMessageSvc.registerCallback(this.forgotPasswordCallback),this.hgCrossOriginMessageSvc.registerCallback(this.prospectLoginCallback),this.hgCrossOriginMessageSvc.registerCallback(this.submitAuthCodeCallback),this.hgCrossOriginMessageSvc.registerCallback(this.loginCompleteCallback)},a.prototype.cancelCallbackFn=function(a){var b=this;this.$timeout(function(){b.$scope.$hide(),b.unregisterCallbacks(),b.dismiss("user cancelled via message callback")})},a.prototype.forgotPasswordCallbackFn=function(a){this.$window.open(this.hgContextSvc.appConfig.forgotPasswordLink)},a.prototype.prospectLoginCallbackFn=function(a){var b=this;this.unregisterCallbacks(),this.$scope.$hide(),this.$scope.$digest(),this.$timeout(function(){b.hgAuthSvc.prospectLoginModal(3)})},a.prototype.submitAuthCodeCallbackFn=function(a){this.$rootScope.session.identity||(this.$rootScope.session.identity={}),this.$rootScope.session.identity.userId=a.userId,this.hgContextSvc.setIdentity(this.$rootScope.session.identity)},a.prototype.loginCompleteCallbackFn=function(a){this.hgContextSvc.setShowModalBackdrop("true"),this.$state.go("modalBackdrop"),this.$scope.$hide(),this.unregisterCallbacks(),this.dismiss("user completed login flow"),this.hgAuthSvc.redirectPostLogin(a.mode)},a.prototype.unregisterCallbacks=function(){this.hgCrossOriginMessageSvc.unregisterCallback(this.cancelCallback),this.hgCrossOriginMessageSvc.unregisterCallback(this.forgotPasswordCallback),this.hgCrossOriginMessageSvc.unregisterCallback(this.prospectLoginCallback),this.hgCrossOriginMessageSvc.unregisterCallback(this.submitAuthCodeCallback),this.hgCrossOriginMessageSvc.unregisterCallback(this.loginCompleteCallback)},a.$inject=["$scope","$rootScope","$window","$modal","$state","$timeout","hgAuthSvc","hgContextSvc","hgCommonJs2nSvc","hgCrossOriginMessageSvc","hgStateSvc","loginType"],a}();a.loginModalCtrl=b}(b=a.auth||(a.auth={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(a,b,c,d,e,f,g,h){this.$scope=a,this.$rootScope=b,this.$window=c,this.$timeout=d,this.stateSvc=e,this.authSvc=f,this.contextSvc=g,this.commonJs2nSvc=h,this.processLoginIntervention()}return a.prototype.processLoginIntervention=function(){var a=parseInt(this.contextSvc.getLogonStateFromSession()),b=!0,c="";switch(a){case 2010:case 2020:var d=this.contextSvc.getAccessTokenFromSession(),e=this.contextSvc.getOTPTokensFromSession();d&&d.length>0||(b=!1),e&&e.length>0||(b=!1),c="&access_token="+d+"&otp_tokens="+e+"&logon_state="+a+"&page=otpToken";break;case 3090:case 3e3:c="&page=hardLock";break;default:this.stateSvc.goToUnsecureMessagePage(7)}var f=this.authSvc.buildMicrositeLoginInterventionUrl(1,"cancelLogin"),g=f+c;b?(this.commonJs2nSvc.raiseRedirectBeginEvent(this.contextSvc.appConfig.url+"/#/message/7",this.contextSvc.appConfig.redirectTimeout),this.$window.location.href=g):this.stateSvc.goToUnsecureMessagePage(7)},a}();a.loginInterventionCtrl=b}(b=a.auth||(a.auth={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(a,b,c,d,e,f,g){this.$scope=a,this.$rootScope=b,this.$window=c,this.$timeout=d,this.stateSvc=e,this.authSvc=f,this.contextSvc=g,this.continuePostLoginInterventionSuccess()}return a.prototype.continuePostLoginInterventionSuccess=function(){this.$rootScope.$broadcast("USER_LOGGED_IN_EVENT",{hardRefresh:!1})},a}();a.loginInterventionSuccessCtrl=b}(b=a.auth||(a.auth={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(b){var c=function(a){function b(b,c,d,e,f,g,h,i,j,k,l,m,n,o){a.call(this,b,c,d,e),this.$scope=b,this.$rootScope=c,this.$state=d,this.contextSvc=e,this.$modal=f,this.$filter=g,this.$controller=h,this.hgCommonJs2nSvc=i,this.hgMoneyTransferSvc=j,this.$timeout=k,this.goalService=l,this.suitabilityQuestionsSvc=m,this.enrollmentCommonSvc=n,this.portfolioSvc=o,this.SUCCESSFUL_TRANSFER_MSG="Thank you, your online transfer has been processed successfully.",this.SUCCESSFUL_CANCEL_TRANSFER_MSG="Thank you, your online transfer has been canceled.",this.SUCCESSFUL_UPDATE_TRANSFER_MSG="Thank you, your online transfer has been updated successfully.",this.SUCCESSFUL_TRANSFER_INTO_SIP_ACCOUNT_MSG="Once deposited, funds will be invested in your portfolio within 3-4 business days.",this.CHARTS_GOAL_STATE="charts.goal.goalMain",this.PLANRECOMMENDATION_STATE="planRecommendation",this.PLAN_CONFIRMATION_STATE="portfolioConfirmation",this.DASHBOARD_STATE="charts",this.init()}return __extends(b,a),b.prototype.init=function(){var a=this;this.checkFundingFlow(),this.$scope.title="Money Transfer",this.$scope.hasError=!1,this.$scope.hasErrorMessage=!1,this.$scope.errorMessage="",this.$scope.showMini=!0,this.$scope.showSecondaryTransferDate=!1,this.$scope.showModal=!1,this.$scope.showAgreement=!1,this.$scope.hasInvalidTransactionMessage=!1,this.$scope.hasInvalidTransactionCMSID=!1,this.$scope.contributionYear=!1,this.$scope.hasSubmitted=!1,this.$scope.isActiveTransaction=!1,this.$scope.distributionDesc=!1,this.$scope.isPartialRecurringTrans=!1,this.$scope.investmentAmountText=function(){return a.getInvestmentAmountText()},this.$scope.investmentDateText=function(){return a.getInvestmentDateText()},this.watcherFunctions=[],this.$scope.is1stDpVisible=!1,this.$scope.is2ndDpVisible=!1,this.$scope.minDate="",this.$scope.newMinDate=new Date,this.$scope.maxDate="",this.$scope.reset=function(){a.resetModel()},this.$scope.submitTransfer=function(){a.submitTransfer()},this.$scope.back=function(){a.back()},this.$scope.transferStatus=function(){a.transferStatus()},this.$scope.newTransfer=function(){a.newTransfer()},this.$scope.validateTransfer=function(){a.validateTransfer()},this.$scope.validateAccountPair=function(){a.validateAccountPair()},this.$scope.showFewer=function(){a.showFewer()},this.$scope.showMore=function(){a.showMore()},this.$scope.setFromOverlay=function(){a.resetErrorMessage(),a.setFromOverlay()},this.$scope.decline=function(){a.decline()},this.$scope.done=function(b){a.done(b)},this.$scope.showRecurringTransaction=function(b){b.preventDefault(),b.stopPropagation(),a.showRecurringTransaction()},this.$scope.setToOverlay=function(){a.resetErrorMessage(),a.setToOverlay()},this.$scope.fnChangedTransferDate=function(){},this.$scope.openFirstDP=function(b){a.$scope.is1stDpVisible=b},this.$scope.dateOptions=function(){},this.$scope.openSecondDP=function(b){var c=a.$scope.isFunding?a.$scope.transferData.recurringStartDate:new Date(a.$scope.transferData.firstTransferDate);if("undefined"!=typeof c&&null!==c){var d=c.getDate()+1,e=c.getMonth()+1,f=c.getFullYear();a.$scope.minDate=e+"/"+d+"/"+f,a.$scope.newMinDate=new Date(a.$scope.minDate);var g=new Date(f,e,d);g.setDate(g.getDate()),a.$scope.maxDate=a.formatDate(g,"yyyy-MM-dd"),a.$scope.is2ndDpVisible=b}},this.$scope.deleteTransfer=function(){a.deleteTransfer()},this.$scope.goToTWEedit=function(){return a.goToTWEedit()},this.$scope.finishTWEedit=function(){return a.finishTWEedit()},this.$scope.recalculateTwe=function(b){return a.setTweCalculations(b)},this.$scope.showRecurring=function(){return a.showRecurring()},this.$scope.getAcknowledgeDoneText=function(){return a.$scope.isFundingInitialIncome,"Done"},this.$scope.showFrequencyLabel=function(){return a.showFrequencyLabel()},this.$scope.$on("$stateChangeStart",function(b,c,d,e,f){a.$scope.isActiveTransaction||a.$scope.isPreviouslyInitiated||"moveMoney.funding.transferSetup"!=c.name&&"moveMoney.funding.transferSetup.edit"!=c.name&&"moveMoney.funding.transferSetup.editTransferGoalMMData"!=c.name||a.init()}),this.$scope.$on("resetRecurringTransaction",function(b,c,d,e,f){a.resetRecurring()}),this.$scope.$on("accountListUpdated",function(b,c,d,e,f){a.hgMoneyTransferSvc.clearCache(),a.$scope.acctResponse=null}),this.getTransferData(),this.getRTMLData(),this.setUILabels(),this.setNetDisabledMessage()},b.prototype.setEditTransferNavigationData=function(){var a=this.$state.current;a&&(this.$scope.transferId=a.transferId,this.$scope.isNewTransfer=a.isNewTransfer,this.resetEditTransferNavigationData(this.$state.current.name))},b.prototype.resetEditTransferNavigationData=function(a){var b=this.$state.current;b.transferId&&delete b.transferId,b.isNewTransfer&&delete b.isNewTransfer},b.prototype.isEditMode=function(){var a=!1;return"moveMoney.funding.transferSetup"==this.$state.current.name&&this.$scope.goalMoveMoneyNavigationData&&this.$scope.goalMoveMoneyNavigationData.type&&(this.$scope.goalMoveMoneyNavigationData={},this.$scope.transferId="",this.$scope.isNewTransfer=!1),"moveMoney.funding.transferSetup.edit"!=this.$state.current.name&&"moveMoney.funding.transferSetup.editTransferGoalMMData"!=this.$state.current.name||this.setEditTransferNavigationData(),this.$state&&"moveMoney.funding.transferSetup.edit"==this.$state.current.name&&this.$scope.transferId&&this.$scope.transferId.length>0&&(a=!0),a},b.prototype.getTransferConfirmationState=function(){var a="moveMoney.funding.transferConfirmation";return this.$scope.goalMoveMoneyNavigationData.returnState==this.CHARTS_GOAL_STATE&&(a="moveMoney.funding.transferGoalMMConfirmation"),a},b.prototype.getTransferAcknowledgementState=function(){var a="moveMoney.funding.transferAcknowledgement";return this.$scope.hideNewTransferOnAcknowledgment=!!this.$scope.isFundingInitialIncome,this.$scope.goalMoveMoneyNavigationData.returnState==this.CHARTS_GOAL_STATE&&(this.$scope.hideNewTransferOnAcknowledgment=!0,a="moveMoney.funding.transferGoalMMAcknowledgement"),a},b.prototype.getTransferSetupState=function(){var a="moveMoney.funding.transferSetup";if(this.$scope.goalMoveMoneyNavigationData.returnState==this.CHARTS_GOAL_STATE){var b=this.$scope.transferId;a=b&&b.length>0?"moveMoney.funding.transferSetup.edit":"moveMoney.funding.transferSetup.editTransferGoalMMData"}return a},b.prototype.getTransferSuccessState=function(){var a="moveMoney.moveMoneyLaunch";return this.$scope.goalMoveMoneyNavigationData&&this.$scope.goalMoveMoneyNavigationData.returnState==this.CHARTS_GOAL_STATE?a=this.CHARTS_GOAL_STATE:this.$scope.goalMoveMoneyNavigationData&&this.$scope.goalMoveMoneyNavigationData.returnState==this.DASHBOARD_STATE&&(this.suitabilityQuestionsSvc.removeReferrer(),this.suitabilityQuestionsSvc.removeUpdateProfile(),a=this.DASHBOARD_STATE),a},b.prototype.getMoveMoneyLaunchState=function(){var a="moveMoney.moveMoneyLaunch";if(this.$scope.goalMoveMoneyNavigationData&&(this.$scope.goalMoveMoneyNavigationData.returnState==this.CHARTS_GOAL_STATE||this.$scope.goalMoveMoneyNavigationData.returnState==this.DASHBOARD_STATE||this.$scope.goalMoveMoneyNavigationData.returnState==this.PLANRECOMMENDATION_STATE)){var b=this.$scope.transferId,c=this.$scope.isNewTransfer;b&&b.length>0||c?a="moveMoney.edit":this.$scope.goalMoveMoneyNavigationData.returnState==this.DASHBOARD_STATE||this.$scope.goalMoveMoneyNavigationData.returnState==this.PLANRECOMMENDATION_STATE?(this.suitabilityQuestionsSvc.removeReferrer(),this.suitabilityQuestionsSvc.removeUpdateProfile(),a=this.DASHBOARD_STATE):a=this.CHARTS_GOAL_STATE}return a},b.prototype.checkFundingFlow=function(){this.$rootScope.pendingVerificationAccount?this.$scope.isPreviouslyInitiated=!0:this.$rootScope.externalAccountNumber&&(this.$scope.isAlreadyExisting=!0)},b.prototype.showRecurringTransaction=function(){var a=this.$scope.transferData.Frequencies;this.$modal({templateUrl:"templates/uiComponents/defaultModalTemplate.html",contentTemplate:"templates/funding/recurringContributionOverlay.html",controller:"hgRecurringContributionModalCtrl",resolve:{items:function(){return a}},scope:this.$scope,backdrop:"static",size:"lg"})},b.prototype.setToOverlay=function(){var a=this;this.$scope.transferData.toAccountsList=[],this.$scope.transferData.toExcludedAccountsList=[],this.$scope.isFunding||angular.forEach(this.$scope.transferData.allAccounts,function(b,c){var d=a.hgMoneyTransferSvc.excludeIneligibleReasons(b.ToIneligibleReasons,["T001"],b.IsHg),e=a.hgMoneyTransferSvc.excludeAccounts(b.ToExclusionsList,a.$scope.transferData.selectedFromAccount.FromExclusionsList);d.Exclude||e.Exclude?(b.ExclusionReasons=e&&d&&d.Exclusions?d.Exclusions.concat(e.Exclusions):[],b.DisplayBalance=a.hgMoneyTransferSvc.getListBalance(b),a.$scope.transferData.toExcludedAccountsList.push(b)):a.$scope.transferData.toAccountsList.push(b)}),this.$scope.transferData.toItemsList=[],this.$scope.transferData.toItemsList=this.hgMoneyTransferSvc.getAccountItemList(this.$scope.transferData.toAccountsList,!0)},b.prototype.setFromOverlay=function(){var a=this,b=this;b.$scope.transferData.fromAccountsList=[],b.$scope.transferData.fromExcludedAccountsList=[];var c=b.$scope.transferData.selectedToAccount.ToExclusionsList;angular.forEach(this.$scope.transferData.allAccounts,function(d,e){var f=a.hgMoneyTransferSvc.excludeIneligibleReasons(d.FromIneligibleReasons,[""]),g=c&&0!=c.length?b.hgMoneyTransferSvc.excludeAccounts(d.FromExclusionsList,c):null;f.Exclude||g&&g.Exclude?(d.ExclusionReasons=g&&f&&f.Exclusions?f.Exclusions.concat(g.Exclusions):[],d.DisplayBalance=a.hgMoneyTransferSvc.getListBalance(d),b.$scope.transferData.fromExcludedAccountsList.push(d)):b.$scope.transferData.fromAccountsList.push(d)}),this.$scope.transferData.itemsList=[],this.$scope.transferData.itemsList=this.hgMoneyTransferSvc.getAccountItemList(this.$scope.transferData.fromAccountsList,!0);
},b.prototype.decline=function(){this.$state.go(this.getMoveMoneyLaunchState())},b.prototype.done=function(a){if(this.$rootScope.externalAccountNumber=null,this.$rootScope.pendingVerificationAccount=null,this.$scope.isAlreadyExisting=!1,this.$scope.isPreviouslyInitiated=!1,this.$scope.isFundingInitialIncome&&!a)this.$rootScope.recurringWithdrawal.FundingComplete=!1,this.$state.go("enrollmentconfirmation");else if(1==this.$scope.isFunding||this.$scope.isIncomeWithdrawalSetup)this.$scope.isFunding=!1,this.$rootScope.hgAccountNumber=null,this.$rootScope.recurringWithdrawal=void 0,this.$state.go("enrollmentconfirmation");else if(this.$scope.isFunding=!1,this.$scope.goalMoveMoneyNavigationData&&this.$scope.goalMoveMoneyNavigationData.returnState==this.PLANRECOMMENDATION_STATE){var b=null!=this.enrollmentCommonSvc.getCompoundGrowthIncomeWithdrawal()?Number(this.enrollmentCommonSvc.getCompoundGrowthIncomeWithdrawal()):0;this.$rootScope.$emit("HG_MOVEMONEY_LAUNCH",{type:2,amount:b,returnState:"charts",isWithdrawal:!0})}else this.$state.go(this.getTransferSuccessState())},b.prototype.showFewer=function(){this.$scope.showMini=!0},b.prototype.showMore=function(){this.$scope.showMini=!1},b.prototype.getTransferData=function(){var a=this,b=this.$scope.acctResponse;if(b)this.handleGetAccountListResponse(b);else{this.contextSvc.showSpinner();var c=this.hgMoneyTransferSvc.getTransferData();c.then(function(b){a.handleGetAccountListResponse(b)}),c.catch(function(b){a.$scope.hasError=!0,b&&(a.$scope.errorMessage=b.message)}),c.finally(function(){a.contextSvc.hideSpinner()})}},b.prototype.getRTMLData=function(){var a=this.$state.current;a&&a.showRTMLVerificationMessage&&(this.$scope.showRTMLVerificationMessage=a.showRTMLVerificationMessage,this.$scope.verificationMessage=a.verificationMessage)},b.prototype.resetModel=function(){this.$scope.transferData.selectedFromAccount=null,this.$scope.transferData.selectedToAccount=null,this.$scope.transferData.transferAmount=null,this.$scope.transferData.firstTransferDate=null,this.$scope.transferData.secondTransferDate=null,this.$rootScope.hgAccountNumber=null,this.$rootScope.pendingVerificationAccount=null,this.$rootScope.externalAccountNumber=null,this.$scope.isAlreadyExisting=!1,this.$scope.isPreviouslyInitiated=!1,this.$scope.isFunding=!1,this.resetRecurring(),this.$scope.transferData.Frequencies.length>0&&(this.$scope.transferData.selectedFrequency=this.$scope.transferData.Frequencies[0])},b.prototype.resetRecurring=function(){this.$scope.transferData.recurringTransferAmount=null,this.$scope.transferData.recurringStartDate=null,this.$scope.transferData.recurringSecondStartDate=null,this.$scope.transferData.recurringFrequency=null,this.$scope.transferData.recurringFrequencyItem=null,this.$scope.showRecurringTrans2ndDate=!1},b.prototype.resetErrorMessage=function(){this.$scope.hasErrorMessage=null},b.prototype.getTransferRequest=function(){var a={},b=new Object,c=this.$scope.transferData;if(a.isUpdate=this.$scope.isUpdate,a.isFunding=this.$scope.isFunding,b.fromAccount=c.selectedFromAccount,b.toAccount=c.selectedToAccount,a.pairDetails=c.pairDetails,this.$scope.isFunding||(c.selectedFrequency=this.getMatchingFrequency(c.selectedFrequencyItem.value1)),a.ContributionYear=c.contributionYear,b.Amount=c.transferAmount,b.Frequency=c.selectedFrequencyItem.value1,b.TransferDate1=this.normalizeDate(c.firstTransferDate),b.TransferDate2=this.normalizeDate(c.secondTransferDate),a.InitialTransaction=b,this.$scope.isFunding&&this.$scope.isValidRecurringTrans){var d=new Object;d.Amount=c.recurringTransferAmount,d.Frequency=c.recurringFrequencyItem.value1,d.TransferDate1=this.createDateAsUTC(c.recurringStartDate),d.TransferDate2=this.createDateAsUTC(c.recurringSecondStartDate),d.fromAccount=c.selectedFromAccount,d.toAccount=c.selectedToAccount,a.RecurringTransaction=d}return this.$scope.isUpdate&&(a.PreviousTransaction={FromAccountId:this.$scope.origTransferData.selectedItem.value1,ToAccountId:this.$scope.origTransferData.selectedToItem.value1,Frequency:this.$scope.origTransferData.selectedFrequencyItem.value1}),c.TweDetails&&(a.HasTwe=!0,a.FedTaxRate=c.TweDetails.FedTaxRate,a.StateTaxRate=c.TweDetails.StateTaxRate,a.Amount=c.TweDetails.GrossCashAmount),a},b.prototype.createTransactionRequestObject=function(a){var b=new Object;return b.fromAccount=a.selectedFromAccount,b.toAccount=a.selectedToAccount,b.Amount=a.transferAmount,b.Frequency=a.selectedFrequencyItem.value1,b.TransferDate1=this.$scope.transferData.firstTransferDate?new Date(this.$scope.transferData.firstTransferDate):null,b.TransferDate2=this.$scope.transferData.secondTransferDate?new Date(this.$scope.transferData.secondTransferDate):null,b},b.prototype.formatDate=function(a,b){var c=this.$filter("date")(a,b);return c},b.prototype.validateAccountPair=function(){var a=this;if(this.$scope.transferData.selectedToItem&&this.$scope.transferData.toAccountsList&&this.$scope.transferData.toAccountsList.length>0&&(this.$scope.transferData.selectedToAccount=this.findAccount(this.$scope.transferData.toAccountsList,this.$scope.transferData.selectedToItem.value1)),this.$scope.transferData.selectedItem&&(this.$scope.transferData.selectedFromAccount=this.findAccount(this.$scope.transferData.fromAccountsList,this.$scope.transferData.selectedItem.value1),null!=this.$scope.transferData.selectedFromAccount)){var b=this.$scope.transferData.selectedFromAccount.IsHg;this.$scope.fromCashBalance=this.mapBalance("cash",this.$scope.transferData.selectedFromAccount),this.$scope.fromAllBalance=this.mapBalance(b?"totalValue":"cashAndBorrowing",this.$scope.transferData.selectedFromAccount)}if(this.accountHasId(this.$scope.transferData.selectedFromAccount)&&this.accountHasId(this.$scope.transferData.selectedToAccount)){var c=new Object;c.fromAccount=this.$scope.transferData.selectedFromAccount,c.toAccount=this.$scope.transferData.selectedToAccount,c.isFunding=this.$scope.isFunding;var d=this.hgMoneyTransferSvc.validateAccountPair(c);d.then(function(b){a.handleValidateAccountPairResponse(b),a.$scope.transferData.Errors.length>0&&(a.$scope.hasErrorMessage=!0)}),d.catch(function(b){a.$scope.hasError=!0,b&&(a.$scope.errorMessage=b.message)})}},b.prototype.accountHasId=function(a){return a&&a.Id&&a.Id.length>0},b.prototype.mapBalance=function(a,b){var c;return angular.forEach(b.Balances,function(b,d){b.BalanceType==a&&(c=b.Amount)}),c},b.prototype.validateTransfer=function(){var a=this;this.$scope.transferData.firstTransferDate=this.formatDate(new Date(this.$scope.transferData.firstTransferDate),"MM/dd/yyyy"),void 0!==this.$scope.transferData.secondTransferDate&&("SEMIMTH"==this.$scope.transferData.selectedFrequencyItem.value1?this.$scope.transferData.secondTransferDate=this.formatDate(new Date(this.$scope.transferData.secondTransferDate),"MM/dd/yyyy"):this.$scope.transferData.secondTransferDate=null),this.contextSvc.showSpinner(),this.$scope.transferData.Errors=null,this.$scope.transferData.pairDetails.AgreementContentIds&&this.$scope.transferData.pairDetails.AgreementContentIds.length>0&&("ONETIME"!=this.$scope.transferData.selectedFrequencyItem.value1||"ONETIME"==this.$scope.transferData.selectedFrequencyItem.value1&&1==this.$scope.transferData.pairDetails.IsOnetimeAgreementRequired)?this.$scope.showAgreement=!0:this.$scope.showAgreement=!1;var b=this.getTransferRequest(),c=this.hgMoneyTransferSvc.validateTransfer(b);c.then(function(b){a.handleTransferResponse(b),a.$scope.isPreviouslyInitiated=!1,a.$scope.isFunding&&a.$scope.isValidRecurringTrans&&(a.$scope.transferData.recurringStartDate=new Date(b.RecurringTransferDate)),a.$scope.transferData.Errors&&a.$scope.transferData.Errors.length>0?(a.$scope.hasErrorMessage=!0,a.$state.go(a.getTransferSetupState())):(a.$scope.isActiveTransaction=!0,a.$scope.hasSubmitted=!1,a.$state.go(a.getTransferConfirmationState()))}),c.catch(function(b){a.$scope.hasError=!0,b&&(a.$scope.errorMessage=b.message)}),c.finally(function(){a.contextSvc.hideSpinner()})},b.prototype.submitTransfer=function(){var a=this;if(1==this.$scope.hasSubmitted)return!1;if(this.$scope.hasSubmitted=!0,this.$scope.successMessage=null,this.$scope.intoSipAccountMessage=null,this.$scope.isDelete){this.contextSvc.showSpinner();var b=this.hgMoneyTransferSvc.cancelTransaction(this.$scope.transferId);b.then(function(b){a.$scope.transferData.Warnings=b.Warnings,"00"==b.ReturnCode?(a.$scope.successMessage=a.SUCCESSFUL_CANCEL_TRANSFER_MSG,a.$state.go(a.getTransferAcknowledgementState())):(a.$scope.hasErrorMessage=!0,a.$scope.transferData.Errors=b.Errors,a.$state.go(a.getTransferConfirmationState()))}),b.catch(function(b){a.$scope.hasError=!0,b&&(a.$scope.errorMessage=b.message)}),b.finally(function(){a.contextSvc.hideSpinner()})}else{var c=this.getTransferRequest();this.contextSvc.showSpinner();var b=this.hgMoneyTransferSvc.submitTransfer(c,this.$scope.transferId);b.then(function(b){a.handleTransferResponse(b),a.$scope.isFunding&&a.$scope.isValidRecurringTrans&&(a.$scope.transferData.recurringStartDate=new Date(b.RecurringTransferDate)),a.$scope.transferData.Errors.length>0?(a.$scope.hasErrorMessage=!0,a.$state.go(a.getTransferConfirmationState())):(a.$scope.isFunding&&(a.$rootScope.hgAccountNumber=null),a.$scope.transferData.selectedToAccount&&a.$scope.transferData.selectedToAccount.IsHg&&(a.$scope.intoSipAccountMessage=a.SUCCESSFUL_TRANSFER_INTO_SIP_ACCOUNT_MSG),a.$scope.isUpdate?a.$scope.successMessage=a.SUCCESSFUL_UPDATE_TRANSFER_MSG:a.$scope.successMessage=a.SUCCESSFUL_TRANSFER_MSG,a.isSameDate(new Date(a.$scope.transferData.firstTransferDate))&&a.$rootScope.$broadcast("accountListUpdated"),a.goalService.saveGoalParametersAdapter("put"),a.$scope.isActiveTransaction=!1,a.$state.go(a.getTransferAcknowledgementState()))}),b.catch(function(b){a.$scope.hasError=!0,b&&(a.$scope.errorMessage=b.message)}),b.finally(function(){a.contextSvc.hideSpinner()})}},b.prototype.getTransactionData=function(){var a=this;this.contextSvc.showSpinner();var b=this.hgMoneyTransferSvc.getTransaction(this.$scope.transferId);b.then(function(b){a.handleGetTransactionDataResponse(b)}),b.catch(function(b){a.$scope.hasError=!0,b&&(a.$scope.errorMessage=b.message)}),b.finally(function(){a.contextSvc.hideSpinner()})},b.prototype.handleGetTransactionDataResponse=function(a){var c=this;if(a){this.$scope.transferData.transferAmount=a.CashrRqstGrsAm,this.$scope.transferData.selectedFrequencyItem={value1:a.CashrRqstFreqCd,value2:"",value3:null,value4:null,value5:null,value6:null,value7:null,value8:null,value9:null},a.CashrRqstFreqCd==b.SEMIMTH?(this.$scope.transferData.firstTransferDate=this.formatDate(a.RqstStartDt,"MM/dd/yyyy"),this.$scope.transferData.secondTransferDate=this.formatDate(a.RqstScndStrtDt,"MM/dd/yyyy")):this.$scope.transferData.firstTransferDate=this.formatDate(a.CashrRqstProcDt,"MM/dd/yyyy");var d=this.findAccount(this.$scope.transferData.allAccounts,a.FromAcctId),e=this.findAccount(this.$scope.transferData.allAccounts,a.ToAcctId);d&&e&&(this.$scope.transferData.selectedItem=this.hgMoneyTransferSvc.createAccountListItem(d),this.$scope.transferData.selectedToItem=this.hgMoneyTransferSvc.createAccountListItem(e)),this.$timeout(function(){c.$scope.transferData.selectedToItem=c.hgMoneyTransferSvc.createAccountListItem(e),c.$scope.origTransferData=angular.copy(c.$scope.transferData)})}},b.prototype.back=function(){this.$scope.isDelete=!1,this.setUILabels(),this.$state.go(this.getTransferSetupState())},b.prototype.transferStatus=function(){},b.prototype.isSameDate=function(a){var b=new Date;return a.getUTCDate()==b.getUTCDate()&&a.getUTCMonth()==b.getUTCMonth()&&a.getUTCFullYear()==b.getUTCFullYear()},b.prototype.newTransfer=function(){this.$scope.hasError=!1,this.$scope.hasErrorMessage=!1,this.$scope.errorMessage="",this.$scope.showMini=!0,this.$scope.showSecondaryTransferDate=!1,this.$scope.showAgreement=!1,this.$scope.hasInvalidTransactionMessage=!1,this.$scope.hasInvalidTransactionCMSID=!1,this.$scope.contributionYear=!1,this.$scope.transferData={},this.$scope.hasSubmitted=!1,this.$rootScope.pendingVerificationAccount=null,this.$rootScope.externalAccountNumber=null,this.$scope.isAlreadyExisting=!1,this.$scope.isPreviouslyInitiated=!1,this.$scope.isFunding=!1,this.$scope.distributionDesc=!1,this.removeWatchers(),this.$state.go("moveMoney.moveMoneyLaunch")},b.prototype.removeWatchers=function(){angular.forEach(this.watcherFunctions,function(a,b){a()}),this.watcherFunctions=[]},b.prototype.addWatchers=function(){var a=this,b=this,c=function(c,d){b.watcherFunctions.push(a.$scope.$watch(c,function(a,b){d(a,b)}))};c("transferData.selectedItem",function(a,c){a&&(b.validateAccountPair(),b.setToOverlay())}),c("transferData.selectedToItem",function(a,c){a&&(b.validateAccountPair(),b.setFromOverlay())}),c("transferData.selectedFrequencyItem",function(a,c){a&&(b.freqChanged(a,!1),b.resetErrorMessage())}),c("transferData.recurringFrequencyItem",function(a,c){a&&b.freqChanged(a,!0),b.setRecurringStatus()}),c("transferData.contributionYear",function(a,c){b.resetErrorMessage()}),c("transferData.firstTransferDate",function(a,c){b.resetErrorMessage()}),c("transferData.secondTransferDate",function(a,c){b.resetErrorMessage()}),c("transferData.recurringTransferAmount",function(a,c){b.setRecurringStatus()}),c("transferData.recurringStartDate",function(a,c){b.setRecurringStatus()}),c("transferData.recurringSecondStartDate",function(a,c){b.setRecurringStatus()}),c("transferData.transferAmount",function(a,c){b.setTweCalculations()}),c("transferData.TweDetails.IsNetAmount",function(a,c){b.setTweCalculations()}),c("transferData.TweDetails.modifiedFedTaxRate",function(a,c){b.setTweCalculations(!0)}),c("transferData.TweDetails.modifiedStateTaxRate",function(a,c){b.setTweCalculations(!0)})},b.prototype.setRecurringStatus=function(){var a=0;this.$scope.transferData.recurringTransferAmount&&this.$scope.transferData.recurringTransferAmount>0&&++a,this.$scope.transferData.recurringFrequencyItem&&++a,(this.$scope.transferData.recurringStartDate&&null!=this.$scope.transferData.recurringFrequencyItem&&this.$scope.transferData.recurringFrequencyItem.value1!=b.SEMIMTH||this.$scope.transferData.recurringStartDate&&this.$scope.transferData.recurringSecondStartDate)&&++a,this.$scope.isValidRecurringTrans=3==a,this.$scope.isPartialRecurringTrans=a>0&&a<3},b.prototype.freqChanged=function(a,c){var d=a.value1==b.SEMIMTH;c?this.$scope.showRecurringTrans2ndDate=d:this.$scope.showSecondaryTransferDate=d},b.prototype.getMatchingFrequency=function(a){var b=null;return a&&this.$scope.transferData.Frequencies&&this.$scope.transferData.Frequencies.length>0&&angular.forEach(this.$scope.transferData.Frequencies,function(c,d){c.Code==a&&(b=c)}),b},b.prototype.getFrequencyItemList=function(a){var b=new Array,c=new Array,d=null,e=null,f=null;return a&&(f=this.$filter("orderBy")(a,"Type")),angular.forEach(f,function(a,f){d?d!=a.Type&&(d=a.Type,c=new Array,e={},e.group=a.Type,e.itemsList=c,b.push(e)):(d=a.Type,c=new Array,e={},e.group=a.Type,e.itemsList=c,b.push(e));var g={};g.value1=a.Code,g.value2=a.Name,g.value3=a.Description,c.push(g)}),b},b.prototype.getDefaultFrequency=function(){if(this.$scope.transferData.frequencyItemsList&&this.$scope.transferData.frequencyItemsList.length>0){var a=this.$scope.transferData.frequencyItemsList[0];if(a&&a.itemsList&&a.itemsList.length>0)return this.isRecurringWithdrawals()&&this.$scope.transferData.frequencyItemsList[1]&&this.$scope.transferData.frequencyItemsList[1].itemsList[0]?this.$scope.transferData.frequencyItemsList[1].itemsList[0]:a.itemsList[0]}},b.prototype.handleGetAccountListResponse=function(a){var b=this,c=this;this.$scope.hasError=!1,this.$scope.transferData={};var d=c.$rootScope.accounts;if(void 0===d&&(d=c.$rootScope.session.mercuryAccounts),this.$scope.transferData.allAccounts=this.hgMoneyTransferSvc.setHgAccounts(a.Accounts,d,this.$rootScope.hgAccountNumber),this.$scope.transferData.Frequencies=a.Frequencies,this.$scope.transferData.fromAccountsList=[],this.$scope.transferData.itemsList=[],this.$scope.transferData.fromExcludedAccountsList=[],angular.forEach(this.$scope.transferData.allAccounts,function(a,b){var d=c.hgMoneyTransferSvc.excludeIneligibleReasons(a.FromIneligibleReasons,[""]);d.Exclude?(a.ExclusionReasons=d.Exclusions,a.DisplayBalance=c.hgMoneyTransferSvc.getListBalance(a),c.$scope.transferData.fromExcludedAccountsList.push(a)):c.$scope.transferData.fromAccountsList.push(a)}),this.$scope.transferData.itemsList=this.hgMoneyTransferSvc.getAccountItemList(this.$scope.transferData.fromAccountsList,!0),this.$scope.transferData.toAccountsList=[],this.$scope.transferData.toItemsList=[],this.$scope.transferData.toExcludedAccountsList=[],angular.forEach(c.$scope.transferData.allAccounts,function(a,b){var d=c.hgMoneyTransferSvc.excludeIneligibleReasons(a.ToIneligibleReasons,["T001","T009"],a.IsHg);d.Exclude?(a.ExclusionReasons=d.Exclusions,a.DisplayBalance=c.hgMoneyTransferSvc.getListBalance(a),c.$scope.transferData.toExcludedAccountsList.push(a)):c.$scope.transferData.toAccountsList.push(a)}),this.$scope.transferData.toItemsList=this.hgMoneyTransferSvc.getAccountItemList(this.$scope.transferData.toAccountsList,!0),this.$rootScope.hgAccountNumber){var e=this.findAccount(this.$scope.transferData.allAccounts,this.$rootScope.hgAccountNumber);if(e){this.$scope.transferData.toAccount=e,this.$scope.transferData.selectedToAccount=e,this.$scope.transferData.selectedToItem=this.hgMoneyTransferSvc.createAccountListItem(e),this.$scope.isFunding=!0;var f=_.findWhere(this.$rootScope.accounts,{brkrAcctId:e.Id});f&&this.hgMoneyTransferSvc.getFundingGoalParameters(f.id).then(function(a){2==a.goalType&&b.contextSvc.device.isLargeScreen()?(b.$scope.isFundingInitialIncome=!0,b.$scope.transferData.transferAmount=Number(a.initialInvestment),b.$scope.transferData.recurringTransferAmount=0,b.$rootScope.recurringWithdrawal={FromAccount:e,Amount:a.recurringWithdrawal,FundingComplete:!1}):(b.$rootScope.initialInvestment&&(b.$scope.transferData.transferAmount=b.$rootScope.initialInvestment),b.$rootScope.recurringInvestment&&(b.$scope.transferData.recurringTransferAmount=b.$rootScope.recurringInvestment,b.$scope.transferData.recurringFrequencyItem={value1:"MONTHLY",value2:"Monthly"},b.$scope.transferData.recurringFrequency={Code:"MONTHLY",Name:"Monthly"}))})}}else if(this.$scope.isPreviouslyInitiated){var g=this.findAccount(this.$scope.transferData.allAccounts,this.$rootScope.pendingVerificationAccount.fromAccountId),h=this.findAccount(this.$scope.transferData.allAccounts,this.$rootScope.pendingVerificationAccount.toAccountId),i=this.$rootScope.pendingVerificationAccount;if(g&&h){var f=_.findWhere(this.$rootScope.accounts,{brkrAcctId:h.Id});f&&this.hgMoneyTransferSvc.getFundingGoalParameters(f.id).then(function(a){var d=function(){c.$scope.transferData.selectedItem=c.hgMoneyTransferSvc.createAccountListItem(g),c.$scope.transferData.selectedToItem=c.hgMoneyTransferSvc.createAccountListItem(h),i&&(i.initialAmount&&(c.$scope.transferData.transferAmount=i.initialAmount),i.isFunding&&(c.$scope.isFunding=!0,2==a.goalType&&c.contextSvc.device.isLargeScreen()?(c.$scope.isFundingInitialIncome=!0,c.$scope.transferData.transferAmount=Number(a.initialInvestment),c.$rootScope.recurringWithdrawal={FromAccount:h,Amount:a.recurringWithdrawal,FundingComplete:!1}):(c.$scope.transferData.recurringTransferAmount=c.$rootScope.pendingVerificationAccount.recurringAmount,c.recurringFreq=c.$rootScope.pendingVerificationAccount.recurringFrequency)))};if(1==b.$rootScope.addWithdrawMoneyFlow)b.$rootScope.addWithdrawMoneyFlow=!1,d();else{var e=c.portfolioSvc.getActivityFeed(f.id);e.then(function(b){if(b&&b.ActivityItems&&b.ActivityItems.length>0){var e;angular.forEach(b.ActivityItems,function(a,b){a&&a.ToAccount===f.AcctIdDisplay&&(e=!0)}),e&&2==a.goalType&&c.contextSvc.device.isLargeScreen()?(c.$rootScope.recurringWithdrawal={FromAccount:h,Amount:a.recurringWithdrawal,FundingComplete:!0},c.$scope.isFunding=!1,c.$scope.isIncomeWithdrawalSetup=!0,c.$scope.transferData.fromAccountsList.push(h),c.$scope.transferData.selectedItem=c.hgMoneyTransferSvc.createAccountListItem(h),c.$scope.transferData.transferAmount=c.$rootScope.recurringWithdrawal.Amount,c.$scope.transferData.selectedToItem=c.hgMoneyTransferSvc.createAccountListItem(g),c.$scope.isFundingInitialIncome=!1,c.$scope.transferData.recurringTransferAmount=i.recurringAmount):d()}else d();c.$rootScope.pendingVerificationAccount=null,i=null})}})}}else if(this.$scope.isAlreadyExisting){var j=this.findAccount(this.$scope.transferData.allAccounts,this.$rootScope.externalAccountNumber);this.$scope.transferData.selectedItem=this.hgMoneyTransferSvc.createAccountListItem(j),this.$rootScope.externalAccountNumber=null}else if(this.$rootScope.recurringWithdrawal&&this.$rootScope.recurringWithdrawal.FundingComplete){var k=this.findAccount(this.$scope.transferData.allAccounts,this.$rootScope.recurringWithdrawal.FromAccount.Id);this.$scope.isIncomeWithdrawalSetup=!0,c.$scope.transferData.fromAccountsList.push(k),this.$scope.transferData.selectedItem=this.hgMoneyTransferSvc.createAccountListItem(k),this.$scope.transferData.transferAmount=this.$rootScope.recurringWithdrawal.Amount}if(this.$scope.transferData.frequencyItemsList=this.getFrequencyItemList(this.$scope.transferData.Frequencies),this.addWatchers(),this.$scope.transferData.frequencyItemsList&&this.$scope.transferData.frequencyItemsList.length>0&&(this.$scope.transferData.selectedFrequencyItem=this.getDefaultFrequency(),this.$scope.transferData.selectedFrequency=this.getMatchingFrequency(this.$scope.transferData.selectedFrequencyItem.value1)),this.isEditMode())this.$scope.isUpdate=!0,this.getTransactionData();else{var l=this.$scope.goalMoveMoneyNavigationData;if(l&&l.type){var m=new Object,n=new Object;if(n.Id="0",m.Id=this.contextSvc.activeAccount.brkrAcctId,l.isWithdrawal)var g=this.findAccount(this.$scope.transferData.allAccounts,m.Id);else var o=this.findAccount(this.$scope.transferData.allAccounts,m.Id);g&&(this.$scope.transferData.selectedItem=this.hgMoneyTransferSvc.createAccountListItem(g)),o&&(this.$scope.transferData.selectedToItem=this.hgMoneyTransferSvc.createAccountListItem(o)),this.$scope.transferData.transferAmount=l.amount}}},b.prototype.findAccount=function(a,b){for(var c=0;c<a.length;++c)if(a[c].Id==b)return a[c]},b.prototype.handleValidateAccountPairResponse=function(a){if(this.$scope.hasError=!1,this.$scope.hasErrorMessage=!1,this.$scope.transferData.Errors=a.Errors,this.$scope.transferData.Messages=a.Messages,this.$scope.transferData.pairDetails={},this.$scope.transferData.pairDetails.AgreementContentIds=a.AgreementContentIds,this.$scope.transferData.pairDetails.IsOnetimeAgreementRequired=a.IsOnetimeAgreementRequired,this.$scope.transferData.pairDetails.ContributionYears=a.ContributionYears,this.$scope.transferData.contributionYear=this.$scope.transferData.pairDetails.ContributionYears[0],this.$scope.transferData.pairDetails.ContributionYears.length>0?this.$scope.contributionYear=!0:this.$scope.contributionYear=!1,a.EarliestBusinessDate&&(this.$scope.transferData.pairDetails.EarliestBusinessDate=a.EarliestBusinessDate,this.$scope.isUpdate||(this.$scope.transferData.firstTransferDate=this.formatDate(a.EarliestBusinessDate,"MM/dd/yyyy"),this.$rootScope.recurringWithdrawal&&this.$rootScope.recurringWithdrawal.FundingComplete&&(this.$scope.transferData.firstTransferDate=this.formatDate(this.getNextBusinessDay(this.$scope.transferData.firstTransferDate),"MM/dd/yyyy"))),this.$scope.transferData.firstTransferDate)){this.$scope.transferData.earliestTransfer=new Date(this.$scope.transferData.firstTransferDate);var b=this.$scope.transferData.earliestTransfer.getDate(),c=this.$scope.transferData.earliestTransfer.getMonth()+1,d=this.$scope.transferData.earliestTransfer.getFullYear();this.$scope.earliest=c+"/"+b+"/"+d}this.$scope.transferData.pairDetails.IraTransactionTypeCode=a.IraTransactionTypeCode,this.$scope.transferData.pairDetails.IsRecurring=a.IsRecurring,this.$scope.transferData.pairDetails.MediaTypeCd=a.MediaTypeCd,this.$scope.transferData.pairDetails.NotValidReason=a.NotValidReason,this.$scope.transferData.pairDetails.PairStatus=a.PairStatus,this.$scope.transferData.pairDetails.RequestId=a.RequestId,this.$scope.transferData.pairDetails.RequestSecondId=a.RequestSecondId,this.$scope.transferData.pairDetails.CorpAcctId=a.CorpAcctId,this.$scope.transferData.pairDetails.ReturnCode=a.ReturnCode,this.$scope.transferData.pairDetails.TransactionBlocked=a.TransactionBlocked,this.$scope.transferData.pairDetails.InvalidTransactionContentId=a.InvalidTransactionContentId,this.$scope.transferData.pairDetails.InvalidTransactionMessage=a.InvalidTransactionMessage,this.$scope.transferData.pairDetails.DistributionCode=a.DistributionCode,this.$scope.transferData.pairDetails.DistributionSubCode=a.DistributionSubCode,this.$scope.transferData.TweDetails=a.TweDetails;var e=a.DistributionDescription;if(this.$scope.transferData.pairDetails.TransactionBlocked?this.$scope.transferData.pairDetails.InvalidTransactionContentId?(this.$scope.transferData.invalidTransactionMessage=this.$scope.transferData.pairDetails.InvalidTransactionContentId,this.$scope.hasInvalidTransactionCMSID=!0,this.$scope.hasInvalidTransactionMessage=!1):(this.$scope.transferData.invalidTransactionMessage=this.$scope.transferData.pairDetails.InvalidTransactionMessage,this.$scope.hasInvalidTransactionMessage=!0,this.$scope.hasInvalidTransactionCMSID=!1):(this.$scope.hasInvalidTransactionMessage=!1,this.$scope.hasInvalidTransactionCMSID=!1),e?(this.$scope.distributionDesc=!0,this.$scope.transferData.distributionDesc=e):this.$scope.distributionDesc=!1,this.$scope.transferData.Frequencies=a.Frequencies,this.$scope.transferData.frequencyItemsList=this.getFrequencyItemList(a.Frequencies),this.$scope.transferData.selectedFrequencyItem&&!this.$scope.isFunding?this.$scope.transferData.selectedFrequencyItem=this.getDefaultFrequency():this.$scope.transferData.selectedFrequency=this.getMatchingFrequency(this.$scope.transferData.selectedFrequencyItem.value1),this.recurringFreq){var f=this.$scope.transferData.recurringFrequency=this.getMatchingFrequency(this.recurringFreq);this.$scope.transferData.recurringFrequencyItem={value1:f.Code,value2:f.Name}}if(this.$rootScope.hgAccountNumber&&this.$rootScope.recurringInvestment>0&&(this.$scope.transferData.recurringFrequencyItem=this.getDefaultFrequency(),this.$scope.transferData.recurringFrequency=this.getMatchingFrequency(this.$scope.transferData.selectedFrequencyItem.value1)),this.$scope.showTwe=!this.$scope.hasInvalidTransactionMessage&&!!a.TweDetails,this.$scope.showTwe&&(this.$scope.transferData.TweDetails.IsNetAmount=!1,this.setTweCalculations()),this.$scope.isUpdate){var g=this.getFrequencyForUpdateMode(this.$scope.origTransferData.selectedFrequencyItem.value1);this.$scope.transferData.selectedFrequencyItem.value1=g.Code,this.$scope.transferData.selectedFrequencyItem.value2=g.Name,this.$scope.transferData.selectedFrequency=g}},b.prototype.normalizeDate=function(a){return a?this.createDateAsUTC(new Date(a)):null},b.prototype.convertDateToUTC=function(a){if(a)return new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate())},b.prototype.createDateAsUTC=function(a){if(a)return new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds()))},b.prototype.getFrequencyForUpdateMode=function(a){var b=this.getMatchingFrequency(this.$scope.origTransferData.selectedFrequencyItem.value1);return b||(this.$scope.transferData.selectedFrequencyItem=this.getDefaultFrequency(),b=this.getMatchingFrequency(this.$scope.transferData.selectedFrequencyItem.value1)),b},b.prototype.handleTransferResponse=function(a){this.$scope.hasError=!1,this.$scope.hasErrorMessage=!1,this.$scope.transferData.Errors=a.Errors,this.$scope.transferData.Warnings=a.Warnings;var b=new Date(a.TransferDate);if(b.getUTCFullYear()>=(new Date).getUTCFullYear()&&(this.$scope.transferData.firstTransferDate=this.formatDate(this.convertDateToUTC(b),"MM/dd/yyyy")),a.RecurringTransferDate&&a.RecurringTransferDate.length>0){var b=new Date(a.RecurringTransferDate);b.getUTCFullYear()>=(new Date).getUTCFullYear()&&(this.$scope.transferData.secondTransferDate=this.formatDate(this.convertDateToUTC(b),"MM/dd/yyyy"))}else this.$scope.transferData.secondTransferDate=null},b.prototype.goToTWEedit=function(){this.$scope.isPreviouslyInitiated||(this.$scope.transferData.TweDetails.HasOptOutFed?this.$scope.transferData.TweDetails.fedOptOut=!0:this.$scope.transferData.TweDetails.fedOptOut=!1,0==this.$scope.transferData.TweDetails.IsStateTaxApplicable?this.$scope.transferData.TweDetails.stateOptOut=!0:this.$scope.transferData.TweDetails.HasOptOutState?this.$scope.transferData.TweDetails.stateOptOut=!0:this.$scope.transferData.TweDetails.stateOptOut=!1),this.$scope.isPreviouslyInitiated=!0;var a=Math.round(100*this.$scope.transferData.TweDetails.FedTaxRate),b=Math.round(1e5*this.$scope.transferData.TweDetails.StateTaxRate)/1e3,c=100*this.$scope.transferData.TweDetails.FedMinimum,d=100*this.$scope.transferData.TweDetails.StateMinimum;a<=0?this.$scope.transferData.TweDetails.modifiedFedTaxRate=c:this.$scope.transferData.TweDetails.modifiedFedTaxRate=a,b<=0?this.$scope.transferData.TweDetails.modifiedStateTaxRate=d:this.$scope.transferData.TweDetails.modifiedStateTaxRate=b,this.$state.go("moveMoney.funding.TWEedit")},b.prototype.finishTWEedit=function(){this.$scope.transferData.TweDetails.fedOptOut?this.$scope.transferData.TweDetails.FedTaxRate=0:this.$scope.transferData.TweDetails.FedTaxRate=this.$scope.transferData.TweDetails.modifiedFedTaxRate/100,this.$scope.transferData.TweDetails.stateOptOut?this.$scope.transferData.TweDetails.StateTaxRate=0:this.$scope.transferData.TweDetails.StateTaxRate=this.$scope.transferData.TweDetails.modifiedStateTaxRate/100,this.setTweCalculations(),this.$state.go(this.getTransferSetupState())},b.prototype.setTweCalculations=function(a){void 0===a&&(a=!1);var b=!!this.$scope.showTwe;if(b){var c=this.$scope.transferData;if(!c.TweDetails)return;var d=c.TweDetails.FedTaxRate,e=c.TweDetails.StateTaxRate;a&&(e=c.TweDetails.stateOptOut?0:c.TweDetails.modifiedStateTaxRate/100,d=c.TweDetails.fedOptOut?0:c.TweDetails.modifiedFedTaxRate/100);var f=this.hgMoneyTransferSvc.calculateTaxAmounts(+c.transferAmount,d,e,c.TweDetails.IsNetAmount);this.$scope.transferData.TweDetails.FedTaxAmount=f.FedTaxAmount,this.$scope.transferData.TweDetails.StateTaxAmount=f.StateTaxAmount,this.$scope.transferData.TweDetails.GrossCashAmount=f.DebitAmount,this.$scope.transferData.TweDetails.NetCashAmount=f.CreditAmount,this.$scope.transferData.TweDetails.Taxes=f.TotalTaxes,this.$scope.transferData.TweDetails.TotalAmount=f.CreditAmount+f.TotalTaxes}},b.prototype.deleteTransfer=function(){this.$scope.isDelete=!0,this.$scope.confirmNextLabel="Cancel Transfer",this.$scope.transferConfirmationTitle="Cancel Transfer",this.$state.go(this.getTransferConfirmationState())},b.prototype.setUILabels=function(){this.$scope.setupNextLabel=this.$scope.isUpdate?"Update Transfer":"Review Transfer",this.$scope.confirmNextLabel=this.$scope.isUpdate?"Update Transfer":"Make Transfer",this.$scope.transferConfirmationTitle=this.$scope.isUpdate?"Update Transfer":"Review Transfer"},b.prototype.showRecurring=function(){return this.$scope.isFunding&&!this.$scope.isFundingInitialIncome},b.prototype.showFrequencyLabel=function(){return!!this.$scope.transferData&&!!this.$scope.transferData.selectedFrequency},b.prototype.getInvestmentAmountText=function(){var a="Amount To Move";return this.$scope.isFunding?a="Initial Investment Amount":this.$rootScope.recurringWithdrawal&&this.$rootScope.recurringWithdrawal.FundingComplete&&this.contextSvc.device.isLargeScreen()&&(a="Withdrawal Amount"),a},b.prototype.getInvestmentDateText=function(){var a="Date the Money Should Move";return this.$scope.isFunding?a="Initial Investment Date":this.$rootScope.recurringWithdrawal&&this.$rootScope.recurringWithdrawal.FundingComplete&&this.contextSvc.device.isLargeScreen()?a="Initial Withdrawal Date":this.$scope.showSecondaryTransferDate&&(a="First Date the Money Should Move"),
a},b.prototype.isRecurringWithdrawals=function(){return this.$rootScope.recurringWithdrawal&&this.$rootScope.recurringWithdrawal.FundingComplete},b.prototype.getNextBusinessDay=function(a){var b=a?new Date(a):new Date,c=b.getMonth()+1,d=new Date;for(d=new Date(d.setMonth(c)),d=new Date(d.setDate(1));1!==d.getDay();)d.setDate(d.getDate()+1);var e=moment.duration(moment(d).diff(moment(a))),f=Math.ceil(e.asDays());return f&&Number(f)<=10&&this.getNextBusinessDay(d.toString()),d},b.prototype.setNetDisabledMessage=function(){return this.$rootScope.isSIP?this.$scope.netDisabledMessage="Net distributions are temporarily unavailable. Please use Schwab.com or call 855-694-5208 for assistance.":this.$scope.netDisabledMessage="Net distributions are temporarily unavailable. Please use Schwab.com or call 877-805-3399 for assistance.",this.$scope.netDisabledMessage},b.SEMIMTH="SEMIMTH",b.$inject=["$scope","$rootScope","$state","hgContextSvc","$modal","$filter","$controller","hgCommonJs2nSvc","hgMoneyTransferSvc","$timeout","hgGoalService","hgSuitabilityQuestionsSvc","hgEnrollmentCommonSvc","hgPortfolioSvc"],b}(a.common.hgControllerBase);b.fundingCtrl=c}(b=a.fundingMod||(a.fundingMod={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(a,b,c){this.$scope=a,this.$state=b,this.$modalInstance=c,a.confirmBtn=function(){c.close(),b.go("moveMoney.funding.transferConfirmation")},a.closePopup=function(){c.close()}}return a}();a.AgreementModalCtrl=b}(b=a.fundingMod||(a.fundingMod={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(a,b,c,d){this.$scope=a,this.$rootScope=b,this.$state=c,this.$modal=d,a.confirmBtn=function(){a.$hide(),c.go("moveMoney.funding.transferSetup")},a.resetRecurring=function(){b.$broadcast("resetRecurringTransaction"),a.$hide()}}return a}();a.RecurringContributionModalCtrl=b}(b=a.fundingMod||(a.fundingMod={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(a,b,c,d,e,f,g,h){var i=this;this.$scope=a,this.$window=b,this.$modalInstance=c,this.commonJs2nSvc=d,this.allDocuments=e,this.parentDocumentId=f,this.items=g,this.selectedItem=h,this.raiseEventOnSelectingDocumentId=function(a){i.commonJs2nSvc.isIOS()||i.commonJs2nSvc.isAndroid()?i.commonJs2nSvc.navigateToSelectedDocument(a):i.$window.open(a)},a.items=g,a.selected={},a.onSelectingAnItem=function(a){if(g)for(var b=0;b<g.length;b++);i.$scope.ok()},a.showDocumentInsert=function(a){var b="";angular.forEach(e,function(c,d){var e=c;if(e&&e.Document&&e.Document.Id===f)for(var g=e.Inserts,h=0;h<g.length;h++){var i=g[h];i.Id==a&&(b=i.Url)}}),b&&i.raiseEventOnSelectingDocumentId(b)},a.ok=function(){c.close(a.selected.item)},a.cancel=function(){c.dismiss("cancel")}}return a}();a.RegInsertsModalCtrl=b}(b=a.account||(a.account={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(b){var c=function(a){function b(b,c,d,e,f,g,h,i,j){var k=this;switch(a.call(this,b,c,d,e),this.$scope=b,this.$rootScope=c,this.$state=d,this.contextSvc=e,this.$window=f,this.$modal=g,this.documentType=h,this.statementSvc=i,this.commonJs2nSvc=j,this.sipViewDocument="View Account Documents",this.iipViewDocument="View Schwab Account Documents",this.raiseEventOnSelectingDocumentId=function(a){k.contextSvc.device.isNative()?k.commonJs2nSvc.navigateToSelectedDocument(a):k.$window.open(a)},b.title=c.isSIP?this.sipViewDocument:this.iipViewDocument,parseInt(""+h)){case 0:b.subTitle="Statements";break;case 1:b.subTitle="Tax Documents";break;case 2:b.subTitle="Trade Confirmations";break;case 3:b.subTitle="Letters"}b.showDocument=function(a){k.showDocument(a)},b.showDocumentInsert=function(a,b){k.showDocumentInsert(a,b)},b.showAllDocumentInserts=function(a){k.showAllDocumentInserts(a,"s")},0==h||1==h?b.shouldShowInserts=!0:b.shouldShowInserts=!1,this.fetchDocuments(h)}return __extends(b,a),b.prototype.fetchDocuments=function(a){var b=this,c=this;this.$scope.activeAccount=this.contextSvc.getActiveAccountNumber();var d=this.contextSvc.appConfig.clientApiUrl;this.contextSvc.showSpinner(),this.statementSvc.fetchDocuments(this.$scope.activeAccount,a).then(function(b){b&&(c.$scope.Documents=b.Documents,4!=a&&_.each(c.$scope.Documents,function(a){a.Document&&(a.Document.Url=d+a.Document.Url,a.Inserts&&_.each(a.Inserts,function(a){a.Url=d+a.Url}))}))}).catch(function(a){c.$scope.hasError=!0,c.$scope.errorMessage=a.message}).finally(function(){b.contextSvc.hideSpinner()})},b.prototype.showDocument=function(a){var b="";angular.forEach(this.$scope.Documents,function(c,d){var e=c;e&&e.Document&&e.Document.Id===a&&(b=e.Document.Url)}),b&&this.raiseEventOnSelectingDocumentId(b)},b.prototype.showDocumentInsert=function(a,b){var c="";angular.forEach(this.$scope.Documents,function(d,e){var f=d;if(f&&f.Document&&f.Document.Id===a)for(var g=f.Inserts,h=0;h<g.length;h++){var i=g[h];i.Id==b&&(c=i.Url)}}),c&&this.raiseEventOnSelectingDocumentId(c)},b.prototype.showAllDocumentInserts=function(a,b){var c=this.fetchInserts(a),d=this.$scope.Documents;this.$modal.open({templateUrl:"templates/account/reginserts.html",controller:"hgRegInsertsModalCtrl",size:b,resolve:{documents:function(){return d},parentDocumentId:function(){return a},items:function(){return c},selectedItem:function(){return null}}})},b.prototype.fetchInserts=function(a){var b=null;return angular.forEach(this.$scope.Documents,function(c,d){var e=c;e&&e.Document&&e.Document.Id===a&&(b=e.Inserts)}),b},b}(a.common.hgControllerBase);b.statementsCtrl=c}(b=a.account||(a.account={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(a,b){this.scope=a,this.state=b}return a.$inject=["$scope","$state"],a}();a.notificationsCenterCtrl=b}(b=a.notificationsCenterMod||(a.notificationsCenterMod={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(b){var c=function(a){function b(b,c,d,e,f,g){var h=this;a.call(this,b,c,d,e),this.$scope=b,this.$rootScope=c,this.$state=d,this.contextSvc=e,this.userProfileSvc=f,this.authSvc=g,this.CONTACT_INFO_SUBTITLE="Contact Info",this.SECURITY_INFO_SUBTITLE="Security Info",this.HOUSEHOLD_INFO_SUBTITLE="Household Info",this.PHONE_COUNT=3,this.PHONE_TYPE_HOME="H",this.PHONE_TYPE_BUSINESS="B",this.PHONE_TYPE_MOBILE="C",this.PHONE_DELIMITER="-",this.scope=b,this.scope.title="Personal Profile",this.scope.subTitle="",this.scope.selectedPhoneToEdit=null,this.scope.selectedEmailToEdit=null,this.scope.selectedAddressToEdit=null,this.scope.showPhoneAdd=!1,this.scope.isAffiliated=!1,this.scope.disclaimerAsset=this.setDisclaimerAsset(),this.scope.manageContactInfo=function(){h.manageContactInfo()},this.scope.manageSecurityInfo=function(){h.manageSecurityInfo()},this.scope.manageHouseholdInfo=function(){h.manageHouseholdInfo()},this.scope.logout=function(){return h.logout()},this.scope.navigateToEditPhone=function(a){h.navigateToEditPhone(a)},this.scope.navigateToEditEmail=function(a){h.navigateToEditEmail(a)},this.scope.navigateToEditAddress=function(a){h.navigateToEditAddress(a)},this.scope.navigateToEditSpouse=function(){h.navigateToEditSpouse()},this.scope.deleteSpouse=function(){h.deleteSpouse()},this.scope.savePhone=function(){h.savePhone()},this.scope.saveEmail=function(){h.saveEmail()},this.scope.saveAddress=function(){h.saveAddress()},this.scope.saveSpouse=function(){h.saveSpouse()},this.scope.cancel=function(){h.cancel()},this.scope.cancelUpdateSpouse=function(){h.cancelUpdateSpouse()},this.scope.initHouseholdForm=function(){h.scope.accountSearchData={TaxId:null,DateOfBirth:null,LastName:null},h.scope.hasError=!1},this.getUserInfo()}return __extends(b,a),b.prototype.setDisclaimerAsset=function(){return this.contextSvc.isIIP()?"SELFSERVICE-UPDATE-HOUSEHOLDINFO-DISCL-AS":"SIP-SELFSERVICE-UPDATE-HOUSEHOLDINFO-DISCL-RETAIL"},b.prototype.manageContactInfo=function(){this.scope.subTitle=this.CONTACT_INFO_SUBTITLE,this.$state.go("personalProfile.managecontactinfo")},b.prototype.manageSecurityInfo=function(){this.scope.subTitle=this.SECURITY_INFO_SUBTITLE,this.$state.go("personalProfile.managesecurityinfo")},b.prototype.manageHouseholdInfo=function(){this.scope.subTitle=this.HOUSEHOLD_INFO_SUBTITLE,this.$state.go("personalProfile.managehouseholdinfo")},b.prototype.getUserInfo=function(){var a=this;this.contextSvc.showSpinner(),this.userProfileSvc.getUserInfo().then(function(b){a.handleGetUserInfo(b)}).catch(function(b){a.scope.hasError=!0,b&&(a.scope.errorMessage=b.message)}).finally(function(){a.contextSvc.hideSpinner()})},b.prototype.handleGetUserInfo=function(a){if(this.filterHgAccounts(a),this.scope.StateList||a&&a.StateList&&(this.scope.StateList=a.StateList),this.scope.userInfo=a,this.scope.userInfo){var b=this.scope.userInfo;if(b.Name&&(this.scope.subTitle=this.scope.userInfo.Name.Formatted),b.PhoneList){b.PhoneList.length<this.PHONE_COUNT?this.scope.showPhoneAdd=!0:this.scope.showPhoneAdd=!1;for(var c=0;c<b.PhoneList.length;c++){var d=b.PhoneList[c],e=this.getPhoneType(d.Type);d.phoneType=e}}b.Household&&(this.scope.isAffiliated=b.Household.IsAffiliated)}this.scope.userInfoForDisplay=angular.copy(this.scope.userInfo)},b.prototype.filterHgAccounts=function(a){if(a&&a.AcctAddrEmailList)for(var b=a.AcctAddrEmailList,c=b.length,d=0;d<c;d++)this.isHgAccount(b[d])||(b.splice(d,1),c--,d--)},b.prototype.isHgAccount=function(a){if(a){var b=this.$rootScope.accounts;if(b)for(var c=0;c<b.length;c++)if(b[c].accountNumber==a.AcctId)return!0}return!1},b.prototype.getPhoneType=function(a){for(var b=null,c=0;c<this.scope.userInfo.PhoneTypes.length;c++){var d=this.scope.userInfo.PhoneTypes[c];d.Type==a&&(b=d)}return b},b.prototype.navigateToEditPhone=function(a){if(this.scope.userInfo=angular.copy(this.scope.userInfoForDisplay),this.scope.selectedPhoneToEdit=null,this.setFilterPhoneTypesList(a),a&&this.scope.userInfo&&this.scope.userInfo.PhoneList)for(var b=0;b<this.scope.userInfo.PhoneList.length;b++){var c=this.scope.userInfo.PhoneList[b];if(c.Type==a){this.scope.selectedPhoneToEdit=c;break}}else{this.scope.selectedPhoneToEdit={};if(this.scope.userInfo.PhoneTypes&&this.scope.filterPhoneTypeList)for(var b=0;b<this.scope.userInfo.PhoneTypes.length;b++){for(var d=this.scope.userInfo.PhoneTypes[b],e=!1,f=0;f<this.scope.filterPhoneTypeList.length;f++){var g=this.scope.filterPhoneTypeList[f];if(d.Type==g.Type){e=!0;break}}if(!e){this.scope.selectedPhoneToEdit.Type=this.scope.userInfo.PhoneTypes[b].Type,this.scope.selectedPhoneToEdit.phoneType=this.scope.userInfo.PhoneTypes[b];break}}}this.$state.go("personalProfile.editphone")},b.prototype.setFilterPhoneTypesList=function(a){if(this.scope.filterPhoneTypeList=new Array,this.scope.userInfo){var b=this.scope.userInfo;if(a){if(b.PhoneList)for(var c=0;c<b.PhoneTypes.length;c++){var d=b.PhoneTypes[c];d.Type!=a&&this.scope.filterPhoneTypeList.push(d)}}else if(b.PhoneList)for(var c=0;c<b.PhoneList.length;c++){var e=b.PhoneList[c],d=this.getPhoneType(e.Type);e.phoneType=d,this.scope.filterPhoneTypeList.push(d)}}},b.prototype.navigateToEditEmail=function(a){this.scope.userInfo=angular.copy(this.scope.userInfoForDisplay),this.scope.selectedEmailToEdit=this.getAccountContactInfo(a),this.$state.go("personalProfile.editemail")},b.prototype.navigateToEditAddress=function(a){this.scope.userInfo=angular.copy(this.scope.userInfoForDisplay),this.scope.selectedAddressToEdit=this.getAccountContactInfo(a),this.$state.go("personalProfile.editaddress")},b.prototype.navigateToEditSpouse=function(){this.scope.userInfo=angular.copy(this.scope.userInfoForDisplay),this.$state.go("personalProfile.editspouse")},b.prototype.deleteSpouse=function(){var a=this;this.contextSvc.showSpinner(),this.userProfileSvc.deleteHousehold().then(function(b){a.scope.isAffiliated=!1,a.manageHouseholdInfo()}).catch(function(b){a.scope.hasError=!0,b&&(a.scope.errorMessage=b)}).finally(function(){a.contextSvc.hideSpinner()})},b.prototype.getAccountContactInfo=function(a){var b=null,c=this.scope.userInfo;if(c)if(c.PrimaryAcct.AcctId==a)b=c.PrimaryAcct;else if(c.AcctAddrEmailList)for(var d=0;d<c.AcctAddrEmailList.length;d++){var e=c.AcctAddrEmailList[d];if(e.AcctId==a){b=e;break}}return b},b.prototype.saveEmail=function(){var a=this,b={},c=this.scope.selectedEmailToEdit;if(c){var d=new Array;d.push(c.AcctId),b.ApplyEmailIds=d,b.ApplyEmail=c,this.contextSvc.showSpinner(),this.userProfileSvc.save(b).then(function(b){a.handleGetUserInfo(b),a.manageContactInfo()}).catch(function(b){a.scope.hasError=!0,b&&(a.scope.errorMessage=b.message)}).finally(function(){a.contextSvc.hideSpinner()})}},b.prototype.savePhone=function(){var a=this,b={};b.ApplyPhoneIds=this.scope.userInfo.ApplyPhoneIds;var c=this.scope.selectedPhoneToEdit;if(c){switch(c.TenDigits&&c.TenDigits.indexOf(this.PHONE_DELIMITER)>0&&(c.TenDigits=c.TenDigits.replace(/-/g,"")),c.Type){case this.PHONE_TYPE_BUSINESS:b.ApplyDaytimePhone=c;break;case this.PHONE_TYPE_HOME:b.ApplyNightPhone=c;break;case this.PHONE_TYPE_MOBILE:b.ApplyMobilePhone=c}this.contextSvc.showSpinner(),this.userProfileSvc.save(b).then(function(b){a.handleGetUserInfo(b),a.manageContactInfo()}).catch(function(b){a.scope.hasError=!0,b&&(a.scope.errorMessage=b.message)}).finally(function(){a.contextSvc.hideSpinner()})}},b.prototype.saveAddress=function(){var a=this,b={},c=this.scope.selectedAddressToEdit;if(c){var d=new Array;d.push(c.AcctId),b.ApplyAddrIds=d,b.ApplyAddress=c,b.ClientMailAddr=this.scope.userInfo.ClientMailAddr,this.contextSvc.showSpinner(),this.userProfileSvc.save(b).then(function(b){a.handleGetUserInfo(b),a.manageContactInfo()}).catch(function(b){a.scope.hasError=!0,b&&(a.scope.errorMessage=b.message)}).finally(function(){a.contextSvc.hideSpinner()})}},b.prototype.saveSpouse=function(){var a=this,b="The information entered does not match with an existing "+this.$rootScope.product+"s account.",c="Thank you, your spouse's information has been saved.";if(this.scope.accountSearchData){var d={AccountSearchData:this.transformAccountSearchData(this.scope.accountSearchData)};this.contextSvc.showSpinner(),this.scope.isAffiliated?this.userProfileSvc.deleteHousehold().then(function(e){a.scope.isAffiliated=!1,a.userProfileSvc.saveHousehold(d).then(function(b){a.scope.isAffiliated=!0,a.$rootScope.raiseMessage(c,3)}).catch(function(c){a.$rootScope.raiseMessage(b,2)}).finally(function(){a.contextSvc.hideSpinner()})}).catch(function(c){a.$rootScope.raiseMessage(b,2)}).finally(function(){a.contextSvc.hideSpinner()}):this.userProfileSvc.saveHousehold(d).then(function(b){a.scope.isAffiliated=!0,a.$rootScope.raiseMessage(c,3)}).catch(function(c){a.$rootScope.raiseMessage(b,2)}).finally(function(){a.contextSvc.hideSpinner()})}},b.prototype.transformAccountSearchData=function(a){var b=a.DateOfBirth.split("/");return{TaxId:a.TaxId.split("-").join(""),DateOfBirth:b[2]+"-"+b[0]+"-"+b[1],LastName:a.LastName.toLowerCase()}},b.prototype.cancel=function(){this.scope.selectedPhoneToEdit=null,this.scope.selectedAddressToEdit=null,this.scope.selectedEmailToEdit=null,this.$state.go("personalProfile.managecontactinfo")},b.prototype.cancelUpdateSpouse=function(){this.$state.go("personalProfile.managehouseholdinfo")},b.prototype.logout=function(){this.authSvc.logout()},b.$inject=["$scope","$state","hgUserProfileSvc","hgAuthSvc"],b}(a.common.hgControllerBase);b.userProfileCtrl=c}(b=a.user||(a.user={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(b){var c=function(a){function b(b,c,d,e,f){var g=this;a.call(this,b,c,d,e),this.$scope=b,this.$rootScope=c,this.$state=d,this.contextSvc=e,this.userProfileSvc=f,this.NEW_REPEAT_PASSWORD_MISMATCH_ERR_DESC="The new password entries do not match.  Please try again.",this.OLD_NEW_PASSWORD_MATCH_ERR_DESC="The new password cannot match your current password. Please try again.",this.NEW_REPEAT_ANSWER_MISMATCH_ERR_DESC="The new answer entries do not match.  Please try again.",this.PWD_SUCCESSFUL_UPDATE_MSG="Your password has been updated.",this.QA_SUCCESSFUL_UPDATE_MSG="Your security question and answer have been updated.",this.$scope.title="Personal Profile",this.$scope.errorMessage=null,this.$scope.successMessage=null,this.$scope.disclaimerAsset=this.setDisclaimerAsset(),this.$scope.disclaimerQAAsset=this.setDisclaimerQAAsset(),this.$scope.answerMinLength=5,this.$scope.answerMaxLength=30,this.$scope.cancel=function(){g.cancel()},this.$scope.changePassword=function(){g.changePassword()},this.$scope.changeSecurityQAData=function(){g.changeSecurityQAData()},this.fetchSecurityData()}return __extends(b,a),b.prototype.setDisclaimerAsset=function(){return this.contextSvc.isIIP()?"SELFSERVICE-UPDATE-PASSWORD-DISCL-AS":"SIP-SELFSERVICE-UPDATE-PASSWORD-DISCL-RETAIL"},b.prototype.setDisclaimerQAAsset=function(){return this.contextSvc.isIIP()?"SELFSERVICE-UPDATE-SECURITYQA-DISCL-AS":"SIP-SELFSERVICE-UPDATE-SECURITYQA-DISCL-RETAIL"},b.prototype.fetchSecurityData=function(){var a=this;this.userProfileSvc.fetchSecurityData().then(function(b){a.handleFetchSecurityData(b)}).catch(function(b){b&&(a.$scope.errorMessage=b.message)})},b.prototype.handleFetchSecurityData=function(a){if(a&&(this.$scope.credentialData=a,!this.$scope.credentialData.SecurityQaData&&(this.$scope.credentialData.SecurityQaData={},this.$scope.credentialData.itemsList=this.getQuestionsList(this.$scope.credentialData),this.$scope.credentialData.itemsList&&this.$scope.credentialData.itemsList.length>0))){var b=this.$scope.credentialData.itemsList[0];b&&b.itemsList&&b.itemsList.length>0&&(this.$scope.credentialData.selectedItem=b.itemsList[0])}},b.prototype.getQuestionsList=function(a){var b=new Array,c=null,d=null;if(a&&a.SecurityQuestions){var e=0;c={},angular.forEach(a.SecurityQuestions,function(a,b){if(a&&a.length>0){var c={};c.value1=""+e,c.value2=a,d?d.push(c):(d=new Array,d.push(c)),e++}}),c.itemsList=d}return b.push(c),b},b.prototype.cancel=function(){this.$state.go("personalProfile.managesecurityinfo")},b.prototype.changePassword=function(){this.$scope.credentialData.SecurityQaData=null,this.$scope.credentialData.Errors=null,this.$scope.successMessage=null;var a=this.checkIfNewAndRepeatAnswerMatch(this.$scope.credentialData.SecurityData);if(!a){var b={};b.Message=this.NEW_REPEAT_PASSWORD_MISMATCH_ERR_DESC,this.$scope.credentialData.Errors=new Array,this.$scope.credentialData.Errors.push(b),this.clearPasswordFields()}if(!this.$scope.credentialData.Errors){var c=this.checkIfOldAndNewAnswerMatch(this.$scope.credentialData.SecurityData);if(c){var d={};d.Message=this.OLD_NEW_PASSWORD_MATCH_ERR_DESC,this.$scope.credentialData.Errors=new Array,this.$scope.credentialData.Errors.push(d),this.clearPasswordFields()}}this.$scope.credentialData.Errors||this.saveSecurityData()},b.prototype.changeSecurityQAData=function(){this.$scope.credentialData.SecurityData=null,this.$scope.credentialData.Errors=null,this.$scope.successMessage=null,this.$scope.credentialData.SecurityQaData.Question=this.$scope.credentialData.selectedItem.value2;var a=this.checkIfNewAndRepeatAnswerMatch(this.$scope.credentialData.SecurityQaData);if(!a){var b={};b.Message=this.NEW_REPEAT_ANSWER_MISMATCH_ERR_DESC,this.$scope.credentialData.Errors=new Array,this.$scope.credentialData.Errors.push(b)}this.$scope.credentialData.Errors||this.saveSecurityData()},b.prototype.checkIfNewAndRepeatAnswerMatch=function(a){var b=!1;return a.Answer==a.RepeatAnswer&&(b=!0),b},b.prototype.checkIfOldAndNewAnswerMatch=function(a){var b=!1;return a.Answer==a.OldAnswer&&(b=!0),b},b.prototype.saveSecurityData=function(){var a=this;this.contextSvc.showSpinner(),this.userProfileSvc.saveSecurityData(this.$scope.credentialData).then(function(b){b&&b.Errors?a.$scope.credentialData.Errors=b.Errors:(a.$scope.credentialData.SecurityData&&(a.$scope.successMessage=a.PWD_SUCCESSFUL_UPDATE_MSG),a.$scope.credentialData.SecurityQaData&&(a.$scope.successMessage=a.QA_SUCCESSFUL_UPDATE_MSG)),a.clearPasswordFields(),a.clearQAFields()}).catch(function(b){b&&(a.$scope.errorMessage=b.message),a.clearPasswordFields()}).finally(function(){a.contextSvc.hideSpinner()})},b.prototype.clearPasswordFields=function(){if(this.$scope.credentialData.SecurityData){this.$scope.credentialData.SecurityData.OldAnswer=null,this.$scope.credentialData.SecurityData.Answer=null,this.$scope.credentialData.SecurityData.RepeatAnswer=null;var a=this.$scope.changePwd;a&&a.$setUntouched()}},b.prototype.clearQAFields=function(){if(this.$scope.credentialData.SecurityQaData){this.$scope.credentialData.SecurityQaData.OldAnswer=null,this.$scope.credentialData.SecurityQaData.Answer=null,this.$scope.credentialData.SecurityQaData.RepeatAnswer=null;var a=this.$scope.changeSecurityQA;a&&a.$setUntouched()}},b}(a.common.hgControllerBase);b.securityCtrl=c}(b=a.user||(a.user={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l){var m=this;this.$scope=a,this.$state=b,this.$modal=c,this.$filter=d,this.items=e,this.styleId=f,this.headerTitle=g,this.selectedItem=h,this.filterItem=i,this.hideBalance=j,this.disabledList=k,this.setSelectedItem=l,a.items=e,a.styleId=f,a.headerTitle=g,a.filterItem=i,a.showMini=!0,a.selectedItem=h,a.hideBalance=j,a.disabledList=k,a.setSelectedItem=l,a.onSelectingAnItem=function(b){if(e)for(var c=0;c<e.length;c++){var d=e[c];if(d)for(var f=0;f<d.itemsList.length;f++){var g=d.itemsList[f];if(g.value1==b){a.selectedItem=g;break}}}m.$scope.ok()},a.showFewer=function(){a.showMini=!0},a.showMore=function(){a.showMini=!1},a.ok=function(){a.setSelectedItem(a.selectedItem),a.$hide()},a.cancel=function(){a.$hide()}}return a.$inject=["$scope","$state","$modal","$filter","items","styleId","headerTitle","selectedItem","filterItem","hideBalance","disabledList","setSelectedItem"],a}();a.ModalInstanceCtrl=b}(b=a.common||(a.common={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(a,b,c,d,e){this.$scope=a,this.$state=b,this.$modal=c,this.noNotMayData=d,this.goalService=e,a.noNotMayData=d;var f=b.current.name;this.checkState(f),a.ok=function(){a.$hide()},a.cancel=function(){a.$hide()}}return a.prototype.checkState=function(a){a.indexOf("charts.goal")>-1&&(this.$scope.goalInfo=this.goalService.getGoalInfo())},a}();a.NoNotMayModalInstanceCtrl=b}(b=a.common||(a.common={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(a,b,c){var d=this;this.$rootScope=a,this.$window=b,this.$timeout=c,this.restrict="A",this.scope={hgStickyScrollingContainer:"@",hgStickyEnabled:"@",hgStickyTopOffset:"&"},this.link=function(a,b){var c=!0;angular.isDefined(a.hgStickyEnabled)&&(c="true"===a.hgStickyEnabled),c&&(d.$timeout(function(){d.elementHeight=d.CalculateChartHeight(b)}),a.hgStickyScrollingContainer&&(d.container=angular.element(a.hgStickyScrollingContainer),d.container.trigger("click")),null!=d.container?d.container[0].addEventListener("scroll",function(c){d.MakeSticky(b,a.hgStickyTopOffset(),c)}):d.$window.addEventListener("scroll",function(c){d.MakeSticky(b,a.hgStickyTopOffset(),c)}))},this.MakeSticky=function(a,b,c){var e=null!=d.container?d.container.scrollTop():d.$window.pageYOffset;e>=d.elementHeight-b&&!d.placeholderAdded?(d.AddPlaceholder(a),a.addClass("sticky"),a[0].style.top=b?b+"px":"0px"):e<d.elementHeight-b&&d.placeholderAdded&&(d.RemovePlaceholder(),a.removeClass("sticky"),a[0].style.top="0px")},this.AddPlaceholder=function(a){d.placeholderNode=angular.element("<div class='sticky-placeholder'></div>"),d.placeholderNode.height(a.height()),a[0].parentNode.insertBefore(d.placeholderNode[0],a[0]),d.placeholderAdded=!0},this.RemovePlaceholder=function(){d.placeholderNode.remove(),d.placeholderAdded=!1},this.CalculateChartHeight=function(a){if(a)return a[0].getBoundingClientRect().top},this.Unstick=function(){}}return a.factory=function(){var b=function(b,c,d){return new a(b,c,d)};return b},a}();a.sticky=b}(b=a.common||(a.common={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(b){var c=function(a){function b(b,c,d,e,f,g,h,i){var j=this;a.call(this,b,c,d,e),this.$scope=b,this.$rootScope=c,this.$state=d,this.hgContextSvc=e,this.$timeout=f,this.$filter=g,this.hgCheckDepositSvc=h,this.hgCommonJs2nSvc=i,this.initialize(),this.$scope.updateAvailableBalance=function(){return j.updateAvailableBalance()},this.$scope.invokeFrontCamera=function(){return j.invokeFrontCamera()},this.$scope.invokeBackCamera=function(){return j.invokeBackCamera()},this.$scope.getReviewCkDepositData=function(){return j.getReviewCkDepositData()},this.$scope.clearDepositCkData=function(){return j.clearDepositCkData()},this.$scope.DepositCheckData=function(){return j.DepositCheckData()},this.$scope.clearDepositCkData=function(){return j.clearDepositCkData()},this.$scope.changeCheckDeposit=function(){return j.changeCheckDeposit()},this.$scope.iraContributionTable=function(a,b){return j.iraContributionTable(a,b)},this.$scope.getSelectedContrValues=function(a){return j.getSelectedContrValues(a)},this.$scope.checkDepositAmt=function(a){return j.checkDepositAmt(a)},this.$scope.viewDepositCheck=function(){return j.viewDepositCheck()},this.$scope.navigateChart=function(){return j.navigateChart()},this.$scope.setForm=function(a){return j.setForm(a)}}return __extends(b,a),b.prototype.updateAvailableBalance=function(){"undefined"!=typeof this.$scope.userAccounts.selectedAccount?(this.$scope.isFrontCheckButtonDisabled=!1,this.$scope.isBackCheckButtonDisabled=!1):(this.$scope.isFrontCheckButtonDisabled=!0,this.$scope.isBackCheckButtonDisabled=!0)},b.prototype.initialize=function(){this.$scope.isBigWeb=this.hgCommonJs2nSvc.isBigweb(),this.$scope.title="Check Deposit",this.$scope.errorMessage="",this.$scope.hasError=!1,this.$scope.fundingAccount="existAccount",this.$scope.isFrontCheckButtonDisabled=!1,this.$scope.isBackCheckButtonDisabled=!1,this.$scope.isReviewDepositButtonDisabled=!1,this.$scope.externalTransferData={},this.checkFundingFlow(),this.getUserAccounts(),this.$scope.reviewDepositFlag=!0,this.$scope.transferData={},this.$scope.transferData.toAccount={}},b.prototype.viewDepositCheck=function(){0==this.$scope.isFunding&&(this.$rootScope.hgAccountNumber=null),this.$scope.userAccounts.selectedItem=null,this.$scope.checkDeposit.Amount="",this.$scope.frontThumbnailAvailable="",this.$scope.backThumbnailAvailable="",this.$scope.reviewDepositFlag=!0,this.$scope.transferData.toAccount.RDCIsIra="false",void 0!==this.$scope.myForm&&this.$scope.myForm.$setPristine(),"accountopen.reviewDepositCheck"==this.$state.current.name?(this.$scope.fundingAccount="chkDeposit",this.$state.go("accountopen.fund")):(this.getUserAccounts(),this.$scope.fundingAccount="chkDeposit",this.$state.go("rdc.launchCheckDeposit"))},b.prototype.navigateChart=function(){return this.$scope.isFunding=!1,this.$rootScope.hgAccountNumber=null,this.$state.go("moveMoney.moveMoneyLaunch"),!0},b.prototype.getReviewCkDepositData=function(){"accountopen.fund"==this.$state.current.name?this.$state.go("accountopen.reviewDepositCheck"):this.$state.go("rdc.reviewDepositCheck")},b.prototype.checkFundingFlow=function(){this.$rootScope.hgAccountNumber?this.$scope.isFunding=!0:this.$scope.isFunding=!1},b.prototype.iraContributionTable=function(a,b){if(1==b&&void 0!=a){var c,d,e,f=(new Date).getFullYear();angular.forEach(this.$scope.userAccounts.fromAccountsList,function(b,g){a==b.RDCAccountIdMasked&&(c=b.RDCContributionTable,angular.forEach(c,function(a,b){f==a.ContrYear&&(d=a.ContrMaxAmt,e=a.ContrSoFar)}))}),this.$scope.years=c,this.$scope.currentYear=f.toString(),this.$scope.currentContrMaxAmtValue=d,this.$scope.currentContrSoFarValue=e}},b.prototype.getSelectedContrValues=function(a){this.$scope.contrYearDefault=a;var b,c,d=this.$scope.years;angular.forEach(d,function(d,e){a==d.ContrYear&&(b=d.ContrMaxAmt,c=d.ContrSoFar)}),this.$scope.currentContrMaxAmtValueFlag=b,this.$scope.currentContrSoFarValueFlag=c,this.$scope.contrYearFlag=1},b.prototype.checkDepositAmt=function(a){return a<=0||(null!=this.$scope.currentContrMaxAmtValue?a>this.$scope.currentContrMaxAmtValue-this.$scope.currentContrSoFarValue:null!=this.$scope.currentContrMaxAmtValueFlag?a>this.$scope.currentContrMaxAmtValueFlag-this.$scope.currentContrSoFarValueFlag:void 0)},b.prototype.jsonDeposit=function(){if(0==this.$scope.isFunding)var a=this.$scope.userAccounts.selectedItem.value1;else var b=this.$scope.isFunding,c=this.$scope.transferData.toAccount.RDCAccountIdMasked;var d;d=null==this.$scope.contrYearDefault?(new Date).getFullYear():this.$scope.contrYearDefault;var e,f,g,h,i,j=d;angular.forEach(this.$scope.userAccounts.fromAccountsList,function(d,k){b!==!0?a==d.RDCAccountIdMasked&&(e=d.RDCAccountId,1==d.RDCIsIra&&angular.forEach(d.RDCContributionTable,function(a,b){j==a.ContrYear&&(f=a.ContrDescription,g=a.ContrCode,h=a.ContrSubCode,i=a.ContrYear)})):1==b&&c==d.RDCAccountIdMasked&&(e=d.RDCAccountId,1==d.RDCIsIra&&angular.forEach(d.RDCContributionTable,function(a,b){j==a.ContrYear&&(f=a.ContrDescription,g=a.ContrCode,h=a.ContrSubCode,i=a.ContrYear)}))});var k={Id:this.$scope.RDCDepositId?this.$scope.RDCDepositId:null,AccountId:e?e:null,Amount:this.$scope.checkDeposit.Amount?this.$scope.checkDeposit.Amount:null,ContrDescription:f?f:null,ContrCode:g?g:null,ContrSubCode:h?h:null,ContrYear:i?i:null};return JSON.stringify(k)},b.prototype.DepositCheckData=function(){var a=this;this.contextSvc.showSpinner();var b=this.hgCheckDepositSvc.postDepositCheckData(this.$scope.RDCDepositId,this.jsonDeposit());b.then(function(b){var c=JSON.stringify(b),d=JSON.parse(c);a.$scope.ReferenceNumber=d.ReferenceNumber,a.$scope.rdcError=d.Message,"accountopen.reviewDepositCheck"==a.$state.current.name?a.$state.go("accountopen.depositCheckConfirmation"):a.$state.go("rdc.depositCheckConfirmation")}),b.catch(function(b){a.$scope.hasError=!0,b&&b.message&&(a.$scope.errorMessage=b.message)}),b.finally(function(){a.contextSvc.hideSpinner()})},b.prototype.getUserAccounts=function(){var a=this;this.contextSvc.showSpinner();var b=this.hgCheckDepositSvc.initializeRemoteCheckDeposit();b.then(function(b){if(a.$scope.userAccounts={},a.$scope.checkDeposit={Id:b.RDCDepositId},a.$scope.userAccounts.RDCRemainingDepositLimit=b.RDCRemainingDepositLimit,1==a.$scope.isFunding?a.$scope.userAccounts.fromAccountsList=angular.copy(b.RDCAccounts):a.$scope.userAccounts.fromAccountsList=a.hgCheckDepositSvc.setHgAccounts(b.RDCAccounts,a.$rootScope.accounts),a.$scope.RDCDepositId=angular.copy(b.RDCDepositId),1==a.$scope.isFunding){var c,d=a;angular.forEach(d.$scope.userAccounts.fromAccountsList,function(a,b){d.$scope.transferData={},d.$scope.transferData.toAccount={},a.RDCAccountId==d.$rootScope.hgAccountNumber&&(c=a)}),d.$scope.transferData.toAccount=c}else a.$scope.userAccounts.itemsList=a.getItemList(a.$scope.userAccounts.fromAccountsList),a.addWatchers()}),b.catch(function(b){a.$scope.hasError=!0,a.$scope.errorMessage=b.message}),b.finally(function(){a.contextSvc.hideSpinner()})},b.prototype.getItemList=function(a){var b=new Array,c=null,d=null,e=null,f=null;return a&&(f=this.$filter("orderBy")(a,"RDCCompanyCode")),angular.forEach(f,function(a,f){d?d!=a.RDCCompanyCode&&(d=a.RDCCompanyCode,c=new Array,e={},e.group=a.RDCCompanyCode,e.itemsList=c,b.push(e)):(d=a.RDCCompanyCode,c=new Array,e={},e.group=a.RDCCompanyCode,e.itemsList=c,b.push(e));var g={};g.value1=a.RDCAccountIdMasked,g.value2=a.RDCAccountNickName,g.value3=a.RDCBalance,g.value6=a.RDCIsIra,
g.value9=a.RDCAccountIdMasked,c.push(g)}),b},b.prototype.invokeFrontCamera=function(){var a=this,b=this.hgContextSvc.appConfig.clientApiUrl+"/rdc/deposits/"+this.$scope.RDCDepositId+"/images/front";this.hgCommonJs2nSvc.invokeCameraForPicture(b,"","","DepositCheckFront").then(function(){a.$scope.frontThumbnail=b+"/thumb?ts="+(new Date).getTime(),a.$scope.frontThumbnailAvailable="true","true"==a.$scope.frontThumbnailAvailable&&"true"==a.$scope.backThumbnailAvailable&&(a.$scope.reviewDepositFlag=!1)}).catch(function(b){a.$scope.hasError=!0,b&&b.message&&(a.$scope.errorMessage=b.message)}).catch(function(a){})},b.prototype.invokeBackCamera=function(){var a=this,b=this.hgContextSvc.appConfig.clientApiUrl+"/rdc/deposits/"+this.$scope.RDCDepositId+"/images/back";this.hgCommonJs2nSvc.invokeCameraForPicture(b,"","","DepositCheckBack").then(function(){a.$scope.backThumbnail=b+"/thumb?ts="+(new Date).getTime(),a.$scope.backThumbnailAvailable="true","true"==a.$scope.frontThumbnailAvailable&&"true"==a.$scope.backThumbnailAvailable&&(a.$scope.reviewDepositFlag=!1)}).catch(function(b){a.$scope.hasError=!0,a.$scope.errorMessage=b.message}).catch(function(a){})},b.prototype.setForm=function(a){this.$scope.myForm=a},b.prototype.addWatchers=function(){var a=this;this.$scope.$watch("userAccounts.selectedItem",function(b,c){b&&(a.iraContributionTable(b.value1,b.value6),a.getSelectedContrValues(a.$scope.contrYearDefault?a.$scope.contrYearDefault:a.$scope.currentYear),void 0!==a.$scope.myForm&&a.$scope.myForm.$setPristine(),a.$scope.checkDeposit.Amount=void 0)}),this.$scope.$watch("userAccounts.selectedToItem",function(a,b){})},b.prototype.clearDepositCkData=function(){this.$scope.userAccounts.selectedItem=null,this.$scope.checkDeposit.Amount="",this.$scope.frontThumbnailAvailable="",this.$scope.backThumbnailAvailable="","accountopen.reviewDepositCheck"==this.$state.current.name?(this.$scope.fundingAccount="chkDeposit",this.$state.go("accountopen.fund")):(this.$scope.fundingAccount="chkDeposit",this.$state.go("rdc.launchCheckDeposit"))},b.prototype.changeCheckDeposit=function(){this.$scope.rdcError="",this.$scope.errorMessage="",this.$scope.hasError=!1,this.$rootScope.messages=null,"accountopen.reviewDepositCheck"==this.$state.current.name?(this.$scope.fundingAccount="chkDeposit",this.$state.go("accountopen.fund")):(this.$scope.fundingAccount="chkDeposit",this.$state.go("rdc.launchCheckDeposit"))},b}(a.common.hgControllerBase);b.checkDepositCtrl=c}(b=a.checkDepositMod||(a.checkDepositMod={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(b){var c=function(a){function b(b,c,d,e,f,g,h,i,j,k){a.call(this,b,c,d,e),this.$scope=b,this.$rootScope=c,this.$state=d,this.contextSvc=e,this.$modal=f,this.$filter=g,this.$controller=h,this.hgCommonJs2nSvc=i,this.hgExternalAccountSvc=j,this.hgMoneyTransferSvc=k,this.externalAccountRTMLLoginCommand={},this.externalAccountMFAVerifyQuestionsCommand={},this.externalAccountLaunchCommand={},this.externalAccountSelectAccountTypeCommand={},this.externalAccountValidationParametersCommand={},this.createRouteToCommand={},this.init(),this.$scope.contextSvc=e}return __extends(b,a),b.prototype.init=function(){var a=this;this.rtmlDetails={},this.rtmlDetails.FiiServeUnavailable=!1,this.rtmlDetails.pageTitle="Verify Your Account",this.rtmlDetails.rtmlInformationAssetID="SIP-TRANSFER-RTML-INFORMATION",this.rtmlDetails.rtmlTermsAssetID="SIP-TRANSFER-RTML-TERMS-AND-CONDITIONS",this.rtmlDetails.backButtonLabel="Back",this.rtmlDetails.nextButtonLabel="Verify Account",this.rtmlDetails.linkToTrialDepositFlow="Or verify your external account with Trial Deposits",this.rtmlDetails.accountNumberLabel="Account Number",this.rtmlDetails.routingNumberLabel="Routing Number",this.rtmlDetails.checkboxErrorMessage="Please select the checkbox.",this.rtmlDetails.termsAndConditionsLinkText="Terms & Conditions",this.rtmlDetails.termsAndConditionsLink=this.contextSvc.appConfig.clientApiUrl+"/public/file/P-655996",this.rtmlDetails.agreeLabel="I Agree",this.rtmlDetails.agreementText='By clicking the "I Agree" box and then "Verify Account" below, you confirm:<br/><br/>That you have reviewed the terms and conditions, and that when you click on the "I Agree" box and then "Verify Account" below, you intent that action to constitute your legal and binding signature to this application and agreement.<br/><br/>That you represent and warrant that you have the authority, acting individually and without notice to any other account holder, to submit this enrollment request to Schwab as fully and completely as if you were the sole account holder of the outside account and that all other owners of the account have authorized me to submit the request to Schwab. <br/> <br/>That you represent and warrant that you will not use this enrollment to send money outside the domestic United States.',this.rtmlDetails.verificationFailedMessage="Verification Failed",this.rtmlDetails.verificationErrorMessage="We could not instantly verify your ownership of this external account. Before we can add this external account, we must verify you external account ownership through trial deposit.",this.rtmlDetails.trialDepositsLink="Enroll your external account with Trial Deposits now",this.rtmlDetails.challengeQuestionsText="Your bank has requested that you answer a few challenge questions to verify your identity.",this.rtmlDetails.challengeQuestionsErrorText="Please enter a response before submitting.",this.$scope.isBigweb=!1,this.$scope.title="Move Money",this.$scope.hasError=!1,this.$scope.hasStatusMessage=!1,this.$scope.errorMessage="",this.$scope.showSecondaryTransferDate=!1,this.$scope.isFunding=!1,this.$scope.isIncomeWithdrawalSetup=!1,this.$scope.tryCount=0,this.$scope.aeaTransferData={},this.$scope.minDateOfFirstDP=new Date,this.$scope.goBack=function(){a.goBack()},this.$scope.submitData=function(){a.submitData()},this.$scope.beginVerification=function(){a.beginVerification()},this.$scope.decline=function(){a.decline()},this.$scope.decline1=function(){a.decline1()},this.$scope.verifyExternalAccount=function(){a.verifyExternalAccount()},this.$scope.reset=function(){a.resetModel()},this.$scope.freqChange=function(){a.freqChange()},this.$scope.goToVerifyStep=function(){a.goToVerifyStep()},this.$scope.externalAccountVerification=function(){a.externalAccountVerification()},this.$scope.fnChangedTransferDate=function(){},this.$scope.openFirstDP=function(b){b.preventDefault(),b.stopPropagation(),a.$scope.firstDPOpened=!0},this.$scope.dateOptions=function(){},this.$scope.openSecondDP=function(b){a.$scope.minDate=a.formatDate(a.$scope.aeaTransferData.transferDate,"dd");var c=parseInt(a.$scope.minDate)+2,d=a.formatDate(a.$scope.aeaTransferData.transferDate,"MM"),e=a.formatDate(a.$scope.aeaTransferData.transferDate,"yyyy");a.$scope.minDate=e+"-"+d+"-"+c;var f=new Date(parseInt(e),parseInt(d),c);f.setDate(f.getDate()),a.$scope.maxDate=a.formatDate(f,"yyyy-MM-dd"),b.preventDefault(),b.stopPropagation(),a.$scope.secondDPOpened=!0},this.getTransferData(),this.$scope.$on("USER_LOGGED_IN_EVENT",function(){a.getTransferData()}),this.$scope.goToTrialDepositsFlow=function(){a.goToTrialDepositsFlow()}},b.prototype.getTransferData=function(){var a=this,b=this.$scope.acctResponse;if(b)this.handleGetAccountListResponse(b);else{this.contextSvc.showSpinner();var c=this.hgMoneyTransferSvc.getTransferData();c.then(function(b){a.handleGetAccountListResponse(b)}),c.catch(function(b){a.$scope.hasError=!0,a.$scope.errorMessage=b.message}),c.finally(function(){a.contextSvc.hideSpinner()})}},b.prototype.externalAccountVerification=function(){this.$state.go("externalAccount.externalAccountSetup")},b.prototype.submitData=function(){this.$rootScope.hgAccountNumber=null,this.$scope.isFunding?(this.$scope.isFunding=!1,this.$state.go("enrollmentconfirmation")):(this.$scope.isFunding=!1,this.$state.go("charts"))},b.prototype.goToTrialDepositsFlow=function(){this.triggerVerifyAccountForTrialDepositsWorkflow(),this.$state.go("externalAccount.verifyExternalAccount")},b.prototype.goToVerifyStep=function(){this.$state.go("externalAccount.verifyExternalAccount")},b.prototype.decline=function(){this.$state.go("moveMoney.moveMoneyLaunch")},b.prototype.decline1=function(){this.$scope.isFunding=!1,this.$scope.isIncomeWithdrawalSetup=!1,this.$state.go("moveMoney.moveMoneyLaunch")},b.prototype.beginVerification=function(){var a=this,b=this.getTransferRequest();this.contextSvc.showSpinner();var c=this.hgExternalAccountSvc.submitData(b);c.then(function(b){a.handleSubmitTransferResponse(b),0==b.StatusId?(a.$state.go("externalAccount.verifyYourAccount"),a.$rootScope.hgAccountNumber=null,a.hgMoneyTransferSvc.removeHgAccountNumber()):(a.$scope.hasStatusMessage=!0,a.$state.go("externalAccount.verifyExternalAccount"),a.$scope.aeaTransferData.statusMessage=b.VerificationMessage)}),c.catch(function(b){a.$scope.hasError=!0,a.$scope.errorMessage=b.message}),c.finally(function(){a.contextSvc.hideSpinner()})},b.prototype.verifyExternalAccount=function(){var a=this;this.contextSvc.showSpinner(),this.externalAccountLaunchCommand.AccountNumber=this.$scope.aeaTransferData.accountNumber.toString(),this.externalAccountLaunchCommand.RoutingNumber=this.$scope.aeaTransferData.routingNumber;var b=this.hgExternalAccountSvc.verifyExternalAccount(this.rtmlDetails,this.externalAccountLaunchCommand);b.then(function(b){a.rtmlDetails=b,a.externalAccountValidationParametersCommand=a.hgExternalAccountSvc.getValidationOptionsCommand()}),b.catch(function(b){a.$scope.hasError=!0,a.$scope.errorMessage=b.message}),b.finally(function(){a.contextSvc.hideSpinner()})},b.prototype.setRoutingNumberToValid=function(a){a?(this.externalAccountLaunchCommand.RoutingNumberValid=!0,this.externalAccountLaunchCommand.AccountNumberValid&&this.externalAccountLaunchCommand.RoutingNumberValid&&(this.verifyExternalAccount(),this.$scope.aeaTransferData.accountSelected=null)):this.externalAccountLaunchCommand.RoutingNumberValid=!1},b.prototype.setAccountNumberToValid=function(a){a?(this.externalAccountLaunchCommand.AccountNumberValid=!0,this.externalAccountLaunchCommand.AccountNumberValid&&this.externalAccountLaunchCommand.RoutingNumberValid&&(this.verifyExternalAccount(),this.$scope.aeaTransferData.accountSelected=null)):this.externalAccountLaunchCommand.AccountNumberValid=!1},b.prototype.attemptAccountLogin=function(){var a=this;this.contextSvc.showSpinner();var b=this.hgExternalAccountSvc.handleExternalAccountRTMLLoginCommand(this.externalAccountRTMLLoginCommand,this.rtmlDetails);b.then(function(b){if(a.rtmlDetails=b,a.rtmlDetails.RouteTo)if("VerificationFailed"==a.rtmlDetails.RouteTo)a.$state.go("externalAccount.externalAccountError");else if("MFAVerification"==a.rtmlDetails.RouteTo)a.$state.go("externalAccount.externalAccountMFAVerification"),a.externalAccountRTMLLoginCommand=a.hgExternalAccountSvc.getMFAChallengeResponses();else if("success"==a.rtmlDetails.RouteTo){a.rtmlDetails.PendingExternalAccount=new Object,a.rtmlDetails.PendingExternalAccount.fromAccountId=a.$scope.aeaTransferData.accountNumber.toString(),a.rtmlDetails.PendingExternalAccount.toAccountId=a.rtmlDetails.SelectedItem.value1;var c=a.$state.get("moveMoney.funding.transferSetup");c.showRTMLVerificationMessage=!0,c.verificationMessage="Congratulations! Your "+a.rtmlDetails.InstitutionName+" account has been successfully verified. You can now transfer funds to and from your Schwab Intelligent Portfolios account.",a.$rootScope.pendingVerificationAccount=a.rtmlDetails.PendingExternalAccount,a.hgMoneyTransferSvc.clearCache(),a.$state.go("moveMoney.funding.transferSetup")}}),b.catch(function(b){a.rtmlDetails=b}),b.finally(function(){a.contextSvc.hideSpinner()})},b.prototype.handleExternalAccountLaunchCommand=function(){this.$rootScope.hgAccountNumber||this.$scope.aeaTransferData.toAccount&&this.$scope.aeaTransferData.toAccount.Id?this.externalAccountLaunchCommand.SelectedItem=this.hgMoneyTransferSvc.createAccountListItem(this.$scope.aeaTransferData.toAccount):this.externalAccountLaunchCommand.SelectedItem=this.$scope.aeaTransferData.selectedItem,this.externalAccountLaunchCommand.SelectedAccount=this.$scope.aeaTransferData.accountSelected,this.rtmlDetails=this.hgExternalAccountSvc.handleExternalAccountLaunchCommand(this.externalAccountLaunchCommand,this.rtmlDetails),this.rtmlDetails.RouteToRTML?(this.externalAccountRTMLLoginCommand=this.hgExternalAccountSvc.getLoginChallengeResponses(),this.$state.go("externalAccount.externalAccountLogin")):this.rtmlDetails.RouteToTrialDeposits&&this.triggerVerifyAccountForTrialDepositsWorkflow()},b.prototype.handleExternalValidationParametersCommand=function(){this.externalAccountRTMLLoginCommand=this.hgExternalAccountSvc.handleValidationParametersCommand(this.externalAccountValidationParametersCommand,this.externalAccountRTMLLoginCommand),this.attemptAccountLogin()},b.prototype.freqChange=function(){this.$scope.showSecondaryTransferDate=!1,this.$scope.aeaTransferData.selectedFrequencyItem.value1==b.SEMIMTH?this.$scope.showSecondaryTransferDate=!0:this.$scope.showSecondaryTransferDate=!1},b.prototype.formatDate=function(a,b){var c=this.$filter("date")(a,b);return c},b.prototype.getDefaultFrequency=function(){if(this.$scope.aeaTransferData.frequencyItemsList&&this.$scope.aeaTransferData.frequencyItemsList.length>0){var a=this.$scope.aeaTransferData.frequencyItemsList[0];if(a&&a.itemsList&&a.itemsList.length>0)return a.itemsList[0]}},b.prototype.getFrequencyItemList=function(a){var b=new Array,c=new Array,d=null,e=null,f=null;return a&&(f=this.$filter("orderBy")(a,"Type")),angular.forEach(f,function(a,f){d?d!=a.Type&&(d=a.Type,c=new Array,e={},e.group=a.Type,e.itemsList=c,b.push(e)):(d=a.Type,c=new Array,e={},e.group=a.Type,e.itemsList=c,b.push(e));var g={};g.value1=a.Code,g.value2=a.Name,g.value3=a.Description,c.push(g)}),b},b.prototype.getMatchingAccount=function(a,b){var c=null;return a&&b&&b.length>0&&angular.forEach(b,function(b,d){b.Id==a.value1&&(c=b)}),c},b.prototype.getMatchingFrequency=function(a){var b=null;return a&&this.$scope.aeaTransferData.Frequencies&&this.$scope.aeaTransferData.Frequencies.length>0&&angular.forEach(this.$scope.aeaTransferData.Frequencies,function(c,d){c.Code==a.value1&&(b=c)}),b},b.prototype.getTransferRequest=function(){this.$scope.aeaTransferData.accountId=this.$scope.aeaTransferData.accountSelected?this.$scope.aeaTransferData.accountSelected.id:void 0;var a=new Object;a.ExternalAccountNumber=this.$scope.aeaTransferData.accountNumber.toString(),a.AbaCode=this.$scope.aeaTransferData.routingNumber.toString(),a.AccountType=this.$scope.aeaTransferData.accountSelected.id,a.CFiid=this.$scope.aeaTransferData.verifiedAccount.Cfiid,a.Fiid=this.$scope.aeaTransferData.verifiedAccount.Fiid,a.InstitutionName=this.$scope.aeaTransferData.verifiedAccount.FinancialInstitutionName,a.Status=this.$scope.aeaTransferData.verifiedAccount.Status,a.VerificationMode=this.$scope.aeaTransferData.verifiedAccount.VerificationMode,this.$scope.accountInfo=a;var b={};return b.Account=this.$scope.accountInfo,b.UserInfo=this.$scope.aeaTransferData.userInfo,b.InitialAmount=this.$scope.aeaTransferData.initialAmount,this.$scope.isFunding||this.$scope.isIncomeWithdrawalSetup?(b.SchwabAccountNumber=Number(this.$scope.aeaTransferData.toAccount.Id),b.IsFunding=!0,this.$scope.aeaTransferData.ongoingAmount>0&&(b.OngoingAmount=this.$scope.aeaTransferData.ongoingAmount,b.Frequency=this.getMatchingFrequency(this.$scope.aeaTransferData.selectedFrequencyItem))):b.SchwabAccountNumber=Number(this.$scope.aeaTransferData.selectedItem.value1),b},b.prototype.getVerifyRequest=function(){var a=new Object,b=null,c={};return this.$scope.aeaTransferData.accountId=this.$scope.aeaTransferData.accountSelected.id,a.ExternalAccountNumber=this.$scope.aeaTransferData.accountNumber.toString(),a.AbaCode=this.$scope.aeaTransferData.routingNumber.toString(),a.AccountType=this.$scope.aeaTransferData.accountSelected.id,b=this.$scope.isFunding||this.$scope.isIncomeWithdrawalSetup?this.$scope.aeaTransferData.toAccount:this.getMatchingAccount(this.$scope.aeaTransferData.selectedItem,this.$scope.aeaTransferData.fromAccountsList),this.$scope.aeaTransferData.selectedToAccount=b,this.$scope.accountInfo=a,c.Account=this.$scope.accountInfo,this.$scope.isFunding||this.$scope.isIncomeWithdrawalSetup?c.SchwabAccountNumber=Number(this.$scope.aeaTransferData.toAccount.Id):c.SchwabAccountNumber=Number(this.$scope.aeaTransferData.selectedItem.value1),c},b.prototype.goBack=function(){this.$state.go("externalAccount.externalAccountSetup")},b.prototype.handleGetAccountListResponse=function(a){this.$scope.hasError=!1,this.$scope.hasStatusMessage=!1;var b=this,c=b.$rootScope.accounts;if(void 0===c&&(c=b.$rootScope.session.mercuryAccounts),this.$scope.aeaTransferData.allAccounts=this.hgMoneyTransferSvc.setHgAccounts(a.Accounts,c),this.$scope.aeaTransferData.fromAccountsList=[],angular.forEach(this.$scope.aeaTransferData.allAccounts,function(a,c){a.IsHg!==!1&&b.$scope.aeaTransferData.fromAccountsList.push(a)}),this.$rootScope.hgAccountNumber){var b=this;angular.forEach(b.$scope.aeaTransferData.allAccounts,function(a,c){a.Id==b.$rootScope.hgAccountNumber&&(b.$scope.aeaTransferData.toAccount=a,b.$scope.isFunding=!0)})}else if(this.$rootScope.recurringWithdrawal&&this.$rootScope.recurringWithdrawal.FundingComplete){var d=_.findWhere(this.$scope.aeaTransferData.allAccounts,{Id:this.$rootScope.recurringWithdrawal.FromAccount.Id});this.$scope.isIncomeWithdrawalSetup=!0,b.$scope.aeaTransferData.toAccount=d}this.$scope.isFunding||this.$scope.isIncomeWithdrawalSetup?(this.$rootScope.initialInvestment>0&&(this.$scope.aeaTransferData.initialAmount=this.$rootScope.initialInvestment),this.$rootScope.recurringInvestment>0&&(this.$scope.aeaTransferData.ongoingAmount=this.$rootScope.recurringInvestment)):this.$scope.aeaTransferData.itemsList=this.hgMoneyTransferSvc.getAccountItemList(this.$scope.aeaTransferData.fromAccountsList,!1)},b.prototype.handleSubmitTransferResponse=function(a){this.$scope.hasError=!1},b.prototype.handleVerifyAccountResponse=function(a){this.$scope.hasError=!1,this.$scope.aeaTransferData.verifiedAccount=a.VerifiedAccount,this.$scope.aeaTransferData.statusMessage=a.StatusMessage,this.$scope.aeaTransferData.Frequencies=a.Frequencies,this.$scope.aeaTransferData.userInfo=a.UserInfo,this.$scope.aeaTransferData.frequencyItemsList=this.getFrequencyItemList(this.$scope.aeaTransferData.Frequencies),this.$scope.aeaTransferData.frequencyItemsList&&this.$scope.aeaTransferData.frequencyItemsList.length>0&&(this.$scope.aeaTransferData.selectedFrequencyItem=this.getDefaultFrequency())},b.prototype.resetModel=function(){this.$scope.aeaTransferData={},this.$scope.isFunding=!1,this.$rootScope.hgAccountNumber=null,this.hgMoneyTransferSvc.removeHgAccountNumber(),this.$scope.aeaTransferData.routingNumber=null,this.$scope.aeaTransferData.accountNumber=null,this.$scope.aeaTransferData.accountType=null,this.$scope.isIncomeWithdrawalSetup=!1},b.prototype.triggerVerifyAccountForTrialDepositsWorkflow=function(){var a=this;this.contextSvc.showSpinner(),this.externalAccountLaunchCommand.AccountNumber=this.$scope.aeaTransferData.accountNumber.toString(),this.externalAccountLaunchCommand.RoutingNumber=this.$scope.aeaTransferData.routingNumber;var b=this.getVerifyRequest(),c=this.hgExternalAccountSvc.verifyAccount(b,this.externalAccountLaunchCommand);c.then(function(b){a.taskSuccessVerifyAccountForTrialDeposit(b)}),c.catch(function(b){a.$scope.hasError=!0,a.$scope.errorMessage=b.message}),c.finally(function(){a.contextSvc.hideSpinner()})},b.prototype.taskSuccessVerifyAccountForTrialDeposit=function(a){this.handleVerifyAccountResponse(a),1==a.IsReadyForInitiatingDeposits?(this.hgMoneyTransferSvc.clearCache(),this.$state.go("externalAccount.verifyExternalAccount"),this.$scope.hasStatusMessage=!1):1==a.IsAlreadyAwaitingDeposits?this.$state.go("trialDeposits.trialDepositInitiation"):(this.$scope.hasStatusMessage=!0,this.$scope.aeaTransferData.statusMessage=a.StatusMessage,this.$state.go("externalAccount.externalAccountLaunch"))},b.prototype.backToAddExternalAccountScreen=function(){this.createRouteToCommand.routeName="externalAccount.externalAccountLaunch",this.hgExternalAccountSvc.RouteTo(this.createRouteToCommand)},b.prototype.backToCredentialsScreen=function(){this.hgExternalAccountSvc.resetExternalAccountMFAVerificationDto(),this.handleExternalAccountLaunchCommand()},b.SEMIMTH="SEMIMTH",b}(a.common.hgControllerBase);b.aeaTransferCtrl=c}(b=a.externalAccountMod||(a.externalAccountMod={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(b){var c=function(a){function b(b,c,d,e,f,g,h,i,j,k){a.call(this,b,c,d,e),this.$scope=b,this.$rootScope=c,this.$state=d,this.contextSvc=e,this.$modal=f,this.$filter=g,this.$controller=h,this.hgCommonJs2nSvc=i,this.hgExternalAccountSvc=j,this.hgMoneyTransferSvc=k,this.init(),this.$scope.contextSvc=e}return __extends(b,a),b.prototype.init=function(){var a=this;this.$scope.title="Move Money",this.$scope.hasError=!1,this.$scope.errorMessage="",this.$scope.aeaTransferData={},this.$scope.trialDepositVerification=function(){a.trialDepositVerification()},this.$scope.verifyTrialDeposit=function(){a.verifyTrialDeposit()},this.$scope.notNow=function(){a.notNow()},this.$rootScope.allAccountsClosedFlag||this.contextSvc.getAllAccountClosedFlag()?(this.$rootScope.allAccountsClosedFlag=!this.$rootScope.allAccountsClosedFlag||this.$rootScope.allAccountsClosedFlag,this.$scope.allAccountsClosedMessage=this.hgMoneyTransferSvc.getAllAccountsClosedMessage()):this.getPendingAccounts()},b.prototype.getPendingAccounts=function(){var a=this;this.contextSvc.showSpinner();var b=this.hgExternalAccountSvc.getPendingAccounts();b.then(function(b){a.handleAccountResponse(b),b.length>1?a.$scope.showPendingAccount=!0:a.$scope.showPendingAccount=!1}),b.catch(function(b){a.$scope.hasError=!0,a.$scope.errorMessage=b.message}),b.finally(function(){a.contextSvc.hideSpinner()})},b.prototype.notNow=function(){this.$state.go("charts")},b.prototype.verifyTrialDeposit=function(){var a=this;this.$scope.showPendingAccount?angular.forEach(a.$scope.aeaTransferData.externalAccounts,function(b,c){c==a.$scope.aeaTransferData.selectedAcc.value&&(a.$scope.aeaTransferData.verificationAccount=b.ExternalAccount,a.$scope.aeaTransferData.pendingTransactionId=b.PendingTransactionId,1==b.ExternalAccount.AccountType?a.$scope.aeaTransferData.selectedAccountType="Checking":a.$scope.aeaTransferData.selectedAccountType="Savings")}):a.$scope.aeaTransferData.verificationAccount=this.$scope.aeaTransferData.pendingAccounts,this.$state.go("trialDeposits.trialVerification")},b.prototype.trialDepositVerification=function(){var a=this,b=this.submitTrialDepositRequest();this.contextSvc.showSpinner();var c=this.hgExternalAccountSvc.submitTrialDeposit(b);c.then(function(b){if(a.handleSubmitTrialDeposit(b),0!=b.StatusId)a.$scope.hasStatusMessage=!0,a.$scope.aeaTransferData.statusMessage=b.VerificationMessage,a.$state.go("trialDeposits.trialVerification");else{a.$scope.hasStatusMessage=!1;var c=new Object;c.toAccountId=b.PendingTransaction.ToAccount.Id,c.fromAccountId=b.PendingTransaction.FromAccount.ExternalAccountNumber,c.initialAmount=b.PendingTransaction.InitialTransaction.Amount,c.initialFrequency=b.PendingTransaction.InitialTransaction.Frequency,c.recurringAmount=b.PendingTransaction.RecurringTransaction.Amount,c.recurringFrequency=b.PendingTransaction.RecurringTransaction.Frequency,c.isFunding=b.PendingTransaction.IsFunding,a.$rootScope.pendingVerificationAccount=c,a.hgMoneyTransferSvc.clearCache(),a.$state.go("moveMoney.funding.transferSetup")}}),c.catch(function(b){a.$scope.hasError=!0,a.$scope.errorMessage=b.message}),c.finally(function(){a.contextSvc.hideSpinner()})},b.prototype.submitTrialDepositRequest=function(){var a={};return a.ExternalAccount=this.$scope.aeaTransferData.verificationAccount,a.PendingTransactionId=this.$scope.aeaTransferData.pendingTransactionId,a.Amount1=parseInt(this.$scope.aeaTransferData.trialAmount,10)/100,a.Amount2=parseInt(this.$scope.aeaTransferData.trialAmount2,10)/100,a},b.prototype.handleAccountResponse=function(a){this.$scope.hasError=!1,this.$scope.aeaTransferData.externalAccounts=a,this.$scope.aeaTransferData.pendingAccounts=a[0].ExternalAccount,this.$scope.aeaTransferData.pendingTransactionId=a[0].PendingTransactionId,1==this.$scope.aeaTransferData.pendingAccounts.AccountType?this.$scope.aeaTransferData.selectedAccountType="Checking":this.$scope.aeaTransferData.selectedAccountType="Savings"},b.prototype.handleSubmitTrialDeposit=function(a){this.$scope.hasError=!1},b}(a.common.hgControllerBase);b.trialVerificationCtrl=c}(b=a.externalAccountMod||(a.externalAccountMod={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(b){var c=function(a){function b(b,c,d,e){var f=this;a.call(this,b,c,d,e),this.$scope=b,this.$rootScope=c,this.$state=d,this.contextSvc=e,this.sipDocumentTitle="Account Documents",this.iipDocumentTitle="Schwab Account Documents",this.sipViewDocument="View Account Documents",this.iipViewDocument="View Schwab Account Documents",this.navigateToDocuments=function(a){switch(a){case 0:f.$state.go("statements",{documentType:0});break;case 1:f.$state.go("statements",{documentType:1});break;case 2:f.$state.go("statements",{documentType:2});break;case 3:f.$state.go("statements",{documentType:3})}},this.$scope.title=c.isSIP?this.sipDocumentTitle:this.iipDocumentTitle,this.$scope.subTitle=c.isSIP?this.sipViewDocument:this.iipViewDocument,b.navigateToDocuments=this.navigateToDocuments,this.$scope.documentAccountSelector={},this.$scope.documentAccountSelector.itemsList=this.getAccountsList(),this.setActiveAccountAsSelectedItem(),this.addWatchers()}return __extends(b,a),b.prototype.setActiveAccountAsSelectedItem=function(){null==this.contextSvc.getActiveAccountNumber()&&this.contextSvc.processAccounts(this.contextSvc.getSessionData());var a=this.contextSvc.getActiveAccountNumber();if(this.$scope.documentAccountSelector.itemsList){var b=this.$scope.documentAccountSelector.itemsList[0];if(b&&b.itemsList&&b.itemsList.length>0)for(var c=0;c<b.itemsList.length;c++)if(b.itemsList[c].value1==a){this.$scope.documentAccountSelector.selectedItem=b.itemsList[c];break}}},b.prototype.getAccountsList=function(){var a=new Array,b=null,c=null,d=this.$rootScope.accounts;return void 0==d&&(d=this.contextSvc.getSessionData().mercuryAccounts),d&&(b={},angular.forEach(d,function(a,b){if(a){var d={};d.value1=a.accountNumber,d.value2=a.name,d.value3="",d.value9=a.AcctIdDisplay,c?c.push(d):(c=new Array,c.push(d))}}),b.itemsList=c),a.push(b),a},b.prototype.getMatchingAccount=function(a){var b=null;return a&&this.$rootScope.accounts&&this.$rootScope.accounts.length>0&&angular.forEach(this.$rootScope.accounts,function(c,d){c.accountNumber==a.value1&&(b=c)}),b},b.prototype.addWatchers=function(){var a=this,b=null;this.$scope.$watch("documentAccountSelector.selectedItem",function(c,d){c&&(b=a.getMatchingAccount(c),b&&a.contextSvc.setActiveAccount(b))})},b}(a.common.hgControllerBase);b.accountDocumentsCtrl=c}(b=a.account||(a.account={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(b){var c=function(a){function b(b,c,d,e,f,g,h,i,j,k,l){a.call(this,b,c,d,e),this.$scope=b,this.$rootScope=c,this.$state=d,this.contextSvc=e,this.$modal=f,this.$filter=g,this.$q=h,this.hgMoneyTransferSvc=i,this.hgCommonJs2nSvc=j,this.hgSuitabilityQuestionsSvc=k,this.$location=l,this.sipPortfolio="Schwab Intelligent Portfolios",this.iipPortfolio="Institutional Intelligent Portfolios",this.sip401kMsg="To transfer assets from an IRA held outside of Schwab or to roll over your 401(k) from your employer's plan to your Schwab Intelligent Portfolios IRA, please call a Schwab Rollover Consultant at 866-855-5636 for personal assistance. If you are currently a SchwabPlan 401(k) participant please call 800-724-7526.",this.iip401kMsg="To transfer assets from an IRA held outside of Schwab or to roll over your 401(k) from your employer’s plan to your Institutional Intelligent Portfolios IRA, please call your advisor for assistance.",this.title="Move Money",this.fundingTitle="Fund Your Account",this.recurringWithdrawalTitle="Set Up Recurring Withdrawals",this.subTitle="",this.fundingSubTitle="Choose a funding method",this.init(),this.q=h,this.$scope.contextSvc=e}return __extends(b,a),b.prototype.init=function(){var a=this;this.$scope.isNative=this.contextSvc.device.isNative(),this.$scope.title="Move Money",this.$scope.showMoveMoneyMethods=!1,this.$scope.showMoneyTransfer=!1,this.$scope.show401kRollOver=!1,this.$scope.errorMessage="",this.$scope.hasError=!1,this.$scope.goToFeature=function(){return a.goToFeature()},this.$scope.goToDashboard=function(){return a.goToDashboard()},this.$scope.goToDone=function(){return a.goToDone()},this.$scope.getMoveMoneyTitle=function(){return a.getTitle()},this.$scope.getMoveMoneySubTitle=function(){return a.getSubTitle()},this.$scope.enableButtons=!1,this.$scope.portfolioText=this.$rootScope.isIIP?this.iipPortfolio:this.sipPortfolio,this.$scope.rollover401kMessage=this.$rootScope.isIIP?this.iip401kMsg:this.sip401kMsg,this.hgMoneyTransferSvc.getHgAccountNumber()&&(this.$rootScope.hgAccountNumber=this.hgMoneyTransferSvc.getHgAccountNumber(),this.hgMoneyTransferSvc.removeHgAccountNumber()),this.$scope.$on("accountListUpdated",function(b,c,d,e,f){a.hgMoneyTransferSvc.clearCache(),a.$scope.acctResponse=null});var b=this;this.$scope.$on("$stateChangeStart",function(c,d,e,f,g){("moveMoney.moveMoneyLaunch"==d.name&&"moveMoney.funding.transferAcknowledgement"==f.name||"moveMoney.funding.transferSetup.editTransferGoalMMData"==d.name&&"moveMoney.funding.transferAcknowledgement"==f.name)&&("moveMoney.funding.transferSetup.editTransferGoalMMData"==d.name&&(b.$state.current=d),a.init())}),this.$rootScope.allAccountsClosedFlag||this.contextSvc.getAllAccountClosedFlag()?(this.$rootScope.allAccountsClosedFlag=!this.$rootScope.allAccountsClosedFlag||this.$rootScope.allAccountsClosedFlag,this.$scope.allAccountsClosedMessage=this.hgMoneyTransferSvc.getAllAccountsClosedMessage()):("true"==this.$location.search().isrecurring&&this.setRecurringWithdrawalFlow(),this.setMoveMoneyNavigationData(),this.subTitle="How would you like to move money"+(this.contextSvc.isIIP()?" to/from your Schwab account?":"?"),this.getAccounts())},b.prototype.setMoveMoneyNavigationData=function(){this.$scope.goalMoveMoneyNavigationData={};var a=this.$state.current;a&&a.type&&a.type.length>0&&(this.$scope.goalMoveMoneyNavigationData.type=a.type,this.$scope.goalMoveMoneyNavigationData.amount=a.amount,this.$scope.goalMoveMoneyNavigationData.isOnetime=a.isOnetime,this.$scope.goalMoveMoneyNavigationData.returnState=a.returnState,this.$scope.goalMoveMoneyNavigationData.isWithdrawal=a.isWithdrawal,this.resetMoveMoneyRouteData(this.$state.current.name))},b.prototype.resetMoveMoneyRouteData=function(a){var b=this.$state.get(a);b.type&&delete b.type,b.amount&&delete b.amount,delete b.isOnetime,b.returnState&&delete b.returnState,b.returnState&&delete b.returnState,delete b.isWithdrawal},b.prototype.populateFundingAmounts=function(a){var b=this,c=this.q.defer(),d=null,e=function(){_.forEach(b.$rootScope.accounts,function(b){b.accountNumber==a&&(d=b.id);
})};a&&(this.$rootScope.accounts?e():(this.contextSvc.processAccounts(this.contextSvc.getSessionData()),this.$rootScope.hgAccountNumber&&e()));var f=function(a){if(a&&a.Answers){var b=_.find(a.Answers,function(a){return a.IsSelected});if(b)return b.SelectedValue}},g=this.hgSuitabilityQuestionsSvc.getAnswers(null,d,!0);return g.then(function(a){if(a){b.$rootScope.initialInvestment=f(_.find(a.Questions,function(a){return a&&"9"==a.QuestionId}));var d=f(_.find(a.Questions,function(a){return a&&"11"==a.QuestionId}));b.$rootScope.recurringInvestment=d>0?d:null,c.resolve(a)}}),g.catch(function(a){c.reject(null)}),c.promise},b.prototype.setDefaultFeature=function(a){this.$scope.selectedFeature={},this.$scope.selectedFeature.value=a},b.prototype.goToFeature=function(){var a=this,b=this.$scope.selectedFeature.value,c=function(b){if(b)switch(b){case"1":a.goToCheckDeposit();break;case"2":a.goToExternalAccount();break;case"3":a.goToMoneyTransfer();break;case"4":a.goToDone()}};this.$rootScope.hgAccountNumber?this.populateFundingAmounts(this.$rootScope.hgAccountNumber).then(function(a){c(b)}):c(b)},b.prototype.goToExternalAccount=function(){this.$state.go("externalAccount.externalAccountLaunch")},b.prototype.goToMoneyTransfer=function(){this.$state.go("moveMoney.funding.transferSetup")},b.prototype.goToCheckDeposit=function(){this.$state.go("rdc.launchCheckDeposit")},b.prototype.goToDone=function(){this.$rootScope.hgAccountNumber=null,this.hgMoneyTransferSvc.removeHgAccountNumber(),this.$state.go("enrollmentconfirmation")},b.prototype.goToDashboard=function(){this.$state.go("charts")},b.prototype.getAccounts=function(){var a=this;this.$rootScope.hgAccountNumber&&this.hgMoneyTransferSvc.clearCache(),this.contextSvc.showSpinner();var b=this.hgMoneyTransferSvc.getTransferData();b.then(function(b){a.$scope.enableButtons=!0,a.handleGetAccountListResponse(b)}),b.catch(function(b){a.$scope.hasError=!0,b&&b.message&&(a.$scope.errorMessage=b.message)}),b.finally(function(){a.contextSvc.hideSpinner()})},b.prototype.handleGetAccountListResponse=function(a){var b=this;this.$scope.acctResponse=a,void 0===this.$rootScope.accounts?(this.contextSvc.showSpinner(),this.offMeRegister=this.contextSvc.$rootScope.$on("ACCOUNTS_UPDATED_EVENT",function(){b.contextSvc.hideSpinner(),b.continueAccountListResponse(a)})):this.continueAccountListResponse(a)},b.prototype.continueAccountListResponse=function(a){var b=this.hgMoneyTransferSvc.setHgAccounts(a.Accounts,this.$rootScope.accounts,this.$rootScope.hgAccountNumber);if(b&&b.length>0){this.setDefaultFeature("2"),this.hgMoneyTransferSvc.checkCanTransferFromExisting(b)&&(this.$scope.showMoneyTransfer=!0,this.setDefaultFeature("3"));for(var c=0;c<b.length;c++){var d=b[c];if(d.IsRetirement&&!this.hgMoneyTransferSvc.excludeIneligibleReasons(d.ToIneligibleReasons,["T001","T009"],d.IsHg).Exclude){this.$scope.show401kRollOver=!0,this.setDefaultFeature("4"),this.$scope.enableButtons=!0;break}}this.$scope.showMoveMoneyMethods=!0,void 0!==this.offMeRegister&&this.offMeRegister(),this.hideRecurringOption()}},b.prototype.getTitle=function(){return this.isFunding()?this.fundingTitle:this.$rootScope.recurringWithdrawal&&this.$rootScope.recurringWithdrawal.FundingComplete?this.recurringWithdrawalTitle:this.title},b.prototype.getSubTitle=function(){return this.isFunding()?this.fundingSubTitle:this.subTitle},b.prototype.isFunding=function(){return!!this.$rootScope.hgAccountNumber||!!this.$rootScope.pendingVerificationAccount&&this.$rootScope.pendingVerificationAccount.isFunding},b.prototype.hideRecurringOption=function(){this.$rootScope.recurringWithdrawal&&this.$rootScope.recurringWithdrawal.FundingComplete&&(this.$scope.show401kRollOver=!1)},b.prototype.setRecurringWithdrawalFlow=function(){var a=this.contextSvc.getActivePortfolioId(),b=this.contextSvc.getActiveAccount();b||(this.contextSvc.processAccounts(this.contextSvc.getSessionData()),a=this.contextSvc.getActivePortfolioId(),b=this.contextSvc.getActiveAccount());var c=this;this.hgMoneyTransferSvc.getFundingGoalParameters(b.id).then(function(a){c.$rootScope.recurringWithdrawal={FundingComplete:!0,FromAccount:{Id:b.brkrAcctId},Amount:a.recurringWithdrawal}});var d=0;this.$rootScope.accounts?d=this.$rootScope.accounts.indexOf(this.contextSvc.getActiveAccount()):(this.contextSvc.processAccounts(this.contextSvc.getSessionData()),d=this.$rootScope.accounts.indexOf(this.contextSvc.getActiveAccount()));var e={accountIndex:d,RecurringWithdrawalNotification:!0},f=[];null!=this.hgMoneyTransferSvc.getRecurringWithdrawalNotification("RIRW_"+this.$rootScope.session.brkrCustId)&&(f=JSON.parse(this.hgMoneyTransferSvc.getRecurringWithdrawalNotification("RIRW_"+this.$rootScope.session.brkrCustId)),angular.forEach(f,function(a,b){a.accountIndex==d&&f.splice(b,1)})),f.push(e),this.recurringWithdrawalTitle="Set Up a Recurring Withdrawal from Your New Income Account",this.hgMoneyTransferSvc.RecurringWithdrawalNotification("RIRW_"+this.$rootScope.session.brkrCustId,f)},b}(a.common.hgControllerBase);b.moveMoneyCtrl=c}(b=a.moveMoneyMod||(a.moveMoneyMod={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(b){var c=function(a){function b(b,c,d,e,f,g){var h=this;a.call(this,b,d,e,f),this.$scope=b,this.windowSvc=c,this.$rootScope=d,this.$state=e,this.contextSvc=f,this.hgMoneyTransferSvc=g,this.CHARTS_GOAL_STATE="charts.goal.goalMain",this.ONETIME_FREQUENCY_DESCRIPTION="One Time",this.PLANRECOMMENDATION_STATE="portfolioConfirmation",this.DASHBOARD_STATE="charts",this.showRecentTransfers=function(){var a=h.$scope.requestedTransaction,b=h.hgMoneyTransferSvc.getTransactions(a.fromAccount.Id,a.toAccount.Id,!0);b.then(function(a){if(a&&a.Transactions&&a.Transactions.length>0){h.$scope.transactions=new Array;for(var b=0;b<a.Transactions.length;b++){var c=a.Transactions[b];c&&c.Transaction&&c.Transaction.FrequencyDescription!=h.ONETIME_FREQUENCY_DESCRIPTION&&h.$scope.transactions.push(c)}}}),b.catch(function(a){console.error(a)}),b.finally(function(){})},b.$on("$destroy",function(){h.clearActiveAccountId()}),this.$scope.newTransfer=function(){h.newTransfer()},this.$scope.cancel=function(){h.cancel()};var i=new Object,j=new Object;j.Id="0",f.activeAccount&&f.activeAccount.brkrAcctId&&f.activeAccount.brkrAcctId.length>0&&this.storeActiveAccountId(f.activeAccount.brkrAcctId),i.Id=this.getActiveAccountId();var k=this.$scope.goalMoveMoneyNavigationData;if(k){var l=new Object;l.Amount=k.amount,k.isWithdrawal?(l.fromAccount=i,l.toAccount=j):(l.toAccount=i,l.fromAccount=j),l.Frequency=k.isOnetime?"ONETIME":"MONTHLY",this.$scope.requestedTransaction=l}this.$scope.transfer=function(a){var b=!1;if(h.$scope.transactions&&h.$scope.transactions.length>0){for(var c=0;c<h.$scope.transactions.length;c++){var d=h.$scope.transactions[c];if(d.TransferId==a){b=d.CanEdit;break}}if(b){var e=h.$state.get("moveMoney.funding.transferSetup.edit");a&&a.length>0&&(e.transferId=a),h.$state.go("moveMoney.funding.transferSetup.edit")}}},this.$scope.funcShowRecentTransfers=this.showRecentTransfers()}return __extends(b,a),b.prototype.newTransfer=function(){var a=this.$state.current,b=this.$state.get("moveMoney.funding.transferSetup.editTransferGoalMMData");if(null!=b&&a.returnState===this.DASHBOARD_STATE)b&&(this.$scope.goalMoveMoneyNavigationData.type=b.type=a.type,this.$scope.goalMoveMoneyNavigationData.amount=b.amount=a.amount,this.$scope.goalMoveMoneyNavigationData.isOnetime=b.isOnetime=!1,this.$scope.goalMoveMoneyNavigationData.returnState=b.returnState=a.returnState,this.$scope.goalMoveMoneyNavigationData.isWithdrawal=b.isWithdrawal=a.isWithdrawal);else{var c=this.$state.get("moveMoney.funding.transferSetup.editTransferGoalMMData");c.isNewTransfer=!0}this.$state.go("moveMoney.funding.transferSetup.editTransferGoalMMData")},b.prototype.cancel=function(){this.$state.go(this.CHARTS_GOAL_STATE)},b.prototype.clearActiveAccountId=function(){this.windowSvc.sessionStorage.removeItem("HG_EDIT_AA_ID")},b.prototype.storeActiveAccountId=function(a){a&&a.length>0&&this.windowSvc.sessionStorage.setItem("HG_EDIT_AA_ID",a)},b.prototype.getActiveAccountId=function(){return this.windowSvc.sessionStorage.getItem("HG_EDIT_AA_ID")},b}(a.common.hgControllerBase);b.editTransactionCtrl=c}(b=a.moveMoneyMod||(a.moveMoneyMod={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(b){var c;!function(b){var c=function(a){function b(b,c,d,e,f,g,h){a.call(this,b,c,d,e),this.$scope=b,this.$rootScope=c,this.$state=d,this.contextSvc=e,this.authSvc=f,this.hgProgramSelectorSvc=g,this.hgExternalAccountSvc=h,this.init()}return __extends(b,a),b.prototype.init=function(){var a=this;this.getProgramData(),this.$scope.setSelectedAccount=function(b){a.hgProgramSelectorSvc.setSelectedProgram(b.href).then(function(){a.goNext()})},this.$scope.logout=function(){a.logout()}},b.prototype.getProgramData=function(){this.$scope.model=this.hgProgramSelectorSvc.getAvailablePrograms()},b.prototype.goNext=function(){var a,b=this,c=this.contextSvc.getPendingNavigationState(),d=!1;c&&c.length>0&&(a=this.contextSvc.getPendingNavigationStateParams(),d=!0),d?(this.contextSvc.clearPendingNavigationStateData(),this.$state.go(c,a)):this.hgExternalAccountSvc.hasTrialDeposits().then(function(a){a?b.$state.go("trialDeposits.trialDepositInitiation"):b.$state.go("charts")})},b.prototype.logout=function(){this.authSvc.logout()},b.$inject=[],b}(a.common.hgControllerBase);b.programSelectorCtrl=c}(c=b.advisors||(b.advisors={}))}(b=a.ui||(a.ui={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){"use strict";function b(){return{restrict:"AE",template:'<div class="row margin-0">                            <div class="col-xs-11 col-sm-11 col-md-11 padding-right-0">                                <div class="selector-list-item-data" hg-dynamic-html-compile dynamic-html-string="text1" ng-transclude></div>                                  <div class="padding-top-12">                                        <span class="selector-list-item-data" hg-dynamic-html-compile dynamic-html-string="text3" ng-transclude></span>                                        <span data-ng-hide="hideBalance" class="pull-right" hg-dynamic-html-compile dynamic-html-string="text2" ng-transclude></span>                                  </div>                            </div>                            <div class="selector-list-item-chevron col-xs-1 col-sm-1 col-md-1 text-right padding-right-4 padding-top-11"><i class="icon-arrow-right"></i></div>                      </div>',replace:!0,transclude:!0,scope:{text1:"@",text2:"@",text3:"@"},link:function(a,b,c){}}}a.hgSelectorListItem=b}(b=a.hig||(a.hig={}))}(hg||(hg={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},hg;!function(a){var b;!function(b){var c;!function(b){var c=function(a){function b(b,c,d,e,f){a.call(this,b,c,d,e),this.$scope=b,this.$rootScope=c,this.$state=d,this.contextSvc=e,this.fileUploadSvc=f,this.SUCCESSFUL_MSG="Your files have been successfully uploaded.",this.showConfirmDialogOnRemove=!1,this.init()}return __extends(b,a),b.prototype.init=function(){var a=this;this.$scope.title="Upload a File",this.$scope.successTitle="File(s) Uploaded",this.$scope.fileUploadSuccess=!1,this.$scope.buttonText="Submit File",this.resetMessages(),this.$scope.documentAccountSelector={},this.$scope.documentAccountSelector.itemsList=this.getAccountsList(),this.$scope.submitFile=function(){a.submitFile()},this.$scope.goBackToContactUs=function(){a.goBackToContactUs()},this.$scope.fileUploadComplete=function(){a.fileUploadComplete()},this.$scope.fileUploadFailed=function(b){a.fileUploadFailed(b)},this.$scope.getUploadURLPerFile=function(b){return a.getUploadURLPerFile(b)},this.$scope.showConfirmDialogOnRemove=!1,this.$scope.blueimpOptions={},this.$scope.blueimpOptions.acceptFileTypes=/(\.|\/)(bmp|gif|png|tif|tiff|pdf|jpeg|jpg|doc|docx|xls|xlsx)$/i,this.$scope.blueimpOptions.maxNumberOfFiles=5,this.$scope.blueimpOptions.maxFileSize=6e6,this.addWatchers(),this.$scope.resetMessages=function(){a.resetMessages()}},b.prototype.submitFile=function(){this.$scope.errorMessage=null,this.$scope.successMessage?this.$state.go("contactUs.contactUsLaunch"):this.$scope.blueimpOptions&&this.$scope.blueimpOptions.fileUploadBegin&&(this.$scope.blueimpOptions.hg_disable_file_remove=!0,this.$scope.disableAccountSelector=!0,this.$scope.blueimpOptions.fileUploadBegin()),this.$scope.successMessage=null},b.prototype.getUploadURLPerFile=function(a){var b=this.contextSvc.getActiveAccount(),c=this.contextSvc.appConfig.clientApiUrl+"/FileUpload/"+a+"/"+b.accountNumber;return c},b.prototype.fileUploadComplete=function(){this.$scope.buttonText="Done",this.$scope.fileUploadSuccess=!0,this.$scope.successMessage=this.SUCCESSFUL_MSG},b.prototype.fileUploadFailed=function(a){this.$scope.buttonText="Retry",this.$scope.errorMessage=a},b.prototype.goBackToContactUs=function(){this.$state.go("contactUs.contactUsLaunch")},b.prototype.getAccountsList=function(){var a=new Array,b=null,c=null,d=this.$rootScope.accounts;return void 0===d&&(d=this.$rootScope.session.mercuryAccounts),d&&(b={},angular.forEach(d,function(a,b){if(a){var d={};d.value1=a.accountNumber,d.value2=a.name,d.value3=a.balance.replace("$","").replace(",",""),d.value9=a.AcctIdDisplay,c?c.push(d):(c=new Array,c.push(d))}}),b.itemsList=c),a.push(b),a},b.prototype.getMatchingAccount=function(a){var b=null;return a&&this.$rootScope.accounts&&this.$rootScope.accounts.length>0&&angular.forEach(this.$rootScope.accounts,function(c,d){c.accountNumber==a.value1&&(b=c)}),b},b.prototype.addWatchers=function(){var a=this,b=null;this.$scope.$watch("documentAccountSelector.selectedItem",function(c,d){c&&(b=a.getMatchingAccount(c),b&&a.contextSvc.setActiveAccount(b))})},b.prototype.resetMessages=function(){this.$scope.successMessage=null,this.$scope.errorMessage=null},b.$inject=[],b}(a.common.hgControllerBase);b.fileUploadCtrl=c}(c=b.contactUs||(b.contactUs={}))}(b=a.ui||(a.ui={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b;!function(a){var b=function(){function a(a,b){this.$scope=a,this.$modalInstance=b,a.ok=function(){b.close()},a.cancel=function(){b.dismiss("cancel")}}return a}();a.confirmDialogModalInstanceCtrl=b}(b=a.common||(a.common={}))}(b=a.ui||(a.ui={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(a,b){var c=this;this.$scope=a,this.$state=b,this.$scope.goToGoals=function(){c.$state.go("charts.goal.goalMain")}}return a}();a.moveMoneyMessageCtrl=b}(b=a.moveMoneyMod||(a.moveMoneyMod={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(a){this.performanceSvc=a;var b=this;a.getPerformanceData().then(function(c){if(c){if(b.performanceViewModel=new Object,c.allAccountsClosedMessage)return void(b.performanceViewModel.allAccountsClosedMessage=c.allAccountsClosedMessage);if(c.badPerformanceData)return b.performanceViewModel.badPerformanceData=c.badPerformanceData,b.performanceViewModel.badPerformanceDataMsg1=c.badPerformanceDataMsg1,void(b.performanceViewModel.badPerformanceDataMsg2=c.badPerformanceDataMsg2);b.performanceViewModel=c,void 0==b.performanceViewModel.selectedViewType&&(b.performanceViewModel.selectedViewType="performance");var d=b.performanceViewModel.benchmarkPicker&&b.performanceViewModel.benchmarkPicker.selectedBenchmarkList&&b.performanceViewModel.benchmarkPicker.selectedBenchmarkList.length>0?b.performanceViewModel.benchmarkPicker.selectedBenchmarkList:[];a.redrawPerformanceChart(b.performanceViewModel,b.performanceViewModel.selectedViewType,d),b.performanceViewModel.benchmarkPicker.openBenchmarkModal=function(){b.performanceSvc.navigateToBenchmarkSelection(b.performanceViewModel)},b.performanceViewModel.updatePerfChart=function(c){a.updatePerformanceChart(c,b.performanceViewModel)},b.performanceViewModel.removeBenchmark=function(c){a.removeBenchmark(c,b.performanceViewModel)},b.performanceViewModel.navigateToBenchmarkSelection=function(){b.performanceSvc.navigateToBenchmarkSelection(b.performanceViewModel)},b.performanceViewModel.navigateToPerformance=function(){b.performanceSvc.navigateToPerformance()},b.performanceViewModel.getDateRange=function(){b.performanceSvc.getDateRange(b.performanceViewModel.customRange)}}})}return a.$inject=["hgPerformanceService"],a}();a.performanceCtrl=b}(b=a.assets||(a.assets={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(){}return a.excludeItem=function(a,b){var c=a;return b&&b&&(c=a.filter(function(a){return!angular.equals(a,b)})),c},a.excludeListOfItems=function(a,b){var c=a;return b&&b&&(c=a.filter(function(a){for(var c=!1,d=0;d<b.length;d++)angular.equals(a,b[d])&&(c=!0);return!c})),c},a}();a.excludeFromArrayFilter=b;var c=function(){function a(){}return a.hgCurrency=function(a,b){return $.isNumeric(a)?b(a):"N/A"},a}();a.hgCurrencyFilter=c}(b=a.fundingMod||(a.fundingMod={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function b(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){this.$state=a,this.$rootScope=b,this.$window=c,this.$location=d,this.authSvc=e,this.contextSvc=f,this.appCacheSvc=g,this.managedVersionSvc=h,this.crossOriginMessageSvc=i,this.suitabilityQuestionsSvc=j,this.stateSvc=k,this.hgCommonJs2nSvc=l,this.hgAuthJs2nSvc=m,this.hgMenuJs2nSvc=n,this.hgMenuSvc=o,this.hgAuthLoginFactory=p,this.hgTaggingSvc=q,this.hgAppDynamicsSvc=r,this.NO_MERCURY_ACCOUNTS_MSG="You do not have any Schwab Intelligent Portfolios accounts.",this.LOGOUT_MESSAGE="You have successfully logged off.",this.handlingSessionTimeout=!1}return b.prototype.init=function(){this.initializeQueryParamValues(),FastClick.attach(document.body),this.initializeTaggingService(),this.initializeCrossOriginMessageService(),this.initializeRootScopeDeviceInfo(),this.initializeRootScopeCustomizationInfo(),this.initializeRootScopeLocalResources(),this.initializeRootScopeMessages(),this.initalizeRootScopeProductExperience(),this.registerOnlineEvents(),this.registerGlobalMessageEvents(),this.registerOnStateChangeEvent(),this.registerOnStateChangeSuccessEventHandler(),this.registerUserLoggedInEventHandler(),this.registerNoMercuryAccountEventHandler(),this.registerResumeEventHandler(),this.initializeTheme(),this.main(),this.initializeAppDynamics()},b.prototype.bindScroller=function(){var a=document.getElementById("content-mobile");if(a){var b=new IScroll(a,{bounce:!1});b.scrollTop(0,0)}},b.prototype.initializeTaggingService=function(){var a=this.contextSvc.appConfig.webAnalyticsConfig;this.hgTaggingSvc.init(a)},b.prototype.initializeAppDynamics=function(){var a=this.contextSvc.appConfig.appDynamicsConfig;this.hgAppDynamicsSvc.init(a)},b.prototype.initializeCrossOriginMessageService=function(){this.crossOriginMessageSvc.subscribe()},b.prototype.initializeQueryParamValues=function(){var b=a.utils.parseQueryParams(this.$window.location.href);b&&(b.return&&this.contextSvc.setPublicReturnUrl(b.return),this.contextSvc.device.setNativeAppSettings(b.appName,b.appVersion,b.deviceName,b.deviceOS,b.locale,b.deviceRes))},b.prototype.initializeRootScopeDeviceInfo=function(){var a=this;this.$rootScope.deviceInfo={isNative:function(){return a.contextSvc.device.isNative()},isBrowser:function(){return!a.contextSvc.device.isNative()},isNativeIOS:function(){return a.contextSvc.device.isNativeIOS()},isNativeAndroid:function(){return a.contextSvc.device.isNativeAndroid()},isSmallScreen:function(){return a.contextSvc.device.isSmallScreen()},isLargeScreen:function(){return a.contextSvc.device.isLargeScreen()}}},b.prototype.initializeRootScopeCustomizationInfo=function(){var a=this,b=this;this.$rootScope.customizationInfo={getThemeName:function(){return b.contextSvc.customization.getThemeName()},getLogoStyle:function(){return b.contextSvc.customization.getLogoStyle(a.contextSvc.isIIP())},getAdvisorSpecificDisclosure:function(){return b.contextSvc.customization.getAdvisorSpecificDisclosure()},getAdvisorInformation:function(){return b.contextSvc.customization.getAdvisorInformation()},getPhoneDisplay:function(){return b.contextSvc.customization.getPhoneDisplay()}}},b.prototype.initializeRootScopeLocalResources=function(){var a=this;this.$rootScope.localResources=this.contextSvc.getLocalResourcesAsProperties(),this.$rootScope.getLocalResource=function(b){return a.contextSvc.getLocalResourceById(b).content}},b.prototype.initializeRootScopeMessages=function(){var a=this,b=this.$rootScope;b.raiseMessage=function(a,c,d,e){b.messages||(b.messages={},c?b.messages.messageType=c:b.messages.messageType=2,b.messages.messageList=[]);var f=_.find(b.messages.messageList,function(b){return b.message===a});f||(c?b.messages.messageType=c:b.messages.messageType=2,d?b.messages.messageTitle=d:b.messages.messageTitle="",b.messages.messageList.push({message:a,dismissCallback:e}))},this.$rootScope.dismissMessage=function(a){if(a&&b.messages&&b.messages.messageList){for(var c=0;c<b.messages.messageList.length;c++){var d=b.messages.messageList[c];if(d&&d.message===a){b.messages.messageList.splice(c,1),d.dismissCallback&&d.dismissCallback();break}}b.messages.messageList&&0==b.messages.messageList.length&&(b.messages=null)}},this.$rootScope.dismissMessages=function(){a.$rootScope.messages=null}},b.prototype.initalizeRootScopeProductExperience=function(){this.$rootScope.isSIP=this.contextSvc.isSIP(),this.$rootScope.isIIP=this.contextSvc.isIIP(),this.$rootScope.product=this.contextSvc.isIIP()?this.contextSvc.appConfig.product.IIP:this.contextSvc.appConfig.product.SIP},b.prototype.registerOnlineEvents=function(){var a=this;this.$rootScope.onlineStatus={onLine:this.$window.navigator.onLine,isOnline:function(){return a.$rootScope.onlineStatus.onLine}},this.$rootScope.onlineStatus.isOnline()||a.$rootScope.raiseMessage(a.contextSvc.appConfig.networkUnavailableMessage,4),this.$window.addEventListener("online",function(){a.$rootScope.onlineStatus.onLine=!0,a.$rootScope.dismissMessage(a.contextSvc.appConfig.networkUnavailableMessage),a.$rootScope.$digest()},!0),this.$window.addEventListener("offline",function(){a.$rootScope.onlineStatus.onLine=!1,a.$rootScope.raiseMessage(a.contextSvc.appConfig.networkUnavailableMessage,4),a.$rootScope.$digest()},!0)},b.prototype.registerGlobalMessageEvents=function(){var a=this,b=["toLowerCase","nodeName","is not an object","is not a function","support property or method"];this.$rootScope.$on("UNHANDLED_EXCEPTION_EVENT",function(c,d,e){var f=!1;if(d&&d.message&&d.message.length>0)for(var g in b)if(d.message.indexOf(b[g])!==-1){f=!0;break}f||(a.$rootScope.session&&a.$rootScope.session.isLoggedIn?a.authSvc.logout(6):a.authSvc.logout(5))})},b.prototype.registerOnStateChangeEvent=function(){var a=this;this.$rootScope.$on("$stateChangeStart",function(b,c,d,e,f){a.stateSvc.handleStateChangeStart(b,c,d,e,f)})},b.prototype.registerOnStateChangeSuccessEventHandler=function(){this.$rootScope.$on("$stateChangeSuccess",function(a,b){$("html, body").animate({scrollTop:0},200);var c=angular.element("#content-mobile");c&&c.animate({scrollTop:0},0)})},b.prototype.registerUpdatedAccountDataEventHandler=function(){var a=this;this.$rootScope.$on("UPDATED_ACCOUNT_DATA",function(b){a.$rootScope.accounts=[],a.$rootScope.accounts.push({name:a.contextSvc.getActiveAccountNumber(),portfolioRefId:a.contextSvc.getActivePortfolioId(),balance:b.balance,isActive:!0}),a.$rootScope.totalBalance=b.balance})},b.prototype.registerResumeEventHandler=function(){var a=this;this.$rootScope.$on("RESUME_APP_EVENT",function(){a.$rootScope.session&&a.$rootScope.session.isLoggedIn&&(a.contextSvc.showSpinner(),a.contextSvc.me().then(function(){}).catch(function(a){}).finally(function(){a.contextSvc.hideSpinner(!0)}))})},b.prototype.registerUserLoggedInEventHandler=function(){var a=this,b=this;this.$rootScope.$on("USER_LOGGED_IN_EVENT",function(b,c){a.contextSvc.me().then(function(){a.contextSvc.device.isNativeIOS()?(a.stateSvc.invokePostLoginStateChange(),a.hgMenuSvc.loadMenuModel()):a.contextSvc.isDesktop()?b&&!c.hardRefresh&&a.stateSvc.invokePostLoginStateChange():(a.contextSvc.hideSpinner(!0),a.stateSvc.invokePostLoginStateChange())}).catch(function(b){a.authSvc.logout(5),a.contextSvc.hideSpinner(!0)})}),this.$rootScope.$on("SESSION_TIMEOUT",function(a){b.handlingSessionTimeout||(b.handlingSessionTimeout=!0,b.hgCommonJs2nSvc.raiseSessionTimeoutEvent(),b.stateSvc.go("message",{messageId:2},{location:"replace"},"none"),b.authSvc.logout(2).then(function(){b.contextSvc.hideSpinner(!0)}).finally(function(){b.handlingSessionTimeout=!1,b.authSvc.clearSession()}))}),this.$rootScope.$on("USER_LOGGED_OUT_EVENT",function(a,c){b.contextSvc.customization.resetToDefault(),b.authSvc.clearSession(),b.contextSvc.device.isNativeIOS()||b.contextSvc.device.isNativeAndroid()?(b.hgCommonJs2nSvc.raiseLogoutEvent(),b.$state.go("launch")):c&&c.messageId?b.stateSvc.go("message",{messageId:c.messageId},{location:"replace"},"none"):b.stateSvc.go("message",{messageId:1},{location:"replace"},"none")}),this.$rootScope.$on("ACCOUNT_OPEN_COMPLETED_EVENT",function(){a.hgMenuJs2nSvc.sendMenuModel(a.hgMenuSvc.getMenu()),a.hgAuthJs2nSvc.sendAuthenticationCompletedEvent(a.hgAuthLoginFactory.createPostLoginCompleteResponse(a.contextSvc,"/charts","app"),null)}),this.$rootScope.$on("PROGRAM_SELECTOR_COMPLETED_EVENT",function(){a.hgMenuJs2nSvc.sendMenuModel(a.hgMenuSvc.getMenu()),a.stateSvc.raiseUrgentNotificationEvent()}),this.$rootScope.$on("HG_SEND_MENU_MODEL",function(){a.contextSvc.device.isNative()&&a.hgMenuSvc.loadMenuModel()})},b.prototype.registerNoMercuryAccountEventHandler=function(){var a=this;this.$rootScope.$on("LOGIN_WITH_NO_MERCURY_ACCOUNTS",function(b){a.suitabilityQuestionsSvc.getAnswers().then(function(b){b&&400!=b.ReturnCode?b.lastQuestionId>7?a.$state.go("accountopen.profile"):a.$state.go("behavioralQuestions"):a.authSvc.logout(3)})})},b.prototype.initializeTheme=function(){var a=this.contextSvc.getSessionData();if(a.firmInfo)this.contextSvc.customization.setFirmInfo(a.firmInfo);else{var b=JSON.parse(this.$window.sessionStorage.getItem("advisorProgram"));b&&this.contextSvc.customization.setAdvisorProgram(b)}},b.prototype.main=function(){var a=this,b=this.contextSvc.getSessionData();b||(b={},b.identity={},b.isLoggedIn=!1,this.contextSvc.setSessionData(b)),this.$rootScope.session=b,this.$rootScope.session.logout=function(){a.authSvc.logout()},this.$rootScope.session.login=function(b){a.authSvc.login(1,b)},this.$rootScope.session.clientSignup=function(){a.authSvc.login(2)},window.location.search.indexOf("loginState=complete")<0&&!this.contextSvc.device.isNative()&&this.contextSvc.me().then(function(){a.$rootScope.$broadcast("USER_LOGGED_IN_EVENT",{hardRefresh:!0})}).catch(function(c){b&&b.isLoggedIn&&(a.$rootScope.session.isLoggedIn=!1,b=null,a.$rootScope.$broadcast("SESSION_TIMEOUT",null))})},b}();a.run=b;var c=function(){function a(a,b,c,d,e,f){d.defaults.withCredentials=!0,c.resourceUrlWhitelist(e.resourceUrlWhitelist),b.otherwise(function(a,b){var c=a.get("hgStateSvc");c.processInvalidState()}),f.decorator("$uiViewScroll",["$delegate",function(a){return function(a){try{var b=a.getBoundingClientRect().top;window.scrollTo(0,b-150)}catch(a){}}}]),a.state("root",{url:"",templateUrl:"templates/launch/carousel.html",publicAccess:!0,nativeAndroid:!0,nativeIos:!0}).state("blank",{url:"/blank",templateUrl:"templates/app/blank.html",publicAccess:!0}).state("account",{url:"/account/{accountId}",publicAccess:!0,resolve:{accountId:["$stateParams",function(a){return a.accountId}]}}).state("waitList",{url:"/waitList",templateUrl:"templates/app/helloWorld.html",publicAccess:!0}).state("learnMore",{url:"/learnMore",templateUrl:"templates/app/helloWorld.html",publicAccess:!0}).state("remoteAssetTest",{url:"/test/public/{assetId}",templateUrl:"templates/app/test-asset-remote.html",controller:function(a,b){a.assetId=b.assetId}}).state("launch",{url:"/launch",templateUrl:"templates/launch/carousel.html",controller:"hgLaunchCtrl",publicAccess:!0,pageTitle:"Launch Page",nativeIos:!0,nativeAndroid:!0}).state("menu",{url:"/menu",templateUrl:"templates/app/menu.html",controller:"hgMenuCtrl",nativeIos:!0,nativeAndroid:!0}).state("styleguide",{url:"/styleguide",templateUrl:"templates/app/theme.html",controller:"hgStyleGuideCtrl"}).state("prospectLogin",{url:"/prospectLogin",controller:"hgProspectLoginCtrl",templateUrl:"templates/auth/prospect.html",publicAccess:!0,pageTitle:"Prospect Login"}).state("prospectCreate",{url:"/prospectCreate",controller:"hgProspectLoginCtrl",templateUrl:"templates/auth/prospectCreate.html",publicAccess:!0,pageTitle:"Create Credentials"}).state("userProfile",{url:"/userProfile",templateUrl:"templates/user/userProfile.html",pageTitle:"User profile"}).state("fundDetails",{url:"/fundDetails",templateUrl:"templates/assets/fundDetails.html"}).state("statements",{url:"/statements/:documentType",templateUrl:"templates/account/statements.html",controller:"hgStatementsCtrl",resolve:{documentType:["$stateParams",function(a){return a.documentType}]}}).state("notificationsCenter",{url:"/notificationsCenter",templateUrl:"templates/notificationsCenter/notifications-center.html",pageTitle:"Funding Trial Deposit Initiation"}).state("balances",{url:"/balances",templateUrl:"templates/account/balances.html",controller:"hgBalancesCtrl",pageTitle:"Funding Trial Deposit Initiation"}).state("positions",{url:"/positions",templateUrl:"templates/account/positions.html",controller:"hgPositionsCtrl",pageTitle:"Funding Trial Deposit Initiation"}).state("transactions",{url:"/transactions",templateUrl:"templates/account/transactions.html",controller:"hgTransactionsCtrl"}).state("camera",{url:""}).state("rdc",{url:"/rdc",templateUrl:"templates/rdc/rdc.html",controller:"hgCheckDepositCtrl"}).state("rdc.launchCheckDeposit",{url:"/launchCheckDeposit",templateUrl:"templates/rdc/launchCheckDeposit.html"}).state("rdc.reviewDepositCheck",{url:"/reviewDepositCheck",templateUrl:"templates/rdc/reviewDepositCheck.html"}).state("rdc.depositCheckConfirmation",{url:"/depositCheckConfirmation",templateUrl:"templates/rdc/depositCheckConfirmation.html"}).state("accountDocuments",{url:"/accountDocuments",templateUrl:"templates/account/accountdocuments.html",controller:"hgAccountDocumentsCtrl"}).state("personalProfile",{abstract:!0,url:"/personalProfile",templateUrl:"templates/user/userProfile.html",controller:"hgUserProfileCtrl"}).state("personalProfile.manageprofile",{url:"/manageprofile",templateUrl:"templates/user/manageprofile.html"}).state("personalProfile.managecontactinfo",{url:"/managecontactinfo",templateUrl:"templates/user/managecontactinfo.html"}).state("personalProfile.managesecurityinfo",{url:"/managesecurityinfo",templateUrl:"templates/user/managesecurityinfo.html"}).state("personalProfile.managehouseholdinfo",{url:"/managehouseholdinfo",templateUrl:"templates/user/managehouseholdinfo.html"}).state("personalProfile.editphone",{url:"/editphone",templateUrl:"templates/user/editphone.html"}).state("personalProfile.editemail",{url:"/editemail",templateUrl:"templates/user/editemail.html"}).state("personalProfile.editspouse",{url:"/editspouse",templateUrl:"templates/user/editspouse.html"}).state("agreements",{abstract:!0,url:"/agreements",templateUrl:"templates/cms/agreements.html"}).state("agreements.home",{url:"",templateUrl:"templates/cms/agreementsHome.html"}).state("agreements.home2",{url:"/",templateUrl:"templates/cms/agreementsHome.html"}).state("agreements.detail",{url:"/{assetId}",templateUrl:"templates/cms/agreementsDetail.html",controller:"hgCmsAssetCtrl",resolve:{assetId:["$stateParams",function(a){
return a.assetId}]}}).state("insights",{abstract:!0,url:"/insights",templateUrl:"templates/cms/insights.html"}).state("insights.home",{url:"",templateUrl:"templates/cms/insightsHome.html"}).state("insights.home2",{url:"/",templateUrl:"templates/cms/insightsHome.html"}).state("insights.detail",{url:"/{assetId}",templateUrl:"templates/cms/insightsDetail.html",controller:"hgCmsAssetCtrl",resolve:{assetId:["$stateParams",function(a){return a.assetId}]}}).state("journal",{abstract:!0,url:"/journal",templateUrl:"templates/cms/journal.html"}).state("journal.home",{url:"",templateUrl:"templates/cms/journalHome.html"}).state("journal.home2",{url:"/",templateUrl:"templates/cms/journalHome.html"}).state("journal.detail",{url:"/{assetId}",templateUrl:"templates/cms/journalDetail.html",controller:"hgCmsAssetCtrl",resolve:{assetId:["$stateParams",function(a){return a.assetId}]}}).state("intelligentPortfolios",{abstract:!0,url:"/intelligentPortfolios",templateUrl:"templates/cms/intelligentPortfolios.html"}).state("intelligentPortfolios.home",{url:"",templateUrl:"templates/cms/intelligentPortfoliosHome.html"}).state("intelligentPortfolios.home2",{url:"/",templateUrl:"templates/cms/intelligentPortfoliosHome.html"}).state("intelligentPortfolios.detail",{url:"/{assetId}",templateUrl:"templates/cms/intelligentPortfoliosDetail.html",controller:"hgCmsAssetCtrl",resolve:{assetId:["$stateParams",function(a){return a.assetId}]}}).state("personalProfile.editaddress",{url:"/editaddress",templateUrl:"templates/user/editaddress.html"}).state("changePassword",{url:"/changePassword",templateUrl:"templates/user/changePassword.html",controller:"hgSecurityCtrl"}).state("changeSecurityQA",{url:"/changeSecurityQA",templateUrl:"templates/user/changeSecurityQA.html",controller:"hgSecurityCtrl"}).state("reset",{url:"/reset",template:"resetting...",controller:"hgResetCtrl",publicAccess:!0}).state("message",{url:"/message/:messageId",templateUrl:"templates/app/message.html",controller:"hgMessageCtrl",publicAccess:!0}).state("messageSecure",{url:"/messageSecure/:messageId",templateUrl:"templates/app/message.html",controller:"hgMessageCtrl",publicAccess:!0}).state("modalBackdrop",{url:"/modalBackdrop",templateUrl:"templates/app/modalBackdrop.html",publicAccess:!0}).state("comingSoon",{url:"/coming-soon",templateUrl:"templates/app/comingSoon.html",publicAccess:!0})}return a}();a.config=c}(b=a.app||(a.app={}))}(hg||(hg={}));var hg;!function(a){var b;!function(a){var b=function(){function a(){}return a.stringToUrl=function(a){if(null===a||"undefined"==typeof a)return null;var b=document.createElement("a");return b.href=a,b},a.parseQueryParams=function(a){var b=null,c=null;if(a&&(b=this.stringToUrl(a)),b){var d=null;if(b.hash&&b.hash.length>0){var e=b.hash.indexOf("?");e>=0&&(d=b.hash.substring(e,b.hash.length))}null===d&&(d=b.search),c=this.parseSearchFragment(d)}return c},a.parseName=function(a){if(null===a)return null;var b=/^([A-z]\.?\w*\-?[A-z]?\w*)(?:\s?)+([A-z]\w+|[A-z]?\.?)\s+?([A-z]?\w{0,3}[A-z]\w+\-?[A-z]?\w*)(?:,\s+|)(\w*\.?)/i;return a.match(b)},a.parseSearchFragment=function(a){var b={};if(!a)return b;"?"===a.charAt(0)&&(a=a.substring(1,a.length));for(var c,d=/([^&=]+)=([^&]*)/g;c=d.exec(a);){var e=decodeURIComponent(c[1]),f=decodeURIComponent(c[2]);b[e]=f}return b},a.stringify=function(a,b){void 0===b&&(b=null);var c=null,d=typeof a;if("object"===d){var e=[];c=JSON.stringify(a,function(a,c){if(b&&0==a.indexOf(b))return null;if("object"==typeof c&&null!==c){if(e.indexOf(c)!==-1)return null;e.push(c)}return c})}else c=a;return c},a}();a.utils=b}(b=a.app||(a.app={}))}(hg||(hg={})),angular.module("hg.templates",[]).run(["$templateCache",function(a){"use strict";a.put("templates/account/accountdocuments.html",'<hg-page bannertext=blank iippagedisclosureasset=VIEW-ACCT-DOCUMENTS-AS><hg-page-title>{{title}}</hg-page-title><form name=acctDocumentsForm class=form novalidate><div class=form-group ng-class="{ \'has-error\' : acctDocumentsForm.hgAccount.$invalid && acctDocumentsForm.hgAccount.$dirty}"><div hg-selector items-list=documentAccountSelector.itemsList selected-item=documentAccountSelector.selectedItem title="Select Mercury Account" header-title=Account comp-id=1 style-id=1 hide-balance=true ng-required=true></div></div><div role=child class=docCategoryList><ul class=list-group><li class="list-group-item list-style" data-ng-click=navigateToDocuments(0);>Statements <span class="icon-arrow-right pull-right"></span></li><li class="list-group-item list-style" data-ng-click=navigateToDocuments(2);>Trade Confirmations <span class="icon-arrow-right pull-right"></span></li><li class="list-group-item list-style" data-ng-click=navigateToDocuments(3);>Letters <span class="icon-arrow-right pull-right"></span></li><li class="list-group-item list-style" data-ng-click=navigateToDocuments(1);>Tax Documents <span class="icon-arrow-right pull-right"></span></li></ul></div></form></hg-page>'),a.put("templates/account/balances.html","<hg-page></hg-page>"),a.put("templates/account/beneficiary.html","<div ui-view></div>"),a.put("templates/account/beneficiaryConsent.html",'<hg-page full=true><div id=progressWrapper class=thin><div class="progress four complete" title="Step 1 of 4"><span class=sr-only></span></div><div class="progress four complete" title="Step 2 of 4"><span class=sr-only></span></div><div class="progress four current" title="Step 3 of 4"><span class=sr-only></span></div><div class="progress four" title="Step 4 of 4"><span class=sr-only></span></div></div><div class=benes-container ng-init=vm.beneficiaryViewModel.verifyBeneficiaryFlow(vm.beneficiaryViewModel)><div class=row><div class="col-xs-12 col-md-8 col-md-offset-2"><div class=title>Consent</div><div class=bene-data>We encourage you to print the document below and retain it for your records. You may call us to request a copy and we will mail it to you at no charge.<br><br><hg-local-asset hg-asset-id=Service-BeneficiaryWebPart-checkingIConsentMsg></hg-local-asset></div><hg-button-group fixed=$root.deviceInfo.isSmallScreen() class="button-action-bar padding-top-20"><button ng-click=vm.beneficiaryViewModel.backToSharePercentages() class="btn btn-default">Back</button><hg-button-primary data-ng-click=vm.beneficiaryViewModel.goToSubmit()>I Consent</hg-button-primary></hg-button-group></div></div></div></hg-page>'),a.put("templates/account/beneficiaryInfo.html",'<hg-page full=true><div id=progressWrapper class=thin><div class="progress four current" title="Step 1 of 4"><span class=sr-only></span></div><div class="progress four" title="Step 2 of 4"><span class=sr-only></span></div><div class="progress four" title="Step 3 of 4"><span class=sr-only></span></div><div class="progress four" title="Step 4 of 4"><span class=sr-only></span></div></div><div class=benes-container ng-init=vm.beneficiaryViewModel.verifyBeneficiaryFlow(vm.beneficiaryViewModel)><div class=row><div class="col-xs-12 bene-error" data-ng-if=vm.beneficiaryViewModel.modifyBeneficiaryError()><div class=message-error><div class=row><div class="col-xs-2 text-center"><i class="icon-warning status-icon statusIconWarningDark"></i></div><div class=col-xs-8>{{vm.beneficiaryViewModel.modifyBeneficiaryErrorMessage}}</div></div></div></div></div><div class=row><div class="col-xs-12 col-md-8 col-md-offset-2"><div class=title ng-if=vm.beneficiaryViewModel.isAdded(vm.beneficiaryViewModel.currentBeneficiary)>Add Beneficiary</div><div class=title ng-if="vm.beneficiaryViewModel.isEdited(vm.beneficiaryViewModel.currentBeneficiary) || vm.beneficiaryViewModel.isAddedAndEdited(vm.beneficiaryViewModel.currentBeneficiary) || vm.beneficiaryViewModel.isDeleted(vm.beneficiaryViewModel.currentBeneficiary)">Edit Beneficiary</div><div class=bene-data><form name=beneForm class=form novalidate><div class="form-group row" ng-class="{ \'has-error\' : beneForm.beneType.$invalid && !beneForm.beneType.$pristine}"><div class=col-xs-12><label for=beneType>Select Beneficiary Type</label><select name=beneType class=form-control id=beneType ng-options="beneType.id as beneType.name for beneType in vm.beneficiaryViewModel.beneficiaryTypes" data-ng-model=vm.beneficiaryViewModel.currentBeneficiary.beneficiaryTypeId data-ng-change=vm.beneficiaryViewModel.canChangePrimaryToContingent(vm.beneficiaryViewModel.currentBeneficiary) data-ng-required=true><option style=display:none value=""></option></select></div></div><div class="form-group row"><div class=col-xs-12><label for=relationType>Relationship/Entity Type</label><select name=relationType class=form-control id=relationType ng-options="relationType.id as relationType.name for relationType in vm.beneficiaryViewModel.relationTypes" data-ng-model=vm.beneficiaryViewModel.currentBeneficiary.relationTypeId data-ng-required=true><option style=display:none value=""></option></select></div></div><div class="form-group row" ng-class="{ \'has-error\' : beneForm.firstName.$invalid && !beneForm.firstName.$pristine }"><div class=col-xs-12><label for=firstName ng-if=!vm.beneficiaryViewModel.isEntityType(vm.beneficiaryViewModel.currentBeneficiary)>First Name</label><label for=firstName ng-if=vm.beneficiaryViewModel.isEntityType(vm.beneficiaryViewModel.currentBeneficiary)>Entity Name</label><input name=firstName class=form-control id=firstName data-ng-model=vm.beneficiaryViewModel.currentBeneficiary.firstName data-ng-required=true validate-name ng-maxlength="30"><div role=alert class=help-block ng-show="!beneForm.firstName.$pristine && beneForm.firstName.$invalid"><span ng-if=!vm.beneficiaryViewModel.isEntityType(vm.beneficiaryViewModel.currentBeneficiary) ng-show="beneForm.firstName.$error.required || beneForm.firstName.$error.maxlength|| beneForm.firstName.$error.validateName">Please enter a valid First Name.</span> <span ng-if=vm.beneficiaryViewModel.isEntityType(vm.beneficiaryViewModel.currentBeneficiary) ng-show="beneForm.firstName.$error.required || beneForm.firstName.$error.maxlength|| beneForm.firstName.$error.validateName">Please enter valid Entity Name.</span></div></div></div><div class="form-group row" ng-if=!vm.beneficiaryViewModel.isEntityType(vm.beneficiaryViewModel.currentBeneficiary) ng-class="{ \'has-error\' : beneForm.middleName.$invalid && !beneForm.middleName.$pristine }"><div class=col-xs-12><label for=middleName>Middle Name <span class="optional pull-right">(Optional)</span></label><input name=middleName class=form-control id=middleName data-ng-model=vm.beneficiaryViewModel.currentBeneficiary.middleName data-ng-required=false validate-name ng-maxlength="30"><div role=alert class=help-block ng-show="!beneForm.middleName.$pristine && beneForm.middleName.$invalid"><span ng-show="beneForm.middleName.$error.required || beneForm.middleName.$error.maxlength|| beneForm.middleName.$error.validateName">Please enter a valid middle name.</span></div></div></div><div class="form-group row" ng-if=!vm.beneficiaryViewModel.isEntityType(vm.beneficiaryViewModel.currentBeneficiary) ng-class="{ \'has-error\' : beneForm.lastName.$invalid && !beneForm.lastName.$pristine }"><div class=col-xs-12><label for=lastName>Last Name</label><input name=lastName class=form-control id=lastName data-ng-model=vm.beneficiaryViewModel.currentBeneficiary.lastName data-ng-required=true validate-name ng-maxlength="30"><div role=alert class=help-block ng-show="!beneForm.lastName.$pristine && beneForm.lastName.$invalid"><span ng-show="beneForm.lastName.$error.required || beneForm.lastName.$error.maxlength|| beneForm.lastName.$error.validateName">Please enter a valid last name.</span></div></div></div><div class="form-group row" ng-if=!vm.beneficiaryViewModel.isEntityType(vm.beneficiaryViewModel.currentBeneficiary) ng-class="{ \'has-error\' : beneForm.dob.$invalid && !beneForm.dob.$pristine }"><div class="col-xs-12 date-picker"><label for=dob>Date of Birth</label><input name=dob class="form-control datepicker" id=dob date-disabled="disabled(date, mode)" ng-required=true show-button-bar=false showweeks=false close-text=Close placeholder=MM/DD/YYYY validate-any-age-date-of-birth data-ng-model=vm.beneficiaryViewModel.currentBeneficiary.dateOfBirth data-ng-required=true ng-maxlength="10"><div role=alert class="help-block col-xs-12" ng-show="!beneForm.dob.$pristine && beneForm.dob.$invalid"><span ng-show="beneForm.dob.$invalid && beneForm.dob.$dirty">Please enter a valid date of birth.</span></div></div></div><div class="form-group row" ng-class="{ \'has-error\' : beneForm.address1.$invalid && !beneForm.address1.$pristine }"><div class=col-xs-12><label for=address1>Street Address 1 <span class="optional pull-right">(Optional)</span></label><input name=address1 class=form-control id=address1 data-ng-model=vm.beneficiaryViewModel.currentBeneficiary.streetAddress1 data-ng-required=false hg-validate-printable-ascii hg-validate-address ng-maxlength="45"></div><div class="col-xs-12 help-block" ng-show="!beneForm.address1.$pristine && beneForm.address1.$invalid"><span ng-show="beneForm.address1.$error.required || beneForm.address1.$error.pattern ||\r\n                                 beneForm.address1.$error.hgValidateAddress || beneForm.address1.$error.maxlength">Please enter a valid address.</span> <span ng-show=beneForm.address1.$error.pobox>We cannot accept P.O. Boxes as a valid legal address.</span></div></div><div class="form-group row" ng-class="{ \'has-error\' : beneForm.address2.$invalid && !beneForm.address2.$pristine }"><div class=col-xs-12><label for=address2>Street Address 2 <span class="optional pull-right">(Optional)</span></label><input name=address2 class=form-control id=address2 data-ng-model=vm.beneficiaryViewModel.currentBeneficiary.streetAddress2 data-ng-required=false hg-validate-printable-ascii hg-validate-address ng-maxlength="45"></div><div class="col-xs-12 help-block" ng-show="!beneForm.address2.$pristine && beneForm.address2.$invalid"><spanp ng-show="beneForm.address2.$error.required || beneForm.address2.$error.pattern ||\r\n                                 beneForm.address2.$error.hgValidateAddress || beneForm.address2.$error.maxlength">Please enter a valid address.</spanp><span ng-show=beneForm.address2.$error.pobox>We cannot accept P.O. Boxes as a valid legal address.</span></div></div><div class="form-group row" ng-class="{ \'has-error\' : beneForm.address3.$invalid && !beneForm.address3.$pristine }"><div class=col-xs-12><label for=address3>Street Address 3 <span class="optional pull-right">(Optional)</span></label><input name=address3 class=form-control id=address3 data-ng-model=vm.beneficiaryViewModel.currentBeneficiary.streetAddress3 data-ng-required=false hg-validate-printable-ascii hg-validate-address ng-maxlength="45"></div><div class="col-xs-12 help-block" ng-show="!beneForm.address3.$pristine && beneForm.address3.$invalid"><span ng-show="beneForm.address3.$error.required || beneForm.address3.$error.pattern ||\r\n                                 beneForm.address3.$error.hgValidateAddress || beneForm.address3.$error.maxlength">Please enter a valid address.</span> <span ng-show=beneForm.address3.$error.pobox>We cannot accept P.O. Boxes as a valid legal address.</span></div></div><div class=row><div class=col-md-6><div class=form-group ng-class="{ \'has-error\' : beneForm.city.$invalid && !beneForm.city.$pristine }"><label for=city>City <span class="optional pull-right">(Optional)</span></label><input name=city class=form-control id=city data-ng-model=vm.beneficiaryViewModel.currentBeneficiary.city data-ng-required=false validate-name ng-maxlength="60"><div role=alert class=help-block ng-show="!beneForm.city.$pristine && beneForm.city.$invalid"><span ng-show="beneForm.city.$error.required || beneForm.city.$error.maxlength|| beneForm.city.$error.validateName">Please enter a valid city.</span></div></div></div><div class=col-md-6><div class=form-group><label for=state>State <span class="optional pull-right">(Optional)</span></label><select name=state class=form-control id=state ng-options="state.id as state.name for state in vm.beneficiaryViewModel.states" data-ng-model=vm.beneficiaryViewModel.currentBeneficiary.stateId data-ng-required=false><option value="">Select State</option></select></div></div></div><div class=row><div class=col-md-6><div class=form-group ng-class="{ \'has-error\' : beneForm.zip.$invalid && !beneForm.zip.$pristine }"><label for=zip>ZIP Code <span class="optional pull-right">(Optional)</span></label><input name=zip class=form-control id=zip data-ng-model=vm.beneficiaryViewModel.currentBeneficiary.zip data-ng-required=false validate-zip-code ng-maxlength="30"><p ng-show="beneForm.zip.$invalid && !beneForm.zip.$pristine" class=help-block>Please Enter Valid Zip code</p></div></div><div class=col-md-6><div class=form-group ng-class="{ \'has-error\' : beneForm.country.$invalid && !beneForm.country.$pristine }"><label for=country>Country <span class="optional pull-right">(Optional)</span></label><select name=country class=form-control id=country ng-options="country.id as country.name for country in vm.beneficiaryViewModel.countries | filter: {id: \'US\'}" data-ng-init="vm.beneficiaryViewModel.currentBeneficiary.countryId = vm.beneficiaryViewModel.currentBeneficiary.countryId || vm.beneficiaryViewModel.countries[0].id" data-ng-model=vm.beneficiaryViewModel.currentBeneficiary.countryId data-ng-required=true></select></div></div></div><div class="form-group row" ng-class="{ \'has-error\' : beneForm.ssn.$invalid && !beneForm.ssn.$pristine }"><div class=col-xs-12><label for=ssn>Social Security Number/Tax ID <span class="optional pull-right">(Optional)</span></label><input name=ssn class=form-control id=ssn data-ng-model=vm.beneficiaryViewModel.currentBeneficiary.rawSsnTaxId placeholder={{vm.beneficiaryViewModel.currentBeneficiary.redactedSsnTaxId}} data-ng-required=false validate-ssn><p ng-show="beneForm.ssn.$invalid && !beneForm.ssn.$pristine" class=help-block>Please enter a valid social security number.</p></div></div></form></div><hg-button-group fixed=$root.deviceInfo.isSmallScreen() class=button-action-bar><div ng-if=vm.beneficiaryViewModel.isAdded(vm.beneficiaryViewModel.currentBeneficiary)><button ng-click=vm.beneficiaryViewModel.backToOverview() class="btn btn-default">Back</button><hg-button-primary data-ng-click=vm.beneficiaryViewModel.goToInterstitial() data-ng-disabled="vm.beneficiaryViewModel.disableSave() || beneForm.$invalid">Next</hg-button-primary></div><div ng-if="vm.beneficiaryViewModel.isEdited(vm.beneficiaryViewModel.currentBeneficiary) || vm.beneficiaryViewModel.isAddedAndEdited(vm.beneficiaryViewModel.currentBeneficiary)|| vm.beneficiaryViewModel.isDeleted(vm.beneficiaryViewModel.currentBeneficiary)"><button ng-if=$root.deviceInfo.isLargeScreen() ng-click=vm.beneficiaryViewModel.backToOverview() class="btn btn-default margin-0">Back</button> <button ng-if=$root.deviceInfo.isLargeScreen() ng-click="vm.beneficiaryViewModel.removeBeneficiary(vm.beneficiaryViewModel.currentBeneficiary, true)" class="btn btn-default">Remove Beneficiary</button> <button ng-if=$root.deviceInfo.isSmallScreen() ng-click="vm.beneficiaryViewModel.removeBeneficiary(vm.beneficiaryViewModel.currentBeneficiary, true)" class="btn btn-default">Remove</button><hg-button-primary data-ng-click=vm.beneficiaryViewModel.goToInterstitial() data-ng-disabled="vm.beneficiaryViewModel.disableSave() || beneForm.$invalid">Save</hg-button-primary></div></hg-button-group><div class=bene-info-footer><div class=bene-info-link ng-if=$root.isSIP><hg-local-asset hg-asset-id=SIP-RULES-OF-SUCCESSION-CONTAINER></hg-local-asset></div><div class=bene-info-link ng-if=$root.isIIP><hg-local-asset hg-asset-id=IIP-RULES-OF-SUCCESSION-CONTAINER></hg-local-asset></div><div class=bene-info-disclosure><hg-local-asset hg-asset-id=Service-BeneficiaryWebPart-MessageToContinue></hg-local-asset></div></div></div></div></div></hg-page>'),a.put("templates/account/beneficiaryInterstitial.html",'<hg-page full=true><div id=progressWrapper class=thin><div class="progress four current" title="Step 1 of 4"><span class=sr-only></span></div><div class="progress four" title="Step 2 of 4"><span class=sr-only></span></div><div class="progress four" title="Step 3 of 4"><span class=sr-only></span></div><div class="progress four" title="Step 4 of 4"><span class=sr-only></span></div></div><div class=benes-container ng-init=vm.beneficiaryViewModel.verifyBeneficiaryFlow(vm.beneficiaryViewModel)><div class=row><div class="col-xs-12 bene-error" data-ng-if=vm.beneficiaryViewModel.beneficiaryLimitReached><div class=message-error><div class=row><div class="col-xs-2 text-center"><i class="icon-error status-icon statusIconInfo"></i></div><div class=col-xs-8><hg-local-asset hg-asset-id=Service-BeneficiaryWebPart-lblErrExceedMaxBeneficianry></hg-local-asset></div></div></div></div></div><div class=row><div class="col-xs-12 col-md-8 col-md-offset-2"><div class=title>What would you like to do next?</div><form name=selectionForm class=form novalidate><div class="row form-group radio-group"><div class="col-md-offset-2 radio-item"><input type=radio value=0 name=radio id=radio1 checked=checked ng-model=vm.beneficiaryViewModel.interstitialSelection ng-required=!vm.beneficiaryViewModel.interstitialSelection><label for=radio1>Create new beneficiary</label></div><div class="col-md-offset-2 radio-item"><input type=radio value=1 name=radio id=radio2 ng-model=vm.beneficiaryViewModel.interstitialSelection ng-required=!vm.beneficiaryViewModel.interstitialSelection><label for=radio2>Proceed to distribution selections</label></div><div ng-if=vm.beneficiaryViewModel.containsBeneficiary()><div class="col-md-offset-2 radio-item"><input type=radio value=2 name=radio id=radio3 ng-model=vm.beneficiaryViewModel.interstitialSelection ng-required=!vm.beneficiaryViewModel.interstitialSelection><label for=radio3>Edit existing beneficiary</label></div><div class="col-md-8 col-md-offset-2 bene-selector"><select name=edit class=selector id=edit data-ng-disabled="vm.beneficiaryViewModel.interstitialSelection != 2" data-ng-required="vm.beneficiaryViewModel.interstitialSelection == 2" data-ng-model=vm.beneficiaryViewModel.selectedBeneficiary ng-options="bene.firstName + \' \' + (bene.lastName?bene.lastName:\'\') for bene in\r\n                                            (vm.beneficiaryViewModel.primaryBeneficiaries.concat(vm.beneficiaryViewModel.contingentBeneficiaries))\r\n                                            | filter: {changeStatusId: \'!D\'}"></select></div></div></div></form><hg-button-group fixed=$root.deviceInfo.isSmallScreen() class=button-action-bar><button ng-click=vm.beneficiaryViewModel.backToInformation() class="btn btn-default">Back</button><hg-button-primary data-ng-click=vm.beneficiaryViewModel.determineNext() data-ng-disabled=selectionForm.$invalid>Next</hg-button-primary></hg-button-group></div></div></div></hg-page>'),a.put("templates/account/beneficiaryOverview.html",'<hg-page full=true><div class=benes-container ng-init=vm.beneficiaryViewModel.verifyBeneficiaryFlow(vm.beneficiaryViewModel)><div class=row><div class="col-xs-12 bene-error" data-ng-if=vm.beneficiaryViewModel.serverErrorMessage><div class=message-error><div class=row><div class="col-xs-2 text-center"><i class="icon-warning status-icon statusIconWarningDark"></i></div><div class=col-xs-8 ng-bind-html=vm.beneficiaryViewModel.serverErrorMessage></div></div></div></div><div class="col-xs-12 bene-error" data-ng-if=vm.beneficiaryViewModel.hasBeenSubmitted()><div class=message-error><div class=row><div class="col-xs-2 text-center"><i class="icon-error status-icon statusIconInfo"></i></div><div class=col-xs-8>{{vm.beneficiaryViewModel.submitSuccessMessage}}</div></div></div></div><div class="col-xs-12 bene-error" data-ng-if=vm.beneficiaryViewModel.beneficiaryLimitReached><div class=message-error><div class=row><div class="col-xs-2 text-center"><i class="icon-error status-icon statusIconInfo"></i></div><div class=col-xs-8><hg-local-asset hg-asset-id=Service-BeneficiaryWebPart-lblErrExceedMaxBeneficianry></hg-local-asset></div></div></div></div></div><div class=row><div class="col-xs-12 col-md-8 col-md-offset-2"><div class=title>Add & Modify Beneficiaries</div><div class=bene-data ng-if=vm.beneficiaryViewModel.containsBeneficiary()><div class="row bene-group" ng-if=vm.beneficiaryViewModel.containsPrimary(vm.beneficiaryViewModel.primaryBeneficiaries)><div class=col-xs-12><div class="row header border-bottom-light bene"><div class="col-xs-12 col-md-8">PRIMARY BENEFICIARIES</div><div class="col-md-4 text-right hidden-xs hidden-sm">SHARE</div></div><div ng-repeat="bene in vm.beneficiaryViewModel.primaryBeneficiaries"><div class="row border-bottom-light bene" ng-if=!vm.beneficiaryViewModel.isDeleted(bene) data-ng-click="vm.beneficiaryViewModel.addOrUpdateBeneficiary(true, bene)"><div class=col-xs-8>{{bene.firstName}} {{bene.lastName}}</div><div class="col-xs-4 text-right">{{bene.shareText}} <i class=icon-arrow-right></i></div></div></div><div class="row header bene"><div class=col-xs-8>PRIMARY TOTAL</div><div class="col-xs-4 text-right">{{vm.beneficiaryViewModel.currentPrimaryTotal}}</div></div></div></div><div class="row bene-group" ng-if=vm.beneficiaryViewModel.containsContingent(vm.beneficiaryViewModel.contingentBeneficiaries)><div class=col-xs-12><div class="row header border-bottom-light bene"><div class="col-xs-12 col-md-8">CONTINGENT BENEFICIARIES</div><div class="col-md-4 text-right hidden-xs hidden-sm">SHARE</div></div><div ng-repeat="bene in vm.beneficiaryViewModel.contingentBeneficiaries"><div class="row border-bottom-light bene" ng-if=!vm.beneficiaryViewModel.isDeleted(bene) data-ng-click="vm.beneficiaryViewModel.addOrUpdateBeneficiary(true, bene)"><div class=col-xs-8>{{bene.firstName}} {{bene.lastName}}</div><div class="col-xs-4 text-right">{{bene.shareText}} <i class=icon-arrow-right></i></div></div></div><div class="row header bene"><div class=col-xs-8>CONTINGENT TOTAL</div><div class="col-xs-4 text-right">{{vm.beneficiaryViewModel.currentContingentTotal}}</div></div></div></div><div class=no-benes-message ng-if=!vm.beneficiaryViewModel.containsContingent(vm.beneficiaryViewModel.contingentBeneficiaries)>No contingent beneficiaries have been designated for this account.</div></div><div class=no-benes-message ng-if=!vm.beneficiaryViewModel.containsBeneficiary()>No beneficiaries have been designated for this account.</div><hg-button-group fixed=$root.deviceInfo.isSmallScreen() class=button-action-bar><button ng-click=vm.beneficiaryViewModel.backToAccountSetting() class="btn btn-default" data-ng-if=$root.deviceInfo.isSmallScreen()>Back</button><hg-button-primary data-ng-disabled=vm.beneficiaryViewModel.disableAdd() data-ng-click=vm.beneficiaryViewModel.addOrUpdateBeneficiary(false)>Add</hg-button-primary></hg-button-group></div></div><div class=bene-info-footer><div class=bene-info-link><hg-local-asset hg-asset-id=Service-BeneficiaryWebPart-addOrmodifyNote></hg-local-asset></div><div class=bene-info-disclosure><hg-local-asset hg-asset-id=Service-BeneficiaryWebPart-addOrchangeNote></hg-local-asset></div></div></div></hg-page>'),a.put("templates/account/beneficiarySharePercentages.html",'<hg-page full=true><div id=progressWrapper class=thin><div class="progress four complete" title="Step 1 of 4"><span class=sr-only></span></div><div class="progress four current" title="Step 2 of 4"><span class=sr-only></span></div><div class="progress four" title="Step 3 of 4"><span class=sr-only></span></div><div class="progress four" title="Step 4 of 4"><span class=sr-only></span></div></div><div class=benes-container ng-init=vm.beneficiaryViewModel.verifyBeneficiaryFlow(vm.beneficiaryViewModel)><div class=row><div class="col-xs-12 bene-error" data-ng-if="!vm.beneficiaryViewModel.isValidPrimaryTotal() || !vm.beneficiaryViewModel.isValidContingentTotal()"><div class=message-error><div class=row><div class="col-xs-2 text-center"><i class="icon-warning status-icon statusIconWarningDark"></i></div><div class=col-xs-8>Total beneficiary percentages must total 100%.</div></div><div class=row><div class="col-xs-8 bene-error-info"><div class=row><div class="col-xs-12 col-sm-4 col-xs-offset-3 bene-warning-total">Primary Total: <span ng-class="{\'text-warning\': !vm.beneficiaryViewModel.isValidPrimaryTotal()}">{{vm.beneficiaryViewModel.newPrimaryTotal}}</span></div><div class="col-xs-12 col-sm-4 col-xs-offset-3 col-sm-offset-0 bene-warning-total">Contingent Total: <span ng-class="{\'text-warning\': !vm.beneficiaryViewModel.isValidContingentTotal()}">{{vm.beneficiaryViewModel.newContingentTotal}}</span></div></div></div></div></div></div><div class="col-xs-12 bene-error" data-ng-if=vm.beneficiaryViewModel.modifyBeneficiaryError()><div class=message-error><div class=row><div class="col-xs-2 text-center"><i class="icon-warning status-icon statusIconWarningDark"></i></div><div class=col-xs-8>{{vm.beneficiaryViewModel.modifyBeneficiaryErrorMessage}}</div></div></div></div><div class="col-xs-12 bene-error" data-ng-if=vm.beneficiaryViewModel.containsZeroPercent()><div class=row><div class="col-xs-8 col-xs-offset-2 bene-error-info"><hg-local-asset hg-asset-id=Service-BeneficiaryWebPart-BeneficiariesSharePercentage></hg-local-asset></div></div></div></div><div class=row><div class="col-xs-12 col-md-8 col-md-offset-2"><div class=title>Set Share Percentages</div><div class="bene-data bene-share-percentages"><form name=shareForm class=form novalidate><div ng-if="vm.beneficiaryViewModel.containsBeneficiary() || vm.beneficiaryViewModel.containsNew()"><div class="row bene-group margin-bottom-0" ng-if=vm.beneficiaryViewModel.containsPrimary(vm.beneficiaryViewModel.newBeneficiaries)><div class=col-xs-12><div class="row update-header border-bottom-light bene"><div class="col-xs-6 col-md-8">NEW PRIMARY</div><div class="col-xs-3 col-md-2 text-right">CURRENT</div><div class="col-xs-3 col-md-2 text-center">NEW</div></div><div ng-repeat="bene in vm.beneficiaryViewModel.newBeneficiaries"><div class="row form-group border-bottom-light bene" ng-class="{ \'has-error\' : shareForm[\'newPrimary_\' + $index].$invalid && !shareForm[\'newPrimary_\' + $index].$pristine }" ng-if=vm.beneficiaryViewModel.isPrimary(bene)><div class="col-xs-6 col-md-8 margin-top-5">{{bene.firstName}} {{bene.lastName}}</div><div class="col-xs-3 col-md-2 text-right margin-top-5">--%</div><div class="input-group col-xs-3 col-md-2"><input class="col-xs-12 text-center padding-0 form-control" type=number name=newPrimary_{{$index}} data-ng-model=bene.newShare ng-pattern="/^[0-9]{1,3}$/" data-ng-required=true ng-change="vm.beneficiaryViewModel.calculateBeneTotals()"> <span class=input-group-addon>%</span></div><div role=alert class="help-block text-right" ng-show="!shareForm[\'newPrimary_\' + $index].$pristine && shareForm[\'newPrimary_\' + $index].$invalid"><span ng-show="shareForm[\'newPrimary_\' + $index].$error.required || shareForm[\'newPrimary_\' + $index].$error.pattern || shareForm[\'newPrimary_\' + $index].$error.maxlength">Please enter a valid whole number.</span></div></div></div></div></div><div class="row bene-group margin-bottom-0" ng-if=vm.beneficiaryViewModel.containsContingent(vm.beneficiaryViewModel.newBeneficiaries)><div class=col-xs-12><div class="row update-header border-bottom-light bene"><div class="col-xs-6 col-md-8">NEW CONTINGENT</div><div class="col-xs-3 col-md-2 text-right">CURRENT</div><div class="col-xs-3 col-md-2 text-center">NEW</div></div><div ng-repeat="bene in vm.beneficiaryViewModel.newBeneficiaries"><div class="row form-group border-bottom-light bene" ng-class="{ \'has-error\' : shareForm[\'newContingent_\' + $index].$invalid && !shareForm[\'newContingent_\' + $index].$pristine }" ng-if=vm.beneficiaryViewModel.isContingent(bene)><div class="col-xs-6 col-md-8 margin-top-5">{{bene.firstName}} {{bene.lastName}}</div><div class="col-xs-3 col-md-2 text-right margin-top-5">--%</div><div class="input-group col-xs-3 col-md-2"><input class="col-xs-12 text-center padding-0 form-control" type=number name=newContingent_{{$index}} data-ng-model=bene.newShare ng-pattern="/^[0-9]{1,3}$/" data-ng-required=true ng-change="vm.beneficiaryViewModel.calculateBeneTotals()"> <span class=input-group-addon>%</span></div><div role=alert class="help-block text-right" ng-show="!shareForm[\'newContingent_\' + $index].$pristine && shareForm[\'newContingent_\' + $index].$invalid"><span ng-show="shareForm[\'newContingent_\' + $index].$error.required || shareForm[\'newContingent_\' + $index].$error.pattern || shareForm[\'newContingent_\' + $index].$error.maxlength">Please enter a valid whole number.</span></div></div></div></div></div><div class="row bene-group margin-bottom-0" ng-if=vm.beneficiaryViewModel.containsPrimary(vm.beneficiaryViewModel.primaryBeneficiaries)><div class=col-xs-12><div class="row update-header border-bottom-light bene"><div class="col-xs-6 col-md-8">PRIMARY BENEFICIARIES</div><div class="col-xs-3 col-md-2 text-right">CURRENT</div><div class="col-xs-3 col-md-2 text-center">NEW</div></div><div ng-repeat="bene in vm.beneficiaryViewModel.primaryBeneficiaries"><div class="row form-group border-bottom-light bene" ng-class="{ \'has-error\' : shareForm[\'primary_\' + $index].$invalid && !shareForm[\'primary_\' + $index].$pristine }" ng-if=!vm.beneficiaryViewModel.isDeleted(bene)><div class="col-xs-6 col-md-8 margin-top-5">{{bene.firstName}} {{bene.lastName}}</div><div class="col-xs-3 col-md-2 text-right margin-top-5">{{bene.shareText}}</div><div class="input-group col-xs-3 col-md-2"><input class="col-xs-12 text-center padding-0 form-control" type=number name=primary_{{$index}} data-ng-model=bene.newShare ng-pattern="/^[0-9]{1,3}$/" data-ng-required=true ng-change="vm.beneficiaryViewModel.calculateBeneTotals()"> <span class=input-group-addon>%</span></div><div role=alert class="help-block text-right" ng-show="!shareForm[\'primary_\' + $index].$pristine && shareForm[\'primary_\' + $index].$invalid"><span ng-show="shareForm[\'primary_\' + $index].$error.required || shareForm[\'primary_\' + $index].$error.pattern || shareForm[\'primary_\' + $index].$error.maxlength">Please enter a valid whole number.</span></div></div></div></div></div><div class="row bene-group margin-bottom-0" ng-if="vm.beneficiaryViewModel.containsPrimary(vm.beneficiaryViewModel.primaryBeneficiaries) ||\r\n                                    vm.beneficiaryViewModel.containsPrimary(vm.beneficiaryViewModel.newBeneficiaries)"><div class=col-xs-12><div class="row total bene"><div class="col-xs-6 col-md-8">PRIMARY TOTAL</div><div class="col-xs-3 col-md-2 text-right">{{vm.beneficiaryViewModel.currentPrimaryTotal}}</div><div class="col-xs-3 col-md-2 text-center" ng-class="{\'text-warning\': !vm.beneficiaryViewModel.isValidPrimaryTotal()}">{{vm.beneficiaryViewModel.newPrimaryTotal}}</div></div></div></div><div class="row bene-group margin-bottom-0" ng-if=vm.beneficiaryViewModel.containsContingent(vm.beneficiaryViewModel.contingentBeneficiaries)><div class=col-xs-12><div class="row update-header border-bottom-light bene"><div class="col-xs-6 col-md-8">CONTINGENT BENEFICIARIES</div><div class="col-xs-3 col-md-2 text-right">CURRENT</div><div class="col-xs-3 col-md-2 text-center">NEW</div></div><div ng-repeat="bene in vm.beneficiaryViewModel.contingentBeneficiaries"><div class="row form-group border-bottom-light bene" ng-class="{ \'has-error\' : shareForm[\'contingent_\' + $index].$invalid && !shareForm[\'contingent_\' + $index].$pristine }" ng-if=!vm.beneficiaryViewModel.isDeleted(bene)><div class="col-xs-6 col-md-8 margin-top-5">{{bene.firstName}} {{bene.lastName}}</div><div class="col-xs-3 col-md-2 text-right margin-top-5">{{bene.shareText}}</div><div class="input-group col-xs-3 col-md-2"><input class="col-xs-12 text-center padding-0 form-control" type=number name=contingent_{{$index}} data-ng-model=bene.newShare ng-pattern="/^[0-9]{1,3}$/" data-ng-required=true ng-change="vm.beneficiaryViewModel.calculateBeneTotals()"> <span class=input-group-addon>%</span></div><div role=alert class="help-block text-right" ng-show="!shareForm[\'contingent_\' + $index].$pristine && shareForm[\'contingent_\' + $index].$invalid"><span ng-show="shareForm[\'contingent_\' + $index].$error.required || shareForm[\'contingent_\' + $index].$error.pattern || shareForm[\'contingent_\' + $index].$error.maxlength">Please enter a valid whole number.</span></div></div></div></div></div><div class="row bene-group margin-bottom-0" ng-if="vm.beneficiaryViewModel.containsContingent(vm.beneficiaryViewModel.contingentBeneficiaries) ||\r\n                                    vm.beneficiaryViewModel.containsContingent(vm.beneficiaryViewModel.newBeneficiaries)"><div class=col-xs-12><div class="row total bene"><div class="col-xs-6 col-md-8">CONTINGENT TOTAL</div><div class="col-xs-3 col-md-2 text-right">{{vm.beneficiaryViewModel.currentContingentTotal}}</div><div class="col-xs-3 col-md-2 text-center" ng-class="{\'text-warning\': !vm.beneficiaryViewModel.isValidContingentTotal()}">{{vm.beneficiaryViewModel.newContingentTotal}}</div></div></div></div><div class=no-benes-message ng-if="(vm.beneficiaryViewModel.contingentBeneficiaries == undefined ||\r\n                                    vm.beneficiaryViewModel.contingentBeneficiaries.length == 0)&& !vm.beneficiaryViewModel.containsContingent(vm.beneficiaryViewModel.newBeneficiaries)">No contingent beneficiaries have been designated for this account.</div></div></form></div><div class=no-benes-message ng-if="!vm.beneficiaryViewModel.containsBeneficiary() && !vm.beneficiaryViewModel.containsNew()">No beneficiaries have been designated for this account.</div><hg-button-group fixed=$root.deviceInfo.isSmallScreen() class=button-action-bar><button ng-click=vm.beneficiaryViewModel.goToInterstitial() class="btn btn-default">Back</button><hg-button-primary data-ng-disabled="!vm.beneficiaryViewModel.isValidPrimaryTotal() || !vm.beneficiaryViewModel.isValidContingentTotal() || shareForm.$invalid" data-ng-click=vm.beneficiaryViewModel.goToConsent()>Next</hg-button-primary></hg-button-group></div></div></div></hg-page>'),
a.put("templates/account/beneficiarySubmit.html",'<hg-page full=true><div id=progressWrapper class=thin><div class="progress four complete" title="Step 1 of 4"><span class=sr-only></span></div><div class="progress four complete" title="Step 2 of 4"><span class=sr-only></span></div><div class="progress four complete" title="Step 3 of 4"><span class=sr-only></span></div><div class="progress four current" title="Step 4 of 4"><span class=sr-only></span></div></div><div class=benes-container ng-init=vm.beneficiaryViewModel.verifyBeneficiaryFlow(vm.beneficiaryViewModel)><div class="col-xs-12 bene-error" data-ng-if=vm.beneficiaryViewModel.serverErrorMessage><div class=message-error><div class=row><div class="col-xs-2 text-center"><i class="icon-warning status-icon statusIconWarningDark"></i></div><div class=col-xs-8 ng-bind-html=vm.beneficiaryViewModel.serverErrorMessage></div></div></div></div><div class=row><div class="col-xs-12 col-md-8 col-md-offset-2"><div class=title>Submit Updates</div><div class=bene-data><div class="row bene-group margin-bottom-0"><div class=col-xs-12><div class=row><div class=col-xs-12>Please review the information below. It reflects any changes you made.</div></div><div class="row update-header border-bottom-light bene" ng-if=vm.beneficiaryViewModel.containsNew()><div ng-if="vm.beneficiaryViewModel.newBeneficiaries.length == 1" class=col-xs-12>NEW BENEFICIARY</div><div ng-if="vm.beneficiaryViewModel.newBeneficiaries.length > 1" class=col-xs-12>NEW BENEFICIARIES</div></div></div></div><div class="row bene-group margin-bottom-0" ng-repeat="bene in vm.beneficiaryViewModel.newBeneficiaries"><div ng-include="\'templates/account/beneficiaryUpdates.html\'"></div></div><div class="row bene-group margin-bottom-0" ng-if="vm.beneficiaryViewModel.updatedCount() > 0"><div class=col-xs-12><div class="row update-header border-bottom-light bene"><div ng-if="vm.beneficiaryViewModel.updatedCount() == 1" class=col-xs-12>UPDATED BENEFICIARY</div><div ng-if="vm.beneficiaryViewModel.updatedCount() > 1" class=col-xs-12>UPDATED BENEFICIARIES</div></div></div></div><div class="row bene-group margin-bottom-0" ng-repeat="bene in vm.beneficiaryViewModel.primaryBeneficiaries"><div ng-if=!vm.beneficiaryViewModel.isDeleted(bene)><div ng-include="\'templates/account/beneficiaryUpdates.html\'"></div></div></div><div class="row bene-group margin-bottom-0" ng-repeat="bene in vm.beneficiaryViewModel.contingentBeneficiaries"><div ng-if=!vm.beneficiaryViewModel.isDeleted(bene)><div ng-include="\'templates/account/beneficiaryUpdates.html\'"></div></div></div><div class="row bene-group margin-bottom-0" ng-if="vm.beneficiaryViewModel.removedCount() > 0"><div class=col-xs-12><div class="row update-header border-bottom-light bene"><div ng-if="vm.beneficiaryViewModel.removedCount() == 1" class=col-xs-12>REMOVED BENEFICIARY</div><div ng-if="vm.beneficiaryViewModel.removedCount() > 1" class=col-xs-12>REMOVED BENEFICIARIES</div></div></div></div><div class="row bene-group margin-bottom-0" ng-repeat="bene in vm.beneficiaryViewModel.primaryBeneficiaries"><div ng-if=vm.beneficiaryViewModel.isDeleted(bene)><div ng-include="\'templates/account/beneficiaryUpdates.html\'"></div></div></div><div class="row bene-group margin-bottom-0" ng-repeat="bene in vm.beneficiaryViewModel.contingentBeneficiaries"><div ng-if=vm.beneficiaryViewModel.isDeleted(bene)><div ng-include="\'templates/account/beneficiaryUpdates.html\'"></div></div></div><div class="row bene-group margin-bottom-0" ng-if=vm.beneficiaryViewModel.isDistributionUpdated()><div class=col-xs-12><div class="row update-header border-bottom-light bene"><div class=col-xs-12>DISTRIBUTION UPDATES ONLY</div></div><div ng-repeat="bene in vm.beneficiaryViewModel.primaryBeneficiaries"><div class="row border-bottom-light bene" ng-if="bene.isShareUpdate==true"><div class=col-xs-8>{{bene.firstName}} {{bene.lastName}}</div><div class="col-xs-4 text-right">{{bene.newShare}}%</div></div></div><div ng-repeat="bene in vm.beneficiaryViewModel.contingentBeneficiaries"><div class="row border-bottom-light bene" ng-if="bene.isShareUpdate==true"><div class=col-xs-8>{{bene.firstName}} {{bene.lastName}}</div><div class="col-xs-4 text-right">{{bene.newShare}}%</div></div></div></div></div><div class=bene-agreement><div class=agreement><hg-local-asset hg-asset-id=Service-BeneficiaryWebpart-iAgreeMessage></hg-local-asset></div><div><input type=checkbox id=bene-agree ng-model="vm.beneficiaryViewModel.hasAcceptedAgreement"><label for=bene-agree class=checkbox>I Agree</label></div></div></div><hg-button-group fixed=$root.deviceInfo.isSmallScreen() class=button-action-bar><button ng-click=vm.beneficiaryViewModel.backToConsent() class="btn btn-default">Back</button><hg-button-primary data-ng-click=vm.beneficiaryViewModel.submit() ng-disabled=!vm.beneficiaryViewModel.hasAcceptedAgreement>Submit</hg-button-primary></hg-button-group></div></div></div></hg-page>'),a.put("templates/account/beneficiaryUpdates.html",'<div class=bene-updates><div class=col-xs-12 ng-if="vm.beneficiaryViewModel.isAdded(bene) || vm.beneficiaryViewModel.isEdited(bene) || vm.beneficiaryViewModel.isDeleted(bene)"><div class="row border-bottom-light bene"><div class=col-xs-12><div class="row bene"><div class="col-xs-8 col-md-6"><div class=row><div class="updated-field col-xs-12" ng-if=vm.beneficiaryViewModel.isAdded(bene)>New Beneficiary</div><div class="updated-field col-xs-12" ng-if=vm.beneficiaryViewModel.isEdited(bene)>Updated Beneficiary</div><div class="updated-field col-xs-12" ng-if=vm.beneficiaryViewModel.isDeleted(bene)>Removed Beneficiary</div><div class="updated-value col-xs-12">{{bene.firstName}} {{bene.lastName}}</div></div></div><div class="col-xs-2 col-md-4 col-xs-offset-2"><div class=row><div class=col-xs-12 ng-if=vm.beneficiaryViewModel.isAdded(bene)><a class=image-cursor data-ng-click="vm.beneficiaryViewModel.addOrUpdateBeneficiary(false, bene)">Edit</a></div><div class=col-xs-12 ng-if=vm.beneficiaryViewModel.isEdited(bene)><a class=image-cursor data-ng-click="vm.beneficiaryViewModel.addOrUpdateBeneficiary(true, bene)">Edit</a></div></div></div></div><div class="row bene"><div class="col-xs-12 col-md-6"><div class=row><div class="updated-field col-xs-12">Select Beneficiary Type</div><div class="updated-value col-xs-12">{{bene.beneficiaryTypeName}}</div></div></div><div class="col-xs-12 col-md-4 col-md-offset-2"><div class=row><div class="updated-field col-xs-12">Relationship/Entity Type</div><div class="updated-value col-xs-12">{{bene.relationTypeName}}</div></div></div></div><div class="row bene"><div class="col-xs-12 col-md-6"><div class=row ng-show="bene.streetAddress1 || bene.streetAddress2 || bene.streetAddress3 || bene.city || bene.stateId || bene.zip || bene.countryId"><div class="updated-field col-xs-12">Address</div><div class="updated-value col-xs-12" ng-show=bene.streetAddress1>{{bene.streetAddress1}}</div><div class="updated-value col-xs-12" ng-show=bene.streetAddress2>{{bene.streetAddress2}}</div><div class="updated-value col-xs-12" ng-show=bene.streetAddress3>{{bene.streetAddress3}}</div><div class="updated-value col-xs-12"><span ng-show=bene.city>{{bene.city}}</span> <span ng-show=bene.stateId>{{bene.stateId}}</span> <span ng-show=bene.zip>{{bene.zip}}</span></div><div class="updated-value col-xs-12" ng-show=bene.countryId>{{bene.countryId}}</div></div></div><div class="col-xs-12 col-md-4 col-md-offset-2"><div class=row ng-show=bene.dateOfBirth><div class="updated-field col-xs-12">Date of Birth</div><div class="updated-value col-xs-12">{{bene.dateOfBirth}}</div></div></div></div><div class="row bene"><div class="col-xs-12 col-md-6"><div class=row ng-show=bene.rawSsnTaxId><div class="updated-field col-xs-12">Social Security Number/Tax ID</div><div class="updated-value col-xs-12">{{vm.beneficiaryViewModel.maskSsnTaxId(bene.rawSsnTaxId)}}</div></div><div class=row ng-show="bene.redactedSsnTaxId && !bene.rawSsnTaxId"><div class="updated-field col-xs-12">Social Security Number/Tax ID</div><div class="updated-value col-xs-12">{{bene.redactedSsnTaxId}}</div></div></div><div class="col-xs-12 col-md-4 col-md-offset-2"><div class=row><div class="updated-field col-xs-12">Share Percentage</div><div class="updated-value col-xs-12">{{bene.newShare}}%</div></div></div></div></div></div></div></div>'),a.put("templates/account/positions.html","<hg-page></hg-page>"),a.put("templates/account/reginserts.html",'<div class="col-sm-11 col-md-11"><div class="col-sm-1 col-md-1" data-ng-click=cancel()><a>Close</a></div><div class="col-sm-10 col-md-10 selectoroverlayheader"><h3>Regulatory Inserts</h3></div></div><div ng-repeat="regInsertDocument in items"><a data-ng-click=showDocumentInsert(regInsertDocument.Id)>{{regInsertDocument.Name}}</a></div>'),a.put("templates/account/statements.html",'<hg-page bannertext=blank iippagedisclosureasset=VIEW-ACCT-DOCUMENTS-AS><hg-page-title></hg-page-title><div><ul class=breadcrumb><li><a ui-sref=accountDocuments>{{title}}</a></li><li class=active>{{subTitle}}</li></ul></div><div role=child class=documents-list><ul class=list-group><li data-ng-repeat="documentHolder in Documents" class="list-group-item list-style"><div data-ng-click=showDocument(documentHolder.Document.Id)><h4 class=list-group-item-heading>{{documentHolder.Document.Name}}<span class="icon-arrow-right pull-right"></span></h4></div><p class=list-group-item-text>{{documentHolder.Document.Date}}</p><ul data-ng-if=shouldShowInserts class="sub-list list-group"><li ng-repeat="regInsertDocument in documentHolder.Inserts" class="list-group-item list-style"><div class=list-group-item-text data-ng-click=showDocumentInsert(documentHolder.Document.Id,regInsertDocument.Id)>Regulatory Insert<span class="icon-arrow-right pull-right"></span></div></li></ul></li></ul></div></hg-page>'),a.put("templates/account/transactions.html","<hg-page></hg-page>"),a.put("templates/accountOpen/accountOpenError.html","<hg-page><hg-page-title>Error</hg-page-title><div ng-init=profileModel()><p>An error occurred while trying to open your account. Please call {{$root.customizationInfo.getPhoneDisplay()}} for assistance.</p></div></hg-page>"),a.put("templates/accountOpen/agreements.html",'<hg-page bannertext={{accountOpenBannerText}}><hg-page-title ng-if="(jointFlag==false || jointFlag==undefined) && (twoTrusteeFlag==false || twoTrusteeFlag==undefined)" ng-bind-html=agreementsPageTitle></hg-page-title><hg-page-title ng-if="jointFlag==true ">Please review the disclosures and legal agreements below, and sign or provide consent as indicated by the second tenant.</hg-page-title><hg-page-title ng-if="twoTrusteeFlag==true">Please review the disclosures and legal agreements below, and sign or provide consent as indicated by the second trustee.</hg-page-title><div class=agreement ng-init=profileModel()><div class="alert alert-danger" role=alert ng-if="accountApplicationSubmit==true">{{accountApplicationSubmitMsg}}</div><form name=userForm class="form container-padded" novalidate><div class=hg-agreement><h2><b>1. Agreement to Use Electronic Records and Signatures</b></h2><div class=panel-group bs-collapse><div class="panel panel-default"><div class=panel-heading><div class="row panel-title"><div class=padding-right-0 ng-class="{ \'col-xs-1 agreement-checkbox\' : isDesktop === true,\'col-xs-2\' : isDesktop === false}"><input ng-if="!electronicsAgreement.open && newAddress.electronicsAgreement==undefined" type=checkbox ng-model=newAddress.electronicsAgreement ng-click="checkboxAccordianClick($event,\'electronicsAgreement\',newAddress.electronicsAgreement,electronicsAgreement)" ng-disabled=true id=checkbox2 name=checkbox2 value=checkbox2 required> <input ng-if="!electronicsAgreement.open && newAddress.electronicsAgreement==false" type=checkbox ng-model=newAddress.electronicsAgreement ng-click="checkboxAccordianClick($event,\'electronicsAgreement\',newAddress.electronicsAgreement,electronicsAgreement)" id=checkbox2 required> <input ng-if="!electronicsAgreement.open && newAddress.electronicsAgreement==true" type=checkbox ng-model=newAddress.electronicsAgreement ng-click="checkboxAccordianClick($event,\'electronicsAgreement\',newAddress.electronicsAgreement,electronicsAgreement)" id=checkbox2 required> <input ng-if=electronicsAgreement.open type=checkbox ng-model=newAddress.electronicsAgreement ng-click="checkboxClick($event);checkboxAccordianClick($event,\'electronicsAgreement\',newAddress.electronicsAgreement,electronicsAgreement)" id=checkbox2 required><label id=checkboxLabel2 for=checkbox2 class="checkbox checkbox-example testcheckbox" ng-click="checkboxAccordianClick($event,\'electronicsAgreement\',newAddress.electronicsAgreement,electronicsAgreement)"></label></div><div class="text agreement-title" ng-class="{ \'col-xs-10 agreement-checkbox-bodytext\' : isDesktop === true, \'col-xs-9\' : isDesktop === false }" bs-collapse-toggle ng-click="toggleElem(\'electronicsAgreement\',electronicsAgreement.open)"><span ng-if=$root.isSIP>By checking the box, I acknowledge the use of electronic records and signatures to open my account, and enroll in the Schwab Paperless Documents Program.</span> <span ng-if=$root.isIIP>By checking the box, I acknowledge the use of electronic records and signatures to open my Schwab brokerage account, receive disclosures, and enroll in the Schwab Paperless Documents Program.</span></div><div class="col-xs-1 padding-0" bs-collapse-toggle ng-click="toggleElem(\'electronicsAgreement\',electronicsAgreement.open)"><i class="fa fa-plus" ng-if="electronicsAgreement.open==false||electronicsAgreement.open==undefined"></i> <i class="fa fa-minus" ng-if="electronicsAgreement.open==true"></i></div></div></div><div class=panel-collapse ng-model=electronicsAgreementOpen ng-class="{\'collapse am-collapse in\':electronicsAgreement.open === true,\'collapse am-collapse\':electronicsAgreement.open === false}"><div class=panel-body><div class=row><div class=col-xs-1>&nbsp;</div><div class=col-xs-11><div ng-if=$root.isSIP class="panel-agreement-content text"><hg-remote-asset hg-asset-id="SIP-ENROLLMENT-PAPERLESS"></div><div ng-if=$root.isIIP class="panel-agreement-content text"><hg-remote-asset hg-asset-id="ENROLLMENT-PAPERLESS-AS"></div></div></div></div></div></div></div></div><div class=hg-agreement><h2 ng-if=$root.isSIP><b>2. Schwab Intelligent Portfolios&trade; Advisory Agreement and Disclosures</b></h2><h2 ng-if=$root.isIIP><b>2. Institutional Intelligent Portfolios&trade; Disclosures</b></h2><div class=panel-group bs-collapse><div class="panel panel-default"><div class=panel-heading><div class="row panel-title"><div class=padding-right-0 ng-class="{ \'col-xs-1 agreement-checkbox\' : isDesktop === true,\'col-xs-2\' : isDesktop === false}"><input ng-if="!hgAgreement.open && newAddress.hgAgreement==undefined" type=checkbox ng-model=newAddress.hgAgreement ng-disabled=true ng-click="checkboxAccordianClick($event,\'hgAgreement\',newAddress.hgAgreement,hgAgreement)" id=checkbox3 name=checkbox3 value=checkbox3 required> <input ng-if="!hgAgreement.open && newAddress.hgAgreement==false" type=checkbox ng-model=newAddress.hgAgreement ng-click="checkboxAccordianClick($event,\'hgAgreement\',newAddress.hgAgreement,hgAgreement)" id=checkbox3 required> <input ng-if="!hgAgreement.open && newAddress.hgAgreement==true" type=checkbox ng-model=newAddress.hgAgreement ng-click="checkboxAccordianClick($event,\'hgAgreement\',newAddress.hgAgreement,hgAgreement)" id=checkbox3 required> <input ng-if=hgAgreement.open type=checkbox ng-model=newAddress.hgAgreement ng-click="checkboxClick($event);checkboxAccordianClick($event,\'hgAgreement\',newAddress.hgAgreement,hgAgreement)" id=checkbox3 required><label id=checkboxLabel3 for=checkbox3 class="checkbox checkbox-example testcheckbox" ng-click="checkboxAccordianClick($event,\'hgAgreement\',newAddress.hgAgreement,hgAgreement)"></label></div><div class="agreement-title text" ng-class="{ \'col-xs-10 agreement-checkbox-bodytext\' : isDesktop === true,\'col-xs-9\' : isDesktop === false}" bs-collapse-toggle ng-click="toggleElem(\'hgAgreement\',hgAgreement.open)"><span ng-if=$root.isSIP>By checking the box, I am signing the contract and acknowledge receipt of the disclosure brochures.</span> <span ng-if=$root.isIIP>By checking the box, I acknowledge the receipt of the Disclosure Brochure and agree to SWIA’s limited role as described below.</span></div><div class="col-xs-1 padding-0" bs-collapse-toggle ng-click="toggleElem(\'hgAgreement\',hgAgreement.open)"><i class="fa fa-plus" ng-if="hgAgreement.open==undefined || hgAgreement.open==false"></i> <i class="fa fa-minus" ng-if="hgAgreement.open==true"></i></div></div></div><div class=panel-collapse ng-class="{\'collapse am-collapse in\':hgAgreement.open === true,\'collapse am-collapse\':hgAgreement.open === false||hgAgreement.open === undefined}"><div class=panel-body><div class=row><div class=col-xs-1>&nbsp;</div><div class=col-xs-11><div ng-if=$root.isSIP class="panel-agreement-content text"><hg-remote-asset hg-asset-id="SIP-RECEIPT-DISCLOSURES"></div><div ng-if=$root.isIIP class="panel-agreement-content text"><hg-remote-asset hg-asset-id="RECEIPT-DISCLOSURES-AS"></div></div></div></div></div></div></div></div><div class=hg-agreement><h2><b>3. Charles Schwab & Co., Inc. Brokerage Account Agreement, Disclosures, and Terms</b></h2><div class=panel-group bs-collapse allow-multiple=true><div class=subAgreement ng-if="custodialFlag==true"><div class="panel panel-default"><div class=panel-heading><div class="row panel-title"><div class=padding-right-0 ng-class="{ \'col-xs-1 agreement-checkbox\' : isDesktop === true,\'col-xs-2\' : isDesktop === false}"><input ng-if="!minorAgreement.open && newAddress.minorAgreement==undefined" type=checkbox ng-model=newAddress.minorAgreement ng-disabled=true ng-click=checkboxAccordianClick($event) id=checkbox7 name=checkbox7 value=checkbox7 required> <input ng-if="!minorAgreement.open && newAddress.minorAgreement==false" type=checkbox ng-model=newAddress.minorAgreement ng-click="checkboxAccordianClick($event,\'minorAgreement\',newAddress.minorAgreement,minorAgreement)" id=checkbox7 required> <input ng-if="!minorAgreement.open && newAddress.minorAgreement==true" type=checkbox ng-model=newAddress.minorAgreement ng-click="checkboxAccordianClick($event,\'minorAgreement\',newAddress.minorAgreement,minorAgreement)" id=checkbox7 required> <input ng-if=minorAgreement.open; type=checkbox ng-model=newAddress.minorAgreement ng-click="checkboxClick($event);checkboxAccordianClick($event,\'minorAgreement\',newAddress.minorAgreement,minorAgreement)" id=checkbox7 required><label id=checkboxLabel7 for=checkbox7 class="checkbox checkbox-example testcheckbox" ng-click="checkboxAccordianClick($event,\'minorAgreement\',newAddress.minorAgreement,minorAgreement)"></label></div><div class="agreement-title text" ng-class="{ \'col-xs-10 agreement-checkbox-bodytext\' : isDesktop === true,\'col-xs-9\' : isDesktop === false}" bs-collapse-toggle ng-click="toggleElem(\'minorAgreement\',minorAgreement.open)"><span class=list-style-alpha>(a).</span><p>By checking the box, I agree to the terms set forth as the custodian.</p></div><div class="col-xs-1 padding-0" bs-collapse-toggle ng-click="toggleElem(\'minorAgreement\',minorAgreement.open)"><i class="fa fa-plus" ng-if="minorAgreement.open==false || minorAgreement.open==undefined"></i> <i class="fa fa-minus" ng-if="minorAgreement.open==true"></i></div></div></div><div class=panel-collapse ng-class="{\'collapse am-collapse in\':minorAgreement.open === true,\'collapse am-collapse\':minorAgreement.open === false||minorAgreement.open === undefined}"><div class=panel-body><div class=row><div class=col-xs-1>&nbsp;</div><div class=col-xs-11><div class="panel-agreement-content text"><div ng-if=$root.isSIP class="panel-agreement-content text"><hg-remote-asset hg-asset-id="SIP-CUSTODIAL-AGREEMENTS"></div><div ng-if=$root.isIIP class="panel-agreement-content text"><hg-remote-asset hg-asset-id="CUSTODIAL-AGREEMENTS-AS"></div><br></div></div></div></div></div></div></div><div class=subAgreement><div class="panel panel-default"><div class=panel-heading><div class="panel-title row"><div class=padding-right-0 ng-class="{ \'col-xs-1 agreement-checkbox\' : isDesktop === true,\'col-xs-2\' : isDesktop === false}"><input ng-if="!cashAgreement.open && newAddress.cashAgreement==undefined" type=checkbox ng-model=newAddress.cashAgreement ng-disabled=true id=checkbox4 name=checkbox4 value=checkbox4 ng-click="checkboxAccordianClick($event,\'cashAgreement\',newAddress.cashAgreement,cashAgreement)" required> <input ng-if="!cashAgreement.open && newAddress.cashAgreement==false" type=checkbox ng-model=newAddress.cashAgreement id=checkbox4 ng-click="checkboxAccordianClick($event,\'cashAgreement\',newAddress.cashAgreement,cashAgreement)" required> <input ng-if="!cashAgreement.open && newAddress.cashAgreement==true" type=checkbox ng-model=newAddress.cashAgreement id=checkbox4 ng-click="checkboxAccordianClick($event,\'cashAgreement\',newAddress.cashAgreement,cashAgreement)" required> <input ng-if=cashAgreement.open type=checkbox ng-model=newAddress.cashAgreement ng-click="checkboxClick($event);checkboxAccordianClick($event,\'cashAgreement\',newAddress.cashAgreement,cashAgreement)" id=checkbox4 required><label id=checkboxLabel4 for=checkbox4 class="checkbox checkbox-example testcheckbox" ng-click="checkboxAccordianClick($event,\'cashAgreement\',newAddress.cashAgreement,cashAgreement)"></label></div><div class="agreement-title text" ng-class="{ \'col-xs-10 agreement-checkbox-bodytext\' : isDesktop === true,\'col-xs-9\' : isDesktop === false}" bs-collapse-toggle ng-click="toggleElem(\'cashAgreement\',cashAgreement.open)"><span class=list-style-alpha ng-if="custodialFlag==true">(b).</span> <span class=list-style-alpha ng-if="custodialFlag==false || custodialFlag==undefined">(a).</span><p>By checking the box, I consent to enroll in the Schwab Bank Savings Sweep Feature.</p></div><div class="col-xs-1 padding-0" bs-collapse-toggle ng-click="toggleElem(\'cashAgreement\',cashAgreement.open)"><i class="fa fa-plus" ng-if="cashAgreement.open==false || cashAgreement.open==undefined"></i> <i class="fa fa-minus" ng-if="cashAgreement.open==true"></i></div></div></div><div class=panel-collapse ng-class="{\'collapse am-collapse in\':cashAgreement.open === true,\'collapse am-collapse\':cashAgreement.open === false||cashAgreement.open === undefined}"><div class=panel-body><div class=row><div class=col-xs-1>&nbsp;</div><div class=col-xs-11><div ng-if=$root.isSIP class="panel-agreement-content text"><hg-remote-asset hg-asset-id="SIP-ENROLLMENT-BANK-SWEEP"></div><div ng-if=$root.isIIP class="panel-agreement-content text"><hg-remote-asset hg-asset-id="ENROLLMENT-BANK-SWEEP-AS"></div></div></div></div></div></div></div><div class=subAgreement><div class="panel panel-default"><div class=panel-heading><div class="row panel-title"><div class=padding-right-0 ng-class="{ \'col-xs-1 agreement-checkbox\' : isDesktop === true,\'col-xs-2\' : isDesktop === false}"><input ng-if="!irsTaxAgreement.open && newAddress.irsTaxAgreement==undefined" type=checkbox ng-model=newAddress.irsTaxAgreement ng-disabled=true ng-click=checkboxAccordianClick($event) id=checkbox5 name=checkbox5 value=checkbox5 required> <input ng-if="!irsTaxAgreement.open && newAddress.irsTaxAgreement==false" type=checkbox ng-model=newAddress.irsTaxAgreement ng-click="checkboxAccordianClick($event,\'irsTaxAgreement\',newAddress.irsTaxAgreement,irsTaxAgreement)" id=checkbox5 required> <input ng-if="!irsTaxAgreement.open && newAddress.irsTaxAgreement==true" type=checkbox ng-model=newAddress.irsTaxAgreement ng-click="checkboxAccordianClick($event,\'irsTaxAgreement\',newAddress.irsTaxAgreement,irsTaxAgreement)" id=checkbox5 required> <input ng-if=irsTaxAgreement.open; type=checkbox ng-model=newAddress.irsTaxAgreement ng-click="checkboxClick($event);checkboxAccordianClick($event,\'irsTaxAgreement\',newAddress.irsTaxAgreement,irsTaxAgreement)" id=checkbox5 required><label id=checkboxLabel5 for=checkbox5 class="checkbox checkbox-example testcheckbox" ng-click="checkboxAccordianClick($event,\'irsTaxAgreement\',newAddress.irsTaxAgreement,irsTaxAgreement)"></label></div><div class="agreement-title text" ng-class="{ \'col-xs-10 agreement-checkbox-bodytext\' : isDesktop === true,\'col-xs-9\' : isDesktop === false}" bs-collapse-toggle ng-click="toggleElem(\'irsTaxAgreement\',irsTaxAgreement.open)"><span class=list-style-alpha ng-if="custodialFlag==true">(c).</span> <span class=list-style-alpha ng-if="custodialFlag==false || custodialFlag==undefined">(b).</span><p>By checking the box, I am providing electronic signature to certify my taxpayer identification number and tax withholding status.</p></div><div class="col-xs-1 padding-0" bs-collapse-toggle ng-click="toggleElem(\'irsTaxAgreement\',irsTaxAgreement.open)"><i class="fa fa-plus" ng-if="irsTaxAgreement.open==false || irsTaxAgreement.open==undefined"></i> <i class="fa fa-minus" ng-if="irsTaxAgreement.open==true"></i></div></div></div><div class=panel-collapse ng-class="{\'collapse am-collapse in\':irsTaxAgreement.open === true,\'collapse am-collapse\':irsTaxAgreement.open === false||irsTaxAgreement.open === undefined}"><div class=panel-body><div class=row><div class=col-xs-1>&nbsp;</div><div class=col-xs-11><div class="panel-agreement-content text"><hg-remote-asset hg-asset-id="SIP-CERTIFY-TAXPAYER-ID-AND-WITHOLDING-STATUS"><br></div></div><div class=col-xs-11><br>I understand that if I have been notified by the IRS that I am subject to backup withholding as a result of failing to report all interests and dividends on my tax return, I must click or touch the backup withholding box below, which effectively negates item 2 above. <input type=checkbox id=irsAgreement ng-model=newAddress.irsAgreement ng-click="checkboxClick($event);"><label for=irsAgreement class="checkbox"></div></div></div></div></div></div><div ng-if=$root.isIIP class=subAgreement><div class="panel panel-default"><div class=panel-heading><div class="row panel-title"><div class=padding-right-0 ng-class="{ \'col-xs-1 agreement-checkbox\' : isDesktop === true,\'col-xs-2\' : isDesktop === false}"><input ng-if="!advisorAuthorization.open && newAddress.advisorAuthorization==undefined" type=checkbox ng-model=newAddress.advisorAuthorization ng-disabled=true ng-click=checkboxAccordianClick($event) id=checkbox8 name=checkbox8 value=checkbox8 required> <input ng-if="!advisorAuthorization.open && newAddress.advisorAuthorization==false" type=checkbox ng-model=newAddress.advisorAuthorization ng-click="checkboxAccordianClick($event,\'advisorAuthorization\',newAddress.advisorAuthorization,advisorAuthorization)" id=checkbox8 required> <input ng-if="!advisorAuthorization.open && newAddress.advisorAuthorization==true" type=checkbox ng-model=newAddress.advisorAuthorization ng-click="checkboxAccordianClick($event,\'advisorAuthorization\',newAddress.advisorAuthorization,advisorAuthorization)" id=checkbox8 required> <input ng-if=advisorAuthorization.open; type=checkbox ng-model=newAddress.advisorAuthorization ng-click="checkboxClick($event);checkboxAccordianClick($event,\'advisorAuthorization\',newAddress.advisorAuthorization,advisorAuthorization)" id=checkbox8 required><label id=checkboxLabel8 for=checkbox8 class="checkbox checkbox-example testcheckbox" ng-click="checkboxAccordianClick($event,\'advisorAuthorization\',newAddress.advisorAuthorization,advisorAuthorization)"></label></div><div class="agreement-title text" ng-class="{ \'col-xs-10 agreement-checkbox-bodytext\' : isDesktop === true,\'col-xs-9\' : isDesktop === false}" bs-collapse-toggle ng-click="toggleElem(\'advisorAuthorization\',advisorAuthorization.open)"><span class=list-style-alpha ng-if="custodialFlag==true">(d).</span> <span class=list-style-alpha ng-if="custodialFlag==false || custodialFlag==undefined">(c).</span><p>By checking the box, I authorize my Investment Advisor to take certain actions on my behalf in my Account, including withdrawing funds in certain circumstances.</p></div><div class="col-xs-1 padding-0" bs-collapse-toggle ng-click="toggleElem(\'advisorAuthorization\',advisorAuthorization.open)"><i class="fa fa-plus" ng-if="advisorAuthorization.open==false || advisorAuthorization.open==undefined"></i> <i class="fa fa-minus" ng-if="advisorAuthorization.open==true"></i></div></div></div><div class=panel-collapse ng-class="{\'collapse am-collapse in\':advisorAuthorization.open === true,\'collapse am-collapse\':advisorAuthorization.open === false||advisorAuthorization.open === undefined}"><div class=panel-body><div class=row><div class=col-xs-1>&nbsp;</div><div class=col-xs-11><div class="panel-agreement-content text" ng-if="newAddress.accountSubType==\'Individual\'\r\n                                || newAddress.accountSubType==\'JointTenants\' || newAddress.accountSubType==\'CommunityProperty\' || newAddress.accountSubType==\'CommonTenants\' || newAddress.accountSubType==\'Single Trustee\' || newAddress.accountSubType==\'Two Trustee\' || newAddress.accountSubType==\'Custodial\'"><hg-remote-asset hg-asset-id="INVESTMENT-ADVISOR-AUTHORIZATIONS-AS"><br></div><div class="panel-agreement-content text" ng-if="newAddress.accountSubType==\'Roth\'\r\n                                || newAddress.accountSubType==\'Tradition\' || newAddress.accountSubType==\'Rollover\'"><hg-remote-asset hg-asset-id="INVESTMENT-ADVISOR-AUTHORIZATIONS-IRA-AS"></div></div></div></div></div></div></div><div class=subAgreement><div class="panel panel-default"><div class=panel-heading><div class="row panel-title"><div class=padding-right-0 ng-class="{ \'col-xs-1 agreement-checkbox\' : isDesktop === true,\'col-xs-2\' : isDesktop === false}"><input ng-if="!accountTypeAgreement.open && newAddress.accountTypeAgreement==undefined" type=checkbox ng-model=newAddress.accountTypeAgreement ng-disabled=true ng-click="checkboxAccordianClick($event,\'accountTypeAgreement\',newAddress.accountTypeAgreement,accountTypeAgreement)" id=checkbox6 name=checkbox6 value=checkbox6 required> <input ng-if="!accountTypeAgreement.open && newAddress.accountTypeAgreement==false" type=checkbox ng-model=newAddress.accountTypeAgreement ng-click="checkboxAccordianClick($event,\'accountTypeAgreement\',newAddress.accountTypeAgreement,accountTypeAgreement)" id=checkbox6 required> <input ng-if="!accountTypeAgreement.open && newAddress.accountTypeAgreement==true" type=checkbox ng-model=newAddress.accountTypeAgreement ng-click="checkboxAccordianClick($event,\'accountTypeAgreement\',newAddress.accountTypeAgreement,accountTypeAgreement)" id=checkbox6 required> <input ng-if=accountTypeAgreement.open type=checkbox ng-model=newAddress.accountTypeAgreement ng-click="checkboxClick($event);checkboxAccordianClick($event,\'accountTypeAgreement\',newAddress.accountTypeAgreement,accountTypeAgreement)" id=checkbox6 required><label id=checkboxLabel6 for=checkbox6 class="checkbox checkbox-example testcheckbox" ng-click="checkboxAccordianClick($event,\'accountTypeAgreement\',newAddress.accountTypeAgreement,accountTypeAgreement)"></label></div><div class="agreement-title text" ng-class="{ \'col-xs-10 agreement-checkbox-bodytext\' : isDesktop === true,\'col-xs-9\' : isDesktop === false}" bs-collapse-toggle ng-click="toggleElem(\'accountTypeAgreement\',accountTypeAgreement.open)"><span ng-if=$root.isSIP class=list-style-alpha><span ng-if="custodialFlag==true">(d).</span> <span ng-if="custodialFlag==false || custodialFlag==undefined">(c).</span></span> <span ng-if=$root.isIIP class=list-style-alpha><span ng-if="custodialFlag==true">(e).</span> <span ng-if="custodialFlag==false || custodialFlag==undefined">(d).</span></span><p>By checking the box, I am signing the contract, which includes a mandatory pre-dispute arbitration clause.</p></div><div class="col-xs-1 padding-0" bs-collapse-toggle ng-click="toggleElem(\'accountTypeAgreement\',accountTypeAgreement.open)"><i class="fa fa-plus" ng-if="accountTypeAgreement.open==false || accountTypeAgreement.open==undefined"></i> <i class="fa fa-minus" ng-if="accountTypeAgreement.open==true"></i></div></div></div><div class=panel-collapse ng-class="{\'collapse am-collapse in\':accountTypeAgreement.open === true,\'collapse am-collapse\':accountTypeAgreement.open === false||accountTypeAgreement.open === undefined}"><div class=panel-body><div class=row><div class=col-xs-1>&nbsp;</div><div class=col-xs-11><div class="panel-agreement-content text" ng-if="newAddress.accountSubType==\'Individual\'\r\n                                || newAddress.accountSubType==\'JointTenants\' || newAddress.accountSubType==\'CommunityProperty\' || newAddress.accountSubType==\'CommonTenants\' || newAddress.accountSubType==\'Custodial\'"><div ng-if=$root.isSIP><div ng-if="newAddress.State==\'CA\'"><hg-remote-asset hg-asset-id="SIP-PRE-DISPUTE-ARBITRATION-CLAUSE-S1-CA"></div><div ng-if="newAddress.State!=\'CA\'"><hg-remote-asset hg-asset-id="SIP-PRE-DISPUTE-ARBITRATION-CLAUSE-S1"></div></div><div ng-if=$root.isIIP><div ng-if="newAddress.State==\'CA\'"><hg-remote-asset hg-asset-id="PRE-DISPUTE-ARBITRATION-CLAUSE-CA-S1-AS"></div><div ng-if="newAddress.State!=\'CA\'"><hg-remote-asset hg-asset-id="PRE-DISPUTE-ARBITRATION-CLAUSE-S1-AS"></div></div></div><div class="panel-agreement-content text" ng-if="newAddress.accountSubType==\'Roth\'\r\n                                || newAddress.accountSubType==\'Tradition\' || newAddress.accountSubType==\'Rollover\'"><div ng-if=$root.isSIP><div ng-if="newAddress.State==\'CA\'"><hg-remote-asset hg-asset-id="SIP-PRE-DISPUTE-ARBITRATION-CLAUSE-IRA-CA"></div><div ng-if="newAddress.State!=\'CA\'"><hg-remote-asset hg-asset-id="SIP-PRE-DISPUTE-ARBITRATION-CLAUSE-IRA"></div></div><div ng-if=$root.isIIP><div ng-if="newAddress.State==\'CA\'"><hg-remote-asset hg-asset-id="PRE-DISPUTE-ARBITRATION-CLAUSE-CA-IRA-AS"></div><div ng-if="newAddress.State!=\'CA\'"><hg-remote-asset hg-asset-id="PRE-DISPUTE-ARBITRATION-CLAUSE-IRA-AS"></div></div></div><div class="panel-agreement-content text" ng-if="newAddress.accountSubType==\'Single Trustee\' || newAddress.accountSubType==\'Two Trustee\'"><div ng-if=$root.isSIP><div ng-if="newAddress.State==\'CA\'"><hg-remote-asset hg-asset-id="SIP-PRE-DISPUTE-ARBITRATION-CLAUSE-LIVING-TRUST-CA"></div><div ng-if="newAddress.State!=\'CA\'"><hg-remote-asset hg-asset-id="SIP-PRE-DISPUTE-ARBITRATION-CLAUSE-LIVING-TRUST"></div></div><div ng-if=$root.isIIP><div ng-if="newAddress.State==\'CA\'"><hg-remote-asset hg-asset-id="PRE-DISPUTE-ARBITRATION-CLAUSE-LIVING-TRUST-CA-AS"></div><div ng-if="newAddress.State!=\'CA\'"><hg-remote-asset hg-asset-id="PRE-DISPUTE-ARBITRATION-CLAUSE-LIVING-TRUST-AS"></div></div></div></div></div></div></div></div></div></div></div><div class=text-center><h5><hg-remote-asset hg-asset-id=SIP-TERMS-AND-CONSENTS-FOOTER></hg-remote-asset><span ng-if="newAddress.jointFlag==true">{{joinTitle}}</span>.</h5></div><div class=button-action-bar><button type=button id=backAgreement ng-click=backAgreement() class="btn btn-default" aria-label=Back>Back</button> <button type=submit ng-click=submitAgreement() id=submitAgreements class="btn btn-primary" ng-disabled=userForm.$invalid aria-label=Submit>Submit</button></div></form></div></hg-page>'),
a.put("templates/accountOpen/application.html",'<div ng-if="currentState==false"><div><div ng-if="(isProfileUpdateFlag==false || isProfileUpdateFlag== undefined) && (isProgressBar==false || isProgressBar==undefined)"><div class="visible-sm visible-md visible-lg"><div><div><div id=account-open-progress class=text-center><nav><div class="form-inline text-center" ng-repeat="step in steps"><div><div class="col-sm-3 col-md-3 col-lg-3 {{checkAndReturnActiveStyle(step)}}"><span class=sr-only>{{returnActiveText(step)}}</span> <span>{{step.linkText}}</span></div></div></div></nav></div></div></div></div><div ng-if=isMobile class=visible-xs><div><div><div id=account-open-progress class=text-center><nav><div class="form-inline text-center" ng-repeat="step in stepsMobile"><div class=progress-text><div class="col-sm-3 col-md-3 col-lg-3 {{checkAndReturnActiveStyle(step)}} progress-height"></div><span class=sr-only>{{returnActiveText(step)}}</span><div>{{step.linkText}}</div></div></div></nav></div></div></div></div></div><div ng-if="isProgressBar==true"></div></div><div id=form-views class=account-open-view ui-view></div></div><div ng-if="currentState==true"><div class="visible-md visible-lg modal fade in login-container" id=myModal tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=false style="display: block; overflow-y:scroll"><div class=modal-dialog style="width: 800px; height:auto"><div class=modal-content style=width:100%><div class=modal-header><button type=button class=close data-dismiss=modal aria-hidden=true>&times;</button><h4 class=modal-title>&nbsp;</h4></div><div id=account-open-progress class=text-center><nav><div class="form-inline text-center" ng-repeat="step in steps"><div><div class="col-sm-3 col-md-3 col-lg-3 {{checkAndReturnActiveStyle(step)}}"><span class=sr-only>{{returnActiveText(step)}}</span> <span>{{step.linkText}}</span></div></div></div></nav><div ng-if=isMobile class=visible-xs><div id=account-open-progress class=text-center><nav><div class="form-inline text-center" ng-repeat="step in stepsMobile"><div class=progress-text><div class="col-sm-3 col-md-3 col-lg-3 {{checkAndReturnActiveStyle(step)}} progress-height"></div><span class=sr-only>{{returnActiveText(step)}}</span><div>{{step.linkText}}</div></div></div></nav></div></div></div><div class=modal-body><div class=row><div class="col-md-8 col-md-offset-2 login-container"><div id=form-views class=account-open-view ui-view></div></div></div></div><div class=modal-footer><div class="text-center login-new-id"></div></div></div></div></div><div class="visible-sm visible-xs"><div class=row><div class="col-sm-12 col-md-6 col-md-offset-3"><div id=form-views class=account-open-view ui-view></div></div></div></div></div>'),a.put("templates/accountOpen/confirmation.html",'<hg-page iippagedisclosure="After funding but before investment, your portfolio will be shown as 100% cash."><hg-page-title ng-bind-html=confirmationPageTitle></hg-page-title><div class=section-border><ul ng-if=$root.isSIP><li><i class="fa fa-dollar list-icon"></i><p class=list-text>Within 3 to 4 business days, the funds will be invested in your new portfolio.</p></li><li><i class="icon-eye list-icon"></i><p class=list-text>Once your portfolio is funded, we will monitor it daily and rebalance it when needed.</p></li><li><i class="icon-portfolio list-icon"></i><p class=list-text>Welcome to Schwab <span ng-if=$root.isIIP>Institutional</span> Intelligent Portfolios&trade;!</p></li><li ng-if=showAppStoreLinks><div class=app-store-links><a href={{appleLink}} target=_blank><img ng-src={{appleStoreImage}} alt=""></a> <a href={{googleLink}} target=_blank><img ng-src={{googleStoreImage}} alt=""></a></div></li></ul><ul ng-if=$root.isIIP><li><p>As your Advisor, here is what happens next:</p></li><li><p>Your portfolio is pending our review and final selection.</p></li><li><p>We may modify the portfolio recommended when you completed the Questionnaire, and we’ll let you know if we make any changes.</p></li><li><p>Once your account is funded and we have selected your final portfolio, funds will be invested within 3 to 4 business days.</p></li><li><p>Please contact us with any questions.</p></li><li ng-if=showAppStoreLinks><div class=app-store-links><a href={{appleLink}} target=_blank><img ng-src={{appleStoreImage}} alt=""></a> <a href={{googleLink}} target=_blank><img ng-src={{googleStoreImage}} alt=""></a></div></li></ul><div class=button-action-bar data-ng-if=!isBigweb><button type=button class="btn btn-primary btn-sm" ng-click=viewDashboard()>View Dashboard</button></div><div class=button-action-bar data-ng-if=isBigweb><button type=button class="btn btn-primary" ng-click=viewDashboard()>View Dashboard</button></div></div><div class=confirm-section-checkbox ng-if=$root.isSIP><span data-ng-if=promo.receivePromoEnable><input type=checkbox id=confirmSubscribePromotion name=confirmSubscribePromotion data-ng-model="promo.receivePromoFlag"><label for=confirmSubscribePromotion class=checkbox data-ng-click=savePromotionalSettings();><p class=confirmPromoTxt>I am interested in hearing about other products and services offered through Charles Schwab & Co., Inc. and would like to receive a complimentary phone call from a Schwab financial professional.</p></label><div class="text app-store-disclosure" ng-if=showAppStoreLinks>Apple and the Apple logo are trademarks of Apple Inc., registered in the U.S. and other countries. App Store is a service mark of Apple Inc. Google Play is a trademark of Google Inc.</div><div class=text>Schwab financial professionals are employees of Charles Schwab & Co., Inc., Member SIPC, the broker-dealer subsidiary of The Charles Schwab Corporation. Charles Schwab & Co., Inc. and its affiliates offer a complete range of investment services and products including an extensive selection of mutual funds and ETFs, financial planning and investment advice, as well as access to fee-based investment advisors through Schwab Advisor Services.</div></span> <span data-ng-if=!promo.receivePromoEnable><input type=checkbox id=confirmSubscribePromotionDisabled name=confirmSubscribePromotionDisabled data-ng-disabled=true data-ng-checked="true"><label for=confirmSubscribePromotionDisabled class=checkbox><p class=confirmPromoTxt>I am interested in hearing about other products and services offered through Charles Schwab & Co, Inc. and would like to receive a complementary phone call from a Schwab financial professional.</p></label><div class="text app-store-disclosure" ng-if=showAppStoreLinks>Apple and the Apple logo are trademarks of Apple Inc., registered in the U.S. and other countries. App Store is a service mark of Apple Inc. Google Play is a trademark of Google Inc.</div><div class=text>Schwab financial professionals are employees of Charles Schwab & Co., Inc., Member SIPC, the broker-dealer subsidiary of The Charles Schwab Corporation. Charles Schwab & Co., Inc. and its affiliates offer a complete range of investment services and products including an extensive selection of mutual funds and ETFs, financial planning and investment advice, as well as access to fee-based investment advisors through Schwab Advisor Services.</div></span></div><div class=iip-disclosure-container ng-if="$root.isIIP && showAppStoreLinks"><div class="text app-store-disclosure">Apple and the Apple logo are trademarks of Apple Inc., registered in the U.S. and other countries. App Store is a service mark of Apple Inc. Google Play is a trademark of Google Inc.</div></div></hg-page>'),a.put("templates/accountOpen/deposit.html",'<hg-page><hg-page-title class="hidden-xs hidden-sm">Let\'s link to your bank Account</hg-page-title><tabset><tab heading=Funding><form name=depositForm class=form><div class=form-group><label for=accountNumber>Account Number</label><input name=accountNumber class=form-control ng-model=accountNumber required><p ng-show="depositForm.accountNumber.$invalid && !depositForm.accountNumber.$pristine" class=help-block>Please enter valid Account number</p></div><div class=form-group><label for=abaNumber>ABA Number</label><input name=abaNumber class=form-control ng-model=abaNumber required><p ng-show="depositForm.abaNumber.$invalid && !depositForm.abaNumber.$pristine" class=help-block>Please enter valid Account number</p></div><div class=form-group><label for=depositAmount>Deposit Amount</label><input name=depositAmount class=form-control ng-model=depositAmount required><p ng-show="depositForm.depositAmount.$invalid && !depositForm.depositAmount.$pristine" class=help-block>Please enter valid Deposit Amount</p></div><div class=form-group><div class=text-center><a ui-sref=accountopen.agreements><button type=button class="btn btn-default">Back</button></a> <button type=submit ng-click=confirm() class="btn btn-default">Next</button></div></div></form></tab><tab heading=Saving><form name=depositForm class=form><div class=form-group><label for=accountNumber>Account Number</label><input name=accountNumber class=form-control id=accountNumber ng-model=accountNumber required><p ng-show="depositForm.accountNumber.$invalid && !depositForm.accountNumber.$pristine" class=help-block>Please enter valid Account number</p></div><div class=form-group><label for=abaNumber>ABA Number</label><input name=abaNumber class=form-control id=abaNumber ng-model=abaNumber required><p ng-show="depositForm.abaNumber.$invalid && !depositForm.abaNumber.$pristine" class=help-block>Please enter valid Account number</p></div><div class=form-group><label for=depositAmount>Deposit Amount</label><input name=depositAmount class=form-control id=depositAmount ng-model=depositAmount required><p ng-show="depositForm.depositAmount.$invalid && !depositForm.depositAmount.$pristine" class=help-block>Please enter valid Deposit Amount</p></div><div class=button-action-bar><a ui-sref=accountopen.agreements><button type=button class="btn btn-default" asria-label=Back>Back</button></a> <button type=submit ng-click=confirm() class="btn btn-primary" aria-label=Next>Next</button></div></form></tab></tabset></hg-page>'),a.put("templates/accountOpen/emailHardStop.html",'<hg-page bannertext={{accountOpenBannerText}}><hg-page-title>Please validate your email address.</hg-page-title><div ng-init=profileModel()><div class="alert alert-danger" role=alert ng-if="accountApplicationSubmit==true">{{accountApplicationSubmitMsg}}</div><p class=container-padded><span ng-bind-html=emailValidateText></span>If you cannot locate the email, please check your Spam folder.</p><div class=text-center><button type=button ng-click=resendEmail() ng-disabled=resendEmailFlag id=resendEmail class="btn btn-default">Resend Email</button></div><div class=button-action-bar><button type=button class="btn btn-default" aria-label=Back id=resendEmailBack ui-sref=accountopen.agreements>Back</button> <button type=button class="btn btn-primary" aria-label=Next id=resendEmailNext ng-click=validateResendEmail()>Next</button></div></div></hg-page>'),a.put("templates/accountOpen/emailvalidate.html","<hg-page ng-init=emailValidate();><hg-page-title>Thank you for validating your email address.</hg-page-title><hg-page-sub-title>Please close this tab/window to return to the account open process.</hg-page-sub-title></hg-page>"),a.put("templates/accountOpen/emplFinance.html",'<form name=userForm class="form container-padded" novalidate><hg-wizard-page back=backAddress() backlabel=Back next=submitEmpFinanace() nextlabel=Next mobile=$root.isMobile nextdisabled=(userForm.$invalid) bannertext={{accountOpenBannerText}}><hg-page-title ng-if="(jointFlag==false || jointFlag==undefined) && (twoTrusteeFlag==false || twoTrusteeFlag==undefined) && (newAddress.accountType != \'LivingTrust\') && (custodialFlag==false || custodialFlag==undefined)">Please provide additional information about yourself.</hg-page-title><div class="alert alert-danger" role=alert ng-show=userForm.SocialSecurityNumber.$error.existingSSN>We show you are already a Schwab client. Logging in overwrites current work in progress and will retrieve your last saved application, if it exists. Please <a data-ng-click=session.clientSignup()>Login</a> here or call 1-855-694-5208 for assistance.?</div><hg-page-title ng-if="newAddress.accountType == \'LivingTrust\' && (twoTrusteeFlag==false || twoTrusteeFlag==undefined)">Please provide additional information about the trustee.</hg-page-title><hg-page-title ng-if="jointFlag==true">Please provide the following additional information for the second tenant.</hg-page-title><hg-page-title ng-if="twoTrusteeFlag==true">Please provide the following additional information for the second trustee.</hg-page-title><hg-page-title ng-if="custodialFlag==true">Please provide the following additional information for the minor.</hg-page-title><div ng-init=profileModel()><div class="alert alert-danger" role=alert ng-if="duplicateSSN==true">This SSN was provided for the first tenant. Please provide a unique SSN.</div><div class="alert alert-danger" role=alert ng-if="empSingleGrantorFlag==true && twoTrusteeFlag!=true">Please confirm that the trustee is also the grantor of source of funds in the trust Account. This offer is only for clients where the grantor and the trustee are the same person(s).</div><div class="alert alert-danger" role=alert ng-if="empSingleGrantorFlag==true && twoTrusteeFlag==true">Please confirm that at least one of the trustees is also the grantor of source of funds in the trust Account. This offer is only for clients where the grantor and the trustee are the same person(s).</div><div class=form-group ng-class="{ \'has-error\' : userForm.dateOfBirth.$invalid && !userForm.dateOfBirth.$pristine }"><label for=dateOfBirth>Date of Birth</label><input name=dateOfBirth class=form-control id=dateOfBirth ng-model-options="{ updateOn: \'blur\' }" ng-model=newAddress.dateOfBirth mask=dob required validate-date-of-birth placeholder=mm/dd/yyyy ng-change=validateAgeIRAAccounts() ng-disabled="isLoggedIn && (custodialFlag==false || custodialFlag==undefined)"><div role=alert class=help-block ng-show="!userForm.dateOfBirth.$pristine && userForm.dateOfBirth.$invalid"><span ng-show="userForm.dateOfBirth.$invalid && userForm.dateOfBirth.$dirty && (custodialFlag == false || custodialFlag == undefined)">Please enter a valid date of birth.</span> <span ng-show="userForm.dateOfBirth.$invalid && userForm.dateOfBirth.$dirty && custodialFlag == true">Please provide the date of birth for the minor</span></div></div><div class="alert alert-warning" role=alert ng-if="(newAddress.accountSubType==\'Rollover\' || newAddress.accountSubType==\'Tradition\')  && iraWarning==true">To fund a new IRA you will need to transfer assets from an existing retirement account. IRS rules do not allow new IRA contributions to be made in the calendar year in which you turn 70.5 years old. If you do not have an existing retirement account you will not be able to fund this new IRA. Please contact {{$root.customizationInfo.getPhoneDisplay()}} for additional information.</div><div class=form-group ng-class="{ \'has-error\' : userForm.SocialSecurityNumber.$invalid && !userForm.SocialSecurityNumber.$pristine || userForm.SocialSecurityNumber.$error.existingSSN}"><label for=SocialSecurityNumber>Social Security Number</label><input name=SocialSecurityNumber class=form-control ng-maxlength=12 id=SocialSecurityNumber ng-model-options="{ updateOn: \'blur\' }" ng-model=newAddress.socialSecurityNumber mask=ssn ng-change=enrollmentStatusCheck(newAddress.socialSecurityNumber,userForm) required validate-ssn ng-disabled="isLoggedIn && (custodialFlag==false || custodialFlag==undefined)"><div role=alert class=help-block ng-show="!userForm.SocialSecurityNumber.$pristine && userForm.SocialSecurityNumber.$invalid"><span ng-hide=duplicateSSN ng-show="userForm.SocialSecurityNumber.$error.required || userForm.SocialSecurityNumber.$error.validateSsn\r\n                ||userForm.SocialSecurityNumber.$error.maxlength ">Please enter a numerical Social Security Number in the format ###-##-####.</span></div></div><div class=form-group ng-class="{ \'has-error\' : userForm.empStatus.$invalid && !userForm.empStatus.$pristine }"><label for=empStatusId>Employment Status</label><select name=empStatus class=form-control id=empStatusId ng-model=newAddress.employmentStatus data-ng-change=employmentStatusCheck() required><option value="" ng-selected=selected>Choose a status</option><option value=employed>Employed</option><option value="self employed">Self-Employed</option><option value=homemaker>Homemaker</option><option value=retired>Retired</option><option value=student>Student</option><option value=unemployed>Not Employed</option></select><div role=alert class=help-block ng-show="!userForm.empStatus.$pristine && userForm.empStatus.$invalid"><span ng-show=userForm.empStatus.$error.required>Please select employment status.</span></div></div><div class=clear ng-if="newAddress.employmentStatus == \'employed\' || newAddress.employmentStatus == \'self employed\'"><div class=blockBusinessAddress><div class=form-group ng-class="{ \'has-error\' : userForm.employername.$invalid && !userForm.employername.$pristine }"><label for=employername>Employer</label><input name=employername class=form-control id=employername ng-model=newAddress.employername hg-validate-printable-ascii ng-required="newAddress.employmentStatus == \'employed\' || newAddress.employmentStatus == \'self employed\'" ng-model-options="{ updateOn: \'blur\' }" ng-minlength=1 ng-maxlength=30><div role=alert class=help-block ng-show="!userForm.employername.$pristine && userForm.employername.$invalid"><span ng-show="userForm.employername.$error.required || userForm.employername.$error.pattern || userForm.employername.$error.maxlength">Please enter a valid employer name.</span></div></div><div class=form-group ng-class="{ \'has-error\' : userForm.occupation.$invalid && !userForm.occupation.$pristine }"><label for=occupation>Occupation</label><select name=occupation class=form-control id=occupation ng-model=newAddress.occupation hg-validate-printable-ascii data-ng-change=occupationCheck() ng-required="newAddress.employmentStatus == \'employed\' || newAddress.employmentStatus == \'self employed\'"><option value="" ng-selected=selected>Select Occupation</option><option value="BSOWN SELF-EMP">Business Owner/Self-Employed</option><option value="EXECUTIVE/SENIOR MAN">Executive/Senior Management</option><option value="MEDICAL PROFESSIONAL">Medical Professional</option><option value="LEGAL PROFESSIONAL">Legal Professional</option><option value="ACCOUNTING PROF">Accounting Professional</option><option value="FINANCIAL PROFESSION">Financial Services/Banking Professional</option><option value="INFORMATION SYSTEMS">Information Technology Professional</option><option value="OTHER PROFESSIONAL">Other Professional</option><option value="U.S. GOVERNMENT EMPL">U.S. Government Employee (Federal/State/Local)</option><option value="NON-U.S. GOVT EMPL">Foreign Government Employee (Non-U.S.)</option><option value=MILITARY>Military</option><option value=EDUCATOR>Educator</option><option value="CLERICAL OR ADMIN">Clerical/Administrative Services</option><option value="SERVICE WORKER">Trade/Service Career (Labor/Manufacturing/Production)</option><option value="SALES, MARKETING">Sales/Marketing</option><option value=CONSULTANT>Consultant</option><option value=other>Other</option></select><div role=alert class=help-block ng-show="!userForm.occupation.$pristine && userForm.occupation.$invalid"><div ng-show="userForm.occupation.$error.required || userForm.occupation.$error.pattern">Please Select a valid occupation.</div></div></div><div ng-if="newAddress.occupation==\'other\'" class=form-group ng-class="{ \'has-error\' : userForm.occupationOther.$invalid && !userForm.occupationOther.$pristine }"><label for=home>Specify Occupation</label><input name=occupationOther id=occupationOther class=form-control ng-model=newAddress.occupationOther ng-pattern="/^[A-Za-z0-9\\s\\-\'.,!]+$/" ng-model-options="{ updateOn: \'blur\' }" ng-minlength=1 ng-maxlength=20 required><div role=alert class=help-block ng-show="!userForm.occupationOther.$pristine && userForm.occupationOther.$invalid"><div ng-show="userForm.occupationOther.$error.required || userForm.occupationOther.$error.pattern">Please enter a valid occupation.</div><div ng-show=userForm.occupationOther.$error.maxlength>Please use a occupation that is 20 characters or less.</div></div></div><div class=form-group ng-class="{ \'has-error\' : userForm.home.$invalid && !userForm.home.$pristine }"><label for=home>Street address</label><input name=home class=form-control id=home ng-model=newAddress.businessAddressLine1 hg-validate-printable-ascii hg-validate-address ng-required="newAddress.employmentStatus == \'employed\' || newAddress.employmentStatus == \'self employed\'" ng-model-options="{ updateOn: \'blur\' }" ng-minlength=1 ng-maxlength=45><div role=alert class=help-block ng-show="!userForm.home.$pristine && userForm.home.$invalid"><span ng-show="userForm.home.$error.required || userForm.home.$error.hgValidateAddress || userForm.home.$error.pattern || userForm.home.$error.maxlength">Please enter a valid Address.</span> <span ng-show=userForm.home.$error.pobox>We cannot accept P.O. Boxes as a valid legal address.</span></div></div><div class=form-group ng-class="{ \'has-error\' : userForm.AddressLine2.$invalid && !userForm.AddressLine2.$pristine }"><label for=AddressLine2>Street address 2(optional)</label><input name=AddressLine2 class=form-control id=AddressLine2 ng-model=newAddress.businessAddressLine2 ng-minlength=1 ng-maxlength=30 hg-validate-printable-ascii hg-validate-address ng-model-options="{ updateOn: \'blur\' }"><div role=alert class=help-block ng-show="!userForm.AddressLine2.$pristine && userForm.AddressLine2.$invalid"><span ng-show="userForm.AddressLine2.$error.pattern || userForm.AddressLine2.$error.hgValidateAddress || userForm.AddressLine2.$error.maxlength">Please enter a valid Address.</span> <span ng-show=userForm.AddressLine2.$error.pobox>We cannot accept P.O. Boxes as a valid legal address.</span></div></div><div class=form-group ng-class="{ \'has-error\' : userForm.city.$invalid && !userForm.city.$pristine }"><label for=city>City</label><input name=city class=form-control id=city ng-model=newAddress.businessCity ng-required="newAddress.employmentStatus == \'employed\' || newAddress.employmentStatus == \'self employed\'" ng-pattern="/^[A-Za-z0-9\\s\\-\'.,!]+$/" ng-model-options="{ updateOn: \'blur\' }" ng-minlength=1 ng-maxlength=25><div role=alert class=help-block ng-show="!userForm.city.$pristine && userForm.city.$invalid"><span ng-show="userForm.city.$error.required || userForm.city.$error.pattern || userForm.city.$error.maxlength ">Please enter a valid city.</span></div></div><div class=row><div class=col-xs-8><div class=form-group ng-class="{ \'has-error\' : userForm.state.$invalid && !userForm.state.$pristine && userForm.state.$dirty }"><label for=state>State</label><select name=state class=form-control id=state ng-model=newAddress.businessState ng-required="newAddress.employmentStatus == \'employed\' || newAddress.employmentStatus == \'self employed\'" ng-model-options="{ updateOn: \'blur\' }" ng-options="key as value for (key , value) in StateList"><option value="">Select State</option></select><div role=alert class=help-block ng-show="!userForm.state.$pristine && userForm.state.$invalid && userForm.state.$dirty"><span ng-show="userForm.state.$error.required || userForm.state.$error.pattern || userForm.state.$dirty">Please select a state.</span></div></div></div><div class=col-xs-4><div class=form-group ng-class="{ \'has-error\' : userForm.zip.$invalid && !userForm.zip.$pristine }"><label for=zip>Zip Code</label><input type=tel name=zip class=form-control ng-pattern="/^[0-9]{5}$/" ng-maxlength=5 id=zip ng-model=newAddress.businessZipCode ng-required="newAddress.employmentStatus == \'employed\' || newAddress.employmentStatus == \'self employed\'" ng-model-options="{ updateOn: \'blur\' }"><p role=alert ng-show="userForm.zip.$invalid && !userForm.zip.$pristine" class=help-block>Please Enter Valid Zip code</p></div></div></div><div class=form-group ng-class="{ \'has-error\' : userForm.CountryCode.$invalid && !userForm.CountryCode.$pristine }"><label for=CountryCode>Country</label><select name=CountryCode class=form-control id=CountryCode ng-model=newAddress.businessCountryCode><option value=US ng-selected=selected>US</option></select><p role=alert ng-show="userForm.CountryCode.$invalid && !userForm.CountryCode.$pristine" class=help-block>Country is required.</p></div></div></div><div ng-if="newAddress.accountType != \'LivingTrust\' && newAddress.accountType != \'Single Trustee\' && twoTrusteeFlag != true"><div class=form-group ng-class="{ \'has-error\' : userForm.annualIncome.$invalid && !userForm.annualIncome.$pristine }"><label for=annualIncomeId>Annual Income</label><select name=annualIncome class=form-control id=annualIncomeId ng-model=newAddress.annualIncome required><option value="" ng-selected=selected>Select a range</option><option value=1>Less than $15,000</option><option value=15>$15,000 – $24,999</option><option value=25>$25,000 – $49,999</option><option value=50>$50,000 – $99,999</option><option value=100>$100,000 or More</option></select><div role=alert class=help-block ng-show="!userForm.annualIncome.$pristine && userForm.annualIncome.$invalid"><span ng-show=userForm.annualIncome.$error.required>Please select annual income.</span></div></div><div class=form-group ng-class="{ \'has-error\' : userForm.LiqNetWorth.$invalid && !userForm.LiqNetWorth.$pristine }"><label for=LiqNetWorthId>Liquid Net Worth</label><select name=LiqNetWorth class=form-control id=LiqNetWorthId ng-model=newAddress.liquidWorth required><option value="" ng-selected=selected>Select a range</option><option value=1>Less than $25,000</option><option value=25>$25,000 - $49,999</option><option value=50>$50,000 - $99,999</option><option value=100>$100,000 - $249,999</option><option value=250>$250,000 or More</option></select><div role=alert class=help-block ng-show="!userForm.LiqNetWorth.$pristine && userForm.LiqNetWorth.$invalid"><span ng-show=userForm.LiqNetWorth.$error.required>Please select liquid net worth.</span></div></div><div ng-if="newAddress.accountSubType == \'Custodial\' && custodialFlag==true" class=form-group ng-class="{ \'has-error\' : userForm.governingState.$invalid && !userForm.governingState.$pristine }"><label for=governingState>State Law Governing Custodianship</label><select name=governingState class=form-control id=governingState ng-model=newAddress.governingState data-ng-change=getAgeOfTerminationRange(newAddress.governingState) ng-model-options="{ updateOn: \'blur\' }" required ng-options="key as value.STATE for (key , value) in custStateList" ng-disabled="isLoggedIn && (custodialFlag==false || custodialFlag==undefined)"><option value="">Select a State</option></select><div class=help-block ng-show="!userForm.governingState.$pristine && userForm.governingState.$invalid && userForm.governingState.$dirty"><span ng-show="userForm.governingState.$error.required || userForm.governingState.$dirty">Please select a state.</span></div></div><div ng-if="newAddress.accountSubType == \'Custodial\' && custodialFlag==true" class=form-group ng-class="{ \'has-error\' : userForm.ageOfTermination.$invalid && !userForm.ageOfTermination.$pristine }"><label for=ageOfTermination>Age of Termination (varies by state)</label><select name=ageOfTermination class=form-control id=ageOfTermination ng-model=newAddress.ageOfTermination ng-model-options="{ updateOn: \'blur\' }" required ng-options="age for age in ageOfTerminationRange" ng-disabled="isLoggedIn && (custodialFlag==false || custodialFlag==undefined)"><option value="">Select age</option></select><div class=help-block ng-show="!userForm.ageOfTermination.$pristine && userForm.ageOfTermination.$invalid && userForm.ageOfTermination.$dirty"><span ng-show="userForm.ageOfTermination.$error.required || userForm.ageOfTermination.$dirty">Please select age.</span></div></div><div ng-if="newAddress.accountSubType == \'Custodial\' && custodialFlag==true" class=form-group ng-class="{ \'has-error\' : userForm.dateOfTermination.$invalid && !userForm.dateOfTermination.$pristine }"><label for=dateOfTermination>Date of Termination</label><input name=dateOfTermination class=form-control id=dateOfTermination ng-model-options="{ updateOn: \'blur\' }" ng-model=newAddress.dateOfTermination ng-disabled=true required></div></div><div ng-if="newAddress.accountType == \'LivingTrust\' || newAddress.accountType == \'Single Trustee\' || twoTrusteeFlag==true"><div class=form-group><label>Is {{twoTrusteeLabelText}} trustee a grantor on the account?</label><h4>The grantor is the person(s) who created the Revocable Living Trust and who decide(s) who the trustees and beneficiaries are.</h4><div class=checkbox_icon><input type=radio value=true id=trustGrantorSingle name=trustGrantorSingle ng-model="newAddress.trustGrantorSingle"><label for=trustGrantorSingle class=radio>Yes</label></div><div class=checkbox_icon><input type=radio value=false id=trustGrantorSingle1 name=trustGrantorSingle ng-model="newAddress.trustGrantorSingle"><label for=trustGrantorSingle1 class=radio>No</label></div></div><div ng-if="grantorTwoTrusteeDisplayFlag == true"><div class=form-group><label>Is this trustee a grantor on the account?</label><h4>The grantor is the person(s) who created the Revocable Living Trust and who decide(s) who the trustees and beneficiaries are.</h4><div class=checkbox_icon><input type=radio value=true id=trustGrantorTwo name=trustGrantorTwo ng-model="newAddress.trustGrantorTwo"><label for=trustGrantorTwo class=radio>Yes</label></div><div class=checkbox_icon><input type=radio value=false id=trustGrantorTwo1 name=trustGrantorTwo ng-model="newAddress.trustGrantorTwo"><label for=trustGrantorTwo1 class=radio>No</label></div></div></div></div></div></hg-wizard-page></form>'),a.put("templates/accountOpen/equifax-verification.html",'<hg-page bannertext={{accountOpenBannerText}}><hg-page-title>In order to confirm your identity, please answer these questions.</hg-page-title><div ng-init=profileModel()><form name=userForm2 class="form container-padded" novalidate><div ng-repeat="question in equifaxInitialBusinessResponse.Questions" class=form-group><div class=row><div class="col-sm-12 col-md-6 col-md-offset-3 col-lg-offset-2 col-lg-8"><label>{{question.Text}}</label><div ng-repeat="choice in question.Choice"><div class=checkbox_icon><input type=radio name={{question.QuestionNumber}} id={{question.QuestionNumber}}{{choice.ChoiceNumber}} value={{question.QuestionNumber}}_{{choice.ChoiceNumber}} ng-model=question.Response required><label for={{question.QuestionNumber}}{{choice.ChoiceNumber}} class=radio>{{choice.ChoiceText}}</label></div></div><div class=row></div></div></div></div><div class=button-action-bar><button type=button class="btn btn-default" aria-label=Back ng-click=backEquifax()>Back</button> <button type=submit ng-click=submitEquifax() ng-disabled=userForm2.$invalid class="btn btn-primary" aria-label=Next>Next</button></div></form></div></hg-page>'),a.put("templates/accountOpen/identity.html",'<hg-page><hg-page-title class="hidden-xs hidden-sm">Welcome {{getFullName()}}</hg-page-title><form name=userForm class=form><div class=form-group ng-class="{ \'has-error\' : userForm.SocialSecurityNumber.$invalid && !userForm.SocialSecurityNumber.$pristine}"><label for=SocialSecurityNumber>Social Security Number</label><input type=number name=SocialSecurityNumber class=form-control ng-maxlength=9 id=SocialSecurityNumber ng-model=identity.SocialSecurityNumber placeholder="Enter Social Security Number" required><p ng-show="userForm.SocialSecurityNumber.$invalid && !userForm.SocialSecurityNumber.$pristine" class=help-block>Please Enter valid Social Security Number.</p></div><div class=form-group ng-class="{ \'has-error\' : userForm.dateOfBirth.$invalid && !userForm.dateOfBirth.$pristine }"><label for=dateOfBirth>Date of Birth</label><input type=date name=dateOfBirth class=form-control id=dateOfBirth ng-model=identity.dateOfBirth placeholder="Enter Date of Birth" required><p ng-show="userForm.dateOfBirth.$invalid && !userForm.dateOfBirth.$pristine" class=help-block>Your date of birth is required.</p></div><div class=form-group ng-class="{ \'has-error\' : userForm.DrivingLicenceNumber.$invalid && !userForm.DrivingLicenceNumber.$pristine }"><label for=DrivingLicenceNumber>Driver\'s License</label><input name=DrivingLicenceNumber class=form-control id=DrivingLicenceNumber ng-model=identity.DrivingLicenceNumber placeholder="Enter Driver\'s License" required><p ng-show="userForm.DrivingLicenceNumber.$invalid && !userForm.DrivingLicenceNumber.$pristine" class=help-block>Enter a valid driver\'s license.</p></div><div class=button-action-bar><a ng-click=submitIdentity() class="btn btn-default">Next Section</a> <a ng-click=clearForm() ui-sref=root class="btn btn-default">Cancel</a></div></form></hg-page>'),
a.put("templates/accountOpen/invite-second-tenant.html",'<hg-page><div><hg-page-title ng-if="jointFlag==true">Please enter the email address for the second tenant on the account.</hg-page-title><hg-page-title ng-if="twoTrusteeFlag==true">Please enter the email address for second trustee on the account.</hg-page-title><hg-page-sub-title ng-if="jointFlag==true">We will need to invite the second tenant to log into {{$root.product}}s and complete their portion of the application. Please enter their name, email address, and create a four digit PIN they can use to confirm their identity.</hg-page-sub-title><hg-page-sub-title ng-if="twoTrusteeFlag==true">We will need to invite the second trustee to log into {{$root.product}}s and complete their portion of the application. Please enter their name, email address, and create a four digit PIN they can use to confirm their identity</hg-page-sub-title></div><div><form name=userForm class=form novalidate><div class="form-group col-md-12" ng-class="{ \'has-error\' : userForm.SecondTenantEmailAddress.$invalid && !userForm.SecondTenantEmailAddress.$pristine }"><label for=SecondTenantEmailAddress>Email</label><input type=email name=SecondTenantEmailAddress class=form-control id=SecondTenantEmailAddress ng-maxlength=60 ng-model-options="{ updateOn: \'blur\' }" ng-model=newAddress.SecondTenantEmailAddress required validate-email-address=""><div role=alert class=help-block ng-show="!userForm.SecondTenantEmailAddress.$pristine && userForm.SecondTenantEmailAddress.$invalid"><span ng-show="userForm.SecondTenantEmailAddress.$error.required || userForm.SecondTenantEmailAddress.$error.maxlength || userForm.SecondTenantEmailAddress.$error.validateEmailAddress">Please enter a valid email address.</span></div></div><div class="form-group col-md-12" ng-class="{ \'has-error\' : (userForm.confirmSecondTenantEmailAddress.$invalid && !userForm.confirmSecondTenantEmailAddress.$pristine) || (newAddress.confirmSecondTenantEmailAddress.length>\'0\' && newAddress.confirmSecondTenantEmailAddress!=newAddress.SecondTenantEmailAddress)}"><label for=confirmSecondTenantEmailAddress>Confirm Email</label><input type=email name=confirmSecondTenantEmailAddress class=form-control id=confirmSecondTenantEmailAddress ng-maxlength=60 ng-model-options="{ updateOn: \'blur\' }" ng-model=newAddress.confirmSecondTenantEmailAddress required validate-email-address=""><div role=alert class=help-block ng-show="(!userForm.confirmSecondTenantEmailAddress.$pristine && userForm.confirmSecondTenantEmailAddress.$invalid) || (newAddress.confirmSecondTenantEmailAddress.length>\'0\' && newAddress.confirmSecondTenantEmailAddress!=newAddress.SecondTenantEmailAddress)"><span ng-show="userForm.confirmSecondTenantEmailAddress.$error.required || userForm.confirmSecondTenantEmailAddress.$error.maxlength || userForm.confirmSecondTenantEmailAddress.$error.validateEmailAddress">Please enter a valid email address.</span> <span ng-show="!userForm.confirmSecondTenantEmailAddress.$invalid && newAddress.confirmSecondTenantEmailAddress.length>\'0\' && newAddress.confirmSecondTenantEmailAddress!=newAddress.SecondTenantEmailAddress">Please confirm your email address.</span></div></div><div class="form-group col-md-12" ng-class="{ \'has-error\' : userForm.secondTenantPin.$invalid && !userForm.secondTenantPin.$pristine && pinValidityCheck()}"><label for=secondTenantPin>PIN</label><input type=tel name=secondTenantPin class=form-control id=secondTenantPin ng-maxlength=4 ng-model-options="{ updateOn: \'keyup\', allowInvalid: true }" ng-model=newAddress.secondTenantPin ng-pattern="/^[0-9]{4}$/" required><div role=alert class=help-block ng-show="!userForm.secondTenantPin.$pristine && userForm.secondTenantPin.$invalid && pinValidityCheck()">PIN must be four numbers only</div></div><div class=button-action-bar><button type=submit ng-click=inviteSecondTenant() ng-disabled=userForm.$invalid id=profileButton class="btn btn-primary" aria-label=Next>Next</button></div></form><div class=text-center><h5>The email you provide will only be used to facilitate the opening of this account by the second <span ng-if="jointFlag==true">tenant</span><span ng-if="twoTrusteeFlag==true">trustee</span>. We will not use the email provided on this page for marketing purposes.</h5></div></div></hg-page>'),a.put("templates/accountOpen/jointConfirmIdentity.html",'<hg-page><div ng-init=profileModel()><hg-page-title ng-if=$root.isSIP>Thank you for joining Schwab Intelligent Portfolios.</hg-page-title><hg-page-title ng-if=$root.isIIP>Thank you for joining Institutional Intelligent Portfolios.</hg-page-title><div class="alert alert-danger" role=alert ng-if=duplicateCustID ng-bind-html=displayDuplicateCustIDError></div><hg-page-sub-title>Enter the PIN provided to you to complete the account application.</hg-page-sub-title><div class="alert alert-danger" role=alert ng-if="jointConfirmIdentityFlag==true">Please enter valid PIN.</div><form name=userForm class=form><div class=form-group ng-class="{ \'has-error\' : userForm.pin.$invalid && !userForm.pin.$pristine}"><label for=pin class=text-center>PIN</label><input type=tel name=pin id=pin class="form-control center-block text-center" style=width:100px ng-model=newAddress.pin ng-model-options="{ updateOn: \'blur\' }" ng-minlength=4 ng-maxlength=4 maxlength=4 ng-pattern="/^[0-9]{4}$/" required><div class="help-block text-center" ng-show="!userForm.pin.$pristine && userForm.pin.$invalid">PIN must be four numbers only.</div></div><div class=button-action-bar><button type=submit ng-click=jointConfirmIdentity() class="btn btn-default" ng-disabled=userForm.$invalid>Next</button></div></form></div></hg-page>'),a.put("templates/accountOpen/jointThankYou.html","<hg-page><div ng-init=iipSetFirmInfo()><hg-page-title>Thank you.</hg-page-title><p>The <span ng-if=\"jointThankYou=='Trustee'\">second trustee</span><span ng-if=\"jointThankYou=='joint'\">second tenant</span> will now need to access <span ng-if=$root.isIIP>Institutional Intelligent Portfolios</span><span ng-if=$root.isSIP>Schwab Intelligent Portfolios</span> using the email sent to them and the PIN you selected. (Please provide the PIN to them directly on the phone or in person.) Once they have completed their portion of the application, your account will be opened.</p><p>Please be aware that your account application must be completed in the next seven days or you will need to start over.</p><hg-button-group><hg-button ng-click=goHome()>Home</hg-button></hg-button-group></div></hg-page>"),a.put("templates/accountOpen/jointValidateEmail.html","<hg-page><div ng-init=jointValidate()></div></hg-page>"),a.put("templates/accountOpen/legal-address.html",'<form name=userForm class="form container-padded"><hg-wizard-page back=backSecondAddress() backlabel=Back next=submitAddress() nextlabel=Next mobile=$root.isMobile nextdisabled="(userForm.$invalid || newAddress.CitizenShip==\'KN\' || newAddress.CitizenShip==\'CU\')" bannertext={{accountOpenBannerText}}><div class=text-center><hg-page-title ng-if="(jointFlag==false || jointFlag==undefined) && (twoTrusteeFlag==false || twoTrusteeFlag==undefined) && (newAddress.accountType != \'LivingTrust\') && (custodialFlag==false || custodialFlag==undefined)">Please provide your legal address.</hg-page-title><hg-page-title ng-if="newAddress.accountType == \'LivingTrust\' && (twoTrusteeFlag==false || twoTrusteeFlag==undefined)">Please provide the trustee\'s legal address.</hg-page-title><hg-page-title ng-if="jointFlag==true ">Please provide the legal address for the second tenant.</hg-page-title><hg-page-title ng-if="twoTrusteeFlag==true ">Please provide the second trustee\'s legal address.</hg-page-title><hg-page-title ng-if="custodialFlag==true">Please provide the legal address for the minor.</hg-page-title><span ng-if="twoTrusteeFlag==true"><span ng-if=$root.isSIP>We</span> <span ng-if=$root.isIIP>Schwab</span> will use the Primary Trustee\'s address as the address on the account.</span></div><div ng-init=profileModel()><div class=form-group ng-class="{ \'has-error\' : userForm.home.$invalid && !userForm.home.$pristine }"><label for=home>Street Address</label><input name=home class=form-control ng-disabled="isLoggedIn && (custodialFlag==false || custodialFlag==undefined)" id=home ng-model=newAddress.AddressLine1 hg-validate-printable-ascii hg-validate-address ng-model-options="{ updateOn: \'blur\' }" ng-minlength=1 ng-maxlength=45 required><div class=help-block ng-show="!userForm.home.$pristine && userForm.home.$invalid"><span ng-show="userForm.home.$error.required || userForm.home.$error.pattern || userForm.home.$error.hgValidateAddress || userForm.home.$error.maxlength">Please enter a valid address.</span> <span ng-show=userForm.home.$error.pobox>We cannot accept P.O. Boxes as a valid legal address.</span></div></div><div class=form-group ng-class="{ \'has-error\' : userForm.AddressLine2.$invalid && !userForm.AddressLine2.$pristine }"><label for=AddressLine2>Street Address 2 (optional)</label><input name=AddressLine2 class=form-control ng-disabled="isLoggedIn && (custodialFlag==false || custodialFlag==undefined)" id=AddressLine2 ng-model=newAddress.AddressLine2 hg-validate-printable-ascii hg-validate-address ng-model-options="{ updateOn: \'blur\' }" ng-minlength=1 ng-maxlength=30><div class=help-block ng-show="!userForm.AddressLine2.$pristine && userForm.AddressLine2.$invalid"><span ng-show="userForm.AddressLine2.$error.pattern || userForm.AddressLine2.$error.hgValidateAddress || userForm.AddressLine2.$error.maxlength">Please enter a valid address.</span> <span ng-show=userForm.AddressLine2.$error.pobox>We cannot accept P.O. Boxes as a valid legal address.</span></div></div><div class=form-group ng-class="{ \'has-error\' : userForm.city.$invalid && !userForm.city.$pristine }"><label for=city>City</label><input name=city class=form-control ng-disabled="isLoggedIn && (custodialFlag==false || custodialFlag==undefined)" id=city ng-model=newAddress.City ng-pattern="/^[A-Za-z0-9\\s\\-\'.,!=#/]+$/" ng-model-options="{ updateOn: \'blur\' }" ng-minlength=1 ng-maxlength=25 required><div class=help-block ng-show="!userForm.city.$pristine && userForm.city.$invalid"><span ng-show="userForm.city.$error.required || userForm.city.$error.pattern || userForm.city.$error.maxlength">Please enter a valid city.</span></div></div><div class=row><div class=col-xs-8><div class=form-group ng-class="{ \'has-error\' : userForm.state.$invalid && !userForm.state.$pristine }"><label for=state>State</label><select name=state class=form-control id=state ng-model=newAddress.State ng-model-options="{ updateOn: \'blur\' }" required data-ng-change=selectGoverningState() ng-options="key as value for (key , value) in StateList" ng-disabled="isLoggedIn && (custodialFlag==false || custodialFlag==undefined)"><option value="">Select State</option></select><div class=help-block ng-show="!userForm.state.$pristine && userForm.state.$invalid && userForm.state.$dirty"><span ng-show="userForm.state.$error.required || userForm.state.$dirty">Please select a state.</span></div></div></div><div class=col-xs-4><div class=form-group ng-class="{ \'has-error\' : userForm.zip.$invalid && !userForm.zip.$pristine }"><label for=zip>ZIP Code:</label><input type=tel name=zip class=form-control ng-pattern="/^[0-9]{5}$/" ng-model-options="{ updateOn: \'blur\' }" ng-maxlength=5 id=zip ng-model=newAddress.ZipCode ng-disabled="isLoggedIn && (custodialFlag==false || custodialFlag==undefined)" required><p ng-show="userForm.zip.$invalid && !userForm.zip.$pristine" class=help-block>Please enter a valid zip code.</p></div></div></div><div class=form-group ng-class="{ \'has-error\' : userForm.CountryCode.$invalid && !userForm.CountryCode.$pristine }"><label for=CountryCode>Country</label><select name=CountryCode class=form-control ng-disabled="isLoggedIn && (custodialFlag==false || custodialFlag==undefined)" id=CountryCode ng-init="newAddress.CountryCode=\'US\'" ng-model=newAddress.CountryCode><option value=US selected=selected>United States</option></select><div class=help-block ng-show="!userForm.CountryCode.$pristine && userForm.CountryCode.$invalid && userForm.CountryCode.$dirty"><span ng-show="userForm.CountryCode.$error.required || userForm.CountryCode.$dirty">Please select a country.</span></div></div><div class=form-group ng-class="{ \'has-error\' : userForm.CitizenShip.$invalid && !userForm.CitizenShip.$pristine }"><label for=CitizenShip>Your Citizenship</label><select name=CitizenShip class=form-control ng-disabled=isCitizenShipFieldDisabled() id=CitizenShip ng-model=newAddress.CitizenShip ng-model-options="{ updateOn: \'blur\' }" required ng-options="key as value for (key , value) in CountriesList"><option value="">Select Country</option></select><div class=help-block ng-show="!userForm.CitizenShip.$pristine && userForm.CitizenShip.$invalid && userForm.CitizenShip.$dirty"><span ng-show="userForm.CitizenShip.$error.required || userForm.CitizenShip.$dirty">Please select a citizenship.</span></div></div><div class="alert alert-warning" ng-if="newAddress.CitizenShip==\'KN\' || newAddress.CitizenShip==\'CU\'">We are unable to open a Mercury account for your country of citizenship.</div><div class="form-group clear" ng-class="{ \'has-error\' : userForm.homePhone.$invalid && !userForm.homePhone.$pristine }"><label for=homePhone>Home Phone Number</label><input type=tel name=homePhone class=form-control ng-disabled="isLoggedIn && (custodialFlag==false || custodialFlag==undefined)" id=homePhone ng-model=newAddress.HomePhone ng-model-options="{ updateOn: \'blur\' }" ng-change=isPhoneRequired() placeholder=xxx-xxx-xxxx validate-phone-number ng-required=phoneRequirement><div class=help-block ng-show=userForm.homePhone.$error.validatePhoneNumber>Please enter a valid phone number.</div></div><div class=form-group ng-class="{ \'has-error\' : userForm.mobilePhone.$invalid && !userForm.mobilePhone.$pristine }"><label for=mobilePhone>Mobile Phone Number</label><input type=tel name=mobilePhone class=form-control ng-disabled="isLoggedIn && (custodialFlag==false || custodialFlag==undefined)" id=mobilePhone ng-model=newAddress.MobilePhone ng-model-options="{ updateOn: \'blur\' }" ng-change=isPhoneRequired() placeholder=xxx-xxx-xxxx validate-phone-number ng-required=phoneRequirement><div class=help-block ng-show=userForm.mobilePhone.$error.validatePhoneNumber>Please enter a valid phone number.</div></div><div class=row><div class=col-xs-8><div class=form-group ng-class="{ \'has-error\' : userForm.businessPhone.$invalid && !userForm.businessPhone.$pristine }"><label for=businessPhone>Business Phone Number (optional)</label><input type=tel name=businessPhone class=form-control ng-disabled="isLoggedIn && (custodialFlag==false || custodialFlag==undefined)" id=businessPhone ng-model=newAddress.BusinessPhone ng-model-options="{ updateOn: \'blur\' }" ng-change=isPhoneRequired() placeholder=xxx-xxx-xxxx validate-phone-number ng-required=newAddress.businessExt.length><div ng-show="userForm.businessPhone.$invalid && !userForm.businessPhone.$pristine" class=help-block><span class=help-block ng-show=userForm.businessPhone.$error.validatePhoneNumber>Please enter a valid phone number.</span></div></div><div class=help-block><span class=help-block ng-show=userForm.businessPhone.$error.required>Please enter a valid business phone number.</span></div></div><div class=col-xs-4><div class=form-group ng-class="{ \'has-error\' : userForm.businessExt.$invalid && !userForm.businessExt.$pristine }"><label for=businessExt>Ext. (optional)</label><input name=businessExt class=form-control ng-disabled="isLoggedIn && (custodialFlag==false || custodialFlag==undefined)" ng-pattern="/^[0-9]+$/" ng-model-options="{ updateOn: \'blur\' }" id=businessExt ng-maxlength=5 ng-model=newAddress.businessExt><div class=help-block ng-show="!userForm.businessExt.$pristine && userForm.businessExt.$invalid"><span ng-show="userForm.businessExt.$error.pattern || userForm.businessExt.$invalid">Please enter a valid Ext.</span></div></div></div></div><div class=row ng-if="(custodialFlag==false || custodialFlag==undefined)"><div class="col-xs-2 col-sm-1 col-md-1"><input type=checkbox value=None id=squaredOne2 name=check ng-disabled="isLoggedIn && (custodialFlag==false || custodialFlag==undefined)" ng-model="newAddress.addAddress"><label for=squaredOne2 class="checkbox checkbox-example"></label></div><div class="text col-xs-10 col-md-11 col-sm-11 padding-left-0">My mailing address is different than my legal address.</div></div><div class=row ng-if="(custodialFlag==false || custodialFlag==undefined)"><div class="col-xs-2 col-sm-1 col-md-1"><input type=checkbox value=None id=squaredOne3 name=check ng-disabled="isLoggedIn && (custodialFlag==false || custodialFlag==undefined)" ng-model="newAddress.oldAddress"><label for=squaredOne3 class="checkbox checkbox-example"></label></div><div class="text col-xs-10 col-md-11 col-sm-11 padding-left-0">I have changed my home address in the past six months.</div></div><div class=clear ng-show="newAddress.oldAddress==true"><div class=form-group ng-class="{ \'has-error\' : userForm.oldAddressLine1.$invalid && !userForm.oldAddressLine1.$pristine }"><label for=oldAddressLine1>Street Address</label><input name=oldAddressLine1 class=form-control id=oldAddressLine1 hg-validate-printable-ascii hg-validate-address ng-model=newAddress.oldAddressLine1 ng-required="newAddress.oldAddress==true" ng-model-options="{ updateOn: \'blur\' }" ng-minlength=1 ng-maxlength=45 ng-disabled="isLoggedIn && (custodialFlag==false || custodialFlag==undefined)"><div class=help-block ng-show="!userForm.oldAddressLine1.$pristine && userForm.oldAddressLine1.$invalid"><span ng-show="userForm.oldAddressLine1.$error.required || userForm.oldAddressLine1.$error.hgValidateAddress ||\r\n                                    userForm.oldAddressLine1.$error.pattern || userForm.oldAddressLine1.$error.maxlength">Please enter a valid address.</span> <span ng-show=userForm.oldAddressLine1.$error.pobox>We cannot accept P.O. Boxes as a valid legal address.</span></div></div><div class=form-group ng-class="{ \'has-error\' : userForm.oldAddressLine2.$invalid && !userForm.oldAddressLine2.$pristine }"><label for=oldAddressLine2>Street Address 2 (optional)</label><input name=oldAddressLine2 class=form-control id=oldAddressLine2 hg-validate-printable-ascii hg-validate-address ng-model-options="{ updateOn: \'blur\' }" ng-minlength=1 ng-maxlength=30 ng-model=newAddress.oldAddressLine2 ng-disabled="isLoggedIn && (custodialFlag==false || custodialFlag==undefined)"><div class=help-block ng-show="!userForm.oldAddressLine2.$pristine && userForm.oldAddressLine2.$invalid"><span ng-show="userForm.oldAddressLine2.$error.pattern || userForm.oldAddressLine2.$error.hgValidateAddress || userForm.oldAddressLine2.$error.maxlength">Please enter a valid address.</span> <span ng-show=userForm.oldAddressLine2.$error.pobox>We cannot accept P.O. Boxes as a valid legal address.</span></div></div><div class=form-group ng-class="{ \'has-error\' : userForm.oldCity.$invalid && !userForm.oldCity.$pristine }"><label for=oldCity>City</label><input name=oldCity class=form-control id=oldCity ng-model=newAddress.oldCity ng-pattern="/^[A-Za-z0-9\\s\\-\'.,!]+$/" ng-required="newAddress.oldAddress==true" ng-model-options="{ updateOn: \'blur\' }" ng-minlength=1 ng-maxlength=25 ng-disabled="isLoggedIn && (custodialFlag==false || custodialFlag==undefined)"><div class=help-block ng-show="!userForm.oldCity.$pristine && userForm.oldCity.$invalid"><span ng-show="userForm.oldCity.$error.required || userForm.oldCity.$error.pattern || userForm.oldCity.$error.maxlength">Please enter a valid address.</span></div></div><div class=row><div class=col-xs-8><div class=form-group ng-class="{ \'has-error\' : userForm.oldState.$invalid && !userForm.oldState.$pristine }"><label for=oldState>State</label><select name=oldState class=form-control id=oldState ng-model=newAddress.oldState ng-required="newAddress.oldAddress==true" ng-model-options="{ updateOn: \'blur\' }" ng-options="key as value for (key , value) in StateList" ng-disabled="isLoggedIn && (custodialFlag==false || custodialFlag==undefined)"><option value="">Select State</option></select><div class=help-block ng-show="!userForm.oldState.$pristine && userForm.oldState.$invalid && userForm.oldState.$dirty"><span ng-show="userForm.oldState.$error.required || userForm.oldState.$error.pattern || userForm.oldState.$dirty">Please select a state.</span></div></div></div><div class=col-xs-4><div class=form-group ng-class="{ \'has-error\' : userForm.oldZipCode.$invalid && !userForm.oldZipCode.$pristine }"><label for=oldZipCode>Zip Code</label><input type=tel name=oldZipCode class=form-control ng-pattern="/^[0-9]{5}$/" ng-maxlength=5 ng-model-options="{ updateOn: \'blur\' }" id=oldZipCode ng-model=newAddress.oldZipCode ng-disabled="isLoggedIn && (custodialFlag==false || custodialFlag==undefined)"><p ng-show="userForm.oldZipCode.$invalid && !userForm.oldZipCode.$pristine" class=help-block>Please Enter Valid Zip code</p></div></div></div><div class=form-group ng-class="{ \'has-error\' : userForm.oldCountryCode.$invalid && !userForm.oldCountryCode.$pristine }"><label for=oldCountryCode>Country</label><select name=oldCountryCode class=form-control ng-disabled="isLoggedIn && (custodialFlag==false || custodialFlag==undefined)" ng-init="newAddress.oldCountryCode=\'US\'" id=oldCountryCode ng-model=newAddress.oldCountryCode><option value=US selected=selected>United States</option></select></div></div></div></hg-wizard-page></form>'),a.put("templates/accountOpen/livingTrust.html",'<hg-page bannertext={{accountOpenBannerText}}><hg-page-title>Please provide the following information about your Revocable Living Trust.</hg-page-title><div ng-init=profileModel()><form name=userForm class="form container-padded"><div class=form-group ng-class="{ \'has-error\' : userForm.trustName.$invalid && !userForm.trustName.$pristine }"><label for=trustName>Legal Name of Trust</label><h4>This field has a maximum length of 60 characters. If your trust name is longer than that, please provide the first part of the trust name.</h4><input name=trustName class=form-control id=trustName ng-model=newAddress.trustName ng-model-options="{ updateOn: \'blur\' }" ng-minlength=1 maxlength=60 required ng-pattern="/^([A-Za-z0-9\\s\\-\',!&\\\\\\/]+\\s?\\.?)+$/"><div class=help-block ng-show="!userForm.trustName.$pristine && userForm.trustName.$invalid"><span ng-show="userForm.trustName.$error.required || userForm.trustName.$error.pattern || userForm.trustName.$error.maxlength">Please enter a valid trust name.</span></div></div><div class=form-group ng-class="{ \'has-error\' : userForm.trustDate.$invalid && !userForm.trustDate.$pristine }"><label for=trustDate>Date of Trust</label><input name=trustDate class=form-control id=trustDate ng-model=newAddress.trustDate ng-model-options="{ updateOn: \'blur\' }" placeholder=mm/dd/yyyy required validate-today-date><div class=help-block ng-show="!userForm.trustDate.$pristine && userForm.trustDate.$invalid"><span ng-show="userForm.trustDate.$error.required || userForm.trustDate.$error.validateTodayDate">Please enter a valid date in the format mm/dd/yyyy.</span></div></div><div class=form-group ng-class="{ \'has-error\' : userForm.trustITIN.$invalid && !userForm.trustITIN.$pristine }"><label for=trustITIN>Trust Tax ID Number</label><input name=trustITIN class=form-control id=trustITIN ng-model=newAddress.trustITIN ng-model-options="{ updateOn: \'blur\' }" required validate-ssn><div class=help-block ng-show="!userForm.trustITIN.$pristine && userForm.trustITIN.$invalid"><span ng-show="userForm.trustITIN.$error.required   || userForm.trustITIN.$error.validateSsn">Please enter a numerical tax id in the format of ##-#######.</span></div></div><div class=form-group ng-class="{ \'has-error\' : userForm.trustState.$invalid && !userForm.trustState.$pristine }"><label for=trustState>Trust is governed by laws of the state</label><select name=trustState class=form-control id=trustState ng-model=newAddress.trustState ng-model-options="{ updateOn: \'blur\' }" required ng-options="key as value for (key , value) in StateList"><option value="">Select State</option></select><div class=help-block ng-show="!userForm.trustState.$pristine && userForm.trustState.$invalid && userForm.trustState.$dirty"><span ng-show="userForm.trustState.$error.required || userForm.trustState.$dirty">Please select a state.</span></div></div><div class=form-group><label>Has the original Trust Agreement been amended or restated?</label><div class=checkbox_icon><input type=radio value=Yes id=trustAgreement name=trustAgreement ng-model=newAddress.trustAgreement required><label for=trustAgreement class=radio>Yes</label></div><div class=checkbox_icon><input type=radio value=No id=trustAgreement1 name=trustAgreement ng-model=newAddress.trustAgreement required><label for=trustAgreement1 class=radio>No</label></div></div><div ng-if="newAddress.trustAgreement==\'Yes\'"><div class=form-group ng-class="{ \'has-error\' : userForm.trustAmendment.$invalid && !userForm.trustAmendment.$pristine }"><label for=trustAmendment>Most recent amendment date</label><input name=trustAmendment class=form-control id=trustAmendment ng-model=newAddress.trustAmendment ng-model-options="{ updateOn: \'blur\' }" ng-required="!(newAddress.trustAmendment.length || newAddress.trustRestatement.length )" placeholder=mm/dd/yyyy validate-today-date><div class=help-block ng-show="!userForm.trustAmendment.$pristine && userForm.trustAmendment.$invalid"><span ng-show="userForm.trustAmendment.$error.required || userForm.trustAmendment.$error.validateTodayDate">Please enter a valid date in the format mm/dd/yyyy.</span></div></div><div class=form-group ng-class="{ \'has-error\' : userForm.trustRestatement.$invalid && !userForm.trustRestatement.$pristine }"><label for=trustRestatement>Most recent restatement date</label><input name=trustRestatement class=form-control id=trustRestatement ng-model=newAddress.trustRestatement ng-model-options="{ updateOn: \'blur\' }" placeholder=mm/dd/yyyy validate-today-date ng-required="!(newAddress.trustAmendment.length || newAddress.trustRestatement.length )"><div class=help-block ng-show="!userForm.trustRestatement.$pristine && userForm.trustRestatement.$invalid"><span ng-show="userForm.trustRestatement.$error.required || userForm.trustRestatement.$error.validateTodayDate">Please enter a valid date in the format mm/dd/yyyy.</span></div></div></div><div class=form-group ng-class="{ \'has-error\' : userForm.annualIncome.$invalid && !userForm.annualIncome.$pristine }"><label for=annualIncomeId>Annual Income of Trust</label><select name=annualIncome class=form-control id=annualIncomeId ng-model=newAddress.annualIncomeLivingTrust required><option value="" ng-selected=selected>Select a range</option><option value=1>Less than $15,000</option><option value=15>$15,000 – $24,999</option><option value=25>$25,000 – $49,999</option><option value=50>$50,000 – $99,999</option><option value=100>$100,000 or More</option></select><div class=help-block ng-show="!userForm.annualIncome.$pristine && userForm.annualIncome.$invalid"><span ng-show=userForm.annualIncome.$error.required>Please select annual income.</span></div></div><div class=form-group ng-class="{ \'has-error\' : userForm.LiqNetWorth.$invalid && !userForm.LiqNetWorth.$pristine }"><label for=LiqNetWorthId>Liquid Net Worth of Trust</label><select name=LiqNetWorth class=form-control id=LiqNetWorthId ng-model=newAddress.liquidWorthLivingTrust required><option value="" ng-selected=selected>Select a range</option><option value=1>Less than $25,000</option><option value=25>$25,000 - $49,999</option><option value=50>$50,000 - $99,999</option><option value=100>$100,000 - $249,999</option><option value=250>$250,000 or More</option></select><div class=help-block ng-show="!userForm.LiqNetWorth.$pristine && userForm.LiqNetWorth.$invalid"><span ng-show=userForm.LiqNetWorth.$error.required>Please select liquid net worth.</span></div></div><div class=button-action-bar><a ui-sref=accountopen.profile class="btn btn-default">Back</a> <button type=submit ng-click=next() class="btn btn-primary" ng-disabled=userForm.$invalid aria-label=Next>Next</button></div></form></div></hg-page>'),a.put("templates/accountOpen/livingTrustAdditionalnfo.html",'<hg-page bannertext={{accountOpenBannerText}}><hg-page-title>Please provide the following information about your account.</hg-page-title><div ng-init=profileModel()><form name=userForm class="form container-padded"><section><h2 class=first>Source of Funds <span ng-if="newAddress.accountType==\'LivingTrust\'">in Trust Account</span> (Please check all that apply.)</h2><div class=panel-group id=brokerageAccordion><div class="panel panel-default"><div class=panel-heading><div class=panel-title><input type=checkbox name=trustSource value=SALWAGES id=trustSource ng-model=newAddress.trustSourceSalary ng-required=!isTrustSourceSelected()><label for=trustSource class=checkbox tabindex=0>Salary, wages, savings</label></div></div></div><div class="panel panel-default"><div class=panel-heading><div class=panel-title><input type=checkbox name=trustSource5 value=SocialSecurity id=trustSource5 ng-model=newAddress.trustSourceSocialSecurity ng-required=!isTrustSourceSelected()><label for=trustSource5 class=checkbox tabindex=0>Social Security Benefits</label></div></div></div><div class="panel panel-default"><div class=panel-heading><div class=panel-title><input type=checkbox name=trustSource3 value=PROPSALE id=trustSource3 ng-model=newAddress.trustSourceRealEstate ng-required=!isTrustSourceSelected()><label for=trustSource3 class=checkbox tabindex=0>Sale of Property or Business</label></div></div></div><div class="panel panel-default"><div class=panel-heading><div class=panel-title><input type=checkbox name=trustSource2 value=FAMLYRLT id=trustSource2 ng-model=newAddress.trustSourceFamily ng-required=!isTrustSourceSelected()><label for=trustSource2 class=checkbox tabindex=0>Family, relatives, inheritance</label></div></div></div><div class="panel panel-default"><div class=panel-heading><div class=panel-title><input type=checkbox name=trustSource1 value=INVSTCAP id=trustSource1 ng-model=newAddress.trustSourceInvestment ng-required=!isTrustSourceSelected()><label for=trustSource1 class=checkbox tabindex=0>Investment capital gains</label></div></div></div><div class="panel panel-default"><div class=panel-heading><div class=panel-title><input type=checkbox name=trustSource6 value=Gifts id=trustSource6 ng-model=newAddress.trustSourceGifts ng-required=!isTrustSourceSelected()><label for=trustSource6 class=checkbox tabindex=0>Gifts</label></div></div></div><div class="panel panel-default"><div class=panel-heading><div class=panel-title><input type=checkbox name=trustSource7 value=Gambling id=trustSource7 ng-model=newAddress.trustSourceGambling ng-required=!isTrustSourceSelected()><label for=trustSource7 class=checkbox tabindex=0>Gambling, Lottery</label></div></div></div><div class="panel panel-default"><div class=panel-heading><div class=panel-title><input type=checkbox name=trustSource4 value=OTHER id=trustSource4 ng-model=newAddress.trustSourceOther ng-required=!isTrustSourceSelected()><label for=trustSource4 class=checkbox tabindex=0>Other</label></div><div ng-if="newAddress.trustSourceOther==true"><div class=form-group ng-class="{ \'has-error\' : userForm.trustSourceOther.$invalid && !userForm.trustSourceOther.$pristine }"><input name=trustSourceOther class=form-control id=trustSourceOther ng-model=newAddress.trustSourceOtherText ng-model-options="{ updateOn: \'blur\' }" ng-minlength=1 ng-maxlength=30 placeholder="Please Specify" required ng-pattern="/^[A-Za-z0-9\\s\\-\'.,!]+$/"><div class=help-block ng-show="!userForm.trustSourceOther.$pristine && userForm.trustSourceOther.$invalid"><span ng-show="userForm.trustSourceOther.$error.required || userForm.trustSourceOther.$error.pattern  || userForm.trustSourceOther.$error.maxlength">Please enter a valid Other field.</span></div></div></div></div></div></div></section><div class=form-group style="padding-top: 30px"><section><h2 class=first>Purpose of Account</h2><div class=panel-group id=brokerageAccordion><div ng-if="newAddress.accountType==\'S1\'"><div class="panel panel-default"><div class=panel-heading><div class=panel-title><input type=checkbox name=trustPurpose value=IT id=trustPurpose ng-model=newAddress.trustPurposeAssets ng-required=!isTrustPurposeSelected()><label for=trustPurpose class=checkbox tabindex=0>General Investing Assets</label></div></div></div><div class="panel panel-default"><div class=panel-heading><div class=panel-title><input type=checkbox name=trustPurpose value=PE id=trustPurpose1 ng-model=newAddress.trustPurposeExpense ng-required=!isTrustPurposeSelected()><label for=trustPurpose1 class=checkbox tabindex=0>Investing for Estate Planning</label></div></div></div><div class="panel panel-default"><div class=panel-heading><div class=panel-title><input type=checkbox name=trustPurpose value=PC id=trustPurpose2 ng-model=newAddress.trustPurposeCompensation ng-required=!isTrustPurposeSelected()><label for=trustPurpose2 class=checkbox tabindex=0>Investing for Tax Planning</label></div></div></div><div class="panel panel-default"><div class=panel-heading><div class=panel-title><input type=checkbox name=trustPurpose value=DT id=trustPurpose3 ng-model=newAddress.trustPurposeDistribution ng-required=!isTrustPurposeSelected()><label for=trustPurpose3 class=checkbox tabindex=0>Investing for College</label></div></div></div><div class="panel panel-default"><div class=panel-heading><div class=panel-title><input type=checkbox name=trustPurpose value=PA id=trustPurpose4 ng-model=newAddress.trustPurposePool ng-required=!isTrustPurposeSelected()><label for=trustPurpose4 class=checkbox tabindex=0>Investing for Retirement</label></div></div></div><div class="panel panel-default"><div class=panel-heading><div class=panel-title><input type=checkbox name=trustPurpose value=TB id=trustPurpose5 ng-model=newAddress.trustPurposeTax ng-required=!isTrustPurposeSelected()><label for=trustPurpose5 class=checkbox tabindex=0>Investment of Pooled Assets</label></div></div></div><div class="panel panel-default"><div class=panel-heading><div class=panel-title><input type=checkbox name=trustPurpose value=OT id=trustPurpose6 ng-model=newAddress.trustPurposeOT ng-required=!isTrustPurposeSelected()><label for=trustPurpose6 class=checkbox tabindex=0>Other</label></div><div ng-if="newAddress.trustPurposeOT==true"><div class=form-group ng-class="{ \'has-error\' : userForm.trustPurposeOther.$invalid && !userForm.trustPurposeOther.$pristine }"><input name=trustPurposeOther class=form-control id=trustPurposeOther ng-model=newAddress.trustPurposeOther ng-model-options="{ updateOn: \'blur\' }" ng-minlength=1 ng-maxlength=30 placeholder="Please Specify" required ng-pattern="/^[A-Za-z0-9\\s\\-\'.,!]+$/"><div class=help-block ng-show="!userForm.trustPurposeOther.$pristine && userForm.trustPurposeOther.$invalid"><span ng-show="userForm.trustPurposeOther.$error.required || userForm.trustPurposeOther.$error.pattern  || userForm.trustPurposeOther.$error.maxlength">Please enter a valid Other field.</span></div></div></div></div></div></div><div ng-if="newAddress.accountType==\'LivingTrust\'"><div class="panel panel-default"><div class=panel-heading><div class=panel-title><input type=checkbox name=trustPurpose value=Investing id=trustPurpose7 ng-model=newAddress.trustInvestingAssets ng-required=!isTrustPurposeSelected()><label for=trustPurpose7 class=checkbox tabindex=0>Investing of Trust Assets</label></div></div></div><div class="panel panel-default"><div class=panel-heading><div class=panel-title><input type=checkbox name=trustPurpose value=Payment id=trustPurpose8 ng-model=newAddress.trustPaymentExpenses ng-required=!isTrustPurposeSelected()><label for=trustPurpose8 class=checkbox tabindex=0>Payment of Trust Expenses</label></div></div></div><div class="panel panel-default"><div class=panel-heading><div class=panel-title><input type=checkbox name=trustPurpose value=PaymentCompensation id=trustPurpose9 ng-model=newAddress.trustPaymentCompensation ng-required=!isTrustPurposeSelected()><label for=trustPurpose9 class=checkbox tabindex=0>Payment of Trustee Compensation</label></div></div></div><div class="panel panel-default"><div class=panel-heading><div class=panel-title><input type=checkbox name=trustPurpose value=DistributionAssets id=trustPurpose10 ng-model=newAddress.trustDistributionAssets ng-required=!isTrustPurposeSelected()><label for=trustPurpose10 class=checkbox tabindex=0>Distribution of Trust Assets</label></div></div></div><div class="panel panel-default"><div class=panel-heading><div class=panel-title><input type=checkbox name=trustPurpose value=InvestingPooledAssets id=trustPurpose11 ng-model=newAddress.trustInvestingPooledAssets ng-required=!isTrustPurposeSelected()><label for=trustPurpose11 class=checkbox tabindex=0>Investing of Pooled Assets</label></div></div></div><div class="panel panel-default"><div class=panel-heading><div class=panel-title><input type=checkbox name=trustPurpose value=InvestingTaxBenefits id=trustPurpose12 ng-model=newAddress.trustInvestingTaxBenefits ng-required=!isTrustPurposeSelected()><label for=trustPurpose12 class=checkbox tabindex=0>Investing for Tax Benefits</label></div></div></div><div class="panel panel-default"><div class=panel-heading><div class=panel-title><input type=checkbox name=trustPurpose value=OT id=trustPurpose6 ng-model=newAddress.trustPurposeOT ng-required=!isTrustPurposeSelected()><label for=trustPurpose6 class=checkbox tabindex=0>Other</label></div><div ng-if="newAddress.trustPurposeOT==true"><div class=form-group ng-class="{ \'has-error\' : userForm.trustPurposeOther.$invalid && !userForm.trustPurposeOther.$pristine }"><input name=trustPurposeOther class=form-control id=trustPurposeOther ng-model=newAddress.trustPurposeOther ng-model-options="{ updateOn: \'blur\' }" ng-minlength=1 ng-maxlength=30 placeholder="Please Specify" required ng-pattern="/^[A-Za-z0-9\\s\\-\'.,!]+$/"><div class=help-block ng-show="!userForm.trustPurposeOther.$pristine && userForm.trustPurposeOther.$invalid"><span ng-show="userForm.trustPurposeOther.$error.required || userForm.trustPurposeOther.$error.pattern  || userForm.trustPurposeOther.$error.maxlength">Please enter a valid Other field.</span></div></div></div></div></div></div></div></section><div class=button-action-bar><button type=button class="btn btn-default" aria-label=Back ng-click=previous()>Back</button> <button type=submit class="btn btn-primary" ng-disabled=userForm.$invalid aria-label=Next ng-click=next()>Next</button></div></div></form></div></hg-page>'),
a.put("templates/accountOpen/livingTrustAgreements.html",'<hg-page bannertext={{accountOpenBannerText}}><hg-page-title>Each Trustee must confirm acceptance of the terms and conditions of this Trustee Certification ("Certification") by clicking the checkboxes.</hg-page-title><div class=agreement ng-init=profileModel()><div class=hg-agreement><form name=userForm class="form container-padded" novalidate><div class=panel-group bs-collapse><div class=subAgreement><div class="panel panel-default"><div class=panel-heading><div class="panel-title row"><div class=padding-right-0 ng-class="{ \'col-xs-1\' : isDesktop === true,\'col-xs-2\' : isDesktop === false}"><input ng-if="!livingTrustAgreementOne.open && newAddress.livingTrustAgreementOne==undefined" type=checkbox ng-model=newAddress.livingTrustAgreementOne ng-disabled=true ng-click="checkboxAccordianClick($event,\'livingTrustAgreementOne\',newAddress.livingTrustAgreementOne,livingTrustAgreementOne)" id=checkbox6 name=checkbox3 value=checkbox3 required> <input ng-if="!livingTrustAgreementOne.open && newAddress.livingTrustAgreementOne==false" type=checkbox ng-model=newAddress.livingTrustAgreementOne ng-click="checkboxAccordianClick($event,\'livingTrustAgreementOne\',newAddress.livingTrustAgreementOne,livingTrustAgreementOne)" id=checkbox6 required> <input ng-if="!livingTrustAgreementOne.open && newAddress.livingTrustAgreementOne==true" type=checkbox ng-model=newAddress.livingTrustAgreementOne ng-click="checkboxAccordianClick($event,\'livingTrustAgreementOne\',newAddress.livingTrustAgreementOne,livingTrustAgreementOne)" id=checkbox6 required> <input ng-if=livingTrustAgreementOne.open type=checkbox ng-model=newAddress.livingTrustAgreementOne ng-click="checkboxClick($event);checkboxAccordianClick($event,\'livingTrustAgreementOne\',newAddress.livingTrustAgreementOne,livingTrustAgreementOne)" id=checkbox6 required><label id=checkboxLabel6 for=checkbox6 class="checkbox checkbox-example testcheckbox" ng-click="checkboxAccordianClick($event,\'livingTrustAgreementOne\',newAddress.livingTrustAgreementOne,livingTrustAgreementOne)"></label></div><div class="agreement-title text" ng-class="{ \'col-xs-10\' : isDesktop === true,\'col-xs-9\' : isDesktop === false}" bs-collapse-toggle ng-click="toggleElem(\'livingTrustAgreementOne\',livingTrustAgreementOne.open)">Section 1 - Authority, Ownership and Control Over Trust Assets</div><div class="col-xs-1 padding-0" bs-collapse-toggle ng-click="toggleElem(\'livingTrustAgreementOne\',livingTrustAgreementOne.open)"><i class="fa fa-plus" ng-if="livingTrustAgreementOne.open==false || livingTrustAgreementOne.open==undefined"></i> <i class="fa fa-minus" ng-if="livingTrustAgreementOne.open==true"></i></div></div></div><div class=panel-collapse ng-class="{\'collapse am-collapse in\':livingTrustAgreementOne.open === true,\'collapse am-collapse\':livingTrustAgreementOne.open === false||livingTrustAgreementOne.open === undefined}"><div class=panel-body><div class=row><div class=col-xs-1>&nbsp;</div><div class=col-xs-11><div class="panel-agreement-content text"><hg-remote-asset hg-asset-id="SIP-ENROLLMENT-TRUSTEE-CERTIFICATION-SECTION-ONE"></div></div></div></div></div></div></div><div class=subAgreement><div class="panel panel-default"><div class=panel-heading><div class="row panel-title"><div class=padding-right-0 ng-class="{ \'col-xs-1\' : isDesktop === true,\'col-xs-2\' : isDesktop === false}"><input ng-if="!livingTrustAgreementTwo.open && newAddress.livingTrustAgreementTwo==undefined" type=checkbox ng-model=newAddress.livingTrustAgreementTwo ng-disabled=true ng-click="checkboxAccordianClick($event,\'livingTrustAgreementTwo\',newAddress.livingTrustAgreementTwo,livingTrustAgreementTwo)" id=checkbox2 name=checkbox3 value=checkbox3 required> <input ng-if="!livingTrustAgreementTwo.open && newAddress.livingTrustAgreementTwo==false" type=checkbox ng-model=newAddress.livingTrustAgreementTwo ng-click="checkboxAccordianClick($event,\'livingTrustAgreementTwo\',newAddress.livingTrustAgreementTwo,livingTrustAgreementTwo)" id=checkbox2 required> <input ng-if="!livingTrustAgreementTwo.open && newAddress.livingTrustAgreementTwo==true" type=checkbox ng-model=newAddress.livingTrustAgreementTwo ng-click="checkboxAccordianClick($event,\'livingTrustAgreementTwo\',newAddress.livingTrustAgreementTwo,livingTrustAgreementTwo)" id=checkbox2 required> <input ng-if=livingTrustAgreementTwo.open type=checkbox ng-model=newAddress.livingTrustAgreementTwo ng-click="checkboxClick($event);checkboxAccordianClick($event,\'livingTrustAgreementTwo\',newAddress.livingTrustAgreementTwo,livingTrustAgreementTwo)" id=checkbox2 required><label id=checkboxLabel2 for=checkbox2 class="checkbox checkbox-example testcheckbox" ng-click="checkboxAccordianClick($event,\'livingTrustAgreementTwo\',newAddress.livingTrustAgreementTwo,livingTrustAgreementTwo)"></label></div><div class="agreement-title text" ng-class="{ \'col-xs-10\' : isDesktop === true,\'col-xs-9\' : isDesktop === false}" bs-collapse-toggle ng-click="toggleElem(\'livingTrustAgreementTwo\',livingTrustAgreementTwo.open)">Section 2 - Authorization to Open and to Transact in Account</div><div class="col-xs-1 padding-0" bs-collapse-toggle ng-click="toggleElem(\'livingTrustAgreementTwo\',livingTrustAgreementTwo.open)"><i class="fa fa-plus" ng-if="livingTrustAgreementTwo.open==false || livingTrustAgreementTwo.open==undefined"></i> <i class="fa fa-minus" ng-if="livingTrustAgreementTwo.open==true"></i></div></div></div><div class=panel-collapse ng-class="{\'collapse am-collapse in\':livingTrustAgreementTwo.open === true,\'collapse am-collapse\':livingTrustAgreementTwo.open === false||livingTrustAgreementTwo.open === undefined}"><div class=panel-body><div class=row><div class=col-xs-1>&nbsp;</div><div class=col-xs-11><div class="panel-agreement-content text"><hg-remote-asset hg-asset-id="SIP-ENROLLMENT-TRUSTEE-CERTIFICATION-SECTION-TWO"></div></div></div></div></div></div></div><div><div class="panel panel-default"><div class=panel-heading><div class="row panel-title"><div class=padding-right-0 ng-class="{ \'col-xs-1\' : isDesktop === true,\'col-xs-2\' : isDesktop === false}"><input ng-if="!livingTrustAgreementThree.open && newAddress.livingTrustAgreementThree==undefined" type=checkbox ng-model=newAddress.livingTrustAgreementThree ng-disabled=true ng-click="checkboxAccordianClick($event,\'livingTrustAgreementThree\',newAddress.livingTrustAgreementThree,livingTrustAgreementThree)" id=checkbox3 name=checkbox3 value=checkbox3 required> <input ng-if="!livingTrustAgreementThree.open && newAddress.livingTrustAgreementThree==false" type=checkbox ng-model=newAddress.livingTrustAgreementTwo ng-click="checkboxAccordianClick($event,\'livingTrustAgreementThree\',newAddress.livingTrustAgreementThree,livingTrustAgreementThree)" id=checkbox3 required> <input ng-if="!livingTrustAgreementThree.open && newAddress.livingTrustAgreementThree==true" type=checkbox ng-model=newAddress.livingTrustAgreementThree ng-click="checkboxAccordianClick($event,\'livingTrustAgreementThree\',newAddress.livingTrustAgreementThree,livingTrustAgreementThree)" id=checkbox3 required> <input ng-if=livingTrustAgreementThree.open type=checkbox ng-model=newAddress.livingTrustAgreementThree ng-click="checkboxClick($event);checkboxAccordianClick($event,\'livingTrustAgreementThree\',newAddress.livingTrustAgreementThree,livingTrustAgreementThree)" id=checkbox3 required><label id=checkboxLabel3 for=checkbox3 class="checkbox checkbox-example testcheckbox" ng-click="checkboxAccordianClick($event,\'livingTrustAgreementThree\',newAddress.livingTrustAgreementThree,livingTrustAgreementThree)"></label></div><div class="agreement-title text" ng-class="{ \'col-xs-10\' : isDesktop === true,\'col-xs-9\' : isDesktop === false}" bs-collapse-toggle ng-click="toggleElem(\'livingTrustAgreementThree\',livingTrustAgreementThree.open)">Section 3 - Trustee Roles, Responsibilities, and Indemnification</div><div class="col-xs-1 padding-0" bs-collapse-toggle ng-click="toggleElem(\'livingTrustAgreementThree\',livingTrustAgreementThree.open)"><i class="fa fa-plus" ng-if="livingTrustAgreementThree.open==false || livingTrustAgreementThree.open==undefined"></i> <i class="fa fa-minus" ng-if="livingTrustAgreementThree.open==true"></i></div></div></div><div class="row panel-collapse" ng-class="{\'collapse am-collapse in\':livingTrustAgreementThree.open === true,\'collapse am-collapse\':livingTrustAgreementThree.open === false||livingTrustAgreementThree.open === undefined}"><div class=panel-body><div class=row><div class=col-xs-1>&nbsp;</div><div class=col-xs-11><div class="panel-agreement-content text"><hg-remote-asset hg-asset-id="SIP-ENROLLMENT-TRUSTEE-CERTIFICATION-SECTION-THREE"></div></div></div></div></div></div></div></div><div class=button-action-bar><button type=button ng-click=previous() class="btn btn-default" aria-label=Back>Back</button> <button type=submit ng-click=next() class="btn btn-primary" ng-disabled=userForm.$invalid aria-label=Next>Next</button></div></form></div></div></hg-page>'),a.put("templates/accountOpen/livingTrustDoc-mobile.html",'<hg-page bannertext="Open your account with Schwab"><hg-page-title ng-bind-html=livingTrustDocTitle></hg-page-title><div ng-init=profileModel()><form name=userForm class="form container-padded"><div class=form-group><input type=radio value=twoPageTrust id=twoPageTrust name=trustType ng-model=newAddress.trustType hg-file-model="trustUploadModel"><label for=twoPageTrust class=trustRadio><span>Two pages of Trust document</span></label><div ng-show="newAddress.trustType==\'twoPageTrust\'"><ul class=trust_ul><li>Please attach first page of the trust as the first file. Attach the signature page(s) as the second file.</li><li>Please note that submission of additional pages could result in your application being denied.</li><li>Please ensure that the images don\'t contain passwords.</li><li>Please ensure that the images are black and white with no highlighting.</li><li>Allowable extension types - bmp, gif, png, tif, tiff, pdf, jpeg, jpg, doc, docx, xls, xlsx.</li><li>Files should not exceed 3 MB.</li></ul><div class="form-group pull-left thumbnail_width"><label>First page</label><div><a class="btn rdc-btn btn btn-default btn-block" ng-click=invokeFrontCamera() title="Take Photo, Front of Check"><i ng-if="trustUploadModel.frontThumbnailAvailable==true" class="fa fa-check-circle check_color"></i> <i ng-if="trustUploadModel.frontThumbnailAvailable!==true" class="fa fa-camera">&nbsp;Add Image</i></a></div></div><div class="form-group pull-right thumbnail_width"><label>Last Page</label><div><a class="btn rdc-btn btn btn-default btn-block" ng-click=invokeBackCamera() title="Take Photo, Back of Check"><i ng-if="trustUploadModel.backThumbnailAvailable==true" class="fa fa-check-circle check_color"></i> <i ng-if="trustUploadModel.backThumbnailAvailable!==true" class="fa fa-camera">&nbsp;Add Image</i></a></div></div></div><input type=radio value=singlePageTrust id=singlePageTrust name=trustType ng-model=newAddress.trustType hg-file-model="trustUploadModel"><label for=singlePageTrust class=trustRadio>Certificate Of Trust</label><div ng-show="newAddress.trustType==\'singlePageTrust\'"><ul class=trust_ul><li>Please attach a copy of the Certificate of Trust.</li><li>Please note that submission of additional pages could result in your application being denied.</li><li>Please ensure that the images don\'t contain passwords.</li><li>Please ensure that the images are black and white with no highlighting.</li><li>Allowable extension types - bmp, gif, png, tif, tiff, pdf, jpeg, jpg, doc, docx, xls, xlsx.</li><li>Files should not exceed 3 MB.</li></ul><div class=thumbnail_width id=lt-addimage><div><a class="btn rdc-btn btn btn-default" ng-click=invokeFrontCamera() title="Take Photo, Front of Check"><i ng-if="trustUploadModel.trustCertificateThumbnailAvailable==true" class="fa fa-check-circle check_color"></i> <i ng-if="trustUploadModel.trustCertificateThumbnailAvailable!==true" class="fa fa-camera">&nbsp;Add Image</i></a></div></div></div><div class=clear><div class=button-action-bar><button type=button class="btn btn-default" aria-label=Back ui-sref=accountopen.additionalinfo>Back</button> <button type=submit class="btn btn-primary" aria-label=Next ng-disabled="(trustUploadModel.frontThumbnailAvailable!==true || trustUploadModel.backThumbnailAvailable!==true)\r\n                            && trustUploadModel.trustCertificateThumbnailAvailable !== true" ui-sref=accountopen.address>Next</button></div></div></div></form></div></hg-page>'),a.put("templates/accountOpen/livingTrustDoc.html",'<hg-page bannertext={{accountOpenBannerText}}><hg-page-title ng-bind-html=livingTrustDocTitle></hg-page-title><div ng-init=profileModel()><form name=userForm class="form container-padded"><div class="alert alert-danger" role=alert ng-if="trustUploadModel.trustDocValidationError==true">{{trustUploadModel.trustDocValidationErrorMsg}}</div><div ng-if=isBranchChromeBook class=padding-bottom-12><div class=row id=chromeBookDoc><div class=col-sm-12><input type=checkbox value=Y id=squaredOne name=check ng-click=setTrustDocValidation() ng-model="newAddress.ByPassDoc"><label for=squaredOne class="checkbox checkbox-example">I will submit the trust doc later.</label></div><div class="clear margin-left-55" ng-if="newAddress.ByPassDoc==true">Please be aware that your trust documentation must be received within seven days or your trust account will be automatically closed.</div></div></div><div ng-hide="(isBranchChromeBook && newAddress.ByPassDoc==true)"><div><input type=radio value=twoPageTrust id=twoPageTrust name=trustType ng-model=newAddress.trustType hg-file-model="trustUploadModel"><label for=twoPageTrust class=trustRadio><span>Two pages of Trust document</span></label><div ng-show="newAddress.trustType==\'twoPageTrust\'"><ul class=trust_ul><li>Please attach first page of the trust as the first file. Attach the signature page(s) as the second file.</li><li>Please note that submission of additional pages could result in your application being denied.</li><li>Please ensure that the images don\'t contain passwords.</li><li>Please ensure that the images are black and white with no highlighting.</li><li>Allowable extension types - bmp, gif, png, tif, tiff, pdf, jpeg, jpg, doc, docx, xls, xlsx.</li><li>Files should not exceed 3 MB.</li></ul><div><div class=form-group><label for=trustFrontDoc>First page</label><input type=file name=trustFrontDoc class=form-control id=trustFrontDoc hg-file-model=trustUploadModel hg-trust-doc=trustFirstDoc ng-disabled=newAddress.ByPassDoc></div></div><div><div class=form-group><label for=trustBackDoc>Last Page</label><input type=file name=trustBackDoc class=form-control id=trustBackDoc hg-file-model=trustUploadModel hg-trust-doc=trustLastDoc ng-model-options="{ updateOn: \'blur\' }" ng-disabled=newAddress.ByPassDoc></div></div></div></div><div><input type=radio value=singlePageTrust id=singlePageTrust name=trustType ng-model=newAddress.trustType hg-file-model="trustUploadModel"><label for=singlePageTrust class=trustRadio>Certificate Of Trust</label><div ng-show="newAddress.trustType==\'singlePageTrust\'"><ul class=trust_ul><li>Please attach a copy of the Certificate of Trust.</li><li>Please note that submission of additional pages could result in your application being denied.</li><li>Please ensure that the images don\'t contain passwords.</li><li>Please ensure that the images are black and white with no highlighting.</li><li>Allowable extension types - bmp, gif, png, tif, tiff, pdf, jpeg, jpg, doc, docx, xls, xlsx.</li><li>Files should not exceed 3 MB.</li></ul><div><div class=form-group><input type=file name=cerificateOfTrust class=form-control id=cerificateOfTrust hg-file-model=trustUploadModel hg-trust-doc=certificateOfTrust ng-model-options="{ updateOn: \'blur\' }" ng-disabled=newAddress.ByPassDoc></div></div></div></div></div><div class=clear><div class="form-group row"><div class=text-center><button type=button class="btn btn-default" aria-label=Back ui-sref=accountopen.additionalinfo>Back</button> <button type=submit class="btn btn-primary" ng-disabled=trustUploadModel.trustDocValidation ng-click=firstPageUpload()>Next</button></div></div></div></form></div></hg-page>'),a.put("templates/accountOpen/livingTrustGrantor.html",'<hg-page><hg-page-title class="hidden-xs hidden-sm">Please indicate the Grantor(s) on this Living Trust. (Select all that apply.)</hg-page-title><div ng-init=profileModel()><form name=userForm class="form container-padded"><div ng-if="jointFlow==true"><div class=checkbox_icon><div class=squaredOne><input type=checkbox id=trustSourceTwo ng-click=trustGrantorValidation() name=trustSourceTwo ng-model=newAddress.trustGrantorTwo required><label for=trustSourceTwo></label></div><div class=text>{{primaryApplicantFirstName}} {{primaryApplicantLastName}}</div></div></div><div class=checkbox_icon><div class=squaredOne><input type=checkbox ng-click=trustGrantorValidation() id=trustSource name=trustSource ng-model=newAddress.trustGrantorSingle required><label for=trustSource></label></div><div class=text>{{newAddress.firstName}} {{newAddress.lastName}}</div></div><div class=clear><div class="form-group row"><div class=text-center><a ui-sref=accountopen.livingtrustagreements><button type=button class="btn btn-default">Back</button></a> <button type=submit ng-click=next() class="btn btn-default" ng-disabled=trustGrantorFlag>Next</button></div></div></div></form></div></hg-page>'),a.put("templates/accountOpen/loginRedirect.html","<div ng-init=loginRedirect()></div>"),a.put("templates/accountOpen/longRunActivity.html",'<hg-page full=true bannertext=blank><div ng-init=longRunActivity(); class=long-run-activity><hg-page-title>{{lRActivityTitle}}</hg-page-title><div class="spinner-image spinnerLight spinner-center"><span class=sr-only>spinner graphics image,Please wait</span></div><hg-page-sub-title>{{lRActivityBodyText}}</hg-page-sub-title></div></hg-page>'),a.put("templates/accountOpen/mailing-address.html",'<hg-page bannertext={{accountOpenBannerText}}><hg-page-title>Please provide your mailing address<span ng-if="jointFlag==true">{{joinTitle}}</span>.</hg-page-title><div ng-init=profileModel()><form name=userForm class=form><div class=clear ng-show="newAddress.addAddress==true"><div class=form-group ng-class="{ \'has-error\' : userForm.home.$invalid && !userForm.home.$pristine }"><label for=home>Street address</label><input name=home class=form-control id=home ng-model=newAddress.mailAddressLine1 hg-validate-printable-ascii ng-model-options="{ updateOn: \'blur\' }" ng-minlength=1 ng-maxlength=45 ng-disabled="isLoggedIn && (custodialFlag==false || custodialFlag==undefined)" required><div class=help-block ng-show="!userForm.home.$pristine && userForm.home.$invalid"><span ng-show="userForm.home.$error.required || userForm.home.$error.pattern || userForm.home.$error.maxlength">Please enter a valid Address.</span></div></div><div class=form-group ng-class="{ \'has-error\' : userForm.AddressLine2.$invalid && !userForm.AddressLine2.$pristine }"><label for=AddressLine2>Street address 2 (optional)</label><input name=AddressLine2 class=form-control id=AddressLine2 ng-model=newAddress.mailAddressLine2 hg-validate-printable-ascii ng-model-options="{ updateOn: \'blur\' }" ng-minlength=1 ng-disabled="isLoggedIn && (custodialFlag==false || custodialFlag==undefined)" ng-maxlength=30><div class=help-block ng-show="!userForm.AddressLine2.$pristine && userForm.AddressLine2.$invalid"><span ng-show="userForm.AddressLine2.$error.pattern || userForm.AddressLine2.$error.maxlength">Please enter a valid Address.</span></div></div><div class=form-group ng-class="{ \'has-error\' : userForm.city.$invalid && !userForm.city.$pristine }"><label for=city>City</label><input name=city ng-disabled="isLoggedIn && (custodialFlag==false || custodialFlag==undefined)" class=form-control id=city ng-model=newAddress.mailCity ng-pattern="/^[A-Za-z0-9\\s\\-\'.,!]+$/" ng-minlength=1 ng-maxlength=25 ng-model-options="{ updateOn: \'blur\' }" required><div class=help-block ng-show="!userForm.city.$pristine && userForm.city.$invalid"><span ng-show="userForm.city.$error.required || userForm.city.$error.pattern || userForm.city.$error.maxlength ">Please enter a valid city.</span></div></div><div class=row><div class=col-xs-8><div class=form-group ng-class="{ \'has-error\' : userForm.state.$invalid && !userForm.state.$pristine }"><label for=state>State</label><select name=state class=form-control id=state ng-model=newAddress.mailState ng-model-options="{ updateOn: \'blur\' }" required ng-options="key as value for (key , value) in StateList" ng-disabled="isLoggedIn && (custodialFlag==false || custodialFlag==undefined)"><option value="">Select State</option></select><div class=help-block ng-show="!userForm.state.$pristine && userForm.state.$invalid && userForm.state.$dirty"><span ng-show="userForm.state.$error.required || userForm.state.$error.pattern || userForm.state.$dirty">Please select a state.</span></div></div></div><div class=col-xs-4><div class=form-group ng-class="{ \'has-error\' : userForm.zip.$invalid && !userForm.zip.$pristine }"><label for=zip>ZIP Code</label><input type=tel name=zip class=form-control ng-pattern="/^\\d{5}$/" ng-maxlength=5 id=zip ng-model=newAddress.mailZipCode ng-disabled="isLoggedIn && (custodialFlag==false || custodialFlag==undefined)" ng-model-options="{ updateOn: \'blur\' }" required><p ng-show="userForm.zip.$invalid && !userForm.zip.$pristine" class=help-block>Please Enter Valid ZIP code</p></div></div></div><div class=form-group ng-class="{ \'has-error\' : userForm.CountryCode.$invalid && !userForm.CountryCode.$pristine }"><label for=CountryCode>Country</label><select name=CountryCode class=form-control id=CountryCode ng-model=newAddress.mailCountryCode ng-disabled="isLoggedIn && (custodialFlag==false || custodialFlag==undefined)"><option value=US ng-selected=selected>US</option></select></div></div><div class=clear><div class=button-action-bar><a ui-sref=accountopen.address class=padding-right-8><button type=button class="btn btn-default">Back</button></a> <button type=submit ng-click=submitMailingAddress() class="btn btn-default btn-primary" ng-disabled=userForm.$invalid>Next</button></div></div></form></div></hg-page>'),a.put("templates/accountOpen/newCustomer.html",'<hg-page bannertext={{accountOpenBannerText}}><hg-page-title>Two Ways to Sign Up</hg-page-title><form role=form class=form-group><div class="radio-group padding-left-12"><div class=form-group><input id=newCustomer type=radio name=customer value=ExistingCustomer ng-model=CustomerType ng-click="setCustomerType(\'ExistingCustomer\')" required><label id=newCustomer1 for=newCustomer class="radio title-strong">Yes, I have a Schwab Login ID and password</label><div class="label-text two-signup" data-ng-bind-html=signUpText></div></div><div class=form-group><input id=existingCustomer type=radio name=customer value=NewCustomer ng-model=CustomerType ng-click="setCustomerType(\'NewCustomer\')"><label id=existingCustomer1 for=existingCustomer class="radio title-strong">I am new to Schwab, and do not have a Schwab Login ID or password.</label><div class="label-text two-signup">Create a {{$root.product}} account with the following information:<ul><li>U.S. permanent resident address</li><li>Social Security number or Tax ID</li><li>Employment info (if any), including employer address</li></ul></div></div></div><div class=button-action-bar><button type=button ng-disabled=newCustomerBack class="btn btn-default" ng-click=customerBackButton() aria-label=Back>Back</button> <button type=submit class="btn btn-primary btn-primary" ng-click=chooseCustomerType() aria-label=Next>Next</button></div></form></hg-page>'),a.put("templates/accountOpen/profile.html",'<hg-page bannertext={{accountOpenBannerText}}><div><hg-page-title ng-if="(jointFlag==false || jointFlag==undefined) && (twoTrusteeFlag==false || twoTrusteeFlag==undefined) && (custodialFlag==false || custodialFlag==undefined)">Please provide the following information for <span ng-if="newAddress.accountSubType==&quot;Custodial&quot;">the custodian.</span><span ng-if="newAddress.accountSubType!=&quot;Custodial&quot;">first person on the account.</span></hg-page-title><hg-page-title ng-if="jointFlag==true">Please provide the following information for the second tenant.</hg-page-title><hg-page-title ng-if="twoTrusteeFlag==true">Please provide the following information for the second trustee.</hg-page-title><hg-page-title ng-if="custodialFlag==true">Please provide the following information for the minor.</hg-page-title></div><div ng-init=profileModel()><div ng-if="updateClientInfo==true" data-ng-bind-html=updateClientText></div><form name=userForm class=form novalidate><div><div class=col-md-8><div class=form-group show-errors ng-class="{ \'has-error\' : userForm.firstName.$invalid && !userForm.firstName.$pristine}"><label for=firstName1>First Name</label><input name=firstName class=form-control id=firstName1 ng-model=newAddress.firstName ng-model-options="{ updateOn: \'blur\' }" ng-disabled="isLoggedIn && (custodialFlag==false || custodialFlag==undefined)" required validate-name="" ng-maxlength="30"><div role=alert class=help-block ng-show="!userForm.firstName.$pristine && userForm.firstName.$invalid"><span ng-show="userForm.firstName.$error.required || userForm.firstName.$error.maxlength|| userForm.firstName.$error.validateName">Please enter a valid first name.</span></div></div></div><div class=col-md-4><div class=form-group show-errors ng-class="{ \'has-error\' : userForm.middleName.$invalid && !userForm.middleName.$pristine}"><label for=middleName1>Middle Name (optional)</label><input name=middleName class=form-control ng-disabled="isLoggedIn && (custodialFlag==false || custodialFlag==undefined)" id=middleName1 ng-model-options="{ updateOn: \'blur\' }" ng-model=newAddress.middleName validate-name=middle ng-maxlength="30"><div role=alert class=help-block ng-show="!userForm.middleName.$pristine && userForm.middleName.$invalid"><span ng-show="userForm.middleName.$error.validateName|| userForm.middleName.$error.maxlength">Please enter a valid middle name.</span></div></div></div></div><div class="form-group col-md-12" ng-class="{ \'has-error\' : userForm.lastName.$invalid && !userForm.lastName.$pristine }"><label for=lastname1>Last Name</label><input name=lastName class=form-control ng-disabled="isLoggedIn && (custodialFlag==false || custodialFlag==undefined)" id=lastname1 ng-model-options="{ updateOn: \'blur\' }" ng-model=newAddress.lastName required validate-name="" ng-maxlength="60"><div role=alert class=help-block ng-show="!userForm.lastName.$pristine && userForm.lastName.$invalid"><span ng-show="userForm.lastName.$error.required || userForm.lastName.$error.maxlength || userForm.lastName.$error.validateName">Please enter a valid last name.</span></div></div><div class="form-group col-md-12" ng-class="{ \'has-error\' : userForm.suffix.$invalid && !userForm.suffix.$pristine }"><label for=suffixId>Suffix (optional)</label><select name=suffix class=form-control ng-disabled="isLoggedIn && (custodialFlag==false || custodialFlag==undefined)" id=suffixId ng-model=newAddress.suffix><option selected=selected>JR</option><option>SR</option><option>II</option><option>III</option><option>IV</option><option>V</option><option>DDS</option><option>DVM</option><option>ESQ</option><option>MD</option><option>PHD</option></select><p role=alert ng-show="userForm.suffix.$invalid && !userForm.suffix.$pristine" class=help-block>Suffix is required.</p></div><div ng-if="(custodialFlag==false || custodialFlag==undefined)" class="form-group col-md-12" ng-class="{ \'has-error\' : userForm.EmailAddress.$invalid && !userForm.EmailAddress.$pristine }"><label for=inputEmail1>Email Address</label><input type=email name=EmailAddress class=form-control id=inputEmail1 ng-maxlength=60 ng-model-options="{ updateOn: \'blur\' }" ng-model=newAddress.emailAddress ng-disabled=newAddress.validEmailAddress required validate-email-address=""><div role=alert class=help-block ng-show="!userForm.EmailAddress.$pristine && userForm.EmailAddress.$invalid"><span ng-show="userForm.EmailAddress.$error.required || userForm.EmailAddress.$error.maxlength || userForm.EmailAddress.$error.validateEmailAddress">Please enter a valid email address.</span></div></div><div ng-if="(custodialFlag==false || custodialFlag==undefined)" class="form-group col-md-12" ng-class="{ \'has-error\' : userForm.ConfirmEmailAddress.$invalid && !userForm.ConfirmEmailAddress.$pristine }"><label for=inputEmail2>Confirm Email Address</label><input type=email name=ConfirmEmailAddress class=form-control id=inputEmail2 ng-maxlength=60 ng-model-options="{ updateOn: \'blur\' }" ng-model=newPromo.confirmEmailAddress ng-required=userForm.EmailAddress.$valid hg-validate-match-field=inputEmail1><div role=alert class=help-block ng-show="!userForm.ConfirmEmailAddress.$pristine && userForm.ConfirmEmailAddress.$invalid"><span ng-show="userForm.ConfirmEmailAddress.$error.required || userForm.ConfirmEmailAddress.$error.maxlength">Please confirm a valid email address.</span> <span ng-show="!userForm.ConfirmEmailAddress.$pristine && userForm.ConfirmEmailAddress.$error.mismatchField">Confirm email address does not match with email address.</span></div></div><div ng-if="(custodialFlag==false || custodialFlag==undefined)" class="form-group col-md-12"><div class="row margin-bottom-35"><div class="col-xs-2 col-sm-1 col-md-1"><input type=checkbox value=None id=squaredOne2 name=check ng-model=newAddress.electronicAgreement required><label class="checkbox checkbox-example" for=squaredOne2></label></div><div class="col-xs-10 col-sm-11 col-md-11 padding-left-0" ng-if=$root.isSIP><hg-remote-asset hg-asset-id="SIP-ENROLLMENT-EMAIL-VERIFICATION-CLAUSE"></div><div class="col-xs-10 col-sm-11 col-md-11 padding-left-0" ng-if=$root.isIIP><hg-remote-asset hg-asset-id="ENROLLMENT-EMAIL-VERIFICATION-CLAUSE-AS"></div></div></div><div class=promo-section><div class="col-xs-12 padding-0 margin-bottom-24" ng-repeat="promoCode in promoCodes"><div class=col-sm-6><div class="offer-code-success btn-plain"><span class="sch padding-right-4" ng-class="{\'icon-check\': promoCode.IsValid, \'icon-error\': !promoCode.IsValid}"></span> <span class=title>{{promoCode.PromoCode}}</span> <a href hg-focus=true class="pull-right icon-close-x image-cursor" role=button ng-click=removePromoCode(promoCode.PromoCode)></a></div></div><div class="col-sm-6 promo-terms" ng-class="{\'padding-left-0\' : $root.deviceInfo.isLargeScreen()}" ng-if=promoCode.TncCmsAssetId>Read the <a ng-href={{cmsUrl}}{{promoCode.TncCmsAssetId}} target=_blank>Terms and Conditions</a> for the {{promoCode.OfferCmsAssetValue}}.</div></div><div class="row margin-0 promo-add-section" ng-if=isShowPromoCodeBox><div class="col-xs-12 col-sm-12"><label aria-label="" for=PromoCode>Offer/Referral Code</label></div><div class="col-xs-8 col-sm-6" ng-class="{ \'has-error\' : userForm.promoCode.$invalid && !userForm.promoCode.$pristine }"><input role=textbox name=promoCode id=PromoCode class=form-control aria-label="" ng-minlength=5 ng-maxlength=20 maxlength=20 hg-format-uppercase hg-validate-alpha-numeric hg-validate-duplicates=promoCodes hg-focus=true ng-model-options="{ updateOn: \'blur\' }" ng-model="newPromo.newCode"><div role=alert class=help-block ng-show="!userForm.promoCode.$pristine && userForm.promoCode.$invalid"><span ng-show=userForm.promoCode.$error.alphaNumeric>An offer/referral code has only letters and numbers. Enter a valid one or remove it.</span> <span ng-show="(userForm.promoCode.$error.maxlength || userForm.promoCode.$error.minlength) &&\r\n                                                    !userForm.promoCode.$error.alphaNumeric">An offer/referral code is at least 5 characters. Enter a valid one or remove it.</span> <span ng-show=(userForm.promoCode.$error.validDuplicates)>You have already added this code. Enter a different one or remove it.</span> <span ng-show=userForm.promoCode.$error.invalidPromo>This offer/referral code is not valid. Enter a valid one or remove it.</span> <span ng-show=userForm.promoCode.$error.unabletoProcess>We are unable to process this code at this time. Try again or call 866-232-9890 for assistance.</span></div></div><div class="col-xs-4 col-sm-6 margin-top-5 padding-left-0"><button type="submit button" value=Submit class="btn btn-default" ng-click="validatePromoCode(userForm, true)">Add</button></div></div></div><a href=javascript:void(0) class="block block-lg padding-left-15 pc-block" ng-click=showPromoCodeBox(true) ng-show=enablePromoCodeLink()>Add {{getPromoCodeLinkModifier()}} offer/referral code (optional)</a><div class=button-action-bar><button type=button ng-click=previous() class="btn btn-default" aria-label=Back>Back</button> <button type=submit ng-click=submitProfile(userForm) ng-disabled=userForm.$invalid id=profileButton class="btn btn-primary" aria-label="Sign Up"><span ng-if="custodialFlag==false || custodialFlag==undefined">Sign Up</span> <span ng-if="custodialFlag==true">Next</span></button></div></form></div></hg-page>'),
a.put("templates/accountOpen/promoTermsAndConditions.html",'<div class="pull-right icon-close-x image-cursor" ng-click=$hide()></div><div class=etf-popup-display><hg-remote-asset hg-asset-id="{{promoCode.TncCmsAssetId}}"></div>'),a.put("templates/accountOpen/prospectLogin.html",'<hg-page bannertext=blank iippagedisclosure="The Login ID and password you select will also be your login for the Schwab Alliance website.  Your Advisor will not see or have access to your Login ID or password, and you should not share it with your Advisor."><hg-page-title><span ng-if="newAddress.accountSubType!=\'Custodial\'">Now let\'s create a log-in for {{newAddress.firstName}} {{newAddress.lastName}}.</span> <span ng-if="newAddress.accountSubType==\'Custodial\'">Now let\'s create a log-in for {{custodialAddress.firstName}} {{custodialAddress.lastName}}.</span></hg-page-title><hg-page-sub-title><hg-local-asset hg-asset-id=SIP-SELFSERVICE-UPDATE-PASSWORD-INSTR-RETAIL></hg-local-asset></hg-page-sub-title><div ng-init=profileModel()><div class="alert alert-danger" role=alert ng-if="loginErrorFlag==true">{{prospectloginMessage}}</div><form name=userForm class=form novalidate><div class="form-group col-md-12" ng-class="{ \'has-error\' : userForm.username.$invalid && !userForm.username.$pristine }"><label for=username>Username</label><input name=username class=form-control id=username ng-model=prospectlogin.username required hg-validate-alpha-numeric hg-validate-one-letter-minimum ng-minlength=6 ng-maxlength=20 maxlength=20 ng-model-options="{ \'updateOn\': \'blur\'}"><div class=help-block ng-show="!userForm.username.$pristine && userForm.username.$invalid"><span ng-show=userForm.username.$error.required>Username is required.</span> <span ng-show=userForm.username.$error.alphaNumeric>Username must be letters and numbers.</span> <span ng-show="userForm.username.$error.oneLetterMinimum && !userForm.username.$error.alphaNumeric">Username must be contain at least one letter.</span> <span ng-show="(userForm.username.$error.minlength || userForm.username.$error.maxlength) &&\r\n                                    !(userForm.username.$error.alphaNumeric || userForm.username.$error.oneLetterMinimum)">Username must be between 6 and 20 characters.</span></div></div><div class="form-group col-md-12" ng-class="{ \'has-error\' : userForm.pw1.$invalid && !userForm.pw1.$pristine }"><label for=pw1>Password</label><input type=password id=pw1 name=pw1 class=form-control ng-model=prospectlogin.password required ng-model-options="{ \'updateOn\': \'blur\'}"><div class=help-block ng-show="!userForm.pw1.$pristine && userForm.pw1.$invalid"><span ng-show=userForm.pw1.$error.required>Password is required.</span></div></div><div class="form-group col-md-12" ng-class="{ \'has-error\' : userForm.pw2.$invalid && !userForm.pw2.$pristine }"><label for=pw2>Confirm Password</label><input type=password id=pw2 name=pw2 class=form-control ng-model=prospectlogin.confirmPassword required hg-validate-password-check=pw1 ng-model-options="{ \'updateOn\': \'blur\'}"><div class=help-block ng-show="!userForm.pw2.$pristine && userForm.pw2.$invalid"><span ng-show=userForm.pw2.$error.required>Please Confirm your password.</span> <span ng-show=userForm.pw2.$error.pwmatch>Mismatch between Password and Confirm password.</span></div></div><div class="form-group col-md-12" ng-class="{ \'has-error\' : userForm.prospectloginSecurityQuestion.$invalid && !userForm.prospectloginSecurityQuestion.$pristine }"><label for=prospectloginSecurityQuestion>Security Question</label><select name=prospectloginSecurityQuestion class=form-control id=prospectloginSecurityQuestion ng-model=prospectlogin.securityQuestion ng-model-options="{ updateOn: \'blur\' }" required ng-options="value as value for value in prospectloginSecurityQuestion"><option value="">Select Security Question</option></select><div class=help-block ng-show="!userForm.prospectloginSecurityQuestion.$pristine && userForm.prospectloginSecurityQuestion.$invalid && userForm.prospectloginSecurityQuestion.$dirty"><span ng-show="userForm.prospectloginSecurityQuestion.$error.required || userForm.prospectloginSecurityQuestion.$dirty">Please select a Security Question.</span></div></div><div class="form-group col-md-12" show-errors ng-class="{ \'has-error\' : userForm.answer.$invalid && !userForm.answer.$pristine}"><label for=answer>Answer</label><input type=password name=answer class=form-control ng-model=prospectlogin.securityAnswer id=answer placeholder="" ng-maxlength=30 maxlength=30 required><div class=help-block ng-show="!userForm.answer.$pristine && userForm.answer.$invalid"><span ng-show=userForm.answer.$error.required>Security Question Answer is required.</span></div></div><div class=button-action-bar><button type=submit id=propectLogin ng-click=next() class="btn btn-default" ng-disabled=userForm.$invalid>Next</button></div></form></div></hg-page>'),a.put("templates/accountOpen/regulatoryQuestions.html",'<hg-page bannertext={{accountOpenBannerText}}><hg-page-title data-ng-bind-html=regulatoryQuestionsTitle></hg-page-title><div ng-init=profileModel()><form name=userForm class="form container-padded" novalidate><div class=form-group><div class=row><div class="col-xs-2 col-sm-1 col-md-1"><input type=checkbox value=Y id=squaredOne name=check ng-disabled=newAddress.Is407Checked ng-model="newAddress.IsAffiliated"><label for=squaredOne class="checkbox checkbox-example"></label></div><div class="text col-xs-10 col-sm-11 col-md-11 padding-left-0"><span ng-if="custodialFlag==true">The minor is</span><span ng-if="custodialFlag==false || custodialFlag==undefined">I am</span> affiliated with or employed by a stock exchange, member firm of an exchange or FINRA, or a municipal securities broker-dealer.</div></div></div><div class="clear margin-left-40" ng-if="newAddress.IsAffiliated==true && session.isLoggedIn==false"><hg-remote-asset class=clearfix hg-asset-id=SIP-ENROLLMENT-407-LETTER></hg-remote-asset></div><div class="form-group margin-top-25"><div class=row><div class="col-xs-2 col-sm-1 col-md-1"><input type=checkbox value=True id=squaredOne1 name=check ng-model=newAddress.IsDirector ng-click="directorSymbols()"><label for=squaredOne1 class="checkbox checkbox-example"></label></div><div class="text col-xs-10 col-sm-11 col-md-11 padding-left-0"><span ng-if="custodialFlag==true">The minor is a</span><span ng-if="custodialFlag==false || custodialFlag==undefined">I am a</span> director, 10% shareholder or policy-making officer of a publicly held company.</div></div></div><div class=clear ng-if="newAddress.IsDirector==true"><h4>Enter the symbols for all companies that apply</h4><div class=form-group><label>Company Symbol</label><div class=form-group ng-class="{ \'has-error\' : userForm.symbol1.$error.symbol1 && !userForm.symbol1.$pristine }"><input name=symbol1 class=form-control id=symbol1 ng-model=newAddress.symbol1 required symbol-search><div class=help-block ng-show="!userForm.symbol1.$pristine && userForm.symbol1.$error.symbol1"><span ng-show=userForm.symbol1.$error.symbol1>Please enter a valid symbol.</span></div></div><div class=form-group ng-class="{ \'has-error\' : userForm.symbol2.$error.symbol2 && !userForm.symbol2.$pristine }"><input name=symbol2 class=form-control id=symbol2 ng-model=newAddress.symbol2 symbol-search><div class=help-block ng-show="!userForm.symbol2.$pristine && userForm.symbol2.$error.symbol2"><span ng-show=userForm.symbol2.$error.symbol2>Please enter a valid symbol.</span></div></div><div class=form-group ng-class="{ \'has-error\' : userForm.symbol3.$error.symbol3 && !userForm.symbol3.$pristine }"><input name=symbol3 class=form-control id=symbol3 ng-model=newAddress.symbol3 symbol-search><div class=help-block ng-show="!userForm.symbol3.$pristine && userForm.symbol3.$error.symbol3"><span ng-show=userForm.symbol3.$error.symbol3>Please enter a valid symbol.</span></div></div><div class=form-group ng-class="{ \'has-error\' : userForm.symbol4.$error.symbol4 && !userForm.symbol4.$pristine }"><input name=symbol4 class=form-control id=symbol4 ng-model=newAddress.symbol4 symbol-search><div class=help-block ng-show="!userForm.symbol4.$pristine && userForm.symbol4.$error.symbol4"><span ng-show=userForm.symbol4.$error.symbol4>Please enter a valid symbol.</span></div></div><div class=form-group ng-class="{ \'has-error\' : userForm.symbol5.$error.symbol5 && !userForm.symbol5.$pristine }"><input name=symbol5 class=form-control id=symbol5 ng-model=newAddress.symbol5 symbol-search><div class=help-block ng-show="!userForm.symbol5.$pristine && userForm.symbol5.$error.symbol5"><span ng-show=userForm.symbol5.$error.symbol5>Please enter a valid symbol.</span></div></div><div class=row><div class=col-xs-1><input type=checkbox value=None id=squaredOne3 name=check ng-model=newAddress.addMoreSymbol ng-click="director=!director"><label for=squaredOne3 class="checkbox checkbox-example"></label></div><div class=text>Add more stocks</div></div><div class=clear ng-show="newAddress.addMoreSymbol==true"><div class=form-group ng-class="{ \'has-error\' : userForm.symbol6.$error.symbol6 && !userForm.symbol6.$pristine }"><input name=symbol6 class=form-control id=symbol6 ng-model=newAddress.symbol6 symbol-search><div class=help-block ng-show="!userForm.symbol6.$pristine && userForm.symbol6.$error.symbol6"><span ng-show=userForm.symbol6.$error.symbol6>Please enter a valid symbol.</span></div></div><div class=form-group ng-class="{ \'has-error\' : userForm.symbol7.$error.symbol7 && !userForm.symbol7.$pristine }"><input name=symbol7 class=form-control id=symbol7 ng-model=newAddress.symbol7 symbol-search><div class=help-block ng-show="!userForm.symbol7.$pristine && userForm.symbol7.$error.symbol7"><span ng-show=userForm.symbol7.$error.symbol7>Please enter a valid symbol.</span></div></div><div class=form-group ng-class="{ \'has-error\' : userForm.symbol8.$error.symbol8 && !userForm.symbol8.$pristine }"><input name=symbol8 class=form-control id=symbol8 ng-model=newAddress.symbol8 symbol-search><div class=help-block ng-show="!userForm.symbol8.$pristine && userForm.symbol8.$error.symbol8"><span ng-show=userForm.symbol8.$error.symbol8>Please enter a valid symbol.</span></div></div><div class=form-group ng-class="{ \'has-error\' : userForm.symbol9.$error.symbol9 && !userForm.symbol9.$pristine }"><input name=symbol9 class=form-control id=symbol9 ng-model=newAddress.symbol9 symbol-search><div class=help-block ng-show="!userForm.symbol9.$pristine && userForm.symbol9.$error.symbol9"><span ng-show=userForm.symbol9.$error.symbol9>Please enter a valid symbol.</span></div></div><div class=form-group ng-class="{ \'has-error\' : userForm.symbol10.$error.symbol10 && !userForm.symbol10.$pristine }"><input name=symbol10 class=form-control id=symbol10 ng-model=newAddress.symbol10 symbol-search><div class=help-block ng-show="!userForm.symbol10.$pristine && userForm.symbol10.$error.symbol10"><span ng-show=userForm.symbol10.$error.symbol10>Please enter a valid symbol.</span></div></div><div class=checkbox_icon><div class=squaredOne><input type=checkbox value=None id=squaredOne4 name=check ng-model="newAddress.moreSymbols"><label for=squaredOne4></label></div><div class=text>I have more than 10 stocks.</div></div></div></div></div><div class=button-action-bar><button type=button class="btn btn-default" aria-label=Back ng-click=backRegulatoryQuestions()>Back</button> <button type=submit class="btn btn-primary" aria-label=Next ng-disabled=userForm.$invalid ng-click=submitRegulatoryQuestions()>Next</button></div></form></div></hg-page>'),a.put("templates/accountOpen/schwabCustomer.html",'<div class="visible-sm visible-xs"><div class=text-center><h1 class=profile-title>Great! Thanks for signing up.</h1><h5 class=profile-subtitle>Sign up using your schwab.com login id and password.</h5></div><div class=row><div class="col-sm-12 col-md-6 col-md-offset-3"><form name=userForm class=form><div class="form-group col-md-12" ng-class="{ \'has-error\' : userForm.username.$invalid && !userForm.username.$pristine}"><label for=username>Login</label><input name=Username class=form-control ng-maxlength=9 id=username ng-model=username required><p ng-show="userForm.username.$invalid && !userForm.username.$pristine" class=help-block>Please enter your login.</p></div><div class="form-group col-md-12" ng-class="{ \'has-error\' : userForm.password.$invalid && !userForm.password.$pristine }"><label for=password>Password</label><input type=password name=password class=form-control id=password ng-model=password required><p ng-show="userForm.password.$invalid && !userForm.password.$pristine" class=help-block>Please enter a password.</p></div><div class=form-group><div class=text-center style="margin-top: 20px; margin-bottom: 30px; font-size: 16px"><a>Forget your password?</a></div></div><div class="form-group col-md-12"><div class=checkbox_icon><div class=squaredOne><input type=checkbox value=None id=squaredOne2 name=check ng-model="newAddress.electronicAgreement"><label for=squaredOne2></label></div><div class=text>By Signing up, you consent to the <a>Electronic Delivery and Signatures Agreement</a>, have read the <a>Privacy Policy</a>, and are currently a US</div></div></div><div class=form-group><div class=text-center><a ui-sref=setup.newCustomer class="btn btn-default">Back</a> <a ng-click=schwabLogin() class="btn btn-default">Login</a></div></div></form></div></div></div><div class="visible-md visible-lg modal fade in login-container" id=myModal tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=false style="display: block;  overflow-y:scroll"><div class=modal-dialog style="width: 800px; height:auto"><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-hidden=true>&times;</button><h4 class=modal-title>&nbsp;</h4></div><div class=modal-body><div class=text-center><h1 class=profile-title>Great! Thanks for signing up.</h1><h5 class=profile-subtitle>Sign up using your schwab.com login id and password.</h5></div><div class=row><div class="col-md-8 col-md-offset-2 login-container"><form name=userForm class=form><div class="form-group col-md-12" ng-class="{ \'has-error\' : userForm.username.$invalid && !userForm.username.$pristine}"><label for=username>Login</label><input name=Username class=form-control ng-maxlength=9 id=username ng-model=username required><p ng-show="userForm.username.$invalid && !userForm.username.$pristine" class=help-block>Please enter your login.</p></div><div class="form-group col-md-12" ng-class="{ \'has-error\' : userForm.password.$invalid && !userForm.password.$pristine }"><label for=password>Password</label><input type=password name=password class=form-control id=password ng-model=password required><p ng-show="userForm.password.$invalid && !userForm.password.$pristine" class=help-block>Please enter a password.</p></div><div class=form-group><div class=text-center style="margin-top: 20px; margin-bottom: 30px; font-size: 16px"><a>Forget your password?</a></div></div><div class="form-group col-md-12"><div class=checkbox_icon><div class=squaredOne><input type=checkbox value=None id=squaredOne2 name=check ng-model="newAddress.electronicAgreement"><label for=squaredOne2></label></div><div class=text>By Signing up, you consent to the <a>Electronic Delivery and Signatures Agreement</a>, have read the <a>Privacy Policy</a>, and are currently a US</div></div></div><div class=form-group><div class=text-center><a ui-sref=setup.newCustomer class="btn btn-default">Back</a> <a ng-click=schwabLogin() class="btn btn-default">Login</a></div></div></form></div></div></div><div class=modal-footer><div class="text-center login-new-id"></div></div></div></div></div>'),a.put("templates/accountOpen/securityQuestions.html",'<hg-page><hg-page-title>Great, Now lets make sure it\'s you</hg-page-title><div ng-init=profileModel()><form name=userForm class=form novalidate><div class=form-group show-errors ng-class="{ \'has-error\' : userForm.mMaidenName.$invalid && !userForm.mMaidenName.$pristine}"><label for=mMaidenNameId>Your Mother\'s Maiden Name</label><input name=mMaidenName class=form-control id=mMaidenNameId placeholder="" required><p ng-show="userForm.mMaidenName.$invalid && !userForm.mMaidenName.$pristine" class=help-block></p></div><div class=form-group ng-class="{ \'has-error\' : userForm.sQuestion1.$invalid && !userForm.sQuestion1.$pristine }"><label for=sQuestion1Id>Choose a Security Question 1</label><select name=sQuestion1 class=form-control id=sQuestion1Id><option selected=selected></option><option>Which city were you born in?</option><option>Which state did you grow up in?</option><option>What was your first pet’s name?</option><option>What was your first girl friends’s name?</option></select><p ng-show="userForm.sQuestion1.$invalid && !userForm.sQuestion1.$pristine" class=help-block></p></div><div class=form-group show-errors ng-class="{ \'has-error\' : userForm.sQuestionAns1.$invalid && !userForm.sQuestionAns1.$pristine}"><label for=sQuestionAnsId1>Answer</label><input name=sQuestionAns1 class=form-control id=sQuestionAnsId1 placeholder="" required><p ng-show="userForm.sQuestionAns1.$invalid && !userForm.sQuestionAns1.$pristine" class=help-block></p></div><div class=form-group ng-class="{ \'has-error\' : userForm.sQuestion2.$invalid && !userForm.sQuestion2.$pristine }"><label for=sQuestion1Id2>Choose a Security Question 2</label><select name=sQuestion2 class=form-control id=sQuestion1Id2><option selected=selected></option><option>Which city were you born in?</option><option>Which state did you grow up in?</option><option>What was your first pet’s name?</option><option>What was your first girl friends’s name?</option></select><p ng-show="userForm.sQuestion2.$invalid && !userForm.sQuestion2.$pristine" class=help-block></p></div><div class=form-group show-errors ng-class="{ \'has-error\' : userForm.sQuestionAns2.$invalid && !userForm.sQuestionAns2.$pristine}"><label for=sQuestionAnsId2>Answer</label><input name=sQuestionAns2 class=form-control id=sQuestionAnsId2 placeholder="" required><p ng-show="userForm.sQuestionAns2.$invalid && !userForm.sQuestionAns2.$pristine" class=help-block></p></div><div class=button-action-bar><a ng-click=backToSchwabCustomer() class="btn btn-default">Back</a> <button type=submit ng-click=submitSecurityQuestions() class="btn btn-default" ng-disabled=userForm.$invalid>Next</button></div></form></div></hg-page>'),a.put("templates/accountOpen/setup.html","<div class=container&quot;><div id=form-views1 class=account-open-view ui-view></div></div>"),a.put("templates/app/blank.html","<div></div>"),a.put("templates/app/childheader.html",""),a.put("templates/app/comingSoon.html",'<hg-page full=true><form name=journalForm class=form novalidate><hg-remote-asset class="cms clearfix" hg-asset-id=P-7556166></hg-remote-asset></form></hg-page>'),a.put("templates/app/error.html",'<div class=row><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"><div data-ng-switch=$root.messages.messageType><div data-ng-switch-when=1><div data-ng-show=($root.messages.messageList) class=message-error><div data-ng-repeat="messageObject in $root.messages.messageList"><div id=message-container-info><div class=row><div class="col-xs-2 col-sm-1 col-md-1 col-lg-1 text-center"><i class="icon-info-circle status-icon statusIconInfo"></i></div><div class="col-xs-8 col-sm-10 col-md-10 col-lg-10"><span class=sr-only>Info</span><div hg-dynamic-html-compile dynamic-html-string=messageObject.message></div></div><div class="col-xs-2 col-sm-1 col-md-1 col-lg-1 text-center"><a data-ng-click=$root.dismissMessage(messageObject.message)><i class="icon-close-x dismiss-icon"></i></a></div></div></div></div></div></div><div data-ng-switch-when=2><div data-ng-show=($root.messages.messageList) class=message-error><div data-ng-repeat="messageObject in $root.messages.messageList"><div id=message-container><div class=row><div class="col-xs-2 col-sm-1 col-md-1 col-lg-1 text-center"><i class="icon-error status-icon" ng-class="{ statusIconDangerDark : navigation.theme === \'dark\', statusIconDangerLight : navigation.theme === \'light\'}"></i></div><div class="col-xs-8 col-sm-10 col-md-10 col-lg-10"><span class=sr-only>Error</span>{{messageObject.message}}</div><div class="col-xs-2 col-sm-1 col-md-1 col-lg-1 text-center"><a data-ng-click=$root.dismissMessage(messageObject.message)><i class="icon-close-x dismiss-icon"></i></a></div></div></div></div></div></div><div data-ng-switch-when=3><div data-ng-show=($root.messages.messageList) class=message-error><div data-ng-repeat="messageObject in $root.messages.messageList"><div id=message-container-success><div class=row><div class="col-xs-2 col-sm-1 col-md-1 col-lg-1 text-center"><i class="icon-success status-icon statusIconSuccess"></i></div><div ng-if=messages.messageTitle class="col-xs-8 col-sm-10 col-md-10 col-lg-10">{{messages.messageTitle}}</div><div ng-if=!messages.messageTitle class="col-xs-8 col-sm-10 col-md-10 col-lg-10">{{messageObject.message}}</div><div class="col-xs-2 col-sm-1 col-md-1 col-lg-1 text-center"><a data-ng-click=$root.dismissMessage(messageObject.message)><i class="icon-close-x dismiss-icon"></i></a></div><div ng-if=messages.messageTitle class="col-xs-offset-2 col-sm-offset-1 col-md-offset-1 col-lg-offset-1 col-xs-8 col-sm-10 col-md-10 col-lg-10 large-text">{{messageObject.message}}</div></div></div></div></div></div><div data-ng-switch-when=4><div data-ng-show=($root.messages.messageList) class=message-error><div data-ng-repeat="messageObject in $root.messages.messageList"><div id=message-container><div class=row><div class="col-xs-2 col-sm-1 col-md-1 col-lg-1 text-center"><i class="icon-warning status-icon" ng-class="{ statusIconWarningDark : navigation.theme === \'dark\', statusIconWarningLight : navigation.theme === \'light\'}"></i></div><div class="col-xs-8 col-sm-10 col-md-10 col-lg-10"><span class=sr-only>Warning</span>{{messageObject.message}}</div><div class="col-xs-2 col-sm-1 col-md-1 col-lg-1 text-center"><a data-ng-click=$root.dismissMessage(messageObject.message)><i class="icon-close-x dismiss-icon"></i></a></div></div></div></div></div></div></div></div></div>'),a.put("templates/app/fileUpload.html",'<hg-page><hg-page-title>Upload a File</hg-page-title><div data-ng-app="" data-ng-init="test=[\'test\',\'test2\',\'test3\']"></div><h2 class=text-center>Upload a file and associate it with a Schwab Intelligent Portfolios account.</h2><ul class=text-left><li>Please ensure that the images don\'t contain passwords.</li><li>Please ensure that the images are black and white with no highlighting.</li><li>Allowable extension types - bmp, gif, png, tif, tiff, pdf, jpeg, jpg, doc, docx, xls, xlsx</li><li>Files should not exceed 3 MB.</li></ul><p data-ng-show="test.length > 1" class=padding-top-11>Selected Files</p><p data-ng-show="test.length < 2" class=padding-top-11>Selected File</p><form data-ng-repeat="x in test" name=documentForm data-ng-class="{ \'has-error\': x == test[0]}" style="margin-bottom: 0"><div><input name=fileUploader class=form-control id={{x}} data-ng-disabled="x == test[1]" required><p class=help-block role=alert ng-show="x == test[0]">File submission error. Please try again.</p><a data-ng-click="" data-ng-if="test.length < 5 && $last"><u>Add another file</u></a></div></form><h3 class=padding-top-11>Upload to Account</h3><form name=acctDocumentsForm class=form novalidate><div class=form-group ng-class="{ \'has-error\' : acctDocumentsForm.hgAccount.$invalid && acctDocumentsForm.hgAccount.$dirty}"><div hg-selector items-list=documentAccountSelector.itemsList selected-item=documentAccountSelector.selectedItem title="<Select an account>" header-title=Account comp-id=1 style-id=1 hide-balance=true ng-required=true></div></div></form><div class=row><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 padding-0"><hg-button-group><hg-button ng-if=!hideback ng-click=back() ng-disabled=backdisabled>Back</hg-button><hg-button-primary ng-click=submitfile() ng-disabled=nextdisabled aria-label={{nextlabel}}>Submit File</hg-button-primary></hg-button-group></div></div></hg-page>'),a.put("templates/app/footer.html",""),a.put("templates/app/header-desktop.html",'<div ng-switch on=navigation.headerType class=header-web><div ng-switch-when=POSTLOGIN class=post-login><div class="navbar navbar-fixed-top navbar-default" role=navigation><div class=container-fluid><div class=navbar-header><div class=brand ui-sref=charts><logo></logo><div ng-if=$root.isIIP class=header-firm-name><h2 class=brand-title>{{$root.customizationInfo.getAdvisorInformation().FirmName}}</h2></div></div></div><div class="collapse navbar-collapse" id=bs-example-navbar-collapse-1><ul class="nav navbar-nav navbar-right" data-ng-show=session.isLoggedIn><li><a class=contact-number><i class=icon-phone></i><span class=sr-only>Contact Number Graphics Icon</span>{{$root.customizationInfo.getPhoneDisplay()}}</a></li><li style=padding-top:16px ng-if=$root.isSIP><div class=pull-left><a><i class=icon-chat></i><span class=sr-only>Chat Graphics Icon</span></a></div><div class=pull-right style="padding:0 10px"><launch-chat is-user-a-client=session.isLoggedIn chat-label="" chat-link-title="Chat"></div></li><li class=dropdown><a href=# class=dropdown-toggle bs-dropdown aria-haspopup=true aria-expanded=false data-placement=bottom-right>Hi,&nbsp;{{$root.session.identity.displayName}}<i class=icon-arrow-down></i></a><ul class=dropdown-menu role=menu><li role=menuitem><a role=presentation data-ng-click=showPersonalProfile() ng-enter=showPersonalProfile()>Personal Information</a></li><li class=divider></li><li role=menuitem><a role=presentation data-ng-click=session.logout() ng-enter=session.logout()>Log Out</a></li></ul></li></ul></div></div></div></div><div ng-switch-when=ENROLLMENT class=enroll><div class="navbar navbar-fixed-top navbar-default" role=navigation><div class=container-fluid><div class=navbar-header><div class=brand data-ng-click=goDefaultLandingPage()><logo></logo><div ng-if=$root.isIIP class=header-firm-name><h2 class=brand-title>{{$root.customizationInfo.getAdvisorInformation().FirmName}}</h2></div></div></div><ul class="nav navbar-nav navbar-right" role=menu><li role=presentation><a role=menuitem class=contact-number><i class=icon-phone></i><span class=sr-only>Contact Number Graphics Icon</span>{{$root.customizationInfo.getPhoneDisplay()}}</a></li><li style=padding-top:16px ng-if=$root.isSIP role=menuitem><div class=pull-left><a><i class=icon-chat></i><span class=sr-only>Chat Graphics Icon</span></a></div><div class=pull-right style="padding:0 10px"><launch-chat is-user-a-client=session.isLoggedIn chat-label="" chat-link-title="Chat"></div></li><li class={{$root.disabledLinkClass}} data-ng-hide="session.isLoggedIn || $root.isIIP" role=menuitem><a role=presentation ng-click=doProspectSave() ng-enter=doProspectSave()><i class=icon-clock></i><span class=sr-only>Save For Later Graphics Icon</span>Save for Later</a></li><li data-ng-hide=session.isLoggedIn role=menuitem><a role=presentation data-ng-click=session.login() ng-enter=session.login()><i class=icon-person></i><span class=sr-only>Login Graphics Icon</span>Log In</a></li><li data-ng-show=session.isLoggedIn class=dropdown role=menuitem><a role=presentation href=# class=dropdown-toggle aria-label={{session.identity.displayName}} bs-dropdown aria-haspopup=true aria-expanded=false data-placement=bottom-right><i class=icon-person></i><span class=sr-only>Display Name Graphics Icon</span>{{session.identity.displayName}}<i class=icon-arrow-down></i></a><ul class=dropdown-menu role=menu><li role=menuitem><a role=presentation data-ng-click=session.logout() ng-enter=session.logout()>Log Out</a></li></ul></li></ul></div></div></div><div ng-switch-when=PREENROLLMENT class=pre-enroll><div class="navbar navbar-fixed-top navbar-default" role=navigation><div class=container-fluid><div class=navbar-header><div class=brand data-ng-click=goDefaultLandingPage()><logo></logo><div class=header-firm-name>{{$root.customizationInfo.getAdvisorInformation().FirmName}}</div></div></div><ul class="nav navbar-nav navbar-right"><li><button type=button class="btn btn-default btn-primary btn-sm-navbar" data-ng-click=session.login()>Login</button></li><li><button type=button class="btn btn-default btn-sm-navbar btn-started" ui-sref=getStarted>Get Started</button></li></ul></div></div></div><div ng-switch-when=MODAL class=modal-web><div class="navbar navbar-fixed-top navbar-default" role=navigation><div class=container-fluid><div class=navbar-header><div class=brand><logo></logo><div ng-if=$root.isIIP class=header-firm-name><h2 class=brand-title>{{$root.customizationInfo.getAdvisorInformation().FirmName}}</h2></div></div></div><ul class="nav navbar-nav navbar-right"><li><a><i class=icon-plus></i></a></li></ul></div></div></div><div ng-switch-when=POPOVER class=modal-mobile><div class="navbar navbar-fixed-top navbar-default" role=navigation><div class=container-fluid><div class=navbar-header><div class=navigation-title>{{navigation.title}}</div><div ng-if="navigation.back!==\'hide\'" ng-click=goBack() ng-enter=goBack() class="brand brand-preenrollment"><a><i class=icon-arrow-left-tail></i></a></div><div class=navbar-mobile-right data-ng-click=closeModal() ng-enter=closeModal()><a><i class=icon-close-x></i><span class=sr-only>Close Graphics Icon</span></a></div></div></div></div></div><div ng-switch-when=NONE class=modal-web><div class="navbar navbar-fixed-top navbar-default" role=navigation><div class=container-fluid><div class=navbar-header><div class=brand><div class=headerlogo ng-if="!navigation.stateId == \'programSelector\'" ng-style=$root.logostyle></div></div></div></div></div></div></div>'),a.put("templates/app/header-mobile.html",'<div ng-switch on=navigation.mobileHeaderType class=header-mobile><div ng-switch-when=POSTLOGIN class=post-login><div class="navbar navbar-fixed-top navbar-default navbar-default-mobile" role=navigation><div class=container-fluid><div class=navbar-header><div class="brand brand-preenrollment"><a role=button id=iconMenuId aria-expanded=false aria-haspopup=true ng-click=showMenu() ng-enter=showMenu()><i class=icon-menu></i><span class=sr-only>toggle Menu</span></a></div><div class="header-account-name visible-xs"><a class=account-name></a></div></div></div></div></div><div ng-switch-when=CHILD class=child><div class="navbar navbar-fixed-top navbar-default" role=navigation><div class=container-fluid><div class=navbar-header><div class=navigation-title>{{navigation.title}}</div><div ng-if="navigation.back==\'menu\'" ng-click=showMenu() ng-enter=showMenu() class="brand brand-preenrollment"><a><i class=icon-menu></i><span class=sr-only>Menu Graphics Icon</span></a></div><div ng-if="navigation.back!=\'menu\'" ng-click=goBack() ng-enter=goBack() class="brand brand-preenrollment"><a><i class=icon-arrow-left-tail></i></a></div></div></div></div></div><div ng-switch-when=ENROLLMENT class=enroll><div class="navbar navbar-fixed-top navbar-default" role=navigation><div class=container-fluid><div class=navbar-header><span class=navbar-mobile-right><a href=tel://{{$root.customizationInfo.getPhoneDisplay()}}><i class=icon-phone></i><span class=sr-only>Contact Number Graphics Icon</span></a> <a class={{$root.disabledLinkClass}} data-ng-hide="session.isLoggedIn || $root.isIIP" data-ng-click=doProspectSave() ng-enter=doProspectSave()><i class=icon-clock></i><span class=sr-only>Save Graphics Icon</span></a> <a data-ng-hide=session.isLoggedIn data-ng-click=session.login() ng-enter=session.login()><i class=icon-person></i><span class=sr-only>Login Graphics Icon</span></a> <a data-ng-show=session.isLoggedIn data-ng-click=logout() ng-enter=logout()><i class=icon-exit></i><span class=sr-only>Logout Graphics Icon</span></a></span><div class=brand data-ng-click=goDefaultLandingPage()><logo></logo></div></div></div></div></div><div ng-switch-when=PREENROLLMENT class=pre-enroll><div class="navbar navbar-fixed-top navbar-default" role=navigation><div class=container-fluid><div class=navbar-header><span class=navbar-mobile-right><a data-ng-click=""><i class=icon-clock></i></a> <a data-ng-hide=session.isLoggedIn data-ng-click=session.login() ng-enter=session.login()><i class=icon-person></i><span class=sr-only>Login Graphics Icon</span></a> <a data-ng-show=session.isLoggedIn data-ng-click=session.logout() ng-enter=session.logout()><i class=icon-exit></i><span class=sr-only>Logout Graphics Icon</span></a></span><div class="brand brand-preenrollment" data-ng-click=goDefaultLandingPage()><logo></logo></div></div></div></div></div><div ng-switch-when=MODAL class=modal-mobile><div class="navbar navbar-fixed-top navbar-default" role=navigation><div class=container-fluid><div class=navbar-header><div class=navigation-title>{{navigation.title}}</div><div ng-if="navigation.back!==\'hide\'" ng-click=goBack() ng-enter=goBack() class="brand brand-preenrollment"><a><i class=icon-arrow-left-tail></i></a></div><div class=navbar-mobile-right data-ng-click=closeModal() ng-enter=closeModal()><a><i class=icon-close-x></i><span class=sr-only>Close Graphics Icon</span></a></div><div class="brand brand-preenrollment"></div></div></div></div></div><div ng-switch-when=EMPTY class=modal-mobile><div class="navbar navbar-fixed-top navbar-default" role=navigation><div class=container-fluid><div class=navbar-header><div class="brand brand-preenrollment"></div></div></div></div></div><div ng-switch-when=NONE><div ng-class="{ dark : navigation.theme === \'dark\', light : navigation.theme === \'light\'}" class=navbar-none></div></div></div>'),
a.put("templates/app/header.html","<div><div ng-switch on=screenSize><div ng-switch-when=DESKTOP><div data-ng-include=\"'templates/app/header-desktop.html'\"></div></div><div ng-switch-when=MOBILE><div data-ng-include=\"'templates/app/header-mobile.html'\"></div></div></div></div>"),a.put("templates/app/helloWorld.html","<div>Hello World</div>"),a.put("templates/app/menu.html",'<div ng-class="{\'visible-menu\' : isMobile }"><div class=container-menu role=navigation><ul role=menu><li role=menuitem class="passive-text padding-top visible-lg visible-md account"><h3>ACCOUNTS</h3></li><li role=menuitem ng-tap ng-click=showDashboard(a); class=account ng-repeat="a in $root.accounts" ng-class="{\'active\': a.isActive}"><small-donut portfolio={{a.model.Name}}></small-donut><div class=account-menu-details><div class=menu-title><span class=sr-only>account</span><b>{{a.name}}</b></div><div class=menu-balance><span class=sr-only>balance</span>{{a.balance}}</div><div data-ng-if="a.drift.GoalState != 0 && $root.isSIP" class={{getGoalStateUIClass(a.drift.GoalState)}}><b>{{a.drift.ShortGoalNameText}}</b></div></div></li><li role=menuitem class=passive-text tabindex=0><span class=total>Total<span class=padding-left-20>{{$root.totalBalance}}</span></span></li><li role=menuitem ng-tap ng-click=openNewAccount(); class=item-text><i class="icon-plus-circle item-icon"></i><span><span class=sr-only>file graphics icon</span>Start a New Portfolio</span></li><li role=menuitem ng-class="{\'active\': activeMenuStateName == \'moveMoney.moveMoneyLaunch\'}" class=item-text ng-tap ng-click=showDeposit()><i class="icon-transfer item-icon"></i><span><span class=sr-only>transfer graphics icon</span>Add/Withdraw Money</span></li><li role=menuitem ng-class="{\'active\': activeMenuStateName == \'accountDocuments\'}" class=item-text ng-tap ng-click=showDocuments();><i class="icon-document item-icon"></i><span class=sr-only>document graphics icon</span>Statements &amp; Documents</li><li role=menuitem ng-if=isMobile ng-class="{\'active\': activeMenuStateName == \'personalProfile.manageprofile\'}" class=item-text ng-tap ng-click=showPersonalProfile();><i class="icon-person item-icon"></i><span><span class=sr-only>person graphics icon</span>Personal</span> Information</li><li role=menuitem ng-class="{\'active\': activeMenuStateName == \'contactUs.contactUsLaunch\'}" class=item-text ng-tap ng-click=showContactUs();><i class="icon-phone item-icon"></i><span><span class=sr-only>phone graphics icon</span>Contact Us</span></li><li role=menuitem ng-class="{\'active\': activeMenuStateName == \'agreements.home\'}" class=item-text ng-tap ng-click=showAgreements();><i class="icon-checked-text item-icon"></i><span class=sr-only>checked text graphics icon</span>Legal &amp; Account Forms</li><li role=menuitem ng-if="hasClientFeature(\'Insights\')" ng-class="{\'active\': activeMenuStateName == \'insights.home\'}" class=item-text ng-tap ng-click=showInsights();><i class="icon-portfolio item-icon"></i><span><span class=sr-only>eye graphics icon</span>Whitepapers</span></li><li role=menuitem ng-if="hasClientFeature(\'Blog\')" ng-class="{\'active\': activeMenuStateName == \'journal.home\'}" class=item-text ng-tap ng-click=showBlog();><i class="icon-newspaper item-icon"></i><span><span class=sr-only>newspaper graphics icon</span>Investing Insights</span></li><li role=menuitem ng-if="hasClientFeature(\'AboutSIP\')" ng-class="{\'active\': activeMenuStateName == \'intelligentPortfolios.home\'}" class=item-text ng-tap ng-click=showFaq();><i class="icon-info-circle item-icon"></i><span><span class=sr-only>portfolio graphics icon</span>FAQ</span></li><li role=menuitem ng-if=$root.isSIP ng-class="{\'active\': activeMenuStateName == \'comingSoon\'}" class=item-text ng-tap ng-click=showComingSoon();><i class="icon-coming-soon item-icon"></i><span><span class=sr-only>coming soon graphics icon</span>Coming Soon</span></li><li role=menuitem ng-if=isMobile ng-class=passive class=item-text ng-tap ng-click=doLogout();><i class="icon-exit item-icon"></i><span><span class=sr-only>exit graphics icon</span>Logout</span></li></ul></div></div>'),a.put("templates/app/message.html",'<hg-page class="message dark"><div data-ng-if=!$root.isIIP class="messageLogo visible-sm visible-xs"></div><div data-ng-if=$root.isIIP class="messageLogo iip visible-sm visible-xs"></div><h1 class="cmsFooterLight padding-top-24 text-center">{{message}}</h1><div class="visible-sm visible-xs text-center" ng-switch=buttonViewId><div ng-switch-when=1><div><hg-button-primary ui-sref=login>Login</hg-button-primary></div><div><hg-button ui-sref=getStarted>Get Started</hg-button></div></div><div ng-switch-when=2><div><hg-button-primary ng-click=goHome()>Home</hg-button-primary></div></div><div ng-switch-when=3><div><hg-button-primary ui-sref=getStarted>Get Started</hg-button-primary></div></div><div ng-switch-when=4><div><hg-button-primary ng-click=goLaunch()>OK</hg-button-primary></div></div><div ng-switch-when=5><div><hg-button-primary ng-click=goSignUp()>Sign Up</hg-button-primary></div></div></div></hg-page>'),a.put("templates/app/modalBackdrop.html",'<div class="modal-backdrop fade in"></div>'),a.put("templates/app/preLoginMenu.html",'<div class="container-menu pre-login-menu"><ul class=nav><li class="text-center padding-top-21"><button type=button class="btn btn-default btn-primary btn-sm-navbar" data-ng-click=session.login()>Login</button></li><li class="text-center padding-bottom-21"><button type=button class="btn btn-default btn-sm-navbar btn-started" ui-sref=getStarted>Get Started</button></li><li data-ng-click=showIntelligentPortfolios(); class=active tabindex=0><i class=icon-portfolio></i>About Intelligent Portfolios</li><li data-ng-click=showInsights(); ng-enter=showInsights() tabindex=0><i class=icon-eye></i>Insights</li><li data-ng-click=showBlog(); ng-enter=showBlog() tabindex=0><i class=icon-newspaper></i> Blog</li><li data-ng-click="" tabindex=0><i class=icon-phone></i> Contact Us</li><li data-ng-click="" tabindex=0><i class=icon-checked-text></i> Disclosures &amp; Agreements</li><li data-ng-click="" tabindex=0><i class=icon-download></i> Download the App</li></ul></div>'),a.put("templates/app/test-asset-remote.html","<div><hg-remote-asset hg-asset-id={{assetId}}></hg-remote-asset></div>"),a.put("templates/app/theme.html",'<div class=container><div class=row><div class=col-lg-6><p class=bs-component><div><label class="control-label space">Choose Style:</label></div><a ui-sref=styleguide ng-click="changeTheme(\'default\')" class="btn btn-primary">Default</a> <a ui-sref=styleguide ng-click="changeTheme(\'cerulean\')" class="btn btn-success">Cerulean</a> <a ui-sref=styleguide ng-click="changeTheme(\'slate\')" class="btn btn-info">Slate</a> <a ui-sref=styleguide ng-click="changeTheme(\'cosmo\')" class="btn btn-primary">Cosmo</a> <a ui-sref=styleguide ng-click="changeTheme(\'sandstone\')" class="btn btn-warning">Sandstone</a></p></div></div><div class=bs-docs-section><div class=page-header><div class=row><div class=col-lg-12><h1 id=buttons>Buttons</h1></div></div></div><div class=row><div class=col-lg-6><p class=bs-component><a href=#/StleGuide class="btn btn-default">Default</a> <a href=#/StleGuide class="btn btn-primary">Primary</a> <a href=#/StleGuide class="btn btn-success">Success</a> <a href=#/StleGuide class="btn btn-info">Info</a> <a href=#/StleGuide class="btn btn-warning">Warning</a> <a href=#/StleGuide class="btn btn-danger">Danger</a> <a href=#/StleGuide class="btn btn-link">Link</a></p><p class=bs-component><a href=#/StleGuide class="btn btn-default disabled">Default</a> <a href=#/StleGuide class="btn btn-primary disabled">Primary</a> <a href=#/StleGuide class="btn btn-success disabled">Success</a> <a href=#/StleGuide class="btn btn-info disabled">Info</a> <a href=#/StleGuide class="btn btn-warning disabled">Warning</a> <a href=#/StleGuide class="btn btn-danger disabled">Danger</a> <a href=#/StleGuide class="btn btn-link disabled">Link</a></p><div style="margin-bottom: 15px"><div class="btn-toolbar bs-component" style="margin: 0"><div class=btn-group><a href=#/StleGuide class="btn btn-default">Default</a> <a href=#/StleGuide class="btn btn-default dropdown-toggle" data-toggle=dropdown><span class=caret></span></a><ul class=dropdown-menu><li><a href=#/StleGuide>Action</a></li><li><a href=#/StleGuide>Another action</a></li><li><a href=#/StleGuide>Something else here</a></li><li class=divider></li><li><a href=#/StleGuide>Separated link</a></li></ul></div><div class=btn-group><a href=#/StleGuide class="btn btn-primary">Primary</a> <a href=#/StleGuide class="btn btn-primary dropdown-toggle" data-toggle=dropdown><span class=caret></span></a><ul class=dropdown-menu><li><a href=#/StleGuide>Action</a></li><li><a href=#/StleGuide>Another action</a></li><li><a href=#/StleGuide>Something else here</a></li><li class=divider></li><li><a href=#/StleGuide>Separated link</a></li></ul></div><div class=btn-group><a href=#/StleGuide class="btn btn-success">Success</a> <a href=#/StleGuide class="btn btn-success dropdown-toggle" data-toggle=dropdown><span class=caret></span></a><ul class=dropdown-menu><li><a href=#/StleGuide>Action</a></li><li><a href=#/StleGuide>Another action</a></li><li><a href=#/StleGuide>Something else here</a></li><li class=divider></li><li><a href=#/StleGuide>Separated link</a></li></ul></div><div class=btn-group><a href=#/StleGuide class="btn btn-info">Info</a> <a href=#/StleGuide class="btn btn-info dropdown-toggle" data-toggle=dropdown><span class=caret></span></a><ul class=dropdown-menu><li><a href=#/StleGuide>Action</a></li><li><a href=#/StleGuide>Another action</a></li><li><a href=#/StleGuide>Something else here</a></li><li class=divider></li><li><a href=#/StleGuide>Separated link</a></li></ul></div><div class=btn-group><a href=#/StleGuide class="btn btn-warning">Warning</a> <a href=#/StleGuide class="btn btn-warning dropdown-toggle" data-toggle=dropdown><span class=caret></span></a><ul class=dropdown-menu><li><a href=#/StleGuide>Action</a></li><li><a href=#/StleGuide>Another action</a></li><li><a href=#/StleGuide>Something else here</a></li><li class=divider></li><li><a href=#/StleGuide>Separated link</a></li></ul></div></div></div><p class=bs-component><a href=#/StleGuide class="btn btn-primary btn-lg">Large button</a> <a href=#/StleGuide class="btn btn-primary">Default button</a> <a href=#/StleGuide class="btn btn-primary btn-sm">Small button</a> <a href=#/StleGuide class="btn btn-primary btn-xs">Mini button</a></p></div><div class=col-lg-6><p class=bs-component><a href=#/StleGuide class="btn btn-default btn-lg btn-block">Block level button</a></p><div class=bs-component style="margin-bottom: 15px"><div class="btn-group btn-group-justified"><a href=#/StleGuide class="btn btn-default">Left</a> <a href=#/StleGuide class="btn btn-default">Middle</a> <a href=#/StleGuide class="btn btn-default">Right</a></div></div><div class=bs-component style="margin-bottom: 15px"><div class=btn-toolbar><div class=btn-group><a href=#/StleGuide class="btn btn-default">1</a> <a href=#/StleGuide class="btn btn-default">2</a> <a href=#/StleGuide class="btn btn-default">3</a> <a href=#/StleGuide class="btn btn-default">4</a></div><div class=btn-group><a href=#/StleGuide class="btn btn-default">5</a> <a href=#/StleGuide class="btn btn-default">6</a> <a href=#/StleGuide class="btn btn-default">7</a></div><div class=btn-group><a href=#/StleGuide class="btn btn-default">8</a><div class=btn-group><a href=#/StleGuide class="btn btn-default dropdown-toggle" data-toggle=dropdown>Dropdown <span class=caret></span></a><ul class=dropdown-menu><li><a href=#/StleGuide>Dropdown link</a></li><li><a href=#/StleGuide>Dropdown link</a></li><li><a href=#/StleGuide>Dropdown link</a></li></ul></div></div></div></div><div class=bs-component><div class=btn-group-vertical><a href=#/StleGuide class="btn btn-default">Button</a> <a href=#/StleGuide class="btn btn-default">Button</a> <a href=#/StleGuide class="btn btn-default">Button</a> <a href=#/StleGuide class="btn btn-default">Button</a></div></div></div></div></div><div class=bs-docs-section><div class=row><div class=col-lg-12><div class=page-header><h1 id=forms>Forms</h1></div></div></div><div class=row><div class=col-lg-6><div class="well bs-component"><form class=form-horizontal><fieldset><legend>Legend</legend><div class=form-group><label for=inputEmail class="col-lg-2 control-label">Email</label><div class=col-lg-10><input class=form-control id=inputEmail placeholder=Email></div></div><div class=form-group><label for=inputPassword class="col-lg-2 control-label">Password</label><div class=col-lg-10><input type=password class=form-control id=inputPassword placeholder=Password><div class=checkbox><label><input type=checkbox> Checkbox</label></div></div></div><div class=form-group><label for=textArea class="col-lg-2 control-label">Textarea</label><div class=col-lg-10><textarea class=form-control rows=3 id=textArea></textarea><span class=help-block>A longer block of help text that breaks onto a new line and may extend beyond one line.</span></div></div><div class=form-group><label class="col-lg-2 control-label">Radios</label><div class=col-lg-10><div class=radio><label><input type=radio name=optionsRadios id=optionsRadios1 value=option1 checked=checked> Option one is this</label></div><div class=radio><label><input type=radio name=optionsRadios id=optionsRadios2 value=option2> Option two can be something else</label></div></div></div><div class=form-group><label for=select class="col-lg-2 control-label">Selects</label><div class=col-lg-10><select class=form-control id=select><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select><br><select multiple=multiple class=form-control><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select></div></div><div class=form-group><div class="col-lg-10 col-lg-offset-2"><button class="btn btn-default">Cancel</button> <button type=submit class="btn btn-primary">Submit</button></div></div></fieldset></form></div></div><div class="col-lg-4 col-lg-offset-1"><form class=bs-component><div class=form-group><label class=control-label for=focusedInput>Focused input</label><input class=form-control id=focusedInput value="This is focused..."></div><div class=form-group><label class=control-label for=disabledInput>Disabled input</label><input class=form-control id=disabledInput placeholder="Disabled input here..." disabled=disabled></div><div class="form-group has-warning"><label class=control-label for=inputWarning>Input warning</label><input class=form-control id=inputWarning></div><div class="form-group has-error"><label class=control-label for=inputError>Input error</label><input class=form-control id=inputError></div><div class="form-group has-success"><label class=control-label for=inputSuccess>Input success</label><input class=form-control id=inputSuccess></div><div class=form-group><label class=control-label for=inputLarge>Large input</label><input class="form-control input-lg" id=inputLarge></div><div class=form-group><label class=control-label for=inputDefault>Default input</label><input class=form-control id=inputDefault></div><div class=form-group><label class=control-label for=inputSmall>Small input</label><input class="form-control input-sm" id=inputSmall></div><div class=form-group><label class=control-label>Input addons</label><div class=input-group><span class=input-group-addon>$</span> <input class=form-control> <span class=input-group-btn><button class="btn btn-default" type=button>Button</button></span></div></div></form></div></div></div><div class=bs-docs-section><div class=row><div class=col-lg-12><div class=page-header><h1 id=type>Typography</h1></div></div></div><div class=row><div class=col-lg-4><div class=bs-component><h1>Heading 1</h1><h2>Heading 2</h2><h3>Heading 3</h3><h4>Heading 4</h4><h5>Heading 5</h5><h6>Heading 6</h6><p class=lead>Vivamus sagittis lacus vel augue laoreet rutrum faucibus dolor auctor.</p></div></div></div></div><div class=bs-docs-section><div class=row><div class=col-lg-12><div class=page-header><h1 id=tables>Tables</h1></div><div class=bs-component><table class="table table-striped table-hover"><thead><tr><th>#/StleGuide</th><th>Column heading</th><th>Column heading</th><th>Column heading</th></tr></thead><tbody><tr><td>1</td><td>Column content</td><td>Column content</td><td>Column content</td></tr><tr><td>2</td><td>Column content</td><td>Column content</td><td>Column content</td></tr><tr class=info><td>3</td><td>Column content</td><td>Column content</td><td>Column content</td></tr><tr class=success><td>4</td><td>Column content</td><td>Column content</td><td>Column content</td></tr><tr class=danger><td>5</td><td>Column content</td><td>Column content</td><td>Column content</td></tr><tr class=warning><td>6</td><td>Column content</td><td>Column content</td><td>Column content</td></tr><tr class=active><td>7</td><td>Column content</td><td>Column content</td><td>Column content</td></tr></tbody></table></div></div></div></div><div class=bs-docs-section><div class=row><div class=col-lg-12><div class=page-header><h1 id=nav>Navs</h1></div></div></div><div class=row><div class=col-lg-4><h2 id=nav-tabs>Tabs</h2><div class=bs-component><ul class="nav nav-tabs" style="margin-bottom: 15px"><li class=active><a href=#/StleGuidehome data-toggle=tab>Home</a></li><li><a href=#/StleGuideprofile data-toggle=tab>Profile</a></li><li class=disabled><a>Disabled</a></li><li class=dropdown><a class=dropdown-toggle data-toggle=dropdown href=#/StleGuide>Dropdown <span class=caret></span></a><ul class=dropdown-menu><li><a href=#/StleGuidedropdown1 data-toggle=tab>Action</a></li><li class=divider></li><li><a href=#/StleGuidedropdown2 data-toggle=tab>Another action</a></li></ul></li></ul></div></div><div class=col-lg-4><h2 id=nav-pills>Pills</h2><div class=bs-component><ul class="nav nav-pills"><li class=active><a href=#/StleGuide>Home</a></li><li><a href=#/StleGuide>Profile</a></li><li class=disabled><a href=#/StleGuide>Disabled</a></li><li class=dropdown><a class=dropdown-toggle data-toggle=dropdown href=#/StleGuide>Dropdown <span class=caret></span></a><ul class=dropdown-menu><li><a href=#/StleGuide>Action</a></li><li><a href=#/StleGuide>Another action</a></li><li><a href=#/StleGuide>Something else here</a></li><li class=divider></li><li><a href=#/StleGuide>Separated link</a></li></ul></li></ul></div><br><div class=bs-component><ul class="nav nav-pills nav-stacked" style="max-width: 300px"><li class=active><a href=#/StleGuide>Home</a></li><li><a href=#/StleGuide>Profile</a></li><li class=disabled><a href=#/StleGuide>Disabled</a></li><li class=dropdown><a class=dropdown-toggle data-toggle=dropdown href=#/StleGuide>Dropdown <span class=caret></span></a><ul class=dropdown-menu><li><a href=#/StleGuide>Action</a></li><li><a href=#/StleGuide>Another action</a></li><li><a href=#/StleGuide>Something else here</a></li><li class=divider></li><li><a href=#/StleGuide>Separated link</a></li></ul></li></ul></div></div><div class=col-lg-4><h2 id=nav-breadcrumbs>Breadcrumbs</h2><div class=bs-component><ul class=breadcrumb><li class=active>Home</li></ul><ul class=breadcrumb><li><a href=#/StleGuide>Home</a></li><li class=active>Library</li></ul><ul class=breadcrumb style="margin-bottom: 5px"><li><a href=#/StleGuide>Home</a></li><li><a href=#/StleGuide>Library</a></li><li class=active>Data</li></ul></div></div></div><div class=row><div class=col-lg-4><h2 id=pagination>Pagination</h2><div class=bs-component><ul class=pagination><li class=disabled><a href=#/StleGuide>&laquo;</a></li><li class=active><a href=#/StleGuide>1</a></li><li><a href=#/StleGuide>2</a></li><li><a href=#/StleGuide>3</a></li><li><a href=#/StleGuide>4</a></li><li><a href=#/StleGuide>5</a></li><li><a href=#/StleGuide>&raquo;</a></li></ul><ul class="pagination pagination-lg"><li class=disabled><a href=#/StleGuide>&laquo;</a></li><li class=active><a href=#/StleGuide>1</a></li><li><a href=#/StleGuide>2</a></li><li><a href=#/StleGuide>3</a></li><li><a href=#/StleGuide>&raquo;</a></li></ul><ul class="pagination pagination-sm"><li class=disabled><a href=#/StleGuide>&laquo;</a></li><li class=active><a href=#/StleGuide>1</a></li><li><a href=#/StleGuide>2</a></li><li><a href=#/StleGuide>3</a></li><li><a href=#/StleGuide>4</a></li><li><a href=#/StleGuide>5</a></li><li><a href=#/StleGuide>&raquo;</a></li></ul></div></div><div class=col-lg-4><h2 id=pager>Pager</h2><div class=bs-component><ul class=pager><li><a href=#/StleGuide>Previous</a></li><li><a href=#/StleGuide>Next</a></li></ul><ul class=pager><li class="previous disabled"><a href=#/StleGuide>&larr; Older</a></li><li class=next><a href=#/StleGuide>Newer &rarr;</a></li></ul></div></div><div class=col-lg-4></div></div></div><div class=bs-docs-section><div class=row><div class=col-lg-12><div class=page-header><h1 id=indicators>Indicators</h1></div></div></div><div class=row><div class=col-lg-12><h2>Alerts</h2><div class=bs-component><div class="alert alert-dismissable alert-warning"><button type=button class=close data-dismiss=alert>&times;</button><h4>Warning!</h4><p>Best check yo self, you\'re not looking too good. Nulla vitae elit libero, a pharetra augue. Praesent commodo cursus magna, <a href=#/StleGuide class=alert-link>vel scelerisque nisl consectetur et</a>.</p></div></div></div></div><div class=row><div class=col-lg-4><div class=bs-component><div class="alert alert-dismissable alert-danger"><button type=button class=close data-dismiss=alert>&times;</button> <strong>Oh snap!</strong> <a href=#/StleGuide class=alert-link>Change a few things up</a> and try submitting again.</div></div></div><div class=col-lg-4><div class=bs-component><div class="alert alert-dismissable alert-success"><button type=button class=close data-dismiss=alert>&times;</button> <strong>Well done!</strong> You successfully read <a href=#/StleGuide class=alert-link>this important alert message</a>.</div></div></div><div class=col-lg-4><div class=bs-component><div class="alert alert-dismissable alert-info"><button type=button class=close data-dismiss=alert>&times;</button> <strong>Heads up!</strong> This <a href=#/StleGuide class=alert-link>alert needs your attention</a>, but it\'s not super important.</div></div></div></div><div class=row><div class=col-lg-4><h2>Labels</h2><div class=bs-component style="margin-bottom: 40px"><span class="label label-default">Default</span> <span class="label label-primary">Primary</span> <span class="label label-success">Success</span> <span class="label label-warning">Warning</span> <span class="label label-danger">Danger</span> <span class="label label-info">Info</span></div></div><div class=col-lg-4><h2>Badges</h2><div class=bs-component><ul class="nav nav-pills"><li class=active><a href=#/StleGuide>Home <span class=badge>42</span></a></li><li><a href=#/StleGuide>Profile <span class=badge></span></a></li><li><a href=#/StleGuide>Messages <span class=badge>3</span></a></li></ul></div></div></div></div><div class=bs-docs-section><div class=row><div class=col-lg-12><div class=page-header><h1 id=progress>Progress bars</h1></div><h3 id=progress-basic>Basic</h3><div class=bs-component><div class=progress><div class=progress-bar style="width: 60%"></div></div></div><h3 id=progress-alternatives>Contextual alternatives</h3><div class=bs-component><div class=progress><div class="progress-bar progress-bar-info" style="width: 20%"></div></div><div class=progress><div class="progress-bar progress-bar-success" style="width: 40%"></div></div><div class=progress><div class="progress-bar progress-bar-warning" style="width: 60%"></div></div><div class=progress><div class="progress-bar progress-bar-danger" style="width: 80%"></div></div></div><h3 id=progress-striped>Striped</h3><div class=bs-component><div class="progress progress-striped"><div class="progress-bar progress-bar-info" style="width: 20%"></div></div><div class="progress progress-striped"><div class="progress-bar progress-bar-success" style="width: 40%"></div></div><div class="progress progress-striped"><div class="progress-bar progress-bar-warning" style="width: 60%"></div></div><div class="progress progress-striped"><div class="progress-bar progress-bar-danger" style="width: 80%"></div></div></div><h3 id=progress-animated>Animated</h3><div class=bs-component><div class="progress progress-striped active"><div class=progress-bar style="width: 45%"></div></div></div><h3 id=progress-stacked>Stacked</h3><div class=bs-component><div class=progress><div class="progress-bar progress-bar-success" style="width: 35%"></div><div class="progress-bar progress-bar-warning" style="width: 20%"></div><div class="progress-bar progress-bar-danger" style="width: 10%"></div></div></div></div></div></div><div class=bs-docs-section><div class=row><div class=col-lg-12><div class=page-header><h1 id=container>Containers</h1></div><div class=bs-component><div class=jumbotron><h1>Jumbotron</h1><p>This is a simple hero unit, a simple jumbotron-style component for calling extra attention to featured content or information.</p><p><a class="btn btn-primary btn-lg">Learn more</a></p></div></div></div></div><div class=row><div class=col-lg-12><h2>List groups</h2></div></div><div class=row><div class=col-lg-4><div class=bs-component><ul class=list-group><li class=list-group-item><span class=badge>14</span> Cras justo odio</li><li class=list-group-item><span class=badge>2</span> Dapibus ac facilisis in</li><li class=list-group-item><span class=badge>1</span> Morbi leo risus</li></ul></div></div><div class=col-lg-4><div class=bs-component><div class=list-group><a href=#/StleGuide class="list-group-item active">Cras justo odio</a> <a href=#/StleGuide class=list-group-item>Dapibus ac facilisis in</a> <a href=#/StleGuide class=list-group-item>Morbi leo risus</a></div></div></div><div class=col-lg-4><div class=bs-component><div class=list-group><a href=#/StleGuide class=list-group-item><h4 class=list-group-item-heading>List group item heading</h4><p class=list-group-item-text>Donec id elit non mi porta gravida at eget metus. Maecenas sed diam eget risus varius blandit.</p></a> <a href=#/StleGuide class=list-group-item><h4 class=list-group-item-heading>List group item heading</h4><p class=list-group-item-text>Donec id elit non mi porta gravida at eget metus. Maecenas sed diam eget risus varius blandit.</p></a></div></div></div></div><div class=row><div class=col-lg-12><h2>Panels</h2></div></div><div class=row><div class=col-lg-4><div class=bs-component><div class="panel panel-default"><div class=panel-body>Basic panel</div></div><div class="panel panel-default"><div class=panel-heading>Panel heading</div><div class=panel-body>Panel content</div></div><div class="panel panel-default"><div class=panel-body>Panel content</div><div class=panel-footer>Panel footer</div></div></div></div><div class=col-lg-4><div class=bs-component><div class="panel panel-primary"><div class=panel-heading><h3 class=panel-title>Panel primary</h3></div><div class=panel-body>Panel content</div></div><div class="panel panel-success"><div class=panel-heading><h3 class=panel-title>Panel success</h3></div><div class=panel-body>Panel content</div></div><div class="panel panel-warning"><div class=panel-heading><h3 class=panel-title>Panel warning</h3></div><div class=panel-body>Panel content</div></div></div></div><div class=col-lg-4><div class=bs-component><div class="panel panel-danger"><div class=panel-heading><h3 class=panel-title>Panel danger</h3></div><div class=panel-body>Panel content</div></div><div class="panel panel-info"><div class=panel-heading><h3 class=panel-title>Panel info</h3></div><div class=panel-body>Panel content</div></div></div></div></div><div class=row><div class=col-lg-12><h2>Wells</h2></div></div><div class=row><div class=col-lg-4><div class=bs-component><div class=well>Look, I\'m in a well!</div></div></div><div class=col-lg-4><div class=bs-component><div class="well well-sm">Look, I\'m in a small well!</div></div></div><div class=col-lg-4><div class=bs-component><div class="well well-lg">Look, I\'m in a large well!</div></div></div></div></div><div class=bs-docs-section><div class=row><div class=col-lg-12><div class=page-header><h1 id=tables>Dialogs</h1></div></div></div><div class=row><div class=col-lg-6><h2>Modals</h2><div class=bs-component><div class=modal><div class=modal-dialog><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-hidden=true>×</button><h4 class=modal-title>Modal title</h4></div><div class=modal-body><p>One fine body…</p></div><div class=modal-footer><button type=button class="btn btn-default" data-dismiss=modal>Close</button> <button type=button class="btn btn-primary">Save changes</button></div></div></div></div></div></div><div class=col-lg-6><h2>Popovers</h2><div class=bs-component><button type=button class="btn btn-default" data-container=body data-toggle=popover data-placement=left data-content="Vivamus sagittis lacus vel augue laoreet rutrum faucibus.">Left</button> <button type=button class="btn btn-default" data-container=body data-toggle=popover data-placement=top data-content="Vivamus sagittis lacus vel augue laoreet rutrum faucibus.">Top</button> <button type=button class="btn btn-default" data-container=body data-toggle=popover data-placement=bottom data-content="Vivamus\r\n              sagittis lacus vel augue laoreet rutrum faucibus.">Bottom</button> <button type=button class="btn btn-default" data-container=body data-toggle=popover data-placement=right data-content="Vivamus sagittis lacus vel augue laoreet rutrum faucibus.">Right</button></div><h2>Tooltips</h2><div class=bs-component><button type=button class="btn btn-default" data-toggle=tooltip data-placement=left data-original-title="Tooltip on left">Left</button> <button type=button class="btn btn-default" data-toggle=tooltip data-placement=top data-original-title="Tooltip on top">Top</button> <button type=button class="btn btn-default" data-toggle=tooltip data-placement=bottom data-original-title="Tooltip on bottom">Bottom</button> <button type=button class="btn btn-default" data-toggle=tooltip data-placement=right data-original-title="Tooltip on right">Right</button></div></div></div></div><div id=source-modal class="modal fade"><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-hidden=true>&times;</button><h4 class=modal-title>Source Code</h4></div><div class=modal-body><pre></pre></div></div></div></div></div>'),a.put("templates/app/urgentNotification.html",'<div data-ng-show="!isIOS && showUrgentNotification" class="message-error urgent-notification-message"><div id=message-container-info><div class=row><div class="col-xs-8 col-sm-10 col-md-10 col-lg-10 text-center"><div hg-dynamic-html-compile dynamic-html-string=UN_MESSAGE></div></div><div class="col-xs-2 col-sm-1 col-md-1 col-lg-1 text-center"><a data-ng-click=dismissMessage()><i class="icon-close-x dismiss-icon"></i></a></div></div></div></div>'),a.put("templates/assets/accountSettings.html",'<hg-page full=true solo=!$root.isMobile><div class="visible-xs visible-sm"><div data-ng-include="\'templates/app/childheader.html\'"></div></div><div ng-if=$root.allAccountsClosedFlag class="custom-error-messages row"><div class=col-xs-12><b>{{allAccountsClosedMessage.message1}}</b></div><div class=col-xs-12><b>{{allAccountsClosedMessage.message2}}</b></div></div><form name=accountSettingsForm class=form ng-if=!$root.allAccountsClosedFlag novalidate><div class=accountSettings><div class=help-block data-ng-show=successMessage>{{successMessage}}</div><section class=profile-section><h4><span class=account-number>Account Number: {{accountIdDisplay()}}</span></h4></section><section class=profile-section><div><h4><span class=section>REDEFINE INVESTMENT PROFILE</span></h4></div><div><hg-local-asset ng-if=$root.isSIP hg-asset-id=SIP-ACCTSETTINGS-REDEFINE-PROFILE-EXPL-RETAIL></hg-local-asset><hg-local-asset ng-if=$root.isIIP hg-asset-id=SIP-ACCTSETTINGS-REDEFINE-PROFILE-EXPL-RETAIL-AS></hg-local-asset></div><div class=profile-section><button data-ng-click=updateProfile(); class="btn btn-default" aria-label="update profile">Update Profile</button></div><div><hg-local-asset hg-asset-id=SIP-ACCTSETTINGS-REDEFINE-PROFILE-DISCL-RETAIL></hg-local-asset></div></section><section class=TLH-section ng-if=isTLHEnabled><div><h4><span class=section>TAX LOSS HARVESTING</span></h4></div><div data-ng-if=$root.isSIP><hg-local-asset hg-asset-id=SIP-ACCTSETTINGS-TAXLOSSHARVESTING-INSTR-RETAIL></hg-local-asset></div><div data-ng-if=$root.isIIP><hg-local-asset hg-asset-id=ACCTSETTINGS-TAXLOSSHARVESTING-INSTR-AS></hg-local-asset></div><div class=TLH-section-2><div class=TLH-checkbox-container><div class=TLH-checkbox><input type=checkbox id=TLH name=TLH ng-model="taxLossData.taxLossHarvestOptIn"><label for=TLH class=checkbox></label></div><div class=TLH-checkbox-text>Enable Tax Loss Harvesting</div></div><div class=saveSSNSection><button data-ng-click=saveTLHData(); data-ng-disabled=accountSettingsForm.$invalid class="btn btn-default" aria-label="tax loss harvesting save">Save</button></div><div><hg-local-asset hg-asset-id=SIP-ACCTSETTINGS-TAXLOSSHARVESTING-DISCL-RETAIL></hg-local-asset></div></div></section><section class=EL-section><div><h4><span class=section>EXCLUSION LIST</span></h4></div><p><hg-local-asset ng-if=$root.isSIP hg-asset-id=SIP-ACCTSETTINGS-EXCL-LIST-EXPL-RETAIL></hg-local-asset><hg-local-asset ng-if=$root.isIIP hg-asset-id=SIP-ACCTSETTINGS-EXCL-LIST-EXPL-RETAIL-AS></hg-local-asset></p><div class=row><div class="col-xs-11 col-sm-3 col-md-3 col-lg-3" data-ng-repeat="indexNbr in getNumberArray(SECURITIES_EXCLUSION_COUNT) track by $index"><div class=form-group data-ng-class="{ \'has-error\' : securitiesExclusionShowErrorList[$index]}"><label for=sec{{$index}}><input class=form-control id=sec{{$index}} name=sec{{$index}} data-ng-model=securitiesExclusionList[$index] data-ng-change=symbolChanged($index); data-ng-blur="removeHint($index, true);" aria-label="enter {{$index + 1}} ETF ticker symbol for exclusion"></label><div class=help-block ng-show=securitiesExclusionShowErrorList[$index]>Invalid symbol</div></div><div class=symbolHint data-ng-if=securitiesLookupHolder[$index]><table class="table symbol-table"><tr data-ng-repeat="symbolData in securitiesLookupHolder[$index] | limitTo : SYMBOL_LOOKUP_LIST_COUNT"><td class=symbol data-ng-click=onSelectingSymbol($parent.$index,symbolData.symbol);>{{symbolData.symbol}}</td><td class=symbolDesc data-ng-click=onSelectingSymbol($parent.$index,symbolData.symbol);>{{symbolData.symbolDesc}}</td></tr></table></div></div></div><div class=saveEL><button data-ng-click=saveExclusionList(); class="btn btn-default" data-ng-disabled=disableSaveBtn aria-label="exclusion list save">Save</button></div><div><hg-local-asset hg-asset-id=SIP-ACCTSETTINGS-EXCL-LIST-DISCL-RETAIL></hg-local-asset></div></section><section class=profile-section><div><h4><span class=section>WASH SALES</span></h4></div><div>If your spouse also has a {{$root.product}} account, we can monitor your accounts together to avoid wash sales. To activate this feature, go to the <a ui-sref=personalProfile.managehouseholdinfo>Household Info page</a> under Personal Information. <span data-ng-if=$root.isSIP><a href=https://hg.schwab.com/public/intelligent/insights/whitepapers/tax-loss-harvesting-rebalancing.html#wash-sale target=_blank>Read more about Tax Loss Harvesting for two taxpayers.</a></span></div></section><section class=profile-section ng-if=showBeneficiariesSection><div class=beneficiary-title><h4><span class=section>ACCOUNT BENEFICIARIES</span></h4></div><div class=launch-beneficiary ng-if=canLaunchBeneficiaryFeature><p>If you would like to designate and update beneficiaries for the selected account, please click the "Update Beneficiaries" button below.</p><p><hg-local-asset hg-asset-id=Service-BeneficiaryWebPart-addOrmodifyNote></hg-local-asset></p><div class=community-property-state ng-if=marriedInCommunityPropertyState><p>Our records indicate that you live in a community property state, which means that if you are married, special rules may apply when designating your primary beneficiary. The general rule in community property states is that you generally must name your spouse as your sole primary beneficiary. If you are married, to name someone other than your spouse, please download the <a class=image-cursor target=_blank href="https://www.schwab.com/public/file?cmsid=P-221657&cv1">IRA Beneficiary Form</a> and then complete, sign, and return it to us. By completing this form and designating someone other than your spouse as the primary beneficiary, you are representing and warranting that your spouse has consented to such designation. For more information about community property and spousal consent rules, please consult with your tax advisor.</p></div><div class=update-beneficiaries-button><button data-ng-click=updateBeneficiaries(); class="btn btn-default" aria-label="update beneficiaries">Update Beneficiaries</button></div></div><div class=marital-status ng-if=hasAccountRestrictions><p><hg-local-asset hg-asset-id=Service-BeneficiaryWebPart-BeneficianryOverviewMsg></hg-local-asset></p></div></section><br><br></div></form></hg-page>'),
a.put("templates/assets/activity.html",'<hg-page full=true solo=!$root.isMobile><div class="visible-xs visible-sm"><div data-ng-include="\'templates/app/childheader.html\'"></div></div><div ng-if=$root.allAccountsClosedFlag class="custom-error-messages row"><div class=col-xs-12><b>{{allAccountsClosedMessage.message1}}</b></div><div class=col-xs-12><b>{{allAccountsClosedMessage.message2}}</b></div></div><div ng-if="!$root.allAccountsClosedFlag && model.badActivityData" class="custom-error-messages row"><div class=col-xs-12><b>{{model.badActivitydataMessage1}}</b></div><div class=col-xs-12><b>{{model.badActivitydataMessage2}}</b></div></div><div ng-if="!$root.allAccountsClosedFlag && !model.badActivityData"><hg-activity-feed activities=model.activityFeedPending class=activity-pending show=showdetail set=1></hg-activity-feed><div ng-if=model.activityFeedPosted class="col-xs-12 activity-title"><h2 class="col-sm-10 col-md-10 col-lg-10 col-sm-offset-1 col-md-offset-1 col-lg-offset-1">Posted Transactions</h2></div><hg-activity-feed activities=model.activityFeedPosted show=showdetail set=2></hg-activity-feed></div><div class="container-padded text-center cmsFooterLight"><hg-remote-asset hg-asset-id=SIP-ACTIVITY-MESSAGES-LINKS></hg-remote-asset></div></hg-page>'),a.put("templates/assets/activityDetail.html",'<ng-form name=form><hg-page full=true solo=!$root.isMobile><div class="padding-top-40 padding-left-15 padding-right-15"><div data-ng-include src=selectedActivity.templateGroup></div></div></hg-page></ng-form>'),a.put("templates/assets/activityExpandedAccount.html",'<div class=row><h1 class="col-xs-12 col-sm-12 col-md-10 col-lg-10 col-md-offset-1 col-lg-offset-1 panel-heading margin-bottom-24" ng-if=$root.deviceInfo.isSmallScreen()>{{selectedActivity.SummaryText}}</h1><div class="col-xs-12 col-sm-12 col-md-10 col-lg-10 col-md-offset-1 col-lg-offset-1 panel-heading margin-bottom-24">{{selectedActivity.DetailText}}<div data-ng-if=selectedActivity.additionalText><br>{{selectedActivity.additionalText}}</div></div></div>'),a.put("templates/assets/activityExpandedAccountRejected.html",'<div class=row><h1 class="col-xs-12 col-sm-12 col-md-10 col-lg-10 col-md-offset-1 col-lg-offset-1 panel-heading margin-bottom-24" ng-if=$root.deviceInfo.isSmallScreen()>{{selectedActivity.SummaryText}}</h1><div class="col-xs-12 col-sm-12 col-md-10 col-lg-10 col-md-offset-1 col-lg-offset-1 panel-heading margin-bottom-24">To close your account, please complete and return an <a data-ng-click=preventCollapse($event) class=cancel-form href={{selectedActivity.linkTarget}} target=_blank>{{selectedActivity.linkText}}</a>.<br><br>Please contact us if you have any questions about our decision. You may also contact Charles Schwab’s Institutional Intelligent Portfolios service team at <span class=bold>877-805-3399</span> if you have questions related to the account closure process.<br><br><div class="text-regular-12 text-center">The Institutional Intelligent Portfolios service team are employees of Charles Schwab & Co., Inc.</div></div></div>'),a.put("templates/assets/activityExpandedDividendAndInterest.html",'<div class=panel-heading><h1 class="activity-details padding-0 col-xs-12 col-sm-12 col-md-4 col-lg-4 col-sm-offset-1 col-md-offset-1 col-lg-offset-1" ng-if=$root.deviceInfo.isSmallScreen()>{{selectedActivity.SummaryText}}</h1><div class="activity-details padding-0 col-xs-12 col-sm-12 col-md-4 col-lg-4 col-sm-offset-1 col-md-offset-1 col-lg-offset-1"><h2 class="trade-label margin-bottom-10 row">Dividends Received</h2><div data-ng-if=selectedActivity.hasDividends data-ng-repeat="payment in selectedActivity.Payments"><div data-ng-if="payment.PaymentType == 1" class="row margin-bottom-10 table-row"><div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">{{payment.FundSource}}</div><div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">{{payment.Amount | currency}}</div><div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">{{payment.DateReceived | date:\'MM/dd/yy\'}}</div></div></div><div data-ng-if=!selectedActivity.hasDividends><div>No dividends received.</div></div></div><div class="activity-details padding-0 col-xs-12 col-sm-12 col-md-4 col-lg-4 col-sm-offset-1 col-md-offset-1 col-lg-offset-1"><h2 class="trade-label second-label margin-bottom-10 row">Bank Interest</h2><div data-ng-if=selectedActivity.hasInterests data-ng-repeat="payment in selectedActivity.Payments"><div data-ng-if="payment.PaymentType == 2" class="row margin-bottom-10 table-row"><div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">{{payment.FundSource}}</div><div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">{{payment.Amount | currency}}</div><div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">{{payment.DateReceived | date:\'MM/dd/yy\'}}</div></div></div><div data-ng-if=!selectedActivity.hasInterests><div>No interest received.</div></div></div><div class="text-center col-xs-12 col-sm-12 col-md-10 col-lg-10 margin-bottom-24"></div></div>'),a.put("templates/assets/activityExpandedGoalsAtRiskAndOffTarget.html",'<div class="panel-heading row"><h1 class="text-left header text-center ng-scope ng-isolate-scope activity-details" ng-if=$root.deviceInfo.isSmallScreen()><span class="ng-binding ng-scope"><span class=notification>{{selectedActivity.EventText}} - {{selectedActivity.Timespan}}</span><br><span class=notification ng-bind-html=selectedActivity.SummaryText></span></span></h1><h2 class="text-left header text-center ng-scope ng-isolate-scope activity-details" ng-if=$root.deviceInfo.isSmallScreen()><span class="ng-binding ng-scope">To get on the right path again, view your goal to make any appropriate adjustments.</span></h2><div class="col-xs-9 col-sm-9 col-md-9 col-lg-9 margin-bottom-24 padding-left-89" ng-if=!$root.deviceInfo.isSmallScreen()><p><span class=notification>To get on the right path again, view your goal to make any appropriate adjustments.</span></p></div></div>'),a.put("templates/assets/activityExpandedGoalsBackOnTarget.html",'<div class="panel-heading row"><h1 class="text-left header text-center ng-scope ng-isolate-scope activity-details" ng-if=$root.deviceInfo.isSmallScreen()><span class="ng-binding ng-scope"><span class=notification>{{selectedActivity.EventText}} - {{selectedActivity.Timespan}}</span><br><span class=notification ng-bind-html=selectedActivity.SummaryText></span></span></h1><h2 class="text-left header text-center ng-scope ng-isolate-scope activity-details" ng-if=$root.deviceInfo.isSmallScreen()><span class="ng-binding ng-scope">Congratulations, you’re back on target. If your circumstances have changed, you can adjust your goal at any time.</span></h2><div class="col-xs-9 col-sm-9 col-md-9 col-lg-9 margin-bottom-24 padding-left-89" ng-if=!$root.deviceInfo.isSmallScreen()><p><span class=notification>Congratulations, you’re back on target. If your circumstances have changed, you can adjust your goal at any time.</span></p></div></div>'),a.put("templates/assets/activityExpandedPortfolioUnderValue.html",'<div class="panel-heading row"><h1 class="text-left header ng-scope ng-isolate-scope activity-details" ng-if=$root.deviceInfo.isSmallScreen()><span class="ng-binding ng-scope"><span class=notification ng-if=!$root.deviceInfo.isSmallScreen()>{{selectedActivity.EventText}} - {{selectedActivity.Timespan}}<br></span> <span class=notification ng-bind-html=selectedActivity.SummaryText></span></span></h1><h2 class="text-left header ng-scope ng-isolate-scope activity-details" ng-if=$root.deviceInfo.isSmallScreen()><span class="ng-binding ng-scope"><br>{{selectedActivity.DetailText}}</span></h2><div class="col-lg-10 padding-left-89" ng-if=!$root.deviceInfo.isSmallScreen()><p><span class=notification>{{selectedActivity.DetailText}}</span></p></div><hr ng-if=$root.deviceInfo.isSmallScreen()><div class="text-center col-sm-12 col-lg-10"><br ng-if="$root.deviceInfo.isSmallScreen()"><a data-ng-click=goToFundMoney($event) data-ng-if=selectedActivity.EventText>{{selectedActivity.EventText}}</a></div></div>'),a.put("templates/assets/activityExpandedRebalanceAndTaxLoss.html",'<div class=panel-heading><h1 class="activity-details padding-0 col-xs-12 col-sm-12 col-md-5 col-lg-4 col-sm-offset-1 col-md-offset-1 col-lg-offset-1" ng-if=$root.deviceInfo.isSmallScreen()>{{selectedActivity.SummaryText}}</h1><div class="activity-details padding-0 col-xs-12 col-sm-12 col-md-5 col-lg-4 col-sm-offset-1 col-md-offset-1 col-lg-offset-1"><h2 class="trade-label margin-bottom-10 row">Bought</h2><div data-ng-if=selectedActivity.hasBuys data-ng-repeat="trade in selectedActivity.Trades"><div data-ng-if="trade.TradeType == 1" class="row margin-bottom-10 table-row"><div class="col-xs-2 col-sm-2 col-md-2 col-lg-2">{{trade.Symbol}}</div><div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 text-center">{{trade.Shares}} <span data-ng-class="{\'hidden-xs hidden-sm\' : trade.TotalAmount > 0}">shares&nbsp;</span><span data-ng-if="trade.TotalAmount > 0">at</span></div><div class="col-xs-4 col-sm-4 col-md-4 col-lg-4 padding-left-0"><span data-ng-if="trade.TotalAmount > 0">{{trade.PricePerShare | currency}}</span></div></div></div><div data-ng-if=!selectedActivity.hasBuys><div>No buys were required.</div></div></div><div class="activity-details padding-0 col-xs-12 col-sm-12 col-md-5 col-lg-4 col-sm-offset-1 col-md-offset-1 col-lg-offset-1"><h2 class="trade-label second-label margin-bottom-10 row">Sold</h2><div data-ng-if=selectedActivity.hasSells data-ng-repeat="trade in selectedActivity.Trades"><div data-ng-if="trade.TradeType == 2" class="row margin-bottom-10 table-row"><div class="col-xs-2 col-sm-2 col-md-2 col-lg-2">{{trade.Symbol}}</div><div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">{{trade.Shares}} <span data-ng-class="{\'hidden-xs hidden-sm\' : trade.TotalAmount > 0}">shares&nbsp;</span><span data-ng-if="trade.TotalAmount > 0">at</span></div><div class="col-xs-4 col-sm-4 col-md-4 col-lg-4 padding-left-0"><span data-ng-if="trade.TotalAmount > 0">{{trade.PricePerShare | currency}}</span></div></div></div><div data-ng-if=!selectedActivity.hasSells><div>No sells were required.</div></div></div><div class="text-center col-xs-12 col-sm-12 col-md-10 col-lg-10 margin-top-25 margin-bottom-24" ng-show="selectedActivity.linkText.length > 0"><a id=activity-detail-link data-ng-click=preventCollapse($event) class=link-learn-more href={{selectedActivity.linkTarget}} target=_blank>{{selectedActivity.linkText}}</a></div></div>'),a.put("templates/assets/activityExpandedTransfer.html",'<div class=activity-details><h3 class="margin-top-0 margin-bottom-12" ng-if=$root.deviceInfo.isSmallScreen()>{{selectedActivity.DaysAgo}}</h3><hg-page-title class=text-left ng-if=$root.deviceInfo.isSmallScreen()>{{selectedActivity.SummaryText}}</hg-page-title><div class="padding-0 col-xs-12 col-sm-10 col-md-10 col-lg-10 col-sm-offset-1 col-md-offset-1 col-lg-offset-1"><div class="activity-trans-detail-container margin-bottom-24" summary="Activity Detail" id=actDetail><div class=row><div class="col-xs-3 col-sm-3 col-md-4 col-lg-4">From</div><div class="col-xs-5 col-sm-5 col-md-4 col-lg-4">{{selectedActivity.FromAccountNickName}}</div><div class="col-xs-4 col-sm-4 col-md-4 col-lg-4 padding-right-0 text-right">{{selectedActivity.FromAccount}}</div></div><div class=row><div class="col-xs-3 col-sm-3 col-md-4 col-lg-4">To</div><div class="col-xs-5 col-sm-5 col-md-4 col-lg-4">{{selectedActivity.ToAccountNickName}}</div><div class="col-xs-4 col-sm-4 col-md-4 col-lg-4 padding-right-0 text-right">{{selectedActivity.ToAccount}}</div></div><div class=row><div class="col-xs-3 col-sm-3 col-md-4 col-lg-4">Amount</div><div class="col-xs-9 col-sm-9 col-md-8 col-lg-8">{{selectedActivity.Amount | currency}}</div></div><div class=row><div class="col-xs-3 col-sm-3 col-md-4 col-lg-4">Transfer Date</div><div class="col-xs-9 col-sm-9 col-md-8 col-lg-8">{{selectedActivity.ActivityDate | date : "MM/dd/yyyy"}}</div></div><div ng-if=selectedActivity.Frequency class=row><div class="col-xs-3 col-sm-3 col-md-4 col-lg-4">Frequency</div><div class="col-xs-9 col-sm-9 col-md-4 col-lg-4">{{selectedActivity.Frequency}}</div></div><div class=row><div class="col-xs-3 col-sm-3 col-md-4 col-lg-4">Status</div><div class="col-xs-9 col-sm-9 col-md-8 col-lg-8">{{selectedActivity.TransferStatus}}</div></div></div><div data-ng-if="selectedActivity.EventId == 8" class="container-padded text-center activityDetailsFooter">Schwab investment professionals are employees of Charles Schwab & Co., Inc.</div></div></div>'),a.put("templates/assets/activityFeedDirective.html",'<div class="activity panel-group"><div class="panel panel-default" ng-click="item.hasDetail && showdetail(item)" ng-repeat="item in activities" ng-class="{\'collapsed\': !item.expanded, \'cursor-pointer-link\':$root.deviceInfo.isLargeScreen() && item.hasDetail}" data-target="{{ \'#activity-\' + set + \'-\' + ($index + 1)}}" tabindex=0><div class=panel-heading><div class="row panel-title"><div class="col-xs-2 activity-icon"><span ng-class=item.IconClass></span></div><div class="col-xs-9 col-sm-9 col-md-10 col-lg-10"><p><span class=duration>{{item.EventText}} - {{item.Timespan}}</span><br><span class=notification ng-bind-html=item.SummaryText></span></p></div><div class="col-xs-1 pull-right"><span ng-class="{\'collapsed\': !item.expanded}" class=accordion-toggle-container ng-if="$root.deviceInfo.isLargeScreen() && item.hasDetail"><i class=icon-accordion-toggle></i></span> <span class=link-icon-arrow ng-if="$root.deviceInfo.isSmallScreen() && item.hasDetail"><i class=icon-arrow-right></i></span></div></div></div><div ng-if="$root.deviceInfo.isLargeScreen() && item.hasDetail" ng-attr-id="{{ \'activity-\' + set + \'-\' + ($index + 1) }}" class=panel-collapse ng-class="{\'in\': item.expanded, \'collapse\': true, \'collapsed\': !item.expanded}"><div class=panel-body><div data-ng-include src=item.templateGroup onload="selectedActivity = item"></div></div></div></div></div>'),a.put("templates/assets/adjustTimeHorizonPopup.html",'<div class=summaryStatement-tooltip><i class="icon-close-x pull-right image-cursor" data-ng-click=$hide()></i><br><p>Changing your time horizon and other answers in the investor profile questionnaire can result in a change in the risk of your portfolio or change the likelihood that you reach your goal. Choosing a new portfolio will trigger a rebalance which may result in capital gains or losses. In addition, changing your risk profile 2 or more times within a period of 3 trading days may create settlement violations and cause your account to become restricted. This means that your account may not be included in trading, rebalancing or tax loss harvesting for a period of 90 days due to a change in your investment strategy.</p><p><a ng-if="chartState!=1" ng-click=summaryStatement.jumpSlider() target=_self>{{summaryStatement.linkText}}</a></p></div>'),a.put("templates/assets/assetChart.html",'<hg-page full=true solo=!$root.isMobile><div ng-if=$root.allAccountsClosedFlag class="custom-error-messages row"><div class=col-xs-12><b>{{allAccountsClosedMessage.message1}}</b></div><div class=col-xs-12><b>{{allAccountsClosedMessage.message2}}</b></div></div><div ng-if="!$root.allAccountsClosedFlag && model.badAssetData" class="custom-error-messages row"><div class=col-xs-12><b>{{model.badAssetDataMessage1}}</b></div><div class=col-xs-12><b>{{model.badAssetDataMessage2}}</b></div></div><div ng-if="!$root.allAccountsClosedFlag && !model.badAssetData"><div class="container-padded status-message-allocation" ng-show=!isInvested()><hg-page-title>Welcome!</hg-page-title><hg-page-sub-title>{{uninvestedMessage}}</hg-page-sub-title></div><div class=dashboard-container><div class=asset-chart><div data-ng-if=shouldShowPortfolioChartToolTip custom-tool-tip></div><hg-asset-chart id=chart1 ismobile=$root.deviceInfo.isSmallScreen() portfoliovalue={{model.balance}} assets={{assetOptions.assets}} timestamp={{assetOptions.timestamp}} bordercolor={{borderColor}} textcolor={{textColor}} disablelabels=$root.deviceInfo.isSmallScreen() showbalances=isInvested()></hg-asset-chart></div></div><div class="chart-legend hidden-lg hidden-md"><div class=row ng-repeat="partition in assetOptions.partitionedAssets"><div class="col-xs-11 col-sm-9 col-md-9 col-sm-offset-1 col-md-offset-1 padding-0 pull-right"><div class="col-xs-6 col-sm-6 col-md-6" ng-repeat="lv1 in partition"><table><tbody ng-if=$first><tr class="{{idFromAssetLevelNames(\'legend\',lv1.name)}}"><td><i class="fa-li fa fa-square" ng-style=lv1.legendStyle></i>{{lv1.name}} - {{lv1.percentageFormatted}}</td></tr></tbody><tbody ng-if=!$first><tr class="{{idFromAssetLevelNames(\'legend\',lv1.name)}}"><td><i class="fa-li fa fa-square" ng-style=lv1.legendStyle></i>{{lv1.name}} - {{lv1.percentageFormatted}}</td></tr></tbody></table></div></div></div></div><div class=allocation-container><div class=row style="padding-bottom: 6px; border-bottom: 1px solid rgba(86, 61, 124, 0.2)"><table width=100%><tr ng-if=$root.deviceInfo.isLargeScreen()><td class="col-xs-5 col-sm-7 col-md-9 col-lg-9"><span ng-if=!isInvested()>PENDING ASSET ALLOCATION</span> <span ng-if=isInvested()>TOTAL CURRENT ALLOCATION</span></td><td class="col-xs-4 col-sm-3 col-md-2 col-lg-2 text-center assetToggleSpacer" ng-if=isInvested()><a href=# role=button ng-click=assetETFViewUpdate()><span ng-hide=showETFs aria-label="Click to switch to percent">ETFs</span> <span ng-show=showETFs aria-label="Click to switch to dollar">Asset Classes</span></a></td><td class="col-xs-3 col-sm-2 col-md-1 col-lg-1 text-center assetToggleSpacer" ng-if=isInvested()><a href=# role=button ng-click=assetViewUpdate()><span ng-show=displayDollar aria-label="Click to switch to percent">%</span> <span ng-hide=displayDollar aria-label="Click to switch to dollar">$</span></a></td></tr><tr ng-if=$root.deviceInfo.isSmallScreen()><td class=col-xs-9><span ng-if=!isInvested()>PENDING ASSET ALLOCATION</span> <span ng-if=isInvested()>TOTAL CURRENT ALLOCATION</span></td><td class="col-xs-3 text-center assetToggleSpacer"><a href=# role=button ng-click=assetETFViewUpdate() ng-if=isInvested()><span ng-hide=showETFs aria-label="Click to switch to percent">ETFs</span> <span ng-show=showETFs aria-label="Click to switch to dollar">Asset Classes</span></a></td></tr></table></div><div ng-if=$root.deviceInfo.isLargeScreen() class=row ng-repeat="partition in assetOptions.partitionedAssets"><div class="col-xs-12 col-sm-6 col-md-6 col-lg-6" ng-repeat="lv1 in partition"><table class="table table-style-one total" ng-class="{ selected: assetOptions.isSelected(lv1), deselected : assetOptions.isDisabled(lv1) }"><colgroup><col><col></colgroup><thead><tr ng-click=assetOptions.select(lv1)><td colspan=2 ng-style=lv1.displayStyle><table width=100%><tr><th scope=row class="{{lv1.displayClass}} col-md-5">{{lv1.name}}</th><th class="col-md-7 padding-0" ng-style=lv1.displayStyle>{{lv1.dollarFormatted}} ({{lv1.percentageFormatted}})</th></tr></table></td></tr></thead><tbody ng-if=$first><tr ng-if=!showETFs ng-repeat="lv2 in lv1.items | orderBy: \'-dollar\'" ng-click=assetOptions.select(lv2) bs-popover=popover data-placement=right data-template-url=templates/assets/portfolioAssetPopover.html data-html=true data-trigger=click data-auto-close=1 id={{idFromAssetLevelNames(lv1.name,lv2.name)}}><td ng-class="{highlight : assetOptions.isSelected(lv2)}">{{lv2.name}}</td><td ng-if=displayDollar>{{lv2.dollarFormatted}}</td><td ng-if=!displayDollar>{{lv2.percentageFormatted}}</td></tr><tr ng-if=showETFs ng-repeat="lv2 in lv1.items | orderBy: \'-dollar\'" ng-click=assetOptions.select(lv2)><td colspan=2><table class=etfInnerTable><tr ng-repeat="s in lv2.securities | orderBy: \'-percentage\'" data-ng-class="{hasMultiple : !$first}" bs-popover data-placement=right data-template-url=templates/assets/portfolioAssetPopover.html data-html=true data-trigger=click data-auto-close=1 id={{idFromAssetLevelNames(lv1.name,lv2.name)}}><td ng-class="{highlight : assetOptions.isSelected(lv2)}">{{s.symbol}} : {{s.description}}</td><td ng-if=displayDollar>{{s.balance}}</td><td ng-if=!displayDollar>{{s.percentageFormatted}}</td></tr></table></td></tr></tbody><tbody ng-if=!$first><tr ng-if=!showETFs ng-repeat="lv2 in lv1.items | orderBy: \'-dollar\'" ng-click=assetOptions.select(lv2) bs-popover=popover data-placement=left data-template-url=templates/assets/portfolioAssetPopover.html data-html=true data-trigger=click data-auto-close=1 id={{idFromAssetLevelNames(lv1.name,lv2.name)}}><td ng-class="{highlight : assetOptions.isSelected(lv2)}">{{lv2.name}}</td><td ng-if=displayDollar>{{lv2.dollarFormatted}}</td><td ng-if=!displayDollar>{{lv2.percentageFormatted}}</td></tr><tr ng-if=showETFs ng-repeat="lv2 in lv1.items | orderBy: \'-dollar\'" ng-click=assetOptions.select(lv2) bs-popover=popover data-placement=left data-template-url=templates/assets/portfolioAssetPopover.html data-html=true data-trigger=click data-auto-close=1 id={{idFromAssetLevelNames(lv1.name,lv2.name)}}><td colspan=2><table class=etfInnerTable><tr ng-repeat="s in lv2.securities | orderBy: \'-percentage\'" data-ng-class="{hasMultiple : !$first}"><td>{{s.symbol}} : {{s.description}}</td><td ng-if=displayDollar>{{s.balance}}</td><td ng-if=!displayDollar>{{s.percentageFormatted}}</td></tr></table></td></tr></tbody></table></div></div><div ng-if=$root.deviceInfo.isSmallScreen() class=row><div class="col-xs-12 col-sm-6 col-md-6 col-lg-6" ng-repeat="lv1 in assetOptions.assets"><table class="table table-style-one total" ng-class="{ selected: assetOptions.isSelected(lv1), deselected : assetOptions.isDisabled(lv1) }"><colgroup><col><col></colgroup><thead><tr ng-click=assetOptions.select(lv1)><th scope=row class={{lv1.displayClass}} ng-style=lv1.displayStyle>{{lv1.name}}</th><th ng-style=lv1.displayStyle>{{lv1.dollarFormatted}}<br>{{lv1.percentageFormatted}}</th></tr></thead><tbody><tr ng-if=!showETFs ng-repeat="lv2 in lv1.items | orderBy: \'-dollar\'" ng-click=assetOptions.select(lv2) bs-popover=popover data-placement=bottom data-template-url=templates/assets/portfolioAssetPopover.html data-html=true data-trigger=click data-auto-close=1 id={{idFromAssetLevelNames(lv1.name,lv2.name)}}><td ng-class="{highlight : assetOptions.isSelected(lv2)}">{{lv2.name}}</td><td>{{lv2.dollarFormatted}}<br>{{lv2.percentageFormatted}}</td></tr><tr ng-if=showETFs ng-repeat="lv2 in lv1.items | orderBy: \'-dollar\'" ng-click=assetOptions.select(lv2) bs-popover=popover data-placement=bottom data-template-url=templates/assets/portfolioAssetPopover.html data-html=true data-trigger=click data-auto-close=1 id={{idFromAssetLevelNames(lv1.name,lv2.name)}}><td colspan=2><table class=etfInnerTable><tr ng-repeat="s in lv2.securities | orderBy: \'-percentage\'" data-ng-class="{hasMultiple : !$first}"><td ng-class="{highlight : assetOptions.isSelected(lv2)}">{{s.symbol}} : {{s.description}}</td><td>{{s.balance}}<br>{{s.percentageFormatted}}</td></tr></table></td></tr></tbody></table></div></div></div><div class="text-center container-padded cmsFooterLight"><hg-local-asset hg-asset-id={{assetChartDisclosureAssetId}}></hg-local-asset></div></div></hg-page>'),a.put("templates/assets/assetChartDirective.html",'<div><div class=selected-asset><p>{{displaySelection}}</p><a><i class="fa fa-arrow-circle-o-left"></i></a></div><div></div></div>'),a.put("templates/assets/benchmarkPopover.html",'<p class=pull-right style="color:#000; position: relative; top:-15px;; cursor: pointer" ng-click=closeBenchmarkPopover()>X</p><p>Compare your returns to your benchmark to assess your portfolio\'s performance.</p><p><b>Your Portfolio\'s Blended Benchmark</b></p><ul style="list-style: none" ng-repeat="weights in model.benchmarkPopUpAssets"><li><span>{{weights.textLabel}}</span><span class=pull-right>{{weights.detailTextLabel}}</span></li></ul><p><a href=https://intelligent.schwab.com/public/intelligent/blog/new-benchmarks-shine-a-light-on-portfolio-performance.html target=_blank>Learn More</a> about benchmarks.</p>'),a.put("templates/assets/dashboard-desktop.html","<hg-page full=trueO><div class=tab-menu-container><ul class=\"nav nav-justified tab-menu-nav\" data-tabs=tabs><li ng-class=\"{ 'active' : isActiveTab('charts.assets')}\"><a ui-sref=charts.assets>Portfolio</a></li><li ng-class=\"{ 'active' : isActiveTab('charts.goal.goalMain')}\" ng-show=$root.isSIP><a ui-sref=charts.goal.goalMain>Goal</a></li><li ng-class=\"{ 'active' : isActiveTab('charts.performance')}\"><a ui-sref=charts.performance.performanceMain>Performance</a></li><li ng-class=\"{ 'active' : isActiveTab('charts.activity')}\"><a ui-sref=charts.activity>Activity<span class=badge ng-hide=true>{{numEvents}}</span></a></li><li ng-class=\"{ 'active' : isActiveTab('charts.accountSettings')}\"><a ui-sref=charts.accountSettings>Profile</a></li></ul><div id=tab-menu-content class=tab-content><div class=\"tab-pane active\" ui-view=web><div ng-include=\"'templates/assets/assetChart.html'\"></div></div></div></div></hg-page>"),a.put("templates/assets/dashboard-mobile.html",'<hg-page class=dashboard-mobile-view><div class=nav-container><ul class=nav><li><div class="text-center account-details"><p class=account-balance>{{model.balance}}</p></div></li><li class=active><a ui-sref=charts.activity ng-click=showForceSpinner()><p class=nav-item>ACTIVITY</p><div ng-if=$root.allAccountsClosedFlag class="custom-error-messages row"><div class=col-xs-12><b>{{allAccountsClosedMessage.message1}}</b></div><div class=col-xs-12><b>{{allAccountsClosedMessage.message2}}</b></div></div><div ng-if="!$root.allAccountsClosedFlag && model.badActivityData" class="custom-error-messages row"><div class=col-xs-12><b>{{model.badActivitydataMessage1}}</b></div><div class=col-xs-12><b>{{model.badActivitydataMessage2}}</b></div></div><div ng-if="!$root.allAccountsClosedFlag && !model.badActivityData && model.activity"><div class="activity-icon overview-icon"><span data-ng-class=model.activity.IconClass></span></div><div class=content-activity><p class=notification ng-bind-html=model.activity.SummaryText></p></div></div></a></li><li ng-show=$root.isSIP><a ui-sref=charts.goal.goalMain><p class=nav-item ng-if="!goalViewModel ||!goalViewModel.title ||!goalViewModel.title.title.label1">Goal</p><div ng-if=$root.allAccountsClosedFlag class="custom-error-messages row"><div class=col-xs-12><b>{{allAccountsClosedMessage.message1}}</b></div><div class=col-xs-12><b>{{allAccountsClosedMessage.message2}}</b></div></div><div class=dashboard-container ng-if="!$root.allAccountsClosedFlag && isUnfundedOrUninvested()"><p class=nav-item>Goal Not Set</p><div class=content-activity><p class=notification>We\'ll start tracking toward your goal of {{goalViewModel.title.label1}} once your portfolio is established.</p></div></div><div ng-if="!$root.allAccountsClosedFlag && !isUnfundedOrUninvested() && goalViewModel.badGoalData" class="custom-error-messages row"><div class=col-xs-12><div><b>{{goalViewModel.badGoalDataMsg1}}</b></div></div><div class=col-xs-12><div><b>{{goalViewModel.badGoalDataMsg2}}</b></div></div></div><div class=dashboard-container ng-if="!$root.allAccountsClosedFlag && !isUnfundedOrUninvested() && !goalViewModel.badGoalData"><div ng-if="goalViewModel.showAccomplishmentStatus==false"><p class=nav-item>{{goalViewModel.title.label1 | uppercase}}</p><hg-multi-series-chart id=multiSeriesChart class=goal-chart-container options=goalViewModel.goalChartOptions series=goalViewModel.goalChartSeries></hg-multi-series-chart></div><div ng-if="goalViewModel.showAccomplishmentStatus==true"><p class=nav-item>{{goalViewModel.title.label1 | uppercase}}</p><div class="activity-icon overview-icon"><span class=icon-target></span></div><div class=content-activity><p class=notification>{{goalViewModel.title.details}}</p></div></div></div></a></li><li><a ui-sref=charts.performance.performanceMain><p class=nav-item>PERFORMANCE</p><div class=dashboard-container ng-click="go(\'charts.performance.performanceMain\')"><div ng-if=$root.allAccountsClosedFlag class="custom-error-messages row"><div class=col-xs-12><b>{{allAccountsClosedMessage.message1}}</b></div><div class=col-xs-12><b>{{allAccountsClosedMessage.message2}}</b></div></div><div class=status-message ng-if="!$root.allAccountsClosedFlag && isUnfundedOrUninvested()"><hg-page-title>Welcome!</hg-page-title><hg-page-sub-title>Performance data will be available after your portfolio is established.<br><br></hg-page-sub-title></div><div ng-if="!$root.allAccountsClosedFlag && !isUnfundedOrUninvested() && performanceViewModel.badPerformanceData" class="custom-error-messages row"><div class=col-xs-12><div><b>{{performanceViewModel.badPerformanceDataMsg1}}</b></div><div><b>{{performanceViewModel.badPerformanceDataMsg2}}</b></div></div></div><div ng-if="!$root.allAccountsClosedFlag && !isUnfundedOrUninvested() && !performanceViewModel.badPerformanceData"><div class=performance-data><div class="pull-left padding-right"><span ng-if="performanceViewModel.charts.series[0].performancePercentageChange == \'NEGATIVE\'"><i class="fa fa-caret-down fa arrow-down text-danger"></i></span> <span ng-if="performanceViewModel.charts.series[0].performancePercentageChange == \'POSITIVE\'"><i class="fa fa-caret-up fa arrow-up text-success"></i></span> <span class=percentage-value><small>{{performanceViewModel.charts.series[0].performancePercentageFormatted}}</small></span></div><div class=pull-left><span ng-if="performanceViewModel.balanceDetails.gainLossChange == \'NEGATIVE\'"><i class="fa fa-caret-down fa arrow-down text-danger"></i></span> <span ng-if="performanceViewModel.balanceDetails.gainLossChange == \'POSITIVE\'"><i class="fa fa-caret-up fa arrow-up text-success"></i></span> <span class=percentage-value><small>{{performanceViewModel.balanceDetails.gainLoss}}</small></span></div></div><hg-multi-series-chart id=performanceChart options=performanceViewModel.chartOption series=performanceViewModel.chartSeries></hg-multi-series-chart></div><div class=text-right>{{performanceViewModel.charts.asOfText}}</div></div></a></li><li><a ui-sref=charts.assets ng-click=showForceSpinner()><p class=nav-item>PORTFOLIO</p><div ng-if=$root.allAccountsClosedFlag class="custom-error-messages row"><div class=col-xs-12><b>{{allAccountsClosedMessage.message1}}</b></div><div class=col-xs-12><b>{{allAccountsClosedMessage.message2}}</b></div></div><div ng-if="!$root.allAccountsClosedFlag && !isInvested()"><hg-page-sub-title>{{uninvestedMessage}}</hg-page-sub-title></div><div ng-if="!$root.allAccountsClosedFlag && isInvested() && model.badAssetData" class="custom-error-messages row"><div class=col-xs-12><b>{{model.badAssetDataMessage1}}</b></div><div class=col-xs-12><b>{{model.badAssetDataMessage2}}</b></div></div><div ng-if="!$root.allAccountsClosedFlag && isInvested() && !model.badAssetData"><div class=asset-chart><hg-asset-chart id=chart1 ismobile=$root.deviceInfo.isSmallScreen() assets={{assetOptions.assets}} timestamp={{assetOptions.timestamp}} disabledrilldown=true portfoliovalue={{model.balance}} bordercolor={{borderColor}} textcolor={{textColor}} disablelabels=$root.deviceInfo.isSmallScreen()></hg-asset-chart></div><div class="chart-legend hidden-lg hidden-md"><div class=row ng-repeat="partition in assetOptions.partitionedAssets"><div class="col-xs-11 col-sm-9 col-md-9 col-sm-offset-1 col-md-offset-1 padding-0 pull-right"><div class="col-xs-6 col-sm-6 col-md-6" ng-repeat="lv1 in partition"><table><tbody ng-if=$first><tr class="{{idFromAssetLevelNames(\'legend\',lv1.name)}}"><td><i class="fa-li fa fa-square" ng-style=lv1.legendStyle></i>{{lv1.name}} - {{lv1.percentageFormatted}}</td></tr></tbody><tbody ng-if=!$first><tr class="{{idFromAssetLevelNames(\'legend\',lv1.name)}}"><td><i class="fa-li fa fa-square" ng-style=lv1.legendStyle></i>{{lv1.name}} - {{lv1.percentageFormatted}}</td></tr></tbody></table></div></div></div></div></div></a></li><li><a ui-sref=charts.accountSettings><div class=dashboard-container><hg-button-group><hg-button-primary ng-click="go(\'charts.accountSettings\')">Account Settings</hg-button-primary></hg-button-group></div><div class="text-center padding-bottom-12 padding-top-12" style="text-decoration: none"><hg-local-asset hg-asset-id=SIP-Performance-Disclosure></hg-local-asset></div></a></li></ul></div></hg-page>'),
a.put("templates/assets/dashboard.html",'<div ng-if=$root.deviceInfo.isNativeIOS()><div ng-if=$root.deviceInfo.isSmallScreen() class="content-sm dark"><div ui-view=mobile class={{animateStyle}}></div></div></div><div ng-if=!$root.deviceInfo.isNativeIOS()><div ng-if=$root.deviceInfo.isLargeScreen() class="content-md dark"><div ng-include="\'templates/assets/dashboard-desktop.html\'"></div></div><div ng-if=$root.deviceInfo.isSmallScreen() class="content-sm dark"><div ui-view=mobile class={{animateStyle}}><div ng-include="\'templates/assets/dashboard-mobile.html\'"></div></div></div></div>'),a.put("templates/assets/educationInfo.html","<div><p>Enter your desired monthly withdrawal amount. The Goal Tracker will show you whether the amount you selected is projected to last until your goal date.<br><br><a data-ng-click=preventCollapse($event) class=education-content href=https://intelligent.schwab.com/public/intelligent/blog/portfolio-income.html target=_blank>Learn more</a> about retirement income.</p></div>"),a.put("templates/assets/educationPopup.html",'<div class="navbar navbar-fixed-top navbar-default" role=navigation><div class=container-fluid><div class=navbar-header><div class=navigation-title>{{vm.goalDetails.title.shortLabel1}}</div><div class=navbar-mobile-right data-ng-click=vm.back() ng-enter=vm.back()><a><i class=icon-close-x></i><span class=sr-only>Close Graphics Icon</span></a></div><div class="brand brand-preenrollment"></div></div></div></div><hg-page><div class=goals-message-page data-ng-include="\'templates/assets/educationInfo.html\'" onload="goalType = vm.goalDetails.type"></div></hg-page>'),a.put("templates/assets/fundDetails.html",'<div data-ng-include="\'templates/app/childheader.html\'"></div><div class=container ng-controller=hg.fundDetailsMod.fundDetailsCtrl><div class="page-header text-center"><h2>Fund Details</h2></div></div>'),a.put("templates/assets/goal.html",'<hg-page full=true solo=!$root.isMobile><div class=goals-container><div ng-if=$root.allAccountsClosedFlag class="custom-error-messages row"><div class=col-xs-12><b>{{vm.goalDetails.allAccountsClosedMessage.message1}}</b></div><div class=col-xs-12><b>{{vm.goalDetails.allAccountsClosedMessage.message2}}</b></div></div><div ng-show="!$root.allAccountsClosedFlag && isUnfundedOrUninvested()" class="status-message row"><div class=col-xs-12><hg-page-title>Welcome!</hg-page-title><hg-page-sub-title>We\'ll start tracking toward your goal of {{vm.goalDetails.title.label1.substr(0, vm.goalDetails.title.label1.length-4)}} once your portfolio is established.</hg-page-sub-title></div></div><div ng-show="!$root.allAccountsClosedFlag && !isUnfundedOrUninvested() && vm.goalDetails.badGoalData" class="row custom-error-messages"><div class=col-xs-12><b>{{vm.goalDetails.badGoalDataMsg1}}</b></div><div class=col-xs-12><b>{{vm.goalDetails.badGoalDataMsg2}}</b></div></div><div ng-show="!$root.allAccountsClosedFlag && !isUnfundedOrUninvested() && !vm.goalDetails.badGoalData"><div ng-if="vm.goalDetails.showAccomplishmentStatus==false"><div class="section-container row"><div class=col-xs-12><div class=row><div class=col-md-6><hg-title-style1 value=vm.goalDetails.title type=vm.goalDetails.type details-page=charts.goal.goalStatusDetails></hg-title-style1></div><div class=col-md-6 data-ng-if=$root.deviceInfo.isLargeScreen()><div ng-if="vm.goalDetails.state === 1 && vm.goalDetails.target.editGoalFlag!=true"><div class=pull-right><hg-title-style2 value=vm.goalDetails.target></hg-title-style2></div></div><div ng-if="vm.goalDetails.state !== 1 || vm.goalDetails.target.editGoalFlag==true"><div class=text-right><hg-target-amount value=vm.goalDetails></hg-target-amount></div></div></div></div><div data-ng-if="$root.deviceInfo.isLargeScreen() && (vm.goalDetails.state !== 1 || vm.goalDetails.target.editGoalFlag==true)" class=row><div data-ng-if="vm.goalDetails.type === 1" class="col-md-12 text-right"><div class=goal-buttons-group><hg-button-style1 callback=vm.saveGoal() button-text="Save goal" vm=vm></hg-button-style1><div class=recommendation-text ng-if=vm.goalDetails.showRecommendedAmountLabel()>{{vm.goalDetails.recommendationTargetAmountText}}</div></div></div><div data-ng-if="vm.goalDetails.type === 2" class="col-md-12 save-amount-widget"><div class=goal-buttons-group><hg-button-primary ng-click=vm.goalDetails.oneTimeContribution.launchMoveMoneyWithdrawal()>Manage Withdrawals</hg-button-primary><div class=setup-goal-popup><button ng-click=vm.saveGoal() class="btn btn-default btn-custom-savegoal">Save goal</button><div bs-popover data-placement=bottom data-content-template=templates/assets/setupGoalPopup.html id=setupIncomeGoalPopup></div></div><div class=recommendation-text ng-if=vm.goalDetails.showRecommendedAmountLabel()>{{vm.goalDetails.recommendationWithdrawalAmountText}}</div></div></div></div></div></div><div data-ng-if=vm.goalDetails.showMobileViewIncomeScorecard() class="income-score-card-mobile section-container row"><div class=col-xs-12><div class=score-card-title>{{vm.goalDetails.scorecard.title}}</div><p>{{vm.goalDetails.scorecard.value3}}</p></div></div><div ng-if=vm.contextSvc.device.isLargeScreen() class="section-container row"><div class=col-xs-12><hg-multi-series-chart class=goal-chart-container id=multiSeriesChart options=vm.goalDetails.goalChartOptions series=vm.goalDetails.goalChartSeries chart-loaded="vm.chartLoadedHandler"></div></div><div ng-if=vm.contextSvc.device.isSmallScreen() class="section-container row mobile-chart-container"><div class=col-xs-12><hg-multi-series-chart class="goal-chart-container mobile-goal-chart-container" id=multiSeriesChart options=vm.goalDetails.goalChartOptions series="vm.goalDetails.goalChartSeries"></div></div><div data-ng-if=$root.deviceInfo.isLargeScreen()><div class=section-container><div ng-if="(vm.goalDetails.type === 1 && vm.goalDetails.state !== 1) || (vm.goalDetails.type === 1 && vm.goalDetails.target.editGoalFlag==true)" class=row><div class="col-md-4 padding-right-0"><hg-contribution state=vm.goalDetails.state contribution=vm.goalDetails.monthlyContribution></hg-contribution></div><div class="col-md-4 padding-right-0"><hg-contribution state=vm.goalDetails.state contribution=vm.goalDetails.oneTimeContribution></hg-contribution></div><div class=col-md-4><hg-risk-profile viewmodel=vm risk-profile=vm.goalDetails.riskProfile></hg-risk-profile></div></div><div ng-if="(vm.goalDetails.type === 2 && vm.goalDetails.state !== 1) || (vm.goalDetails.type === 2 && vm.goalDetails.target.editGoalFlag==true)" class=row><div class=col-md-6><hg-risk-profile viewmodel=vm risk-profile=vm.goalDetails.riskProfile></hg-risk-profile></div><div class=col-md-6><hg-contribution contribution=vm.goalDetails.oneTimeContribution state=vm.goalDetails.state></hg-contribution></div></div></div><div class=goal-footer-container><div class=row><div class=col-md-7><hg-summary-statement summary-statement=vm.goalDetails.summaryStatement edit-state=vm.goalDetails.editState></hg-summary-statement></div><div class=col-md-5><div class=row><hg-progress-bar progress-bar=vm.goalDetails.timeHorizon class=col-xs-12></hg-progress-bar></div><div class=row ng-if="vm.goalDetails.type === 1"><hg-counter value=vm.goalDetails.contributions class=col-xs-12></hg-counter></div><div ng-if="vm.goalDetails.type === 2" class=mini-chart-padding><hg-mini-chart model=vm.goalDetails></hg-mini-chart></div></div></div></div></div><div data-ng-if=$root.deviceInfo.isSmallScreen()><div class=row><div class="goal-footer-container col-xs-12"><div class="goal-bars-container row"><div class=col-xs-12><hg-progress-bar progress-bar=vm.goalDetails.timeHorizon></hg-progress-bar></div><div ng-if="vm.goalDetails.type === 1" class=col-xs-12><hg-counter value=vm.goalDetails.contributions></hg-counter></div></div><div class=row><hg-summary-statement summary-statement=vm.goalDetails.summaryStatement edit-state=vm.goalDetails.editState class=col-xs-12></hg-summary-statement></div></div></div><div class=row><hg-parameter-selector viewmodel=vm.goalDetails parameter-selector=vm.goalDetails.parameterSelector class=col-xs-12></hg-parameter-selector></div></div></div><div ng-if="vm.goalDetails.state>3" class=row><div class=col-xs-12><hg-goal-status goalstate=vm.goalDetails.state goaltype=vm.goalDetails.type goaltitle=vm.goalDetails.title class=margin-bottom-24></hg-goal-status><div class="goal-footer-container col-xs-12 margin-top-40"><hg-summary-statement summary-statement=vm.goalDetails.summaryStatement edit-state=vm.goalDetails.editState></hg-summary-statement></div></div></div></div></div><div class="text-center container-padded cmsFooterLight hidden-xs row"><div class=col-xs-12><hg-disclosure-text goaldetails=vm.goalDetails></hg-disclosure-text></div></div></hg-page>'),a.put("templates/assets/goalAmountWidget.html","<div><div>Total Amount</div><div><input></div><div>How much do I need?</div></div>"),a.put("templates/assets/goalSavingsScoreCard.html","<div class=score-card-overlay><div class=score-card-info><div>Goal</div><div>{{model.goalAmountText}}</div><div class=margin-top-10>Current Balance</div><div>{{model.currentValueText}}</div></div><div id=goalScoreCardPieChart class=score-card-chart>Pie Chart Here</div></div>"),a.put("templates/assets/goalStateWidget.html","<div><h2>Goal Status</h2><div>Goal satus message goes here.</div></div>"),a.put("templates/assets/goalStatusDetails.html",'<div class="navbar navbar-fixed-top navbar-default" role=navigation><div class=container-fluid><div class=navbar-header><div class=navigation-title>{{vm.goalDetails.title.shortLabel1}}</div><div class=navbar-mobile-right data-ng-click=vm.back() ng-enter=vm.back()><a><i class=icon-close-x></i><span class=sr-only>Close Graphics Icon</span></a></div><div class="brand brand-preenrollment"></div></div></div></div><hg-page full=true solo=!$root.isMobile><div class=goals-message-page ng-include="\'templates/assets/goalStatusInfo.html\'"></div></hg-page>'),a.put("templates/assets/goalStatusInfo.html","<p>Goal purpose, projected balance, end year, and monthly contributions shown are based on answers you gave in the investment profile questionnaire.<br><br>For a savings goal, this chart depicts how your portfolio may perform in better, average, and worse markets. Your projected balance is based on average market performance using Charles Schwab Investment Advisory, Inc.’s long-term return estimates.<br><br>For an income goal, the inner curve of the chart shows the likelihood of your account balance lasting with 90% confidence. The middle curve shows a 75% confidence, and the outer curve shows a 50% confidence.<br><br><a data-ng-click=preventCollapse($event) class=education-content href=https://intelligent.schwab.com/public/intelligent/insights/whitepapers/goal.html target=_blank>Read more</a> &nbsphow projected outcomes are determined.</p>"),a.put("templates/assets/goalTwoLineOverlay.html","<div class=projected-balance-widget><div class=projected-balance-body data-ng-class=model.uiClass><div class=goal-overlay-labels>{{model.line1}}</div><div class=projected-balance-amount>{{model.line2}}</div></div></div>"),a.put("templates/assets/goalTwoLineOverlayBoxed.html","<div class=projected-balance-boxed><div class=projected-balance-body data-ng-class=model.uiClass><div>{{model.line1}}</div><div class=projected-balance-amount>{{model.line2}}</div></div></div>"),a.put("templates/assets/goalValue.html",'<hg-page full=true solo=!$root.isMobile><div class="goals-container row"><div class=col-xs-12><div class="section-container row"><hg-title-style1 class=col-xs-12 value=vm.goalDetails.title type=vm.goalDetails.type details-page=charts.goal.goalStatusDetails></hg-title-style1></div><div class="section-container mobile-chart-container row"><div class=col-xs-12><hg-multi-series-chart class=goal-chart-container id=multiSeriesChart options=vm.goalDetails.goalChartOptions series=vm.goalDetails.goalChartSeries ng-class="{\'mobile-goal-chart-container\':vm.contextSvc.device.isSmallScreen()}" chart-loaded="vm.chartLoadedHandler"></div></div><div class="section-container row"><hg-input-style viewmodel=vm value=vm.goalDetails.target class=col-xs-12></hg-input-style></div><div class=setup-goal-message-overlay bs-popover data-placement=bottom data-content-template=templates/assets/setupGoalPopup.html id=setupGoalPopover></div><hg-button-group fixed=true class=goal-action-bar ng-if="vm.goalDetails.type === 1"><button ng-click=vm.saveGoal() class="btn btn-default btn-touch">Save goal</button></hg-button-group><hg-button-group fixed=true class=goal-action-bar ng-if="vm.goalDetails.type === 2"><hg-button-primary ng-click=vm.goalDetails.oneTimeContribution.launchMoveMoneyWithdrawal()>Transfer</hg-button-primary><button ng-click=vm.saveGoal() class="btn btn-default">Save</button></hg-button-group></div></div></hg-page>'),a.put("templates/assets/goalValueFirstTimeMessage.html","<hg-page><div class=goals-message-page ng-include=\"'templates/assets/setupGoalPopup.html'\"></div></hg-page>"),a.put("templates/assets/goalbase.html","<div ui-view></div>"),a.put("templates/assets/incomeScorecard.html",'<div class=income-scorecard-container><div data-ng-if="!scorecard.isMini && $root.deviceInfo.isLargeScreen()" class="income-scorecard-overlay {{model.borderCssClass}}"><div class=score-card-info><div class=score-card-title>{{model.title}}</div><p>{{model.value3}}</p></div><div class=score-card-circle><status-donut-chart color=model.cssclass percentage=model.percentage label=model.innerLabel size=80></status-donut-chart></div></div><div data-ng-if=scorecard.isMini><div class=row><div class="col-xs-8 col-sm-8 col-md-8 col-lg-8 padding-right-0 text-detail-dark">{{scorecard.label1}}</div><div class="col-xs-4 col-sm-4 col-md-4 col-lg-4 text-right padding-left-0 numeric">{{scorecard.value1}}</div></div><div class=row><div class="col-xs-10 col-sm-10 col-md-10 col-lg-10 padding-right-0 text-detail-dark">{{scorecard.label2}}</div><div class="col-xs-2 col-sm-2 col-md-2 col-lg-2 text-right padding-left-0 numeric">{{scorecard.value2}}</div></div></div></div>'),a.put("templates/assets/monthlyContributions.html",'<hg-page full=true solo=!$root.isMobile><div class="goals-container row"><div class=col-xs-12><div class="section-container row"><hg-title-style1 value=vm.goalDetails.title type=vm.goalDetails.type details-page=charts.goal.goalStatusDetails class=col-xs-12></hg-title-style1></div><div class="chart-section mobile-chart-container row"><div class=col-xs-12><hg-multi-series-chart class=goal-chart-container id=multiSeriesChart options=vm.goalDetails.goalChartOptions series=vm.goalDetails.goalChartSeries ng-class="{\'mobile-goal-chart-container\':vm.contextSvc.device.isSmallScreen()}"></div></div><div class="section-container row" data-ng-if=false><hg-quick-view quick-view=vm.goalDetails.quickView class=col-xs-12></hg-quick-view></div><div class="section-container row" data-ng-if=!false><hg-contribution state=vm.goalDetails.state contribution=vm.goalDetails.monthlyContribution></hg-contribution></div><hg-button-group fixed=true class=goal-action-bar data-ng-if=$root.deviceInfo.isSmallScreen()><hg-button-primary ng-click=vm.goalDetails.monthlyContribution.launchMoveMoney()>Transfer</hg-button-primary><hg-button ng-click=vm.saveGoal() class="btn btn-default">Save</hg-button></hg-button-group></div></div></hg-page>'),a.put("templates/assets/monthlyContributionsPopup.html",'<div class="navbar navbar-fixed-top navbar-default" role=navigation><div class=container-fluid><div class=navbar-header><div class=navigation-title>{{vm.goalDetails.title.shortLabel1}}</div><div class=navbar-mobile-right data-ng-click=vm.back() ng-enter=vm.back()><a><i class=icon-close-x></i><span class=sr-only>Close Graphics Icon</span></a></div><div class="brand brand-preenrollment"></div></div></div></div><hg-page><div class=goals-message-page>{{vm.goalDetails.monthlyContribution.slider.iconToolTip.info}}</div></hg-page>'),a.put("templates/assets/oneTimeContribution.html",'<hg-page full=true solo=!$root.isMobile><div class="goals-container row"><div class=col-xs-12><div class="section-container row"><hg-title-style1 value=vm.goalDetails.title type=vm.goalDetails.type details-page=charts.goal.goalStatusDetails class=col-xs-12></hg-title-style1></div><div class="chart-section mobile-chart-container row"><div class=col-xs-12><hg-multi-series-chart class=goal-chart-container id=multiSeriesChart options=vm.goalDetails.goalChartOptions series=vm.goalDetails.goalChartSeries ng-class="{\'mobile-goal-chart-container\':vm.contextSvc.device.isSmallScreen()}"></div></div><div class=section-container data-ng-if=false><hg-quick-view quick-view=vm.goalDetails.quickView></hg-quick-view></div><div class="section-container row"><hg-contribution state=vm.goalDetails.state contribution=vm.goalDetails.oneTimeContribution></hg-contribution></div><hg-button-group fixed=true class=goal-action-bar data-ng-if=$root.deviceInfo.isSmallScreen()><hg-button-primary ng-click=vm.goalDetails.oneTimeContribution.launchMoveMoney()>{{vm.goalDetails.oneTimeContribution.slider.buttonText}}</hg-button-primary></hg-button-group></div></div></hg-page>'),a.put("templates/assets/performanceBase.html","<div ui-view></div>"),a.put("templates/assets/performanceBenchmark.html",'<div class=benchmark-widget><div class=row ng-if="viewType==\'performance\'"><div class="col-xs-6 col-md-4 performance-box" data-ng-class="{\'col-md-offset-2\': benchmarks.length<=1}" ng-if=$root.deviceInfo.isLargeScreen()><div class=performance-data ng-style="performance.heroStylePerformance; {\'border-color\':performance.performanceColor}"><div class=data-position><div><div class=investment ng-style="{\'color\':performance.performanceColor}">Your Investment Performance</div><div class=performance-gains><span ng-if="performance.performancePercentageChange == \'NEGATIVE\'"><i class="fa fa-caret-down fa-2x arrow-down"></i></span> <span ng-if="performance.performancePercentageChange == \'POSITIVE\'"><i class="fa fa-caret-up fa-2x arrow-up"></i></span> <span class=percentage-value>{{performance.performancePercentageFormatted}}</span> <span class=dollar-value>{{gainAmount}}</span></div><div class=performance-link ng-if=$root.isSIP><a href=https://intelligent.schwab.com/public/intelligent/nn/latest_market_insights.html target=_blank>Latest Market Insights</a></div></div></div></div></div><div ng-if=!$root.isIIP><div class="col-md-4 hidden-xs" ng-if=!benchmarks.length><div class=default-message><div>Select Index Below</div></div></div><div class="col-xs-6 col-md-4 benchmark-box" ng-if="benchmarks.length && $root.deviceInfo.isLargeScreen()" ng-repeat="benchmark in benchmarks"><div class=performance-data ng-style="{\'border-color\':benchmark.colorNormalhex}"><div class="benchmark-close icon-close-x image-cursor" data-ng-click=removebenchmark.removeBenchmark(benchmark)></div><div class=data-position><div><div ng-style="{\'color\':benchmark.colorNormalhex}">{{benchmark.name}}</div><span ng-if="benchmark.percentageFormatted == \'NEGATIVE\'"><i class="fa fa-caret-down fa-2x arrow-down"></i></span> <span ng-if="benchmark.percentageFormatted == \'POSITIVE\'"><i class="fa fa-caret-up fa-2x arrow-up"></i></span> <span class=percentage-value>{{benchmark.percentageChange}}</span></div></div></div></div><div class="col-xs-6 col-md-4 benchmark-box" ng-if="benchmarks.length && $root.deviceInfo.isSmallScreen()" ng-repeat="benchmark in benchmarks"><div class="benchmark-close fa fa-times-circle image-cursor" data-ng-click=removebenchmark.removeBenchmark(benchmark)></div><div class=performance-data ng-style="{\'border-color\':benchmark.colorNormalhex}"><div class=data-position><div><div ng-style="{\'color\':benchmark.colorNormalhex}">{{benchmark.name}}</div><span ng-if="benchmark.percentageFormatted == \'NEGATIVE\'"><i class="fa fa-caret-down fa-2x arrow-down"></i></span> <span ng-if="benchmark.percentageFormatted == \'POSITIVE\'"><i class="fa fa-caret-up fa-2x arrow-up"></i></span> <span class=percentage-value>{{benchmark.percentageChange}}</span></div></div></div></div></div><div class="performance-box col-xs-12" ng-if=$root.deviceInfo.isSmallScreen() ng-style=performance.heroStylePerformance><div class=performance-data><div class=performance-title><div ng-style="{\'color\':performance.performanceColor}"><i class="investment fa fa-square" ng-style="{\'color\':performance.performanceColor}"></i>Your Investment Performance</div><div class=performance-link ng-if=$root.isSIP><a href=https://intelligent.schwab.com/public/intelligent/nn/latest_market_insights.html target=_blank>Latest Market Insights</a></div></div><div class=performance-gains><span ng-if="performance.performancePercentageChange == \'NEGATIVE\'"><i class="fa fa-caret-down fa-2x arrow-down"></i></span> <span ng-if="performance.performancePercentageChange == \'POSITIVE\'"><i class="fa fa-caret-up fa-2x arrow-up"></i></span> <span class=percentage-value>{{performance.performancePercentageFormatted}}</span><div class=dollar-value>{{gainAmount}}</div></div></div></div></div><div ng-if="viewType==\'value\'"><div class=row><div class=col-md-6><div class=performance-data ng-style="{\'border-color\':performance.valueColor}"><label class=value ng-style="performance.heroStyleValue; {\'color\':performance.valueColor}">Account Value</label><div class=percentage-value>{{performance.valueAmountFormatted}}</div></div></div><div class=col-md-6><div class=performance-data ng-style="{\'border-color\':performance.contributionColor}"><label class=contributions ng-style="performance.heroStyleContributions; {\'color\':performance.contributionColor}">Contributions & Withdrawals</label><div class=percentage-value>{{performance.contributionAmountFormatted}}</div></div></div></div></div></div>'),a.put("templates/assets/performanceChart.html",'<hg-page full=true solo=!$root.isMobile><div class=content-performance-md><div ng-if=$root.allAccountsClosedFlag class="custom-error-messages row"><div class=col-xs-12><b>{{vm.performanceViewModel.allAccountsClosedMessage.message1}}</b></div><div class=col-xs-12><b>{{vm.performanceViewModel.allAccountsClosedMessage.message2}}</b></div></div><div ng-show="!$root.allAccountsClosedFlag && isUnfundedOrUninvested()" class="status-message row"><div class=col-xs-12><hg-page-title>Welcome!</hg-page-title><hg-page-sub-title>Performance data will be available after your portfolio is established.</hg-page-sub-title></div></div><div ng-show="!$root.allAccountsClosedFlag && !isUnfundedOrUninvested() && vm.performanceViewModel.badPerformanceData" class="custom-error-messages row"><div class=col-xs-12><b>{{vm.performanceViewModel.badPerformanceDataMsg1}}</b></div><div class=col-xs-12><b>{{vm.performanceViewModel.badPerformanceDataMsg2}}</b></div></div><div ng-show="!$root.allAccountsClosedFlag && !isUnfundedOrUninvested() && !vm.performanceViewModel.badPerformanceData "><div class="time-frame-container row visible-xs"><div class=col-xs-12><div class=row><div class="btn-group btn-group-justified time-frame-btn-group col-xs-12"><div class=btn-group ng-repeat="item in vm.performanceViewModel.viewType"><button type=button id={{item.view}} class={{item.mobileDisplayViewClass}} ng-click=vm.performanceViewModel.updatePerfChart(item.view)>{{item.mobileDisplayView}}</button></div></div></div><div class=row><div class="btn-group btn-group-justified time-frame-btn-group mobile-spacer col-xs-12"><div class=btn-group ng-if="vm.performanceViewModel.selectedViewType==\'performance\' && $root.isSIP"><button type=button class=btn ng-click=vm.performanceViewModel.navigateToBenchmarkSelection()><span>Select Index</span> <span class=pull-right><span class=icon-arrow-right></span></span></button></div><div class=btn-group><button type=button class=btn ng-class="{\'btn-divider-left\':vm.performanceViewModel.selectedViewType==\'performance\'}" ng-click=vm.performanceViewModel.getDateRange()><span class=icon-calendar></span> <span>{{vm.performanceViewModel.selectedRange}}</span> <span class=pull-right><span class=icon-arrow-right></span></span></button></div></div></div></div></div><div class=dashboard-container><div class=widget-performance><hg-performance-benchmark view-type=vm.performanceViewModel.selectedViewType gain-amount=vm.performanceViewModel.balanceDetails.gainLoss gain-amount-change=vm.performanceViewModel.balanceDetails.gainLossChange performance=vm.performanceViewModel.charts.series[0] removebenchmark=vm.performanceViewModel benchmarks=vm.performanceViewModel.benchmarkPicker.selectedBenchmarkList></hg-performance-benchmark></div><hg-multi-series-chart id=performanceChart options=vm.performanceViewModel.chartOption series=vm.performanceViewModel.chartSeries></hg-multi-series-chart><div class=text-right>{{vm.performanceViewModel.charts.asOfText}}</div><div class="performance-options dashboard-select hidden-xs"><div class=row><span><label id=lblSelectOptionView class=label-select-view for=selectOptionView>View</label><select id=selectOptionView class=dashboard-select ng-model=vm.performanceViewModel.selectedViewType ng-options="item.view as item.displayView for item in vm.performanceViewModel.viewType" ng-change=vm.performanceViewModel.updatePerfChart(vm.performanceViewModel.selectedViewType)></select></span> <span><label id=lblSelectRange class=label-select-range for=selectRange>Date Range</label><select id=selectRange class=dashboard-select ng-model=vm.performanceViewModel.selectedRangeName ng-options="range.value as range.text for range in vm.performanceViewModel.performanceRangeNames" ng-change=vm.performanceViewModel.updatePerfChart(vm.performanceViewModel.selectedViewType)></select></span> <span ng-if="vm.performanceViewModel.selectedViewType==\'performance\' && $root.isSIP"><label for=selectBenchmark class=label-select-range>Indexes</label><span class=benchmark-selector id=selectBenchmark ng-model=selectedBenchmark ng-click=vm.performanceViewModel.benchmarkPicker.openBenchmarkModal()><span>Select Index</span> <span class=pull-right><i class=icon-arrow-right></i></span></span></span></div><div class="date-range date-picker" ng-if="vm.performanceViewModel.selectedRangeName == \'custom\'"><label id=lblCustomStartDate class=label-start-date for=customStartDate>Customize Date Range</label><input class=dashboard-select id=customStartDate data-date-format=MM/dd/yyyy ng-model=vm.performanceViewModel.customRange.startDate data-min-date={{vm.performanceViewModel.customRange.accountStartDate}} data-max-date={{vm.performanceViewModel.customRange.latestAllowedStartDate}} data-autoclose=1 name=date3 bs-datepicker data-bs-show=vm.performanceViewModel.customRange.firstDP ng-required=true placeholder=MM/DD/YYYY ng-change="vm.performanceViewModel.updatePerfChart(vm.performanceViewModel.selectedViewType);\r\n                            vm.performanceViewModel.customRange.openFirstDP(false);"> <span class=dashboard-select ng-click=vm.performanceViewModel.customRange.openFirstDP(true); ng-blur=vm.performanceViewModel.customRange.openFirstDP(false);><i class="icon-calendar chartcalendar"></i></span><label class=sr-only for=customEndDate>Customize End Date</label><input class=dashboard-select id=customEndDate ng-model=vm.performanceViewModel.customRange.endDate data-date-format=MM/dd/yyyy data-min-date={{vm.performanceViewModel.customRange.earliestAllowedEndDate}} data-max-date={{vm.performanceViewModel.customRange.accountEndDate}} data-date-disabled="disabled(date, mode)" ng-required=true data-autoclose=1 name=date5 bs-datepicker data-bs-show=vm.performanceViewModel.customRange.secondDP placeholder=MM/DD/YYYY ng-change="vm.performanceViewModel.updatePerfChart(vm.performanceViewModel.selectedViewType);\r\n                           vm.performanceViewModel.customRange.openSecondDP(false);"> <span class=dashboard-select ng-click=vm.performanceViewModel.customRange.openSecondDP(true); ng-blur=vm.performanceViewModel.customRange.openSecondDP(false);><i class="icon-calendar chartcalendar"></i></span></div></div></div><div class=allocation-container><h4 class=allocation-title>BALANCE DETAILS</h4><hr><div class="allocation-content row"><div class="col-md-12 col-lg-12"><div class=datagrid><div class="row balance-details" ng-repeat="balanceDetails in vm.performanceViewModel.componentsOfChange"><div class="col-sm-8 col-xs-8 col-md-6">{{balanceDetails.textLabel}}</div><div class="col-sm-4 col-xs-4 col-md-6 text-right">{{balanceDetails.detailTextLabel}}</div></div></div></div></div></div><div class="container-padded text-center cmsFooterLight"><hg-local-asset hg-asset-id=SIP-Performance-Disclosure></hg-local-asset></div></div></div></hg-page>'),a.put("templates/assets/performanceDateRange.html",'<ng-form name=form><hg-page full=true solo=!$root.isMobile><div><hg-page-title>Adjust Date Range</hg-page-title><div><div ng-repeat="range in vm.performanceViewModel.performanceRangeNames"><div class="radio-group margin-0" ng-click=vm.performanceViewModel.confirmDateRange(range)><input class="form-control radio" id={{range.value}} value={{range.value}} type=radio name=radio ng-model="vm.performanceViewModel.selectedRangeName"><label for={{range.value}} class=label-block>{{range.text}}</label></div></div><div class="date-range date-picker" data-ng-show="vm.performanceViewModel.selectedRangeName === \'custom\'"><label>Customize Date Range</label><p class=input-group><input class="form-control transfer-date" id=customStartDate ng-model=vm.performanceViewModel.customRange.startDate data-date-format=MM/dd/yyyy data-min-date={{vm.performanceViewModel.customRange.accountStartDate}} data-max-date={{vm.performanceViewModel.customRange.latestAllowedStartDate}} ng-required=true data-autoclose=1 name=date3 bs-datepicker data-bs-show=vm.performanceViewModel.customRange.firstDP placeholder=MM/DD/YYYY ng-change="vm.performanceViewModel.updatePerfChart();\r\n                               vm.performanceViewModel.customRange.openFirstDP(false);"> <span class=input-group-btn><button class="btn btn-default btn-primary btn-icon-calendar" ng-click=vm.performanceViewModel.customRange.openFirstDP(true); ng-blur=vm.performanceViewModel.customRange.openFirstDP(false);><i class=icon-calendar></i></button></span></p><p class=input-group><input class="form-control transfer-date" id=customEndDate ng-model=vm.performanceViewModel.customRange.endDate data-date-format=MM/dd/yyyy data-min-date={{vm.performanceViewModel.customRange.earliestAllowedEndDate}} data-max-date={{vm.performanceViewModel.customRange.accountEndDate}} data-date-disabled="disabled(date, mode)" ng-required=true data-autoclose=1 name=date5 bs-datepicker data-bs-show=vm.performanceViewModel.customRange.secondDP placeholder=MM/DD/YYYY ng-change="vm.performanceViewModel.updatePerfChart();\r\n                               vm.performanceViewModel.customRange.openSecondDP(false);"> <span class=input-group-btn><button class="btn btn-default btn-primary btn-icon-calendar" ng-click=vm.performanceViewModel.customRange.openSecondDP(true); ng-blur=vm.performanceViewModel.customRange.openSecondDP(false);><i class=icon-calendar></i></button></span></p></div><div class=button-action-bar><button type=submit ng-click=vm.performanceViewModel.updatePerfChart(vm.performanceViewModel.selectedViewType);vm.performanceViewModel.navigateToPerformance(); class="btn btn-primary" aria-label=Confirm>Confirm</button></div></div></div></hg-page></ng-form>'),a.put("templates/assets/popover-left.html","<h2 class=secondary-header>ITEM DETAILS</h2><h1>Name of the details</h1><p>Companies with capitalization over $10 billion are considered large-cap. Roughly $0.10 of every dollar invested will go into purchasing this fund.</p><table><tr><td>Schwab U.S. Large-Company ETF™<strong>(SCHX)</strong></td><td class=numeric>$1,080</td></tr><tr><td>Schwab U.S. Large-Company Value ETF™<strong>(SCHX)</strong></td><td class=numeric>$540</td></tr><tr><td>Schwab U.S. Broad Market ETF™<strong>(SCHX)</strong></td><td class=numeric>$540</td></tr></table>"),a.put("templates/assets/portfolioAssetPopover.html",'<div class=popover tabindex=-1><div class=arrow></div><div class=popover-content><div class="pull-right icon-close-x image-cursor" ng-click=$hide()></div><h1>{{lv2.name}}</h1><p>{{lv2.fundDescription}}</p><div ng-if=isInvestedAssetPopup><p ng-if=$root.isSIP><a ng-href=/public/intelligent/insights/whitepapers/guide-to-asset-classes.html#{{lv2.uriSource}} target=_blank>Learn More</a></p><table><tr ng-repeat="s in lv2.securities"><td style="padding-left: 0px;padding-bottom: 4px">{{s.description}}&nbsp;<strong ng-show="s.symbol && s.balance">({{s.symbol}})</strong><strong ng-show=s.info>{{s.info}}</strong></td><td class=numeric>{{s.balance}}</td></tr></table></div><div ng-if=!isInvestedAssetPopup><div ng-repeat="s in lv2.securities | orderBy: \'priority\'" class=etf-popup-display><div ng-if="s.priority == 0" class=bold>Primary ETF</div><div ng-if="s.priority == 1"><span class=bold>Secondary ETF</span>&nbsp;<span ng-if=$root.isSIP>for tax loss harvesting</span></div><div>{{s.description}}&nbsp;<strong>({{s.symbol}})</strong></div></div><p ng-if=$root.isSIP class=text-right><a ng-href=/public/intelligent/insights/whitepapers/guide-to-asset-classes.html#{{lv2.uriSource}} target=_blank>Learn More</a></p></div></div></div>'),
a.put("templates/assets/quickView.html",'<div class="row goal-quick-view"><div class="col-xs-6 col-sm-6 col-md-6 col-lg-6"><div class=text-detail-dark>{{quickView.label1}}</div><div class=numeric>{{quickView.value1}}</div></div><div class="col-xs-6 col-sm-6 col-md-6 col-lg-6"><div class=text-detail-dark>{{quickView.label2}}</div><div class=numeric>{{quickView.value2}}</div></div></div>'),a.put("templates/assets/riskProfile.html",'<hg-page full=true solo=!$root.isMobile><div class="goals-container row"><div class=col-xs-12><div class="section-container row"><hg-title-style1 value=vm.goalDetails.title type=vm.goalDetails.type details-page=charts.goal.goalStatusDetails class=col-xs-12></hg-title-style1></div><div hg-sticky hg-sticky-enabled=false hg-sticky-scrolling-container=#content-mobile hg-sticky-top-offset=50 class="chart-section mobile-chart-container row"><div class=col-xs-12><hg-multi-series-chart class=goal-chart-container id=multiSeriesChart options=vm.goalDetails.goalChartOptions series=vm.goalDetails.goalChartSeries ng-class="{\'mobile-goal-chart-container\':vm.contextSvc.device.isSmallScreen()}"></div></div><div class="section-container row" data-ng-if=false><hg-quick-view quick-view=vm.goalDetails.quickView class=col-xs-12></hg-quick-view></div><div class="section-container row" data-ng-if=!false><hg-risk-profile viewmodel=vm risk-profile=vm.goalDetails.riskProfile></hg-risk-profile></div><hg-button-group fixed=true class=goal-action-bar data-ng-if=$root.deviceInfo.isSmallScreen()><hg-button-primary data-ng-disabled=vm.goalDetails.riskProfile.riskSelectionUnchanged ng-click=vm.goalDetails.riskProfile.launchPlanConfirmation()>{{vm.goalDetails.riskProfile.sliderGroup.buttonText}}</hg-button-primary></hg-button-group></div></div></hg-page>'),a.put("templates/assets/riskProfilePopup.html",'<div class="navbar navbar-fixed-top navbar-default" role=navigation><div class=container-fluid><div class=navbar-header><div class=navigation-title>{{vm.goalDetails.title.shortLabel1}}</div><div class=navbar-mobile-right data-ng-click=vm.back() ng-enter=vm.back()><a><i class=icon-close-x></i><span class=sr-only>Close Graphics Icon</span></a></div><div class="brand brand-preenrollment"></div></div></div></div><hg-page><div class=goals-message-page>{{vm.goalDetails.riskProfile.sliderGroup.iconToolTip.info}}</div></hg-page>'),a.put("templates/assets/riskSliderInfo.html",'<div class=popover tabindex=-1><div class=arrow></div><div ng-if=$root.deviceInfo.isLargeScreen() class=popover-content><div class=goals-popup-container><i class="icon-close-x pull-right image-cursor" ng-click=riskProfile.togglePopup()></i><br><p ng-bind-html=riskProfile.sliderInfoMessage></p></div></div></div><div ng-if=$root.deviceInfo.isSmallScreen() tabindex=-1><div class=arrow></div><div class=popover-content><div><p ng-bind-html=vm.goalDetails.riskProfile.sliderInfoMessage></p></div></div></div>'),a.put("templates/assets/riskSliderMessage.html","<hg-page><div class=goals-message-page ng-include=\"'templates/assets/riskSliderInfo.html'\"></div></hg-page>"),a.put("templates/assets/selectBenchmarkOverlay.html",'<div class=modal tabindex=-1 role=dialog><div class=modal-dialog><div class="modal-content benchmark-modal"><div class="modal-header padding-0 overlay-header dk-scheme navyfive text-center"><span ng-if=$root.deviceInfo.isLargeScreen() class=selector-modal-dismiss><a data-ng-click=cancel() href=# ng-enter=cancel() aria-label=Close><i class=icon-close-x></i></a></span> <span ng-if=!$root.deviceInfo.isLargeScreen() class=benchmark-back data-ng-click=back()><a><i class=icon-arrow-left-tail></i></a></span> <span class=selector-modal-title>Select Indexes</span></div><div class=row><div class=col-xs-12><ul class="checkbox-list padding-0"><li><div><p>Select up to 5 indexes for comparison.</p><p><strong>{{totalBenchmarks}} of {{benchmarkLimit}} selected</strong></p></div></li></ul><hg-check-list itemslist=items selection-limit=benchmarkLimit callback-function=selectedBenchmark(list) selected-item-list=benchmarkListSelected></hg-check-list><div class=text-center><hg-button-primary ng-click=cancel()>Done</hg-button-primary></div></div></div></div></div></div>'),a.put("templates/assets/setupGoalPopup.html",'<div class=goals-popup-container><div ng-if=$root.deviceInfo.isLargeScreen() class="pull-right icon-close-x image-cursor" ng-click=vm.loadPopup(true)></div><h1>Setup Goal</h1><p>Goal purpose, projected balance or withdrawal amounts, and end year shown are based on answers you gave in the investment profile questionnaire.</p><p>Watch a <a href=https://intelligent.schwab.com/public/intelligent/nn/goal-tracking-video.html target=_blank>video</a> to learn more.</p><p>Also, read our <a href=https://intelligent.schwab.com/public/intelligent/insights/whitepapers/goal.html target=_blank>whitepaper</a> for details.</p><p>Use "Save Goal" button to finish setup.</p></div>'),a.put("templates/auth/login.html","<iframe class=login-dialog ng-src={{micrositeUrl}}></iframe>"),a.put("templates/auth/loginForm.html",'<form name=userForm class="form login-form"><div class=form-group ng-class="{ \'has-error\' : userForm.EmailAddress.$invalid && !userForm.EmailAddress.$pristine }"><label for=inputEmail1>Login ID</label><input type=email name=EmailAddress class="form-control login-id" id=inputEmail1 ng-model=newAddress.emailAddress required validate-email-address=""><div class=help-block ng-show="!userForm.EmailAddress.$pristine && userForm.EmailAddress.$invalid"><span ng-show="userForm.EmailAddress.$error.required || userForm.EmailAddress.$error.validateEmailAddress">Please enter a valid email address.</span></div></div><div class=form-group ng-class="{ \'has-error\' : userForm.password.$invalid && !userForm.password.$pristine }"><label for=password>Password</label><input type=password name=password class="form-control login-password" id=password ng-model=identity.password required><p ng-show="userForm.password.$invalid && !userForm.password.$pristine" class=help-block>Please enter a password.</p></div><div class="text-center login-forgot-password"><a data-ng-click=navigateToForgotPassword()><strong>Forgot your password?</strong></a></div><div class="text-center login-btn"><button ng-click=login() type=button class="btn btn-default btn-lg btn-login">Login</button></div></form>'),a.put("templates/auth/multiToken.html",'<div class=login-container><div class=pre-login-container><div class="message-container alert alert-danger" role=alert><div class=row><div class="col-md-1 message-icon"><i class="fa fa-exclamation-circle"></i></div><div class="col-md-11 message-content"><p>Apologies, lorem ipsum sit amet, consectute adipiscing elit, do eiusmod tempor.</p><a class=message-link href=# title="Learn more about the issue">Learn more about the issue</a>.</div></div></div><div class=row><div class=col-md-12><h1 class="title text-center">Our records indicated that you have more than one token assigned.</h1><div class=row><div class="col-xs-10 col-md-offset-1"><p class="content text-center">Please choose the token you wish to use and then enter the 6-digit passcode from your token. The token ID is on the back of the token.</p></div></div><div class=row><div class="col-md-6 col-md-offset-3 token-container"><form><div class=form-group><div class=form-group><label for=exampleSelect1>Token ID</label><select id=exampleSelect1 class=form-control><option value=1>1</option><option value=2>2</option><option value=3>3</option><option value=4>4</option><option value=5>5</option></select></div></div><label for=passcode>Passcode</label><div id=passcode class="form-group token-passcode"><div class=col-xs-2><label for=ex1 class=sr-only>Enter value for first input field</label><input class=form-control id=ex1 type=password maxlength=1></div><div class=col-xs-2><label for=ex2 class=sr-only>Enter value for second input field</label><input class=form-control id=ex2 type=password maxlength=1></div><div class=col-xs-2><label for=ex3 class=sr-only>Enter value for third input field</label><input class=form-control id=ex3 type=password maxlength=1></div><div class=col-xs-2><label for=ex4 class=sr-only>Enter value for four input field</label><input class=form-control id=ex4 type=password maxlength=1></div><div class=col-xs-2><label for=ex5 class=sr-only>Enter value for five input field</label><input class=form-control id=ex5 type=password maxlength=1></div><div class=col-xs-2><label for=ex6 class=sr-only>Enter value for six input field</label><input class=form-control id=ex6 type=password maxlength=1></div></div></form></div></div></div></div><div class=form-group><div class="token-btn text-center"><button type=button class="btn btn-default">Back</button> <button type=submit class="btn btn-default">Submit</button></div></div></div></div>'),a.put("templates/auth/prospect.html",'<div><div>{{initProspectLoginView()}}</div><div ng-if="prospect.otherControls == \'modalControl\'" class="modal-header-padding modal-header"><button type=button class=close data-dismiss=modal ng-click=cancel() aria-hidden=true>×</button></div><div class="headerlogo visible-xs"></div><div class=modal-body><div class=row ng-show=$root.isSIP><div><div class="text-center col-sm-10 col-md-10 col-sm-offset-1 col-md-offset-1"><h1 class="login-title header">{{prospect.title}}</h1></div><div ng-if="prospect.source == \'login\'"><div class="text-center font-additional-info col-sm-10 col-md-8 col-sm-offset-1 col-md-offset-2">{{prospect.additionalInfo}}</div></div><div ng-if="prospect.source == \'create\'" class="col-sm-offset-4 col-sm-4 font-additional-info"><div>Passwords must include:</div><ul class=main-nav><li>At least 6 characters</li><li>At least 1 letter</li><li>At least 1 number</li></ul></div></div><div class="col-sm-9 col-md-7 col-md-offset-3 col-sm-offset-2"><div class=row><div class="alert alert-danger ng-binding ng-scope" role=alert ng-show="errorMessage && errorMessage.length > 0">{{errorMessage}}</div></div><form name=userForm class=form><div class=form-group ng-class="{ \'has-error\' : userForm.EmailAddress.$invalid && !userForm.EmailAddress.$pristine }"><label for=inputEmail1>Email Address</label><input type=email name=EmailAddress class=form-control autofocus id=inputEmail1 ng-model-options="{ updateOn: \'blur\' }" ng-model=prospectLoginRequest.EmailId required validate-email-address=""><div class=help-block ng-show="!userForm.EmailAddress.$pristine && userForm.EmailAddress.$invalid"><span ng-show="userForm.EmailAddress.$error.required || userForm.EmailAddress.$error.validateEmailAddress">Please enter a valid email address.</span></div></div><div class=form-group ng-class="{ \'has-error\' : userForm.password.$invalid && !userForm.password.$pristine }"><label for=password>Password</label><input type=password name=password class=form-control id=password ng-model=prospectLoginRequest.Password required><p ng-show="userForm.password.$invalid && !userForm.password.$pristine" class=help-block>Please enter a password.</p></div><div ng-if="prospect.source == \'create\'"><div class=form-group ng-class="{ \'has-error\' : userForm.password.$invalid && !userForm.password.$pristine }"><label for=repeatPassword>Repeat Password</label><input type=password name=repeatPassword class=form-control id=repeatPassword ng-model=prospectLoginRequestRepeatPassword required><p ng-show="userForm.repeatPassword.$invalid && !userForm.repeatPassword.$pristine" class=help-block>Please enter a password.</p></div></div><div class=button-action-bar><button type=button class="btn btn-default" ng-click="previous(\'/prospectLogin\')">Back</button> <button type=button class="btn btn-primary btn-last" ng-click="next(\'/prospectLogin\')" ng-disabled=userForm.$invalid>Login</button></div><div class="text-center login-title" ng-if="prospect.source == \'login\'">I do not have a password yet, and want to <a ng-click=launchProspectCreateView()>save for the first time</a></div><p class=padding-top-12 data-ng-if=$root.isIIP>Your advisor will not see or have access to your Login ID or password, and you should not share it with your Advisor</p></form></div></div><div class=row ng-show=$root.isIIP><div class="text-center col-sm-10 col-md-10 col-sm-offset-1 col-md-offset-1"><h1 class="login-title header">Save and Continue is not yet available for Institutional Intelligent Portfolio accounts. Please complete your application before exiting.</h1></div><div class=button-action-bar><button type=button class="btn btn-default" ng-click="previous(\'/prospectLogin\')">Back</button></div></div></div></div>'),a.put("templates/auth/prospectCreate.html",'<div><div>{{initProspectCreateView()}}</div><div ng-if="prospect.otherControls == \'modalControl\'" class="modal-header-padding modal-header"><button type=button class=close data-dismiss=modal ng-click=cancel() aria-hidden=true>×</button></div><div class="headerlogo visible-xs"></div><div class=modal-body><div data-ng-show="errorMessage && errorMessage.length > 0" class=message-error><div id=message-container><div class=row><div class="col-xs-2 col-sm-1 col-md-1 col-lg-1 text-center"><i class="icon-error status-icon statusIconDangerLight"></i></div><div class="col-xs-8 col-sm-10 col-md-10 col-lg-10">{{errorMessage}}</div></div></div></div><div class=row><div class="col-sm-12 col-md-8 col-md-offset-2"><div class="clearfix text-center"><h1 class="login-title header">{{prospect.title}}</h1></div><div ng-if="prospect.source == \'login\'"><div class="text-center font-additional-info">{{prospect.additionalInfo}}</div></div><div ng-if="prospect.source == \'create\' && (errorMessage == null || errorMessage.length <= 0)" class="col-sm-12 col-md-8 col-sm-offset-4 col-md-offset-2 font-additional-info padding-top-12"><div>Passwords must include:</div><ul class="main-nav padding-left-17"><li>Between 6 and 8 characters in length</li><li>At least 1 letter</li><li>At least 1 number</li><li>No special characters or symbols</li></ul></div></div></div></div><div class="col-sm-12 col-md-6 col-md-offset-3"><form name=userForm class=form><div class=form-group ng-class="{ \'has-error\' : userForm.EmailAddress.$invalid && !userForm.EmailAddress.$pristine }"><label for=inputEmail1>Email Address</label><input type=email name=EmailAddress class=form-control id=inputEmail1 ng-model-options="{ updateOn: \'blur\' }" ng-model=prospectLoginRequest.EmailId required validate-email-address=""><div class=help-block ng-show="!userForm.EmailAddress.$pristine && userForm.EmailAddress.$invalid"><span ng-show="userForm.EmailAddress.$error.required || userForm.EmailAddress.$error.validateEmailAddress">Please enter a valid email address.</span></div></div><div class=form-group ng-class="{ \'has-error\' : userForm.password.$invalid && !userForm.password.$pristine }"><label for=password>Create Password</label><input type=password name=password class=form-control ng-model-options="{ updateOn: \'blur\' }" id=password validate-prospect-password ng-model=prospectLoginRequest.Password required><p ng-show="!userForm.password.$pristine && userForm.password.$invalid && !userForm.password.$error.validateProspectPassword" class=help-block>Please enter a password.</p><p ng-show=userForm.password.$error.validateProspectPassword class=help-block>The password does not follow the required format. Please review the password format and try again.</p></div><div ng-if="prospect.source == \'create\'"><div class=form-group ng-class="{ \'has-error\' : userForm.repeatPassword.$invalid && !userForm.repeatPassword.$pristine }"><label for=repeatPassword>Repeat Password</label><input type=password name=repeatPassword class=form-control id=repeatPassword ng-model=prospectLoginRequestRepeatPassword ng-model-options="{ updateOn: \'blur\' }" ng-pattern=prospectLoginRequest.Password validate-prospect-password required><p ng-show="!userForm.repeatPassword.$pristine && userForm.repeatPassword.$invalid && !userForm.repeatPassword.$error.validateProspectPassword && !userForm.repeatPassword.$error.pattern" class=help-block>Please enter a password.</p><p ng-show=userForm.repeatPassword.$error.validateProspectPassword class=help-block>The password does not follow the required format. Please review the password format and try again.</p><p ng-show="userForm.repeatPassword.$error.pattern && !userForm.repeatPassword.$error.validateProspectPassword" class=help-block>The password entries do not match. Please try again.</p></div></div><div class=login-title>Please review our <a target=_blank href="http://www.schwab.com/public/file?cmsid=P-974035&cv1"><b>PrivacyPolicy.</b></a></div><div class=button-action-bar><button type=button ng-click=launchProspectLoginView() class="btn btn-default">Back</button> <button type=button ng-click="next(\'/prospectCreate\')" ng-disabled=userForm.$invalid class="btn btn-primary">Save</button></div><div ng-if="prospect.source == \'login\'"><a ui-sref=prospectCreate>Save for the first time</a></div><p class=padding-top-12 data-ng-if=$root.isIIP>Your advisor will not see or have access to your Login ID or password, and you should not share it with your Advisor</p></form></div></div>'),a.put("templates/cms/agreements.html","<div id=up-form-views ui-view></div>"),a.put("templates/cms/agreementsDetail.html","<hg-page><form name=agreementsForm class=form novalidate><hg-remote-asset hg-asset-id={{assetId}}></hg-remote-asset></form></hg-page>"),a.put("templates/cms/agreementsHome.html",'<hg-page full=true><form name=agreementsForm class=form novalidate><div ng-if=$root.isSIP class="margin-top-40 margin-left-40"><hg-remote-asset hg-asset-id=SIP-GLOBAL-AGREEMENTS-POST-LOGIN></hg-remote-asset></div><div ng-if=$root.isIIP><hg-remote-asset class="cms cms-iip clearfix" hg-asset-id=P-7841277></hg-remote-asset></div></form></hg-page>'),a.put("templates/cms/insights.html","<div id=up-form-views ui-view></div>"),a.put("templates/cms/insightsDetail.html",'<hg-page full=true><form name=insightsForm class=form novalidate><hg-remote-asset ng-if=$root.isSIP class="cms clearfix" hg-asset-id={{assetId}}></hg-remote-asset><hg-remote-asset ng-if=$root.isIIP class="cms cms-iip clearfix" hg-asset-id={{assetId}}></hg-remote-asset></form></hg-page>'),a.put("templates/cms/insightsHome.html",'<hg-page full=true><form name=insightsForm class=form novalidate><hg-remote-asset ng-if=$root.isSIP class="cms clearfix" hg-asset-id=P-7397376></hg-remote-asset><hg-remote-asset ng-if=$root.isIIP class="cms cms-iip clearfix" hg-asset-id=P-7730556></hg-remote-asset></form></hg-page>'),a.put("templates/cms/intelligentPortfolios.html","<div id=up-form-views ui-view></div>"),a.put("templates/cms/intelligentPortfoliosDetail.html",'<hg-page full=true><form name=intelligentForm class=form novalidate><hg-remote-asset ng-if=$root.isSIP class="cms clearfix" hg-asset-id={{assetId}}></hg-remote-asset><hg-remote-asset ng-if=$root.isIIP class="cms cms-iip clearfix" hg-asset-id={{assetId}}></hg-remote-asset></form></hg-page>'),a.put("templates/cms/intelligentPortfoliosHome.html",'<hg-page full=true><form name=intelligentForm class=form novalidate><hg-remote-asset ng-if=$root.isSIP class="cms clearfix" hg-asset-id=P-7398018></hg-remote-asset><hg-remote-asset ng-if=$root.isIIP class="cms cms-iip clearfix" hg-asset-id=P-7730570></hg-remote-asset></form></hg-page>'),a.put("templates/cms/journal.html","<div id=up-form-views ui-view></div>"),a.put("templates/cms/journalDetail.html",'<hg-page full=true><form name=journalForm class=form novalidate><hg-remote-asset ng-if=$root.isSIP class="cms clearfix" hg-asset-id={{assetId}}></hg-remote-asset><hg-remote-asset ng-if=$root.isIIP class="cms cms-iip clearfix" hg-asset-id={{assetId}}></hg-remote-asset></form></hg-page>'),a.put("templates/cms/journalHome.html",'<hg-page full=true><form name=journalForm class=form novalidate><hg-remote-asset ng-if=$root.isSIP class="cms clearfix" hg-asset-id=P-7503658></hg-remote-asset><hg-remote-asset ng-if=$root.isIIP class="cms cms-iip clearfix" hg-asset-id=P-7730563></hg-remote-asset></form></hg-page>'),a.put("templates/common/noNotMayFootnote.html",'<p class=FDIC-block>Brokerage Products: Not FDIC-Insured • No Bank Guarantee • May Lose Value</p><a href="" data-ng-click=onTapped()><h4 class=foot-note>View Disclosures & Agreements</h4></a>'),a.put("templates/common/noNotMayFootnoteDetailOverlay.html",'<div class="overlay-header dk-scheme navyfive text-center"><div class=selector-modal-title>Disclosures & Footnotes</div><span class=selector-modal-dismiss><a data-ng-click=cancel()><i class=icon-close-x></i></a></span></div><div class="overlay-content cms-footer container-padded"><div><hg-disclosure-text goaldetails=goalInfo></hg-disclosure-text></div><div hg-dynamic-html-compile dynamic-html-string=noNotMayData></div></div>'),a.put("templates/common/page-ios.html",'<div><div ng-if=solo><div ng-transclude></div></div><div ng-if=!solo ng-switch on=navigation.layout class=touch><div ng-switch-when=TUNNEL><div id=content><div ng-include="\'templates/app/header.html\'"></div><div id=content-mobile class="container-fluid content-mobile scrollable" ng-class="{ dark : navigation.theme === \'dark\', light : navigation.theme === \'light\', \'content-mobile-wizard\' : wizard}"><div ng-if=navigation.showUrgentNotification><hg-urgent-notification data-ng-if=$root.isSIP hg-asset-id=SIP-Global-Urgent-Notification hg-asset-id-for-ios=SIP-GLOBAL-URGENT-NOTIFICATION-IOS hg-auto-refresh="false"><hg-urgent-notification data-ng-if=$root.isIIP hg-asset-id=GLOBAL-URGENT-NOTIFICATION-AS hg-asset-id-for-ios=GLOBAL-URGENT-NOTIFICATION-IOS-AS hg-auto-refresh=false></hg-urgent-notification></div><div ng-include="\'templates/app/error.html\'"></div><hg-schwab-banner banner-text={{bannerText}}></hg-schwab-banner><div class=cms-header ng-if=navigation.showHeader><hg-remote-asset hg-asset-id={{navigation.header}}></hg-remote-asset></div><div class=page-content ng-transclude></div><div class="cms-footer-mobile container-padded" ng-if=navigation.showFooter ng-class="{ cmsFooterLight : navigation.theme === \'dark\'}"><div ng-if="$root.isIIP && (iippagedisclosure || iippagedisclosureasset)" style=margin-bottom:15px>{{iippagedisclosure}}<hg-remote-asset hg-asset-id={{iippagedisclosureasset}}></hg-remote-asset></div><div class=hidden-xs><div class=advisor-disclosure ng-if=$root.customizationInfo.getAdvisorSpecificDisclosure() ng-bind-html="$root.customizationInfo.getAdvisorSpecificDisclosure() | linky:\'_target\'"></div><hg-remote-asset hg-asset-id={{navigation.footer}}></hg-remote-asset></div><div class=visible-xs><hg-no-not-may-footnotes></div></div></div><hg-button-group fixed=isMobile ng-if=wizard><hg-button ng-if=!hideback ng-click=back() ng-disabled=backdisabled aria-label={{backlabel}}>{{backlabel}}</hg-button><hg-button-primary ng-if=!hidenext ng-click=next() ng-disabled=nextdisabled aria-label={{nextlabel}}>{{nextlabel}}</hg-button-primary></hg-button-group></div></div><div ng-switch-when=SIMPLE><div id=content><div ng-include="\'templates/app/header.html\'"></div><div id=content-mobile class="container-fluid content-mobile scrollable" ng-class="{ dark : navigation.theme === \'dark\', light : navigation.theme === \'light\', \'content-mobile-wizard\' : wizard}"><div ng-if=navigation.showUrgentNotification><hg-urgent-notification data-ng-if=$root.isSIP hg-asset-id=SIP-Global-Urgent-Notification hg-asset-id-for-ios=SIP-GLOBAL-URGENT-NOTIFICATION-IOS hg-auto-refresh="false"><hg-urgent-notification data-ng-if=$root.isIIP hg-asset-id=GLOBAL-URGENT-NOTIFICATION-AS hg-asset-id-for-ios=GLOBAL-URGENT-NOTIFICATION-IOS-AS hg-auto-refresh=false></hg-urgent-notification></div><div ng-include="\'templates/app/error.html\'"></div><hg-schwab-banner banner-text={{bannerText}}></hg-schwab-banner><div class=cms-header ng-if=navigation.showHeader><hg-remote-asset hg-asset-id={{navigation.header}}></hg-remote-asset></div><div data-autoscroll=true class="page-content {{animateStyle}}"><div class=container-fluid><div ng-if=!full class=row><div class="col-xs-12 col-sm-10 col-md-8 col-lg-6 col-sm-offset-1 col-md-offset-2 col-lg-offset-3 padding-top-12" ng-transclude></div></div><div ng-if=full class=row><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 padding-0" ng-transclude></div></div></div></div><div class="cms-footer-mobile container-padded" ng-if=navigation.showFooter ng-class="{ cmsFooterLight : navigation.theme === \'dark\'}"><div ng-if="$root.isIIP && (iippagedisclosure || iippagedisclosureasset)" style=margin-bottom:15px>{{iippagedisclosure}}<hg-remote-asset hg-asset-id={{iippagedisclosureasset}}></hg-remote-asset></div><div class=hidden-xs><div class=advisor-disclosure ng-if=$root.customizationInfo.getAdvisorSpecificDisclosure() ng-bind-html="$root.customizationInfo.getAdvisorSpecificDisclosure() | linky:\'_target\'"></div><hg-remote-asset hg-asset-id={{navigation.footer}}></hg-remote-asset></div><div class=visible-xs><hg-no-not-may-footnotes></div></div></div><hg-button-group fixed=isMobile ng-if=wizard><hg-button ng-if=!hideback ng-click=back() ng-disabled=backdisabled aria-label={{backlabel}}>{{backlabel}}</hg-button><hg-button-primary ng-click=next() ng-disabled=nextdisabled aria-label={{nextlabel}}>{{nextlabel}}</hg-button-primary></hg-button-group></div></div><div ng-switch-when=POPOVER><div id=content><div ng-include="\'templates/app/header.html\'"></div><div id=content-mobile class="container-fluid content-mobile scrollable" ng-class="{ dark : navigation.theme === \'dark\', light : navigation.theme === \'light\', \'content-mobile-wizard\' : wizard}"><div ng-if=navigation.showUrgentNotification><hg-urgent-notification data-ng-if=$root.isSIP hg-asset-id=SIP-Global-Urgent-Notification hg-asset-id-for-ios=SIP-GLOBAL-URGENT-NOTIFICATION-IOS hg-auto-refresh="false"><hg-urgent-notification data-ng-if=$root.isIIP hg-asset-id=GLOBAL-URGENT-NOTIFICATION-AS hg-asset-id-for-ios=GLOBAL-URGENT-NOTIFICATION-IOS-AS hg-auto-refresh=false></hg-urgent-notification></div><div ng-include="\'templates/app/error.html\'"></div><div class=cms-header ng-if=navigation.showHeader><hg-remote-asset hg-asset-id={{navigation.header}}></hg-remote-asset></div><div data-autoscroll=true class="page-content {{animateStyle}}"><div class=container-fluid><div ng-if=!full class=row><div class="col-xs-12 col-sm-10 col-md-8 col-lg-6 col-sm-offset-1 col-md-offset-2 col-lg-offset-3 padding-top-12" ng-transclude></div></div><div ng-if=full class=row><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 padding-0" ng-transclude></div></div></div></div><div class="cms-footer-mobile container-padded" ng-if=navigation.showFooter ng-class="{ cmsFooterLight : navigation.theme === \'dark\'}"><div class=hidden-xs><div class=advisor-disclosure ng-if=$root.customizationInfo.getAdvisorSpecificDisclosure() ng-bind-html="$root.customizationInfo.getAdvisorSpecificDisclosure() | linky:\'_target\'"></div><hg-remote-asset hg-asset-id={{navigation.footer}}></hg-remote-asset></div><div class=visible-xs><hg-no-not-may-footnotes></div></div></div><hg-button-group fixed=isMobile ng-if=wizard><hg-button ng-if=!hideback ng-click=back() ng-disabled=backdisabled aria-label={{backlabel}}>{{backlabel}}</hg-button><hg-button-primary ng-click=next() ng-disabled=nextdisabled aria-label={{nextlabel}}>{{nextlabel}}</hg-button-primary></hg-button-group></div></div></div></div>'),a.put("templates/common/page-web.html",'<div><div ng-if="navigation.stateId == \'menu\'" class=visible-menu><div ng-include="\'templates/app/menu.html\'" ng-controller=hgMenuCtrl></div></div><div ng-if="solo && navigation.stateId !== \'menu\'"><div ng-transclude></div></div><div ng-if="!solo && navigation.stateId !== \'menu\'" ng-switch on=navigation.layout><div ng-switch-when=TUNNEL><div ng-switch on=screenSize><div ng-switch-when=DESKTOP><div ng-include="\'templates/app/header.html\'"></div><div class=container-fluid><div class=row><div class="col-md-3 col-lg-3 menu-md dark"><div ng-include="\'templates/app/menu.html\'" ng-controller=hgMenuCtrl></div></div><div role=content class="col-md-9 col-lg-9" ng-class="{ dark : navigation.theme === \'dark\', light : navigation.theme === \'light\'}"><div ng-if=navigation.showUrgentNotification><hg-urgent-notification hg-asset-id=SIP-Global-Urgent-Notification hg-auto-refresh="false"></div><div ng-include="\'templates/app/error.html\'"></div><div class=page-content><div class=cms-header ng-if=navigation.header><hg-remote-asset hg-asset-id={{navigation.header}}></hg-remote-asset></div><div class=row><div ng-if=full class="col-xs-12 col-sm-12 col-md-12 col-lg-12 padding-0" ng-transclude></div><div ng-if=!full class="col-xs-12 col-sm-10 col-md-8 col-lg-6 col-sm-offset-1 col-md-offset-2 col-lg-offset-3" ng-transclude></div></div><div ng-if=wizard class=row><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 padding-0"><hg-button-group><hg-button ng-if=!hideback ng-click=back() ng-disabled=backdisabled aria-label={{backlabel}}>{{backlabel}}</hg-button><hg-button-primary ng-if=!hidenext ng-click=next() ng-disabled=nextdisabled aria-label={{nextlabel}}>{{nextlabel}}</hg-button-primary></hg-button-group></div></div></div><div class="cms-footer container-padded" ng-if=navigation.showFooter ng-class="{ cmsFooterLight : navigation.theme === \'dark\'}"><hg-remote-asset hg-asset-id={{navigation.footer}}></hg-remote-asset><div class=ng-scope><div class=h6><p><a data-ng-click=startCobrowse() data-ng-if="!isMobile && !session.isLoggedIn">Cobrowse</a></p></div></div></div></div></div></div></div><div ng-switch-when=MOBILE class=touch><div id=slide-menu class=slide-menu><div ng-include="\'templates/app/menu.html\'" ng-controller=hgMenuCtrl></div></div><div id=content class="menu-content dropshadow-left"><div ng-include="\'templates/app/header.html\'"></div><div id=content-mobile class="container-fluid content-mobile scrollable" ng-class="{ dark : navigation.theme === \'dark\', light : navigation.theme === \'light\', \'content-mobile-wizard\' : wizard}"><div ng-if=navigation.showUrgentNotification><hg-urgent-notification data-ng-if=$root.isSIP hg-asset-id=SIP-Global-Urgent-Notification hg-asset-id-for-ios=SIP-GLOBAL-URGENT-NOTIFICATION-IOS hg-auto-refresh="false"><hg-urgent-notification data-ng-if=$root.isIIP hg-asset-id=GLOBAL-URGENT-NOTIFICATION-AS hg-asset-id-for-ios=GLOBAL-URGENT-NOTIFICATION-IOS-AS hg-auto-refresh=false></hg-urgent-notification></div><div ng-include="\'templates/app/error.html\'"></div><div class=cms-header ng-if=navigation.showHeader><hg-remote-asset hg-asset-id={{navigation.header}}></hg-remote-asset></div><div class=page-content ng-transclude></div><div class="cms-footer-mobile container-padded" ng-if=navigation.showFooter ng-class="{ cmsFooterLight : navigation.theme === \'dark\'}"><div class=hidden-xs><hg-remote-asset hg-asset-id={{navigation.footer}}></hg-remote-asset></div><div class=visible-xs><hg-no-not-may-footnotes></div></div></div><hg-button-group fixed=isMobile ng-if=wizard><hg-button ng-if=!hideback ng-click=back() ng-disabled=backdisabled aria-label={{backlabel}}>{{backlabel}}</hg-button><hg-button-primary ng-click=next() ng-disabled=nextdisabled aria-label={{nextlabel}}>{{nextlabel}}</hg-button-primary></hg-button-group></div></div></div></div><div ng-switch-when=SIMPLE><div ng-switch on=screenSize><div ng-switch-when=DESKTOP><div ng-include="\'templates/app/header.html\'"></div><div ng-include="\'templates/app/error.html\'"></div><div id=content-mobile><div ng-if=navigation.showUrgentNotification><hg-urgent-notification data-ng-if=$root.isSIP hg-asset-id=SIP-Global-Urgent-Notification hg-asset-id-for-ios=SIP-GLOBAL-URGENT-NOTIFICATION-IOS hg-auto-refresh="false"><hg-urgent-notification data-ng-if=$root.isIIP hg-asset-id=GLOBAL-URGENT-NOTIFICATION-AS hg-asset-id-for-ios=GLOBAL-URGENT-NOTIFICATION-IOS-AS hg-auto-refresh=false></hg-urgent-notification></div><div class=cms-header ng-if=navigation.showHeader><hg-remote-asset hg-asset-id={{navigation.header}}></hg-remote-asset></div><div data-autoscroll=true class="page-content {{animateStyle}}"><div class=container-fluid><div ng-if=!full class=row><div class="col-xs-12 col-sm-10 col-md-8 col-lg-6 col-sm-offset-1 col-md-offset-2 col-lg-offset-3" ng-transclude></div></div><div ng-if=full class=row><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 padding-0" ng-transclude></div></div></div></div><hg-button-group fixed=isMobile ng-if=wizard><hg-button ng-if=!hideback ng-click=back() ng-disabled=backdisabled aria-label={{backlabel}}>{{backlabel}}</hg-button><hg-button-primary ng-click=next() ng-disabled=nextdisabled aria-label={{nextlabel}}>{{nextlabel}}</hg-button-primary></hg-button-group><div class="cms-footer container-padded" ng-if=navigation.showFooter ng-class="{ cmsFooterLight : navigation.theme === \'dark\'}"><hg-remote-asset hg-asset-id={{navigation.footer}}></hg-remote-asset><div class=ng-scope><div class=h6><p><a data-ng-click=startCobrowse() data-ng-if="!isMobile && !session.isLoggedIn">Cobrowse</a></p></div></div></div></div></div><div ng-switch-when=MOBILE><div id=content><div ng-include="\'templates/app/header.html\'"></div><div id=content-mobile class="container-fluid content-mobile scrollable" ng-class="{ dark : navigation.theme === \'dark\', light : navigation.theme === \'light\', \'content-mobile-wizard\' : wizard}"><div ng-if=navigation.showUrgentNotification><hg-urgent-notification data-ng-if=$root.isSIP hg-asset-id=SIP-Global-Urgent-Notification hg-asset-id-for-ios=SIP-GLOBAL-URGENT-NOTIFICATION-IOS hg-auto-refresh="false"><hg-urgent-notification data-ng-if=$root.isIIP hg-asset-id=GLOBAL-URGENT-NOTIFICATION-AS hg-asset-id-for-ios=GLOBAL-URGENT-NOTIFICATION-IOS-AS hg-auto-refresh=false></hg-urgent-notification></div><div ng-include="\'templates/app/error.html\'"></div><div class=cms-header ng-if=navigation.showHeader><hg-remote-asset hg-asset-id={{navigation.header}}></hg-remote-asset></div><div data-autoscroll=true class="page-content {{animateStyle}}"><div class=container-fluid><div ng-if=!full class=row><div class="col-xs-12 col-sm-10 col-md-8 col-lg-6 col-sm-offset-1 col-md-offset-2 col-lg-offset-3 padding-top-12" ng-transclude></div></div><div ng-if=full class=row><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 padding-0" ng-transclude></div></div></div></div><div class="cms-footer-mobile container-padded" ng-if=navigation.showFooter ng-class="{ cmsFooterLight : navigation.theme === \'dark\'}"><div class=hidden-xs><hg-remote-asset hg-asset-id={{navigation.footer}}></hg-remote-asset></div><div class=visible-xs><hg-no-not-may-footnotes></div></div></div><hg-button-group fixed=isMobile ng-if=wizard><hg-button ng-if=!hideback ng-click=back() ng-disabled=backdisabled aria-label={{backlabel}}>{{backlabel}}</hg-button><hg-button-primary ng-click=next() ng-disabled=nextdisabled aria-label={{nextlabel}}>{{nextlabel}}</hg-button-primary></hg-button-group></div></div></div></div><div ng-switch-when=POPOVER><div ng-switch on=screenSize><div ng-switch-when=DESKTOP><div ng-include="\'templates/app/header.html\'"></div><div ng-include="\'templates/app/error.html\'"></div><div id=content-mobile><div ng-if=navigation.showUrgentNotification><hg-urgent-notification data-ng-if=$root.isSIP hg-asset-id=SIP-Global-Urgent-Notification hg-asset-id-for-ios=SIP-GLOBAL-URGENT-NOTIFICATION-IOS hg-auto-refresh="false"><hg-urgent-notification data-ng-if=$root.isIIP hg-asset-id=GLOBAL-URGENT-NOTIFICATION-AS hg-asset-id-for-ios=GLOBAL-URGENT-NOTIFICATION-IOS-AS hg-auto-refresh=false></hg-urgent-notification></div><div data-autoscroll=true class="page-content {{animateStyle}}"><div class=row><div class="col-sm-8 col-sm-offset-2" ng-transclude></div></div></div></div></div><div ng-switch-when=MOBILE><div id=content><div ng-include="\'templates/app/header.html\'"></div><div id=content-mobile class="container-fluid content-mobile scrollable" ng-class="{ dark : navigation.theme === \'dark\', light : navigation.theme === \'light\', \'content-mobile-wizard\' : wizard}"><div ng-if=navigation.showUrgentNotification><hg-urgent-notification data-ng-if=$root.isSIP hg-asset-id=SIP-Global-Urgent-Notification hg-asset-id-for-ios=SIP-GLOBAL-URGENT-NOTIFICATION-IOS hg-auto-refresh="false"><hg-urgent-notification data-ng-if=$root.isIIP hg-asset-id=GLOBAL-URGENT-NOTIFICATION-AS hg-asset-id-for-ios=GLOBAL-URGENT-NOTIFICATION-IOS-AS hg-auto-refresh=false></hg-urgent-notification></div><div ng-include="\'templates/app/error.html\'"></div><div class=cms-header ng-if=navigation.showHeader><hg-remote-asset hg-asset-id={{navigation.header}}></hg-remote-asset></div><div data-autoscroll=true class="page-content {{animateStyle}}"><div class=container-fluid><div ng-if=!full class=row><div class="col-xs-12 col-sm-10 col-md-8 col-lg-6 col-sm-offset-1 col-md-offset-2 col-lg-offset-3 padding-top-12" ng-transclude></div></div><div ng-if=full class=row><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 padding-0" ng-transclude></div></div></div></div><div class="cms-footer-mobile container-padded" ng-if=navigation.showFooter ng-class="{ cmsFooterLight : navigation.theme === \'dark\'}"><div class=hidden-xs><hg-remote-asset hg-asset-id={{navigation.footer}}></hg-remote-asset></div><div class=visible-xs><hg-no-not-may-footnotes></div></div></div><hg-button-group fixed=isMobile ng-if=wizard><hg-button ng-if=!hideback ng-click=back() ng-disabled=backdisabled aria-label={{backlabel}}>{{backlabel}}</hg-button><hg-button-primary ng-click=next() ng-disabled=nextdisabled aria-label={{nextlabel}}>{{nextlabel}}</hg-button-primary></hg-button-group></div></div></div></div></div></div>'),
a.put("templates/common/page.html",'<div><div ng-if="navigation.stateId == \'menu\'" class=visible-menu><div ng-include="\'templates/app/menu.html\'" ng-controller=hgMenuCtrl></div></div><div ng-if="solo && navigation.stateId !== \'menu\'"><div ng-transclude></div><div class="cms-footer container-padded" style="padding: 30px 30px 0 30px" ng-if="$root.isIIP && navigation.showFooter && (iippagedisclosure || iippagedisclosureasset)" ng-class="{ cmsFooterLight : navigation.theme === \'dark\'}">{{iippagedisclosure}}<hg-remote-asset hg-asset-id={{iippagedisclosureasset}}></hg-remote-asset></div></div><div ng-if="!solo && navigation.stateId !== \'menu\'" ng-switch on=navigation.layout><div ng-switch-when=TUNNEL><div ng-switch on=screenSize><div ng-switch-when=DESKTOP><div ng-include="\'templates/app/header.html\'"></div><div class=container-fluid><div class=row><div class="col-md-3 col-lg-3 menu-md dark"><div ng-include="\'templates/app/menu.html\'" ng-controller=hgMenuCtrl></div></div><div role=content class="col-md-9 col-lg-9" ng-class="{ dark : navigation.theme === \'dark\', light : navigation.theme === \'light\'}"><div ng-if=navigation.showUrgentNotification><hg-urgent-notification data-ng-if=$root.isSIP hg-asset-id=SIP-Global-Urgent-Notification hg-auto-refresh=false></hg-urgent-notification><hg-urgent-notification data-ng-if=$root.isIIP hg-asset-id=GLOBAL-URGENT-NOTIFICATION-AS hg-auto-refresh=false></hg-urgent-notification></div><div ng-include="\'templates/app/error.html\'"></div><div class=page-content><hg-schwab-banner banner-text={{bannerText}}></hg-schwab-banner><div class=cms-header ng-if=navigation.header><hg-remote-asset hg-asset-id={{navigation.header}}></hg-remote-asset></div><div class=row><div ng-if=full class="col-xs-12 col-sm-12 col-md-12 col-lg-12 padding-0" ng-transclude></div><div ng-if=!full class="col-xs-12 col-sm-10 col-md-8 col-lg-6 col-sm-offset-1 col-md-offset-2 col-lg-offset-3" ng-transclude></div></div><div ng-if=wizard class=row><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 padding-0"><hg-button-group><hg-button ng-if=!hideback ng-click=back() ng-disabled=backdisabled aria-label={{backlabel}}>{{backlabel}}</hg-button><hg-button-primary ng-if=!hidenext ng-click=next() ng-disabled=nextdisabled aria-label={{nextlabel}}>{{nextlabel}}</hg-button-primary></hg-button-group></div></div></div><div class="cms-footer container-padded" ng-if=navigation.showFooter ng-class="{ cmsFooterLight : navigation.theme === \'dark\'}"><div ng-if="$root.isIIP && (iippagedisclosure || iippagedisclosureasset)" style=margin-bottom:15px>{{iippagedisclosure}}<hg-remote-asset hg-asset-id={{iippagedisclosureasset}}></hg-remote-asset></div><div class=advisor-disclosure ng-if=$root.customizationInfo.getAdvisorSpecificDisclosure() ng-bind-html="$root.customizationInfo.getAdvisorSpecificDisclosure() | linky:\'_target\'"></div><hg-remote-asset hg-asset-id={{navigation.footer}}></hg-remote-asset><div class=ng-scope><div class=h6><p><a data-ng-click=startCobrowse() data-ng-if=!isMobile>Cobrowse</a></p></div></div></div></div></div></div></div><div ng-switch-when=MOBILE class=touch><div id=slide-menu class=slide-menu><div ng-include="\'templates/app/menu.html\'" ng-controller=hgMenuCtrl></div></div><div id=content class="menu-content dropshadow-left"><div ng-include="\'templates/app/header.html\'"></div><div id=content-mobile class="container-fluid content-mobile scrollable" ng-class="{ dark : navigation.theme === \'dark\', light : navigation.theme === \'light\', \'content-mobile-wizard\' : wizard}"><div ng-if=navigation.showUrgentNotification><hg-urgent-notification data-ng-if=$root.isSIP hg-asset-id=SIP-Global-Urgent-Notification hg-asset-id-for-ios=SIP-GLOBAL-URGENT-NOTIFICATION-IOS hg-auto-refresh=false></hg-urgent-notification><hg-urgent-notification data-ng-if=$root.isIIP hg-asset-id=GLOBAL-URGENT-NOTIFICATION-AS hg-asset-id-for-ios=GLOBAL-URGENT-NOTIFICATION-IOS-AS hg-auto-refresh=false></hg-urgent-notification></div><div ng-include="\'templates/app/error.html\'"></div><hg-schwab-banner banner-text={{bannerText}}></hg-schwab-banner><div class=cms-header ng-if=navigation.showHeader><hg-remote-asset hg-asset-id={{navigation.header}}></hg-remote-asset></div><div class=page-content ng-transclude></div><div class="cms-footer-mobile container-padded" ng-if=navigation.showFooter ng-class="{ cmsFooterLight : navigation.theme === \'dark\'}"><div ng-if="$root.isIIP && (iippagedisclosure || iippagedisclosureasset)" style=margin-bottom:15px>{{iippagedisclosure}}<hg-remote-asset hg-asset-id={{iippagedisclosureasset}}></hg-remote-asset></div><div class=hidden-xs><div class=advisor-disclosure ng-if=$root.customizationInfo.getAdvisorSpecificDisclosure() ng-bind-html="$root.customizationInfo.getAdvisorSpecificDisclosure() | linky:\'_target\'"></div><hg-remote-asset hg-asset-id={{navigation.footer}}></hg-remote-asset></div><div class=visible-xs><hg-no-not-may-footnotes></div></div></div><hg-button-group fixed=isMobile ng-if=wizard><hg-button ng-if=!hideback ng-click=back() ng-disabled=backdisabled aria-label={{backlabel}}>{{backlabel}}</hg-button><hg-button-primary ng-click=next() ng-disabled=nextdisabled aria-label={{nextlabel}}>{{nextlabel}}</hg-button-primary></hg-button-group></div></div></div></div><div ng-switch-when=SIMPLE><div ng-switch on=screenSize><div ng-switch-when=DESKTOP><div ng-include="\'templates/app/header.html\'"></div><div ng-include="\'templates/app/error.html\'"></div><div id=content-mobile><hg-schwab-banner banner-text={{bannerText}}></hg-schwab-banner><div ng-if=navigation.showUrgentNotification><hg-urgent-notification data-ng-if=$root.isSIP hg-asset-id=SIP-Global-Urgent-Notification hg-asset-id-for-ios=SIP-GLOBAL-URGENT-NOTIFICATION-IOS hg-auto-refresh=false></hg-urgent-notification><hg-urgent-notification data-ng-if=$root.isIIP hg-asset-id=GLOBAL-URGENT-NOTIFICATION-AS hg-asset-id-for-ios=GLOBAL-URGENT-NOTIFICATION-IOS-AS hg-auto-refresh=false></hg-urgent-notification></div><div class=cms-header ng-if=navigation.showHeader><hg-remote-asset hg-asset-id={{navigation.header}}></hg-remote-asset></div><div data-autoscroll=true class="page-content {{animateStyle}}"><div class=container-fluid><div ng-if=!full class=row><div class="col-xs-12 col-sm-10 col-md-8 col-lg-6 col-sm-offset-1 col-md-offset-2 col-lg-offset-3" ng-transclude></div></div><div ng-if=full class=row><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 padding-0" ng-transclude></div></div></div></div><hg-button-group fixed=isMobile ng-if=wizard><hg-button ng-if=!hideback ng-click=back() ng-disabled=backdisabled aria-label={{backlabel}}>{{backlabel}}</hg-button><hg-button-primary ng-click=next() ng-disabled=nextdisabled aria-label={{nextlabel}}>{{nextlabel}}</hg-button-primary></hg-button-group><div class="cms-footer container-padded" ng-if=navigation.showFooter ng-class="{ cmsFooterLight : navigation.theme === \'dark\'}"><div ng-if="$root.isIIP && (iippagedisclosure || iippagedisclosureasset)" style=margin-bottom:15px>{{iippagedisclosure}}<hg-remote-asset hg-asset-id={{iippagedisclosureasset}}></hg-remote-asset></div><div class=advisor-disclosure ng-if=$root.customizationInfo.getAdvisorSpecificDisclosure() ng-bind-html="$root.customizationInfo.getAdvisorSpecificDisclosure() | linky:\'_target\'"></div><hg-remote-asset hg-asset-id={{navigation.footer}}></hg-remote-asset><div class=ng-scope><div class=h6><p><a data-ng-click=startCobrowse() data-ng-if=!isMobile>Cobrowse</a></p></div></div></div></div></div><div ng-switch-when=MOBILE><div id=content><div ng-include="\'templates/app/header.html\'"></div><div id=content-mobile class="container-fluid content-mobile scrollable" ng-class="{ dark : navigation.theme === \'dark\', light : navigation.theme === \'light\', \'content-mobile-wizard\' : wizard}"><div ng-if=navigation.showUrgentNotification><hg-urgent-notification data-ng-if=$root.isSIP hg-asset-id=SIP-Global-Urgent-Notification hg-asset-id-for-ios=SIP-GLOBAL-URGENT-NOTIFICATION-IOS hg-auto-refresh=false></hg-urgent-notification><hg-urgent-notification data-ng-if=$root.isIIP hg-asset-id=GLOBAL-URGENT-NOTIFICATION-AS hg-asset-id-for-ios=GLOBAL-URGENT-NOTIFICATION-IOS-AS hg-auto-refresh=false></hg-urgent-notification></div><div ng-include="\'templates/app/error.html\'"></div><hg-schwab-banner banner-text={{bannerText}}></hg-schwab-banner><div class=cms-header ng-if=navigation.showHeader><hg-remote-asset hg-asset-id={{navigation.header}}></hg-remote-asset></div><div data-autoscroll=true class="page-content {{animateStyle}}"><div class=container-fluid><div ng-if=!full class=row><div class="col-xs-12 col-sm-10 col-md-8 col-lg-6 col-sm-offset-1 col-md-offset-2 col-lg-offset-3 padding-top-12" ng-transclude></div></div><div ng-if=full class=row><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 padding-0" ng-transclude></div></div></div></div><div class="cms-footer-mobile container-padded" ng-if=navigation.showFooter ng-class="{ cmsFooterLight : navigation.theme === \'dark\'}"><div ng-if="$root.isIIP && (iippagedisclosure || iippagedisclosureasset)" style=margin-bottom:15px>{{iippagedisclosure}}<hg-remote-asset hg-asset-id={{iippagedisclosureasset}}></hg-remote-asset></div><div class=hidden-xs><div class=advisor-disclosure ng-if=$root.customizationInfo.getAdvisorSpecificDisclosure() ng-bind-html="$root.customizationInfo.getAdvisorSpecificDisclosure() | linky:\'_target\'"></div><hg-remote-asset hg-asset-id={{navigation.footer}}></hg-remote-asset></div><div class=visible-xs><hg-no-not-may-footnotes></div></div></div><hg-button-group fixed=isMobile ng-if=wizard><hg-button ng-if=!hideback ng-click=back() ng-disabled=backdisabled aria-label={{backlabel}}>{{backlabel}}</hg-button><hg-button-primary ng-click=next() ng-disabled=nextdisabled aria-label={{nextlabel}}>{{nextlabel}}</hg-button-primary></hg-button-group></div></div></div></div><div ng-switch-when=POPOVER><div ng-switch on=screenSize><div ng-switch-when=DESKTOP><div ng-include="\'templates/app/header.html\'"></div><div ng-include="\'templates/app/error.html\'"></div><div id=content-mobile><div ng-if=navigation.showUrgentNotification><hg-urgent-notification data-ng-if=$root.isSIP hg-asset-id=SIP-Global-Urgent-Notification hg-asset-id-for-ios=SIP-GLOBAL-URGENT-NOTIFICATION-IOS hg-auto-refresh=false></hg-urgent-notification><hg-urgent-notification data-ng-if=$root.isIIP hg-asset-id=GLOBAL-URGENT-NOTIFICATION-AS hg-asset-id-for-ios=GLOBAL-URGENT-NOTIFICATION-IOS-AS hg-auto-refresh=false></hg-urgent-notification></div><div data-autoscroll=true class="page-content {{animateStyle}}"><div class=row><div class="col-sm-8 col-sm-offset-2" ng-transclude></div></div></div></div></div><div ng-switch-when=MOBILE><div id=content><div ng-include="\'templates/app/header.html\'"></div><div id=content-mobile class="container-fluid content-mobile scrollable" ng-class="{ dark : navigation.theme === \'dark\', light : navigation.theme === \'light\', \'content-mobile-wizard\' : wizard}"><div ng-if=navigation.showUrgentNotification><hg-urgent-notification data-ng-if=$root.isSIP hg-asset-id=SIP-Global-Urgent-Notification hg-asset-id-for-ios=SIP-GLOBAL-URGENT-NOTIFICATION-IOS hg-auto-refresh=false></hg-urgent-notification><hg-urgent-notification data-ng-if=$root.isIIP hg-asset-id=GLOBAL-URGENT-NOTIFICATION-AS hg-asset-id-for-ios=GLOBAL-URGENT-NOTIFICATION-IOS-AS hg-auto-refresh=false></hg-urgent-notification></div><div ng-include="\'templates/app/error.html\'"></div><div class=cms-header ng-if=navigation.showHeader><hg-remote-asset hg-asset-id={{navigation.header}}></hg-remote-asset></div><div data-autoscroll=true class="page-content {{animateStyle}}"><div class=container-fluid><div ng-if=!full class=row><div class="col-xs-12 col-sm-10 col-md-8 col-lg-6 col-sm-offset-1 col-md-offset-2 col-lg-offset-3 padding-top-12" ng-transclude></div></div><div ng-if=full class=row><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 padding-0" ng-transclude></div></div></div></div><div class="cms-footer-mobile container-padded" ng-if=navigation.showFooter ng-class="{ cmsFooterLight : navigation.theme === \'dark\'}"><div class=hidden-xs><div class=advisor-disclosure ng-if=$root.customizationInfo.getAdvisorSpecificDisclosure() ng-bind-html="$root.customizationInfo.getAdvisorSpecificDisclosure() | linky:\'_target\'"></div><hg-remote-asset hg-asset-id={{navigation.footer}}></hg-remote-asset></div><div class=visible-xs><hg-no-not-may-footnotes></div></div></div><hg-button-group fixed=isMobile ng-if=wizard><hg-button ng-if=!hideback ng-click=back() ng-disabled=backdisabled aria-label={{backlabel}}>{{backlabel}}</hg-button><hg-button-primary ng-click=next() ng-disabled=nextdisabled aria-label={{nextlabel}}>{{nextlabel}}</hg-button-primary></hg-button-group></div></div></div></div></div></div>'),a.put("templates/enrollment/accountType.html",'<div id=progressWrapper class=thin><div class="progress nine complete" title="Step 1 of 9"><span class=sr-only>Step 1 of 9</span></div><div class="progress nine complete" title="Step 2 of 9"><span class=sr-only>Step 2 of 9</span></div><div class="progress nine complete" title="Step 3 of 9"><span class=sr-only>Step 3 of 9</span></div><div class="progress nine complete" title="Step 4 of 9"><span class=sr-only>Step 4 of 9</span></div><div class="progress nine complete" title="Step 5 of 9"><span class=sr-only>Step 5 of 9</span></div><div class="progress nine complete" title="Step 6 of 9"><span class=sr-only>Step 6 of 9</span></div><div class="progress nine complete" title="Step 7 of 9"><span class=sr-only>Step 7 of 9</span></div><div class="progress nine current" title="Step 8 of 9"><span class=sr-only>Step 8 of 9</span></div><div class="progress nine" title="Step 9 of 9"><span class=sr-only>Step 9 of 9</span></div></div><form name=userForm class=form novalidate><hg-wizard-page back=previous() backlabel=Back next=submitAccountType() nextlabel=Next mobile=$root.isMobile nextdisabled=(userForm.$invalid) bannertext={{accountOpenBannerText}}><hg-page-title>Which account type would you like to open?</hg-page-title><p>Choose One:</p><div ng-init=profileModel() class=hg-account-type><section><h2>Brokerage</h2><div class=panel-group id=brokerageAccordion><div class="panel panel-default"><div class=panel-heading><div class=panel-title><input tabindex=0 type=radio name=account-type value=Individual id=individual name=check ng-model=accountInterface.accountType required><label for=individual class=radio>Individual</label><a data-toggle=collapse href=#brokerageIndividual class="accordion-toggle-container collapsed" tabindex=0>toggle details of Individual Brokerage account type<i class=icon-accordion-toggle></i></a></div></div><div id=brokerageIndividual class="panel-collapse collapse"><div class=panel-body><p><hg-remote-asset tabindex=0 hg-asset-id="SIP-ENROLLMENT-S1-INDIVIDUAL-DESCRIPTION"></p></div></div></div><div class="panel panel-default"><div class=panel-heading><div class=panel-title><input tabindex=0 type=radio name=account-type value=JointTenants id=joint name=check ng-model="accountInterface.accountType"><label for=joint class=radio>Joint Tenant with Rights of Survivorship</label><a data-toggle=collapse href=#brokerageJoint class="accordion-toggle-container collapsed" tabindex=0>toggle details of Joint Tenant with Rights of Survivorship type<i class=icon-accordion-toggle></i></a></div></div><div id=brokerageJoint class="panel-collapse collapse"><div class=panel-body><p><hg-remote-asset tabindex=0 hg-asset-id="SIP-ENROLLMENT-S1-JOINT-TENANT-DESCRIPTION"></p></div></div></div><div class="panel panel-default"><div class=panel-heading><div class=panel-title><input type=radio name=account-type value=CommonTenants id=tenants-common name=check ng-model="accountInterface.accountType"><label for=tenants-common class=radio tabindex=0>Tenants in Common</label><a data-toggle=collapse href=#brokerageTenants class="accordion-toggle-container collapsed" tabindex=0>toggle details of Tenants in Common Brokerage account type<i class=icon-accordion-toggle></i></a></div></div><div id=brokerageTenants class="panel-collapse collapse"><div class=panel-body><p><hg-remote-asset tabindex=0 hg-asset-id="SIP-ENROLLMENT-S1-TENANTS-IN-COMMON-DESCRIPTION"></p></div></div></div><div class="panel panel-default"><div class=panel-heading><div class=panel-title><input type=radio name=account-type value=CommunityProperty id=community-property name=check ng-model="accountInterface.accountType"><label for=community-property class=radio tabindex=0>Community Property</label><a data-toggle=collapse href=#brokerageCommunity class="collapsed accordion-toggle-container" tabindex=0>toggle details of Community Property Brokerage account type<i class=icon-accordion-toggle></i></a></div></div><div id=brokerageCommunity class="panel-collapse collapse"><div class=panel-body><p><hg-remote-asset tabindex=0 hg-asset-id="SIP-ENROLLMENT-S1-COMMUNITY-PROPERTY-DESCRIPTION"></p></div></div></div><div class="panel panel-default"><div class=panel-heading><div class=panel-title><input type=radio name=account-type value=Custodial id=CustodialAccount name=check ng-model="accountInterface.accountType"><label for=CustodialAccount class=radio tabindex=0>Custodial</label><a data-toggle=collapse href=#Custodial class="collapsed accordion-toggle-container" tabindex=0>toggle details of Custodial account type<i class=icon-accordion-toggle></i></a></div></div><div id=Custodial class="panel-collapse collapse"><div class=panel-body><p ng-if=$root.isSIP><hg-remote-asset tabindex=0 hg-asset-id="SIP-ENROLLMENT-S1-CUSTODIAL-DESCRIPTION"></p><p ng-if=$root.isIIP><hg-remote-asset tabindex=0 hg-asset-id="ENROLLMENT-S1-CUSTODIAL-DESCRIPTION-AS"></p></div></div></div></div></section><section><h2>Revocable Living Trust</h2><h3>Images of your trust documents must be uploaded during the application process.</h3><div class=panel-group id=trustAccordion><div class="panel panel-default"><div class=panel-heading><div class=panel-title><input tabindex=0 type=radio name=account-type value="Single Trustee" id=single-trustee name=check ng-model="accountInterface.accountType"><label for=single-trustee class=radio>Single Trustee</label><a data-toggle=collapse href=#trustSingle class="collapsed accordion-toggle-container" tabindex=0>toggle details of Single Trustee Living Trust account type<i class=icon-accordion-toggle></i></a></div></div><div id=trustSingle class="panel-collapse collapse"><div class=panel-body><p><hg-remote-asset tabindex=0 hg-asset-id="SIP-ENROLLMENT-LIVING-TRUST-DESCRIPTION"></p></div></div></div><div class="panel panel-default"><div class=panel-heading><div class=panel-title><input tabindex=0 type=radio name=account-type value="Two Trustee" id=two-trustee name=check ng-model="accountInterface.accountType"><label for=two-trustee class=radio>Two Trustees</label><a data-toggle=collapse href=#trustTwo class="collapsed accordion-toggle-container" tabindex=0>toggle details of Two Trustees Living Trust account type<i class=icon-accordion-toggle></i></a></div></div><div id=trustTwo class="panel-collapse collapse"><div class=panel-body><p><hg-remote-asset tabindex=0 hg-asset-id="SIP-ENROLLMENT-LIVING-TRUST-DESCRIPTION"></p></div></div></div></div></section><section><h2>Retirement</h2><div class=panel-group id=retirementAccordion><div class="panel panel-default"><div class=panel-heading><div class=panel-title><input tabindex=0 type=radio name=account-type value=Roth id=rothira name=check ng-model="accountInterface.accountType"><label for=rothira class=radio>Roth IRA</label><a data-toggle=collapse href=#retirementRoth class="collapsed accordion-toggle-container" tabindex=0>toggle details of Roth IRA account type<i class=icon-accordion-toggle></i></a></div></div><div id=retirementRoth class="panel-collapse collapse"><div class=panel-body><p ng-if=$root.isSIP><hg-remote-asset tabindex=0 hg-asset-id="SIP-ENROLLMENT-ROTH-IRA-DESCRIPTION"></p><p ng-if=$root.isIIP><hg-remote-asset tabindex=0 hg-asset-id="ENROLLMENT-ROTH-IRA-DESCRIPTION-AS"></p></div></div></div><div class="panel panel-default"><div class=panel-heading><div class=panel-title><input tabindex=0 type=radio name=account-type value=Tradition id=trira name=check ng-model="accountInterface.accountType"><label for=trira class=radio>Traditional IRA</label><a data-toggle=collapse href=#retirementTraditional class="collapsed accordion-toggle-container" tabindex=0>toggle details of Traditional IRA account type<i class=icon-accordion-toggle></i></a></div></div><div id=retirementTraditional class="panel-collapse collapse"><div class=panel-body><p ng-if=$root.isSIP><hg-remote-asset tabindex=0 hg-asset-id="SIP-ENROLLMENT-TRADITIONAL-IRA-DESCRIPTION"></p><p ng-if=$root.isIIP><hg-remote-asset tabindex=0 hg-asset-id="ENROLLMENT-TRADITIONAL-IRA-DESCRIPTION-AS"></p></div></div></div><div class="panel panel-default"><div class=panel-heading><div class=panel-title><input tabindex=0 type=radio name=account-type value=Rollover id=roira name=check ng-model="accountInterface.accountType"><label for=roira class=radio>Rollover IRA</label><a data-toggle=collapse href=#retirementRollover class="collapsed accordion-toggle-container" tabindex=0>toggle details of Rollover IRA account type<i class=icon-accordion-toggle></i></a></div></div><div id=retirementRollover class="panel-collapse collapse"><div class=panel-body><p><hg-remote-asset tabindex=0 hg-asset-id="SIP-ENROLLMENT-ROLLOVER-IRA-DESCRIPTION"></p></div></div></div></div></section></div></hg-wizard-page></form>'),a.put("templates/enrollment/addtOfferings.html",'<div id=progressWrapper class=thin><div class="progress nine complete" title="Step 1 of 9"><span class=sr-only>Step 1 of 9</span></div><div class="progress nine complete" title="Step 2 of 9"><span class=sr-only>Step 2 of 9</span></div><div class="progress nine complete" title="Step 3 of 9"><span class=sr-only>Step 3 of 9</span></div><div class="progress nine complete" title="Step 4 of 9"><span class=sr-only>Step 4 of 9</span></div><div class="progress nine complete" title="Step 5 of 9"><span class=sr-only>Step 5 of 9</span></div><div class="progress nine complete" title="Step 6 of 9"><span class=sr-only>Step 6 of 9</span></div><div class="progress nine complete" title="Step 7 of 9"><span class=sr-only>Step 7 of 9</span></div><div class="progress nine complete" title="Step 8 of 9"><span class=sr-only>Step 8 of 9</span></div><div class="progress nine current" title="Step 9 of 9"><span class=sr-only>Step 9 of 9</span></div></div><form name=userForm class="form container-padded" novalidate><hg-wizard-page back=previous() backlabel=Back next=submitaddtOfferings() nextlabel=Next nextdisabled=userForm.$invalid iippagedisclosureasset=PORTFOLIO-FEATURES-AS mobile=$root.isMobile><hg-page-title>Based on the information we\'ve received, you are eligible to enroll in the following portfolio features.</hg-page-title><div ng-init=offerCheck()><table class=hg-accountType><tbody><tr ng-show="offerFlagTax==true"><td><div class=pull-left><div class=checkbox_icon><div class=enroll>Enroll</div><div class=checkbox-with-label><input type=checkbox value="Tax Loss Harvesting" id=tax name=tax ng-model=accountInterface.taxOffer ng-click="taxHarvestingEnable()"><label for=tax class=checkbox></label></div><div class="textRadio pull-left">Tax Loss Harvesting</div></div></div><div class="pull-right rightCol"><a ng-show="(accountInterface.taxOffer==false || accountInterface.taxOffer==undefined|| accountInterface.taxOffer==\'\')&& (!show || show==\'\'|| show==undefined)" ng-click="show=!show; link=!link"><i class="fa fa-plus"></i></a> <a ng-show="show || accountInterface.taxOffer==true" ng-click="show=!show;link=!link"><i class="fa fa-minus"></i></a></div><div ng-show="show || accountInterface.taxOffer==true" class="clear account-type-content"><div ng-if=$root.isSIP><hg-remote-asset hg-asset-id="SIP-ACCTSETTINGS-TAXLOSSHARVESTING-INSTR-RETAIL"></div><div ng-if=$root.isIIP><hg-remote-asset hg-asset-id="ACCTSETTINGS-TAXLOSSHARVESTING-INSTR-AS"></div></div></td></tr><tr ng-show="offerFlagIncome==true"><td><div class=pull-left><div class=checkbox_icon><div class=enroll>Enroll</div><div class=checkbox-with-label><input type=checkbox value="Income profile" id=income-profile name=incomeprofile ng-model=accountInterface.incomeOffer ng-click=incomeProfileCheckBox() ng-disabled="incomeOfferDisabled"><label for=income-profile class=checkbox></label></div><div class="textRadio pull-left">Income profile</div></div></div><div class="pull-right rightCol"><a ng-hide=link1 ng-click="show1=!show1; link1=!link1"><i class="fa fa-plus"></i></a> <a ng-show=show1 ng-click="show1=!show1;link1=!link1"><i class="fa fa-minus"></i></a></div><div ng-show="show1 || accountInterface.incomeOffer == true" class="clear account-type-content"><div ng-if=$root.isSIP><hg-remote-asset hg-asset-id="SIP-RISKPROFILE-INCOME"></div><div ng-if=$root.isIIP><hg-remote-asset hg-asset-id="RISKPROFILE-INCOME-AS"></div></div></td></tr><tr ng-show="offerFlagMuni==true"><td><div class=pull-left><div class=checkbox_icon><div class=enroll>Enroll</div><div class=checkbox-with-label><input type=checkbox value="Municipal Bonds" id=municipal-bonds name=municipalbonds ng-model=accountInterface.muniOffer ng-click=municipalBondsCalif() ng-disabled="muniOfferDisabled"><label for=municipal-bonds class=checkbox></label></div><div class="textRadio pull-left">Municipal Bonds</div></div></div><div class="pull-right rightCol"><a ng-show="(accountInterface.muniOffer==false || accountInterface.muniOffer==undefined) && (!show2 || show2==\'\'|| show2==undefined)" ng-click="show2=!show2; link2=!link2"><i class="fa fa-plus"></i></a> <a ng-show="show2 || accountInterface.muniOffer==true" ng-click="show2=!show2;link2=!link2"><i class="fa fa-minus"></i></a></div><div ng-show="show2 || accountInterface.muniOffer==true" class="clear account-type-content"><div ng-if=$root.isSIP><hg-remote-asset hg-asset-id="SIP-RISKPROFILE-MUNI"></div><div ng-if=$root.isIIP><hg-remote-asset hg-asset-id="RISKPROFILE-MUNI-AS"></div></div><div class="clear account-type-content" ng-show="accountInterface.muniOffer == true || show2"><div><div class=row ng-show="isCali == true || !isProfileUpdateFlag"><div class=checkbox_icon><input type=radio value=true id=trira name=check ng-model=accountInterface.californiaMunis ng-click="accountInterface.californiaMunisNational=\'false\'"><label for=trira class=radio>California Municipal Bonds</label><div class="clear account-type-content"><div ng-if=$root.isSIP><hg-remote-asset hg-asset-id="SIP-RISKPROFILE-MUNI-CA"></div><div ng-if=$root.isIIP><hg-remote-asset hg-asset-id="RISKPROFILE-MUNI-CA-AS"></div></div></div></div><div class=row><div class=checkbox_icon><input type=radio value=true id=trira1 name=check ng-model=accountInterface.californiaMunisNational ng-click="accountInterface.californiaMunis=\'false\'"><label for=trira1 class=radio>National Municipal Bonds</label><div class="clear account-type-content"><div ng-if=$root.isSIP><hg-remote-asset hg-asset-id="SIP-RISKPROFILE-MUNI-NATIONAL"></div><div ng-if=$root.isIIP><hg-remote-asset hg-asset-id="RISKPROFILE-MUNI-NATIONAL-AS"></div></div></div></div></div></div></td></tr></tbody></table></div></hg-wizard-page></form>'),a.put("templates/enrollment/getStarted.html",'<form name=userForm class=form ng-submit=continueQuestion() novalidate><hg-wizard-page back=back() next=continueQuestion() mobile=true nextlabel=Continue hideback=true backlabel=Back backenabled=true class="get-started margin-top-40"><hg-page-title>Let\'s Get Started</hg-page-title><div class=padding-bottom-12><p ng-if=$root.isSIP>You’ll answer 12 straightforward questions about your goals time horizon and risk profile. We’ll recommend a portfolio based on your responses. From there it’s easy to sign up and fund your account.</p><p ng-if=$root.isSIP>But before we go on, three quick things we want you to know:</p><p ng-if=$root.isIIP>Here’s how Institutional Intelligent Portfolios&#8482; (the Program) works. <strong>Please read the <a data-ng-click="showDocument(\'https://www.schwab.com/public/file/P-7707039\')">Institutional Intelligent Portfolios disclosure brochure</a> (Disclosure Brochure) for important information about the Program.</strong></p></div><ol class=list-unstyled><li class=padding-bottom-12><span class=icon-circle-number>1</span><div class="padding-left-50 padding-top-8"><p ng-if=$root.isSIP>Schwab Intelligent Portfolios&#8482; is an automated, all-electronic investment advisory solution for which you will open an account at Charles Schwab & Co., Inc., the broker-dealer and custodian. The account will hold Exchange Traded Funds (ETFs) and a cash allocation.</p><p ng-if=$root.isIIP><strong>About Institutional Intelligent Portfolios</strong></p><ul ng-if=$root.isIIP class=list-unstyled><li class=padding-bottom-12>The Program is an automated investment management solution for advisors sponsored by Schwab Wealth Investment Advisory, Inc. (SWIA) and available exclusively through independent investment advisory firms like your independent Investment Advisor (Advisor).</li><li class=padding-bottom-12>Through the Program, your Advisor makes available a range of investment strategies, each consisting of a diversified portfolio of Exchange Traded Funds (ETFs) and a cash allocation.</li><li>Your portfolio will be managed by your Advisor and held in a brokerage account at Charles Schwab & Co., Inc. (CS&Co), an affiliate of SWIA. CS&Co, SWIA and their affiliated companies are referred to as Schwab.</li></ul></div></li><li class=padding-bottom-12><span class=icon-circle-number>2</span><div class="padding-left-50 padding-top-8"><p ng-if=$root.isSIP>Schwab Intelligent Portfolios is sponsored by Schwab Wealth Investment Advisory. Its affiliate, Charles Schwab Investment Advisory, will have discretionary management authority on your account, which means it will make all trading decisions on your behalf while keeping your selected goals in mind.</p><p ng-if=$root.isIIP><strong>What You Will Do</strong></p><ul ng-if=$root.isIIP class=list-unstyled><li class=padding-bottom-12><div class=padding-bottom-8>In areas of this website/mobile app you will interact with your Advisor, and in other areas you will interact with Schwab.</div><ul><li class=padding-bottom-8>Your Advisor is frequently referred to as “we” and “us”.</li><li>In contrast, SWIA, CS&Co and Schwab are referred to by their names.</li></ul></li><li class=padding-bottom-12>First you’ll answer 12 straightforward questions for your Advisor about your goals, time horizon and risk profile.</li><li class=padding-bottom-12>You will then receive your Advisor’s recommendation of a portfolio for you consistent with your answers. You will either accept that recommendation or request that your portfolio be made one level more or less risky than the recommendation. In either case, final selection of your portfolio will be pending final selection by your Advisor.</li><li class=padding-bottom-12>Then you will open and fund a brokerage account online with CS&Co, in which your portfolio will be held.</li><li class=padding-bottom-12>After opening and funding your brokerage account, investment of your account will be pending final selection of your portfolio by your Advisor.</li><li>Once your Advisor has selected your portfolio, you can return here to view your account.</li></ul></div></li><li class=padding-bottom-12><span class=icon-circle-number>3</span><div class="padding-left-50 padding-top-8"><p ng-if=$root.isSIP>Schwab Intelligent Portfolios charges no advisory fee. Schwab affiliates do earn revenue from the underlying assets in the accounts. This revenue comes from managing Schwab ETFs and providing services relating to certain third party ETFs that can be selected for the portfolio, and from the cash feature on the accounts. Revenue may also be received from the market centers where ETF trade orders are routed for execution.</p><p ng-if=$root.isIIP><strong>Your Advisor’s Role and Schwab’s Role</strong></p><ul ng-if=$root.isIIP class=list-unstyled><li class=padding-bottom-12>Your Advisor and Schwab are independent of, not affiliated with, or sponsored or endorsed by each other, and neither is responsible for the communications made by or your interactions with the other on or through this site/app.</li><li class=padding-bottom-12>Your access to the Program is exclusively through your Advisor, and your Advisor, not Schwab, is responsible for advising you on the Program, including recommending and selecting a portfolio appropriate for you and managing your portfolio on a discretionary basis.</li><li>As Program sponsor, SWIA is responsible for operating the Program as described here and in the Disclosure Brochure. At your Advisor’s direction, SWIA will use software to automatically trade your account to rebalance your portfolio when it drifts from the targeted asset allocation by a defined amount.</li></ul></div></li></ol><div ng-if=$root.isIIP><div class=row><div class="alert alert-danger" role=alert ng-if="advisorProgramPinError && !userForm.programPin.$invalid">We do not recognize the Program Key entered. Please re-enter and/or contact your advisor to ensure you are entering a valid Program Key.</div></div><div class=row><div class=form-group ng-class="{ \'has-error\' : userForm.programPin.$invalid && !userForm.programPin.$pristine }"><label for=programPin class=text-center>Advisor Program Key</label><input class="form-control center-block text-center" name=programPin id=programPin ng-model=programPin required hg-validate-alpha-numeric ng-minlength=4 ng-maxlength=4 maxlength=4 ng-model-options="{ updateOn: \'blur\' }" style=width:100px;text-transform:uppercase hg-format-uppercase autocomplete="off"><div role=alert class="help-block text-center" ng-show="!userForm.programPin.$pristine && userForm.programPin.$invalid"><span ng-show=userForm.programPin.$error.required>Program Key is required.</span> <span ng-show=userForm.programPin.$error.alphaNumeric>Program Key must be letters and numbers.</span> <span ng-show="(userForm.programPin.$error.maxlength || userForm.programPin.$error.minlength) &&\r\n                                    !userForm.programPin.$error.alphaNumeric">Program Key must be 4 characters.</span></div></div></div></div><hg-button-group ng-if=$root.deviceInfo.isLargeScreen()><hg-button-primary type=submit>Continue</hg-button-primary></hg-button-group><p ng-if=$root.isSIP class=padding-top-12>Please read the Schwab Intelligent Portfolios’ <a data-ng-click="showDocument(\'https://www.schwab.com/public/file/SIP-SCHWAB-WEALTH-ADVISORY-DISCLOSURE-BROCHURE\')">disclosure brochures</a> for important information, pricing, and disclosures relating to Schwab Intelligent Portfolios.</p><p ng-if=$root.isIIP class="padding-top-12 padding-bottom-8 text-center"><a data-ng-click="showWebDocument(\'https://www.schwab.com/public/asset/TERMS-OF-USE-AS\')">Terms of Use</a></p></hg-wizard-page></form>'),
a.put("templates/enrollment/guardRailPopover.html",'<p class=pull-right style="color:#000; position: relative; top:-15px;; cursor: pointer" ng-click=closeGuardRail()>[X]</p><p style="color:#000; padding-top:10px">If you’re wondering about the proposed allocation, review your prior answers to the questionnaire. <a ng-click=questionsBackStart() href=javascript:void(0)>Back to Start</a></p><p style=color:#000>A portfolio with higher risk & return potential will have more stocks, which generally means you’re willing to tolerate more fluctuation in your initial investment over the course of a year. A portfolio with lower risk & return potential will have more fixed income, which generally means you’re comfortable with less fluctuation. <span ng-if=$root.isSIP><a href=https://hg.schwab.com/public/intelligent/insights/whitepapers/asset-allocation.html target=_blank>Learn about our investment methodology.</a></span></p>'),a.put("templates/enrollment/plan-recommendation.html",'<hg-page full=true class=plan-view><div class=plan-recommendation-container><div id=progressWrapper class=done></div><div class="dk-scheme dk-gradient content-md" ng-init=planSignUp()><div>{{initPlanView()}}</div><div class=row><div class="text-center col-xs-12 col-sm-8 col-md-8 col-lg-8 col-sm-offset-2 col-md-offset-2 col-lg-offset-2"><h1 ng-bind-html=myPortfolioText class=header></h1></div></div><form name=planRecommendationForm class=form novalidate><div class=row><div><div class="col-md-10 col-lg-7 col-md-offset-1 col-lg-offset-3" ng-class="{\'asset-chart-container-pr\': $root.deviceInfo.isLargeScreen()}"><div class=asset-chart ng-init=redrawModelChartOnResize()><hg-asset-chart id=modelChart assets=assetOptions.assets ismobile=$root.deviceInfo.isSmallScreen() bordercolor={{borderColor}} textcolor={{textColor}} disablelabels=$root.deviceInfo.isSmallScreen()></hg-asset-chart></div><div class="chart-legend hidden-lg hidden-md"><div class=row ng-repeat="partition in assetOptions.partitionedAssets"><div class="col-xs-11 col-sm-9 col-md-9 col-sm-offset-1 col-md-offset-1 padding-0 pull-right"><div class="col-xs-6 col-sm-6 col-md-6" ng-repeat="lv1 in partition"><table><tbody ng-if=$first><tr class="{{idFromAssetLevelNames(\'legend\',lv1.level1)}}"><td><i class="fa-li fa fa-square" ng-style=lv1.legendStyle></i>{{lv1.level1}} - {{lv1.percentage}}&#37;{{lv1.dollarFormatted}}</td></tr></tbody><tbody ng-if=!$first><tr class="{{idFromAssetLevelNames(\'legend\',lv1.level1)}}"><td><i class="fa-li fa fa-square" ng-style=lv1.legendStyle></i>{{lv1.level1}} - {{lv1.percentage}}&#37;{{lv1.dollarFormatted}}</td></tr></tbody></table></div></div></div></div></div></div></div><div class=row><div class="col-xs-10 col-sm-8 col-md-8 col-lg-8 col-xs-offset-1 col-sm-offset-2 col-md-offset-2 col-lg-offset-2"><div ng-if=isPlanRecommendationPage class=form-group><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 rang-slider"><div bs-popover data-placement=top data-content-template=templates/enrollment/guardRailPopover.html id=guardRail data-auto-close=1></div><div class="current-allocation {{originalRiskPosition}}"><div class="current-allocation-positioning {{originalRiskProfile}}"><div>Current Allocation</div><i class="fa fa-caret-down fa-2x arrow-down"></i></div></div><div class=slider-placeholder></div><div class="slider-dark {{sliderValues.SliderPosition}}"><slider min={{sliderValues.MinFinalRecommendation}} max={{sliderValues.MaxFinalRecommendation}} step=1 ng-model=sliderValues.FinalRecommendation value={{sliderValues.FinalRecommendation}} on-stop-slide=planChangeBusinessRule()></slider></div></div><div class=row><div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 text-left"><p class=text-bold-17>Low<br><span class=text-regular-15>Risk & Return<br>Potential</span></p></div><div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 text-right"><p class=text-bold-17>High<span class=text-regular-15><br>Risk & Return<br>Potential</span></p></div></div></div></div></div></form></div><section class="allocation-container row"><div class="col-xs-12 col-sm-8 col-md-8 col-lg-8 col-md-offset-2 col-sm-offset-2 col-lg-offset-2 padding-0"><div class=section-header><h2 class="secondary-header proposed-allocatio-header">PROPOSED ALLOCATION</h2>&nbsp;<span>select for details</span></div><div class=row ng-repeat="partition in assetOptions.partitionedAssets"><div class="col-xs-12 col-sm-6 col-md-6 col-lg-6" ng-repeat="lv1 in partition"><table class="table table-style-one total" ng-class="{ selected: assetOptions.isSelected(lv1), deselected : assetOptions.isDisabled(lv1) }"><colgroup><col><col></colgroup><thead><tr ng-click=assetOptions.select(lv1)><th ng-style=lv1.displayStyle>{{lv1.level1}}</th><th ng-style=lv1.displayStyle>{{lv1.percentage}}&#37;{{lv1.dollarFormatted}}</th></tr></thead><tbody ng-if="$first && $root.deviceInfo.isLargeScreen()"><tr ng-repeat="lv2 in lv1.items | orderBy: \'-percentage\'" ng-click=assetOptions.select(lv2) ng-class="{selected : assetOptions.isSelected(lv2)}" bs-popover data-placement=right data-content-template=templates/enrollment/planRecommendationAssetPopover.html data-trigger=click data-auto-close=1 id={{idFromAssetLevelNames(lv1.level1,lv2.name)}}><td>{{lv2.name}}</td><td>{{lv2.percentage}}&#37;{{lv2.dollarFormatted}}</td></tr></tbody><tbody ng-if="!$first && $root.deviceInfo.isLargeScreen()"><tr ng-repeat="lv2 in lv1.items | orderBy: \'-percentage\'" ng-click=assetOptions.select(lv2) ng-class="{selected : assetOptions.isSelected(lv2)}" bs-popover data-placement=left data-content-template=templates/enrollment/planRecommendationAssetPopover.html data-trigger=click data-auto-close=1 id={{idFromAssetLevelNames(lv1.level1,lv2.name)}}><td>{{lv2.name}}</td><td>{{lv2.percentage}}&#37;{{lv2.dollarFormatted}}</td></tr></tbody><tbody ng-if=$root.deviceInfo.isSmallScreen()><tr ng-repeat="lv2 in lv1.items | orderBy: \'-percentage\'" ng-click=assetOptions.select(lv2) ng-class="{selected : assetOptions.isSelected(lv2)}" id={{idFromAssetLevelNames(lv1.level1,lv2.name)}}><td>{{lv2.name}}</td><td>{{lv2.percentage}}&#37;{{lv2.dollarFormatted}}</td></tr></tbody></table></div></div></div></section><div class=text-center><p ng-if="modelDisclosureJoint==true">Please be advised the account portfolio is based on responses provided exclusively by the first tenant (or trustee) on the account.</p><div ng-if=$root.isSIP><hg-remote-asset hg-asset-id="SIP-ENROLLMENT-EXCLUSIONS-DISCLOSURE"></div><div ng-if=$root.isIIP><hg-remote-asset hg-asset-id="ENROLLMENT-EXCLUSIONS-DISCLOSURE-AS"></div></div><div class="btn-bottom button-action-bar col-xs-12 col-sm-12 col-md-12 col-lg-12 text-center"><button class="btn btn-default" ng-click=previous()>Back</button> <button type=submit class="btn btn-primary" ng-click=next()>{{planButtonText}}</button></div></div></hg-page>'),a.put("templates/enrollment/planRecommendationAssetPopover.html",'<div class="pull-right icon-close-x image-cursor" ng-click=$hide()></div><h1>{{lv2.name}}</h1><p>{{lv2.fundDescription}}</p><div ng-if=$root.isSIP><div ng-repeat="s in lv2.securities | orderBy: \'Priority\'" class=etf-popup-display><div ng-if="s.Priority == 0" class=bold>Primary ETF</div><div ng-if="s.Priority == 1"><span class=bold>Secondary ETF</span>&nbsp;<span>for tax loss harvesting</span></div><div>{{s.Description}}&nbsp;<strong>({{s.Symbol}})</strong></div></div><p class=text-right><a ng-href=/public/intelligent/insights/whitepapers/guide-to-asset-classes.html#{{lv2.uriSource}} target=_blank>Learn More</a></p></div>'),a.put("templates/enrollment/portfolioConfirmation.html",'<hg-page full=true><div class=portfolio-confirmation><div><h1><i class="icon-success status-icon statusIconSuccess"></i> Congratulations!</h1></div><div ng-show=$root.isSIP><p>Your portfolio profile has been successfully updated.</p><p>Trades typically take place on the next business day, but may take longer in specific cases.</p><p>Please contact us with any questions.</p></div><div class=iip-content ng-show=$root.isIIP><p>Here is what happens next:</p><ul class=padding-left-20><li>Your new portfolio is pending our review and final selection.</li><li>We may modify your portfolio. We will let you know if we make any changes.</li><li>Once we have selected your final portfolio, your account will be rebalanced within 5 business days.</li></ul><p>Please Contact us with any questions.</p><p></div><div class=button-action-bar><button type=submit class="btn btn-primary" ng-click=next()>Done</button></div></div></hg-page>'),a.put("templates/enrollment/questions-leftpane.html",'<div class="asset-chart my-portfolio padding-top-24"><hg-asset-chart id=chart1 assets=assetOptions.assets disabledrilldown=true disablelabels=true enablelegends=true textcolor={{textColor}} bordercolor={{borderColor}}></hg-asset-chart></div><div class="padding-bottom-36 padding-top-24"></div><div ng-show="isSipIncomeGoal && (goalDetails.state == 2||goalDetails.state == 3)" class=income-infocard><div class="card-circle col-md-2 col-sm-2"><div><i class="fa fa-exclamation-circle fa-3x {{goalDetails.title.class}}" aria-hidden=true></i></div></div><div class="card-info col-md-10 col-sm-10"><div class=card-title>Goal Is <span ng-if="goalDetails.state == 2">At Risk</span><span ng-if="goalDetails.state == 3">Off Target</span> <i class="icon-info-circle padding-5 image-cursor" data-html=true data-template=templates/widget/incomeSuggestionToolTip.html data-placement=bottom data-type=info data-trigger=click bs-tooltip=tooltip></i></div><div>Try changing :</div><div class=padding-left-10 ng-if=!hideInitialInvestment>Initial Investment to <a ng-click=setSuggestionAmount()>{{oneTimeContributionSuggestionAmount}}</a></div><div class=padding-left-10 ng-if=hideInitialInvestment>One Time Contribution to <a ng-click=setSuggestionAmount()>{{oneTimeContributionSuggestionAmount}}</a></div><div ng-if="adjustYearsText!==null"><div>Or</div><div class=padding-left-10>Time Horizon to <a ng-click=setSuggestionYear()>{{adjustYearsText}}</a></div></div></div></div><div class="chart left-rail-chart" ng-show="isCompoundGrowthDisplayed && !isGoalsChartDisplayed"><div class=chart-label><span class=text-bold-17>Hypothetical Annualized Growth</span></div><hg-multi-series-chart id=performanceChart options=performanceChartOption series=performanceChartSeries></hg-multi-series-chart><div class=row><div class="col-xs-4 col-sm-4 col-md-4 col-lg-4 text-left"><span class=text-regular-15>{{compoundGrowthAge}}(age)</span></div><div class="col-xs-4 col-sm-4 col-md-4 col-lg-4"><span class=text-regular-15>+{{startingYearsOfYearsValue[0]}} years</span></div><div class="col-xs-4 col-sm-4 col-md-4 col-lg-4 text-right"><span class=text-regular-15>{{(compoundGrowthAge*1) + (startingYearsOfYearsValue[0]*1)}}</span></div></div><div class="chart left-rail-disclosure"><p class=text-left>This graph uses the investment amount, timeline and monthly contribution you\'ve entered to project hypothetical returns ranging from a 6% annual gain to a 0% annual gain. Projections are hypothetical in nature, are not tied to the allocation chart above, and are not intended to predict future portfolio performance.</p></div></div><div class="chart left-rail-chart" ng-show=isGoalsChartDisplayed><div ng-if="goalDetails.state > 0" class="text-left {{goalDetails.title.class}}"><span ng-show=isProfileUpdateFlag class=text-bold-17>Goal {{goalDetails.title.label2}}</span> <span ng-hide=isProfileUpdateFlag class=text-bold-17>Target Goal Amount</span></div><div ng-if="goalDetails.state == 0" class="text-left {{goalDetails.title.class}}"><span class=text-bold-17>Target Goal Amount</span></div><hg-multi-series-chart id=multiSeriesChartQuestionnaire options=goalDetails.goalChartOptions series=goalDetails.goalChartSeries></hg-multi-series-chart><div ng-if="(goalDetails.state === 2 ||goalDetails.state === 3) && isLargeScreen && isSipIncomeGoal"><div class=row><div class="col-lg-12 col-md-12 text-left"><h5>Estimated {{goalDetails.scorecard.seriesYear}} balance in various market conditions</h5></div></div><div class=row><div class="col-lg-4 col-md-4 text-left">Very Poor</div><div class="col-lg-4 col-md-4 text-left">Worse</div><div class="col-lg-4 col-md-4 text-left">Average</div></div><div class=row><div class="col-lg-4 col-md-4 text-left goal-suggestion-legend"><i class="fa fa-square very-poor-account-balance-legend"></i><b>{{accountPerformancePoorValue | currency:undefined:0}}</b></div><div class="col-lg-4 col-md-4 text-left goal-suggestion-legend"><i class="fa fa-square worst-account-balance-legend"></i><b>{{accountPerformanceWorseValue | currency:undefined:0}}</b></div><div class="col-lg-4 col-md-4 text-left goal-suggestion-legend"><i class="fa fa-square average-account-balance-legend"></i><b>{{accountPerformanceAverageValue | currency:undefined:0}}</b></div></div></div><div><h5 class=text-left><p ng-if=!isIncomeGoal()>For a savings goal, this chart depicts how your portfolio may perform in better, average, and worse markets. Your projected balance is based on average market performance using Charles Schwab Investment Advisory, Inc.&#39;s long-term return estimates.</p><p ng-if=isSipIncomeGoal>The inner curve of the chart shows the likelihood of your account balance lasting with 90% confidence, the middle curve 75% and the outer curve 50%.</p><p>For accounts with no goal set up, the value shown will be the default goal value for this account.</p></h5></div></div>'),a.put("templates/enrollment/questions-rightpane.html",'<div class="text-left visible-xs"><hg-page-title>{{getHeaderText()}}</hg-page-title></div><div class="text-left hidden-xs"><hg-page-title>{{getHeaderText()}}</hg-page-title></div><div ng-repeat="question in questions" class="form-group hg-question" ng-switch on=question.Fieldtype ng-show="question.GroupId==groupID"><div ng-switch-when=radio><hg-page-sub-title left=true id={{question.QuestionId}}>{{question.QuestionTextArray[0].QuestionText}}<span class=sr-only>choose option below</span></hg-page-sub-title><form name=userForm1 class=form novalidate><div ng-init="question.weight=getSelectedAnswer(question.QuestionId)" class="radio-group padding-left-12"><fieldset data-role=controlgroup><div ng-repeat="item in question.Answers"><input tabindex=0 ng-click=saveResponses() type=radio id={{question.QuestionId}}_{{item.AnswerId}} name=name_{{question.QuestionId}} value={{question.QuestionId}}_{{item.AnswerId}} ng-model=question.weight aria-required=true required><label for={{question.QuestionId}}_{{item.AnswerId}} ng-if=item.AnswerTextArray[0].AnswerText class="radio label-block">{{item.AnswerTextArray[0].AnswerText}}</label><label for={{question.QuestionId}}_{{item.AnswerId}} ng-if="item.AnswerTextArray[0].AnswerText==undefined" class="radio label-block">{{item.AnswerTextArray[0].Answer}}</label></div></fieldset></div><div class=button-action-bar><button type=button class="btn btn-default" ng-click=backQuestion()>Back</button> <button type=submit class="btn btn-primary btn-last" ng-click=nextquestion() ng-disabled=userForm1.$invalid>Next</button></div></form></div><div ng-switch-when=input><hg-page-sub-title left=true id={{question.QuestionId}}>{{question.QuestionTextArray[0].QuestionText}}</hg-page-sub-title><form name=userForm1 class=form novalidate><div ng-repeat="item in question.Answers"><input ng-model=question.response ng-value=item.Weightage value=item.Weightage name=question.QuestionId class=form-control id="item.AnswerId"></div><div class="form-group clear"><div class=text-center><button type=button class="btn btn-default" ng-click=backQuestion()>Back</button> <button type=submit ng-click=saveResponses() class="btn btn-default" ng-disabled=userForm1.$invalid>Next</button></div></div></form></div><form name=sliderform class="form slider-form" novalidate><div ng-switch-when=slider><div ng-if="question.QuestionId==\'8\' " ng-init="question.SliderDefaults[0]=compoundGrowthAge;  sliderDollarInit(question)"><hg-page-sub-title left=true id={{question.QuestionId}}><div class=pull-left style=margin-top:3px>{{riskProfileQuestion8am}}</div><div class=pull-left style="margin-left: 5px"><input type=tel id=sliderCompoundGrowthAge ng-model=compoundGrowthAgeInput ng-blur="sliderDollarInput(compoundGrowthAgeInput,question)"></div><div class=pull-left style="margin-left: 5px">{{riskProfileQuestion8old}}</div></hg-page-sub-title><div ng-if="ageFormatterMoreFlag==false || ageFormatterMoreFlag==undefined"><slider ng-model=question.weight id=slider on-stop-slide=businessRule({{question.QuestionId}});sliderStop({{question.QuestionId}}) on-slide=sliderFunction({{question.QuestionId}}) name=slider min={{question.MinRange}} max={{question.MaxRange}} step={{question.Interval}} value={{question.SliderDefaults[0]}} formater=ageFormatter class=end-align></slider></div><div ng-if="ageFormatterMoreFlag==true" class=end-align><slider ng-model=question.weight id=slider on-stop-slide=businessRule({{question.QuestionId}});sliderStop({{question.QuestionId}}) on-slide=sliderFunction({{question.QuestionId}}) name=slider min={{question.MinRange}} max={{question.MaxRange}} step={{question.Interval}} value={{question.SliderDefaults[0]}} formater=ageFormatterMore></slider></div><div class="alert alert-danger" role=alert ng-if="ageFlag==true">{{ageInputError}}</div></div><div ng-if="question.QuestionId==\'9\' && (!isIncomeGoal() ||!hideInitialInvestment || $root.deviceInfo.isSmallScreen())" ng-init="question.SliderDefaults[0]=initialInvestmentValue; sliderDollarInit(question); sliderStop(9)"><hg-page-sub-title left=true id={{question.QuestionId}}><div><div class="pull-left margin-top-3">{{riskProfileQuesiton9}} <b ng-show=hideInitialInvestment>{{getActiveAccountBalance()}}</b></div><div ng-hide=hideInitialInvestment class=pull-left style="margin-left: 5px"><input type=tel id=sliderInvestment ng-model=sliderInputInvestment ng-blur="sliderDollarInput(sliderInputInvestment,question)"> .</div></div></hg-page-sub-title><div ng-hide=hideInitialInvestment class="row clear"><div class=col-xs-12><div ng-if="(sliderInvestmentRule==false || sliderInvestmentRule==undefined) && (formatCurrencyMoreFlag==false || formatCurrencyMoreFlag==undefined) && (sliderInvestmentRuleUpdate==false || sliderInvestmentRuleUpdate==undefined)"><slider ng-model=question.weight id=slider on-stop-slide=businessRule({{question.QuestionId}});sliderStop({{question.QuestionId}}) on-slide=sliderFunction({{question.QuestionId}}) name=slider min={{question.MinRange}} max={{question.MaxRange}} step={{question.Interval}} value={{question.SliderDefaults[0]}} formater=formatCurrency></slider></div><div ng-if="sliderInvestmentRule==true && (formatCurrencyMoreFlag==false || formatCurrencyMoreFlag==undefined) && (sliderInvestmentRuleUpdate==false || sliderInvestmentRuleUpdate==undefined)"><slider ng-model=question.weight id=slider on-stop-slide=businessRule({{question.QuestionId}});sliderStop({{question.QuestionId}}) on-slide=sliderFunction({{question.QuestionId}}) name=slider min={{question.MinRange}} max={{question.MaxRange}} step=100 value={{question.SliderDefaults[0]}} formater=formatCurrency></slider></div><div ng-if="sliderInvestmentRuleUpdate==true && (formatCurrencyMoreFlag==false || formatCurrencyMoreFlag==undefined) && (sliderInvestmentRule==false || sliderInvestmentRule==undefined)"><slider ng-model=question.weight id=slider on-stop-slide=businessRule({{question.QuestionId}});sliderStop({{question.QuestionId}}) on-slide=sliderFunction({{question.QuestionId}}) name=slider min={{question.MinRange}} max={{question.MaxRange}} step=500 value={{question.SliderDefaults[0]}} formater=formatCurrency></slider></div><div class=end-align ng-if="sliderInvestmentRuleUpdate==true && formatCurrencyMoreFlag==true && (sliderInvestmentRule==false || sliderInvestmentRule==undefined)"><slider ng-model=question.weight id=slider on-stop-slide=businessRule({{question.QuestionId}});sliderStop({{question.QuestionId}}) on-slide=sliderFunction({{question.QuestionId}}) name=slider min={{question.MinRange}} max={{question.MaxRange}} step=500 value={{question.SliderDefaults[0]}} formater=formatCurrencyMore></slider></div></div></div><div class="alert alert-danger" role=alert ng-if="investmentFlag==true">{{investmentInputError}}</div></div><div ng-if="question.QuestionId==\'9\' && isIncomeUpdateOnBigweb() && hideInitialInvestment" ng-init="questions[13].SliderDefaults[0]=oneTimeContribution; sliderDollarInit(questions[13]);"><hg-page-sub-title left=true id={{questions[13].QuestionId}}><div><div><div class="margin-top-3 margin-bottom-10">Current balance <b>{{currentAccountBalance}}</b></div></div><div class="pull-left margin-top-5 padding-right-8">{{riskProfileQuesiton14}}</div><div class="pull-left margin-top-5"><input type=tel id=sliderOneTimeContribution ng-model=sliderInputOneTimeContribution ng-blur="sliderDollarInput(sliderInputOneTimeContribution,questions[13])"> .</div></div></hg-page-sub-title><div class="row clear"><div class=col-xs-12><div ng-if="(oneTimeContributionFormatCurrencyFlag==false || oneTimeContributionFormatCurrencyFlag==undefined)"><slider ng-model=questions[13].weight id=slider on-stop-slide=businessRule({{questions[13].QuestionId}});sliderStop({{questions[13].QuestionId}}) on-slide=sliderFunction({{questions[13].QuestionId}}) name=slider min={{questions[13].MinRange}} max={{questions[13].MaxRange}} step={{questions[13].Interval}} value={{questions[13].SliderDefaults[0]}} formater=formatCurrency></slider></div><div class=end-align ng-if="oneTimeContributionFormatCurrencyFlag==true"><slider ng-model=questions[13].weight id=slider on-stop-slide=businessRule({{questions[13].QuestionId}});sliderStop({{questions[13].QuestionId}}) on-slide=sliderFunction({{questions[13].QuestionId}}) name=slider min={{questions[13].MinRange}} max={{questions[13].MaxRange}} step=100 value={{questions[13].SliderDefaults[0]}} formater=formatCurrencyMore></slider></div></div></div><div class="alert alert-danger" role=alert ng-if="oneTimeContributionSliderFlag==true">{{oneTimeContributionInputError}}</div></div><div ng-if="question.QuestionId==\'11\' && !isIncomeGoal()" ng-init="question.SliderDefaults[0]=compoundGrowthannualContribution; sliderDollarInit(question)"><hg-page-sub-title left=true id={{question.QuestionId}}><div class=pull-left style=margin-top:3px>{{riskProfilequestion11c}}</div><div class=pull-left style="margin: 0 5px"><input type=tel id=sliderContribute maxlength=9 ng-model=sliderInputContribute ng-blur="sliderDollarInput(sliderInputContribute,question)"></div><div class=pull-left style=margin-top:3px>{{riskProfilequestion11m}}</div></hg-page-sub-title><div class="row clear"><div class=col-xs-12><div ng-if="(sliderContributeRule==false || sliderContributeRule==undefined) && (sliderContributeCurrencyFlag==false || sliderContributeCurrencyFlag==undefined)"><slider ng-model=question.weight id=slider on-stop-slide=businessRule({{question.QuestionId}});sliderStop({{question.QuestionId}}) on-slide=sliderFunction({{question.QuestionId}}) name=slider min={{question.MinRange}} max={{question.MaxRange}} step={{question.Interval}} value={{question.SliderDefaults[0]}} formater=formatCurrency></slider></div><div ng-if="sliderContributeRule==true && (sliderContributeCurrencyFlag==false || sliderContributeCurrencyFlag==undefined)"><slider ng-model=question.weight id=slider on-stop-slide=businessRule({{question.QuestionId}});sliderStop({{question.QuestionId}}) on-slide=sliderFunction({{question.QuestionId}}) name=slider min={{question.MinRange}} max={{question.MaxRange}} step=100 value={{question.SliderDefaults[0]}} formater=formatCurrency></slider></div><div class=end-align ng-if="sliderContributeRule==true && sliderContributeCurrencyFlag==true"><slider ng-model=question.weight id=slider on-stop-slide=businessRule({{question.QuestionId}});sliderStop({{question.QuestionId}}) on-slide=sliderFunction({{question.QuestionId}}) name=slider min={{question.MinRange}} max={{question.MaxRange}} step=100 value={{question.SliderDefaults[0]}} formater=formatCurrencyMore></slider></div></div></div><div class="alert alert-danger" role=alert ng-if="contributionFlag==true">{{contributionInputError}}</div></div><div ng-if="question.QuestionId==\'13\' && isSipIncomeGoal && isLargeScreen" class=hidden-xs><div ng-if=viewSuggestedWithdrawal><hg-page-sub-title left=true id={{question.QuestionId}}>{{riskProfileQuestion13a}} <strong>{{projectedIncomeWithdrawalAmount}}</strong> {{riskProfileQuestion13b}} <a ng-click=editIncomeWithdrawal(false)>Edit</a> <i class="icon-info-circle padding-5 image-cursor" data-html=true data-template=templates/widget/incomeFigureToolTip.html data-placement=bottom data-type=info data-trigger=click bs-tooltip=tooltip></i></hg-page-sub-title></div><div ng-if=!viewSuggestedWithdrawal ng-init=getStoredIncomeWithdrawal()><hg-page-sub-title left=true id={{question.QuestionId}}>{{riskProfileQuestion13a}} <input type=tel id=sliderIncomeWithdraw ng-model=withdrawalAmount ng-blur="sliderDollarInput(withdrawalAmount,question)"> {{riskProfileQuestion13b}} <a ng-click=editIncomeWithdrawal(true)>View Suggested</a> <i class="icon-info-circle padding-5 image-cursor" data-html=true data-template=templates/widget/incomeFigureToolTip.html data-placement=bottom data-type=info data-trigger=click bs-tooltip=tooltip></i></hg-page-sub-title><div ng-if="incomeWithdrawalCurrencyFlag==false || incomeWithdrawalCurrencyFlag==undefined"><slider ng-model=question.weight on-slide=setWithdrawalAmountFromSlider({{question}}) on-stop-slide=redrawGoalChartOnValidWithdrawal();sliderStop({{question.QuestionId}}) min={{question.MinRange}} max={{question.MaxRange}} step=100 value={{question.SliderDefaults[0]}} formater=formatCurrency></slider></div><div ng-if="incomeWithdrawalCurrencyFlag==true" class=end-align><slider ng-model=question.weight on-slide=setWithdrawalAmountFromSlider({{question}}) on-stop-slide=redrawGoalChartOnValidWithdrawal();sliderStop({{question.QuestionId}}) min={{question.MinRange}} max={{question.MaxRange}} step=100 value={{question.SliderDefaults[0]}} formater=formatCurrencyMore></slider></div><div class="alert alert-danger" role=alert ng-if="incomeWithdrawalErrorFlag==true">{{incomeWithdrawalErrorMessage}}</div></div></div></div><div ng-switch-when=tworangeslider ng-init="question.weight=investmentFluctuatingValue "><hg-page-sub-title left=true id={{question.QuestionId}}>{{riskProfilequestion10b}} {{investmentFluctuatingMinus | currency:undefined:0}} {{riskProfilequestion10a}} {{investmentFluctuatingPlus | currency:undefined:0}}.</hg-page-sub-title><div class=hidden-xs style=position:relative><div class=slider-value style=position:absolute;top:0;left:0>{{investmentFluctuatingMinus | currency:undefined:0}}</div><div ng-hide=hideInitialInvestment class=text-center>{{initialInvestmentValue | currency:undefined:0}}</div><div ng-show=hideInitialInvestment class=text-center>{{getActiveAccountBalance()}}</div><div class=slider-value style=position:absolute;top:0;right:0>{{investmentFluctuatingPlus | currency:undefined:0}}</div></div><div class="visible-xs text-center"><p ng-hide=hideInitialInvestment>Your initial investment is <strong>{{initialInvestmentValue | currency:undefined:0 }}</strong></p><p ng-show=hideInitialInvestment>Your account balance is <strong>{{getActiveAccountBalance()}}</strong></p></div><div class="twoslider clear"><div class="pull-left newslider slider-scale"><div class=firslider><div class="visible-xs text-left slider-value">{{investmentFluctuatingMinus | currency:undefined:0 }}</div><slider on-stop-slide=businessRule({{question.QuestionId}});sliderStop({{question.QuestionId}}) on-slide=sliderFunction({{question.QuestionId}}) reversed=true ng-model=question.weight min=10 max=70 step=10 value=investmentFluctuatingValue tooltip=hide></slider></div><div class=scale-container><div class=pull-left style="width: 10%">-45%</div><div class=pull-left style="width: 16%;text-align: center">-40%</div><div class=pull-left style="width: 16%;text-align: center">-35%</div><div class=pull-left style="width: 16%;text-align: center">-30%</div><div class=pull-left style="width: 16%;text-align: center">-25%</div><div class=pull-left style="width: 16%;text-align: center">-15%</div><div class=pull-left style="width: 10%; text-align: right">-10%</div></div></div><div class="hidden-xs pull-left investment-arrow" style="width: 8%"><div class=investmentAmount></div><div class="pull-left sliderBorder"><div class=arrow-up></div></div></div><div class="pull-left newslider slider-scale"><div class=lastslider><div class="visible-xs text-right slider-value">{{investmentFluctuatingPlus | currency:undefined:0 }}</div><slider on-stop-slide=businessRule({{question.QuestionId}});sliderStop({{question.QuestionId}}) on-slide=sliderFunction({{question.QuestionId}}) ng-model=question.weight min=10 max=70 step=10 value=investmentFluctuatingValue tooltip=hide></slider></div><div class=scale-container><div class=pull-left style="width: 10%">15%</div><div class=pull-left style="width: 16%;text-align: center">25%</div><div class=pull-left style="width: 16%;text-align: center">35%</div><div class=pull-left style="width: 16%;text-align: center">45%</div><div class=pull-left style="width: 16%;text-align: center">50%</div><div class=pull-left style="width: 16%;text-align: center">55%</div><div class=pull-left style="width: 10%;text-align: right">60%</div></div></div><div class=row><div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 text-left"></div><div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 text-right"></div></div></div><div class="alert alert-danger" role=alert ng-if="sliderFluctuationRuleFlag==true">{{sliderFluctuationRuleText}}</div></div><div ng-switch-when=rangeslider><div ng-if=isIncomeGoal()><hg-page-sub-title left=true id={{question.QuestionId}}>{{riskProfileQuestion12for}} {{sliderForYear}}. <i ng-if=isLargeScreen class="icon-info-circle padding-5 image-cursor" data-html=true data-template=templates/widget/lifeExpectancyToolTip.html data-placement=bottom data-type=info data-trigger=click bs-tooltip=tooltip></i></hg-page-sub-title><div class=pull-right>for {{sliderForYear}}</div><div ng-init="question.SliderDefaults=startingYearsOfYearsValue"><slider ng-model=question.weight on-slide=sliderFunction({{question.QuestionId}}) on-stop-slide=businessRule({{question.QuestionId}});sliderStop({{question.QuestionId}}) name=slider min=1 max={{question.MaxRange}} step={{question.Interval}} value={{question.SliderDefaults[1]}} formater=ageRangeFormatter tooltip=hide></slider></div></div><div ng-if=!isIncomeGoal()><hg-page-sub-title left=true id={{question.QuestionId}}>{{riskProfileQuestion12for}} {{sliderForYear}}.</hg-page-sub-title><div class=pull-right>in {{sliderForYear}}</div><div ng-init="question.SliderDefaults=startingYearsOfYearsValue;setGoalYear();"><slider ng-model=question.weight on-slide=sliderFunction({{question.QuestionId}}) on-stop-slide=businessRule({{question.QuestionId}});sliderStop({{question.QuestionId}}) name=slider min={{question.MinRange}} max={{question.MaxRange}} step={{question.Interval}} value={{question.SliderDefaults[0]}} formater=ageRangeFormatter tooltip=hide></slider><div class="alert alert-danger" role=alert ng-if="sliderAgeRule==true">You indicated that you\'re saving for retirement. At your age, you should expect to save for longer. Please lengthen your time horizon to continue.</div></div></div></div></form><div ng-switch-when=select><form name=userForm1 class=form novalidate><select ng-model=question.response class=form-control ng-options="item.Weightage as item.AnswerTextArray[0].AnswerText for item in question.Answers"></select><div class="form-group clear"><div class=text-center><button type=button class="btn btn-default" ng-click=backQuestion()>Back</button> <button type=submit ng-click=saveResponses() class="btn btn-default" ng-disabled=userForm1.$invalid>Next</button></div></div></form></div></div><div ng-if="groupID==8" ng-init=sliderCalculation()><div class="form-group clear"><div class=text-center><div class=button-action-bar><button type=button class="btn btn-default" aria-label=Back ng-click=backQuestion()>Back</button> <button type=submit class="btn btn-primary" aria-label=Next ng-click=jumpAccountType() ng-disabled=sliderSuccessFlag>Next</button></div><div ng-show="isLargeScreen && !isIIP"><h5 class=text-left>There is no guarantee that the intended goal will be reached and changes to inputs and other assumptions may affect your potential to reach the intended goal. In addition, the projections and other information you will see here about the likelihood of various outcomes are hypothetical in nature, do not reflect actual investment results, and are not guarantees of future results. The projections are based on estimates intended to be representative of the selected portfolio. The output of this tool may vary with each use and over time. The tool does not consider the specific securities or other assets held by you. This tool provides analysis based upon your inputs but makes additional assumptions detailed in the <a data-ng-click="showDocument(\'https://intelligent.schwab.com/public/intelligent/insights/whitepapers/goal.html\')">Goal Tracker whitepaper</a>.</h5></div></div></div></div>'),
a.put("templates/enrollment/questions.html",'<div ng-init=loadQuestion()><hg-page full=true ng-if=!isMobile><div class="enrollment content-md"><hg-page-row><div class="hidden-xs col-md-4 col-lg-4 col-sm-4 dk-scheme dk-gradient left-rail"><div ng-init=redrawModelChartOnResize() ng-include="\'templates/enrollment/questions-leftpane.html\'"></div></div><div id=progressWrapper class=thin><div class="progress nine" ng-class="{ \'current\' : groupID == 1, \'complete\' : groupID > 1}" title="Step 1 of 9"><span class=sr-only>Step 1 of 9</span></div><div class="progress nine" ng-class="{ \'current\' : groupID == 2, \'complete\' : groupID > 2}" title="Step 2 of 9"><span class=sr-only>Step 2 of 9</span></div><div class="progress nine" ng-class="{ \'current\' : groupID == 3, \'complete\' : groupID > 3}" title="Step 3 of 9"><span class=sr-only>Step 3 of 9</span></div><div class="progress nine" ng-class="{ \'current\' : groupID == 4, \'complete\' : groupID > 4}" title="Step 4 of 9"><span class=sr-only>Step 4 of 9</span></div><div class="progress nine" ng-class="{ \'current\' : groupID == 5 || groupID == 6, \'complete\' : groupID > 6}" title="Step 5 of 9"><span class=sr-only>Step 5 of 9</span></div><div class="progress nine" ng-class="{ \'current\' : groupID == 7, \'complete\' : groupID > 7}" title="Step 6 of 9"><span class=sr-only>Step 6 of 9</span></div><div class="progress nine" ng-class="{ \'current\' : groupID == 8, \'complete\' : groupID > 8}" title="Step 7 of 9"><span class=sr-only>Step 7 of 9</span></div><div class="progress nine" title="Step 8 of 9"><span class=sr-only>Step 8 of 9</span></div><div class="progress nine" title="Step 9 of 9"><span class=sr-only>Step 9 of 9</span></div></div><div class="col-sm-8 col-md-8 col-lg-8 padding-top-24"><div ng-include="\'templates/enrollment/questions-rightpane.html\'"></div></div></hg-page-row></div></hg-page><hg-page ng-if=isMobile class=enrollment-view><div class="enrollment content-md"><div id=progressWrapper class=thin><div class="progress nine" ng-class="{ \'current\' : groupID == 1, \'complete\' : groupID > 1}" title="Step 1 of 9"><span class=sr-only>Step 1 of 9</span></div><div class="progress nine" ng-class="{ \'current\' : groupID == 2, \'complete\' : groupID > 2}" title="Step 2 of 9"><span class=sr-only>Step 2 of 9</span></div><div class="progress nine" ng-class="{ \'current\' : groupID == 3, \'complete\' : groupID > 3}" title="Step 3 of 9"><span class=sr-only>Step 3 of 9</span></div><div class="progress nine" ng-class="{ \'current\' : groupID == 4, \'complete\' : groupID > 4}" title="Step 4 of 9"><span class=sr-only>Step 4 of 9</span></div><div class="progress nine" ng-class="{ \'current\' : groupID == 5 || groupID == 6, \'complete\' : groupID > 6}" title="Step 5 of 9"><span class=sr-only>Step 5 of 9</span></div><div class="progress nine" ng-class="{ \'current\' : groupID == 7, \'complete\' : groupID > 7}" title="Step 6 of 9"><span class=sr-only>Step 6 of 9</span></div><div class="progress nine" ng-class="{ \'current\' : groupID == 8, \'complete\' : groupID > 8}" title="Step 7 of 9"><span class=sr-only>Step 7 of 9</span></div><div class="progress nine" title="Step 8 of 9"><span class=sr-only>Step 8 of 9</span></div><div class="progress nine" title="Step 9 of 9"><span class=sr-only>Step 9 of 9</span></div></div><div ng-include="\'templates/enrollment/questions-rightpane.html\'"></div></div></hg-page></div>'),a.put("templates/externalAccount/accountVerification.html",'<h2 class=text-center>All Set?</h2><h4>Move money from account</h4><div class=field-border><p>{{aeaTransferData.accountName}}</p><p></p><p>{{aeaTransferData.accountNumber}}</p></div><div class=row data-ng-if=isFunding><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 form-group"><label>Move Money To Account</label><div class=read-only><p>{{transferData.toAccount.Nickname}}</p><p>{{transferData.toAccount.Id}}</p></div></div></div><h4>Initial investment amount:</h4><div class=field-border><p>{{aeaTransferData.initialAmount | currency : symbol : fractionSize}}</p></div><h4>Recurring monthly contribution:</h4><div class=field-border><p>{{aeaTransferData.ongoingAmount | currency : symbol : fractionSize}}</p></div><h4>Frequency</h4><div class=field-border><p>{{aeaTransferData.selectedFrequencyItem.value2}}</p></div><h4>Date the Money Should Move</h4><div class=field-border><p>{{aeaTransferData.transferDate | date:\'MM/dd/yyyy\' : \'UTC\'}}</p></div><ng-form name=verificationForm><div class=form-group ng-class="{ \'has-error\' : verificationForm.routingNumber.$invalid && accountSetupForm.routingNumber.$dirty}"><input type=checkbox ng-model=checkbox name=checkbox class="pull-left checkbox-icon" id=checkbox required><p>I attest that I can act as if I were the sole account holder of this outside account, more legal stuff and disclaimers and so forth, these are not terms and conditions.</p><p ng-show="verificationForm.checkbox.$invalid && !verificationForm.checkbox.$pristine" class=help-block>Please select the checkbox .</p></div><div class="row transferButtons"><div class=text-center><a data-ng-click=goBack(); class="btn btn-default">Back</a> <a data-ng-click=beginVerification(); class="btn btn-primary" data-ng-disabled=verificationForm.$invalid>Move Money</a></div></div></ng-form>'),a.put("templates/externalAccount/aeaAcknowledgement.html",'<div class=row><h3 class=text-center>Next steps</h3><p class=text-center>Your funding has been submitted.You can check status here.</p><br><div class=row><h4>{{aeaTransferData.userInfo.FirstName}} {{aeaTransferData.userInfo.LastName}}</h4><div class="col-sm-8 col-md-6"><p>Account Number:</p></div><div class="col-sm-8 col-md-4 col-sm-offset-1 col-md-offset-1"><p>{{aeaTransferData.accountNumber}}</p></div></div><div class=row><div class="col-sm-8 col-md-6"><p>Routing Number:</p></div><div class="col-sm-8 col-md-4 col-sm-offset-1 col-md-offset-1"><p>{{aeaTransferData.routingNumber}}</p></div></div><div class=row><div class="col-sm-8 col-md-6"><p>To Account:</p></div><div class="col-sm-8 col-md-4 col-sm-offset-1 col-md-offset-1"><p>{{aeaTransferData.toAccount}}</p></div></div><div class=row><div class="col-sm-8 col-md-6"><p>Account Type:</p></div><div class="col-sm-2 col-md-4 col-sm-offset-1 col-md-offset-1"><p>{{aeaTransferData.accountSelected.value}}</p></div></div><div class=row><div class="col-sm-8 col-md-6"><p>Initial investment amount:</p></div><div class="col-sm-2 col-md-4 col-sm-offset-1 col-md-offset-1">{{aeaTransferData.initialAmount}}</div></div><div class=row><div class="col-sm-8 col-md-6"><p>Recurring monthly contribution:</p></div><div class="col-sm-2 col-md-4 col-sm-offset-1 col-md-offset-1"><p>{{aeaTransferData.ongoingAmount}}</p></div></div><div class=row><div class="col-sm-8 col-md-6">Frequency</div><div class="col-sm-2 col-md-4 col-sm-offset-1 col-md-offset-1"><p>{{aeaTransferData.selectedFrequency.Code}}</p></div></div><div class=row><div class="col-sm-8 col-md-6"><p>The date money should move on</p></div><div class="col-sm-2 col-md-4 col-sm-offset-1 col-md-offset-1"><p>{{aeaTransferData.transferDate | date:\'MM/dd/yyyy\' : \'UTC\'}}</p></div></div><div class="row transferButtons"><div class=text-center><a href=/#/funding/externalAccountSetup class="btn btn-default">Move more money</a> <a class="btn btn-primary">Done</a></div></div></div>'),a.put("templates/externalAccount/externalAccountError.html",'<hg-page><hg-page-title><i class="icon-error padding-right-8"></i>{{vm.rtmlDetails.verificationFailedMessage}}</hg-page-title><hg-page-sub-title>{{vm.rtmlDetails.InstitutionName}}</hg-page-sub-title><table class=table-data-list><tbody><tr><td>{{vm.rtmlDetails.accountNumberLabel}}</td><td class=pull-right>{{vm.rtmlDetails.AccountNumber}}</td></tr><tr><td>{{vm.rtmlDetails.routingNumberLabel}}</td><td class=pull-right>{{vm.rtmlDetails.RoutingNumber}}</td></tr></tbody></table><br><p>{{vm.rtmlDetails.verificationErrorMessage}}</p><p class=text-center><a href=# data-ng-click=goToTrialDepositsFlow()>{{vm.rtmlDetails.trialDepositsLink}}</a></p><br></hg-page>'),a.put("templates/externalAccount/externalAccountLaunch.html",'<form name=accountSetupForm class=form><hg-wizard-page back=decline() next=vm.handleExternalAccountLaunchCommand() mobile=$root.isMobile nextdisabled="(accountSetupForm.$invalid) || (vm.rtmlDetails.FiiServeUnavailable)" hideback=$root.isMobile bannertext="Move money to/from your Schwab account"><hg-page-title>Tell {{contextSvc.isIIP() ? \'Schwab\' : \'us\'}} about your external account.</hg-page-title><div class=form-group ng-class="{ \'has-error\' : accountSetupForm.routingNumber.$invalid && accountSetupForm.routingNumber.$dirty}"><label for=routingNumber>Routing Number</label><input class=form-control type=tel name=routingNumber id=routingNumber data-ng-pattern="/^[0-9]{1,9}$/" data-ng-blur=vm.setRoutingNumberToValid(accountSetupForm.routingNumber.$valid) data-ng-maxlength=9 data-ng-minlength=9 data-ng-model=aeaTransferData.routingNumber required><p ng-show="accountSetupForm.routingNumber.$invalid && !accountSetupForm.routingNumber.$pristine" class=help-block>Please enter your valid Routing Number.</p></div><div class=form-group ng-class="{ \'has-error\' : accountSetupForm.accountNumber.$invalid && accountSetupForm.accountNumber.$dirty}"><label for=accountNumber>External Account Number</label><input class=form-control type=tel name=accountNumber id=accountNumber data-ng-pattern="/^[0-9]{1,20}$/" data-ng-blur=vm.setAccountNumberToValid(accountSetupForm.accountNumber.$valid) data-ng-minlength=1 data-ng-maxlength=17 data-ng-model=aeaTransferData.accountNumber required><p ng-show="accountSetupForm.accountNumber.$invalid && !accountSetupForm.accountNumber.$pristine" class=help-block>Please enter your valid Account Number.</p></div><div class=form-group ng-class="{ \'has-error\' :  accountSetupForm.accountType.$invalid && accountSetupForm.accountType.$dirty}"><label for=accountType>Move Money From Account Type</label><select name=accountType id=accountType class="form-control needsclick" data-ng-model=aeaTransferData.accountSelected data-ng-required=true data-ng-options="type.value for type in vm.rtmlDetails.AccountOptions" data-placeholder="Select an account type" data-ng-disabled=!vm.rtmlDetails.hasAccountOptions><option value="">Select an account type</option></select><div class=help-block ng-show="accountSetupForm.accountType.$invalid && accountSetupForm.accountType.$dirty">Please select a from account</div></div><div ng-if="isFunding || isIncomeWithdrawalSetup" class=form-group><label>Link External Account To</label><div class=read-only><p>{{aeaTransferData.toAccount.Nickname}}</p><p>{{aeaTransferData.toAccount.Id}}</p></div></div><div ng-if="!isFunding && !isIncomeWithdrawalSetup" class=form-group ng-class="{ \'has-error\' : accountSetupForm.hgAccount.$invalid && accountSetupForm.hgAccount.$dirty}"><label for=to-account-selector>Link External Account To</label><div hg-selector items-list=aeaTransferData.itemsList selected-item=aeaTransferData.selectedItem title="Select Account" header-title=Account comp-id=1 style-id=1 id=to-account-selector></div><input type=hidden name=hgAccount ng-model=aeaTransferData.selectedItem.value1 class=form-control data-ng-required="true"><div class=help-block ng-show="accountSetupForm.hgAccount.$invalid && !accountSetupForm.hgAccount.$pristine">Please select an account</div></div><hg-inline-message msg-type=error data-ng-show=hasError>{{errorMessage}}</hg-inline-message><hg-inline-message msg-type=error data-ng-show=hasStatusMessage>{{aeaTransferData.statusMessage}}</hg-inline-message></hg-wizard-page></form>'),a.put("templates/externalAccount/externalAccountMFAVerification.html",'<hg-page mobile=isMobile><hg-page-title>{{vm.rtmlDetails.pageTitle}}</hg-page-title><hg-page-sub-title>{{vm.rtmlDetails.InstitutionName}}</hg-page-sub-title><table class=table-data-list><tbody><tr><td>{{vm.rtmlDetails.accountNumberLabel}}</td><td class=pull-right>{{vm.rtmlDetails.AccountNumber}}</td></tr><tr><td>{{vm.rtmlDetails.routingNumberLabel}}</td><td class=pull-right>{{vm.rtmlDetails.RoutingNumber}}</td></tr></tbody></table><br><br><p>{{vm.rtmlDetails.challengeQuestionsText}}</p><br><form name=MFAVerfication role=form><ng-form name=innerForm data-ng-repeat="question in vm.externalAccountRTMLLoginCommand.QuestionResponses"><div class=form-group ng-class="{ \'has-error\' : innerForm.question.$invalid && innerForm.question.$dirty}"><label>{{question.Label}}</label><input name=question class=form-control required ng-model=question.Value data-ng-if="question.Type==0"><div data-ng-repeat="choice in question.Choices" data-ng-if="question.Type==1"><input class="form-control radio" ng-attr-id="{{\'radio\'+$index}}" type=radio name=question value={{choice.Value}} data-ng-model=question.Value required><label ng-attr-for="{{\'radio\'+$index}}" class=label-block>{{choice.Label}}</label></div><p ng-show="innerForm.question.$invalid && !innerForm.question.$pristine" class=help-block>{{vm.rtmlDetails.challengeQuestionsErrorText}}</p><br></div></ng-form><div class=button-action-bar><button type=button ng-click=vm.backToCredentialsScreen() class="btn btn-default" aria-label=Back>{{vm.rtmlDetails.backButtonLabel}}</button> <button type=submit class="btn btn-primary" ng-disabled=MFAVerfication.$invalid aria-label=Submit data-ng-click=vm.attemptAccountLogin()>{{vm.rtmlDetails.nextButtonLabel}}</button></div><a href=# data-ng-click=goToTrialDepositsFlow()>{{vm.rtmlDetails.linkToTrialDepositFlow}}</a></form></hg-page>'),a.put("templates/externalAccount/externalAccountSetup.html",'<form name=accountSetupForm class=form><hg-wizard-page back=goToVerifyStep() next=beginVerification() mobile=isMobile hideback=isMobile nextdisabled=(accountSetupForm.$invalid) bannertext="Move money to/from your Schwab account"><hg-page-title>Setup Transaction</hg-page-title><div class=form-group><label>Move Money From Account</label><div class=read-only><p>{{aeaTransferData.verifiedAccount.FinancialInstitutionName}}</p><p>{{aeaTransferData.accountNumber}}</p></div></div><div class=form-group><label>Move Money To Account</label><div class=read-only><p>{{aeaTransferData.selectedToAccount.Nickname}}</p><p>{{aeaTransferData.selectedToAccount.Id}}</p></div></div><div class=form-group ng-class="{ \'has-error\' : accountSetupForm.amount.$invalid && accountSetupForm.amount.$touched}"><label data-ng-if=!isFunding for=amount>Amount</label><label data-ng-if=isFunding for=amount>Initial Amount</label><input name=amount class="amount-to-move form-control" id=amount data-ng-model=aeaTransferData.initialAmount data-ng-required=true maxvalue=100000 ng-model-options="{ updateOn: \'blur\' }" hg-currency-input placeholder="$0.00"> <span class=text-danger ng-show="(accountSetupForm.amount.$invalid &&(aeaTransferData.initialAmount > 0 || accountSetupForm.amount.$dirty ))">The amount entered should be numeric, in the format ($XXX,XXX.XX) and not greater than $100,000. Please reenter the amount.</span></div><div data-ng-if=isFunding class=form-group ng-class="{ \'has-error\' : accountSetupForm.recurringAmount.$invalid && accountSetupForm.recurringAmount.$touched}"><label>Recurring Amount <span class=pull-right>(Optional)</span> <input name=recurringAmount class="amount-to-move form-control" id=recurringAmount data-ng-model=aeaTransferData.ongoingAmount data-ng-required=false ng-model-options="{ updateOn: \'blur\' }" hg-currency-input minvalue=0 maxvalue=100000 placeholder="$0.00"> <span class=text-danger ng-show="accountSetupForm.recurringAmount.$invalid && accountSetupForm.recurringAmount.$dirty">The amount entered should be numeric, in the format ($XXX,XXX.XX) and not greater than $100,000. Please reenter the amount.</span></label></div><div data-ng-if="(isFunding && aeaTransferData.ongoingAmount > 0)" class=form-group data-ng-class="{ \'has-error\' : accountSetupForm.itemSelectedFrequencyName.$invalid && accountSetupForm.itemSelectedFrequencyName.$dirty}"><div for=amount>Recurring Frequency</div><div hg-selector items-list=aeaTransferData.frequencyItemsList selected-item=aeaTransferData.selectedFrequencyItem header-title=Frequency comp-id=3 style-id=2></div><input type=hidden name=itemSelectedFrequencyName data-ng-model=aeaTransferData.selectedFrequencyItem.value1 class=form-control data-ng-required="true"><div class=help-block ng-show="accountSetupForm.itemSelectedFrequencyName.$invalid && accountSetupForm.itemSelectedFrequencyName.$dirty">Please select frequency</div></div><hg-inline-message msg-type=error data-ng-show=hasStatusMessage>{{aeaTransferData.statusMessage}}</hg-inline-message></hg-wizard-page></form>'),a.put("templates/externalAccount/loginExternalAccount.html",'<hg-page mobile=isMobile><hg-page-title>{{vm.rtmlDetails.pageTitle}}</hg-page-title><hg-page-sub-title>{{vm.rtmlDetails.InstitutionName}}</hg-page-sub-title><table class="table-data-list rtml-table-data-list"><tbody><tr><td>{{vm.rtmlDetails.accountNumberLabel}}</td><td class=pull-right>{{vm.rtmlDetails.AccountNumber}}</td></tr><tr><td>{{vm.rtmlDetails.routingNumberLabel}}</td><td class=pull-right>{{vm.rtmlDetails.RoutingNumber}}</td></tr></tbody></table><br><p hg-dynamic-html-compile dynamic-html-string=vm.rtmlDetails.verificationText><form name=rtmlVerification role=form><ng-form name=innerForm data-ng-repeat="validationQuestion in vm.externalAccountValidationParametersCommand.ValidationParameters"><div class=form-group ng-class="{ \'has-error\' : innerForm.validationQuestion.$invalid && innerForm.validationQuestion.$dirty}"><label for=loginId>{{validationQuestion.Label}}</label><input class=form-control type={{validationQuestion.Type}} name=validationQuestion id=loginId data-ng-maxlength={{validationQuestion.MaxLength}} data-ng-model=validationQuestion.Value required><p ng-show="innerForm.$invalid && !innerForm.validationQuestion.$pristine" class=help-block>{{validationQuestion.ErrorMessage}}</p></div></ng-form><div class=form-group ng-class="{ \'has-error\' : rtmlVerification.checkbox.$invalid && rtmlVerification.checkbox.$dirty}"><hg-inline-message msg-type=error data-ng-show=vm.rtmlDetails.hasError><p data-ng-repeat="error in vm.rtmlDetails.errorMessage">{{error}}<br></p></hg-inline-message><a href={{vm.rtmlDetails.termsAndConditionsLink}} target=_blank>{{vm.rtmlDetails.termsAndConditionsLinkText}}</a><br><input class="pull-left checkbox-icon" type=checkbox name=checkbox id=agree data-ng-model=vm.externalAccountRTMLLoginCommand.externalAccountAgreeToTermsAndConditions required><label for=agree class=checkbox><span>{{vm.rtmlDetails.agreeLabel}}</span></label><p ng-show="rtmlVerification.checkbox.$invalid && !rtmlVerification.checkbox.$pristine" class=help-block>{{vm.rtmlDetails.checkboxErrorMessage}}</p><br><br><p hg-dynamic-html-compile dynamic-html-string=vm.rtmlDetails.agreementText></p></div><div class=button-action-bar><button type=button ng-click=vm.backToAddExternalAccountScreen() class="btn btn-default" aria-label=Back>{{vm.rtmlDetails.backButtonLabel}}</button> <button type=submit ng-click=vm.handleExternalValidationParametersCommand() class="btn btn-primary" ng-disabled="vm.maximumTriesExceeded || rtmlVerification.$invalid " aria-label=Submit>{{vm.rtmlDetails.nextButtonLabel}}</button></div><p class=text-center><a href=# data-ng-click=goToTrialDepositsFlow()>{{vm.rtmlDetails.linkToTrialDepositFlow}}</a></p><br><hg-local-asset hg-asset-id={{vm.rtmlDetails.rtmlInformationAssetID}}></hg-local-asset></form><br></p></hg-page>'),a.put("templates/externalAccount/transfer.html","<div id=form-views class={{animateStyle}} ui-view></div>"),a.put("templates/externalAccount/trialDepositInitiation.html",'<form name=accountSetupForm class=form><hg-wizard-page back=notNow() next=verifyTrialDeposit() mobile=isMobile nextdisabled=(accountSetupForm.$invalid) nextlabel=Verify backlabel="Not now" bannertext="Move money to/from your Schwab account" hideback=$root.allAccountsClosedFlag hidenext=$root.allAccountsClosedFlag><hg-page-title>Verify your Account</hg-page-title><div ng-if=$root.allAccountsClosedFlag class="custom-error-messages row"><div class=col-xs-12><b>{{allAccountsClosedMessage.message1}}</b></div><div class=col-xs-12><b>{{allAccountsClosedMessage.message2}}</b></div></div><div ng-if=!$root.allAccountsClosedFlag><hg-page-sub-title data-ng-if=!showPendingAccount>{{contextSvc.isIIP() ? \'Schwab\' : \'We\'}} recently submitted two small trial deposits to your account. Do you want to verify those deposits now?</hg-page-sub-title><hg-page-sub-title data-ng-if=showPendingAccount>There are multiple accounts that need to be verified. Please select the account you would like to verify below.</hg-page-sub-title><div class=radio-group><ul class="list-group list-type-none"><li data-ng-repeat="item in aeaTransferData.externalAccounts track by $index"><input data-ng-model=aeaTransferData.selectedAcc.value id="radio{{item.ExternalAccount.InstitutionName}} - {{item.ExternalAccount.ExternalAccountNumber}}" type=radio class="form-control radio" name=radio value={{$index}} ng-required="true"><label for="radio{{item.ExternalAccount.InstitutionName}} - {{item.ExternalAccount.ExternalAccountNumber}}" class=label-block>{{item.ExternalAccount.InstitutionName}} - {{item.ExternalAccount.ExternalAccountNumber}}</label></li></ul></div></div></hg-wizard-page></form>'),a.put("templates/externalAccount/trialVerification.html",'<form name=trailAmountForm class=form><hg-wizard-page back=notNow() next=trialDepositVerification() mobile=isMobile nextdisabled=(trailAmountForm.$invalid) nextlabel=Submit bannertext="Move money to/from your Schwab account"><hg-page-title>Verify your Account</hg-page-title><hg-page-sub-title>Outside Account Details</hg-page-sub-title><dl><dt class=pull-left>Routing Number</dt><dd class="definition-data text-right">&nbsp;{{aeaTransferData.verificationAccount.AbaCode}}</dd><dt class=pull-left>Account Number</dt><dd class="definition-data text-right">&nbsp;{{aeaTransferData.verificationAccount.ExternalAccountNumber}}</dd><dt class=pull-left>Account Type</dt><dd class="definition-data text-right">&nbsp;{{aeaTransferData.selectedAccountType}}</dd></dl><hg-page-sub-title>{{aeaTransferData.verificationAccount.InstitutionName}}</hg-page-sub-title><div class=form-group ng-class="{ \'has-error\' : trailAmountForm.initialAmount.$invalid && trailAmountForm.initialAmount.$pristine}"><h2 class=sub-header>Trial Deposits</h2><hg-page-row><div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 padding-0"><div class=pull-left><span class=trial-amount-txt>$0.</span></div><div data-ng-class="{ \'has-error\' : trailAmountForm.trialAmount.$invalid && trailAmountForm.trialAmount.$dirty}"><label for=trialAmount class=sr-only>Enter trial amount in cents</label><input type=number name=trialAmount ng-pattern="/^[0-9]{2}$/" class="form-control trial-input" placeholder=00 id=trialAmount ng-model=aeaTransferData.trialAmount maxlength=2 required><div><p ng-show="trailAmountForm.trialAmount.$invalid && !trailAmountForm.trialAmount.$pristine" class=help-block>Please enter a valid amount.</p></div></div></div><div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 padding-0"><div class=pull-left><span class=trial-amount-txt>$0.</span></div><div data-ng-class="{ \'has-error\' : trailAmountForm.trialAmount2.$invalid && trailAmountForm.trialAmount2.$dirty}"><label for=trialAmount2 class=sr-only>Enter trial amount in cents</label><input type=number name=trialAmount2 class="form-control trial-input" placeholder=00 id=trialAmount2 ng-model=aeaTransferData.trialAmount2 maxlength=2 required ng-pattern="/^[0-9]{2}$/"><div><p ng-show="trailAmountForm.trialAmount2.$invalid && !trailAmountForm.trialAmount2.$pristine" class=help-block>Please enter a valid amount.</p></div></div></div></hg-page-row></div><p class="text-regular-15 margin-bottom-24">Enter two trial deposit amounts in any order</p><div class=form-group ng-class="{ \'has-error\' : trailAmountForm.checkbox.$invalid && trailAmountForm.checkbox.$dirty}"><hg-local-asset hg-asset-id=SIP-BROKER-EXTERNAL-AGREEMENT></hg-local-asset><input id=agree type=checkbox ng-model=checkbox name=checkbox class="pull-left checkbox-icon" id=checkbox required><label for=agree class=checkbox><span>I Agree</span></label><p ng-show="trailAmountForm.checkbox.$invalid && !trailAmountForm.checkbox.$pristine" class=help-block>Please select the checkbox.</p></div><hg-inline-message msg-type=error data-ng-show=hasError>{{errorMessage}}</hg-inline-message><hg-inline-message msg-type=error data-ng-show=hasStatusMessage>{{aeaTransferData.statusMessage}}</hg-inline-message></hg-wizard-page></form>'),a.put("templates/externalAccount/verifyExternalAccount.html","<hg-wizard-page back=decline() next=beginVerification() nextlabel=Agree backlabel=Decline mobile=isMobile bannertext=\"Move money to/from your Schwab account\"><hg-page-title>Verify Your Account</hg-page-title><hg-page-sub-title>{{aeaTransferData.verifiedAccount.FinancialInstitutionName}}</hg-page-sub-title><table class=table-data-list><tbody><tr><td>Account Number</td><td class=table-data-list-number>{{aeaTransferData.accountNumber}}</td></tr><tr><td>Routing Number</td><td class=table-data-list-number>{{aeaTransferData.routingNumber}}</td></tr></tbody></table><div class=\"form-group padding-top-12\"><p>Before {{contextSvc.isIIP() ? 'Schwab' : 'we'}} can add this external account, we must verify your external account ownership through trial deposit.</p><br><h3>Step 1: Receive Trial Deposit(s)</h3><p>In one to three business days, one or two small deposit(s) will be transferred to your external account.</p><h3>Step 2: Determine Deposit Amount(s)</h3><p>Check with your bank or financial institution to determine the amount(s) of the trial deposit(s). Trial deposit transactions may be listed as “ABC BANK VERIFY.\"</p><h3>Step 3: Confirm Deposit Amounts(s)</h3><p>{{contextSvc.isIIP() ? 'Schwab' : 'We'}} will send you an email with instructions to complete enrollment. You will be prompted to enter the account type at the external institution and the exact trial deposit amount(s) to verify that you are the account holder.</p><h3>To begin the Trial Deposit process, Click \"Agree\"</h3></div></hg-wizard-page>"),a.put("templates/externalAccount/verifyYourAccount.html","<hg-wizard-page back=decline1() next=submitData() nextlabel=Done mobile=isMobile nextenabled=!accountSetupForm.$invalid hideback=true bannertext=\"Move money to/from your Schwab account\"><hg-page-title>Trial Deposits Submitted</hg-page-title><hg-page-sub-title>{{aeaTransferData.verifiedAccount.FinancialInstitutionName}}</hg-page-sub-title><table class=table-data-list><tbody><tr><td>Account Number</td><td>{{aeaTransferData.accountNumber}}</td></tr><tr><td>Routing Number</td><td>{{aeaTransferData.routingNumber}}</td></tr></tbody></table><div class=\"form-group padding-top-12\"><h3>Next Steps</h3><p>In one to three business days, two small deposits will be transferred to your external account.</p><p>1. Check with your bank or financial institution to determine the trial deposit amounts. Trial deposit transactions may be listed as TRIALCREDT.</p><p>2. You will receive an email {{contextSvc.isIIP() ? 'from Schwab ' : ''}}with next steps within one to three business days. Follow the login instructions in the email.</p><p>3. You will be prompted to select the external account type at the outside institution, enter the trial deposit amount(s), and click on the confirm button. If the deposit amount(s) you enter match our records, you will be asked to agree to Terms and Conditions and to submit your enrollment.</p></div></hg-wizard-page>"),a.put("templates/funding/TWEedit.html",'<form name=taxEditForm class=form><hg-wizard-page full=false back=back() next=finishTWEedit() mobile=isMobile nextdisabled=(taxEditForm.$invalid) nextlabel=Done><div class=twe-edit-messages><hg-inline-message msg-type=warning>Your tax withholding election will remain in effect on all distributions from this IRA account until you change or revoke it. You may change or revoke your election at any time by submitting your request to Schwab.</hg-inline-message><div data-ng-repeat="msgId in transferData.TweDetails.TweMessageIds" class=info-content><hg-local-asset hg-asset-id={{msgId}} class=padding-bottom-8></hg-local-asset></div></div><div class="twe-edit col-xs-12 col-sm-10 col-md-8 col-lg-6 col-sm-offset-1 col-md-offset-2 col-lg-offset-3 ng-scope padding-top-8"><div class="hidden-xs hidden-sm"><hg-page-title>Move Money</hg-page-title></div><h1 class=twe-edit-subheader>Tax Withholding Elections for {{transferData.selectedFromAccount.Nickname}} {{transferData.selectedFromAccount.AccountIdDisplay}}</h1><h2 class=sub-header>Review your tax withholding elections for this account.</h2><h2>Federal Tax Withholding Rate.</h2><div class="form-group margin-bottom-24"><div class="form-group col-xs-8 col-sm-8 col-md-8 col-lg-8 padding-0"><input id=federalOptOut type=checkbox ng-change=recalculateTwe(true) ng-model=transferData.TweDetails.fedOptOut ng-disabled={{!transferData.TweDetails.CanOptOutFed}} class="pull-left checkbox-icon"><label for=federalOptOut class=checkbox><span>Do not withhold federal taxes</span></label></div><div class="col-xs-4 col-sm-4 col-md-4 col-lg-4 padding-0 pull-right" data-ng-class="{ \'has-error\' : taxEditForm.modifiedFedTax.$invalid}"><span class="twe-percent-text pull-right">%</span><div><input type=number name=modifiedFedTax class="pull-right form-control number-box" ng-if=transferData.TweDetails.fedOptOut value=0 ng-disabled=true> <input type=number name=modifiedFedTax twe-percent-validation class="pull-right form-control number-box" ng-model-options="{ updateOn: \'blur\' }" ng-if=!transferData.TweDetails.fedOptOut step=1.0 min=transferData.TweDetails.FedMinimum max=99 maxlength=2 ng-model=transferData.TweDetails.modifiedFedTaxRate required></div></div></div><div class=text-danger ng-show=taxEditForm.modifiedFedTax.$error.belowMinimum>Please enter a valid Tax Withholding Percentage.</div><div class=text-danger ng-show=taxEditForm.modifiedFedTax.$error.maxPercentExceeded>Please enter total Tax Withholding Percentage less than 100%.</div><div class="clear text-right"><p>{{transferData.TweDetails.FedMinimum * 100 | number:0}}% minimum withholding required by federal law</p></div><h2 class=sub-header>State Tax Withholding Rate.</h2><div class=form-group><div class="form-group col-xs-8 col-sm-8 col-md-8 col-lg-8 padding-0"><input id=stateOptOut type=checkbox ng-model=transferData.TweDetails.stateOptOut ng-change=recalculateTwe(true) class="pull-left checkbox-icon" ng-disabled="{{!transferData.TweDetails.IsStateTaxApplicable || !transferData.TweDetails.CanOptOutState}}"><label for=stateOptOut class=checkbox><span>Do not withhold state taxes</span></label></div><div class="col-xs-4 col-sm-4 col-md-4 col-lg-4 padding-0 pull-right" data-ng-class="{ \'has-error\' : taxEditForm.modifiedStateTax.$invalid}"><span class="twe-percent-text pull-right">%</span><div><input type=number name=modifiedStateTax class="pull-right form-control number-box" ng-if=transferData.TweDetails.stateOptOut value=0 ng-disabled="true"> <input type=number name=modifiedStateTax twe-percent-validation ng-model-options="{ updateOn: \'blur\' }" class="pull-right form-control number-box" min=transferData.TweDetails.StateMinimum max=99 step=0.01 ng-model=transferData.TweDetails.modifiedStateTaxRate ng-if=!transferData.TweDetails.stateOptOut required></div></div></div><div class=text-danger ng-show=taxEditForm.modifiedStateTax.$error.belowMinimum>Please enter a valid Tax Withholding Percentage.</div><div class=text-danger ng-show=taxEditForm.modifiedStateTax.$error.maxPercentExceeded>Please enter total Tax Withholding Percentage less than 100%.</div><div class="clear text-right"><p>{{transferData.TweDetails.StateMinimum * 100 | number:2}}% minimum withholding required by {{transferData.TweDetails.StateCode}} state law</p></div><div class="distribution-summary-container clear margin-top-20 margin-bottom-24"><div><div class=row><div class="col-xs-7 col-sm-7 col-md-7 col-lg-7">Federal Tax Rate</div><div class="col-xs-5 col-sm-5 col-md-5 col-lg-5 text-right" ng-if=!transferData.TweDetails.fedOptOut>{{transferData.TweDetails.modifiedFedTaxRate}}%</div><div class="col-xs-5 col-sm-5 col-md-5 col-lg-5 text-right" ng-if=transferData.TweDetails.fedOptOut>0%</div></div><div class=row><div class="col-xs-7 col-sm-7 col-md-7 col-lg-7">Federal Tax Amount</div><div class="col-xs-5 col-sm-5 col-md-5 col-lg-5 text-right">{{(transferData.TweDetails.FedTaxAmount | currency)}}</div></div></div><div><div class="row margin-top-20"><div class="col-xs-7 col-sm-7 col-md-7 col-lg-7">State Tax Rate</div><div class="col-xs-5 col-sm-5 col-md-5 col-lg-5 text-right" ng-if=!transferData.TweDetails.stateOptOut>{{transferData.TweDetails.modifiedStateTaxRate}}%</div><div class="col-xs-5 col-sm-5 col-md-5 col-lg-5 text-right" ng-if=transferData.TweDetails.stateOptOut>0%</div></div><div class=row><div class="col-xs-7 col-sm-7 col-md-7 col-lg-7">State Tax Amount</div><div class="col-xs-5 col-sm-5 col-md-5 col-lg-5 text-right">{{(transferData.TweDetails.StateTaxAmount | currency)}}</div></div></div><div><div class="row margin-top-20"><div class="col-xs-7 col-sm-7 col-md-7 col-lg-7 bold">{{transferData.TweDetails.IsNetAmount ? "Net" : "Gross"}} Cash Amount</div><div class="col-xs-5 col-sm-5 col-md-5 col-lg-5 text-right">{{transferData.TweDetails.TotalAmount | currency}}</div></div><div class=row><div class="col-xs-7 col-sm-7 col-md-7 col-lg-7">Funds Available</div><div class="col-xs-5 col-sm-5 col-md-5 col-lg-5 text-right">{{fromCashBalance | currency}}</div></div></div></div></div><div class=clear></div></hg-wizard-page></form>'),
a.put("templates/funding/agreementOverlay.html",'<div class=modal-header><h4 class=modal-title>Consent to Online Application</h4></div><div class=modal-body><hg-page full=true><p>By clicking on the I Consent button at the bottom of this screen, you signify that you consent to receive and read in electronic format the terms and conditions of this cash transfer.</p><p>If you do not agree with the representation above, please exit this electronic process by closing the window. This is a one-time consent for this electronic application process. Exiting will constitute the withdrawal of your consent. If you check the I Consent below, we will create an electronic record of your consent.</p></hg-page><div class=modal-footer><button type=button class="btn btn-default" data-dismiss=modal aria-hidden=true data-ng-click=closePopup()>Back</button> <button type=submit class="btn btn-primary" data-ng-click=confirmBtn();>I Consent</button></div></div>'),a.put("templates/funding/deposit.html","<div ui-view class={{animateStyle}}></div>"),a.put("templates/funding/netDisabledMessage.html",'<div class="tooltip in"><div class=tooltip-arrow></div><div class=tooltip-inner>{{netDisabledMessage}}</div></div>'),a.put("templates/funding/recurringContributionOverlay.html",'<form name=recurringForm><div class=recurring><div class=modal-header><span class=modal-title>Recurring Contribution</span><span class="pull-right modal-title">(Optional)</span></div><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 overlay-content"><div class=form-group data-ng-class="{ \'has-error\' : recurringForm.recurringTransferAmount.$invalid && recurringForm.recurringTransferAmount.$touched}"><label for=recurringAmount>Recurring Contribution Amount <input ng-model-options="{ updateOn: \'blur\' }" name=recurringTransferAmount class="amount-to-move form-control" id=recurringAmount data-ng-model=transferData.recurringTransferAmount hg-currency-input placeholder=$0.00 data-ng-required="true"> <span class=text-danger ng-show="recurringForm.recurringTransferAmount.$invalid && recurringForm.recurringTransferAmount.$dirty">The amount entered should be numeric and in the format ($XXX,XXX.XX). Please reenter the amount.</span></label></div><div class=form-group data-ng-class="{ \'has-error\' : recurringForm.recurringFrequency.$invalid && recurringForm.recurringFrequency.$dirty}"><label for=recurringFrequency>Recurring Contribution Frequency</label><div id=recurringFrequency hg-selector items-list=transferData.frequencyItemsList selected-item=transferData.recurringFrequencyItem header-title="Recurring Frequency" comp-id=3 style-id=2></div><input type=hidden name=selectedRecurringFrequencyName data-ng-model=transferData.recurringFrequency.value1 class=form-control data-ng-required="true"><div class=help-block ng-show="recurringForm.recurringFrequency.$invalid && recurringForm.recurringFrequency.$dirty">Please select frequency</div></div><div class="form-group date-picker" data-ng-class="{ \'has-error\' : recurringForm.recurringStartDate.$invalid && recurringForm.recurringStartDate.$dirty}"><label for=transferDate><span>Recurring Contribution Start Date</span></label><p class=input-group><input class="form-control input-md transfer-date" id=transferDate ng-model=transferData.recurringStartDate data-min-date={{transferData.earliestTransfer}} ng-required=true data-date-format=MM/dd/yyyy ng-change=openFirstDP(false) data-autoclose=1 name=date3 data-bs-show=is1stDpVisible bs-datepicker placeholder="MM/DD/YYYY"> <span class=input-group-btn><button class="btn btn-default btn-primary btn-icon-calendar" ng-click=openFirstDP(true) ng-blur=openFirstDP(false)><i class=icon-calendar></i></button></span></p><div class=help-block ng-show="recurringForm.recurringStartDate.$invalid && recurringForm.recurringStartDate.$dirty">Please enter a valid date in the format MM/DD/YYYY.</div></div><div data-ng-if=showRecurringTrans2ndDate class="form-group date-picker" data-ng-class="{ \'has-error\' : recurringForm.recurringSecondTransferDate.$invalid && recurringForm.secondTransferDate.$dirty}"><label for=secondTransferDate>Second Recurring Contribution Start Date</label><p class=input-group><input class="form-control input-md second-transfer-date" id=recurringSecondStartDate ng-model=transferData.recurringSecondStartDate data-date-format=MM/dd/yyyy ng-change=openSecondDP(false) data-autoclose=1 name=date4 data-bs-show=is2ndDpVisible bs-datepicker ng-required=true data-min-date={{newMinDate}} data-max-date={{maxDate}} placeholder="MM/DD/YYYY"> <span class=input-group-btn><button class="btn btn-default btn-primary btn-icon-calendar" ng-click=openSecondDP(true) ng-blur=openSecondDP(false)><i class=icon-calendar></i></button></span></p><div class=help-block ng-show="recurringForm.recurringSecondStartDate.$invalid && recurringForm.recurringSecondStartDate.$dirty">Please enter a valid date in the format MM/DD/YYYY.</div></div><div class="modal-footer recurring-footer"><button type=button class="btn btn-default" data-dismiss=modal aria-hidden=true data-ng-click=resetRecurring()>No Recurring</button> <button type=submit class="btn btn-default btn-primary" ng-disabled=!isValidRecurringTrans data-ng-click=confirmBtn();>Done</button></div></div></div></form>'),a.put("templates/funding/transferAcknowledgement.html",'<hg-wizard-page back=newTransfer() next=done() mobile=isMobile backlabel="New Transfer" nextlabel={{getAcknowledgeDoneText()}} bannertext="Move money to/from your Schwab account" hideback=hideNewTransferOnAcknowledgment><hg-page-title ng-hide=isDelete><i class=icon-success></i> Congratulations!</hg-page-title><hg-page-sub-title class="help-block text-center" data-ng-show=successMessage>{{successMessage}}</hg-page-sub-title><dl class="margin-top-10 confirm-transfer-list" ng-class="{recurring : (isFunding)}"><dt class=pull-left>From</dt><dd class="definition-data clearfix">{{transferData.selectedFromAccount.Nickname}} &nbsp; {{transferData.selectedFromAccount.AccountIdDisplay}}</dd><dt class=pull-left>To</dt><dd class="definition-data clearfix">{{transferData.selectedToAccount.Nickname}} &nbsp; {{transferData.selectedToAccount.AccountIdDisplay}}</dd><div ng-class="{transactionHeader : (isFunding)}"><div data-ng-if=(isFunding) class=transactionLabel>Initial Transfer</div><dt class=pull-left ng-if=showFrequencyLabel()>Frequency</dt><dd class="definition-data clearfix" ng-if=showFrequencyLabel()>{{transferData.selectedFrequency.Name}}</dd><dt class=pull-left data-ng-if=distributionDesc>Distribution</dt><dd class=definition-data data-ng-if=distributionDesc>{{transferData.distributionDesc}}</dd><div data-ng-if=!transferData.TweDetails><dt class=pull-left>Amount</dt><dd class="definition-data clearfix">{{transferData.transferAmount | currency}}</dd></div><div data-ng-if=transferData.TweDetails><dt class=pull-left>Total</dt><dd class="definition-data clearfix">{{transferData.TweDetails.GrossCashAmount | currency}}</dd><dt class=pull-left>Transfer Amounts</dt><dd class="definition-data clearfix">{{transferData.TweDetails.NetCashAmount | currency}}</dd><dt class=pull-left>Tax Withholdings</dt><dd class="definition-data clearfix">{{transferData.TweDetails.Taxes | currency}}</dd><dt class="pull-left transfer-dt-grouping">Federal Taxes ({{transferData.TweDetails.FedTaxRate * 100 | number:0}}%)</dt><dd class="definition-data transfer-dd-grouping clearfix">{{transferData.TweDetails.FedTaxAmount | currency}}</dd><dt class="pull-left transfer-dt-grouping">State Taxes ({{transferData.TweDetails.StateTaxRate * 100 | number:3}}%)</dt><dd class="definition-data transfer-dd-grouping clearfix">{{transferData.TweDetails.StateTaxAmount | currency}}</dd></div><dt class=pull-left>Transfer Date</dt><dd class="definition-data clearfix">{{transferData.firstTransferDate | date:\'MM/dd/yyyy\' : \'UTC\'}}</dd><dt class=pull-left data-ng-if=showSecondaryTransferDate>Secondary Transfer Date</dt><dd class="definition-data clearfix" data-ng-if=showSecondaryTransferDate>{{transferData.secondTransferDate | date:\'MM/dd/yyyy\': \'UTC\'}}</dd></div><div data-ng-if="(isFunding && isValidRecurringTrans)" class=transactionHeader><div class=transactionLabel>Recurring Transfer</div><dt class=pull-left>Frequency</dt><dd class="definition-data clearfix">{{transferData.recurringFrequencyItem.value2}}</dd><dt class=pull-left>Amount</dt><dd class="definition-data clearfix">{{transferData.recurringTransferAmount | currency}}</dd><dt class=pull-left>Start Date</dt><dd class="definition-data clearfix">{{transferData.recurringStartDate | date:\'MM/dd/yyyy\' : \'UTC\'}}</dd><dt class=pull-left data-ng-if=showRecurringTrans2ndDate>Second Start Date</dt><dd class="definition-data clearfix" data-ng-if=showRecurringTrans2ndDate>{{transferData.recurringSecondStartDate | date:\'MM/dd/yyyy\' : \'UTC\'}}</dd><dt class=pull-left data-ng-if=transferData.contributionYear>Contribution Year</dt><dd class="definition-data clearfix" data-ng-if=transferData.contributionYear>{{transferData.contributionYear}}</dd></div><dt class=pull-left data-ng-if=transferData.contributionYear>Contribution Year</dt><dd class="definition-data clearfix" data-ng-if=transferData.contributionYear>{{transferData.contributionYear}}</dd></dl><div ng-if="isFundingInitialIncome==true">You can set-up a recurring withdrawal to your new Income account within 1 to 4 days. We\'ll notify you when you login.</div><hg-page-sub-title class="help-block text-center" ng-if=intoSipAccountMessage>{{intoSipAccountMessage}}</hg-page-sub-title><hg-inline-message msg-type=warning data-ng-repeat="warning in transferData.Warnings" raw-html={{warning.Text}}></hg-inline-message></hg-wizard-page>'),a.put("templates/funding/transferConfirmation.html",'<ng-form name=consentForm><hg-wizard-page back=back() next=submitTransfer() mobile=isMobile hideback=isMobile nextdisabled=(consentForm.$invalid) nextlabel={{confirmNextLabel}}><hg-page-title>{{transferConfirmationTitle}}</hg-page-title><dl class="margin-top-10 review-transfer-list" ng-class="{recurring : (isFunding)}"><dt class=pull-left>From</dt><dd class="definition-data clearfix">{{transferData.selectedFromAccount.Nickname}} &nbsp; {{transferData.selectedFromAccount.AccountIdDisplay}}</dd><dt class=pull-left>To</dt><dd class="definition-data clearfix">{{transferData.selectedToAccount.Nickname}} &nbsp; {{transferData.selectedToAccount.AccountIdDisplay}}</dd><div ng-class="{transactionHeader : (isFunding )}"><div data-ng-if=(isFunding) class=transactionLabel>Initial Transfer</div><dt class=pull-left ng-if=showFrequencyLabel()>Frequency</dt><dd class="definition-data clearfix" ng-if=showFrequencyLabel()>{{transferData.selectedFrequency.Name}}</dd><dt class=pull-left data-ng-if=distributionDesc>Distribution</dt><dd class=definition-data data-ng-if=distributionDesc>{{transferData.distributionDesc}}</dd><div data-ng-if=!transferData.TweDetails><dt class=pull-left>Amount</dt><dd class="definition-data clearfix">{{transferData.transferAmount | currency}}</dd></div><div data-ng-if=transferData.TweDetails><dt class=pull-left>Total</dt><dd class="definition-data clearfix">{{transferData.TweDetails.GrossCashAmount | currency}}</dd><dt class=pull-left>Transfer Amounts</dt><dd class="definition-data clearfix">{{transferData.TweDetails.NetCashAmount | currency}}</dd><dt class=pull-left>Tax Withholdings</dt><dd class="definition-data clearfix">{{transferData.TweDetails.Taxes | currency}}</dd><dt class="pull-left transfer-dt-grouping">Federal Taxes ({{transferData.TweDetails.FedTaxRate * 100 | number:0}}%)</dt><dd class="definition-data transfer-dd-grouping clearfix">{{transferData.TweDetails.FedTaxAmount | currency}}</dd><dt class="pull-left transfer-dt-grouping">State Taxes ({{transferData.TweDetails.StateTaxRate * 100 | number:3}}%)</dt><dd class="definition-data transfer-dd-grouping clearfix">{{transferData.TweDetails.StateTaxAmount | currency}}</dd></div><dt class=pull-left>Transfer Date</dt><dd class="definition-data clearfix">{{transferData.firstTransferDate | date:\'MM/dd/yyyy\' : \'UTC\'}}</dd><dt class=pull-left data-ng-if=showSecondaryTransferDate>Secondary Transfer Date</dt><dd class="definition-data clearfix" data-ng-if=showSecondaryTransferDate>{{transferData.secondTransferDate | date:\'MM/dd/yyyy\' : \'UTC\'}}</dd></div><div data-ng-if="(isFunding && isValidRecurringTrans)" class=transactionHeader><div class=transactionLabel>Recurring Transfer</div><dt class=pull-left>Frequency</dt><dd class="definition-data clearfix">{{transferData.recurringFrequencyItem.value2}}</dd><dt class=pull-left>Amount</dt><dd class="definition-data clearfix">{{transferData.recurringTransferAmount | currency}}</dd><dt class=pull-left>Start Date</dt><dd class="definition-data clearfix">{{transferData.recurringStartDate | date:\'MM/dd/yyyy\': \'UTC\'}}</dd><dt class=pull-left data-ng-if=showRecurringTrans2ndDate>Second Start Date</dt><dd class="definition-data clearfix" data-ng-if=showRecurringTrans2ndDate>{{transferData.recurringSecondStartDate | date:\'MM/dd/yyyy\': \'UTC\'}}</dd></div><dt class=pull-left data-ng-if=transferData.contributionYear>Contribution Year</dt><dd class="definition-data clearfix" data-ng-if=transferData.contributionYear>{{transferData.contributionYear}}</dd></dl><div class=form-group data-ng-if=showAgreement><div data-ng-repeat="agrId in transferData.pairDetails.AgreementContentIds" class=margin-bottom-12><hg-local-asset hg-asset-id={{agrId}}></hg-local-asset></div><div class=form-group ng-class="{ \'has-error\' : consentForm.checkbox.$invalid && consentForm.checkbox.$dirty}"><input id=agree type=checkbox ng-model=checkbox name=checkbox class="pull-left checkbox-icon" id=checkbox required><label for=agree class=checkbox><span>I Agree</span></label><p ng-show="consentForm.checkbox.$invalid && !consentForm.checkbox.$pristine" class=help-block>Please select the checkbox.</p></div></div><div class=form-group><hg-inline-message msg-type=error data-ng-repeat="error in transferData.Errors" raw-html={{error.Text}}></hg-inline-message><hg-inline-message msg-type=warning data-ng-repeat="warning in transferData.Warnings" raw-html={{warning.Text}}></hg-inline-message></div></hg-wizard-page></ng-form>'),a.put("templates/funding/transferSetup.html",'<form name=transferForm role=form novalidate><hg-wizard-page back=decline() next=validateTransfer() nextlabel={{setupNextLabel}} mobile=$root.isMobile nextdisabled="(transferForm.$invalid) || (hasInvalidTransactionMessage) || (hasInvalidTransactionCMSID)" hideback=$root.isMobile full=true><div class="col-xs-12 col-sm-12 col-md-10 col-md-offset-1 verification-banner" data-ng-if=showRTMLVerificationMessage><i class="col-xs-1 col-sm-1 col-md-1 verification-banner-icon icon-success"></i><div class="col-xs-10 col-sm-11 col-md-11"><h1>Account Verified</h1><p class=verification-banner-message data-ng-bind=verificationMessage></p></div></div><hg-page-title></hg-page-title><div class="col-xs-12 col-sm-10 col-md-8 col-lg-6 col-sm-offset-1 col-md-offset-2 col-lg-offset-3 ng-scope padding-0"><div class=form-group ng-if=!isIncomeWithdrawalSetup data-ng-class="{ \'has-error\' : transferForm.itemFromAccountId.$invalid && transferForm.itemFromAccountId.$dirty}"><label for=account-selector>Move Money From Account</label><div hg-selector items-list=transferData.itemsList selected-item=transferData.selectedItem disabled-list=transferData.fromExcludedAccountsList title="Please select from account" header-title=Account comp-id=1 style-id=1 filter-item=transferData.selectedToItem id=account-selector disable-selector=isUpdate></div><input type=hidden name=itemFromAccountId data-ng-model=transferData.selectedItem.value1 class=form-control data-ng-required=true data-ng-change="fromDrpChange()"><div class=help-block ng-show="transferForm.itemFromAccountId.$invalid && transferForm.itemFromAccountId.$dirty">Please select from account</div></div><div ng-if=isIncomeWithdrawalSetup><div class=form-group><label>Move Money From Account</label><div class=read-only><p>{{transferData.selectedFromAccount.Nickname}}</p><p>{{transferData.selectedFromAccount.AccountIdDisplay}}</p></div></div></div><div class=form-group ng-show=(transferData.selectedFromAccount)><dl><dt ng-show="(fromCashBalance >= 0)" class=pull-left>Cash Amount:</dt><dd ng-show="(fromCashBalance >= 0)" class="text-right defination-data">{{fromCashBalance| currency}}</dd><dt ng-show="(fromAllBalance >= 0 && transferData.selectedFromAccount.IsHg)" class=pull-left>Total Value:</dt><dd ng-show="(fromAllBalance >= 0 && transferData.selectedFromAccount.IsHg)" class="text-right defination-data">{{fromAllBalance | currency}}</dd><dt ng-show="(fromAllBalance >= 0 && !transferData.selectedFromAccount.IsHg && fromAllBalance > fromCashBalance)" class=pull-left>Cash and Borrowing:</dt><dd ng-show="(fromAllBalance >= 0 && !transferData.selectedFromAccount.IsHg && fromAllBalance > fromCashBalance)" class="text-right defination-data">{{fromAllBalance | currency}}</dd></dl></div><div class=form-group data-ng-class="{ \'has-error\' : transferForm.amount.$invalid && transferForm.amount.$touched}"><label for=amount class=additional-text><span>{{investmentAmountText()}}</span> <input ng-model-options="{ updateOn: \'blur\' }" name=amount class="amount-to-move form-control" id=amount data-ng-model=transferData.transferAmount hg-currency-input placeholder=$0.00 data-ng-required="true"> <span class=text-danger ng-show="transferForm.amount.$invalid && transferForm.amount.$dirty">The amount entered should be numeric and in the format ($XXX,XXX.XX). Please reenter the amount.</span></label></div><div data-ng-if=isFunding><div class=form-group><label>Move Money To Account</label><div class=read-only><p>{{transferData.selectedToAccount.Nickname}}</p><p>{{transferData.selectedToAccount.AccountIdDisplay}}</p></div></div></div><div data-ng-if=!isFunding><div class=form-group data-ng-class="{ \'has-error\' : transferForm.itemToAccountId.$invalid && transferForm.itemToAccountId.$dirty}"><label for=to-account-selector>Move Money To Account</label><div hg-selector items-list=transferData.toItemsList disabled-list=transferData.toExcludedAccountsList selected-item=transferData.selectedToItem title="Please select to account" header-title=Account comp-id=2 style-id=1 filter-item=transferData.selectedItem id=to-account-selector disable-selector=isUpdate></div><input type=hidden name=itemToAccountId data-ng-model=transferData.selectedToItem.value1 class=form-control data-ng-required=true data-ng-change="toDrpChange()"><div class=help-block ng-show="transferForm.itemToAccountId.$invalid && transferForm.itemToAccountId.$dirty">Please select to account</div></div></div><div class=form-group data-ng-if=!isFunding data-ng-class="{ \'has-error\' : transferForm.itemSelectedFrequencyName.$invalid && transferForm.itemSelectedFrequencyName.$dirty}"><label for=frequency>Frequency</label><div id=frequency hg-selector items-list=transferData.frequencyItemsList selected-item=transferData.selectedFrequencyItem header-title=Frequency comp-id=3 style-id=2 disable-selector=isUpdate></div><input type=hidden name=itemSelectedFrequencyName data-ng-model=transferData.selectedFrequencyItem.value1 class=form-control data-ng-required="true"><div class=help-block ng-show="transferForm.itemSelectedFrequencyName.$invalid && transferForm.itemSelectedFrequencyName.$dirty">Please select frequency</div></div><div class="form-group date-picker" data-ng-class="{ \'has-error\' : transferForm.transferDate.$invalid && transferForm.transferDate.$dirty}"><label for=transferDate><span>{{investmentDateText()}}</span></label><p class=input-group><input class="form-control input-md transfer-date" id=transferDate ng-model=transferData.firstTransferDate data-date-format=MM/dd/yyyy data-min-date={{transferData.earliestTransfer}} placeholder=MM/DD/YYYY ng-change=openFirstDP(false) data-autoclose=1 name=date2 bs-datepicker data-bs-show=is1stDpVisible ng-required=true> <span class=input-group-btn><button class="btn btn-default btn-primary btn-icon-calendar" ng-click=openFirstDP(true) ng-blur=openFirstDP(false)><i class=icon-calendar></i><span class=sr-only>Calendar Graphics Icon</span></button></span></p><div class=help-block ng-show="transferForm.transferDate.$invalid && transferForm.transferDate.$dirty">Please enter a valid date in the format MM/DD/YYYY.</div></div><div data-ng-if=showSecondaryTransferDate class="form-group date-picker" data-ng-class="{ \'has-error\' : transferForm.secondTransferDate.$invalid && transferForm.secondTransferDate.$dirty}"><label for=secondTransferDate>Second Date the Money Should Move</label><p class=input-group><input class="form-control input-md second-transfer-date" data-date-format=MM/dd/yyyy id=secondTransferDate ng-model=transferData.secondTransferDate data-min-date={{newMinDate}} ng-change=openSecondDP(false) data-autoclose=1 name=date3 bs-datepicker data-bs-show=is2ndDpVisible ng-required=true data-max-date={{maxDate}} placeholder="MM/DD/YYYY"> <span class=input-group-btn><button class="btn btn-default btn-primary btn-icon-calendar" ng-click=openSecondDP(true) ng-blur=openSecondDP(false)><i class=icon-calendar></i> <span class=sr-only>Calendar Graphics Icon</span></button></span></p><div class=help-block ng-show="transferForm.secondTransferDate.$invalid && transferForm.secondTransferDate.$dirty">Please enter a valid date in the format MM/DD/YYYY.</div></div><div data-ng-if=contributionYear class=form-group data-ng-class="{ \'has-error\' : transferForm.contributionYear.$invalid && transferForm.contributionYear.$dirty}"><label for=contributionYear>Contribution Year</label><select name=contributionYear id=contributionYear class="form-control needsclick" data-ng-model=transferData.contributionYear data-ng-options="contributionyear for contributionyear in transferData.pairDetails.ContributionYears" data-ng-required=true data-ng-selected=transferData.contributionYear></select><div class=help-block ng-show="transferForm.contributionYear.$invalid && transferForm.contributionYear.$dirty">Please select a Contribution year</div></div><div data-ng-if=showRecurring() class=form-group><label for=recurringLaunch class=recurring><span class=optional-lbltext>Recurring Contribution</span><span class=pull-right>(Optional)</span><div class=form-control ng-click=showRecurringTransaction($event)><div class="col-xs-10 col-sm-11 col-md-11 setup-text"><div id=recurringLaunch class=summaryLarge name=recurringTransaction><div data-ng-if=!transferData.recurringTransferAmount>Add a Recurring Contribution</div><div data-ng-if=transferData.recurringTransferAmount>{{transferData.recurringTransferAmount | currency}}</div><div class=summarySmall data-ng-if=transferData.recurringFrequencyItem><span>{{transferData.recurringFrequencyItem.value2}}</span><span data-ng-if=transferData.recurringStartDate>, starting {{transferData.recurringStartDate | date:\'MM/dd/yyyy\'}}</span></div></div></div><div class="pull-right caret col-xs-1 col-sm-1 col-md-1"><i class=icon-arrow-right></i></div></div><div class=missingData ng-show="(isPartialRecurringTrans && !transferData.recurringStartDate)">Please select recurring start date</div></label></div><div data-ng-if=distributionDesc class=form-group><h2>IRA Distribution Information</h2><div>Distribution Type:</div><div>{{transferData.distributionDesc}}</div></div><div data-ng-if=showTwe><label>Distribution Summary</label><div class=distribution-summary-container><div class=row><div class="col-xs-4 col-sm-4 col-md-4 col-lg-4"><div style=display:inline-block data-trigger=hover data-type=info data-title="" data-html=true data-template=templates/funding/netDisabledMessage.html bs-tooltip=tooltip><input id=netRadio type=radio name=tweRadio class=radio data-ng-model=transferData.TweDetails.IsNetAmount data-ng-checked=transferData.TweDetails.IsNetAmount data-ng-value=true data-ng-disabled="transferData.TweDetails.AllowGrossOnly || true"><label class=label-block for=netRadio>Net</label></div></div><div class="col-xs-5 col-sm-5 col-md-5 col-lg-5"><input id=grossRadio type=radio name=tweRadio class=radio data-ng-model=transferData.TweDetails.IsNetAmount ng-checked="transferData.TweDetails.IsNetAmount == false" ng-value="false"><label for=grossRadio class=label-block>Gross</label></div></div><div><div class=row><a href="" ng-click=goToTWEedit() class="col-xs-7 col-sm-7 col-md-7 col-lg-7 dist-header">Federal Tax Rate</a> <a href="" ng-click=goToTWEedit() class="col-xs-5 col-sm-5 col-md-5 col-lg-5 text-right">{{transferData.TweDetails.FedTaxRate * 100 | number:0}}%</a></div><div class=row><div class="col-xs-7 col-sm-7 col-md-7 col-lg-7">Federal Tax Amount</div><div class="col-xs-5 col-sm-5 col-md-5 col-lg-5 text-right">{{transferData.TweDetails.FedTaxAmount | currency}}</div></div></div><div><div class="row margin-top-20"><a href="" ng-click=goToTWEedit() class="col-xs-7 col-sm-7 col-md-7 col-lg-7 dist-header">State Tax Rate</a> <a href="" ng-click=goToTWEedit() class="col-xs-5 col-sm-5 col-md-5 col-lg-5 text-right">{{transferData.TweDetails.StateTaxRate * 100 | number:3 }}%</a></div><div class=row><div class="col-xs-7 col-sm-7 col-md-7 col-lg-7">State Tax Amount</div><div class="col-xs-5 col-sm-5 col-md-5 col-lg-5 text-right">{{transferData.TweDetails.StateTaxAmount | currency}}</div></div></div><div><div class="row margin-top-20"><div class="col-xs-7 col-sm-7 col-md-7 col-lg-7 bold">{{transferData.TweDetails.IsNetAmount ? "Net" : "Gross"}} Cash Amount</div><div class="col-xs-5 col-sm-5 col-md-5 col-lg-5 text-right">{{transferData.TweDetails.TotalAmount | currency}}</div></div><div class=row><div class="col-xs-7 col-sm-7 col-md-7 col-lg-7">Funds Available</div><div class="col-xs-5 col-sm-5 col-md-5 col-lg-5 text-right">{{fromCashBalance | currency}}</div></div></div></div><div class=distribution-summary-footer><div class=row><div class="col-xs-7 col-sm-7 col-md-7 col-lg-7">Transfer Amount</div><div class="col-xs-5 col-sm-5 col-md-5 col-lg-5 text-right">{{transferData.TweDetails.NetCashAmount | currency}}</div></div><div class=row><div class="col-xs-7 col-sm-7 col-md-7 col-lg-7">Taxes</div><div class="col-xs-5 col-sm-5 col-md-5 col-lg-5 text-right">{{transferData.TweDetails.Taxes | currency}}</div></div><div class="row footer-totals"><div class="col-xs-7 col-sm-7 col-md-7 col-lg-7 bold">Total</div><div class="col-xs-5 col-sm-5 col-md-5 col-lg-5 text-right">{{transferData.TweDetails.TotalAmount | currency}}</div></div></div></div><hg-inline-message msg-type=error data-ng-if=hasInvalidTransactionCMSID><hg-local-asset hg-asset-id={{transferData.invalidTransactionMessage}}></hg-local-asset></hg-inline-message><hg-inline-message msg-type=error data-ng-show=hasInvalidTransactionMessage>{{transferData.invalidTransactionMessage}}</hg-inline-message><hg-inline-message msg-type=error data-ng-show="hasErrorMessage && error.Text" data-ng-repeat="error in transferData.Errors" raw-html={{error.Text}}></hg-inline-message></div></hg-wizard-page></form>'),a.put("templates/launch/carousel.html",'<div ng-if=$root.deviceInfo.isNative() class=dark></div><div ng-if=!$root.deviceInfo.isNative()><hg-page><div ng-controller=hgLaunchCtrl style="padding-top: 0px"><div class="footer-nav visible-xs visible-sm"><a ng-click=session.login()>Login</a> <a ui-sref=getStarted>Get Started</a></div></div></hg-page></div>'),a.put("templates/moveMoney/editTransactions.html",'<hg-wizard-page back=cancel() next=newTransfer() nextlabel="New Transfer" mobile=$root.isMobile backlabel=Cancel hideback=$root.isMobile><hg-page-title>Pending Transfers</hg-page-title><div><ul class=list-group><li class="list-group-item list-style" ng-repeat="t in transactions" data-ng-click=transfer(t.TransferId)><div class="row edit_txnList"><div class="col-md-11 col-xs-11"><div class="col-md-7 col-xs-7">A transfer of {{t.Transaction.Amount | currency}} is scheduled<br>{{t.Transaction.TransferDate1 | date : "MM/dd/yyyy"}}</div><div class="col-md-3 col-xs-3">{{t.Transaction.FrequencyDescription}}</div><div class="col-md-1 col-xs-1 pull-right" data-ng-show=t.CanEdit><a href=#>Edit</a></div></div><div class="col-md-1 col-xs-1 edit_txn" data-ng-show=t.CanEdit><span class="icon-arrow-right pull-right"></span></div></div></li></ul></div></hg-wizard-page>'),a.put("templates/moveMoney/moveMoney.html","<div ui-view class={{animateStyle}}></div>"),a.put("templates/moveMoney/moveMoneyLaunch.html",'<hg-wizard-page back=goToDashboard() next=goToFeature() mobile=$root.isMobile nextdisabled="!enableButtons || (selectedFeature.value == 4 && !$root.hgAccountNumber)" backenabled=enableButtons class=moveMoneyLaunch bannertext="Move money to/from your Schwab account" hidenext=$root.allAccountsClosedFlag><div ng-if=$root.equifaxFlag class="alert alert-warning margin-top-20"><p>Your account has been opened. However, we need to take some additional steps to confirm your identity:</p><ul><li>Record your account number.</li><li>Call Schwab at 877-239-1163, Monday-Friday, 9:00 a.m - 7:00 p.m. ET and speak to a Schwab representative who may ask questions to verify your identity.</li></ul></div><div><hg-page-title class=header>{{getMoveMoneyTitle()}}</hg-page-title><hg-page-sub-title class=sub-header>{{getMoveMoneySubTitle()}}</hg-page-sub-title></div><div ng-if=$root.allAccountsClosedFlag class="custom-error-messages row"><div class=col-xs-12><b>{{allAccountsClosedMessage.message1}}</b></div><div class=col-xs-12><b>{{allAccountsClosedMessage.message2}}</b></div></div><form ng-if=!$root.allAccountsClosedFlag role=form><div data-ng-if=showMoveMoneyMethods><div class="radio-group margin-0"><div data-ng-if=show401kRollOver><input class="form-control radio" id=radio4 type=radio name=radio value=4 data-ng-model="selectedFeature.value"><label for=radio4 class=label-block>Transfer from an outside retirement account</label><div data-ng-show="selectedFeature.value == 4" style="padding-left:36px; padding-bottom:36px">{{rollover401kMessage}}</div></div><div data-ng-if=showMoneyTransfer><input class="form-control radio" id=radio3 type=radio name=radio value=3 data-ng-model="selectedFeature.value"><label for=radio3 class=label-block>Transfer to/from an existing account</label><div data-ng-show="selectedFeature.value == 3" style="padding-left:36px; padding-bottom:36px">Use this option to transfer cash between another Schwab account or previously linked external account and your {{portfolioText}} account.</div></div><div><input class="form-control radio" id=radio2 type=radio name=radio value=2 data-ng-model="selectedFeature.value"><label for=radio2 class=label-block>Link an external account</label></div><div data-ng-if=isNative><input class="form-control radio" id=radio1 type=radio name=radio value=1 data-ng-model="selectedFeature.value"><label for=radio1 class=label-block>Make a check deposit</label></div></div></div></form></hg-wizard-page>'),a.put("templates/moveMoney/moveMoneyMessage.html","<hg-wizard-page next=goToGoals() nextlabel=Close mobile=$root.isMobile hideback=true><hg-page-title></hg-page-title><div class=mm_message><h2>We noticed you don’t have an account linked to complete this transfer.<br><br>Please select Add/Withdraw Money from the menu to add a linked account.</h2></div></hg-wizard-page>"),a.put("templates/notificationsCenter/notifications-center.html",'<div data-ng-include="\'templates/app/childheader.html\'"></div><div class=container ng-controller=hg.notificationsCenterMod.notificationsCenterCtrl><div class="page-header text-center"><h2>Notification Center</h2></div></div>'),a.put("templates/rdc/depositCheckConfirmation.html",'<hg-page bannertext="Move money to/from your Schwab account"><hg-page-title>Acknowledgement</hg-page-title><hg-page-sub-title>Thank You! Your account has been funded!</hg-page-sub-title><dl class=margin-top-10><dt class=pull-left>Account Number&nbsp;</dt><dd class="definition-data text-right" ng-if=!isFunding>{{userAccounts.selectedItem.value1}}</dd><dd class="definition-data text-right" ng-if=isFunding>{{transferData.toAccount.RDCAccountIdMasked}}</dd><dt class=pull-left>Amount&nbsp;</dt><dd class="definition-data text-right">{{checkDeposit.Amount | currency}}</dd><dt class=pull-left ng-if="userAccounts.selectedItem.value6==true || transferData.toAccount.RDCIsIra==true">Contribution Year&nbsp;</dt><dd class="definition-data text-right" ng-if="userAccounts.selectedItem.value6==true || transferData.toAccount.RDCIsIra==true">{{contrYearDefault}}</dd><dt class=pull-left>Confirmation#&nbsp;</dt><dd class="definition-data text-right">{{ReferenceNumber}}</dd></dl><hg-button-group fixed=isMobile><hg-button-primary data-ng-click=viewDepositCheck(); ng-enter=viewDepositCheck(); aria-label="Deposit Another Check">Deposit Another Check</hg-button-primary><hg-button-primary data-ng-click=navigateChart(); ng-enter=navigateChart(); aria-label=Done>Done</hg-button-primary></hg-button-group></hg-page>'),
a.put("templates/rdc/launchCheckDeposit.html",'<form name=cdForm class=form novalidate><hg-wizard-page next=getReviewCkDepositData() nextlabel="Review Deposit" mobile=$root.isMobile nextdisabled="((cdForm.$invalid) || (frontThumbnailAvailable!=\'true\') || (backThumbnailAvailable!=\'true\'))" hideback=$root.isMobile bannertext="Move money to/from your Schwab account"><hg-page-title>Check Deposit</hg-page-title><div class=help-block data-ng-show=hasError>{{errorMessage}}</div><div data-ng-if=!isFunding><div class=form-group ng-class="{ \'has-error\' : cdForm.hgAccount.$invalid && cdForm.hgAccount.$dirty}"><div hg-selector items-list="userAccounts.itemsList " selected-item=userAccounts.selectedItem title="Select Account" header-title=Account comp-id=1 style-id=1 ng-required=true><input type=hidden name=hgAccount ng-model=userAccounts.selectedItem.value1 class="form-control"></div><div class=help-block ng-show="cdForm.hgAccount.$invalid && cdForm.hgAccount.$dirty">Please select an account</div></div></div><div data-ng-if=isFunding class=form-group><div class=read-only><p>{{transferData.toAccount.RDCAccountNickName}}</p><div><span>{{transferData.toAccount.RDCAccountIdMasked}}</span> <span class=pull-right>{{transferData.toAccount.RDCBalance | currency}}</span></div><input type=hidden name=hgAccount ng-model=transferData.toAccount.RDCAccountNickName class="form-control"></div></div><div data-ng-if=isFunding class=help-block><div class="alert alert-warning"><hg-local-asset hg-asset-id=SIP-MOBILE-INITIAL-DEPOSIT></hg-local-asset></div></div><div class=margin-bottom-8 ng-if=" userAccounts.selectedItem.value6==true;"><div ng-init=iraContributionTable(userAccounts.selectedItem.value1,userAccounts.selectedItem.value6);><label>Contribution Year</label><div><select name=contryear id=contryear class=form-control ng-change=getSelectedContrValues(contrYearDefault) ng-init="contrYearDefault == null ? contrYearDefault=currentYear : contrYearDefault" ng-model=contrYearDefault ng-options="items.ContrYear as items.ContrYear for items in years"></select></div></div></div><div ng-if=isFunding><div class=form-group ng-if="transferData.toAccount.RDCIsIra==true; "><div ng-init=iraContributionTable(transferData.toAccount.RDCAccountIdMasked,transferData.toAccount.RDCIsIra);><label>Contribution Year</label><div><select name=contryear id=contryear class=form-control ng-change=getSelectedContrValues(contrYearDefault) ng-init="contrYearDefault == null ? contrYearDefault=currentYear : contrYearDefault" ng-model=contrYearDefault ng-options="items.ContrYear as items.ContrYear for items in years"></select></div></div></div></div><div class=form-group ng-show="userAccounts.selectedItem.value6==true || transferData.toAccount.RDCIsIra==true "><div ng-show="contrYearFlag!=1"><div><span>Contribution for selected year</span> <span class=pull-right>{{currentContrSoFarValue | currency}}</span></div><div><span>Remaining Amount</span><div class=pull-right>{{currentContrMaxAmtValue |currency}}</div></div></div><div ng-show="contrYearFlag==1"><div><span>Contribution for selected year</span> <span class=pull-right>{{currentContrSoFarValueFlag | currency}}</span></div><div><span>Remaining Amount</span> <span class=pull-right>{{currentContrMaxAmtValueFlag |currency}}</span></div></div></div><div data-ng-if=!isFunding class=form-group ng-class="{ \'has-error\' : cdForm.amount.$invalid && !cdForm.amount.$pristine}" ng-init=setForm(cdForm);><div><label for=amount>Amount</label></div><input name=amount class=form-control ng-model-options="{ updateOn: \'blur\' }" placeholder=$0.00 ng-model=checkDeposit.Amount id=amount ng-required=true ng-disabled=!(userAccounts.selectedItem.value1) hg-currency-input validate-rdc-amount><div ng-show="userAccounts.selectedItem.value6==false"><p>Your maximum deposit is&nbsp;{{userAccounts.RDCRemainingDepositLimit | currency}}</p></div><div ng-if="userAccounts.endorseFlag == true" class=help-block><div class=icon-warning>Important: The amount of your deposit requires that you endorse the back of your check with your name and account number.</div></div><div class=help-block ng-show="cdForm.amount.$dirty && cdForm.amount.$invalid"><div ng-show="userAccounts.selectedItem.value6==false">The amount exceeds the mobile deposit limit for this account. Please mail your check or visit a branch.</div><div ng-show="userAccounts.selectedItem.value6==true">Please enter a valid amount.</div></div></div><div data-ng-if=isFunding class=form-group ng-class="{ \'has-error\' : cdForm.amount.$invalid && !cdForm.amount.$pristine}" ng-init=setForm(cdForm);><div><label for=amount>Amount</label></div><input name=amount class=form-control ng-model-options="{ updateOn: \'blur\' }" placeholder=$0.00 ng-model=checkDeposit.Amount id=amount ng-required=true hg-currency-input validate-rdc-amount><div ng-show="transferData.toAccount.RDCIsIra==false"><p>Your maximum deposit is&nbsp;{{userAccounts.RDCRemainingDepositLimit | currency}}</p></div><div ng-if="userAccounts.endorseFlag == true" class=help-block><div class=icon-warning>Important: The amount of your deposit requires that you endorse the back of your check with your name and account number.</div></div><div class=help-block ng-show="cdForm.amount.$dirty && cdForm.amount.$invalid"><div ng-show="transferData.toAccount.RDCIsIra!=true">The amount exceeds the mobile deposit limit for this account. Please mail your check or visit a branch.</div><div ng-show="transferData.toAccount.RDCIsIra==true">Please enter a valid amount.</div></div></div><hg-page-row><div class="col-xs-6 padding-0 padding-right-4 form-group" aria-label="Take Photo, Front of Check" role=button><label>Front of Check</label><a class="btn btn-default btn-block btn-noradius btn-camera" ng-disabled=cdForm.amount.$invalid ng-click=invokeFrontCamera() title="Take Photo, Front of Check"><div ng-if="(frontThumbnailAvailable==\'true\')" class="icon-success check_color fa-3x margin-top-10"></div><div ng-if="(frontThumbnailAvailable!==\'true\')"><div class=camera-icon></div><div class=photo-margin><span>Take Photo</span></div></div></a></div><div class="col-xs-6 padding-0 form-group" aria-label="Take Photo, Back of Check" role=button><label>Back of Check</label><a class="btn btn-default btn-block btn-noradius btn-camera" ng-disabled=cdForm.amount.$invalid ng-click=invokeBackCamera() title="Take Photo, Back of Check"><div ng-if="(backThumbnailAvailable==\'true\')" class="icon-success check_color fa-3x margin-top-10"></div><div ng-if="(backThumbnailAvailable!==\'true\')"><div class=camera-icon></div><div class=photo-margin><span>Take Photo</span></div></div></a></div></hg-page-row></hg-wizard-page></form>'),a.put("templates/rdc/rdc.html","<div ui-view class={{animateStyle}}></div>"),a.put("templates/rdc/reviewDepositCheck.html",'<form name=cdForm class=form novalidate><hg-wizard-page mobile=$root.isMobile next=DepositCheckData() nextlabel=Deposit hideback=$root.isMobile back=changeCheckDeposit() backlabel=Change bannertext="Move money to/from your Schwab account"><hg-page-title>Review Check Deposit</hg-page-title><hg-inline-message msg-type=error ng-if=rdcError>{{rdcError}}</hg-inline-message><dl class=margin-top-10><dt class=pull-left>Account Number</dt><dd class="definition-data text-right">{{userAccounts.selectedItem.value1}}</dd><dd class="definition-data text-right" ng-if=isFunding>{{transferData.toAccount.RDCAccountIdMasked}}</dd><dt class=pull-left ng-show="userAccounts.selectedItem.value6==true;">Contribution Year</dt><dd class="definition-data text-right" ng-show="userAccounts.selectedItem.value6==true;"><span ng-if="contrYearDefault!=null">{{contrYearDefault}}</span> <span ng-if="contrYearDefault==null">{{currentYear}}</span></dd><dt class=pull-left ng-show="transferData.toAccount.RDCIsIra==true;">Contribution Year</dt><dd class="definition-data text-right" ng-show="transferData.toAccount.RDCIsIra==true;"><span ng-if="contrYearDefault!=null">{{contrYearDefault}}</span> <span ng-if="contrYearDefault==null">{{currentYear}}</span></dd><dt class=pull-left>Amount</dt><dd class="definition-data text-right">{{checkDeposit.Amount | currency}}</dd></dl><hg-page-row><div class="col-xs-6 padding-0 padding-right-4 form-group"><label>Front Of Check</label><span class="btn btn-default btn-block btn-noradius"><img ng-src="{{frontThumbnail}}"></span></div><div class="col-xs-6 padding-0 form-group"><label>Back Of Check</label><span class="btn btn-default btn-block btn-noradius"><img ng-src="{{backThumbnail}}"></span></div></hg-page-row><div class=help-block><div class="alert alert-warning">Review your deposit information. When the check posts to your account, write "electronically presented" on the top front of the check. Deposits submitted before 4:00 p.m. within the contiguous U.S. will be processed the same business day.</div></div></hg-wizard-page></form>'),a.put("templates/ui/confirmDialog.html",'<div class="overlay-header dk-scheme navyfive text-center modal-dialog-confirmation"><div class=selector-modal-title>Remove File</div><span class=selector-modal-dismiss><a data-ng-click=cancel() href=# ng-enter=cancel() aria-label=Close><i class=icon-close-x></i></a></span></div><div class=modal-body><hg-page-sub-title>Are you sure you want to remove the file ?</hg-page-sub-title><hg-button-group><hg-button data-ng-click=cancel() aria-label=Cancel>Cancel</hg-button><hg-button-primary data-ng-click=ok(selectedItem) aria-label=Remove>Remove</hg-button-primary></hg-button-group></div>'),a.put("templates/ui/contactus.html",'<hg-page full=true><div class="col-xs-12 col-sm-10 col-md-8 col-lg-6 col-sm-offset-1 col-md-offset-2 col-lg-offset-3"><hg-page-title data-ng-if=$root.isSIP class="hidden-xs hidden-sm">Contact Us</hg-page-title><hg-page-title data-ng-if=$root.isIIP>Contact Your Advisor</hg-page-title><div data-ng-if="$root.isIIP && advisorInfo"><dl class=margin-top-10><dt class=pull-left>Firm Name</dt><dd class=definition-data>{{advisorInfo.FirmName}} &nbsp;</dd></dl><dl class=margin-top-10><dt class=pull-left>Address One</dt><dd class=definition-data>{{advisorInfo.AdvisorAddress.AddressLine1}} &nbsp;</dd></dl><dl class=margin-top-10><dt class=pull-left>Address Two</dt><dd class=definition-data>{{advisorInfo.AdvisorAddress.AddressLine2}} &nbsp;</dd></dl><dl class=margin-top-10><dt class=pull-left>City</dt><dd class=definition-data>{{advisorInfo.AdvisorAddress.City}} &nbsp;</dd></dl><dl class=margin-top-10><dt class=pull-left>State</dt><dd class=definition-data>{{advisorInfo.AdvisorAddress.State}} &nbsp;</dd></dl><dl class=margin-top-10><dt class=pull-left>Zip</dt><dd class=definition-data>{{advisorInfo.AdvisorAddress.ZipCode}} &nbsp;</dd></dl><dl class=margin-top-10><dt class=pull-left>Phone</dt><dd class=definition-data>{{$root.customizationInfo.getPhoneDisplay()}} &nbsp;</dd></dl><dl class=margin-top-10><dt class=pull-left>Email</dt><dd class=definition-data>{{advisorInfo.EmailAddress.EMailAddress}} &nbsp;</dd></dl><dl class=margin-top-10><dt class=pull-left>Firm URL</dt><dd class=definition-data>{{advisorInfo.URL}} &nbsp;</dd></dl></div><div data-ng-if="isDesktop && $root.isIIP" class="text-contact hidden-xs"><h3 class=padding-top-11>We can also help resolve your question by screen sharing with you. To do so, please first call us at the number provided, and then <a data-ng-click=startCobrowse()>click here</a> when instructed by the service professional.</h3></div><hg-page-title data-ng-if=$root.isIIP>Contact Schwab</hg-page-title><h2 class="text-left sub-header"><hg-local-asset data-ng-if=$root.isSIP hg-asset-id=SIP-Contact-US-PHONE-HOURS-RETAIL></hg-local-asset><hg-local-asset data-ng-if=$root.isIIP hg-asset-id=SIP-Contact-US-PHONE-HOURS-AS></hg-local-asset></h2><div data-ng-if=isDesktop><div><p data-ng-if=$root.isSIP>Phone <span class=text-bold-17>855-694-5208</span></p><p data-ng-if=$root.isIIP>Phone <span class=text-bold-17>1-877-805-3399</span></p></div></div><div data-ng-if=!isDesktop><div class="text-center button-action-bar"><button class="btn btn-default btn-primary chat"><a href=tel://1-855-694-5208 data-ng-if=$root.isSIP>Call</a> <a href=tel://1-877-805-3399 data-ng-if=$root.isIIP>Call Schwab</a></button></div></div><div data-ng-if=isDesktop class="text-center button-action-bar"><a class="btn btn-default btn-primary chat-button" data-ng-if=$root.isSIP><launch-chat is-user-a-client=true chat-label="" chat-link-title="Start Live Chat" class="chat"></a> <a class="btn btn-default btn-primary chat-button" data-ng-if=$root.isIIP><launch-chat is-user-a-client=true chat-label="" chat-link-title="Start Live Chat With Schwab" class="chat"></a></div><div data-ng-if=$root.isSIP class=text-center><h3 class=padding-top-11>If you need to upload documentation in support of a Schwab Intelligent Portfolios account, please do so here.<br><div class=button-action-bar><a class="btn btn-default chat-button" data-ng-click=goToFileUpload()>Upload a File</a></div></h3></div><div data-ng-if="isDesktop && $root.isSIP" class="text-contact hidden-xs"><h3 class=padding-top-11 data-ng-if=$root.isSIP>We can also help resolve your question by screen sharing with you. To do so, please first call us at 855-694-5208, and then <a data-ng-click=startCobrowse()>click here</a> when instructed by the service professional.</h3></div></div><div data-ng-if=$root.isSIP class="col-xs-12 text-contact-disclosure"><p>Schwab investment professionals are employees of Charles Schwab & Co. Inc.</p></div></hg-page>'),a.put("templates/ui/fileUpload.html",'<div class=dragdrop_hint id=left></div><div class=dragdrop_hint id=right></div><div class=dragdrop_hint id=top></div><div class=dragdrop_hint id=bottom></div><hg-wizard-page full=true back=goBackToContactUs() next=submitFile() nextlabel={{buttonText}} backlabel=Back mobile=isMobile hideback="isMobile || (fileUploadSuccess)" nextdisabled="(!documentAccountSelector.selectedItem) || (!blueimpOptions.hg_enableUploadAction)"><div class=fileupload><div data-ng-show=errorMessage class="row banner fileupload-banner"><div class="col-xs-3 col-sm-2 col-md-2 col-lg-1 banner-icon"><i class=icon-error></i></div><div class="col-xs-9 col-sm-10 col-md-10 col-lg-11 banner-text"><h1>Upload Failed</h1><p>Your file(s) failed to upload.</p><p ng-show=blueimpOptions.hg_overallFileSizeLimitExceeded>File Upload size exceeds 6mb</p></div></div><div data-ng-show=blueimpOptions.hg_overallFileSizeLimitExceeded class="row banner fileupload-banner"><div class="col-xs-3 col-sm-2 col-md-2 col-lg-1 banner-icon"><i class=icon-error></i></div><div class="col-xs-9 col-sm-10 col-md-10 col-lg-11 banner-text"><h1>Cannot Upload</h1><p>The selected file(s) exceed 6 MB.</p></div></div><div data-ng-show=successMessage class="row banner fileupload-banner"><div class="col-xs-3 col-sm-2 col-md-2 col-lg-1 banner-icon"><i class=icon-success></i></div><div class="col-xs-9 col-sm-10 col-md-10 col-lg-11 banner-text"><h1>File Upload Successful</h1><p>Your file(s) have been successfully uploaded.</p></div></div><div><hg-page-title>{{title}}</hg-page-title><h2 class=text-center>Upload a file and associate it with a Schwab Intelligent Portfolios account.</h2></div><div class="col-xs-12 col-sm-10 col-md-8 col-lg-6 col-sm-offset-1 col-md-offset-2 col-lg-offset-3 ng-scope padding-0"><ul class=text-left><li>Ensure images and documents do not contain passwords</li><li>Total uploaded file(s) should not exceed 6 MB</li><li>Permitted file types: bmp, gif, png, tif, tiff, pdf, jpeg, jpg, doc, docx, xls, xlsx</li></ul><h3 class=padding-top-11>Upload to Account</h3><form name=acctDocumentsForm class=form novalidate><div class=form-group ng-class="{ \'has-error\' : acctDocumentsForm.hgAccount.$invalid && acctDocumentsForm.hgAccount.$dirty}"><div hg-selector items-list=documentAccountSelector.itemsList selected-item=documentAccountSelector.selectedItem title="Select an Account" header-title=Account comp-id=1 style-id=1 disable-selector=disableAccountSelector ng-required=true></div></div></form><div hg-file-upload-util data-blueimp-options=blueimpOptions class=margin-bottom-24></div></div></div><div class=clear></div></hg-wizard-page>'),a.put("templates/ui/fileUploadSuccess.html",'<hg-wizard-page next=goBackToContactUs() nextlabel=Done mobile=isMobile hideback="isMobile || isDesktop"><div class="row banner"><div class="col-xs-3 col-sm-2 col-md-2 col-lg-1 banner-icon"><i class=icon-success></i></div><div class="col-xs-8 col-sm-9 col-md-9 col-lg-10 banner-text"><h1>File Uploaded</h1><p>Your file(s) have been successfully uploaded.</p></div></div><div class="col-xs-12 col-sm-10 col-md-8 col-lg-6 col-sm-offset-1 col-md-offset-2 col-lg-offset-3 ng-scope"><hg-page-title>{{title}}</hg-page-title><h2 class=text-center>Upload a file and associate it with a Schwab Intelligent Portfolios account.</h2><ul class=text-left><li>Please ensure that the images don\'t contain passwords.</li><li>Please ensure that the images are black and white with no highlighting.</li><li>Allowable extension types - bmp, gif, png, tif, tiff, pdf, jpeg, jpg, doc, docx, xls, xlsx</li><li>Files should not exceed 3 MB.</li></ul><div hg-file-upload-util data-blueimp-options=blueimpOptions></div><h3 class=padding-top-11>Upload to Account</h3><form name=acctDocumentsForm class=form novalidate><div class=form-group ng-class="{ \'has-error\' : acctDocumentsForm.hgAccount.$invalid && acctDocumentsForm.hgAccount.$dirty}"><div hg-selector items-list=documentAccountSelector.itemsList selected-item=documentAccountSelector.selectedItem title="<Select an account>" header-title=Account comp-id=1 style-id=1 ng-required=true></div></div></form></div></hg-wizard-page>'),a.put("templates/ui/fileUploadTemplate.html",'<div id=fileupload method=POST enctype=multipart/form-data data-file-upload=blueimpOptions data-ng-class="{\'fileupload-processing\': processing() || loadingFiles}"><p data-ng-show="queue.length > 0">File(s)</p><div data-ng-repeat="file in queue" data-ng-class="{\'has-file-error\': (file.error && file.error!=\'Upload Complete\'), \'has-upload-error\':file.hg_upload_error_message }"><table class="fileupload-table table files ng-cloak"><tr class=document-item data-ng-class="{\'processing\': file.$processing()}"><td width=90px data-ng-switch data-on=!!file.thumbnailUrl><div class=preview data-ng-switch-when=true><a data-ng-href={{file.url}} title={{file.name}} download={{file.name}} data-gallery><img data-ng-src={{file.thumbnailUrl}} alt=""></a></div><div class=preview data-ng-switch-default data-file-upload-preview=file></div></td><td class=fileupload-middle-text><p class=name data-ng-switch data-on=!!file.url><span data-ng-switch-when=true data-ng-switch data-on=!!file.thumbnailUrl><a data-ng-switch-when=true data-ng-href={{file.url}} title={{file.name}} download={{file.name}} data-gallery>{{file.name}}</a> <a data-ng-switch-default data-ng-href={{file.url}} title={{file.name}} download={{file.name}}>{{file.name}}</a></span> <span data-ng-switch-default>{{file.name}}</span></p><div class=fileupload-buttonbar><div><span class=fileupload-process></span></div><div data-ng-show=file.hg_upload_status data-ng-class="{in: active()}"><div class="progress active" data-ng-class="{pending: \'in\'} [file.$state()]" data-file-upload-progress=file.$progress()><div class="progress-bar progress-bar-success" data-ng-style="{width: num + \'%\'}"></div></div><p class=progress-text>{{file.hg_upload_status}}</p></div></div></td><td width=20px><div data-ng-show=!blueimpOptions.hg_disable_file_remove><i class=icon-close-x data-ng-click="removeFile(queue, file)" data-ng-hide=!file.$cancel></i></div><div class=icon-success-small data-ng-show="file.hg_upload_status==\'Upload Complete\'"></div></td></tr></table><strong data-ng-show="file.error && file.error!=\'Upload Complete\'" class="error text-danger">{{file.error}}</strong> <strong data-ng-show=file.hg_upload_error_message class="error text-danger">{{file.hg_upload_error_message}}</strong></div><div ng-transclude></div></div><input class=display-none id=customInputFile type=file multiple=multiple><div class=add-file-btn data-ng-click=triggerFileAdd() data-ng-hide="maxFilesAdded || !blueimpOptions.hg_enableFileAddAction" id=addAnotherFile><div class="col-xs-11 col-sm-11 col-md-11">Add File</div><div class="accountselector-chevron col-xs-1 col-sm-1 col-md-1 text-right padding-right-4"><i class=icon-arrow-right></i></div></div><div data-ng-hide="(!showDragDropOutline || maxFilesAdded || !blueimpOptions.hg_enableFileAddAction)" class=dragdrop_box><div data-ng-show=!blueimpOptions.hg_dragdrop_show_active_text>Drag and Drop File(s)</div><div data-ng-show=blueimpOptions.hg_dragdrop_show_active_text>Drop your file(s) to add to upload</div></div>'),a.put("templates/ui/programSelector.html",'<hg-page class=program-selector><hg-page-title>{{model._embedded.pageTitle[0].text1}}</hg-page-title><a class="logout visible-xs" data-ng-click=logout();>Logout</a><div data-ng-repeat="(key,value) in model.items"><div data-ng-repeat="firm in value" class=selector-list><div><img ng-src={{firm.imageUri}} class="logo pull-left" style="width:103px; height: 50px"></div><div class=title><hg-page-sub-title left=true>{{firm.text1}}</hg-page-sub-title></div><ul class=list-group><li class=selector-list-item data-ng-repeat="account in firm._embedded.accounts" data-ng-click=setSelectedAccount(account)><hg-selector-list-item ng-tap text3={{account.text3}} text1={{account.text1}} text2={{account.text2}}></hg-selector-list-item></li></ul></div></div></hg-page>'),a.put("templates/ui/uiView.html","<div id=form-views class={{animateStyle}} ui-view></div>"),a.put("templates/uiComponents/chartToolTip.html",'<div class=chart1tooltipcontent><div><div class=text-left>Portfolio Details <i data-ng-click=cancel() class="icon-close-x pull-right"></i></div></div><div class=text-left>To view sub category details select the chart segments</div></div>'),a.put("templates/uiComponents/customToolTip.html","<div id=chart1tooltip data-html=true data-title-template=templates/uiComponents/chartToolTip.html data-placement=right data-type=info data-trigger=click data-bs-enabled=true data-prefix-event=portfoliocharttooltip bs-tooltip=tooltip></div>"),a.put("templates/uiComponents/defaultModalTemplate.html","<div class=modal tabindex=-1 role=dialog><div class=modal-dialog ng-class=\"{'modal-sm': size == 'sm', 'modal-lg': size == 'lg'}\"><div class=modal-content ng-bind=content></div></div></div>"),a.put("templates/uiComponents/launchChat.html","<div class=launch_chat><div class=launch_chat_lbl>{{chatLabel}} <a data-ng-click=launchChat() ng-enter=launchChat() href=#>{{chatLinkTitle}}</a></div></div>"),a.put("templates/uiComponents/parameterSelector.html",'<div class="parameter-selector-template col-xs-12"><div data-ng-repeat="item in parameterSelector.listItems" data-ng-click="item.isClickable && parameterSelector.navigateToRoute(item.route)"><div class="parameter-selector-item col-xs-12" data-ng-class="{\'isClickable\' : item.isClickable}"><div class=col-xs-11><div>{{item.label1}}</div><div data-ng-if=item.label2><b>{{item.label2}}</b></div></div><div class="col-xs-1 padding-0" data-ng-if=item.isClickable><span class=link-icon-arrow ng-if="$root.deviceInfo.isSmallScreen() && item.isClickable"><i class=icon-arrow-right></i></span></div></div></div></div>'),a.put("templates/user/changePassword.html",'<form name=changePwd class=form novalidate><hg-wizard-page bannertext="Your personal information" back=cancel() backlabel=Cancel next=changePassword() nextlabel=Save nextdisabled=changePwd.$invalid mobile=$root.isMobile hideback=$root.isMobile iippagedisclosure="Your Contact Information and updates to it will be made available to your Advisor."><div data-ng-include="\'templates/app/childheader.html\'"></div><hg-page-title>Update Password</hg-page-title><div class=help-block data-ng-show=hasError>{{errorMessage}}</div><div class=help-block data-ng-show=successMessage>{{successMessage}}</div><div class=help-block data-ng-repeat="error in credentialData.Errors"><div>{{error.Message}}</div></div><hg-page-sub-title><hg-local-asset hg-asset-id=SIP-SELFSERVICE-UPDATE-PASSWORD-INSTR-RETAIL></hg-local-asset></hg-page-sub-title><div class=form-group data-ng-class="{ \'has-error\' : (changePwd.currPwd.$error.required && changePwd.currPwd.$touched)}"><label for=currPwd>Current Password</label><div><input type=password name=currPwd id=currPwd data-ng-model=credentialData.SecurityData.OldAnswer class=form-control ng-model-options="{ updateOn: \'blur\' }" data-ng-required="true"></div><div class=help-block ng-show="changePwd.currPwd.$error.required && changePwd.currPwd.$touched">Please enter current password</div></div><div class=form-group data-ng-class="{ \'has-error\' : (changePwd.newPwd.$error.required && changePwd.newPwd.$touched) }"><label for=newPwd>New Password</label><div><input type=password name=newPwd id=newPwd data-ng-model=credentialData.SecurityData.Answer class=form-control ng-model-options="{ updateOn: \'blur\' }" data-ng-required="true"></div><div class=help-block ng-show="changePwd.newPwd.$error.required && changePwd.newPwd.$touched">Please enter new password</div></div><div class=form-group data-ng-class="{ \'has-error\' : (changePwd.repeatPwd.$error.required && changePwd.repeatPwd.$touched)}"><label for=repeatPwd>Repeat Password</label><div><input type=password name=repeatPwd id=repeatPwd data-ng-model=credentialData.SecurityData.RepeatAnswer class=form-control data-ng-required="true"></div><div class=help-block ng-show="changePwd.repeatPwd.$error.required && changePwd.repeatPwd.$touched">Please re-enter new password</div></div><div><hg-local-asset hg-asset-id={{disclaimerAsset}}></hg-local-asset></div></hg-wizard-page></form>'),a.put("templates/user/changeSecurityQA.html",'<form name=changeSecurityQA class=form novalidate><hg-wizard-page bannertext="Your personal information" back=cancel() backlabel=Cancel next=changeSecurityQAData() nextlabel=Save nextdisabled=changeSecurityQA.$invalid mobile=$root.isMobile hideback=$root.isMobile iippagedisclosure="Your Contact Information and updates to it will be made available to your Advisor."><div data-ng-include="\'templates/app/childheader.html\'"></div><hg-page-title>Update Security Question and Answer</hg-page-title><div class=help-block data-ng-show=hasError>{{errorMessage}}</div><div class=help-block data-ng-show=successMessage>{{successMessage}}</div><div class=help-block data-ng-repeat="error in credentialData.Errors"><div>{{error.Message}}</div></div><hg-page-sub-title><div><hg-local-asset hg-asset-id=SIP-SELFSERVICE-UPDATE-SECURITYQA-INSTR-RETAIL></hg-local-asset></div></hg-page-sub-title><div class=form-group data-ng-class="{ \'has-error\' : changeSecurityQA.question.$invalid && !changeSecurityQA.question.$pristine }"><label for=question>Security Question</label><div id=question hg-selector items-list=credentialData.itemsList selected-item=credentialData.selectedItem header-title=Question comp-id=1 style-id=2></div><input type=hidden name=SelectedQuestion data-ng-model=credentialData.selectedItem class=form-control data-ng-required="true"><div class=help-block ng-show="changeSecurityQA.SelectedQuestion.$invalid && changeSecurityQA.SelectedQuestion.$dirty">Please select a question</div></div><div class=form-group data-ng-class="{ \'has-error\' : (changeSecurityQA.answer.$error.required && changeSecurityQA.answer.$touched) ||\r\n                 (changeSecurityQA.answer.$error.minlength && changeSecurityQA.answer.$touched) ||\r\n                (changeSecurityQA.answer.$error.maxlength && changeSecurityQA.answer.$touched)}"><label for=answer>Answer</label><div class=sec_answer><input type=password name=answer id=answer maxlength={{answerMaxLength}} data-ng-model=credentialData.SecurityQaData.Answer class=form-control ng-model-options="{ updateOn: \'blur\' }" data-ng-required=true data-ng-minlength=answerMinLength data-ng-maxlength="answerMaxLength"></div><div class=help-block ng-show="changeSecurityQA.answer.$error.required && changeSecurityQA.answer.$touched">Please enter an answer</div><div class=help-block ng-show="changeSecurityQA.answer.$error.minlength && changeSecurityQA.answer.$touched">The answer to your security question must be between {{answerMinLength}} and {{answerMaxLength}} characters. Please try again.</div><div class=help-block ng-show="changeSecurityQA.answer.$error.maxlength && changeSecurityQA.answer.$touched">answer should be less than {{answerMaxLength}} chars</div></div><div class=form-group><hg-local-asset hg-asset-id=SIP-SELFSERVICE-UPDATE-SECURITYQA-LIMIT-RETAIL></hg-local-asset></div><div class=form-group data-ng-class="{ \'has-error\' : (changeSecurityQA.repeatAnswer.$error.required && changeSecurityQA.repeatAnswer.$touched) ||\r\n                 (changeSecurityQA.repeatAnswer.$error.minlength && changeSecurityQA.repeatAnswer.$touched) ||\r\n                 (changeSecurityQA.repeatAnswer.$error.maxlength && changeSecurityQA.repeatAnswer.$touched)}"><label for=repeatAnswer>Repeat Answer</label><div class=sec_repeatAnswer><input type=password name=repeatAnswer id=repeatAnswer maxlength={{answerMaxLength}} data-ng-model=credentialData.SecurityQaData.RepeatAnswer class=form-control data-ng-required=true data-ng-minlength=answerMinLength data-ng-maxlength="answerMaxLength"></div><div class=help-block ng-show="changeSecurityQA.repeatAnswer.$error.required && changeSecurityQA.repeatAnswer.$touched">Please re-enter answer</div><div class=help-block ng-show="changeSecurityQA.repeatAnswer.$error.minlength && changeSecurityQA.repeatAnswer.$touched">The answer to your security question must be between {{answerMinLength}} and {{answerMaxLength}} characters. Please try again.</div><div class=help-block ng-show="changeSecurityQA.repeatAnswer.$error.maxlength && changeSecurityQA.repeatAnswer.$touched">answer should be less than {{answerMaxLength}} chars</div></div><div><hg-local-asset hg-asset-id=SIP-SELFSERVICE-UPDATE-SECURITYQA-DISCL-RETAIL></hg-local-asset></div></hg-wizard-page></form>'),a.put("templates/user/editaddress.html",'<form name=addressForm class=form novalidate><hg-wizard-page bannertext="Your personal information" back=cancel() backlabel=Cancel next=saveAddress() nextlabel=Save nextdisabled=addressForm.$invalid mobile=$root.isMobile hideback=$root.isMobile><hg-page-title>Change Address</hg-page-title><hg-page-sub-title><hg-local-asset class=text-center hg-asset-id=SIP-SELFSERVICE-UPDATE-ADDRESS-INSTR-RETAIL></hg-local-asset></hg-page-sub-title><div class=help-block data-ng-show=hasError>{{errorMessage}}</div><div class=form-group ng-class="{ \'has-error\' : addressForm.home.$invalid && !addressForm.home.$pristine }"><label for=home>Address Line 1</label><input name=home class=form-control id=home ng-model=selectedAddressToEdit.Address.StreetAddressLine1 hg-validate-printable-ascii hg-validate-address ng-model-options="{ updateOn: \'blur\' }" ng-minlength=1 ng-maxlength=45 required><div class=help-block ng-show="!addressForm.home.$pristine && addressForm.home.$invalid"><span ng-show="addressForm.home.$error.required || addressForm.home.$error.pattern || addressForm.home.$error.hgValidateAddress || addressForm.home.$error.maxlength">Please enter a valid address.</span> <span ng-show=addressForm.home.$error.pobox>We cannot accept P.O. Boxes as a valid legal address.</span></div></div><div class=form-group ng-class="{ \'has-error\' : addressForm.AddressLine2.$invalid && !addressForm.AddressLine2.$pristine }"><label for=AddressLine2>Address Line 2</label><input name=AddressLine2 class=form-control id=AddressLine2 ng-model=selectedAddressToEdit.Address.StreetAddressLine2 hg-validate-printable-ascii hg-validate-address ng-model-options="{ updateOn: \'blur\' }" ng-minlength=1 ng-maxlength=30><div class=help-block ng-show="!addressForm.AddressLine2.$pristine && addressForm.AddressLine2.$invalid"><span ng-show="addressForm.AddressLine2.$error.pattern || addressForm.AddressLine2.$error.hgValidateAddress || addressForm.AddressLine2.$error.maxlength">Please enter a valid address.</span> <span ng-show=addressForm.AddressLine2.$error.pobox>We cannot accept P.O. Boxes as a valid legal address.</span></div></div><div class=form-group ng-class="{ \'has-error\' : addressForm.city.$invalid && !addressForm.city.$pristine }"><label for=city>City</label><input name=city class=form-control id=city ng-model=selectedAddressToEdit.Address.City required><p ng-show="addressForm.city.$invalid && !addressForm.city.$pristine" class=help-block>City is required.</p></div><div class=form-group ng-class="{ \'has-error\' : addressForm.state.$invalid && !addressForm.state.$pristine && addressForm.state.$dirty }"><label for=state>State</label><select name=state class=form-control id=state ng-model=selectedAddressToEdit.Address.State data-ng-required=true ng-model-options="{ updateOn: \'blur\' }" ng-options="key as value for (key , value) in  StateList"><option value="">Select State</option></select><div class=help-block ng-show="!addressForm.state.$pristine && addressForm.state.$invalid && addressForm.state.$dirty"><span ng-show="addressForm.state.$error.required || addressForm.state.$error.pattern || addressForm.state.$dirty">Please select a state.</span></div></div><div class=form-group ng-class="{ \'has-error\' : addressForm.zip.$invalid && !addressForm.zip.$pristine }"><label for=zip>Zip Code</label><input name=zip class=form-control validate-zip-code ng-maxlength=5 id=zip ng-model=selectedAddressToEdit.Address.PostalCd required><p ng-show="addressForm.zip.$invalid && !addressForm.zip.$pristine" class=help-block>Please Enter Valid Zip code</p></div><hg-local-asset hg-asset-id=SIP-SELFSERVICE-UPDATE-ADDRESS-DISCL-RETAIL></hg-local-asset></hg-wizard-page></form>'),
a.put("templates/user/editemail.html",'<form name=emailForm class=form novalidate><hg-wizard-page bannertext="Your personal information" back=cancel() backlabel=Cancel next=saveEmail() nextlabel=Save nextdisabled=emailForm.$invalid mobile=$root.isMobile hideback=$root.isMobile><hg-page-title>Change Email</hg-page-title><hg-page-sub-title><hg-local-asset hg-asset-id=SIP-SELFSERVICE-UPDATE-EMAIL-INSTR-RETAIL></hg-local-asset></hg-page-sub-title><div class=help-block data-ng-show=hasError>{{errorMessage}}</div><div class=form-group data-ng-class="{ \'has-error\' : (emailForm.email.$error.required && emailForm.email.$touched) || emailForm.email.$error.validateEmailAddress}"><label for=email>Email Address</label><div><input name=email id=email data-ng-model=selectedEmailToEdit.EmailAddress.PrimEmail class=form-control ng-model-options="{ updateOn: \'blur\' }" data-ng-required=true validate-email-address></div><div class=help-block ng-show="emailForm.email.$error.required && emailForm.email.$touched">Please enter Email</div><div class=help-block ng-show=emailForm.email.$error.validateEmailAddress>Please enter a valid Email.</div></div><hg-local-asset hg-asset-id=SIP-SELFSERVICE-UPDATE-EMAIL-DISCL-RETAIL></hg-local-asset></hg-wizard-page></form>'),a.put("templates/user/editphone.html",'<form name=phoneForm class=form novalidate><hg-wizard-page bannertext="Your personal information" back=cancel() backlabel=Cancel next=savePhone() nextlabel=Save nextdisabled=phoneForm.$invalid mobile=$root.isMobile hideback=$root.isMobile><hg-page-title><span data-ng-if=selectedPhoneToEdit.TenDigits>Change</span> <span data-ng-if=!selectedPhoneToEdit.TenDigits>Add</span> Phone</hg-page-title><hg-page-sub-title><hg-local-asset hg-asset-id=SIP-SELFSERVICE-UPDATE-PHONE-NUMBER-INSTR-RETAIL></hg-local-asset></hg-page-sub-title><div class=help-block data-ng-show=hasError>{{errorMessage}}</div><div class=form-group><label for=phonetype>Phone Type</label><div><select name=phonetype id=phonetype class=form-control data-ng-model=selectedPhoneToEdit.phoneType data-ng-options="phoneType.Desc for phoneType in userInfo.PhoneTypes | excludeListOfItemsFromArrayFilter:filterPhoneTypeList"></select></div><div class=help-block ng-show="phoneForm.phonetype.$invalid && phoneForm.phonetype.$dirty">Please select a phone type</div></div><div class=form-group data-ng-class="{ \'has-error\' : (phoneForm.phonenumber.$error.required && phoneForm.phonenumber.$touched) ||phoneForm.phonenumber.$error.validatePhoneNumber }"><label for=phonenumber>Phone</label><div><input name=phonenumber id=phonenumber data-ng-model=selectedPhoneToEdit.TenDigits class=form-control ng-model-options="{ updateOn: \'default blur\', debounce: {\'default\': 500, \'blur\': 0} }" data-ng-required=true placeholder=xxx-xxx-xxxx validate-phone-number></div><div class=help-block ng-show="phoneForm.phonenumber.$error.required && phoneForm.phonenumber.$touched">Please enter phone number</div><div class=help-block ng-show=phoneForm.phonenumber.$error.validatePhoneNumber>Please check the format of your phone number.</div></div><hg-local-asset hg-asset-id=SIP-SELFSERVICE-UPDATE-PHONE-NUMBER-DISCL-RETAIL></hg-local-asset></hg-wizard-page></form>'),a.put("templates/user/editspouse.html",'<form name=householdForm class=form novalidate ng-init=initHouseholdForm()><hg-wizard-page back=cancelUpdateSpouse() backlabel=Cancel next=saveSpouse() nextlabel=Save nextdisabled=householdForm.$invalid mobile=$root.isMobile hideback=$root.isMobile><hg-page-title>Update Spouse Information</hg-page-title><div class=ssnsection data-ng-class="{ \'has-error\' : householdForm.TaxId.$invalid && !householdForm.TaxId.$pristine}"><label for=TaxId></label><div class=LblTxt>Spouse\'s Social Security Number</div><input class=form-control id=TaxId name=TaxId data-ng-maxlength=12 data-ng-model-options="{ updateOn: \'blur\' }" data-ng-model=accountSearchData.TaxId validate-ssn mask=ssn required><div class=help-block ng-show="!householdForm.TaxId.$pristine && householdForm.TaxId.$invalid"><span ng-show="(householdForm.TaxId.$error.validateSsn || householdForm.TaxId.$error.maxlength)">The social security number you\'ve entered does not contain the correct number of digits. Please verify your entry and try again.</span></div></div><div class=dobsection data-ng-class="{ \'has-error\' : (householdForm.DateOfBirth.$error.validateTodayDate)}"><label for=DateOfBirth></label><div class=LblTxt>Date of Birth</div><input name=DateOfBirth class=form-control id=DateOfBirth data-ng-model=accountSearchData.DateOfBirth data-ng-model-options="{ updateOn: \'blur\' }" placeholder=mm/dd/yyyy validate-today-date mask=dob required><div class=help-block ng-show="!householdForm.DateOfBirth.$pristine && householdForm.DateOfBirth.$invalid"><span ng-show=householdForm.DateOfBirth.$error.validateTodayDate>The date of birth you\'ve entered does not follow the correct format (EG: MM/DD/YYYY). Please verify your entry and try again.</span></div></div><div class=lastnamesection data-ng-class="{ \'has-error\' : householdForm.LastName.$invalid && !householdForm.LastName.$pristine }"><label for=LastName></label><div class=LblTxt>Last Name</div><input class=form-control id=LastName name=LastName data-ng-model=accountSearchData.LastName validate-name required><div class=help-block ng-show="!householdForm.lastName.$pristine && householdForm.lastName.$invalid"><span ng-show="householdForm.lastName.$error.required || householdForm.lastName.$error.validateName">Please enter a valid spouse last name.</span></div></div><br><div><hg-local-asset hg-asset-id={{disclaimerAsset}}></hg-local-asset></div><br><br></hg-wizard-page></form>'),a.put("templates/user/managecontactinfo.html",'<hg-page bannertext="Your personal information" iippagedisclosure="Your Contact Information and updates to it will be made available to your Advisor."><hg-page-title>{{subTitle}}</hg-page-title><div class="row form-group"><div class="col-xs-10 col-sm-11 col-md-11"><strong>Email</strong><p>{{userInfoForDisplay.PrimaryAcct.EmailAddress.PrimEmail}}</p></div><div class="col-xs-2 col-sm-1 col-md-1" data-ng-class="userInfoForDisplay.PrimaryAcct.EmailAddress.PrimEmail ?\'up_email_edit\':\'up_email_edit_empty\'"><span data-ng-if=userInfoForDisplay.PrimaryAcct.IsAuthorizedToChangeEmailAddress><a data-ng-click=navigateToEditEmail(userInfoForDisplay.PrimaryAcct.AcctId)><span data-ng-if=userInfoForDisplay.PrimaryAcct.EmailAddress.PrimEmail>Edit</span> <span data-ng-if=!userInfoForDisplay.PrimaryAcct.EmailAddress.PrimEmail>Add</span></a></span></div></div><div class=row><div class="col-xs-10 col-sm-11 col-md-11"><strong>Legal Address</strong><address>{{userInfoForDisplay.PrimaryAcct.Address.StreetAddressLine1}} {{userInfoForDisplay.PrimaryAcct.Address.StreetAddressLine2}} {{userInfoForDisplay.PrimaryAcct.Address.City}} {{userInfoForDisplay.PrimaryAcct.Address.State}} {{userInfoForDisplay.PrimaryAcct.Address.PostalCd}}</address></div><div class="col-xs-2 col-sm-1 col-md-1" data-ng-class="userInfoForDisplay.PrimaryAcct.Address ?\'up_address_edit\':\'up_address_edit_empty\'"><span data-ng-if=userInfoForDisplay.PrimaryAcct.IsAuthorizedToChangeAddress><a data-ng-click=navigateToEditAddress(userInfoForDisplay.PrimaryAcct.AcctId)><span data-ng-if=userInfoForDisplay.PrimaryAcct.Address>Edit</span> <span data-ng-if=!userInfoForDisplay.PrimaryAcct.Address>Add</span></a></span></div></div><div class=row data-ng-repeat="phone in userInfoForDisplay.PhoneList"><div class="col-xs-10 col-sm-11 col-md-11"><strong>{{phone.phoneType.Desc}}</strong><p>{{phone.Formatted}}</p></div><div class="col-xs-2 col-sm-1 col-md-1"><a data-ng-click=navigateToEditPhone(phone.Type)>Edit</a></div></div><div class=row data-ng-click=navigateToEditPhone() data-ng-if=showPhoneAdd><div class="col-xs-10 col-sm-11 col-md-11"><span>Add Additional Phone Numbers<br><sup>optional</sup></span></div><div class="col-xs-2 col-sm-1 col-md-1"><a>Add</a></div></div><div data-ng-repeat="acctContactInfo in userInfoForDisplay.AcctAddrEmailList"><h3 class="text-bold-17 text-center">{{acctContactInfo.FriendlyName}} &nbsp; {{acctContactInfo.AcctIdDisplay}}</h3><div class="row form-group"><div class="col-xs-10 col-sm-11 col-md-11"><strong>Account Email</strong><p>{{acctContactInfo.EmailAddress.PrimEmail}}</p></div><div class="col-xs-2 col-sm-1 col-md-1" data-ng-class="acctContactInfo.EmailAddress.PrimEmail ?\'up_email_edit\':\'up_email_edit_empty\'"><span data-ng-if=acctContactInfo.IsAuthorizedToChangeEmailAddress><a data-ng-click=navigateToEditEmail(acctContactInfo.AcctId)><span data-ng-if=acctContactInfo.EmailAddress.PrimEmail>Edit</span> <span data-ng-if=!acctContactInfo.EmailAddress.PrimEmail>Add</span></a></span></div></div><div class=row><div class="col-xs-10 col-sm-11 col-md-11"><strong>Account Address</strong><address>{{acctContactInfo.Address.StreetAddressLine1}} {{acctContactInfo.Address.StreetAddressLine2}} {{acctContactInfo.Address.City}} {{acctContactInfo.Address.State}} {{acctContactInfo.Address.PostalCd}}</address></div><div class="col-xs-2 col-sm-1 col-md-1" data-ng-class="acctContactInfo.Address ?\'up_address_edit\':\'up_address_edit_empty\'"><span data-ng-if=acctContactInfo.IsAuthorizedToChangeAddress><a data-ng-click=navigateToEditAddress(acctContactInfo.AcctId)><span data-ng-if=acctContactInfo.Address>Edit</span> <span data-ng-if=!acctContactInfo.Address>Add</span></a></span></div></div></div></hg-page>'),a.put("templates/user/managehouseholdinfo.html",'<hg-page bannertext="Your personal information" ng-init="hasError = false" iippagedisclosure="Your Contact Information and updates to it will be made available to your Advisor."><hg-page-title>Household Info</hg-page-title><div class=help-block data-ng-show=hasError>{{errorMessage}}</div><div class="row form-group" data-ng-if=!isAffiliated><div class="col-xs-10 col-sm-11 col-md-11"><span>Add Spouse Information<br><sub>Optional</sub></span></div><div class="col-xs-2 col-sm-1 col-md-1"><a data-ng-click=navigateToEditSpouse()>Add</a></div></div><div class="row form-group" data-ng-if=isAffiliated><div class="col-xs-10 col-sm-11 col-md-11"><span>Spouse Information</span></div><div class="col-xs-2 col-sm-1 col-md-1"><a data-ng-click=navigateToEditSpouse()>Edit</a> <a data-ng-click=deleteSpouse()>Delete</a></div></div><hg-local-asset hg-asset-id={{disclaimerAsset}}></hg-local-asset></hg-page>'),a.put("templates/user/manageprofile.html",'<hg-page bannertext="Your personal information" iippagedisclosure="Your Contact Information and updates to it will be made available to your Advisor."><hg-page-title>Personal Information</hg-page-title><div role=child><ul class=list-group><li class="list-group-item list-style" data-ng-click=manageContactInfo();>Contact Info <span class="icon-arrow-right pull-right"></span></li><li class="list-group-item list-style" data-ng-click=manageSecurityInfo()>Security Info <span class="icon-arrow-right pull-right"></span></li><li class="list-group-item list-style" data-ng-click=manageHouseholdInfo()>Household Info <span class="icon-arrow-right pull-right"></span></li></ul></div></hg-page>'),a.put("templates/user/managesecurityinfo.html",'<hg-page bannertext="Your personal information" iippagedisclosure="Your Contact Information and updates to it will be made available to your Advisor."><hg-page-title>Security Info</hg-page-title><div role=child><ul class=list-group><li class="list-group-item list-style" ui-sref=changePassword>Change Password <span class="icon-arrow-right pull-right"></span></li><li class="list-group-item list-style" ui-sref=changeSecurityQA>Change Security Q/A <span class="icon-arrow-right pull-right"></span></li></ul></div></hg-page>'),a.put("templates/user/userProfile.html","<div id=up-form-views ui-view></div>"),a.put("templates/widget/accountSelectorWidget.html",'<div data-ng-switch=styleId><div data-ng-switch-when=1><div class="row accountselector" data-ng-if=selectedItem data-ng-click=onTapped()><div class="col-xs-11 col-sm-11 col-md-11 padding-right-0"><div class=accountselector-data>{{selectedItem.value2}}</div><div class=padding-top-3><span class=accountselector-data>{{selectedItem.value9}}</span> <span data-ng-hide=hideBalance class=pull-right>{{selectedItem.value3 | hgCurrency}}</span></div></div><div class="accountselector-chevron col-xs-1 col-sm-1 col-md-1 text-right padding-right-4 padding-top-11"><i class=icon-arrow-right></i></div></div><div class="row accountselector" data-ng-if=!selectedItem data-ng-click=onTapped()><div class="col-xs-11 col-sm-11 col-md-11"><span>{{title}}</span></div><div class="accountselector-chevron col-xs-1 col-sm-1 col-md-1 text-right padding-right-4"><i class=icon-arrow-right></i></div></div></div><div data-ng-switch-when=2><div class="row frequencyselector" data-ng-if=selectedItem data-ng-click=onTapped()><div class="col-xs-11 col-sm-11 col-md-11 padding-right-0"><div class=frequencyselector-data>{{selectedItem.value2}}</div></div><div class="frequencyselector-chevron col-xs-1 col-sm-1 col-md-1 text-right padding-right-4"><i class=icon-arrow-right></i></div></div><div class="row frequencyselector" data-ng-if=!selectedItem data-ng-click=onTapped()><div class="col-xs-11 col-sm-11 col-md-11"><span>{{title}}</span></div><div class="accountselector-chevron col-xs-1 col-sm-1 col-md-1 text-right padding-right-4"><i class=icon-arrow-right></i></div></div></div></div>'),a.put("templates/widget/checkListWidget.html",'<ul class="checkbox-list padding-0"><li ng-repeat="item in itemslist "><div class=TLH-checkbox><input type=checkbox id={{item.id}} name={{item.name}} ng-checked=item.selected ng-model=item.selected ng-change=selection($index,item.selected) ng-disabled="shouldBeDisabled(!item.selected)"><label for={{item.id}} class=checkbox>{{item.name}}</label></div></li></ul>');a.put("templates/widget/contribution.html",'<div class=contribution-widget><form name=contributionForm role=form novalidate><div class=widget-bordered-container><div data-ng-if=$root.deviceInfo.isLargeScreen() class=widget-header>{{contribution.slider.title}} <i ng-show=contribution.slider.iconToolTip class=icon-info-circle style="padding: 5px" data-title={{contribution.slider.iconToolTip.info}} data-html=true data-template=templates/widget/disclosureToolTip.html data-placement=bottom data-type=info data-trigger=click bs-tooltip=tooltip></i></div><div data-ng-if=$root.deviceInfo.isSmallScreen() class=widget-header>{{contribution.slider.title}} <i ng-show=contribution.slider.iconToolTip class=icon-info-circle data-ng-click=contribution.toolTipNav()></i></div><div class="widget-body container-fluid"><div class=row><div class=col-xs-6><input id=amount class=contribution-input ng-model-options="{ updateOn: \'blur\' }" name=amount maxvalue={{contribution.maxValidLength}} placeholder=$0 minvalue=0 data-ng-model=contribution.amount hg-currency-input hg-currency-return-numeric=true hg-currency-rounding-required=true data-ng-required=false data-ng-change=contribution.updateSlider() ng-enter="contribution.updateSlider(contribution.slider.title)"></div></div><div class="contirbution-Slider-Container row" ng-class="(contribution.amount > contribution.slider.slider.maxValue) ? \'showPlus\' : \'\'"><div class=col-xs-12><slider ng-model=contribution.slider.slider.value on-stop-slide=contribution.updateInput(); min={{contribution.slider.slider.minValue}} max={{contribution.slider.slider.maxValue}} step={{contribution.slider.slider.incrementValue}} value=0 tooltip=show></slider></div></div><div class=row><div class="col-xs-6 silver-two-text"><b>{{contribution.slider.slider.minLabel}}</b></div><div class="col-xs-6 text-right silver-two-text"><b>{{contribution.slider.slider.maxLabel}}</b></div></div><div class="row margin-top-20"><div ng-hide="contributionForm.amount.$invalid && contributionForm.amount.$dirty" ng-if="(state === 2 || state === 3) && contribution.recommendationFlag!=true"><div class=col-xs-12>{{contribution.label1}}</div></div><div class="alert alert-danger" role=alert ng-show="contributionForm.amount.$invalid && contributionForm.amount.$dirty">{{contribution.invalidMessage}}</div></div><div class=button-action-bar data-ng-if=$root.deviceInfo.isLargeScreen()><hg-button-primary data-ng-click=contribution.launchMoveMoney()>{{contribution.slider.buttonText}}</hg-button-primary></div></div></div></form></div>');a.put("templates/widget/disclosureText.html",'<div><p ng-if="goaldetails.type == 1"><span ng-if="goaldetails.title.label2 == \'Setup\'"><hg-remote-asset hg-asset-id="SIP-GOALS-DISCLOSURES-SAVINGS-SETUP"></span> <span ng-if="goaldetails.title.label2 == \'On Target\'"><hg-remote-asset hg-asset-id="SIP-GOALS-DISCLOSURES-SAVINGS-ON-TARGET"></span> <span ng-if="goaldetails.title.label2 == \'Off Target\'"><hg-remote-asset hg-asset-id="SIP-GOALS-DISCLOSURES-SAVINGS-OFF-TARGET"></span> <span ng-if="goaldetails.title.label2 == \'At Risk\'"><hg-remote-asset hg-asset-id="SIP-GOALS-DISCLOSURES-SAVINGS-AT-RISK"></span> <span ng-if="goaldetails.title.label2 == \'Accomplished\'"><hg-remote-asset hg-asset-id="SIP-GOALS-DISCLOSURES-SAVINGS-ACCOMPLISHED"></span> <span ng-if="goaldetails.title.label2 == \'Not Accomplished\'"><hg-remote-asset hg-asset-id="SIP-GOALS-DISCLOSURES-SAVINGS-NOT-ACCOMPLISHED"></span></p><p ng-if="goaldetails.type == 2"><span ng-if="goaldetails.title.label2 == \'Setup\'"><hg-remote-asset hg-asset-id="SIP-GOALS-DISCLOSURES-INCOME-SETUP"></span> <span ng-if="goaldetails.title.label2 == \'On Target\'"><hg-remote-asset hg-asset-id="SIP-GOALS-DISCLOSURES-INCOME-ON-TARGET"></span> <span ng-if="goaldetails.title.label2 == \'Off Target\'"><hg-remote-asset hg-asset-id="SIP-GOALS-DISCLOSURES-INCOME-OFF-TARGET"></span> <span ng-if="goaldetails.title.label2 == \'At Risk\'"><hg-remote-asset hg-asset-id="SIP-GOALS-DISCLOSURES-INCOME-AT-RISK"></span> <span ng-if="goaldetails.title.label2 == \'Accomplished\'"><hg-remote-asset hg-asset-id="SIP-GOALS-DISCLOSURES-INCOME-ACCOMPLISHED"></span> <span ng-if="goaldetails.title.label2 == \'Not Accomplished\'"><hg-remote-asset hg-asset-id="SIP-GOALS-DISCLOSURES-INCOME-NOT-ACCOMPLISHED"></span></p></div>'),a.put("templates/widget/disclosureToolTip.html",'<div class="tooltip in page-title-model-tooltip"><div class=hg-widget-tooltip-container><div class=tooltip-arrow></div><div data-ng-if=$root.deviceInfo.isLargeScreen()><div class=tooltip-inner><div class=text-right style="float: right"><i data-ng-click=$hide() class="icon-close-x pull-right"></i></div><br><div class=text-left>{{pageTitleModel.info}}</div></div></div><div data-ng-if=!$root.deviceInfo.isLargeScreen()><div class=tooltip-inner-mobile-container><div class=text-right><i data-ng-click=$hide() class="icon-close-x pull-right"></i></div><br><div class=text-left>{{pageTitleModel.info}}</div></div></div></div></div>'),a.put("templates/widget/educationToolTip.html",'<div class="tooltip in" style="width: 60%"><div class=hg-widget-tooltip-container><div class=tooltip-arrow></div><div data-ng-if=$root.deviceInfo.isLargeScreen()><div class=tooltip-inner><div class=text-right><i data-ng-click=$hide() class="icon-close-x pull-right"></i></div><br><div class=text-left data-ng-include="\'templates/assets/educationInfo.html\'"></div></div></div></div></div>'),a.put("templates/widget/goalStatusWidget.html",'<div class=goals-message-page><div ng-if="goalstate ==5"><span ng-if="goaltype==2"><h1 class="goal-at-risk-class padding-0"><b>{{goaltitle.label1}} {{goaltitle.label2}}</b></h1><div class=margin-top-18>{{goaltitle.details}}</div></span> <span ng-if="goaltype==1"><h1 class="goal-at-risk-class padding-0"><b>{{goaltitle.label1}} {{goaltitle.label2}}</b></h1><div class=margin-top-18>{{goaltitle.details}}</div></span></div><div ng-if="goalstate ==4"><span ng-if="goaltype==2"><h1 class="goal-on-track-class padding-0"><b>{{goaltitle.label1}} {{goaltitle.label2}}</b></h1><div class=margin-top-18>{{goaltitle.details}}</div></span> <span ng-if="goaltype==1"><h1 class="goal-on-track-class padding-0"><b>{{goaltitle.label1}} {{goaltitle.label2}}</b></h1><div class=margin-top-18>{{goaltitle.details}}</div></span></div></div>'),a.put("templates/widget/hgButtonStyle1Widget.html",'<div class=pull-right><button ng-click=callback() class="btn btn-default btn-custom-savegoal">{{buttonText}}</button><div bs-popover data-placement=bottom data-content-template=templates/assets/setupGoalPopup.html id=setupSavingGoalPopup></div></div>'),a.put("templates/widget/hgCounterWidget.html","<div class=counter-widget><h2><b>Contributions</b></h2><div>{{contributions}}</div></div>"),a.put("templates/widget/hgInputStyleWidget.html",'<div class="goals-value-container padding-15"><div data-ng-if=$root.deviceInfo.isLargeScreen()><div class=input-label-widget><div class=text-right>{{value.label2}}</div><a ng-click=callback() class=image-cursor>{{value.label3}}</a></div><div class=input-label-widget><input class=input-box-widget placeholder={{value.label1}}></div></div><div data-ng-if=!$root.deviceInfo.isLargeScreen()><div class=mobile-input-container><div>{{value.label4}}</div><div class="input-group goal-amount-input pull-right input-box-mobile margin-bottom-10"><input class="form-control input-box-target input-box-mobile" autofocus placeholder={{value.label1}} data-ng-model=value.amount ng-model-options="{ updateOn: \'blur\' }" hg-currency-input hg-currency-rounding-required=true hg-currency-return-numeric=true data-ng-change=viewmodel.changeGoalTargetAmount(false); ng-enter=viewmodel.changeGoalTargetAmount(true);> <span class=input-group-addon data-ng-click=viewmodel.resetTargetGoal();>X</span></div><div class=margin-bottom-10>{{value.label5}}</div><div class=margin-top-25 ng-if=viewmodel.goalDetails.showRecommendedAmountLabel()>{{value.label6}}</div><div class="text-center margin-top-25"><a ng-if=viewmodel.goalDetails.showSavingsTargetLink() class=image-cursor target=_blank href=https://intelligent.schwab.com/public/intelligent/blog/setting-savings-goal.html>{{value.label3}}</a> <a ng-if=viewmodel.goalDetails.showIncomeTargetLink() class=image-cursor data-ng-click=value.toolTipNav()>{{value.label3}}</a></div></div></div></div>'),a.put("templates/widget/hgMiniChartWidget.html",'<div><div class=left-align-to-graph><h2 class=mini-chart-label>Estimated Balance By {{model.seriesMidLabel}}</h2><h3 class=mini-chart-sublabel>Today <span class=bold>{{model.currentBalance | currency:undefined:0}}</span></h3></div><div><hg-multi-series-chart class=mini-chart options=model.goalChartOptionsMini series=model.goalChartSeriesMini></hg-multi-series-chart></div><div class="row mini-chart-legend"><h2 class=col-xs-4>{{model.seriesValue.chartSeriesProjected.lowSeries.name}}<br><span class=bold>{{model.seriesValue.chartSeriesProjected.lowSeries.data[0].y | currency:undefined:0}}</span></h2><h2 class=col-xs-4>{{model.seriesValue.chartSeriesProjected.midSeries.name}}<br><span class=bold>{{model.seriesValue.chartSeriesProjected.midSeries.data[0].y | currency:undefined:0}}</span></h2><h2 class=col-xs-4>{{model.seriesValue.chartSeriesProjected.highSeries.name}}<br><span class=bold>{{model.seriesValue.chartSeriesProjected.highSeries.data[0].y | currency:undefined:0}}</span></h2></div></div>'),a.put("templates/widget/hgTextBlock2Widget.html",'<div><h1 class=whats-next-text>{{value.label1}}</h1><h2>{{value.label2}}</h2><div><div ng-if=value.buttonText1 class="col-xs-5 col-sm-5 col-md-5 col-lg-5 padding-0"><hg-button-primary ng-click=value.buttonClickHandler1()>{{value.buttonText1}}</hg-button-primary></div><div ng-if=value.buttonText1 class="col-xs-6 col-sm-6 col-md-6 col-lg-6"><hg-button ng-click=value.buttonClickHandler2()>{{value.buttonText2}}</hg-button></div></div></div>'),a.put("templates/widget/hgTextBlockWidget.html","<div class=text-block-container><h3>{{textblock}}</h3></div>"),a.put("templates/widget/hgTitleStyle1ToolTip.html",'<div class="tooltip in" style="width: 60%"><div class=hg-widget-tooltip-container><div class=tooltip-arrow></div><div data-ng-if=$root.deviceInfo.isLargeScreen()><div class=tooltip-inner><div class=text-right style="float: right"><i data-ng-click=$hide() class="icon-close-x pull-right"></i></div><br><div class=text-left ng-include="\'templates/assets/goalStatusInfo.html\'"></div></div></div></div></div>'),a.put("templates/widget/hgTitleStyle1Widget.html",'<div class=title-style1-widget><div data-ng-if=$root.deviceInfo.isLargeScreen()><div class=title-style1-widget-components><div ng-if="ctrl.pageTitleModel && ctrl.type === 1"><status-donut-chart color=ctrl.pageTitleModel.class percentage=ctrl.pageTitleModel.percentage></status-donut-chart></div><span style="vertical-align: 15%"><h1 class={{ctrl.pageTitleModel.class}}><b>{{ctrl.pageTitleModel.label1}}</b></h1><h3><i class={{ctrl.pageTitleModel.icon}} style="padding: 5px" data-title={{ctrl.pageTitleModel.info}} data-html=true data-template=templates/widget/hgTitleStyle1ToolTip.html data-placement=bottom data-type=info data-trigger=click bs-tooltip=tooltip></i></h3><h1 class={{ctrl.pageTitleModel.class}} style="display: block"><b>{{ctrl.pageTitleModel.label2}}</b></h1></span></div></div><div data-ng-if=!$root.deviceInfo.isLargeScreen() class=padding-0 ng-click=ctrl.goToDetails()><div><div class="goal-title-container row" style="background-color: transparent"><div class=col-xs-11><div ng-if="ctrl.pageTitleModel && ctrl.type==1" style="display: inline-block"><status-donut-chart color=ctrl.pageTitleModel.class percentage=ctrl.pageTitleModel.percentage></status-donut-chart></div><div ng-if="ctrl.pageTitleModel && ctrl.type==2" style="display: inline-block"><status-donut-chart color=ctrl.pageTitleModel.class percentage=ctrl.pageTitleModel.percentage label=ctrl.pageTitleModel.innerLabel></status-donut-chart></div><span style="vertical-align: 50%; display: inline-block"><h2 class={{ctrl.pageTitleModel.class}}>{{ctrl.pageTitleModel.shortLabel1}}</h2><h2 class={{ctrl.pageTitleModel.class}}>{{ctrl.pageTitleModel.label2}}</h2></span></div><div class="col-xs-1 padding-0"><span class=link-icon-arrow><i class=icon-arrow-right></i></span></div></div></div></div></div>'),a.put("templates/widget/hgTitleStyle2Widget.html",'<div><div class=lego-amount-container><div class=pull-right style="min-width: 200px"><div class=lego-text><span>{{value.amount | currency:\'$\':0}}</span></div><div class="lego-edit pull-right"><a ng-click=value.editGoal() class=image-cursor>Edit</a></div></div><div class=lego-secondary-text>{{value.label4}} {{value.label5}}</div></div></div>'),a.put("templates/widget/hgTitleStyle3Widget.html","<div class=goals-container><div class=title-style3-widget><h1 class={{stateTitleModel.class}}>{{stateTitleModel.label}}</h1></div></div>"),a.put("templates/widget/hgTitleStyle4Widget.html","<div class=goals-container><div class=title-style4-widget><div style=\"padding-bottom: 10px\"><h3>{{titleModel.label1}}</h3><h2><b>{{titleModel.value1 | currency: '$': 0}}</b></h2><h2 ng-if=titleModel.value1 class={{titleModel.class}}><b>&nbsp{{titleModel.sign}}{{titleModel.percent | number: 1}}%</b></h2></div><div><h3>{{titleModel.label2}}</h3><h2><b>{{titleModel.value2}}</b></h2></div></div></div>"),a.put("templates/widget/hgTitleStyle5Widget.html","<div class=goals-container><div class=title-style1-widget><div class=mobile-container-header><div class=mobile-container-left><h3 class={{pageTitleModel.class}}>{{pageTitleModel.label1}}</h3><h3>&nbsp{{pageTitleModel.label3}}</h3></div><div class=mobile-container-right><h3 class=color-white>{{pageTitleModel.label4}}</h3><h3>&nbsp{{pageTitleModel.label5}}</h3></div></div></div></div>"),a.put("templates/widget/incomeFigureToolTip.html",'<div class="tooltip in enrollment-tooltip"><div class=tooltip-container><div class=tooltip-arrow></div><div class=tooltip-inner><div class=close-right><i data-ng-click=$hide() class="icon-close-x pull-right"></i></div><br><div class=text-left><strong>YOUR MONTHLY INCOME FIGURE</strong><br><br>Based on the information you provided above, we have calculated that you can withdraw the amount shown with 75% confidence until your desired end date. You can edit this amount, and the resulting impact on your goal will be shown on the chart.<br><br><a data-ng-click=preventCollapse($event) href=https://intelligent.schwab.com/public/intelligent/blog/planning_for_lasting_portfolio_income.html target=_blank>Planning for Lasting Portfolio Income?</a><br><br><a data-ng-click=preventCollapse($event) href=https://intelligent.schwab.com/public/intelligent/blog/portfolio-income.html target=_blank>How Long Will Your Money Last?</a></div></div></div></div>'),a.put("templates/widget/incomeSuggestionToolTip.html",'<div class="tooltip in enrollment-tooltip"><div class=tooltip-container><div class=tooltip-arrow></div><div class=tooltip-inner><div class=close-right><i data-ng-click=$hide() class="icon-close-x pull-right"></i></div><br><div class=text-left><strong>Goal Status</strong><br><br><strong>At Risk</strong><br>Your target withdrawal amount could be at risk of not lasting through your time horizon.<br><br><strong>Off Target</strong><br>Your target withdrawal amount is not projected to last through your time horizon.<br><br>Consider changing your inputs to bring your goal back on target.</div></div></div></div>'),a.put("templates/widget/lifeExpectancyToolTip.html",'<div class="tooltip in enrollment-tooltip"><div class=tooltip-container><div class=tooltip-arrow></div><div class=tooltip-inner><div class=close-right><i data-ng-click=$hide() class="icon-close-x pull-right"></i></div><br><div class=text-left><strong>LONGER LIFE EXPECTANCY</strong><br><br>Great news! People are living longer. For more information on estimating a time horizon, read our brief article.<br><br><a data-ng-click=preventCollapse($event) href=https://intelligent.schwab.com/public/intelligent/blog/longevity-planning.html target=_blank>How Long Should You Plan for in Retirement?</a></div></div></div></div>'),a.put("templates/widget/progressBar.html",'<div class=progress-bar-container><h2><strong>{{progressBar.title}}</strong></h2><div class=progress-container><div class=progress-bar role=progressbar aria-valuemin={{progressBar.minValue}} aria-valuemax={{progressBar.maxValue}} style=width:{{progressBar.percentage}}%><span class=sr-only></span></div></div><div class="padding-top-3 padding-left-0 col-xs-6 col-sm-6 col-md-6 col-lg-6">{{progressBar.label1}}</div><div class="padding-top-3 padding-right-0 col-xs-6 col-sm-6 col-md-6 col-lg-6 text-right">{{progressBar.label2}}</div></div>'),a.put("templates/widget/riskProfile.html",'<div class=riskProfileWidget><div class=widget-bordered-container><div data-ng-if=$root.deviceInfo.isLargeScreen() class=widget-header>{{riskProfile.sliderGroup.title}} <i ng-show=riskProfile.sliderGroup.iconToolTip class=icon-info-circle style="padding: 5px" data-title={{riskProfile.sliderGroup.iconToolTip.info}} data-html=true data-template=templates/widget/disclosureToolTip.html data-placement=bottom data-type=info data-trigger=click bs-tooltip=tooltip></i></div><div data-ng-if=$root.deviceInfo.isSmallScreen() class=widget-header>{{riskProfile.sliderGroup.title}} <i ng-show=riskProfile.sliderGroup.iconToolTip class=icon-info-circle data-ng-click=riskProfile.toolTipNav()></i></div><div class=widget-body><div class=row><div class="chart-legend col-xs-12 col-sm-12" data-ng-class="{\'col-md-12 col-lg-12\': !riskProfile.isExpanded, \'col-md-4 col-lg-6\': riskProfile.isExpanded}"><div class="col-xs-12 col-md-12 padding-0" data-ng-class="{\'col-lg-12\': !riskProfile.isExpanded, \'col-lg-6\': riskProfile.isExpanded}" data-ng-repeat="item in riskProfile.items"><div class="col-xs-5 col-sm-5 col-md-6 col-lg-6 padding-left-0 legend-box" data-ng-class=item.color><i class="fa fa-square"></i>{{item.label1}}</div><div class="col-xs-6 col-md-6 col-lg-6 risk-legend-text">{{item.label2}}</div></div></div></div><div class=row><div bs-popover data-template-url=templates/assets/riskSliderInfo.html data-placement=top id=riskProfilePopover></div><div class="col-xs-12 col-sm-12 margin-top-10" data-ng-class="{\'col-md-12 col-lg-12\': !riskProfile.isExpanded, \'col-md-4 col-lg-3\': riskProfile.isExpanded}"><slider ng-if="riskProfile.sliderShow==true" ng-model=riskProfile.sliderGroup.slider.value on-stop-slide=riskProfile.sliderStop(); on-slide=viewmodel.sliderFunction(); name=slider min={{riskProfile.sliderGroup.slider.minValue}} max={{riskProfile.sliderGroup.slider.maxValue}} step={{riskProfile.sliderGroup.slider.incrementValue}} value={{riskProfile.sliderGroup.slider.value}} tooltip=hide></slider><div class="col-xs-6 col-md-6 col-lg-6 padding-left-0">{{riskProfile.sliderGroup.slider.minLabel}}</div><div class="col-xs-6 col-md-6 col-lg-6 padding-0 text-right">{{riskProfile.sliderGroup.slider.maxLabel}}</div></div></div><div class=button-action-bar data-ng-if=$root.deviceInfo.isLargeScreen()><button type=button data-ng-disabled=riskProfile.riskSelectionUnchanged class="btn btn-default btn-primary" data-ng-click=riskProfile.launchPlanConfirmation()>{{riskProfile.sliderGroup.buttonText}}</button></div></div></div></div>'),
a.put("templates/widget/showAccountListOverlay.html",'<div class=modal tabindex=-1 role=dialog><div class="modal modal-dialog modal-selector modal-lg" ng-class="{\'modal-sm\': size == \'sm\', \'modal-lg\': size == \'lg\'}"><div class=modal-content><div class="row selector-list"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"><div data-ng-switch=styleId><div data-ng-switch-when=1><div class="overlay-header dk-scheme navyfive text-center" data-ng-if="items.length > 0 || disabledList.length > 0"><span class=selector-modal-dismiss><a data-ng-click=cancel() href=# ng-enter=cancel() aria-label=Close><i class=icon-close-x></i></a></span><div class=selector-modal-title>{{headerTitle}}</div></div><div class=overlay-content><div class="panel panel-default" data-ng-repeat="groupedItem in items"><div class=panel-heading><h3 ng-show=(!groupedItem.subHeader) class=panel-title>{{groupedItem.group}}</h3><div ng-show=(groupedItem.subHeader) class=panel-title-subHeader><span class=pull-left>{{groupedItem.group}}</span> <span class=pull-right>{{groupedItem.subHeader}}</span></div></div><div class="panel-body radio-group"><ul class=list-group><li class="list-group-item padding-0" data-ng-click=onSelectingAnItem(item.value1) data-ng-repeat="item in groupedItem.itemsList | excludeFromArrayFilter:filterItem"><div class=selector-item ng-tap ng-class="{\'isSelected\' :item.value1 == selectedItem.value1}"><div class=selector-item-radio><input id=radio{{item.value1}} type=radio name=radio{{item.value1}} ng-checked="item.value1 == selectedItem.value1"><label for=radio{{item.value1}} class="radio small-text"></label></div><div class=selector-item-text><label class="radio small-text">{{item.value2}}</label><p class=list-group-item-info><span class=pull-left>{{item.value9}}</span> <span data-ng-hide=hideBalance class=pull-right>{{item.value3 | hgCurrency}}</span></p></div></div></li></ul></div></div><div class="panel panel-default" data-ng-if="disabledList.length > 0"><div class=panel-heading><div class=panel-title><span>Unavailable for Transfers</span></div></div><div class=panel-body><ul class=list-group><li class="list-group-item padding-0 disabled" data-ng-repeat="item in disabledList"><div><div class=selector-disabled-item><div class="small-text margin-bottom-10">{{item.Nickname}}</div><p class=margin-bottom-10><span class=pull-left>{{item.AccountIdDisplay}}</span> <span class=pull-right>{{item.DisplayBalance | hgCurrency}}</span></p><div class=clear></div><div class="margin-top-10 small-text" data-ng-repeat="reason in item.ExclusionReasons track by $index">{{reason}}</div></div></div></li></ul></div></div></div></div><div data-ng-switch-when=2><div data-ng-if="items.length > 0" class="overlay-header dk-scheme navyfive"><span class=selector-modal-dismiss><a data-ng-click=cancel() href=# ng-enter=cancel() aria-label=Close><i class=icon-close-x></i></a></span><div class=selector-modal-title>{{headerTitle}}</div></div><div class=overlay-content><div data-ng-repeat="groupedItem in items"><div class="panel panel-default" data-ng-show="groupedItem.group!=\'other\'"><div class=panel-heading><h3 class=panel-title data-ng-hide="$index ==0">{{groupedItem.group}}</h3></div><div class="panel-body radio-group"><ul class=list-group data-ng-click=onSelectingAnItem(item.value1)><li class=list-group-item data-ng-click="onSelectingAnItem(item.value1) " data-ng-repeat="item in groupedItem.itemsList | excludeFromArrayFilter:filterItem" ng-class="{\'isSelected\' :item.value1 == selectedItem.value1}"><input id=radio{{item.value1}} type=radio name=radio{{item.value1}} ng-checked="item.value1 == selectedItem.value1"><label for=radio{{item.value1}} class="radio small-text">{{item.value2}}</label></li></ul></div></div><div data-ng-show="groupedItem.group==\'other\'"><div data-ng-if=showMini><a data-ng-click=showMore()>Show more options</a></div><div data-ng-if=!showMini><div class="panel panel-default" data-ng-show="groupedItem.group==\'other\'"><div class=panel-heading><h3 class=panel-title data-ng-hide="$index ==0">{{groupedItem.group}}</h3></div><div class="panel-body radio-group"><ul class=list-group data-ng-click=onSelectingAnItem(item.value1)><li class=list-group-item data-ng-click="onSelectingAnItem(item.value1) " data-ng-repeat="item in groupedItem.itemsList | excludeFromArrayFilter:filterItem" ng-class="{\'isSelected\' :item.value1 == selectedItem.value1}"><input id=radio{{item.value1}} type=radio name=radio{{item.value1}} ng-checked="item.value1 == selectedItem.value1"><label for=radio{{item.value1}} class="radio small-text">{{item.value2}}</label></li></ul></div></div><a data-ng-click=showFewer()>Show fewer options</a></div></div></div></div></div></div></div></div></div></div></div>'),a.put("templates/widget/statusDonutChartWidget.html","<div class=statusDonutContainer><div id=statusDonutChart></div><div id=statusText class=donut-chart-centered-text>{{label}}</div></div>"),a.put("templates/widget/summaryStatement.html",'<div class=statement-summary-widget><h1 ng-if="editState<4">{{summaryStatement.header}}</h1><h1 ng-if="editState>3"><b>Your Next Steps</b></h1><div class=summary-content ng-bind-html=summaryStatement.summary></div><div ng-if="$root.deviceInfo.isLargeScreen() && summaryStatement.showHelpLink==true"><p><a class=image-cursor bs-popover data-content-template=templates/assets/adjustTimeHorizonPopup.html data-placement=top>{{summaryStatement.linkText}}</a></p></div></div>'),a.put("templates/widget/targetAmountWidget.html",'<div class="goals-value-container padding-15"><div data-ng-if=$root.deviceInfo.isLargeScreen()><div class=input-label-widget><div class=text-right>{{value.target.label2}}</div><a ng-if=value.showSavingsTargetLink() class=image-cursor target=_blank href=https://intelligent.schwab.com/public/intelligent/blog/setting-savings-goal.html>{{value.target.label3}}</a> <a ng-if=value.showIncomeTargetLink() class=image-cursor data-html=true data-template=templates/widget/educationToolTip.html data-placement=bottom data-type=info data-trigger=click bs-tooltip=tooltip>{{value.target.label3}}</a></div><div class="input-group goal-amount-input pull-right input-box-web"><input class="form-control input-box-target input-box-web" ng-focus=true placeholder={{value.label1}} data-ng-model=value.target.amount ng-model-options="{ updateOn: \'blur\' }" hg-currency-input hg-currency-rounding-required=true hg-currency-return-numeric=true data-ng-change=value.changeGoalTargetAmount(false) ng-enter=value.changeGoalTargetAmount(true)> <span class=input-group-addon data-ng-click=value.resetTargetGoal();>X</span></div></div><div data-ng-if=!$root.deviceInfo.isLargeScreen()><div class=mobile-input-container><div class=text-left>{{value.target.label4}}</div><div class=text-left><input class=input-box-widget placeholder={{value.target.label1}}></div><div class=text-left>{{value.target.label5}}</div></div></div></div>')}]),angular.module("hg.appConfig",[]).constant("APP_CONFIG",{clientApiUrl:"/HgClientAPI-1.15/api",coreDataServiceApiUrl:"/HgCoreDataService-1.14/api",accountOpenServiceApiUrl:"/HgAccountOpenService-1.12/api",dashboardServiceApiUrl:"/HgDashboardService-1.12/api",enrollmentServiceApiUrl:"/HgEnrollmentService-1.12/api",cmsAssetUrl:"/public",cmsPublicIntelligentPageAssetUrl:"/public/intelligent/page?cmsid=",symbolLookupUrl:"https://client.schwab.com/symlup/",forgotPasswordLink:"https://client.schwab.com/Areas/Login/ForgotPassword/FYPIdentification.aspx",chatUrl:"https://chat.schwab.com/netagent/cimlogin.aspx",chatProspectQuestId:"A6D73E2D-475A-483B-AC0C-ED5FE07C90D8",chatProspectPortId:"A180DE7C-3FD1-48C2-81AC-C1B1B09C4C9F",chatClientQuestId:"245F8048-A8AA-4AB8-817A-F32F68B271F7",chatClientPortId:"E90B765A-481D-4578-92F2-B37ECD75D536",HgChatAdvisorQuestId:"C0666959-BB99-442C-8DCC-963C14375692",HgChatAdvisorPortId:"FB81998A-D3C3-4B58-94A1-8FD6B13D30D3",chatGateWay:"/HgClientAPI-1.15/api/ContactUs",urgentNotificationPollingDurationInSes:"120",dataServices:[{dataServiceId:"HgCoreDataService",dataServiceAdapter:"webApiOdata",prefetchMetadata:!1,hasServerMetadata:!1,url:"/HgCoreDataService-1.14/odata/"},{dataServiceId:"HgAccountOpenService",dataServiceAdapter:"webApiOdata",prefetchMetadata:!1,hasServerMetadata:!1,url:"/HgAccountOpenService-1.12/odata/"},{dataServiceId:"HgDashboardService",dataServiceAdapter:"webApiOdata",prefetchMetadata:!1,hasServerMetadata:!1,url:"/HgDashboardService-1.12/odata/"},{dataServiceId:"HgEnrollmentService",dataServiceAdapter:"webApiOdata",prefetchMetadata:!1,hasServerMetadata:!1,url:"/HgEnrollmentService-1.12/odata/"},{dataServiceId:"PCCMockService",dataServiceAdapter:"webApiOdata",prefetchMetadata:!1,hasServerMetadata:!0,url:"http://mockedDataUrl"}],httpTimeout:100,identityProviderBaseUrl:"/authn-1.4",identityProviderLoginUrl:"/authn-1.4/authn/login?response_type=token&client_id=hg_clientapp",identityProviderOTPLoginUrl:"/authn-1.4/login/redirect",identityProviderLogoutUrl:"/authn-1.4/authn/logout",identityProviderMessageContext:"microsite-login",hgUIMessageContext:"hgui-modal",product:{IIP:"Institutional Intelligent Portfolio",SIP:"Schwab Intelligent Portfolio"},resourceUrlWhitelist:["self","https://localhost:9000/**","https://local.hg-dev.dev.schwab.com:9000/**","https://local.hg-asadmin-dev.schwab.com:9000/**","https://local.hg-dev.schwab.com:9000/**","https://local.hg-asadmin-qa.schwab.com:9000/**","https://local.hg-qa.schwab.com:9000/**","https://hg-dev.dev.schwab.com/**","https://mdev1.dev.schwab.com/**","https://hg-dev.schwab.com/**","https://*.dev.schwab.com/**","https://*.schwab.com/**","/**"],url:"/client/",defaultSecureRouteState:"charts",colorPalette:[{Key:"PChart",Value:"#26ffff"},{Key:"Stocks",Value:"#26ffff"},{Key:"Stocks Unselected",Value:"#2699a0"},{Key:"Fixed Income",Value:"#f28b24"},{Key:"Fixed Income Unselected",Value:"#8c5f32"},{Key:"Commodities",Value:"#f2d649"},{Key:"Commodities Unselected",Value:"#8c8445"},{Key:"Cash",Value:"#2db391"},{Key:"Cash Unselected",Value:"#297369"},{Key:"AssetBorder",Value:"#000"},{Key:"BenchmarkIndex0",Value:"#F28B24"},{Key:"BenchmarkIndex1",Value:"#F2D649"},{Key:"BenchmarkIndex2",Value:"#79B4F2"},{Key:"BenchmarkIndex3",Value:"#FF7373"},{Key:"BenchmarkIndex4",Value:"#C5CED9"}],supportedUrlSchemas:["mailto:","tel:","facetime:","sms:","callto:","skype:"],pdfWhiteList:["P-4099557","P-641707","SIP-ADVISORY-AGREEMENT","SIP-BANK-SAVINGS-SWEEP-DISCLOSURE-STATEMENT","SIP-BANK-SAVINGS-SWEEP-DISCLOSURE-STATEMENT-TANDC","SIP-BROKERAGE-ACCOUNT-AGREEMENT","SIP-DISCLOSURE-BROCHURES","P-221657","P-3167547","P-4325668","P-974035","SIP-DISCONTINUATION-OF-SERVICE-FORM","SIP-IRA-DISTRIBUTION","SIP-ISSUER-COMMUNICATIONS-AND-RELEASE-OF-INFORMATION","SIP-IRA-AGREEMENT","SIP-SCHWAB-WEALTH-ADVISORY-DISCLOSURE-BROCHURE","P-641861","P-655996","SERVICE-EMONEYLINK-BANKPDF","P-221581"],whiteListReturnUrls:[".schwab.com"],mvSoftWarningTimeout:"1440",mvIOSCurrentVersion:"1.5.0.56",mvIOSRequiredVersion:"1.5.0.54",mvAndroidCurrentVersion:"1.5.0.12",mvAndroidRequiredVersion:"1.5.0.10",featureUnavailableMessage:"This feature is temporarily unavailable. Please try again later, or call Schwab at 855-694-5208 for assistance.",allAccountsClosedMessage:"Account accountid is closed. , Please call 855-694-5208 for assistance. , Please call 877-805-3399 for assistance.",networkUnavailableMessage:"The Internet connection appears to be offline.",debugLogLevel:"OFF",redirectTimeout:120,privacyPolicyDocUrl:"https://www.schwab.com/public/asset?cmsid=SIP-IMPORTANT-INFO-ABOUT-SCHWAB-LOGIN",whitePaperUrl:"/public/intelligent/insights",IIPWhitePaperUrl:"/public/intelligent-advisor/learn-more",blogUrl:"/public/intelligent/blog",IIPBlogUrl:"/public/intelligent-advisor/blog",FAQUrl:"/public/intelligent/about-intelligent-portfolios",IIPFAQUrl:"/public/intelligent-advisor/faq",comingSoonUrl:"/public/intelligent/coming-soon",iipHostName:"institutionalintelligent.schwab.com",webAnalyticsConfig:{envId:"PROD",preloginCategory:"/sip/client_center",postloginCategory:"/sip/prospect/",dcSource:"2530996",pageInfo:{launch:{name:"test-launch",hasDc:!1,extraScTagData:{appName:"sip-GAO",successEvent:"event21"}},"accountopen.profile":{name:"profile",hasDc:!0,extraScTagData:{appName:"sip-GAO",successEvent:"event20"},dcBaseVars:{type:"sip15",cat:"sipgaost"}},enrollmentconfirmation:{name:"enrollmentconfirmation",hasDc:!0,extraScTagData:{appName:"sip-GAO",successEvent:"event22"},dcBaseVars:{type:"sip15",cat:"sipgaoco"}},message:{nameMap:[{id:"0",name:""},{id:"1",name:"logout"},{id:"2",name:"session-timeout"}]}},ignoreList:["getStarted","behavioralQuestions","modalBackdrop"]},appDynamicsConfig:{HgAppDynamicsAppKey:"EUM-AAB-AUY",AppDynamicsBeaconUrlHttp:"https://eum-appd.schwab.com",AppDynamicsBeaconUrlHttps:"https://eum-appd.schwab.com"},custodialAgeByState:{AK:{RANGE:[18,19,20,21,22,23,24,25],DEFAULT:21,STATE:"Alaska"},AL:{RANGE:[21],DEFAULT:21,STATE:"Alabama"},AR:{RANGE:[18,19,20,21],DEFAULT:21,STATE:"Arkansas"},AZ:{RANGE:[21],DEFAULT:21,STATE:"Arizona"},CA:{RANGE:[18,19,20,21,22,23,24,25],DEFAULT:18,STATE:"California"},CO:{RANGE:[21],DEFAULT:21,STATE:"Colorado"},CT:{RANGE:[21],DEFAULT:21,STATE:"Connecticut"},DC:{RANGE:[18,19,20,21],DEFAULT:18,STATE:"District of Columbia"},DE:{RANGE:[18,21],DEFAULT:18,STATE:"Delaware"},FL:{RANGE:[21],DEFAULT:21,STATE:"Florida"},GA:{RANGE:[21],DEFAULT:21,STATE:"Georgia"},GU:{RANGE:[18],DEFAULT:18,STATE:"Guam"},HI:{RANGE:[21],DEFAULT:21,STATE:"Hawaii"},IA:{RANGE:[21],DEFAULT:21,STATE:"Iowa"},ID:{RANGE:[21],DEFAULT:21,STATE:"Idaho"},IL:{RANGE:[21],DEFAULT:21,STATE:"Illinois"},IN:{RANGE:[21],DEFAULT:21,STATE:"Indiana"},KS:{RANGE:[21],DEFAULT:21,STATE:"Kansas"},KY:{RANGE:[18],DEFAULT:18,STATE:"Kentucky"},LA:{RANGE:[18],DEFAULT:18,STATE:"Louisiana"},MA:{RANGE:[18,21],DEFAULT:21,STATE:"Massachusetts"},MD:{RANGE:[18,21],DEFAULT:21,STATE:"Maryland"},ME:{RANGE:[18,19,20,21],DEFAULT:18,STATE:"Maine"},MI:{RANGE:[18,19,20,21],DEFAULT:18,STATE:"Michigan"},MN:{RANGE:[21],DEFAULT:21,STATE:"Minnesota"},MO:{RANGE:[21],DEFAULT:21,STATE:"Missouri"},MS:{RANGE:[21],DEFAULT:21,STATE:"Mississippi"},MT:{RANGE:[21],DEFAULT:21,STATE:"Montana"},NC:{RANGE:[18,19,20,21],DEFAULT:21,STATE:"North Carolina"},ND:{RANGE:[21],DEFAULT:21,STATE:"North Dakota"},NE:{RANGE:[19,21],DEFAULT:21,STATE:"Nebraska"},NH:{RANGE:[21],DEFAULT:21,STATE:"New Hampshire"},NJ:{RANGE:[18,19,20,21],DEFAULT:21,STATE:"New Jersey"},NM:{RANGE:[21],DEFAULT:21,STATE:"New Mexico"},NV:{RANGE:[18,19,20,21,22,23,24,25],DEFAULT:18,STATE:"Nevada"},NY:{RANGE:[18,21],DEFAULT:21,STATE:"New York"},OH:{RANGE:[18,19,20,21],DEFAULT:21,STATE:"Ohio"},OK:{RANGE:[18,19,20,21],DEFAULT:18,STATE:"Alabama"},OR:{RANGE:[21,22,23,24,25],DEFAULT:21,STATE:"Oregon"},PA:{RANGE:[21,22,23,24,25],DEFAULT:21,STATE:"Pennsylvania"},RI:{RANGE:[21],DEFAULT:21,STATE:"Rhode Island"},SC:{RANGE:[21],DEFAULT:21,STATE:"South Carolina"},SD:{RANGE:[18],DEFAULT:18,STATE:"South Dakota"},TN:{RANGE:[21,22,23,24,25],DEFAULT:21,STATE:"Tennessee"},TX:{RANGE:[21],DEFAULT:21,STATE:"Texas"},UT:{RANGE:[21],DEFAULT:21,STATE:"Utah"},VA:{RANGE:[18,21],DEFAULT:18,STATE:"Virginia"},VI:{RANGE:[18],DEFAULT:18,STATE:"Virgin Islands"},VT:{RANGE:[18],DEFAULT:18,STATE:"Vermont"},WA:{RANGE:[21,25],DEFAULT:21,STATE:"Washington"},WI:{RANGE:[21],DEFAULT:21,STATE:"Wisconsin"},WV:{RANGE:[21],DEFAULT:21,STATE:"West Virginia"},WY:{RANGE:[21],DEFAULT:21,STATE:"Wyoming"}},cookieExpiry:2,SIPProductIdp:"SchwabClient",IIPProductIdp:"InstitutionalClient"}).constant("LOCAL_RESOURCES",[{id:"RISK_QUESTION-TaxLossHarvesting",location:["Additional Risk questions","Service Maintenance Risk Profile"],content:"Tax loss harvesting is the process by which the optimal purchase/sale decision within a portfolio will be largely driven by tax considerations.  In order to minimize taxes on an investment portfolio, investment losses are used to offset investment gains.  For example, one security that has decreased in value over its holding period will be sold at a loss in order to offset the gain of another security that has increased in value over its holding period."},{id:"RISK_QUESTION-IncomePortfolio",location:["Additional Risk questions","Service Maintenance Risk Profile"],content:"Investment returns can be broken down into two components, income and capital appreciation.  An income model focuses more on higher yielding assets, which receive a larger percentage of their return from income relative to capital appreciation.  A total return model does not view returns from income differently than returns from capital appreciation.  Instead, the total return model focuses on the total overall return, regardless of what form it comes in.  The breakout out between income oriented and capital appreciation oriented investments within a total return approach is a byproduct of the selection process. While there are many exceptions, income oriented portfolios are generally more commonly utilized by investors looking for steadier cash flows with shorter time horizons.  Total return portfolios are more commonly used by investors with longer time horizons looking to take on additional risk."},{id:"RISK_QUESTION-TaxableVsMuniBonds",location:["Additional Risk questions","Service Maintenance Risk Profile"],content:"The major benefit that many municipal bonds provide investors is their tax-exempt status.  In many cases, municipal bonds are exempt from federal income taxes and are often (but not always) exempt from state and local income taxes.  What determines if a municipal bond is exempt from state income taxes in your state of residency is whether the issuing municipality is located in your state.  If you purchase a municipal bond issued by a municipality located in a different state then you would most likely owe state income taxes on any interest earned from the bond.  If you purchased a bond issued by a municipality located in your home state then the interest earned on the bond would most likely be exempt from state income taxes.  Investing in municipal bonds is an even more attractive option for those in higher tax brackets."},{id:"RISK_QUESTION-CaliforniaMuniBonds",location:["Additional Risk questions","Service Maintenance Risk Profile"],content:"Taxable accounts are eligible for Minicipal Bonds, which replace portions of your Fixed Income allocation.  Interest and dividends from Municipla Bonds are typically exempt from Federal income taxes, increasing the tax awareness of your portfolio. Read more about the role Municipal Bonds play in a taxable portfolio."},{id:"RISK_QUESTION-NationalMuniBonds",location:["Additional Risk questions","Service Maintenance Risk Profile"],content:"Taxable accounts are eligible for Minicipal Bonds, which replace portions of your Fixed Income allocation.  Interest and dividends from Municipla Bonds are typically exempt from Federal income taxes, increasing the tax awareness of your portfolio. Read more about the role Municipal Bonds play in a taxable portfolio."},{id:"RISK_QUESTION-ConsistencyCheck-GainLossRange",location:["Risk Question - Consistency Error","Service Maintenance Risk Profile"],content:"[TBD]Your answer is inconsistent for your risk level."},{id:"RISK_QUESTION-ConsistencyCheck-NeedMoneyWhen",location:["Risk Question - Consistency Error","Service Maintenance Risk Profile"],content:"[TBD]Your answer is inconsistent for your age."},{id:"ASSET_GROUP-Stocks",location:["Donut Graph Legend","Risk Profile, Account View"],content:"Stocks are investments it the equity of publicly traded companies.  They have a perpetual shelf life and are primarily influenced by economic factors such as the GDP growth rate, rate of unemployment, and the future prospects of the underlying business."},{id:"ASSET_GROUP-FixedIncome",location:["Donut Graph Legend","Risk Profile","Account View"],content:"Fixed income investments are typically investments in the debt of a country or a corporation.  These investments usually have a limited shelf life.  Some of the factors these investments are influenced by are the issuers’ credit quality, current interest rate environment, monetary policy and inflation."},{id:"ASSET_GROUP-Commodities",location:["Donut Graph Legend","Risk Profile","Account View"],content:"Commodities investments are in hard assets and the performance is often more cyclically driven.  Some examples of commodities are metals, agriculture and energy."},{id:"ASSET_GROUP-Cash",location:["Donut Graph Legend","Risk Profile","Account View"],content:"Cash investments are those that do not have any possibility of a loss of principle and offer extremely high liquidity (no less than overnight)."},{id:"SUB_ASSET_CLASS-USLargeCo",location:["Donut Graph Legend","Risk Profile","Account View"],content:"Investments in the equity of larger companies, based on market capitalization, domiciled in the United States."},{id:"SUB_ASSET_CLASS-USLargeCoFundamental",location:["Donut Graph Legend","Risk Profile","Account View"],content:"Investments in the equity of larger companies, based on fundamental weightings, domiciled in the United States.  The fundamental weighting is determined by retained operating cash flow, adjusted sales and dividends plus buybacks."},{id:"SUB_ASSET_CLASS-USHighDiv ",location:["Donut Graph Legend","Risk Profile","Account View"],content:"A strategy that focuses on stocks of US companies with a history of paying dividends."},{id:"SUB_ASSET_CLASS-USSmallCo",location:["Donut Graph Legend","Risk Profile","Account View"],content:"Investments in the equity of smaller companies, based on market capitalization, domiciled in the United States."},{id:"SUB_ASSET_CLASS-USSmallCoFundamental",location:["Donut Graph Legend","Risk Profile","Account View"],content:"Investments in the equity of smaller companies, based on fundamental weightings, domiciled in the United States.  The fundamental weighting is determined by retained operating cash flow, adjusted sales and dividends plus buybacks."},{id:"SUB_ASSET_CLASS-IntlDevLargeCo",location:["Donut Graph Legend","Risk Profile","Account View"],content:"International large company stocks are investments in the equity of larger companies, based on market capitalization, which are domiciled in countries with mature economies, with stock markets that benefit from a high degree of investor recourse, corporate governance, and legal infrastructure."},{id:"SUB_ASSET_CLASS-IntlDevLargeCoFundamental",location:["Donut Graph Legend","Risk Profile","Account View"],content:"International large company stocks are investments in the equity of larger companies, based on fundamental weightings, which are domiciled in countries with mature economies, with stock markets that benefit from a high degree of investor recourse, corporate governance, and legal infrastructure.  The fundamental weighting is determined by retained operating cash flow, adjusted sales and dividends plus buybacks."},{id:"SUB_ASSET_CLASS-IntlHighDiv",location:["Donut Graph Legend","Risk Profile","Account View"],content:"A strategy that focuses on stocks of international companies with a history of paying dividends."},{id:"SUB_ASSET_CLASS-IntlSmallCo",location:["Donut Graph Legend","Risk Profile","Account View"],content:"International large company stocks are investments in the equity of smaller companies, based on market capitalization, which are domiciled in countries with mature economies, with stock markets that benefit from a high degree of investor recourse, corporate governance, and legal infrastructure."},{id:"SUB_ASSET_CLASS-IntlSmallCoFundamental",location:["Donut Graph Legend","Risk Profile","Account View"],content:"International large company stocks are investments in the equity of smaller companies, based on fundamental weightings, which are domiciled in countries with mature economies, with stock markets that benefit from a high degree of investor recourse, corporate governance, and legal infrastructure.  The fundamental weighting is determined by retained operating cash flow, adjusted sales and dividends plus buybacks."},{id:"SUB_ASSET_CLASS-IntlEmerging",location:["Donut Graph Legend","Risk Profile","Account View"],content:"Emerging market stocks are equity investments in companies domiciled in countries with fairly young economies that offer higher growth potential and higher risk.  Emerging market stocks carry more risk than developed market stocks.  The universe consists of large and mid-sized companies, based on market capitalization."},{id:"SUB_ASSET_CLASS-IntlEmergingFundamental",location:["Donut Graph Legend","Risk Profile","Account View"],content:"Emerging market stocks are equity investments in companies domiciled in countries with fairly young economies that offer higher growth potential and higher risk.  Emerging market stocks carry more risk than developed market stocks.  The universe consists of large and mid-sized companies, based on fundamental weightings.  The fundamental weighting is determined by retained operating cash flow, adjusted sales and dividends plus buybacks."},{id:"SUB_ASSET_CLASS-MasterLmtdPartner",location:["Donut Graph Legend","Risk Profile","Account View"],content:"MLPs are publicly traded limited partnerships consisting of two types of partners: The limited partner is the person or group that provides the capital to the MLP and receives periodic income distributions from the MLP's cash flow.  The general partner is the party responsible for managing the MLP's affairs and receives compensation that is linked to the performance of the venture. Further, one of the most crucial criteria that must be met in order for a partnership to be legally classified as an MLP, is that the partnership must derive at least 90% of its cash flows from real estate, natural resources and commodities."},{id:"SUB_ASSET_CLASS-USREITs",location:["Donut Graph Legend","Risk Profile","Account View"],content:"A publicly traded real estate investment trust (REIT) is a security that is invested in various property types that trades like a stock.  Special tax treatment is provided to REITs as long as certain requirements are met.  One of these requirements is that 90% of the REITs taxable income is distributed to shareholders in the form of income.  REITs are typically classified as either equity, mortgage or hybrid, depending on the area of the capital structure they have exposure to. US REITs are invested in the properties located within the US."},{id:"SUB_ASSET_CLASS-IntlREITs",location:["Donut Graph Legend","Risk Profile","Account View"],content:"A publicly traded real estate investment trust (REIT) is a security that is invested in various property types that trades like a stock.  Special tax treatment is provided to REITs as long as certain requirements are met.  One of these requirements is that 90% of the REITs taxable income is distributed to shareholders in the form of income.  REITs are typically classified as either equity, mortgage or hybrid, depending on the area of the capital structure they have exposure to. International REITs are invested in properties located outside of the US."},{id:"SUB_ASSET_CLASS-USTreasuries",location:["Donut Graph Legend","Risk Profile","Account View"],content:"US Treasuries are bonds issued by the United States government with maturities going reaching as high as thirty years.  These bonds are considered to be free from credit risk but do carry interest rate risk.  Interest payments are made semi-annually."},{id:"SUB_ASSET_CLASS-USInvestGradeCorpBonds",location:["Donut Graph Legend","Risk Profile","Account View"],content:"Corporate bonds are investments in the debt of corporations domiciled in the United States.  These bonds carry a higher credit rating (BBB or higher) than the debt issued by less stable companies."},{id:"SUB_ASSET_CLASS-USInvestGradeMuniBonds",location:["Donut Graph Legend","Risk Profile","Account View"],content:"Investment grade municipal bonds are investments in bonds issued by municipalities that carry an investment grade credit rating (BBB or higher).  The coupon payments made by these bonds will often be exempt from federal income tax and state income tax (if issued by a municipality located within the resident’s state)."},{id:"SUB_ASSET_CLASS-USGov-Related",location:["Donut Graph Legend","Risk Profile","Account View"],content:"US Government-related bonds are securities issued by government agencies.  Some of the larger issuers of these types of bonds include Fannie Mae and Freddie Mac.  While these are government sponsored agencies who issue these bonds and are generally considered safe investments, they are not explicitly backed by the US government."},{id:"SUB_ASSET-CLASS-USSecuritizedBonds",location:["Donut Graph Legend","Risk Profile","Account View"],content:"Securitized bonds are securities whose principal and interest payments are backed by cash flows from a particular asset.  Some of the most common assets backing these bonds include mortgages, automobile loans and credit card receivables. Often these securities will be structured into various tranches based on the credit rating of the assets."},{id:"SUB_ASSET_CLASS-USInflationProtectedBonds",location:["Donut Graph Legend","Risk Profile","Account View"],content:"US Inflation Protected Securities  are securities issued by the US government that provide inflation protection to investors.  The interest payments provided remain fixed while their principal  value is adjusted based on the Consumer Price Index, a common measure of inflation."},{id:"SUB_ASSET_CLASS-Preferred",location:["Donut Graph Legend","Risk Profile","Account View"],content:"Legally structured as equities, preferred stocks are above common equity in a company's legal structure, but do not offer voting rights. They often pay a fixed dividend and have priority over common equity when an issuing company elects to pay dividends."},{id:"SUB_ASSET_CLASS-IntlDevCoBonds",location:["Donut Graph Legend","Risk Profile","Account View"],content:"Debt investments issued in a country outside of the United States, with highly developed economies and markets relative to other less developed nations."},{id:"SUB_ASSET_CLASS-BankLoanFRN",location:["Donut Graph Legend","Risk Profile","Account View"],content:"Bank loans pay a floating coupon rate and are issued by corporations with a below average credit rating.  Interest payments made are typically linked to LIBOR and pay an additional spread above LIBOR.  Bank loans sit at the top of a company’s capital structure."},{id:"SUB_ASSET_CLASS-USCorpHighYieldBonds",location:["Donut Graph Legend","Risk Profile","Account View"],content:"Debt issued by US companies with credit ratings that are beneath investment grade (BB or lower) as determined by one of the Nationally Recognized Statistical Rating Organizations."},{id:"SUB_ASSET_CLASS-IntlEmergMarketBonds",location:["Donut Graph Legend","Risk Profile","Account View"],content:"Bonds issued by governments and corporations of an emerging market economy. An emerging market economy is in the process of rapid growth and industrialization, with some liquidity in local debt and equity markets; and the existence of some form of market exchange and regulatory body. In contrast to advanced economies, emerging markets generally do not have the level of market efficiency and strict standards in account and securities regulation found in advanced economies."},{id:"SUB_ASSET_CLASS-Energy",location:["Donut Graph Legend","Risk Profile","Account View"],content:"Energy includes investments that are related to pure sources of energy such as crude oil, natural gas, refined products, biofuels, coal, and electricity.  Investments in the public equity of energy related companies are not included in this asset class."},{id:"SUB_ASSET_CLASS-GoldOtherPrecMtls",location:["Donut Graph Legend","Risk Profile","Account View"],content:"The most common precious metal is gold, but silver and platinum are also included in the group among others.  Most of the value provided by these metals is due to their rarity."
},{id:"SUB_ASSET_CLASS-Industrial-Metals",location:["Donut Graph Legend","Risk Profile","Account View"],content:"Industrial metals are hard commodities that include metals such as aluminum and copper along with others and provide exposure to industrial activity.  This is generally considered a more cyclical asset class."},{id:"SUB_ASSET_CLASS-Agriculture",location:["Donut Graph Legend","Risk Profile","Account View"],content:"These investments are typically pure agricultural commodities such as grains, oilseeds, livestock, dairy, and forest products."},{id:"LOGIN-Header-Login",location:["Login"],content:"Login Using Your Schwab Login ID and Password.*"},{id:"SIGN_UP-Title-AS",location:["Two way sign-up"],content:"If you sign in with your Schwab Login ID and password, Schwab can pre-fill your account application, saving you time and effort."},{id:"SIGN_UP-Title",location:["Two way sign-up"],content:"If you sign in with your Schwab Login ID and password, we can pre-fill your account application, saving you time and effort."},{id:"Regulatory_Questions-Title",location:["Regulatory Questions"],content:"We are required to ask the following questions. Check all that apply."},{id:"Regulatory_Questions-Title-AS",location:["Regulatory Questions"],content:"Schwab is required to ask the following questions. Check all that apply."},{id:"Plan_Recommendation_Page-Text",location:["Plan Recommendation"],content:"Based on the information you provided, this is your personal portfolio."},{id:"Plan_Recommendation_Page-Text-AS",location:["Plan Recommendation"],content:"Based on your answers, we recommend this portfolio. Once you sign up, we will review and select your final portfolio."},{id:"Plan_Confirmation_Page-Text",location:["Plan Recommendation"],content:"We have refined your portfolio. Please review before continuing."},{id:"Plan_Confirmation_Page-Joint-Text",location:["Plan Recommendation"],content:"Based on the information the first account holder provided, this is your personal portfolio. Please review before continuing."},{id:"Plan_Confirmation_Page-Text-AS",location:["Plan Recommendation"],content:"Based on your answers, we recommend this portfolio. Once you sign up, we will review and select your final portfolio."},{id:"Living_Trust_Doc-Title-AS",location:["Living Trust Doc"],content:"Schwab requires images of the first page and the signature page(s) of your trust document."},{id:"Living_Trust_Doc-Title",location:["Living Trust Doc"],content:"Images of your trust documents are required to proceed with this application."},{id:"Agreements_Page-Title",location:["Agreements"],content:"Please review the disclosures and legal agreements below, and sign or provide consent as indicated."},{id:"Agreements_Page-Title-AS",location:["Agreements"],content:"Please review the Schwab disclosures and legal agreements below, and sign or provide consent as indicated."},{id:"Confirmation_Page-Title",location:["Confirmation"],content:"You're done!"},{id:"Confirmation_Page-Title-AS",location:["Confirmation"],content:"Congratulations! You have finished opening your Schwab Account."},{id:"Update_Client_Text",location:["Profile"],content:"Please note that you can update your address, phone and email information either on schwab.com at any time or on intelligent.schwab.com after opening a Schwab Intelligent Portfolios&trade; account."},{id:"Update_Client_Text-AS",location:["Profile"],content:"Please note that you can update your address, phone and email information either on schwaballiance.com at any time or on institutionalintelligent.schwab.com after opening a Institutional Intelligent Portfolios&trade; account."},{id:"Email_Validate_Text-AS",location:["Email Validate Sent","email hard stop"],content:"Institutional Intelligent Portfolios&trade; is an all-electronic service. Schwab will send you all communications by email. This includes required records and disclosures, as Schwab will explain in more detail as part of this account opening process. Before proceeding, Schwab requires that you validate your email address. Schwab has sent an email to the email address you have provided. Please click on the link provided in the email to confirm you received this message successfully."},{id:"Email_Validate_Text",location:["Email Validate Sent","Email hard stop"],content:"Schwab Intelligent Portfolios&trade; is an all-electronic service. We will send you all communications by email. This includes required records and disclosures, as we will explain in more detail as part of this account opening process. Before proceeding, we require that you validate your email address. We have sent an  email to the email address you have provided. Please click on the link provided in the email to confirm you received this message successfully."},{id:"LOGIN-Header-Login-AS",location:["Login"],content:"Login Using Your Schwab Login ID and Password.*"},{id:"LOGIN-Header-SignUp",location:["Login"],content:"Sign Up Using Your Schwab Login ID and Password.*"},{id:"LOGIN-Header-SignUp-AS",location:["Login"],content:"Sign Up Using Your Schwab Login ID and Password.*"},{id:"LOGIN-Footer-Login",location:["Login"],content:"I do not have an account yet and want to save or continue an unfinished profile or application."},{id:"LOGIN-Footer-SignUp",location:["Login"],content:"If you open an account, your information will be shared among Schwab affiliates to provide service. You may limit certain use of your information as stated in the Privacy Policy."},{id:"Error_Login-TimedOut",location:["Login"],content:"Your session has either timed out or needs to be established.  Please login."},{id:"Error_Login-RepGenTempPassword",location:["Login"],content:"Before using this application, please login to schwab.com from your desktop computer to change your Password. Please contact a Schwab representative at 800-435-4000 for assistance."},{id:"Error_Login-UnableToComplete",location:["Login"],content:"We were unable to complete the login process.  Please try again."},{id:"Error_Login-InvalidLoginRetry",location:["Login"],content:"You entered an invalid Login ID or Password. Please try again."},{id:"Error_Login-ResetPassword",location:["Login"],content:"For your security, this login ID has been locked. Please Reset your Password to regain access."},{id:"Error_Login-TouchId",location:["Login"],content:"Something unexpected happened with Touch ID®.  Please log in using your Login ID and Password."},{id:"Error_Login-NoMercuryAccounts",location:["Login"],content:"You do not have any Schwab Intelligent Portfolios™ accounts. If you are interested in opening a Schwab Intelligent Portfolios™ account, you can get started now."},{id:"Error_Login-NoMercuryAccounts-AS",location:["Login"],content:"You do not have any Institutional Intelligent Portfolios™ accounts.  If you are interested in opening a Institutional Intelligent Portfolios™ account, you can get started now."},{id:"Error_ProgramSelector-UnableToComplete",location:["ProgramSelector"],content:"Unable to select the program.  Please try again."},{id:"Contribution_Tooltip_Info",content:"The dollar amount shown is the value you saved most recently in the investor profile questionnaire or on the goals tab."},{id:"RiskProfile_Tooltip_Info",content:"The portfolio slider reflects the portfolio that was selected for your account based on your responses to the investor profile questionnaire."},{id:"Goal_Saving_OnTarget_Summary",content:"<p>Good job getting your goal established. It’s on target.  We’ll continue monitoring your progress and let you know if anything changes.</p><p>If your circumstances have changed and you need to adjust your goal, click the “Edit” link in the upper right corner.</p>"},{id:"Goal_Saving_OnTarget_Mobile_Summary",content:"<p>Good job getting your goal established. It’s on target.  We’ll continue monitoring your progress and let you know if anything changes.</p><p>Tap on the options below if your circumstances have changed and you need to adjust your goal.</p>"},{id:"Goal_Saving_AtRisk_Summary",content:"<p>Your goal has gone off target based on our projections. Consider adjusting the contribution slider(s) based on your current financial situation, then hit the Save goal button in the upper right corner.</p><p>Do you need to readjust your time horizon or has your risk profile substantially changed for this goal? If so, click below.</p>"},{id:"Goal_Saving_AtRisk_Mobile_Summary",content:"Your goal has gone off target based on our projections.  Consider tapping on the options below to adjust your contribution amount based on your current financial situation."},{id:"Goal_Saving_OffTarget_Summary",content:"<p>Your goal has gone off target based on our projections. Consider adjusting the contribution slider(s) based on your current financial situation, then hit the Save goal button in the upper right corner.</p><p>Do you need to readjust your time horizon or has your risk profile substantially changed for this goal? If so, click below.</p>"},{id:"Goal_Saving_OffTarget_Mobile_Summary",content:"Your goal has gone off target based on our projections. Consider tapping on the options below to adjust your contribution amount based on your current financial situation."},{id:"Goal_Income_OnTarget_Summary",content:"<p>Good job getting your income goal established. It’s on target. We’ll continue monitoring your progress and let you know if anything changes.</p><p>If your circumstances have changed and you need to adjust your goal, click the “Edit” link in the upper right corner.</p>"},{id:"Goal_Income_OnTarget_Mobile_Summary",content:"<p>Good job getting your income goal established. It’s on target.  We’ll continue monitoring your progress and let you know if anything changes.</p><p>Tap on the options below if your circumstances have changed and you need to adjust your goal.</p>"},{id:"Goal_Income_AtRisk_Summary",content:"<p>Your income goal has gone off target. To continue to have income until terminationYear, you’ll need to lower your monthly withdrawal amount in the upper right hand corner or make a one-time contribution.  Once changes are made, don’t forget to hit the Save goal button!</p><p>Do you need to readjust your time horizon or has your risk profile substantially changed for this goal? If so, click below.</p>"},{id:"Goal_Income_AtRisk_Mobile_Summary",content:"Your income goal has gone off target. To continue to have income until terminationYear, you’ll need to lower your monthly withdrawal amount or make a one-time contribution below. Once changes are made, don’t forget to hit the Save button!"},{id:"Goal_Income_OffTarget_Summary",content:"<p>Your income goal has gone off target. To continue to have income until terminationYear, you’ll need to lower your monthly withdrawal amount in the upper right hand corner or make a one-time contribution.  Once changes are made, don’t forget to hit the Save goal button!</p><p>Do you need to readjust your time horizon or has your risk profile substantially changed for this goal? If so, click below.</p>"},{id:"Goal_Income_OffTarget_Mobile_Summary",content:"Your income goal has gone off target. To continue to have income until terminationYear, you’ll need to lower your monthly withdrawal amount or make a one-time contribution below.  Once changes are made, don’t forget to hit the Save button!"},{id:"Goal_Income_SetupTarget_Mobile_Summary",content:"<p>Congratulations, setting a goal is an important step for planning your income stream! Based on your questionnaire answers and our current projections, we expect you to withdraw withdrawalAmount monthly until terminationYear, with 75% likelihood. Based on your current financial situation and attitude towards risk, change the monthly withdrawal amount, use the risk profile slider, or make a one-time contribution above to see the impact to your chart.</p></br><p>Once your goal is set, we'll keep you informed of your progress towards your goal! Make sure to hit to the Save button.</p>"},{id:"Goal_Income_SetupTarget_Summary",content:"<p>Congratulations, setting a goal is an important step for planning your income stream! Based on your questionnaire answers and our current projections, we expect you to withdraw withdrawalAmount monthly until terminationYear, with 75% likelihood. Based on your current financial situation and attitude towards risk, change the monthly withdrawal amount, use the risk profile slider, or make a one-time contribution above to see the impact to your chart.</p></br><p>Once your goal is set, we'll keep you informed of your progress towards your goal! Make sure to hit to the Save goal button.</p></br><p>Do you need to adjust your time horizon or has your risk profile substantially changed for this goal? If so, click below.</p>"},{id:"Goal_Saving_SetupTarget_Mobile_Summary",content:"<p>Congratulations, setting a goal is an important first step to getting to where you want to go! Based on your questionnaire answers and our current projections, we expect you to have projectedBalanceVar saved by terminationYear. Tap the options below to adjust the contributions and/or risk profile sliders based on your current financial situation and attitude towards risk.</p></br><p>Once your goal is set, we'll keep you informed of your progress towards your goal! Make sure to hit the Save button.</p>"},{id:"Goal_Saving_SetupTarget_Summary",content:"<p>Congratulations, setting a goal is an important first step to getting to where you want to go! Based on your questionnaire answers and our current projections, we expect you to have projectedBalanceVar saved by terminationYear. Adjust contribution and/or risk profile sliders based on your current financial situation and attitude towards risk.</p></br><p>Once your goal is set, we'll keep you informed of your progress towards your goal! Make sure to hit to the Save goal button.</p></br><p>Do you need to readjust your time horizon or has your risk profile substantially changed for this goal? If so, click below.</p>"},{id:"Error_Duplicate_CUSTID",location:["joint confirm identity"],content:"The Login ID must be unique to the secondary applicant. Please re-enter your invitation PIN to try again. If the secondary applicant does not have their own Schwab Login ID and password, please choose the ‘I am new to Schwab, and do not have a Schwab Login ID or password’ option on the next screen to continue or call 855-694-5208 for additional assistance."},{id:"Goal_Saving_Accomplished_Details",content:"Congratulations! You’ve been a savvy saver and hit your savings goal!"},{id:"Goal_Saving_NotAccomplished_Details",content:"You’ve saved a tidy sum but unfortunately missed your goal."},{id:"Goal_Income_Accomplished_Details",content:"Congratulations! You’ve met your income needs by investing with Schwab Intelligent Portfolios!"},{id:"Goal_Income_NotAccomplished_Details",content:"Thanks for investing with Schwab Intelligent Portfolios for your income needs! Unfortunately, your account balance cannot support your desired monthly withdrawal amount."},{id:"Risk_Profile_Slider_Info_Message",content:'Clicking "Update Profile" will show you your updated investment portfolio. If you make this change, you are changing the risk of your portfolio. You will need to review and confirm these changes, which may trigger a rebalance resulting in capital gains or losses.<br/><br/>In addition, changing your risk profile 2 or more times within a period of 3 trading days may create settlement violations and cause your account to become restricted. This means that your account may not be included in trading, rebalancing or tax loss harvesting for a period of 90 days due to the change in your investment strategy.'},{id:"Error_Phone_SIP",content:"855-694-5208"},{id:"Error_Phone_IIP",content:"877-805-3399"}]).constant("NAVIGATION_CONFIG",[{stateId:"launch",headerType:"PREENROLLMENT",mobileHeaderType:"PREENROLLMENT",layout:"SIMPLE"},{stateId:"termsConsent",headerType:"PREENROLLMENT",mobileHeaderType:"PREENROLLMENT",layout:"SIMPLE"},{stateId:"charts",title:"Portfolio Summary",theme:"dark",showUrgentNotification:!0,configurations:[{stateId:"charts.assets",title:"Asset Allocation",mobileHeaderType:"CHILD",back:"charts"},{stateId:"charts.goal",title:"Goal",mobileHeaderType:"CHILD",back:"charts",configurations:[{stateId:"charts.goal.goalMain",title:"Goal"},{stateId:"charts.goal.goalStatusDetails",mobileHeaderType:"NONE",back:"charts.goal.goalMain"},{stateId:"charts.goal.goalValue",title:"Goal Value",back:"charts.goal.goalMain"},{stateId:"charts.goal.goalValueFirstTimeMessage",title:"Goal Value",back:"charts.goal.goalValue"},{stateId:"charts.goal.monthlyContributions",title:"Monthly Contributions",back:"charts.goal.goalMain"},{stateId:"charts.goal.monthlyContributionsPopup",title:"Monthly Contributions",back:"charts.goal.monthlyContributions"},{stateId:"charts.goal.monthlyWithdrawals",title:"Monthly Withdrawals",back:"charts.goal.goalMain"},{stateId:"charts.goal.oneTimeContribution",title:"One-Time Contribution",back:"charts.goal.goalMain"},{stateId:"charts.goal.riskProfile",title:"Adjust Risk Profile",back:"charts.goal.goalMain"},{stateId:"charts.goal.riskProfileSliderMessage",title:"Adjust Risk Profile",back:"charts.goal.riskProfile"},{stateId:"charts.goal.riskProfilePopup",title:"Adjust Risk Profile",back:"charts.goal.riskProfile"}]},{stateId:"charts.educationPopup",title:"Goal Value",mobileHeaderType:"MODAL",dismiss:"charts.goalValue",back:"hide"},{stateId:"charts.monthlyContributions",title:"Monthly Contributions",mobileHeaderType:"CHILD",back:"charts.goal.goalMain"},{stateId:"charts.monthlyWithdrawls",title:"Monthly Withdrawals",mobileHeaderType:"CHILD",back:"charts.goal.goalMain"},{stateId:"charts.oneTimeContribution",title:"One-Time Contribution",mobileHeaderType:"CHILD",back:"charts.goal.goalMain"},{stateId:"charts.riskProfile",title:"Risk Profile",mobileHeaderType:"CHILD",back:"charts.goal.goalMain"},{stateId:"charts.goalValue",title:"Goal Value",mobileHeaderType:"CHILD",back:"charts.goal.goalMain"},{stateId:"charts.performance",title:"Account Performance",mobileHeaderType:"CHILD",back:"charts",configurations:[{stateId:"charts.performance.performanceMain",title:"Account Performance"},{stateId:"charts.performance.performanceDateRange",title:"Date Range",mobileHeaderType:"CHILD",theme:"light",back:"charts.performance.performanceMain"},{stateId:"charts.performance.performanceSelectIndex",title:"Performance Select Benchmark",mobileHeaderType:"CHILD",theme:"light",back:"charts.performance.performanceMain"}]},{stateId:"charts.performanceDateRange",title:"Date Range",mobileHeaderType:"CHILD",theme:"light",back:"charts.performance"},{stateId:"charts.activity",title:"Activity",mobileHeaderType:"CHILD",back:"charts"},{stateId:"charts.activityDetail",title:"Activity Detail",mobileHeaderType:"CHILD",back:"charts.activity"},{stateId:"charts.accountSettings",mobileHeaderType:"CHILD",back:"charts"}]},{stateId:"agreements",title:"Disclosures and Agreements"},{stateId:"programSelector",headerType:"NONE",mobileHeaderType:"NONE",postLoginMobileHeaderType:"NONE",layout:"SIMPLE",title:"Choose Account"},{stateId:"rdc",mobileHeaderType:"MODAL",dismiss:"moveMoney.moveMoneyLaunch",title:"Move Money",configurations:[{stateId:"rdc.launchCheckDeposit",back:"hide"},{stateId:"rdc.reviewDepositCheck",back:"rdc.launchCheckDeposit"},{stateId:"rdc.depositCheckConfirmation",back:"rdc.launchCheckDeposit"}]},{stateId:"accountDocuments",mobileHeaderType:"CHILD",layout:"TUNNEL"},{stateId:"statements",mobileHeaderType:"CHILD",back:"accountDocuments"},{stateId:"comingsoon",mobileHeaderType:"CHILD",back:"charts",layout:"TUNNEL"},{stateId:"funding",mobileHeaderType:"MODAL",layout:"TUNNEL",configurations:[{stateId:"funding.transferSetup",back:"moveMoney.moveMoneyLaunch"}]},{stateId:"moveMoney",mobileHeaderType:"MODAL",dismiss:"moveMoney.moveMoneyLaunch",configurations:[{stateId:"moveMoney.moveMoneyLaunch",mobileHeaderType:"CHILD",back:"menu"},{stateId:"moveMoney.edit",mobileHeaderType:"CHILD",back:"charts.goal.goalMain"},{stateId:"moveMoney.funding",configurations:[{stateId:"moveMoney.funding.transferConfirmation",back:"moveMoney.funding.transferSetup"},{stateId:"moveMoney.funding.transferGoalMMConfirmation",back:"moveMoney.funding.transferSetup.editTransferGoalMMData",dismiss:"charts.goal.goalMain"},{stateId:"moveMoney.funding.TWEedit",back:"moveMoney.funding.transferSetup"},{stateId:"moveMoney.funding.transferAcknowledgement",back:"hide"},{stateId:"moveMoney.funding.transferGoalMMAcknowledgement",back:"hide",dismiss:"charts.goal.goalMain"},{stateId:"moveMoney.funding.transferSetup",back:"hide"}]}]},{stateId:"moveMoneyMessage",mobileHeaderType:"MODAL",dismiss:"charts.goal.goalMain",back:"hide"},{stateId:"behavioralQuestions",headerType:"ENROLLMENT",mobileHeaderType:"ENROLLMENT",postLoginMobileHeaderType:"MODAL",title:"Questionnaire",back:"hide",dismissRel:{web:"#/charts",mobile:"hg-app://showMenu"},layout:"SIMPLE"},{stateId:"planRecommendation",headerType:"ENROLLMENT",mobileHeaderType:"ENROLLMENT",postLoginMobileHeaderType:"MODAL",title:"Plan Recommendation",back:"hide",layout:"SIMPLE"},{stateId:"portfolioConfirmation",headerType:"ENROLLMENT",mobileHeaderType:"ENROLLMENT",postLoginMobileHeaderType:"MODAL",title:"Update Portfolio Confirmation",back:"hide",layout:"TUNNEL"},{stateId:"accountopen",headerType:"ENROLLMENT",mobileHeaderType:"ENROLLMENT",postLoginMobileHeaderType:"MODAL",title:"Account Open",back:"hide",layout:"SIMPLE",showUrgentNotification:!1,showHeader:!1,showFooter:!0,configurations:[{stateId:"accountopen.emailvalidate",headerType:"NONE",mobileHeaderType:"EMPTY"}]},{stateId:"enrollmentconfirmation",mobileHeaderType:"CHILD",postLoginMobileHeaderType:"MODAL"},{stateId:"behavioralQuestions",headerType:"ENROLLMENT",mobileHeaderType:"ENROLLMENT",postLoginMobileHeaderType:"MODAL",layout:"SIMPLE"},{stateId:"riskCapacityQuestions",headerType:"ENROLLMENT",mobileHeaderType:"ENROLLMENT",layout:"SIMPLE",postLoginMobileHeaderType:"MODAL"},{stateId:"planConfirmation",headerType:"ENROLLMENT",mobileHeaderType:"ENROLLMENT",postLoginMobileHeaderType:"MODAL",title:"Account Open",back:"hide",layout:"SIMPLE"},{stateId:"longRunActivity",headerType:"ENROLLMENT",mobileHeaderType:"ENROLLMENT",postLoginMobileHeaderType:"MODAL",title:"Account Open",back:"hide",layout:"SIMPLE"},{stateId:"setup",headerType:"ENROLLMENT",mobileHeaderType:"ENROLLMENT",title:"Account Open",layout:"SIMPLE",configurations:[{stateId:"setup.newCustomer",back:"setup"},{stateId:"setup.schwabCustomer",back:"setup"},{stateId:"setup.securityQuestions",back:"setup"}]},{stateId:"confirmation",headerType:"ENROLLMENT",mobileHeaderType:"ENROLLMENT",title:"Account Open",layout:"SIMPLE"},{stateId:"prospectLogin",headerType:"MODAL",mobileHeaderType:"MODAL",title:"Prospect Login",layout:"SIMPLE",back:"launch"},{stateId:"prospectCreate",headerType:"MODAL",mobileHeaderType:"MODAL",title:"Prospect Login",layout:"SIMPLE",back:"launch"},{stateId:"launch",headerType:"LAUNCH",mobileHeaderType:"LAUNCH",title:"Launch Screen",layout:"SIMPLE"},{stateId:"contactUs",mobileHeaderType:"MODAL",dismiss:"contactUs.contactUsLaunch",configurations:[{stateId:"contactUs.contactUsLaunch",mobileHeaderType:"CHILD",back:"menu"},{stateId:"contactUs.fileUpload",configurations:[{stateId:"contactUs.fileUpload.fileUploadLaunch",back:"hide"},{stateId:"contactUs.fileUpload.fileUploadSuccess",back:"hide"}]}]},{stateId:"personalProfile",mobileHeaderType:"CHILD",configurations:[{stateId:"personalProfile.managecontactinfo",back:"personalProfile.manageprofile"},{stateId:"personalProfile.managesecurityinfo",back:"personalProfile.manageprofile"},{stateId:"personalProfile.managehouseholdinfo",back:"personalProfile.manageprofile"},{stateId:"personalProfile.editphone",back:"personalProfile.managecontactinfo"},{stateId:"personalProfile.editemail",back:"personalProfile.managecontactinfo"},{stateId:"personalProfile.editaddress",back:"personalProfile.managecontactinfo"},{stateId:"personalProfile.editspouse",back:"personalProfile.managehouseholdinfo"}]},{stateId:"changePassword",mobileHeaderType:"CHILD",back:"personalProfile.managesecurityinfo"},{stateId:"changeSecurityQA",mobileHeaderType:"CHILD",back:"personalProfile.managesecurityinfo"},{stateId:"externalAccount",mobileHeaderType:"MODAL",back:"hide",dismiss:"moveMoney.moveMoneyLaunch",configurations:[{stateId:"externalAccount.externalAccountLaunch",back:"hide"},{stateId:"externalAccount.verifyExternalAccount",back:"externalAccount.externalAccountLaunch"},{stateId:"externalAccount.externalAccountLogin",back:"externalAccount.externalAccountLaunch"},{stateId:"externalAccount.externalAccountSetup",back:"externalAccount.externalAccountLaunch"},{stateId:"externalAccount.verifyYourAccount",back:"hide"},{stateId:"externalAccount.accountVerification",back:"externalAccount.externalAccountLaunch"},{stateId:"externalAccount.aeaAcknowledgement",back:"externalAccount.externalAccountLaunch"},{stateId:"externalAccount.trialVerification",back:"externalAccount.externalAccountLaunch"},{stateId:"externalAccount.trialDepositInitiation",back:"externalAccount.externalAccountLaunch"}]},{stateId:"statements",back:"accountDocuments"},{stateId:"getStarted",headerType:"POPOVER",mobileHeaderType:"MODAL",postLoginMobileHeaderType:"MODAL",back:"hide",dismiss:"launch",dismissRel:{web:"public://",mobile:"hg-app://"},title:"",layout:"POPOVER",showUrgentNotification:!1,showHeader:!1,showFooter:!1},{stateId:"getStartedModal",headerType:"POPOVER",mobileHeaderType:"MODAL",postLoginMobileHeaderType:"MODAL",back:"hide",dismiss:"launch",dismissRel:{web:"public://",mobile:"hg-app://"},title:"",layout:"POPOVER",showUrgentNotification:!1,showHeader:!1,showFooter:!1},{stateId:"message",headerType:"PREENROLLMENT",mobileHeaderType:"NONE",title:"",back:"hide",layout:"SIMPLE",theme:"dark",showUrgentNotification:!1,showHeader:!1,showFooter:!0,configurations:[{stateId:"message.newRoute",headerType:"NONE",mobileHeaderType:"NONE"}]},{stateId:"messageSecure",headerType:"POSTLOGIN",mobileHeaderType:"NONE",title:"",back:"hide",layout:"SIMPLE",theme:"dark",showUrgentNotification:!1,showHeader:!1,showFooter:!0,configurations:[{stateId:"message.newRoute",headerType:"NONE",mobileHeaderType:"NONE"}]},{stateId:"beneficiary",title:"Beneficiary Overview",layout:"TUNNEL",configurations:[{stateId:"beneficiary.overview",title:"Beneficiary Overview",mobileHeaderType:"CHILD",back:"charts.accountSettings"},{stateId:"beneficiary.information",title:"Beneficiary Information",mobileHeaderType:"CHILD",back:"beneficiary.overview"},{stateId:"beneficiary.interstitial",title:"What would you like to do next?",mobileHeaderType:"CHILD",back:"beneficiary.information"},{stateId:"beneficiary.sharePercentages",title:"Set Share Percentages",mobileHeaderType:"CHILD",back:"beneficiary.interstitial"},{stateId:"beneficiary.consent",title:"Consent",mobileHeaderType:"CHILD",back:"beneficiary.sharePercentages"},{stateId:"beneficiary.submit",title:"Submit Changes",mobileHeaderType:"CHILD",back:"beneficiary.consent"}]}]),angular.module("hg.common",["ui.router","angularSpinner","mgcrea.ngStrap","angular-cache","matchmedia-ng","ngResource","hg.core","ngCookies","hg.appConfig","LocalStorageModule"]).service("hgContextSvc",["$rootScope","$q","$window","$http","$log","$filter","hgDeviceSvc","hgCustomizationSvc","hgHalDocumentSvc","APP_CONFIG","LOCAL_RESOURCES","NAVIGATION_CONFIG","hgCommonJs2nSvc","hgCacheSvc",hg.common.contextSvc]).service("hgDataContextSvc",["$q","$timeout","$http","hgContextSvc",hg.common.dataContextSvc]).service("hgCalcSvc",[hg.common.calcSvc]).service("hgUuidSvc",hg.common.uuidSvc).service("hgCommonJs2nSvc",["hgJs2nManagerSvc","$rootScope",hg.common.commonJs2nSvc]).service("hgRemoteAssetSvc",["$q","$http","hgContextSvc",hg.common.hgRemoteAssetSvc]).service("hgAppCacheSvc",["$window",hg.common.appCacheSvc]).service("hgCacheSvc",["$rootScope","CacheFactory","$window",hg.common.cacheSvc]).service("hgManagedVersionSvc",["$window","hgCommonJs2nSvc","hgContextSvc",hg.common.managedVersionSvc]).service("hgCrossOriginMessageSvc",["$window","$sce","hgContextSvc",hg.common.crossOriginMessageSvc]).service("hgCobrowseSvc",["$q","$window","$timeout",hg.common.cobrowseSvc]).service("hgCMSAssetHelperSvc",["$q","$window","$timeout",hg.common.hgCMSAssetHelperSvc]).service("hgAccountOpenSvc",["$http","$q","$window","$cookieStore","$rootScope","hgContextSvc","hgAccountApplicationSvc","hgChannelHandOffProviderSvc",hg.accountOpen.accountOpenSvc]).service("hgMementoProvider",hg.common.hgMementoProvider).service("hgMemento",hg.common.hgMemento).service("hgMementoService",hg.common.hgMementoService).service("hgAccountApplicationSvc",hg.accountOpen.accountApplicationSvc).service("hgSuitabilityQuestionsSvc",hg.enrollment.suitabilityQuestionsSvc).service("hgCustomizationSvc",["$q","$http","$window","$rootScope","APP_CONFIG","hgCacheSvc","hgCustomizationJs2nSvc",hg.common.customizationSvc]).service("hgCustomizationJs2nSvc",hg.common.customizationJs2nSvc).service("hgTaggingSvc",function(){return TagParameters}).service("hgAppDynamicsSvc",function(){return appDynamicsInitialize}).service("hgTermsAndConditionsProvider",["$resource","hgContextSvc",hg.common.providers.termsAndConditionsProvider]).provider("hgTermsAndConditionsService",[hg.common.termsAndConditionsServiceProvider]).service("hgTouchTermsAndConditionsProvider",["$resource","hgContextSvc",hg.common.providers.touchTermsAndConditionsProvider]).service("hgTouchTermsAndConditionsService",["$rootScope","$q","hgContextSvc","hgTouchTermsAndConditionsProvider",hg.common.touchTermsAndConditionsService]).directive("a",["hgCommonJs2nSvc","hgCMSAssetHelperSvc","hgStateSvc","APP_CONFIG","hgContextSvc",hg.common.hgHtmlAnchor]).directive("hgRemoteAsset",["$compile","hgCMSAssetHelperSvc","hgRemoteAssetSvc",hg.common.hgRemoteAsset]).directive("hgLocalAsset",["$templateCache","$compile","hgCMSAssetHelperSvc","hgRemoteAssetSvc",hg.common.hgLocalAsset]).directive("hgPageTitle",[hg.common.hgPageTitle]).directive("hgPageSubTitle",[hg.common.hgPageSubTitle]).directive("hgPageRow",[hg.common.hgPageRow]).directive("hgButtonGroup",[hg.common.hgButtonGroup]).directive("hgButton",[hg.common.hgButton]).directive("hgButtonPrimary",[hg.common.hgButtonPrimary]).directive("logo",["$filter","hgCustomizationSvc","hgContextSvc",hg.common.logo]).directive("styleOverride",["$compile",hg.common.styleOverride]).directive("favicon",["$filter","hgContextSvc","APP_CONFIG",hg.common.favicon]).directive("smallDonut",["$filter","hgCustomizationSvc","hgStrategiesSvc",hg.common.smallDonut]).directive("hgContainer",[hg.common.hgContainer]).directive("hgPage",["hgDeviceSvc",hg.common.hgPage]).directive("hgWizardPage",["hgDeviceSvc",hg.common.hgWizardPage]).directive("hgSelector",["hgCommonJs2nSvc","$modal",hg.common.hgSelector]).directive("hgInlineMessage",[hg.common.hgInlineMessage]).directive("hgDynamicHtmlCompile",["$compile",hg.common.hgDynamicHtmlCompile]).directive("hgUrgentNotification",["$window","$interval","hgContextSvc","hgRemoteAssetSvc","hgCommonJs2nSvc",hg.common.hgUrgentNotification]).directive("hgNoNotMayFootnotes",["hgRemoteAssetSvc","$modal",hg.common.hgNoNotMayFootnotes]).directive("hgSchwabBanner",["$rootScope",hg.common.hgSchwabBanner]).directive("hgSticky",["$rootScope","$window","$timeout",hg.common.sticky.factory()]).controller("hgNoNotMayModalInstanceCtrl",["$scope","$state","$modal","noNotMayData","hgGoalService",hg.common.NoNotMayModalInstanceCtrl]).controller("hgModalInstanceCtrl",hg.common.ModalInstanceCtrl).factory("httpInjector",["$q","$rootScope","$window","hgCommonJs2nSvc","hgCacheSvc","APP_CONFIG",function(a,b,c,d,e,f){var g=/DEBUG/i.test(f.debugLogLevel),h=/VERBOSE/i.test(f.debugLogLevel),i=function(a){var b=null,c=typeof a;if("object"===c){var d=[];b=JSON.stringify(a,function(a,b){if("object"==typeof b&&null!==b){if(d.indexOf(b)!==-1)return null;d.push(b)}return b})}else b=a;return b},j=function(a){h&&console.log(i(a))},k=function(a){g&&console.log("HTTP REQUEST STATUS : "+a.status+" for : "+a.config.url),
h&&console.log(i(a))},l=function(a){g&&console.log("HTTP REQUEST : "+a.url)},m={request:function(d){return l(d),j(d),b.onlineStatus&&!b.onlineStatus.isOnline()&&b.raiseMessage(f.networkUnavailableMessage,4),d.headers["X-Channel"]="SG",c&&c.location&&c.location.hostname&&(d.headers["X-Host"]=c.location.hostname),"GET"===d.method&&d.url.indexOf("template")===-1&&d.url.indexOf(".tpl.html")===-1&&(d.cache=e.cache),d||a.when(d)},requestError:function(c){return j(c),c&&c.data&&c.data.Message?b.raiseMessage(c.data.Message?c.data.Message:c.data):b.raiseMessage(f.featureUnavailableMessage),a.reject(c)},response:function(b){return k(b),b||a.when(b)},responseError:function(c){if(k(c),!b.onlineStatus||b.onlineStatus&&b.onlineStatus.isOnline()){switch(c.status){case 401:b.$broadcast("SESSION_TIMEOUT");break;case 406:1==b.session.isLoggedIn&&b.$broadcast("SESSION_TIMEOUT");break;default:c&&c.data&&c.data.Message?b.raiseMessage(c.data.Message?c.data.Message:c.data):f&&b.raiseMessage&&b.raiseMessage(f.featureUnavailableMessage)}return a.reject(c)}return a.reject(c)}};return m}]).config(["$httpProvider",function(a){a.interceptors.push("httpInjector")}]).config(["localStorageServiceProvider","APP_CONFIG",function(a,b){a.setStorageType("sessionStorage"),a.setStorageCookie(b.cookieExpiry,"/")}]).config(["hgTermsAndConditionsServiceProvider","APP_CONFIG",function(a,b){window.location.hostname!=b.iipHostName?a.setCMSAsset("SIP-Disclosures-Schwab-Intelligent-Portfolios-Mobile-Terms"):a.setCMSAsset("Disclosures-Institutional-Intelligent-Portfolios-Mobile-Terms-AS")}]).run(["hgJs2nManagerSvc","hgCommonJs2nSvc",function(a,b){a.registerService(b)}]),angular.module("hg.core",["ui.router","matchmedia-ng"]).provider("hgRouteService",hg.router.routerServiceProvider).service("hgTaggingSvc",function(){return TagParameters}).service("hgJs2nManagerSvc",hg.core.js2n.js2nManagerSvc).service("hgUtilitySvc",hg.core.utilitySvc).service("hgRouterJs2nSvc",hg.router.routerJs2nService).service("hgRouteChangeBeginStrategy",hg.router.routeChangeBeginStrategy).service("hgRouteChangeEndStrategy",hg.router.routeChangeEndStrategy).service("hgRouteChangeLogger",hg.router.routeChangeLogger).service("hgRouteChangeHideWebStrategy",hg.router.routeChangeHideWebStrategy).service("hgRouteChangeShowWebStrategy",hg.router.routeChangeShowWebStrategy).service("hgRouteChangeWebReadyStrategy",hg.router.routeChangeWebReadyStrategy).service("hgRouteChangeAnimationStrategy",hg.router.routeChangeAnimationStrategy).service("hgRouteChangeClearHistoryStrategy",hg.router.routeChangeClearHistoryStrategy).service("hgRouteChangeRaiseNativeNavigationEventStrategy",hg.router.routeChangeRaiseNativeNavigationEventStrategy).service("hgDeviceSvc",hg.core.deviceSvc).service("hgHalDocumentSvc",hg.core.hal.halDocumentSvc).service("hgRouteChangeTaggingStrategy",hg.router.routeChangeTaggingStrategy).run(["hgJs2nManagerSvc","hgRouterJs2nSvc","hgRouteService",function(a,b,c){a.registerService(b)}]),angular.module("hg.account",["hg.core","hg.common","mgcrea.ngStrap","hg.customValidations"]).service("hgAccountDailyDataSvc",["$q","$timeout","$http","hgContextSvc",hg.account.accountDailyDataSvc]).service("hgStrategiesSvc",["$q","$window","$timeout","$http","hgContextSvc",hg.account.strategiesSvc]).service("hgStatementSvc",["$q","$timeout","$http","hgContextSvc",hg.account.statementSvc]).service("hgBeneficiarySvc",hg.account.beneficiarySvc).service("hgBeneficiaryJs2nSvc",hg.account.beneficiaryJs2nSvc).controller("hgRegInsertsModalCtrl",["$scope","$window","$modalInstance","hgCommonJs2nSvc","documents","parentDocumentId","items","selectedItem",hg.account.RegInsertsModalCtrl]).controller("hgStatementsCtrl",["$scope","$rootScope","$state","hgContextSvc","$window","$modal","documentType","hgStatementSvc","hgCommonJs2nSvc",hg.account.statementsCtrl]).controller("hgAccountDocumentsCtrl",["$scope","$rootScope","$state","hgContextSvc",hg.account.accountDocumentsCtrl]).controller("hgBeneficiaryCtrl",hg.account.beneficiaryCtrl).config(["hgRouteServiceProvider",function(a){a.register(new hg.account.accountRouteRegistry)}]),angular.module("hg.assets",["mgcrea.ngStrap.modal","mgcrea.ngStrap.popover","mgcrea.ngStrap.tooltip","mgcrea.ngStrap.helpers.dateParser","mgcrea.ngStrap.datepicker","ngSanitize","hg.core","hg.common","hg.account","hg.ui","hg.uiComponents","hg.auth","hg.externalAccountMod","hg.enrollment","infinite-scroll"]).directive("hgAssetChart",["$window",hg.assets.assetChart]).directive("hgTwrChart",["$filter",hg.assets.twrChart]).directive("hgActivityFeed",["$rootScope","$state",hg.assets.hgActivityFeed]).directive("hgGoalSavingsScoreCard",hg.assets.GoalSavingsScoreCardDir.factory()).directive("hgIncomeScorecard",hg.assets.hgIncomeScorecard).directive("hgQuickView",hg.assets.hgQuickView).directive("hgParameterSelector",hg.assets.hgParameterSelector).directive("hgPerformanceBenchmark",hg.assets.hgPerformanceBenchmark).service("hgPortfolioSvc",hg.assets.portfolioSvc).service("hgPortfolioJs2nSvc",hg.assets.portfolioJs2nSvc).service("hgGoalJs2nSvcAdapter",hg.assets.hgGoalJs2nSvcAdapter).service("hgPerformanceJs2nSvc",hg.assets.performanceJs2nSvc).service("hgAccountSettingsSvc",["$q","$http","hgContextSvc","hgDataContextSvc",hg.assets.accountSettingsSvc]).service("hgGoalService",hg.assets.GoalService).service("hgMonteCarloService",schwab.core.MonteCarloService).service("hgPerformanceService",hg.assets.performanceSvc).controller("hgDashboardCtrl",hg.assets.dashboardCtrl).controller("GoalController",hg.assets.GoalController).controller("hgPerformanceCtrl",hg.assets.performanceCtrl).controller("hgSelectBenchmarkModalCtrl",["$scope","$modal","items","benchmarkSelected","$state",hg.assets.SelectBenchmarkModalCtrl]).controller("hgAccountSettingsCtrl",["$scope","$rootScope","$state","$window","$filter","$timeout","$q","hgContextSvc","hgAccountSettingsSvc","hgSuitabilityQuestionsSvc","hgAccountApplicationSvc","hgGoalService","hgEnrollmentCommonSvc","hgBeneficiarySvc",hg.assets.accountSettingsCtrl]).config(["hgRouteServiceProvider",function(a){a.register(new hg.assets.assetsRouteRegistry)}]).run(["hgJs2nManagerSvc","hgPortfolioJs2nSvc","hgGoalJs2nSvcAdapter","hgPerformanceJs2nSvc",function(a,b,c,d){a.registerService(b),a.registerService(c),a.registerService(d)}]),angular.module("hg.widget",["mgcrea.ngStrap.helpers.dimensions","mgcrea.ngStrap.tooltip"]).directive("hgTitleStyle1",hg.widget.hgTitleStyle1).directive("hgTitleStyle2",hg.widget.hgTitleStyle2).directive("hgTitleStyle3",hg.widget.hgTitleStyle3).directive("hgTitleStyle4",hg.widget.hgTitleStyle4).directive("hgTitleStyle5",hg.widget.hgTitleStyle5).directive("hgButtonStyle1",hg.widget.hgButtonStyle1).directive("hgTextBlock",hg.widget.hgTextBlock).directive("hgCounter",hg.widget.hgCounter).directive("hgRiskProfile",hg.widget.hgRiskProfile).directive("hgContribution",hg.widget.hgContribution).directive("hgTextBlock2",hg.widget.hgTextBlock2).directive("hgInputStyle",hg.widget.hgInputStyle).directive("hgSummaryStatement",hg.widget.hgSummaryStatement).directive("hgDisclosureText",hg.widget.hgDisclosureText).directive("hgProgressBar",hg.widget.hgProgressBar).directive("statusDonutChart",hg.widget.statusDonutChart).directive("hgTargetAmount",hg.widget.hgTargetAmount).directive("hgMiniChart",hg.widget.hgMiniChart).directive("hgGoalStatus",hg.widget.hgGoalStatus).directive("hgCheckList",hg.widget.hgCheckList),angular.module("hg.accountOpen",["hg.core","hg.common","hg.account","ui.router","mgcrea.ngStrap","ui.bootstrap-slider","ui.bootstrap.showErrors","hg.customValidations","hg.symbolSearch","hg.fileUpload"]).service("hgEquifaxSvc",["$q","$timeout","$http","$window","hgContextSvc",hg.accountOpen.equifaxSvc]).service("hgChannelHandOffProviderSvc",["$resource","hgContextSvc",hg.accountOpen.providers.channelHandOffProvider]).controller("hgAccountOpenBaseCtrl",["$q","$scope","$rootScope","$state","$location","hgContextSvc","hgCommonJs2nSvc","hgAuthJs2nSvc","hgAccountOpenSvc","hgEquifaxSvc","hgAccountApplicationSvc","$timeout","$filter","hgStateSvc","hgAuthSvc",hg.accountOpen.accountOpenBaseCtrl]).config(["hgRouteServiceProvider",function(a){a.register(new hg.accountOpen.accountOpenRouteRegistry)}]),angular.module("hg.enrollment",["hg.core","hg.common","hg.account","ui.router","mgcrea.ngStrap","ui.bootstrap-slider","ui.bootstrap.showErrors","hg.customValidations","hg.symbolSearch","hg.fileUpload"]).service("hgGetStartedRouteChangeHandlerSvc",hg.enrollment.enrollmentGetStartedRouteChangeHandlerSvc).service("hgEnrollmentCommonSvc",hg.enrollment.enrollmentCommonSvc).controller("hgEnrollmentCtrl",["$q","$scope","$rootScope","$state","$location","hgContextSvc","hgCommonJs2nSvc","hgAuthJs2nSvc","hgEnrollmentCommonSvc","hgSuitabilityQuestionsSvc","hgStrategiesSvc","$timeout","$filter","hgStateSvc","hgAuthSvc","hgGoalService",hg.enrollment.enrollmentCtrl]).controller("hgGetStartedCtrl",hg.enrollment.getStartedCtrl).controller("hgGetStartedModalCtrl",hg.enrollment.getStartedModalCtrl).config(["hgRouteServiceProvider",function(a){a.register(new hg.enrollment.enrollmentRouteRegistry)}]),angular.module("hg.app",["ui.router","hg.templates","hg.appConfig","hg.core","hg.common","hg.account","hg.accountOpen","hg.enrollment","hg.assets","hg.widget","hg.launch","hg.auth","hg.fundingMod","hg.externalAccountMod","hg.checkDepositMod","hg.moveMoneyMod","hg.user","hg.uiComponents","hg.domain","hg.ui","hg.js2n","mgcrea.ngStrap","angularSpinner","ngAnimate","matchmedia-ng","ngAria","hg.hig","blueimp.fileupload"]).service("hgStateSvc",["$rootScope","$q","$window","$timeout","$state","$filter","hgContextSvc","hgCommonJs2nSvc","hgAuthSvc","hgCrossOriginMessageSvc","hgExternalAccountSvc","hgEnrollmentCommonSvc","hgRemoteAssetSvc","hgManagedVersionSvc","hgAuthJs2nSvc","hgRouterJs2nSvc","hgProgramSelectorSvc","$cookieStore",hg.app.stateSvc]).service("hgStateJs2nSvc",["hgJs2nManagerSvc","hgStateSvc",hg.common.stateJs2nSvc]).controller("hgRootCtrl",["$scope","$state",hg.app.rootCtrl]).controller("hgBlankCtrl",["$scope","$state",hg.app.blankCtrl]).controller("hgHeaderCtrl",["$scope","$rootScope","$state","matchmedia",hg.app.headerCtrl]).controller("hgLayoutCtrl",["$scope","$rootScope","$state","$timeout","$location","$window","matchmedia","hgContextSvc","hgProspectLoginSvc","hgStateSvc","hgCobrowseSvc","hgCommonJs2nSvc","hgAuthSvc",hg.app.layoutCtrl]).controller("hgMenuCtrl",["$scope","$rootScope","$window","hgStateSvc","hgAuthSvc","hgStrategiesSvc","hgCommonJs2nSvc","hgContextSvc","hgSuitabilityQuestionsSvc","hgGoalService",hg.app.menuCtrl]).controller("hgStyleGuideCtrl",["$scope","$anchorScroll",hg.app.styleGuideCtrl]).controller("hgCmsAssetCtrl",["$scope","$state","assetId",hg.app.cmsAssetCtrl]).controller("hgResetCtrl",["$scope","$state","$window","hgCacheSvc","hgAuthSvc",hg.app.resetCtrl]).controller("hgMessageCtrl",hg.app.messageCtrl).service("hgMenuJs2nSvc",["$rootScope","hgJs2nManagerSvc",hg.app.menuJs2nSvc]).service("hgMenuSvc",["$rootScope","$filter","hgContextSvc","hgStrategiesSvc","hgMenuJs2nSvc",hg.app.menuSvc]).factory("$exceptionHandler",["$log","$injector",function(a,b){return function(c,d){a.error.apply(a,arguments);var e=b.get("$rootScope");e.$broadcast("UNHANDLED_EXCEPTION_EVENT",c,d)}}]).run(["hgRouteChangeBeginStrategy","hgRouteChangeLogger","hgRouteChangeShowWebStrategy","hgRouteChangeHideWebStrategy","hgAuthenticationRouteChangeStrategy","hgRouteChangeAnimationStrategy","hgRouteChangeRaiseNativeNavigationEventStrategy","hgRouteChangeClearHistoryStrategy",function(a,b,c,d,e,f,g,h){a.setSuccessor(b).setSuccessor(h).setSuccessor(f).setSuccessor(e).setSuccessor(d).setSuccessor(g)}]).run(["hgRouteChangeEndStrategy","hgRouteChangeWebReadyStrategy","hgRouteChangeTaggingStrategy",function(a,b,c){a.setSuccessor(b).setSuccessor(c)}]).run(["$state","$rootScope","$window","$location","hgAuthSvc","hgContextSvc","hgAppCacheSvc","hgManagedVersionSvc","hgCrossOriginMessageSvc","hgSuitabilityQuestionsSvc","hgStateSvc","hgJs2nManagerSvc","hgCommonJs2nSvc","hgStateJs2nSvc","hgAuthJs2nSvc","hgMenuJs2nSvc","hgMenuSvc","hgAuthLoginFactory","hgTaggingSvc","hgAppDynamicsSvc","hgMoneyTransferSvc",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){var u=new hg.app.run(a,b,c,d,e,f,g,h,i,j,k,m,o,p,q,r,s,t);u.init(),l.registerService(n),l.registerService(p)}]).config(["$stateProvider","$urlRouterProvider","$sceDelegateProvider","$httpProvider","APP_CONFIG","$provide",function(a,b,c,d,e,f){0!=e.clientApiUrl.indexOf("http")&&(e.clientApiUrl=window.location.protocol+"//"+window.location.hostname.replace("local.","")+e.clientApiUrl,e.cmsPublicIntelligentPageAssetUrl=window.location.protocol+"//"+window.location.hostname.replace("local.","")+e.cmsPublicIntelligentPageAssetUrl,e.coreDataServiceApiUrl=window.location.protocol+"//"+window.location.hostname.replace("local.","")+e.coreDataServiceApiUrl,e.accountOpenServiceApiUrl=window.location.protocol+"//"+window.location.hostname.replace("local.","")+e.accountOpenServiceApiUrl,e.dashboardServiceApiUrl=window.location.protocol+"//"+window.location.hostname.replace("local.","")+e.dashboardServiceApiUrl,e.enrollmentServiceApiUrl=window.location.protocol+"//"+window.location.hostname.replace("local.","")+e.enrollmentServiceApiUrl,e.chatGateWay=window.location.protocol+"//"+window.location.hostname.replace("local.","")+e.chatGateWay,e.dataServices[0].url=window.location.protocol+"//"+window.location.hostname.replace("local.","")+e.dataServices[0].url,e.dataServices[1].url=window.location.protocol+"//"+window.location.hostname.replace("local.","")+e.dataServices[1].url,e.dataServices[2].url=window.location.protocol+"//"+window.location.hostname.replace("local.","")+e.dataServices[2].url,e.dataServices[3].url=window.location.protocol+"//"+window.location.hostname.replace("local.","")+e.dataServices[3].url,e.identityProviderBaseUrl=window.location.protocol+"//"+window.location.hostname.replace("local.","")+e.identityProviderBaseUrl,e.identityProviderLoginUrl=window.location.protocol+"//"+window.location.hostname.replace("local.","")+e.identityProviderLoginUrl,e.identityProviderOTPLoginUrl=window.location.protocol+"//"+window.location.hostname.replace("local.","")+e.identityProviderOTPLoginUrl,e.identityProviderLogoutUrl=window.location.protocol+"//"+window.location.hostname.replace("local.","")+e.identityProviderLogoutUrl,e.blogUrl=window.location.protocol+"//"+window.location.hostname.replace("local.","")+e.blogUrl,e.whitePaperUrl=window.location.protocol+"//"+window.location.hostname.replace("local.","")+e.whitePaperUrl,e.FAQUrl=window.location.protocol+"//"+window.location.hostname.replace("local.","")+e.FAQUrl,e.comingSoonUrl=window.location.protocol+"//"+window.location.hostname.replace("local.","")+e.comingSoonUrl,e.IIPBlogUrl=window.location.protocol+"//"+window.location.hostname.replace("local.","")+e.IIPBlogUrl,e.IIPFAQUrl=window.location.protocol+"//"+window.location.hostname.replace("local.","")+e.IIPFAQUrl,e.IIPWhitePaperUrl=window.location.protocol+"//"+window.location.hostname.replace("local.","")+e.IIPWhitePaperUrl),0!=e.url.indexOf("http")&&(e.url=e.url.replace("//","/"),e.url=window.location.protocol+"//"+window.location.host+e.url),new hg.app.config(a,b,c,d,e,f)}]).directive("ngSmartBanner",["hgContextSvc",function(a){return{retstrict:"E",replace:!0,link:function(b){var c=document.createElement("meta");c.name="apple-itunes-app",c.content="app-id="+(a.isIIP()?"989870465":"951120920"),document.getElementsByTagName("head")[0].appendChild(c)}}}]).directive("ngEnter",function(){return function(a,b,c){b.bind("keydown keypress",function(b){13!==b.which&&32!==b.which||(a.$apply(function(){a.$eval(c.ngEnter)}),b.preventDefault())})}}).directive("ngFocus",["$timeout","$parse",function(a,b){return{link:function(c,d,e){var f=b(e.ngFocus);c.$watch(f,function(b){1==b&&a(function(){d[0].focus()})}),d.bind("blur",function(){f&&f.assign&&c.$apply(f.assign(c,!1))})}}}]).directive("ngTap",function(){return function(a,b,c){var d;d=!1,b.bind("mousedown",function(a){b.addClass("highlighted"),d=!0}),b.bind("mouseup",function(a){b.removeClass("highlighted"),d=!0}),b.bind("touchstart",function(a){b.addClass("highlighted"),d=!0}),b.bind("touchmove",function(a){b.removeClass("highlighted"),d=!1}),b.bind("touchend",function(e){b.removeClass("highlighted"),d&&a.$apply(c.ngTap,b)})}}).directive("form",["hgContextSvc",function(a){return{restrict:"E",link:function(b,c,d,e){a.isChrome()&&c.attr("autocomplete","off")}}}]).directive("hgCurrencyInput",["$filter","$parse","hgCommonJs2nSvc",function(a,b,c){return{require:"ngModel",restrict:"A",link:function(b,d,e,f){function g(a,b){if(!a)return a;var c=0;e.maxvalue&&(c=parseFloat(e.maxvalue));var d=.01;e.minvalue&&(d=parseFloat(e.minvalue));var g=a.toString().replace(/[^0-9.]+/g,"").replace(/\.{2,}/,"."),h=g.split(".");h.length>=2&&(g=h[0]+"."+h[1].slice(0,2)),b||f.$render();var i=new RegExp("[0-9]");f.$setValidity("hgCurrencyInput",i.test(g)&&g>=d&&(!c||g<=c));var j=!!e.hgCurrencyReturnNumeric;return j?Number(g):g}d.on("touchstart",function(){c.isAndroid()||(d.attr("type","number"),d.val(f.$viewValue))}),d.on("blur",function(){d.attr("type","text"),f.$modelValue==f.$viewValue&&g(f.$viewValue,!1)}),f.$parsers.unshift(g),f.$render=function(){var b=g(f.$viewValue,!0);if(!b)return void d.val(void 0);var c,h=!!e.hgCurrencyRoundingRequired;c=h?"$"+a("number")(parseFloat(b),0):"$"+a("number")(parseFloat(b),2),d.val(c)}}}}]),angular.module("hg.launch",["mgcrea.ngStrap","hg.core"]).controller("hgLaunchCtrl",["$scope","$rootScope","$modal",hg.launch.launchCtrl]),angular.module("hg.auth",["ui.router","mgcrea.ngStrap","hg.core","hg.common"]).service("hgAuthenticationRouteChangeStrategy",hg.auth.authenticateRouteChangeStrategy).service("hgProspectLoginSvc",["$q","$window","$timeout","$http","hgContextSvc",hg.auth.prospectLoginSvc]).service("hgAuthJs2nSvc",["$rootScope","hgJs2nManagerSvc","hgAuthSvc",hg.auth.authJs2nSvc]).service("hgAuthSvc",hg.auth.authSvc).service("hgAuthnProviderSvc",["$resource","hgContextSvc",hg.auth.providers.authnProvider]).service("hgAuthLoginFactory",[hg.auth.AuthModelFactory]).service("hgSessionTimeoutStrategy",hg.auth.SessionTimeoutStrategy).service("hgProgramSelectorSvc",hg.domain.advisors.programSelectorSvc).controller("hgProspectLoginCtrl",["$q","$scope","$state","$window","$rootScope","$location","hgAuthSvc","hgContextSvc","hgProspectLoginSvc","hgSuitabilityQuestionsSvc","hgAccountApplicationSvc","hgAccountOpenSvc","hgRouterJs2nSvc",hg.auth.prospectLoginCtrl]).controller("hgLoginCtrl",hg.auth.loginCtrl).controller("hgLoginModalCtrl",hg.auth.loginModalCtrl).controller("hgLoginInterventionCtrl",["$scope","$rootScope","$window","$timeout","hgStateSvc","hgAuthSvc","hgContextSvc","hgCommonJs2nSvc",hg.auth.loginInterventionCtrl]).config(["hgRouteServiceProvider",function(a){a.register(new hg.auth.authRouteRegistry)}]).run(["hgJs2nManagerSvc","hgAuthJs2nSvc",function(a,b){a.registerService(b)}]),angular.module("hg.fundingMod",["ui.router","hg.core","hg.common","hg.moveMoneyMod","mgcrea.ngStrap.tooltip","mgcrea.ngStrap.helpers.dateParser","mgcrea.ngStrap.datepicker"]).filter("excludeFromArrayFilter",function(){return hg.fundingMod.excludeFromArrayFilter.excludeItem}).filter("hgCurrency",["$filter",function(a){var b=a("currency");return function(a){return hg.fundingMod.hgCurrencyFilter.hgCurrency(a,b)}}]).controller("hgAgreementModalCtrl",["$scope","$state","$modalInstance",hg.fundingMod.AgreementModalCtrl]).controller("hgRecurringContributionModalCtrl",["$scope","$rootScope","$state","$modal",hg.fundingMod.RecurringContributionModalCtrl]).controller("hgFundingCtrl",hg.fundingMod.fundingCtrl).directive("decimalPlaces",function(){return{link:function(a,b,c){b.bind("keypress",function(a){var b=$(this).val()+(0!==a.charCode?String.fromCharCode(a.charCode):"");0===$(this).val().search(/(.*)\.[0-9][0-9]/)&&b.length>$(this).val().length&&a.preventDefault()})}}}).directive("twePercentValidation",function(){return{require:"ngModel",link:function(a,b,c,d){function e(a){return j?a:Math.round(1e3*a)/1e3}function f(a){var b=g(a),c=h(a);return d.$setValidity("belowMinimum",b),d.$setValidity("maxPercentExceeded",c),b&&c}function g(b){if((i||j)&&(a||a.transferData||a.transferData.TweDetails)){var c=a.transferData.TweDetails,d=i?c.StateMinimum:c.FedMinimum,e=i?c.CanOptOutState:c.CanOptOutFed,f=e&&(i?c.stateOptOut:c.fedOptOut);return 0==b&&e&&(i?c.stateOptOut=0!=c.modifiedStateTaxRate:c.fedOptOut=0!=c.modifiedFedTaxRate),b/100>=d||0==+b&&f}}function h(b){if((i||j)&&(a||a.transferData||a.transferData.TweDetails)){var c=j?b:a.transferData.TweDetails.modifiedFedTaxRate,d=i?b:a.transferData.TweDetails.modifiedStateTaxRate;return+c+ +d<=99.99}}var i="modifiedStateTax"==b.attr("name"),j="modifiedFedTax"==b.attr("name");d.$parsers.unshift(function(a){var c=e(a);return f(c)&&b.val(c),c}),d.$formatters.unshift(function(a){return f(a),a})}}}),angular.module("hg.externalAccountMod",["ui.router","hg.core","hg.common"]).service("hgExternalAccountSvc",["$q","$timeout","$http","$state","hgContextSvc",hg.externalAccountMod.externalAccountSvc]).controller("hgAEATransferCtrl",["$scope","$rootScope","$state","hgContextSvc","$modal","$filter","$controller","hgCommonJs2nSvc","hgExternalAccountSvc","hgMoneyTransferSvc",hg.externalAccountMod.aeaTransferCtrl]).controller("hgTrialVerificationCtrl",["$scope","$rootScope","$state","hgContextSvc","$modal","$filter","$controller","hgCommonJs2nSvc","hgExternalAccountSvc","hgMoneyTransferSvc",hg.externalAccountMod.trialVerificationCtrl]),angular.module("hg.user",["ngSanitize","ui.router","hg.core","hg.common","hg.externalAccountMod"]).service("hgStateSvc",["$rootScope","$q","$window","$timeout","$state","$filter","hgContextSvc","hgCommonJs2nSvc","hgAuthSvc","hgCrossOriginMessageSvc","hgExternalAccountSvc","hgEnrollmentCommonSvc","hgRemoteAssetSvc","hgManagedVersionSvc","hgAuthJs2nSvc","$cookies",hg.app.stateSvc]).service("hgUserProfileSvc",["$q","$timeout","$http","hgCacheSvc","hgContextSvc",hg.user.userProfileSvc]).filter("excludeListOfItemsFromArrayFilter",function(){return hg.fundingMod.excludeFromArrayFilter.excludeListOfItems}).controller("hgUserProfileCtrl",["$scope","$rootScope","$state","hgContextSvc","hgUserProfileSvc","hgAuthSvc",hg.user.userProfileCtrl]).controller("hgSecurityCtrl",["$scope","$rootScope","$state","hgContextSvc","hgUserProfileSvc",hg.user.securityCtrl]),angular.module("hg.notificationsCenter",["ui.router","hg.core"]).controller("hgNotificationsCenterCtrl",["$scope","$state",hg.notificationsCenterMod.notificationsCenterCtrl]),angular.module("hg.checkDepositMod",["hg.core","hg.common","ui.router","hg.customValidations"]).service("hgCheckDepositSvc",["$q","$http","hgContextSvc",hg.checkDepositMod.checkDepositSvc]).controller("hgCheckDepositCtrl",["$scope","$rootScope","$state","hgContextSvc","$timeout","$filter","hgCheckDepositSvc","hgCommonJs2nSvc",hg.checkDepositMod.checkDepositCtrl]),angular.module("hg.moveMoneyMod",["ui.router","hg.core","hg.common"]).service("hgMoneyTransferSvc",hg.moveMoneyMod.moneyTransferSvc).service("hgMoveMoneyNavigationService",hg.moveMoney.moveMoneyNavigationService).controller("hgMoveMoneyCtrl",["$scope","$rootScope","$state","hgContextSvc","$modal","$filter","$q","hgMoneyTransferSvc","hgCommonJs2nSvc","hgSuitabilityQuestionsSvc","$location",hg.moveMoneyMod.moveMoneyCtrl]).controller("hgMoveMoneyMessageCtrl",["$scope","$state",hg.moveMoneyMod.moveMoneyMessageCtrl]).controller("editTransactionCtrl",["$scope","$window","$rootScope","$state","hgContextSvc","hgMoneyTransferSvc",hg.moveMoneyMod.editTransactionCtrl]).config(["hgRouteServiceProvider",function(a){a.register(new hg.moveMoneyMod.moveMoneyRouteRegistry)}]),angular.module("hg.domain",[]).service("hgProgramSelectorSvc",[hg.domain.advisors.programSelectorSvc]).service("hgFileUploadSvc",["$q","$rootScope","hgContextSvc","hgFileUploadJs2nSvc",hg.domain.contactUs.fileUploadSvc]),angular.module("hg.uiComponents",["ui.router","hg.templates","mgcrea.ngStrap","hg.core","hg.common"]).directive("launchChat",["$window","hgContextSvc",function(a,b){return{templateUrl:"templates/uiComponents/launchChat.html",restrict:"AE",scope:{chatLabel:"@",chatLinkTitle:"@",isUserAClient:"@"},controller:["$scope","$rootScope",function(c,d){c.launchChat=function(){var b=e(),c=f();a.open(b,"_blank",c)};var e=function(){var c,e={};e.url=b.appConfig.chatUrl,e.EMAIL="";var f=d.session.isLoggedIn;1==f?(d.isSIP?(e.questId=b.appConfig.chatClientQuestId,e.portId=b.appConfig.chatClientPortId):d.isIIP&&(e.questId=b.appConfig.HgChatAdvisorQuestId,e.portId=b.appConfig.HgChatAdvisorPortId),c=hg.app.utils.parseName(b.getSessionData().identity.userId),null!=b.getSessionData().identity.EmailAddress&&(e.EMAIL=b.getSessionData().identity.EmailAddress)):(e.questId=b.appConfig.chatProspectQuestId,e.portId=b.appConfig.chatProspectPortId),null!=c?(e.firstname=c[1]+c[4],e.lastname=c[3]):(e.firstname="",e.lastname=""),e.gateWay=b.appConfig.chatGateWay,e.nareferer=encodeURIComponent(a.location.href);var g=e.url+"?questId="+e.questId+"&portId="+e.portId+"&EMAIL="+e.EMAIL+"&FirstName="+e.firstname+"&LastName="+e.lastname+"&gateWay="+e.gateWay+"&nareferer="+e.nareferer;return g},f=function(a){var b=null,c=535,d=510,e=a&&a.width?a.width:c,f=a&&a.height?a.height:d;return b="width="+e+",height="+f+",resizable=1,scrollbars=0"}}],link:function(a,b,c){}}}]).directive("customToolTip",["$tooltip","$window","$timeout","hgContextSvc",function(a,b,c,d){return{templateUrl:"templates/uiComponents/customToolTip.html",restrict:"AE",controller:["$scope","$rootScope",function(a,b){}],link:function(a,b,d){a.tooltip={title:"Tip"},a.$watch("chartStatus.chartLoaded",function(b,d){b&&c(function(){a.$emit("TOGGLE_TOOL_TIP_EVENT",{removeTooltip:!1})},100)}),a.cancel=function(){a.$emit("TOGGLE_TOOL_TIP_EVENT",{removeTooltip:!0})}}}}]),angular.module("hg.ui",["hg.domain","hg.account"]).controller("hgProgramSelectorCtrl",["$scope","$rootScope","$state","hgContextSvc","hgAuthSvc","hgProgramSelectorSvc","hgExternalAccountSvc",hg.ui.advisors.programSelectorCtrl]).config(["hgRouteServiceProvider",function(a){a.register(new hg.ui.uiRouteRegistry)}]).controller("hgFileUploadCtrl",["$scope","$rootScope","$state","hgContextSvc","hgFileUploadSvc",hg.ui.contactUs.fileUploadCtrl]).controller("hgContactUsCtrl",["$scope","$rootScope","$state","$window","$document","hgContextSvc","hgCommonJs2nSvc","hgCobrowseSvc","hgFileUploadSvc",hg.ui.contactUs.contactusCtrl]).controller("hgConfirmDialogModalInstanceCtrl",["$scope","$modalInstance",hg.ui.common.confirmDialogModalInstanceCtrl]).directive("hgFileUploadUtil",["$rootScope","hgContextSvc","$timeout","$modal","$window",hg.ui.common.hgFileUploadUtil]).directive("hgMultiSeriesChart",hg.ui.common.MultiSeriesChartDir.factory()),angular.module("hg.js2n",["hg.core","hg.common","hg.moveMoneyMod"]).service("hgProgramSelectorJs2nAdapter",["$rootScope","hgJs2nManagerSvc","hgProgramSelectorSvc",hg.js2n.advisors.programSelectorJs2nAdapter]).service("hgProgramSelectorSvc",hg.domain.advisors.programSelectorSvc).run(["hgJs2nManagerSvc","hgProgramSelectorJs2nAdapter",function(a,b){a.registerService(b)}]).service("hgFileUploadJs2nSvc",["$rootScope","hgJs2nManagerSvc",hg.js2n.contactUs.fileUploadJs2nSvc]).run(["hgJs2nManagerSvc","hgFileUploadJs2nSvc",function(a,b){a.registerService(b)}]).service("hgTermsAndConditionsJs2nAdaptor",["$rootScope","hgJs2nManagerSvc","hgTermsAndConditionsService","hgTouchTermsAndConditionsService",hg.js2n.common.termsAndConditionsJs2nAdapter]).run(["hgJs2nManagerSvc","hgTermsAndConditionsJs2nAdaptor",function(a,b){a.registerService(b)}]).service("hgMoveMoneyNavigationServiceJs2nAdapter",["$rootScope","hgJs2nManagerSvc","hgMoveMoneyNavigationService",hg.js2n.moveMoney.moveMoneyNavigationServiceJs2nAdapter]).run(["hgJs2nManagerSvc","hgMoveMoneyNavigationServiceJs2nAdapter",function(a,b){a.registerService(b)}]),angular.module("hg.hig",["ui.router","angularSpinner","mgcrea.ngStrap","angular-cache","matchmedia-ng","ngResource","hg.core","ngCookies"]).directive("hgSelectorListItem",[hg.hig.hgSelectorListItem]),function(){function a(a,b){var c=a.indexOf(b),d=a.lastIndexOf(b);return c!=d}function b(a,b,c,d){var e,f=new Date;a-=1;var g=f.getDate(),h=f.getMonth(),i=f.getFullYear(),j=!0;if(a<0||a>11)return!1;var k=[31,28,31,30,31,30,31,31,30,31,30,31];return(c%400==0||c%100!=0&&c%4==0)&&(k[1]=29),!(b<=0||b>k[a])&&(j&&f.getTime()<new Date(c,a,b).getTime()&&(j=!1),j&&(e=h>a||h==a&&g>=b?i-c:i-c-1,(void 0==d||0==d)&&e>120&&(j=!1),d&&e>=18&&(j=!1),(void 0==d||0==d)&&e<18&&(j=!1)),j)}function c(a,b,c){var d,e=new Date;a-=1;var f=e.getDate(),g=e.getMonth(),h=e.getFullYear();if(a<0||a>11)return!1;var i=[31,28,31,30,31,30,31,31,30,31,30,31];return(c%400==0||c%100!=0&&c%4==0)&&(i[1]=29),!(b<=0||b>i[a])&&(!(e.getTime()<new Date(c,a,b).getTime())&&(d=g>a||g==a&&f>=b?h-c:h-c-1,!(d>120)))}function d(a,b,c){a-=1;var d=!0;if(a<0||a>11)return!1;var e=[31,28,31,30,31,30,31,31,30,31,30,31];return(c%400==0||c%100!=0&&c%4==0)&&(e[1]=29),!(b<=0||b>e[a])&&d}var e;e=angular.module("hg.customValidations",[]),e.directive("validateName",function(){return{restrict:"A",require:"ngModel",link:function(b,c,d,e){e.$parsers.unshift(function(b){var c=!1;if("undefined"==b||null==b||""==b)return e.$setValidity("validateName",!0),b;var f=new RegExp("^[a-zA-Z .'-]{1,"+b.length+"}$"),g=new RegExp("[a-zA-Z]+");return b.match(g)&&b.match(f)&&(c=!0),c&&("middle"==d.validateName?0!=b.indexOf(".")&&b.indexOf("..")==-1||(c=!1):c=!(0==b.indexOf(".")||b.indexOf(".")>0&&a(b,"."))&&(!(0==b.indexOf("'")||b.indexOf("'")>=0&&a(b,"'"))&&(0!=b.indexOf("-")&&b.indexOf("--")==-1&&(0!=b.indexOf(" ")&&b.indexOf("  ")==-1)))),e.$setValidity("validateName",c),b})}}}),e.directive("validateDateOfBirth",function(){return{restrict:"A",require:"ngModel",link:function(a,c,d,e){e.$parsers.unshift(function(c){var d=!1,f=a.custodialFlag;if("undefined"==c||null==c||""==c)return e.$setValidity("validateDateOfBirth",!0),c;var g=new RegExp("^[0-9]{2}/[0-9]{2}/[0-9]{4}$"),h=new RegExp("^[0-9]{4}-[0-9]|1[0-2]-[0-9]{2}$");if(c.match(g)){var i=c.split("/");d=b(parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10),f)}if(c.match(h)){var i=c.split("-");d=b(parseInt(i[1],10),parseInt(i[2],10),parseInt(i[0],10),f)}return e.$setValidity("validateDateOfBirth",d),d?c:void 0})}}}),e.directive("validateAnyAgeDateOfBirth",function(){return{restrict:"A",require:"ngModel",link:function(a,b,d,e){e.$parsers.unshift(function(a){var b=!1;if("undefined"==a||null==a||""==a)return e.$setValidity("validateAnyAgeDateOfBirth",!0),a;var d=new RegExp("^[0-9]{2}/[0-9]{2}/[0-9]{4}$"),f=new RegExp("^[0-9]{4}-[0-9]|1[0-2]-[0-9]{2}$");if(a.match(d)){var g=a.split("/");b=c(parseInt(g[0],10),parseInt(g[1],10),parseInt(g[2],10))}if(a.match(f)){var g=a.split("-");b=c(parseInt(g[1],10),parseInt(g[2],10),parseInt(g[0],10))}return e.$setValidity("validateAnyAgeDateOfBirth",b),b?a:void 0})}}}),e.directive("validateTodayDate",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,e){e.$parsers.unshift(function(a){var b=!1;if("undefined"==a||null==a||""==a)return e.$setValidity("validateTodayDate",!0),a;var c=new Date(a),f=new Date;f.setDate(f.getDate()-1);var g=new RegExp("^[0-9]{2}/[0-9]{2}/[0-9]{4}$"),h=new RegExp("^[0-9]{4}-[0-9]|1[0-2]-[0-9]{2}$");if(a.match(g)&&f>c){var i=a.split("/");b=d(parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10))}if(a.match(h)&&f>c){var i=a.split("-");b=d(parseInt(i[1],10),parseInt(i[2],10),parseInt(i[0],10))}return e.$setValidity("validateTodayDate",b),a})}}}),e.directive("validateProspectPassword",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){d.$parsers.unshift(function(a){var b=!1;if("undefined"==a||null==a||""==a)return d.$setValidity("validateProspectPassword",!0),a;var c=/^[a-zA-Z0-9]{6,8}$/i,e=/[a-zA-Z]/i,f=/[0-9]/i;return b=c.test(a)&&e.test(a)&&f.test(a),d.$setValidity("validateProspectPassword",b),a})}}}),e.directive("validateEmailAddress",function(){return{restrict:"A",require:"ngModel",
link:function(a,b,c,d){d.$parsers.unshift(function(a){var b=!1;if("undefined"==a||null==a||""==a)return d.$setValidity("validateEmailAddress",!0),a;var c=/^[a-zA-Z0-9-._]+@[a-zA-Z0-9-._]+(\.[a-zA-Z0-9-._]+)*\.(jobs|co.in|co.uk|aero|asia|biz|cat|com|coo|edu|gov|info|int|arts|firm|nom|rec|store|web|coop|post|xxx|mail|job|mil|mobi|museum|name|net|org|pro|tel|travel|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|yu|za|zm|zw)$/i;return b=!!c.test(a)&&!(0==a.indexOf(".")||0==a.indexOf("@")||a.indexOf("..")>-1||a.indexOf(".@")>-1||a.indexOf("@.")>-1),d.$setValidity("validateEmailAddress",b),a})}}}),e.directive("validatePhoneNumber",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){d.$parsers.unshift(function(a){var b=!1;if("undefined"==a||null==a||""==a)return d.$setValidity("validatePhoneNumber",!0),a;var c=/^(?!\d[1]{2}|[5]{3})([2-9]\d{2})[-]?[0-9]{3}[-]?[0-9]{4}$/;return b=!!c.test(a),d.$setValidity("validatePhoneNumber",b),a})}}}),e.directive("validateSsn",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){d.$parsers.unshift(function(a){var b=!1;if("undefined"==a||null==a||""==a)return d.$setValidity("validateSsn",!0),a;var c=/^(?!219(-?)09(-?)9999|078(-?)05(-?)1120|012(-?)34(-?)5678|123(-?)45(-?)6789)(?!000)\d{3}(-?)(?!00)\d{2}(-?)(?!0{4})\d{4}$/,e=/^[0-9]{2}-[0-9]{7}$/;return b=!(!c.test(a)&&!e.test(a)),d.$setValidity("validateSsn",b),a})}}}),e.directive("hgValidateAddress",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){d.$parsers.unshift(function(a){if("undefined"==a||null==a||""==a)return d.$setValidity("pobox",!0),a;var b=new RegExp("(P.O. BOX|P.O.BOX|P.O BOX|P O. BOX|P O.BOX|PO. BOX|PO BOX|POBOX|P O BOX|P. O. BOX|P.O.BO.X|PO_BOX|POSTOFFICEBOX|POST_OFFICE_BOX|POST OFFICE|POST OFFICE BOX|POB|PERSONAL MAIL BOX|PERSONAL MB|PMB|P M B|P.M.B.|P.M.B)","i");return a.match(b)?(d.$setValidity("pobox",!1),a):(d.$setValidity("pobox",!0),a)})}}}),e.directive("hgValidatePrintableAscii",function(){return{restrict:"A",require:"ngModel",priority:1,link:function(a,b,c,d){d.$parsers.unshift(function(a){if("undefined"==a||null==a||""==a)return d.$setValidity("pattern",!0),a;for(var b=0;b<a.length;++b)if(a.charCodeAt(b)<32||a.charCodeAt(b)>126)return d.$setValidity("pattern",!1),"";return d.$setValidity("pattern",!0),a})}}}),e.directive("hgValidateInteger",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){d.$parsers.unshift(function(a){if("undefined"==a||null==a||""==a)return d.$setValidity("pattern",!0),a;for(var b=0;b<a.length;++b)if(a.charCodeAt(b)<48||a.charCodeAt(b)>57)return d.$setValidity("pattern",!1),"";return d.$setValidity("pattern",!0),a})}}}),e.directive("hgValidateAlphaNumeric",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){d.$parsers.unshift(function(a){if("undefined"==a||null==a||""==a)return d.$setValidity("alphaNumeric",!0),a;for(var b=0;b<a.length;++b)if(a.charCodeAt(b)<48||a.charCodeAt(b)>122||a.charCodeAt(b)>57&&a.charCodeAt(b)<65||a.charCodeAt(b)>90&&a.charCodeAt(b)<97)return d.$setValidity("alphaNumeric",!1),a;return d.$setValidity("alphaNumeric",!0),a})}}}),e.directive("hgValidatePasswordCheck",function(){return{require:"ngModel",link:function(a,b,c,d){var e="#"+c.hgValidatePasswordCheck;b.add(e).on("keyup",function(){a.$apply(function(){var a=b.val()===$(e).val();d.$setValidity("pwmatch",a)})})}}}),e.directive("hgValidateOneLetterMinimum",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){d.$parsers.unshift(function(a){if("undefined"==a||null==a||""==a)return d.$setValidity("oneLetterMinimum",!0),a;for(var b=0;b<a.length;++b)if(a.charCodeAt(b)>64&&a.charCodeAt(b)<91||a.charCodeAt(b)>96&&a.charCodeAt(b)<123)return d.$setValidity("oneLetterMinimum",!0),a;return d.$setValidity("oneLetterMinimum",!1),a})}}}),e.directive("hgValidateNumberBetweenLetters",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){d.$parsers.unshift(function(a){if("undefined"==a||null==a||""==a)return d.$setValidity("numberBetweenLetters",!0),a;for(var b=0;b<a.length;++b)if(a.charCodeAt(b)>64&&a.charCodeAt(b)<91||a.charCodeAt(b)>96&&a.charCodeAt(b)<123)for(var c=b+1;c<a.length;++c)if(a.charCodeAt(c)>47&&a.charCodeAt(c)<58)for(var e=c+1;e<a.length;++e)if(a.charCodeAt(e)>64&&a.charCodeAt(e)<91||a.charCodeAt(e)>96&&a.charCodeAt(e)<123)return d.$setValidity("numberBetweenLetters",!0),a;return d.$setValidity("numberBetweenLetters",!1),a})}}}),e.directive("hgFormatUppercase",function(){return{require:"ngModel",link:function(a,b,c,d){var e=function(a){void 0==a&&(a="");var b=a.toUpperCase();return b!==a&&(d.$setViewValue(b),d.$render()),b};d.$parsers.push(e),e(a[c.ngModel])}}}),e.directive("hgFocus",function(){return{restrict:"A",link:function(a,b,c,d){a.$eval(c.hgFocus)&&b.focus()}}}),e.directive("hgValidateDuplicates",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){d&&a&&c&&(a.$watchCollection(c.hgValidateDuplicates,function(a){a.indexOf(d.$modelValue)==-1?d.$setValidity("validDuplicates",!0):d.$setValidity("validDuplicates",!1)}),d.$parsers.unshift(function(b){function e(a,b){return a=a[b]}d.$setValidity("invalidPromo",!0);for(var f=e(a,c.hgValidateDuplicates),g=0;g<f.length;g++)if(f[g].PromoCode==b.toUpperCase())return d.$setValidity("validDuplicates",!1),b;return d.$setValidity("validDuplicates",!0),b}))}}}),e.directive("hgValidateMatchField",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){if(d&&a&&c){var e="#"+c.hgValidateMatchField;b.add(e).on("keyup",function(){a.$apply(function(){var a=b.val().toUpperCase()===$(e).val().toUpperCase();d.$setValidity("mismatchField",a)})})}}}}),e.directive("validateZipCode",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){d.$parsers.unshift(function(a){var b=!1;if("undefined"==a||null==a||""==a)return d.$setValidity("validateZipCode",!0),a;var c=/^\d{5}$|^\d{5}-\d{4}$/i;return b=!!c.test(a),d.$setValidity("validateZipCode",b),a})}}}),e.directive("validateRdcAmount",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){d.$parsers.unshift(function(b){var c,e=!1,f=a.userAccounts.RDCRemainingDepositLimit;c=void 0==a.currentContrMaxAmtValueFlag?a.currentContrMaxAmtValue:a.currentContrMaxAmtValueFlag;var g,h=Number(b);return a.userAccounts.RDCRemainingDepositLimit>=25e3&&(g=h>=25e3&&a.userAccounts.RDCRemainingDepositLimit>=h),void 0!=a.userAccounts.selectedItem?1==a.userAccounts.selectedItem.value6?b<=f&&b<=c?(e=!0,a.userAccounts.endorseFlag=g):(e=!1,a.userAccounts.endorseFlag=g):b<=f?(e=!0,a.userAccounts.endorseFlag=g):(e=!1,a.userAccounts.endorseFlag=g):1==a.transferData.toAccount.RDCIsIra?b<=f&&b<=c?(e=!0,a.userAccounts.endorseFlag=g):(e=!1,a.userAccounts.endorseFlag=g):b<=f?(e=!0,a.userAccounts.endorseFlag=g):(e=!1,a.userAccounts.endorseFlag=g),d.$setValidity("validateRdcAmount",e),b})}}}),e.directive("decimals",["$filter",function(a){return{restrict:"A",require:"?ngModel",scope:{decimals:"@",decimalPoint:"@"},link:function(a,b,c,d){var e=parseInt(a.decimals)||2,f=a.decimalPoint||".";d.$render=function(){null!=d.$modelValue&&d.$modelValue>=0&&("number"==typeof e?b.val(d.$modelValue.toFixed(e).toString().replace(".",",")):b.val(d.$modelValue.toString().replace(".",",")))},d.$parsers.unshift(function(a){if("number"==typeof e){var b=parseFloat(a.replace(",","."));return 0===e?b:parseFloat(b.toFixed(e))}return parseFloat(a.replace(",","."))}),b.on("change",function(a){var c=parseFloat(b.val().replace(",","."));if(!isNaN(c)&&"number"==typeof e)if(0===e)b.val(c);else{var d=c.toFixed(e);b.val(d.replace(".",f))}})}}}]),e.directive("amountFormatter",function(){return{link:function(a,b,c){b.bind("keypress",function(a){var b=$(this).val()+(0!==a.charCode?String.fromCharCode(a.charCode):"");0===$(this).val().search(/(.*)\.[0-9][0-9]/)&&b.length>$(this).val().length&&a.preventDefault()})}}}),e.directive("currencyFormat",["$filter",function(a){return{require:"?ngModel",link:function(b,c,d,e){c.addClass("currency-field"),e&&e.$parsers.unshift(function(b){var d=a("number")(b.replace(/[\,\.]/g,""));return c.val(d),b})}}}]),e.directive("phoneFormat",["$filter",function(a){return{require:"?ngModel",link:function(a,b,c,d){b.addClass("phone-field"),d&&d.$parsers.unshift(function(a){if(!a)return"";var c=a.toString().trim().replace(/^\+/,"");if(c.match(/[^0-9]/))return a;var d,e;switch(c.length){case 10:d=c.slice(0,3),e=c.slice(3);break;default:return a}return e=e.slice(0,3)+"-"+e.slice(3),b.val((d+"-"+e).trim()),a})}}}]),e.directive("uiCurrency",["$filter","$parse",function(a,b){return{require:"ngModel",restrict:"A",link:function(b,c,d,e){function f(a,b){if(!a)return a;var c=a.replace(/[^0-9.]+/g,"").replace(/\.{2,}/,"."),d=c.split(".");return d.length>2?c=d[0]+"."+d[1].slice(0,2):2==d.length&&(c=d[0]+"."+d[1].slice(0,2)),b||e.$render(),c}c.addClass("currency-field"),e.$parsers.unshift(f),e.$render=function(){var b=f(e.$viewValue,!0);if(b){var d,g=b.split(".");d="."===b[b.length-1]?"$"+a("number")(parseFloat(b))+".":b.indexOf(".")!=-1&&1==g[g.length-1].length?"$"+a("number")(parseFloat(b),1):b.indexOf(".")!=-1&&1==g[g.length-1].length?"$"+a("number")(parseFloat(b),2):"$"+a("number")(parseFloat(b)),c.val(d)}}}}}]),e.directive("sliderCurrency",["$filter",function(a){return{require:"ngModel",link:function(b,c,d,e){e.$formatters.push(function(b){return a("currency")(b)}),e.$parsers.push(function(a){var b=a.replace("$","").replace(",","");return(isNaN(b)||b>1e8)&&(b=void 0),b})}}}]),e.directive("mask",["$filter",function(a){return{require:"?ngModel",link:function(a,b,c,d){d&&a.isLoggedIn&&d.$formatters.unshift(function(a){if(!a)return a;switch(c.mask){case"ssn":return a.replace(/-/g,"").replace(/^[\d]{6}/,"XXX-XX-X");case"dob":return a.replace(/^[\d]{2}\/[\d]{2}\/[\d]{1}/,"XX/XX/X");default:return a}})}}}])}.call(this),function(){var a;a=angular.module("hg.symbolSearch",["hg.common"]),a.directive("symbolSearch",["$parse","$http","$sce","$timeout","$window","hgContextSvc",function(a,b,c,d,e,f){return{restrict:"EAC",require:"ngModel",scope:{id:"@"},link:function(a,b,c,d){d.$parsers.unshift(function(b){if("undefined"==b||null==b||""==b)return d.$setValidity(a.id,!0),b;var c=f.appConfig.symbolLookupUrl+"jsonCwpEquities/"+b.slice(0,3)+".txt";return e.SuggestionBox={JsonpCallback:function(c,e){if("error"==c&&d.$setValidity(a.id,!1),void 0===e.Symbols)d.$setValidity(a.id,!1);else if(b.length>3){for(var f=!1,g=e.Symbols,h=b.toUpperCase(),i=0;i<g.length;i++)if(g[i][0].toUpperCase()==h){f=!0;break}d.$setValidity(a.id,f)}else d.$setValidity(a.id,!0);return a.$apply(),b}},$.ajax({type:"GET",url:c,async:!1,dataType:"script",success:function(a){},error:function(a){console.error(a)}}),b})}}}])}.call(this);var showFileUploadModule;showFileUploadModule=angular.module("hg.fileUpload",[]),showFileUploadModule.directive("hgFileModel",["$parse",function(a){return{restrict:"A",scope:{hgFileModel:"=",hgTrustDoc:"@"},link:function(a,b,c){var d=a.hgFileModel;b.bind("change",function(){a.$apply(function(){var c=a.hgTrustDoc;if(c){var e=["application/pdf","application/x-pdf","application/acrobat","applications/vnd.pdf","text/pdf","text/x-pdf","application/msword [official]","application/msword","application/doc","application/vnd.msword","application/vnd.ms-word","application/winword","application/word","application/x-msw6","application/x-msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/msexcel","application/x-msexcel","application/x-ms-excel","application/vnd.ms-excel","application/x-excel","application/x-dos_ms_excel","application/xls","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","image/gif","image/x-xbitmap","image/gi_","image/jpeg","image/jpg","image/jp_","application/jpg","application/x-jpg","image/pjpeg","image/pipeg","image/vnd.swiftview-jpeg","image/x-xbitmap","image/x-tif","image/tiff","image/x-tiff","application/tif","application/x-tif","application/tiff","application/x-tiff","image/png","application/png","application/x-png","image/bmp","image/x-bmp","image/x-bitmap","image/x-xbitmap","image/x-win-bitmap","image/x-windows-bmp","image/ms-bmp","image/x-ms-bmp","application/bmp","application/x-bmp","application/x-win-bitmap"];d[c]=b[0].files[0];for(var f,g=b[0].files[0].size/1024/1024,h=0;h<e.length;h++){if(b[0].files[0].type==e[h]){f=b[0].files[0].type;break}f="null"}if("trustFirstDoc"==c?(d.trustFirstDocExt=f,d.trustFirstDocSize=g):"trustLastDoc"==c?(d.trustLastDocExt=f,d.trustLastDocSize=g):(d.certificateOfTrustDocExt=f,d.certificateOfTrustDocSize=g),"trustFirstDoc"==c&&("null"==f?(d.trustDocValidation=!0,d.trustDocValidationError=!0,d.trustDocValidationErrorMsg="Please select Valid Format File"):g>=3?(d.trustDocValidation=!0,d.trustDocValidationError=!0,d.trustDocValidationErrorMsg="Please select less then 3MB file"):"null"==d.trustLastDocExt&&void 0!=d.trustLastDocExt?(d.trustDocValidation=!0,d.trustDocValidationError=!0,d.trustDocValidationErrorMsg="Please select Valid Format File"):("null"!=d.trustLastDocExt||void 0!=d.trustLastDocExt)&&d.trustLastDocSize>=3?(d.trustDocValidation=!0,d.trustDocValidationError=!0,d.trustDocValidationErrorMsg="Please select less then 3MB file"):d.trustDocValidationError=!1),"trustLastDoc"==c&&("null"==f?(d.trustDocValidation=!0,d.trustDocValidationError=!0,d.trustDocValidationErrorMsg="Please select Valid Format File"):g>=3?(d.trustDocValidation=!0,d.trustDocValidationError=!0,d.trustDocValidationErrorMsg="Please select less then 3MB file"):"null"==d.trustFirstDocExt&&void 0!=d.trustFirstDocExt?(d.trustDocValidation=!0,d.trustDocValidationError=!0,d.trustDocValidationErrorMsg="Please select Valid Format File"):("null"!=d.trustFirstDocExt||void 0!=d.trustFirstDocExt)&&d.trustFirstDocSize>=3?(d.trustDocValidation=!0,d.trustDocValidationError=!0,d.trustDocValidationErrorMsg="Please select less then 3MB file"):d.trustDocValidationError=!1),"certificateOfTrust"==c&&("null"==f?(d.trustDocValidation=!0,d.trustDocValidationError=!0,d.trustDocValidationErrorMsg="Please select Valid Format File"):g>=3?(d.trustDocValidation=!0,d.trustDocValidationError=!0,d.trustDocValidationErrorMsg="Please select less then 3MB file"):d.trustDocValidationError=!1),"null"!=d.trustFirstDocExt&&void 0!=d.trustFirstDocExt&&d.trustFirstDocSize<3&&"null"!=d.trustLastDocExt&&void 0!=d.trustLastDocExt&&d.trustLastDocSize<3)return d.trustDocValidation=!1,!1;if("null"!=d.certificateOfTrustDocExt&&void 0!=d.certificateOfTrustDocExt&&d.certificateOfTrustDocSize<3)return d.trustDocValidation=!1,!1}else d.trustDocValidation=!0,angular.element("input[type='file']").val(null),d.trustFirstDocExt=null,d.trustFirstDocSize=null,d.trustLastDocExt=null,d.trustLastDocSize=null,d.certificateOfTrustDocExt=null,d.certificateOfTrustDocSize=null,d.frontThumbnailAvailable=null,d.backThumbnailAvailable=null,d.trustCertificateThumbnailAvailable=null})})}}}]);
